!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OTV=t():e.OTV=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=152)}([function(e,t,n){var r=n(1),i=n(7),o=n(15),a=n(12),s=n(19),u=function(e,t,n){var l,c,d,h,f=e&u.F,p=e&u.G,g=e&u.S,y=e&u.P,v=e&u.B,m=p?r:g?r[t]||(r[t]={}):(r[t]||{}).prototype,b=p?i:i[t]||(i[t]={}),w=b.prototype||(b.prototype={});p&&(n=t);for(l in n)c=!f&&m&&void 0!==m[l],d=(c?m:n)[l],h=v&&c?s(d,r):y&&"function"==typeof d?s(Function.call,d):d,m&&a(m,l,d,e&u.U),b[l]!=d&&o(b,l,h),y&&w[l]!=d&&(w[l]=d)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(58)("wks"),i=n(32),o=n(1).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(21),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(2)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(3),i=n(104),o=n(28),a=Object.defineProperty;t.f=n(8)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(26);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"eventTimeline",get:function(){return"EVENT_TIMELINE"}},{key:"playback",get:function(){return"PLAYBACK"}},{key:"sessionManagement",get:function(){return"SESSION_MANAGEMENT"}},{key:"manifestDl",get:function(){return"MANIFEST_DL"}},{key:"segmentDl",get:function(){return"SEGMENT_DL"}},{key:"licenseRequest",get:function(){return"LICENCE_REQUEST"}}]),e}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"setURL",get:function(){return"seturl"}},{key:"seeking",get:function(){return"seeking"}},{key:"seeked",get:function(){return"seeked"}},{key:"prepared",get:function(){return"prepared"}},{key:"firstFrame",get:function(){return"firstframe"}},{key:"start",get:function(){return"start"}},{key:"stop",get:function(){return"stop"}}]),e}(),s=function(){function e(){r(this,e)}return i(e,null,[{key:"networkStart",get:function(){return"network_start"}},{key:"networkComplete",get:function(){return"network_complete"}},{key:"networkCancel",get:function(){return"network_cancel"}},{key:"networkError",get:function(){return"network_error"}}]),e}(),u=function(){function e(){r(this,e)}return i(e,null,[{key:"setupStart",get:function(){return"ssm_setup_start"}},{key:"setupSuccessful",get:function(){return"ssm_setup_success"}},{key:"setupFailure",get:function(){return"ssm_setup_failure"}},{key:"teardownStart",get:function(){return"ssm_teardown_start"}},{key:"teardownSuccessful",get:function(){return"ssm_teardown_success"}},{key:"teardownFailure",get:function(){return"ssm_teardown_failure"}},{key:"renewalStart",get:function(){return"ssm_renewal_start"}},{key:"renewalSuccessful",get:function(){return"ssm_renewal_success"}},{key:"renewalFailure",get:function(){return"ssm_renewal_failure"}},{key:"heartbeatStart",get:function(){return"ssm_heartbeat_start"}},{key:"heartbeatSuccessful",get:function(){return"ssm_heartbeat_success"}},{key:"heartbeatFailure",get:function(){return"ssm_heartbeat_failure"}}]),e}(),l=function(){function e(){r(this,e)}return i(e,null,[{key:"provisionRequestStart",get:function(){return"provision_request_start"}},{key:"provisionRequestSuccessful",get:function(){return"provision_request_success"}},{key:"provisionRequestFailed",get:function(){return"provision_request_failure"}},{key:"keyRequestStart",get:function(){return"key_request_start"}},{key:"keyRequestSuccessful",get:function(){return"key_request_success"}},{key:"keyRequestFailed",get:function(){return"key_request_failure"}}]),e}(),c=function(){function e(){r(this,e)}return i(e,null,[{key:"url",get:function(){return"url"}},{key:"error",get:function(){return"error"}},{key:"contentToken",get:function(){return"contentToken"}},{key:"sessionToken",get:function(){return"sessionToken"}}]),e}(),d=function e(t,n,i,o){r(this,e),this.time=t,this.eventType=n,this.command=i,this.extra=o},h=function(){function e(){r(this,e),this.timelines=[],this.enabled=!1}return i(e,[{key:"enableTimeline",value:function(e){e?this.enabled||(this.enabled=!0,this.addToTimeline(o.eventTimeline,"logging_started")):(this.addToTimeline(o.eventTimeline,"logging_stopped"),this.enabled=!1)}},{key:"isEnabled",value:function(){return this.enabled}},{key:"addToTimeline",value:function(e,t,n){var r=this;if(this.enabled){var i=new Date;setTimeout(function(){r._doAddEvent(i,e,t,n)},0)}}},{key:"removeTimeline",value:function(e){this.timelines=this.timelines.filter(function(t){return t.time>=e})}},{key:"getTimelineList",value:function(e){return e?e.xNumber?this._getTimelineListByNumber(e.xNumber):e.xType?this._getTimelineListByType(e.xType):e.xFrom&&e.xTo?this._getTimelineListByDate(e.xFrom,e.xTo):[]:this.timelines.slice()}},{key:"_getTimelineListByNumber",value:function(e){return this.timelines.slice(-e)}},{key:"_getTimelineListByDate",value:function(e,t){return this.timelines.filter(function(n){return n.time>=e&&n.time<=t})}},{key:"_getTimelineListByType",value:function(e){return this.timelines.filter(function(t){return t.eventType===e})}},{key:"_doAddEvent",value:function(e,t,n,r){var i=new d(e,t,n,r);this.timelines.push(i)}}]),e}();t.OtvEventTimeline=h,t.OtvEventType=o,t.OtvEventCommandPlayback=a,t.OtvEventCommandNetwork=s,t.OtvEventCommandSessionManagement=u,t.OtvEventCommandLicenseRequest=l,t.OtvEventExtraKey=c},function(e,t,n){var r=n(1),i=n(15),o=n(14),a=n(32)("src"),s=n(157),u=(""+s).split("toString");n(7).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var l="function"==typeof n;l&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(l&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t,n){var r=n(0),i=n(2),o=n(26),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(9),i=n(31);e.exports=n(8)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(51),i=n(26);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(20);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(52),i=n(31),o=n(16),a=n(28),s=n(14),u=n(104),l=Object.getOwnPropertyDescriptor;t.f=n(8)?l:function(e,t){if(e=o(e),t=a(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(0),i=n(7),o=n(2);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){var r=n(19),i=n(51),o=n(10),a=n(6),s=n(120);e.exports=function(e,t){var n=1==e,u=2==e,l=3==e,c=4==e,d=6==e,h=5==e||d,f=t||s;return function(t,s,p){for(var g,y,v=o(t),m=i(v),b=r(s,p,3),w=a(m.length),_=0,T=n?f(t,w):u?f(t,0):void 0;w>_;_++)if((h||_ in m)&&(g=m[_],y=b(g,_,v),e))if(n)T[_]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return _;case 2:T.push(g)}else if(c)return!1;return d?-1:l||c?c:T}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";if(n(8)){var r=n(33),i=n(1),o=n(2),a=n(0),s=n(69),u=n(96),l=n(19),c=n(47),d=n(31),h=n(15),f=n(48),p=n(21),g=n(6),y=n(131),v=n(35),m=n(28),b=n(14),w=n(53),_=n(4),T=n(10),S=n(88),E=n(36),k=n(38),A=n(37).f,x=n(90),C=n(32),I=n(5),M=n(24),O=n(59),P=n(54),j=n(92),D=n(45),R=n(62),L=n(46),N=n(91),U=n(122),F=n(9),B=n(22),V=F.f,H=B.f,W=i.RangeError,K=i.TypeError,q=i.Uint8Array,G=Array.prototype,z=u.ArrayBuffer,X=u.DataView,Y=M(0),J=M(2),Q=M(3),$=M(4),Z=M(5),ee=M(6),te=O(!0),ne=O(!1),re=j.values,ie=j.keys,oe=j.entries,ae=G.lastIndexOf,se=G.reduce,ue=G.reduceRight,le=G.join,ce=G.sort,de=G.slice,he=G.toString,fe=G.toLocaleString,pe=I("iterator"),ge=I("toStringTag"),ye=C("typed_constructor"),ve=C("def_constructor"),me=s.CONSTR,be=s.TYPED,we=s.VIEW,_e=M(1,function(e,t){return Ae(P(e,e[ve]),t)}),Te=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Se=!!q&&!!q.prototype.set&&o(function(){new q(1).set({})}),Ee=function(e,t){var n=p(e);if(n<0||n%t)throw W("Wrong offset!");return n},ke=function(e){if(_(e)&&be in e)return e;throw K(e+" is not a typed array!")},Ae=function(e,t){if(!(_(e)&&ye in e))throw K("It is not a typed array constructor!");return new e(t)},xe=function(e,t){return Ce(P(e,e[ve]),t)},Ce=function(e,t){for(var n=0,r=t.length,i=Ae(e,r);r>n;)i[n]=t[n++];return i},Ie=function(e,t,n){V(e,t,{get:function(){return this._d[n]}})},Me=function(e){var t,n,r,i,o,a,s=T(e),u=arguments.length,c=u>1?arguments[1]:void 0,d=void 0!==c,h=x(s);if(void 0!=h&&!S(h)){for(a=h.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(d&&u>2&&(c=l(c,arguments[2],2)),t=0,n=g(s.length),i=Ae(this,n);n>t;t++)i[t]=d?c(s[t],t):s[t];return i},Oe=function(){for(var e=0,t=arguments.length,n=Ae(this,t);t>e;)n[e]=arguments[e++];return n},Pe=!!q&&o(function(){fe.call(new q(1))}),je=function(){return fe.apply(Pe?de.call(ke(this)):ke(this),arguments)},De={copyWithin:function(e,t){return U.call(ke(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return $(ke(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return N.apply(ke(this),arguments)},filter:function(e){return xe(this,J(ke(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(ke(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(ke(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Y(ke(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(ke(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(ke(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return le.apply(ke(this),arguments)},lastIndexOf:function(e){return ae.apply(ke(this),arguments)},map:function(e){return _e(ke(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(ke(this),arguments)},reduceRight:function(e){return ue.apply(ke(this),arguments)},reverse:function(){for(var e,t=this,n=ke(t).length,r=Math.floor(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t},some:function(e){return Q(ke(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ce.call(ke(this),e)},subarray:function(e,t){var n=ke(this),r=n.length,i=v(e,r);return new(P(n,n[ve]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,g((void 0===t?r:v(t,r))-i))}},Re=function(e,t){return xe(this,de.call(ke(this),e,t))},Le=function(e){ke(this);var t=Ee(arguments[1],1),n=this.length,r=T(e),i=g(r.length),o=0;if(i+t>n)throw W("Wrong length!");for(;o<i;)this[t+o]=r[o++]},Ne={entries:function(){return oe.call(ke(this))},keys:function(){return ie.call(ke(this))},values:function(){return re.call(ke(this))}},Ue=function(e,t){return _(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return Ue(e,t=m(t,!0))?d(2,e[t]):H(e,t)},Be=function(e,t,n){return!(Ue(e,t=m(t,!0))&&_(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?V(e,t,n):(e[t]=n.value,e)};me||(B.f=Fe,F.f=Be),a(a.S+a.F*!me,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:Be}),o(function(){he.call({})})&&(he=fe=function(){return le.call(this)});var Ve=f({},De);f(Ve,Ne),h(Ve,pe,Ne.values),f(Ve,{slice:Re,set:Le,constructor:function(){},toString:he,toLocaleString:je}),Ie(Ve,"buffer","b"),Ie(Ve,"byteOffset","o"),Ie(Ve,"byteLength","l"),Ie(Ve,"length","e"),V(Ve,ge,{get:function(){return this[be]}}),e.exports=function(e,t,n,u){u=!!u;var l=e+(u?"Clamped":"")+"Array",d="get"+e,f="set"+e,p=i[l],v=p||{},m=p&&k(p),b=!p||!s.ABV,T={},S=p&&p.prototype,x=function(e,n){var r=e._d;return r.v[d](n*t+r.o,Te)},C=function(e,n,r){var i=e._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[f](n*t+i.o,r,Te)},I=function(e,t){V(e,t,{get:function(){return x(this,t)},set:function(e){return C(this,t,e)},enumerable:!0})};b?(p=n(function(e,n,r,i){c(e,p,l,"_d");var o,a,s,u,d=0,f=0;if(_(n)){if(!(n instanceof z||"ArrayBuffer"==(u=w(n))||"SharedArrayBuffer"==u))return be in n?Ce(p,n):Me.call(p,n);o=n,f=Ee(r,t);var v=n.byteLength;if(void 0===i){if(v%t)throw W("Wrong length!");if((a=v-f)<0)throw W("Wrong length!")}else if((a=g(i)*t)+f>v)throw W("Wrong length!");s=a/t}else s=y(n),a=s*t,o=new z(a);for(h(e,"_d",{b:o,o:f,l:a,e:s,v:new X(o)});d<s;)I(e,d++)}),S=p.prototype=E(Ve),h(S,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&R(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=n(function(e,n,r,i){c(e,p,l);var o;return _(n)?n instanceof z||"ArrayBuffer"==(o=w(n))||"SharedArrayBuffer"==o?void 0!==i?new v(n,Ee(r,t),i):void 0!==r?new v(n,Ee(r,t)):new v(n):be in n?Ce(p,n):Me.call(p,n):new v(y(n))}),Y(m!==Function.prototype?A(v).concat(A(m)):A(v),function(e){e in p||h(p,e,v[e])}),p.prototype=S,r||(S.constructor=p));var M=S[pe],O=!!M&&("values"==M.name||void 0==M.name),P=Ne.values;h(p,ye,!0),h(S,be,l),h(S,we,!0),h(S,ve,p),(u?new p(1)[ge]==l:ge in S)||V(S,ge,{get:function(){return l}}),T[l]=p,a(a.G+a.W+a.F*(p!=v),T),a(a.S,l,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o(function(){v.of.call(p,1)}),l,{from:Me,of:Oe}),"BYTES_PER_ELEMENT"in S||h(S,"BYTES_PER_ELEMENT",t),a(a.P,l,De),L(l),a(a.P+a.F*Se,l,{set:Le}),a(a.P+a.F*!O,l,Ne),r||S.toString==he||(S.toString=he),a(a.P+a.F*o(function(){new p(1).slice()}),l,{slice:Re}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){S.toLocaleString.call([1,2])})),l,{toLocaleString:je}),D[l]=O?M:P,r||O||h(S,pe,P)}}else e.exports=function(){}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(32)("meta"),i=n(4),o=n(14),a=n(9).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(2)(function(){return u(Object.preventExtensions({}))}),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[r].i},h=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[r].w},f=function(e){return l&&p.NEED&&u(e)&&!o(e,r)&&c(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:h,onFreeze:f}},function(e,t,n){"use strict";function r(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}function i(e){var t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)}function o(e){var t=new Uint8Array(e);return String.fromCharCode.apply(null,t)}function a(e){for(var t=new ArrayBuffer(e.length*u),n=new Uint16Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}function s(e){return btoa(new Uint8Array(e).reduce(function(e,t){return e+String.fromCharCode(t)},""))}Object.defineProperty(t,"__esModule",{value:!0});var u=2;t.default={base64DecodeUint8Array:r,arrayToString:i,arrayBufferToString:o,stringToArray:a,toBase64:s}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(106),i=n(75);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(21),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(3),i=n(107),o=n(75),a=n(74)("IE_PROTO"),s=function(){},u=function(){var e,t=n(72)("iframe"),r=o.length;for(t.style.display="none",n(76).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(106),i=n(75).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(14),i=n(10),o=n(74)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(5)("unscopables"),i=Array.prototype;void 0==i[r]&&n(15)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"ready",value:function(){}},{key:"updateSourceData",value:function(e){return e}},{key:"tearDown",value:function(){}},{key:"renewLicence",value:function(){}}]),e}();t.default=o},function(e,t,n){"use strict";function r(){return!u()&&-1!==window.navigator.userAgent.indexOf("Safari")&&-1===window.navigator.userAgent.indexOf("Chrome")}function i(){var e=window.chrome,t=window.navigator,n=t.vendor,r=void 0!==window.opr,i=t.userAgent.indexOf("Edge")>-1;return!!t.userAgent.match("CriOS")||null!==e&&void 0!==e&&"Google Inc."===n&&!1===r&&!1===i}function o(){return window.navigator.userAgent.toLowerCase().includes("web0s")}function a(){return window.navigator.userAgent.toLowerCase().includes("samsung")&&window.navigator.userAgent.toLowerCase().includes("hbbtv")}function s(){return window.navigator.userAgent.toLowerCase().includes("vestel")}function u(){return window.navigator.userAgent.toLowerCase().includes("smart")}function l(){return window.navigator.userAgent.toLowerCase().includes("xbox")}function c(){return window.navigator.userAgent.toLowerCase().includes("hbbtv")}function d(){var e=/tizen\W[\d|.]+/g,t=window.navigator.userAgent.toLocaleLowerCase().match(e);if(t){var n=t[0].slice("tizen ".length);return Number(n)}return NaN}function h(){var e=d();return!isNaN(e)&&e>=5.5}Object.defineProperty(t,"__esModule",{value:!0}),t.default={isSafari:r,isChrome:i,isSmartTV:u,isXbox:l,isHbbtv:c,isVestel:s,isTVKeyCapable:a,getTizenVersion:d,isLateTizen:h,isWebOS:o}},function(e,t,n){var r=n(9).f,i=n(14),o=n(5)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(0),i=n(26),o=n(2),a=n(78),s="["+a+"]",u="​",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),d=function(e,t,n){var i={},s=o(function(){return!!a[e]()||u[e]()!=u}),l=i[e]=s?t(h):a[e];n&&(i[n]=l),r(r.P+r.F*s,"String",i)},h=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=d},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(1),i=n(9),o=n(8),a=n(5)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(12);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.DrmDashTimeline=t.DrmDashController=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=n(41),h=r(d),f=n(11),p=n(42),g=r(p),y=n(361),v=r(y),m=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.log=n,i.vjsPlayer=r,i.drmDetails=e,i._persistentState=new v.default(g.default.isSmartTV()),i.timeline=i._makeTimelineLogger(),i}return s(t,e),l(t,[{key:"ready",value:function(e){this.vjsPlayer.tech_.shaka_&&(this._setWidevineAdvancedDrm(),this._configureDrm(),this.vjsPlayer&&this.vjsPlayer.tech_&&this.timeline._registerShakaFilters(this.vjsPlayer.tech_.shaka_),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this,e))}},{key:"tearDown",value:function(){return this.vjsPlayer&&this.vjsPlayer.tech_,this.token="",this.source=void 0,c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this)}},{key:"updateSourceData",value:function(e){this.token=e.token,this.vjsPlayer&&this.vjsPlayer.tech_.shaka_&&this._configureDrm();var n=/\.mpd/i;return void 0===e.type&&n.test(e.src)&&(e.type="application/dash+xml"),this.timeline.setSource(e),this.source=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e),this.source}},{key:"renewLicence",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renewLicence",this).call(this),this.vjsPlayer.tech_.shaka_&&this.vjsPlayer.tech_.shaka_.requestLicence?this.vjsPlayer.tech_.shaka_.requestLicence():this.log("Unable to request new licence. No tech capability")}},{key:"_makeTimelineLogger",value:function(){return new w}},{key:"_setWidevineAdvancedDrm",value:function(){var e={},t=this._getWidevineServerCertificate(),n=this._getPersistentState();t&&(!g.default.isSmartTV()||!g.default.isTVKeyCapable()&&g.default.isLateTizen())&&(e.serverCertificate=t),n&&(e.persistentStateRequired="required"===n),this.vjsPlayer.tech_.shaka_&&e!=={}&&this.vjsPlayer.tech_.shaka_.configure({drm:{advanced:{"com.widevine.alpha":e}}})}},{key:"_getPersistentState",value:function(){var e="optional";return this.drmDetails&&this.drmDetails.config["com.widevine.alpha"]&&this.drmDetails.config["com.widevine.alpha"].persistentState&&(e=this._persistentState.adjustDefault(this.drmDetails.config["com.widevine.alpha"].persistentState)),this.log("PersistentState is "+e),e}},{key:"_configureDrm",value:function(){}},{key:"_getWidevineServerCertificate",value:function(){var e=void 0;return this.drmDetails&&this.drmDetails.config&&this.drmDetails.config.widevineServerCertificate&&(e=u(this.drmDetails.config.widevineServerCertificate)),e}},{key:"_configureSingleSession",value:function(){this.singleSessionController=new b(this.vjsPlayer,this.vjsPlayer.tech_.shaka_)}}]),t}(h.default),b=function(){function e(t,n){o(this,e),this.requestedLicence=!1,this._onLoadstartHandle=this._onLoadstart.bind(this),this._licenceRequiredHandle=this._licenceRequiredCallback.bind(this),n.setLicenceRequiredCallback&&(n.setLicenceRequiredCallback(this._licenceRequiredHandle),t.off("loadstart",this._onLoadstartHandle),t.on("loadstart",this._onLoadstartHandle))}return l(e,[{key:"_onLoadstart",value:function(){this.requestedLicence=!1}},{key:"_licenceRequiredCallback",value:function(){return this.requestedLicence?[!0,!1]:(this.requestedLicence=!0,[!1,!1])}}]),e}(),w=function(){function e(){o(this,e),this.url="",this.provision=!1,this.requestFilterHandle=this._shakaRequestFilter.bind(this),this.responseFilterHandle=this._shakaResponseFilter.bind(this)}return l(e,[{key:"setSource",value:function(e){this.url=e.src||e}},{key:"tearDown",value:function(){this.provision=!1}},{key:"_registerShakaFilters",value:function(e){e&&(this._unregisterShakaFilters(e),e.addEventListener("error",this._onErrorEvent.bind(this)),e.getNetworkingEngine().registerRequestFilter(this.requestFilterHandle),e.getNetworkingEngine().registerResponseFilter(this.responseFilterHandle))}},{key:"_unregisterShakaFilters",value:function(e){e&&(e.getNetworkingEngine().unregisterRequestFilter(this.requestFilterHandle),e.getNetworkingEngine().unregisterResponseFilter(this.responseFilterHandle))}},{key:"_onErrorEvent",value:function(e){if(6007===e.detail.code){var t=f.OtvEventType.licenseRequest,n=i({},f.OtvEventExtraKey.url,this.url),r=void 0;n[f.OtvEventExtraKey.error]=e.detail.message,r=this.provision?f.OtvEventCommandLicenseRequest.provisionRequestFailed:f.OtvEventCommandLicenseRequest.keyRequestFailed;var o=JSON.stringify(n);OTV.eventTimeline.addToTimeline(t,r,o)}}},{key:"_shakaRequestFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE){var n=f.OtvEventType.licenseRequest,r=JSON.stringify(i({},f.OtvEventExtraKey.url,this.url));this.provision=t.body.byteLength<100;var o=this.provision?f.OtvEventCommandLicenseRequest.provisionRequestStart:f.OtvEventCommandLicenseRequest.keyRequestStart;OTV.eventTimeline.addToTimeline(n,o,r)}}},{key:"_shakaResponseFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE){var n=this.url?this.url:t.url,r=f.OtvEventType.licenseRequest,o=i({},f.OtvEventExtraKey.url,n),a=void 0;a=this.provision?f.OtvEventCommandLicenseRequest.provisionRequestSuccessful:f.OtvEventCommandLicenseRequest.keyRequestSuccessful;var s=JSON.stringify(o);OTV.eventTimeline.addToTimeline(r,a,s)}}}]),e}();t.DrmDashController=m,t.DrmDashTimeline=w},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(103),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){r(this,e),this.videojs=t,this.eventListeners=new a.default.ListenerList}return i(e,[{key:"_getShakaPlayerInstance",value:function(){var e=void 0;return this.videojs&&this.videojs.tech_&&(e=this.videojs.tech_.shaka_),e}},{key:"addListener",value:function(e){this.eventListeners.add(e)}},{key:"removeListener",value:function(e){this.eventListeners.remove(e)}},{key:"setListener",value:function(e){this.listener=e}},{key:"dispose",value:function(){this.eventListeners.clear(),this.eventListeners=null,this.videojs=null}}]),e}();t.default={Statistics:s}},function(e,t,n){var r=n(25);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(25),i=n(5)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r=n(3),i=n(20),o=n(5)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){(function(t){e.exports=t.otvplayer=n(352)}).call(t,n(18))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.logger=t,this.type=n,this.string=""}return i(e,[{key:"addType",value:function(){return this.string+=this.type,this}},{key:"log",value:function(){return this.logger(this.string),this}},{key:"warn",value:function(){return this.logger.warn(this.string),this}},{key:"error",value:function(){return this.logger.error(this.string),this}},{key:"debug",value:function(){return this.logger.debug(this.string),this}},{key:"message",value:function(e){return this.string+=e,this}},{key:"throw",value:function(){throw new Error(this.string)}}]),e}(),a=function(){function e(t,n){r(this,e),this.logger=t,this.type=n}return i(e,[{key:"addType",value:function(){return new o(this.logger,this.type).addType()}},{key:"message",value:function(e){return new o(this.logger,this.type).message(e)}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=["otv","customer"],s=function(){function e(){r(this,e),this.configs={};var t=!0,n=!1,i=void 0;try{for(var o,s=a[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var u=o.value;this.configs[u]={}}}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}this.tech=void 0}return o(e,[{key:"setTech",value:function(e){this.tech=e,e&&this._applyConfig()}},{key:"getConfiguration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a[0];return this.tech?this.tech.getConfiguration():JSON.parse(JSON.stringify(this.configs[e]))}},{key:"configure",value:function(e,t,n){var r=t;return 3===arguments.length&&"string"==typeof t&&(r=shaka.util.ConfigUtils.convertToConfigObject(t,n)),"object"===(void 0===r?"undefined":i(r))&&(!!a.includes(e)&&(this._mergeConfigObjects(this.configs[e],r),!this.tech||this._applyConfig()))}},{key:"_applyConfig",value:function(){var e={},t=!0,n=!1,r=void 0;try{for(var i,o=a[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;this._mergeConfigObjects(e,this.configs[s])}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return this.tech.configure(e)}},{key:"_mergeConfigObjects",value:function(e,t){for(var n in t)t[n]&&t[n].constructor===Object?(e[n]||(e[n]={}),this._mergeConfigObjects(e[n],t[n])):e[n]=t[n]}}]),e}();t.TechConfiguration=s,t.CONFIG_TYPE_CUSTOMER="customer",t.CONFIG_TYPE_OTV="otv"},function(e,t,n){var r=n(7),i=n(1),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(33)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(16),i=n(6),o=n(35);e.exports=function(e){return function(t,n,a){var s,u=r(t),l=i(u.length),c=o(a,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(25);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(5)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(3);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(53),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(124);var r=n(12),i=n(15),o=n(2),a=n(26),s=n(5),u=n(93),l=s("species"),c=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var h=s(e),f=!o(function(){var t={};return t[h]=function(){return 7},7!=""[e](t)}),p=f?!o(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[l]=function(){return n}),n[h](""),!t}):void 0;if(!f||!p||"replace"===e&&!c||"split"===e&&!d){var g=/./[h],y=n(a,h,""[e],function(e,t,n,r,i){return t.exec===u?f&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),v=y[0],m=y[1];r(String.prototype,e,v),i(RegExp.prototype,h,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})}}},function(e,t,n){var r=n(19),i=n(119),o=n(88),a=n(3),s=n(6),u=n(90),l={},c={},t=e.exports=function(e,t,n,d,h){var f,p,g,y,v=h?function(){return e}:u(e),m=r(n,d,t?2:1),b=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(f=s(e.length);f>b;b++)if((y=t?m(a(p=e[b])[0],p[1]):m(e[b]))===l||y===c)return y}else for(g=v.call(e);!(p=g.next()).done;)if((y=i(g,m,p.value,t))===l||y===c)return y};t.BREAK=l,t.RETURN=c},function(e,t,n){var r=n(1),i=r.navigator;e.exports=i&&i.userAgent||""},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(12),a=n(48),s=n(29),u=n(66),l=n(47),c=n(4),d=n(2),h=n(62),f=n(43),p=n(79);e.exports=function(e,t,n,g,y,v){var m=r[e],b=m,w=y?"set":"add",_=b&&b.prototype,T={},S=function(e){var t=_[e];o(_,e,"delete"==e?function(e){return!(v&&!c(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(v||_.forEach&&!d(function(){(new b).entries().next()}))){var E=new b,k=E[w](v?{}:-0,1)!=E,A=d(function(){E.has(1)}),x=h(function(e){new b(e)}),C=!v&&d(function(){for(var e=new b,t=5;t--;)e[w](t,t);return!e.has(-0)});x||(b=t(function(t,n){l(t,b,e);var r=p(new m,t,b);return void 0!=n&&u(n,y,r[w],r),r}),b.prototype=_,_.constructor=b),(A||C)&&(S("delete"),S("has"),y&&S("get")),(C||k)&&S(w),v&&_.clear&&delete _.clear}else b=g.getConstructor(t,e,y,w),a(b.prototype,n),s.NEED=!0;return f(b,e),T[e]=b,i(i.G+i.W+i.F*(b!=m),T),v||g.setStrong(b,e,y),b}},function(e,t,n){for(var r,i=n(1),o=n(15),a=n(32),s=a("typed_array"),u=a("view"),l=!(!i.ArrayBuffer||!i.DataView),c=l,d=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(r=i[h[d++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):c=!1;e.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:u}},function(e,t,n){"use strict";function r(e,t,n,r){var a=e;return a+="/"+t,a+=i(n),a+="/contentlicenseservice/v1",a+=o(r)}function i(e){var t=null;return"FairPlay"===e?t="fpls":"PlayReady"===e?t="prls":"Widevine"===e?t="wvls":"Tvkey"===e&&(t="tkls"),"/"+t}function o(e){var t=null;return"License"===e?t="licenses":"Cert"===e&&(t="certificates"),"/"+t}Object.defineProperty(t,"__esModule",{value:!0}),t.default={buildUrlWith:r,drmSpecificSeparatorFor:i,requestSpecificSuffixFor:o}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=e.trim().toLowerCase(),n=null,r=!0,i=!1,o=void 0;try{for(var a,s=Object.keys(f)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(t.includes(u)){n=f[u];break}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}function o(e){var t=null;return p.includes(e)?t=h:e===d&&(t=d),t}function a(e){var t=null;return e.headers.hasOwnProperty("content-type")&&(t=o(e.headers["content-type"])),t}function s(e){var t=null;return e.startsWith("#EXTM3U")?t=h:e.includes("MPD")&&(t=d),t}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(381),c=function(e){return e&&e.__esModule?e:{default:e}}(l),d="application/dash+xml",h="application/x-mpegURL",f={};f[".m3u8"]=h,f[".mpd"]=d,f["manifest(format=m3u8-aapl)"]=h,f["manifest(format=mpd-time-csf)"]=d;var p=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.default;r(this,e),this.XMLHttpRequester=t}return u(e,[{key:"build",value:function(e,t){var n=this;return t?Promise.resolve({src:e,type:t}):new Promise(function(t,r){var o=i(e);o?t({src:e,type:o}):n._getMimeTypeFromManifest(e,t,r)})}},{key:"_getMimeTypeFromManifest",value:function(e,t,n){var r=this;(new this.XMLHttpRequester).send({method:"HEAD",url:e}).then(function(i){if(200!==i.status)throw new Error("Invalid URL given");var o=a(i);o?t({src:e,type:o}):r._parseManifestForMimeType(e,t,n)}).catch(function(){r._parseManifestForMimeType(e,t,n)})}},{key:"_parseManifestForMimeType",value:function(e,t,n){(new this.XMLHttpRequester).send({method:"GET",url:e}).then(function(n){if(200!==n.status)throw new Error("Invalid URL given");var r=s(n.responseText);if(!r)throw new Error("Cannot play given manifest");t({src:e,type:r})}).catch(function(){n("XHR Error")})}}]),e}();t.default={SourceBuilder:g}},function(e,t,n){var r=n(4),i=n(1).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){t.f=n(5)},function(e,t,n){var r=n(58)("keys"),i=n(32);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(1).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(4),i=n(3),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(19)(Function.call,n(22).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(4),i=n(77).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(21),i=n(26);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(21),i=n(26);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(33),i=n(0),o=n(12),a=n(15),s=n(45),u=n(118),l=n(43),c=n(38),d=n(5)("iterator"),h=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,p,g,y,v){u(n,t,p);var m,b,w,_=function(e){if(!h&&e in k)return k[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",S="values"==g,E=!1,k=e.prototype,A=k[d]||k["@@iterator"]||g&&k[g],x=A||_(g),C=g?S?_("entries"):x:void 0,I="Array"==t?k.entries||A:A;if(I&&(w=c(I.call(new e)))!==Object.prototype&&w.next&&(l(w,T,!0),r||"function"==typeof w[d]||a(w,d,f)),S&&A&&"values"!==A.name&&(E=!0,x=function(){return A.call(this)}),r&&!v||!h&&!E&&k[d]||a(k,d,x),s[t]=x,s[T]=f,g)if(m={values:S?x:_("values"),keys:y?x:_("keys"),entries:C},v)for(b in m)b in k||o(k,b,m[b]);else i(i.P+i.F*(h||E),t,m);return m}},function(e,t,n){var r=n(86),i=n(26);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(4),i=n(25),o=n(5)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(5)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(45),i=n(5)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(9),i=n(31);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(53),i=n(5)("iterator"),o=n(45);e.exports=n(7).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";var r=n(10),i=n(35),o=n(6);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,l=void 0===u?n:i(u,n);l>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(39),i=n(123),o=n(45),a=n(16);e.exports=n(84)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r=n(63),i=RegExp.prototype.exec,o=String.prototype.replace,a=i,s=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=void 0!==/()??/.exec("")[1];(s||u)&&(a=function(e){var t,n,a,l,c=this;return u&&(n=new RegExp("^"+c.source+"$(?!\\s)",r.call(c))),s&&(t=c.lastIndex),a=i.call(c,e),s&&a&&(c.lastIndex=c.global?a.index+a[0].length:t),u&&a&&a.length>1&&o.call(a[0],n,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(a[l]=void 0)}),a}),e.exports=a},function(e,t,n){"use strict";var r=n(83)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r,i,o,a=n(19),s=n(112),u=n(76),l=n(72),c=n(1),d=c.process,h=c.setImmediate,f=c.clearImmediate,p=c.MessageChannel,g=c.Dispatch,y=0,v={},m=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},b=function(e){m.call(e.data)};h&&f||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++y]=function(){s("function"==typeof e?e:Function(e),t)},r(y),y},f=function(e){delete v[e]},"process"==n(25)(d)?r=function(e){d.nextTick(a(m,e,1))}:g&&g.now?r=function(e){g.now(a(m,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),m.call(e)}}:function(e){setTimeout(a(m,e,1),0)}),e.exports={set:h,clear:f}},function(e,t,n){"use strict";function r(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,u=(1<<s)-1,l=u>>1,c=23===t?U(2,-24)-U(2,-77):0,d=0,h=e<0||0===e&&1/e<0?1:0;for(e=N(e),e!=e||e===R?(i=e!=e?1:0,r=u):(r=F(B(e)/V),e*(o=U(2,-r))<1&&(r--,o*=2),e+=r+l>=1?c/o:c*U(2,1-l),e*o>=2&&(r++,o/=2),r+l>=u?(i=0,r=u):r+l>=1?(i=(e*o-1)*U(2,t),r+=l):(i=e*U(2,l-1)*U(2,t),r=0));t>=8;a[d++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[d++]=255&r,r/=256,s-=8);return a[--d]|=128*h,a}function i(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,l=e[u--],c=127&l;for(l>>=7;s>0;c=256*c+e[u],u--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=t;s>0;r=256*r+e[u],u--,s-=8);if(0===c)c=1-a;else{if(c===o)return r?NaN:l?-R:R;r+=U(2,t),c-=a}return(l?-1:1)*r*U(2,c-t)}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function a(e){return[255&e]}function s(e){return[255&e,e>>8&255]}function u(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function l(e){return r(e,52,8)}function c(e){return r(e,23,4)}function d(e,t,n){A(e[I],t,{get:function(){return this[n]}})}function h(e,t,n,r){var i=+n,o=E(i);if(o+t>e[W])throw D(M);var a=e[H]._b,s=o+e[K],u=a.slice(s,s+t);return r?u:u.reverse()}function f(e,t,n,r,i,o){var a=+n,s=E(a);if(s+t>e[W])throw D(M);for(var u=e[H]._b,l=s+e[K],c=r(+i),d=0;d<t;d++)u[l+d]=c[o?d:t-d-1]}var p=n(1),g=n(8),y=n(33),v=n(69),m=n(15),b=n(48),w=n(2),_=n(47),T=n(21),S=n(6),E=n(131),k=n(37).f,A=n(9).f,x=n(91),C=n(43),I="prototype",M="Wrong index!",O=p.ArrayBuffer,P=p.DataView,j=p.Math,D=p.RangeError,R=p.Infinity,L=O,N=j.abs,U=j.pow,F=j.floor,B=j.log,V=j.LN2,H=g?"_b":"buffer",W=g?"_l":"byteLength",K=g?"_o":"byteOffset";if(v.ABV){if(!w(function(){O(1)})||!w(function(){new O(-1)})||w(function(){return new O,new O(1.5),new O(NaN),"ArrayBuffer"!=O.name})){O=function(e){return _(this,O),new L(E(e))};for(var q,G=O[I]=L[I],z=k(L),X=0;z.length>X;)(q=z[X++])in O||m(O,q,L[q]);y||(G.constructor=O)}var Y=new P(new O(2)),J=P[I].setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||b(P[I],{setInt8:function(e,t){J.call(this,e,t<<24>>24)},setUint8:function(e,t){J.call(this,e,t<<24>>24)}},!0)}else O=function(e){_(this,O,"ArrayBuffer");var t=E(e);this._b=x.call(new Array(t),0),this[W]=t},P=function(e,t,n){_(this,P,"DataView"),_(e,O,"DataView");var r=e[W],i=T(t);if(i<0||i>r)throw D("Wrong offset!");if(n=void 0===n?r-i:S(n),i+n>r)throw D("Wrong length!");this[H]=e,this[K]=i,this[W]=n},g&&(d(O,"byteLength","_l"),d(P,"buffer","_b"),d(P,"byteLength","_l"),d(P,"byteOffset","_o")),b(P[I],{getInt8:function(e){return h(this,1,e)[0]<<24>>24},getUint8:function(e){return h(this,1,e)[0]},getInt16:function(e){var t=h(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=h(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return o(h(this,4,e,arguments[1]))},getUint32:function(e){return o(h(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return i(h(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return i(h(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){f(this,1,e,a,t)},setUint8:function(e,t){f(this,1,e,a,t)},setInt16:function(e,t){f(this,2,e,s,t,arguments[2])},setUint16:function(e,t){f(this,2,e,s,t,arguments[2])},setInt32:function(e,t){f(this,4,e,u,t,arguments[2])},setUint32:function(e,t){f(this,4,e,u,t,arguments[2])},setFloat32:function(e,t){f(this,4,e,c,t,arguments[2])},setFloat64:function(e,t){f(this,8,e,l,t,arguments[2])}});C(O,"ArrayBuffer"),C(P,"DataView"),m(P[I],v.VIEW,!0),t.ArrayBuffer=O,t.DataView=P},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(136)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),u=n(30),l=r(u),c=n(139),d=r(c),h=function(){function e(t){o(this,e),this.drmOptions=t.drmOptions,this.logger=t.logger,this.drmOptions.licenceServer||this.logger.addType().message(" FairPlay licenceServer not configured!").warn(),this.drmImplementer=d.default.getDrmImplementation(this.drmOptions.system)}return a(e,[{key:"setToken",value:function(e){this.token=e}},{key:"request",value:function(e,t){var n=this;this.logger.message("Function: FairPlayLicenceRequester.request()").log();var r=this._getLicenceUri(t),i={method:"POST",mode:"cors",redirect:"follow",headers:{Accept:"application/json","Content-Type":"application/octet-stream","nv-authorizations":this._getTokenString(t)},body:e};return this._logKeyRequestStatTimelineEvent(t,r),new Promise(function(e,o){var a=n;fetch(r,i).then(function(i){if(i.ok){a._logKeyStatSuccessTimelineEvent(t,r);var s=i.clone();i.json().then(function(t){n.logger.message("CkcMessage (JSON): "+t.CkcMessage).debug(),e(l.default.base64DecodeUint8Array(t.CkcMessage))}).catch(function(){n.logger.message("CkcMessage (Binary) received").debug(),s.arrayBuffer().then(function(t){e(t)})})}else{var u="licence request failed";a.logger.message(u).warn(),a._logKeyRequestStatFailureTimelineEvent(t,r,u),o(u)}}).catch(function(e){o("Error on licence request: "+JSON.stringify(e))})})}},{key:"_getLicenceUri",value:function(){return this.drmOptions.licenceServer}},{key:"_getTokenString",value:function(){return this.token}},{key:"_logKeyRequestStatTimelineEvent",value:function(e,t){this._logTimelineEvent(s.OtvEventCommandLicenseRequest.keyRequestStart,t)}},{key:"_logKeyStatSuccessTimelineEvent",value:function(e,t){this._logTimelineEvent(s.OtvEventCommandLicenseRequest.keyRequestSuccessful,t)}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e,t,n){this._logTimelineEvent(s.OtvEventCommandLicenseRequest.keyRequestFailed,t,n)}},{key:"_logTimelineEvent",value:function(e,t,n){var r="";if(n){var o;r=JSON.stringify((o={},i(o,s.OtvEventExtraKey.url,t),i(o,s.OtvEventExtraKey.error,n),o))}else r=JSON.stringify(i({},s.OtvEventExtraKey.url,t));OTV.eventTimeline.addToTimeline(s.OtvEventType.licenseRequest,e,r)}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.drmOptions["com.apple.fps"],n=Boolean(navigator.requestMediaKeySystemAccess);if(t&&t.useLegacyEME||!n){var r=n?"Legacy EME selected by configuration":"Legacy EME selected. MediaKey not available";return e.logger.message(r).log(),new a.default(e)}return e.logger.message("MediaKey EME selected").log(),new u.default(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.makeDecryptionInterface=i;var o=n(358),a=r(o),s=n(359),u=r(s)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.logger=t.logger,this.certificateRequester=t.certificateRequester,this.drmOptions=t.drmOptions,this.licenceRequester=t.licenceRequester}return i(e,[{key:"setVideoElement",value:function(e){this._supportKeySystem()&&(this.videoElement=e,this.onVideoEncryptedHandle=this._onVideoEncrypted.bind(this),this.onVideoErrorHandle=this._onVideoError.bind(this),this._setEncryptedListener(e,this.onVideoEncryptedHandle),e.addEventListener("error",this.onVideoErrorHandle,!1))}},{key:"dispose",value:function(){this.videoElement&&(this._removeEncryptedListener(this.videoElement,this.onVideoEncryptedHandle),this.videoElement.removeEventListener("error",this.onVideoErrorHandle,!1),this.videoElement=void 0)}},{key:"tearDown",value:function(){}},{key:"renewLicence",value:function(){throw new Error("DecryptionInterface.renewLicence() not supported for this decryption type")}},{key:"_setEncryptedListener",value:function(e,t){throw new Error("DecryptionInterface._setEncryptedListener() must be overridden by derived class")}},{key:"_removeEncryptedListener",value:function(e,t){throw new Error("DecryptionInterface._removeEncryptedListener() must be overridden by derived class")}},{key:"_supportKeySystems",value:function(){throw new Error("DecryptionInterface._supportKeySystems() must be overridden by derived class")}},{key:"_onVideoEncrypted",value:function(){throw new Error("DecryptionInterface._onVideoEncrypted() must be overridden by derived class")}},{key:"_onVideoError",value:function(e){var t="A video playback error occurred";throw e.target&&e.target.error&&(t=t+" - Event error code: "+e.target.error.code+" - Event error message: "+e.target.error.message),new Error(t)}}]),e}();t.DecryptionInterface=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.listenerArray=[]}return i(e,[{key:"add",value:function(e){this.contain(e)||this.listenerArray.push(e)}},{key:"remove",value:function(e){var t=this.listenerArray.indexOf(e);t>=0&&this.listenerArray.splice(t,1)}},{key:"contain",value:function(e){return this.listenerArray.indexOf(e)>=0}},{key:"length",value:function(){return this.listenerArray.length}},{key:"get",value:function(e){return this.listenerArray[e]}},{key:"clear",value:function(){this.listenerArray=[]}}]),e}();t.default={ListenerList:o}},function(e,t,n){e.exports=!n(8)&&!n(2)(function(){return 7!=Object.defineProperty(n(72)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(1),i=n(7),o=n(33),a=n(73),s=n(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(14),i=n(16),o=n(59)(!1),a=n(74)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(l,n)||l.push(n));return l}},function(e,t,n){var r=n(9),i=n(3),o=n(34);e.exports=n(8)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(16),i=n(37).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){"use strict";var r=n(8),i=n(34),o=n(60),a=n(52),s=n(10),u=n(51),l=Object.assign;e.exports=!l||n(2)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r})?function(e,t){for(var n=s(e),l=arguments.length,c=1,d=o.f,h=a.f;l>c;)for(var f,p=u(arguments[c++]),g=d?i(p).concat(d(p)):i(p),y=g.length,v=0;y>v;)f=g[v++],r&&!h.call(p,f)||(n[f]=p[f]);return n}:l},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(20),i=n(4),o=n(112),a=[].slice,s={},u=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(1).parseInt,i=n(44).trim,o=n(78),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(1).parseFloat,i=n(44).trim;e.exports=1/r(n(78)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(25);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(4),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";var r=n(36),i=n(31),o=n(43),a={};n(15)(a,n(5)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(3);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(247);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(20),i=n(10),o=n(51),a=n(6);e.exports=function(e,t,n,s,u){r(t);var l=i(e),c=o(l),d=a(l.length),h=u?d-1:0,f=u?-1:1;if(n<2)for(;;){if(h in c){s=c[h],h+=f;break}if(h+=f,u?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;u?h>=0:d>h;h+=f)h in c&&(s=t(s,c[h],h,l));return s}},function(e,t,n){"use strict";var r=n(10),i=n(35),o=n(6);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),u=i(t,a),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?a:i(l,a))-u,a-s),d=1;for(u<s&&s<u+c&&(d=-1,u+=c-1,s+=c-1);c-- >0;)u in n?n[s]=n[u]:delete n[s],s+=d,u+=d;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(93);n(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(8)&&"g"!=/./g.flags&&n(9).f(RegExp.prototype,"flags",{configurable:!0,get:n(63)})},function(e,t,n){"use strict";var r,i,o,a,s=n(33),u=n(1),l=n(19),c=n(53),d=n(0),h=n(4),f=n(20),p=n(47),g=n(66),y=n(54),v=n(95).set,m=n(267)(),b=n(127),w=n(268),_=n(67),T=n(128),S=u.TypeError,E=u.process,k=E&&E.versions,A=k&&k.v8||"",x=u.Promise,C="process"==c(E),I=function(){},M=i=b.f,O=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[n(5)("species")]=function(e){e(I,I)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(I)instanceof t&&0!==A.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(e){}}(),P=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{s?(i||(2==e._h&&L(e),e._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===t.promise?l(S("Promise-chain cycle")):(o=P(n))?o.call(n,u,l):u(n)):l(r)}catch(e){c&&!a&&c.exit(),l(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&D(e)})}},D=function(e){v.call(u,function(){var t,n,r,i=e._v,o=R(e);if(o&&(t=w(function(){C?E.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=C||R(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},L=function(e){v.call(u,function(){var t;C?E.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw S("Promise can't be resolved itself");(t=P(e))?m(function(){var r={_w:n,_d:!1};try{t.call(e,l(U,r,1),l(N,r,1))}catch(e){N.call(r,e)}}):(n._v=e,n._s=1,j(n,!1))}catch(e){N.call({_w:n,_d:!1},e)}}};O||(x=function(e){p(this,x,"Promise","_h"),f(e),r.call(this);try{e(l(U,this,1),l(N,this,1))}catch(e){N.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(48)(x.prototype,{then:function(e,t){var n=M(y(this,x));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=C?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(U,e,1),this.reject=l(N,e,1)},b.f=M=function(e){return e===x||e===a?new o(e):i(e)}),d(d.G+d.W+d.F*!O,{Promise:x}),n(43)(x,"Promise"),n(46)("Promise"),a=n(7).Promise,d(d.S+d.F*!O,"Promise",{reject:function(e){var t=M(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!O),"Promise",{resolve:function(e){return T(s&&this===a?x:this,e)}}),d(d.S+d.F*!(O&&n(62)(function(e){x.all(e).catch(I)})),"Promise",{all:function(e){var t=this,n=M(t),r=n.resolve,i=n.reject,o=w(function(){var n=[],o=0,a=1;g(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=M(t),r=n.reject,i=w(function(){g(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(20);e.exports.f=function(e){return new r(e)}},function(e,t,n){var r=n(3),i=n(4),o=n(127);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(9).f,i=n(36),o=n(48),a=n(19),s=n(47),u=n(66),l=n(84),c=n(123),d=n(46),h=n(8),f=n(29).fastKey,p=n(40),g=h?"_s":"size",y=function(e,t){var n,r=f(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var c=e(function(e,r){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=r&&u(r,n,e[l],e)});return o(c.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=p(this,t),r=y(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[g]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!y(p(this,t),e)}}),h&&r(c.prototype,"size",{get:function(){return p(this,t)[g]}}),c},def:function(e,t,n){var r,i,o=y(e,t);return o?o.v=n:(e._l=o={i:i=f(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[g]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,n){l(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?c(0,n.k):"values"==t?c(0,n.v):c(0,[n.k,n.v]):(e._t=void 0,c(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var r=n(48),i=n(29).getWeak,o=n(3),a=n(4),s=n(47),u=n(66),l=n(24),c=n(14),d=n(40),h=l(5),f=l(6),p=0,g=function(e){return e._l||(e._l=new y)},y=function(){this.a=[]},v=function(e,t){return h(e.a,function(e){return e[0]===t})};y.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=f(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=r&&u(r,n,e[o],e)});return r(l.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?g(d(this,t)).delete(e):n&&c(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?g(d(this,t)).has(e):n&&c(n,this._i)}}),l},def:function(e,t,n){var r=i(o(t),!0);return!0===r?g(e).set(t,n):r[e._i]=n,e},ufstore:g}},function(e,t,n){var r=n(21),i=n(6);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(37),i=n(60),o=n(3),a=n(1).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(6),i=n(80),o=n(26);e.exports=function(e,t,n,a){var s=String(o(e)),u=s.length,l=void 0===n?" ":String(n),c=r(t);if(c<=u||""==l)return s;var d=c-u,h=i.call(l,Math.ceil(d/l.length));return h.length>d&&(h=h.slice(0,d)),a?h+s:s+h}},function(e,t,n){var r=n(8),i=n(34),o=n(16),a=n(52).f;e.exports=function(e){return function(t){for(var n,s=o(t),u=i(s),l=u.length,c=0,d=[];l>c;)n=u[c++],r&&!a.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(138),s=r(a),u=n(56),l=r(u),c=n(100),d=r(c),h=n(101),f=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:OTV.conax;i(this,e),n.system=t,this.logger=new l.default(r,t),this.token=void 0,this.videoDecryption=null,this.conaxApi=o,this.drmOptions=n}return o(e,[{key:"initialise",value:function(){this._getFpId(),this._addFpDevice(),this._getFpToken(),this.certificateRequester=new s.default(this.drmOptions,this.logger),this.certificateRequester.requestCertificate();var e={drmOptions:this.drmOptions,logger:this.logger};this.licenceRequester=this._makeLicenceRequester(e),this.licenceRequester.setToken(this.token);var t={drmOptions:this.drmOptions,certificateRequester:this.certificateRequester,logger:this.logger,licenceRequester:this.licenceRequester};this.videoDecryption=this._makeVideoDecryptionHandler(t)}},{key:"setVideoElement",value:function(e){this.videoDecryption.setVideoElement(e)}},{key:"tearDown",value:function(){this.videoDecryption.tearDown()}},{key:"_getFpToken",value:function(){var e=this.conaxApi.getOperator(),t=this.conaxApi.getOttAccount(),n={};"upfronttoken"===this.drmOptions.mode?this.token=this.drmOptions.token:(n=this.conaxApi.getToken(this.drmOptions.portalURL+"/authtoken/"+e,t,this.cxDeviceID))&&(this.token='{"Version":"1.0.0","CxAuthenticationDataToken":"'+n+'","CxClientInfo":{"DeviceType":"Browser","DrmClientType":"FairPlay-HTML5","DrmClientVersion":"1.0.0","CxDeviceId":"'+this.cxDeviceID+'"}}')}},{key:"_addFpDevice",value:function(){var e=this.conaxApi.getOperator(),t=this.conaxApi.getOttAccount();this.conaxApi.addDevice(this.drmOptions.portalURL+"/ottAccount/device/"+e,t,this.cxDeviceID,"BrowserFP","FP Browser")}},{key:"_getFpId",value:function(){this.cxDeviceID=this.conaxApi.getOrCreateCxDeviceId("FairPlay")}},{key:"_resetFpId",value:function(){this.conaxApi.resetCxDeviceId("FairPlay"),this._getFpId()}},{key:"setSourceToken",value:function(e){this.token=e,this.licenceRequester.setToken(e)}},{key:"_makeLicenceRequester",value:function(e){return new d.default(e)}},{key:"_makeVideoDecryptionHandler",value:function(e){return(0,h.makeDecryptionInterface)(e)}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),s=function(){function e(t,n){i(this,e),this.certificate={},this.certificatesURL=t.certificatesURL,this.logger=n,this.certErrorHandler=t.certErrorHandler,this.certificatesURL||this.logger.addType().message(" FairPlay certificatesURL not configured!").warn()}return o(e,[{key:"requestCertificate",value:function(){var e=this;this.certificatePromise=new Promise(function(t,n){e.logger.message("Request FairPlay server certificate from ").addType().log(),e._logProvisionRequestStatTimelineEvent(e.certificatesURL);var r=new XMLHttpRequest;r.responseType="arraybuffer",r.addEventListener("load",function(n){return e.onCertificateLoaded(n,t)},!1),r.addEventListener("error",function(){return e.onCertificateError(n)},!1),r.addEventListener("timeout",function(){return e.onCertificateTimeout(n)},!1),r.open("GET",e.certificatesURL,!0),r.timeout=2e3,r.send()})}},{key:"getCertificate",value:function(){return this.certificatePromise}},{key:"onCertificateTimeout",value:function(e){this.certErrorHandler&&this.certErrorHandler("Timeout during retrieval of certificate from "+this.certificatesURL),e("timeout")}},{key:"onCertificateLoaded",value:function(e,t){this.logger.message("Retrieved the server certificate from ").addType().log();var n=e.target;this.certificate.array=new Uint8Array(n.response),this._logProvisionRequestStatSuccessTimelineEvent(this.certificatesURL),t(this.certificate.array)}},{key:"onCertificateError",value:function(e){this.certErrorHandler&&this.certErrorHandler("Failure during retrieval of certificate from "+this.certificatesURL),this.logger.message("Failed to retrieve the server certificate from ").addType().error(),this._logProvisionRequestStatFailureTimelineEvent(this.certificatesURL,this.certErrorHandler?this.certErrorHandler.error:void 0),e("error")}},{key:"_logProvisionRequestStatTimelineEvent",value:function(e){this._logTimelineEvent(a.OtvEventCommandLicenseRequest.provisionRequestStart,e)}},{key:"_logProvisionRequestStatSuccessTimelineEvent",value:function(e){this._logTimelineEvent(a.OtvEventCommandLicenseRequest.provisionRequestSuccessful,e)}},{key:"_logProvisionRequestStatFailureTimelineEvent",value:function(e,t){this._logTimelineEvent(a.OtvEventCommandLicenseRequest.provisionRequestFailed,e,t)}},{key:"_logTimelineEvent",value:function(e,t,n){var i="";if(n){var o;i=JSON.stringify((o={},r(o,a.OtvEventExtraKey.url,t),r(o,a.OtvEventExtraKey.error,n),o))}else i=JSON.stringify(r({},a.OtvEventExtraKey.url,t));OTV.eventTimeline.addToTimeline(a.OtvEventType.licenseRequest,e,i)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return new(l[e]||u)(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return o(e,[{key:"setRequestHeaders",value:function(e,t,n){var r="upfronttoken"===n?"PreAuthorization":"Conax-Custom-Data";e.setRequestHeader(r,t)}}]),e}(),s=function(){function e(){r(this,e)}return o(e,[{key:"setRequestHeaders",value:function(e,t){e.setRequestHeader("Accept","application/json"),e.setRequestHeader("nv-authorizations",t)}}]),e}(),u=function e(t){throw r(this,e),new Error("Invalid security type: "+t+" defined")},l={"nagra-conax-upfront-fps":a,"nagra-conax-fps":a,"nagra-ssp-fps":s,"nagra-ssp-tvkey":s,"nagra-ssp":s};t.default={getDrmImplementation:i}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return e+"/"+t+"/wvls/contentlicenseservice/v1/certificates"}function o(){}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(30),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=o;l.warn=o;var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{config:{}},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;r(this,e),this.drmDetails=t,this.log=n,this.updateDetailsWithCertificate(t)}return a(e,[{key:"updateDetailsWithCertificate",value:function(e){var t=this;if(!e.config.widevineServerCertificate&&e.config.licenceServer&&e.config.tenantId){this.log("VMP certificate unknown, so looking for it");var n=this;this.certUrl=i(e.config.licenceServer,e.config.tenantId),this.certificatePromise=new Promise(function(e,r){t.xhr=new XMLHttpRequest,t.xhr.open("GET",t.certUrl,!0),t.xhr.responseType="arraybuffer",t.xhr.onload=t._onCertLoad.bind(t,e,r),t.xhr.onerror=function(){n.log.warn("Failed to acquire VMP certificate from "+t.certUrl),r()},t.xhr.send()})}}},{key:"waitCertificate",value:function(){return this.certificatePromise||Promise.reject()}},{key:"_onCertLoad",value:function(e,t){if(this.log("_onCertLoad"),200===this.xhr.status){this.log("HTTP_OK");var n=btoa(u.default.arrayBufferToString(this.xhr.response));this.log("Acquired VMP certificate: "+n),this.drmDetails.config.widevineServerCertificate=n,e()}else this.log.warn("Error acquiring VMP certificate from "+this.certUrl+".  Status: "+this.xhr.status),t()}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(142),c=r(l),d=n(41),h=r(d),f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.sspFairPlay=r._makeFairPlaySystem(e.system,e.config,n),r.sspFairPlay.initialise(),r}return a(t,e),s(t,[{key:"ready",value:function(e){this.sspFairPlay.setVideoElement(e)}},{key:"tearDown",value:function(){this.sspFairPlay.tearDown()}},{key:"updateSourceData",value:function(e){return e&&e.token&&this.sspFairPlay.setSourceToken(e.token),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}},{key:"_makeFairPlaySystem",value:function(e,t,n){return new c.default.SSPFairPlaySystem(e,t,n)}}]),t}(h.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(138),s=r(a),u=n(56),l=r(u),c=n(100),d=r(c),h=n(101),f=n(70),p=r(f),g=function(){function e(t,n,r){i(this,e),n.system=t,this.logger=new l.default(r,t),this.token=void 0,n.certificatesURL=p.default.buildUrlWith(n.licenceServer,n.tenantId,"FairPlay","Cert"),n.licenceServer=p.default.buildUrlWith(n.licenceServer,n.tenantId,"FairPlay","License"),this.drmOptions=n}return o(e,[{key:"initialise",value:function(){this.certificateRequester=this._makeCertificateRequester(this.drmOptions),this.certificateRequester.requestCertificate();var e={drmOptions:this.drmOptions,logger:this.logger};this.licenceRequester=this._makeLicenceRequester(e);var t={drmOptions:this.drmOptions,certificateRequester:this.certificateRequester,logger:this.logger,licenceRequester:this.licenceRequester};this.videoDecryption=this._makeVideoDecryptionHandler(t)}},{key:"setVideoElement",value:function(e){this.videoDecryption.setVideoElement(e)}},{key:"setSourceToken",value:function(e){this.token=e,this.licenceRequester.setToken(e)}},{key:"tearDown",value:function(){this.videoDecryption.tearDown()}},{key:"_makeLicenceRequester",value:function(e){return new d.default(e)}},{key:"_makeVideoDecryptionHandler",value:function(e){return(0,h.makeDecryptionInterface)(e)}},{key:"_makeCertificateRequester",value:function(e){return new s.default(e,this.logger)}}]),e}();t.default={SSPFairPlaySystem:g}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(30),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){r(this,e),this.serverResponse=t,this.customData={},this.proactive=!1,this.licence="",this._parse()}return i(e,[{key:"_parse",value:function(){var e=a.default.arrayBufferToString(this.serverResponse),t=new window.DOMParser,n=t.parseFromString(e,"text/xml"),r=this.licence=n.getElementsByTagName("License")[0];if(void 0!==r&&(this.licence=r.childNodes[0].nodeValue),this.customDataXML=n.getElementsByTagName("CustomData")[0],void 0!==this.customDataXML){try{this.customData=JSON.parse(this.customDataXML.childNodes[0].nodeValue)}catch(e){this.customData={}}this.customData&&this.customData.sessionToken&&(this.proactive=!0)}}}]),e}();t.default={PlayReadyServerResponseParser:s}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(368),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t,n,i){r(this,e),this.ssmUri=t,this.log=n,this.renewalCallback=i||this._defaultRenewalCallback.bind(this),this.ssmInterface=new a.default.SsmInterface(this.ssmUri+"/sessions",n),this.renewalInterval=0,this.sessionToken=null,this.teardownPromise=Promise.resolve()}return i(e,[{key:"setup",value:function(e){var t=this;return new Promise(function(n,r){t.teardown().catch(function(){return null}),t.teardownPromise.finally(function(){t.ssmInterface.doSetup(e).then(function(e){t.sessionToken=e.sessionToken,t.renewalInterval=setInterval(t.renewalCallback,1e3*e.heartbeatPeriod),n(t.sessionToken)}).catch(function(e){return r(e)})})})}},{key:"teardown",value:function(){var e=this;return new Promise(function(t,n){e.renewalInterval&&(clearInterval(e.renewalInterval),e.renewalInterval=0),e.sessionToken?(e.teardownPromise=e.ssmInterface.tearDown(e.sessionToken).then(function(){return t()}).catch(function(t){e.teardownPromise=Promise.resolve(),n(t)}),e.sessionToken=null):t()})}},{key:"heartbeat",value:function(){var e=this;return new Promise(function(t,n){e.ssmInterface.heartbeat(e.sessionToken).then(function(n){e.sessionToken=n,t(n)}).catch(function(e){return n(e)})})}},{key:"updateSessionToken",value:function(e){this.sessionToken=e}},{key:"_defaultRenewalCallback",value:function(){var e=this;this.heartbeat().catch(function(t){e.log.warn("Default heartbeat failed: "+t)})}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(49),c=n(11),d=n(57),h={drm:{servers:{"com.microsoft.playready":"http:callback-uri","com.widevine.alpha":"http:callback-uri","com.tvkey.drm":"http:callback-uri"}}},f=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return a.requestFilterHandle=a._shakaRequestFilter.bind(a),a.responseFilterHandle=a._shakaResponseFilter.bind(a),a}return a(t,e),s(t,[{key:"ready",value:function(e){this.vjsPlayer.tech_.shaka_&&(this.drmDetails.config.multiSession||this._configureSingleSession(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this,e))}},{key:"renewLicence",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renewLicence",this).call(this),this.timeline.setRenewal()}},{key:"_configureDrm",value:function(){this.vjsPlayer.otvtoolkit().techConfig.configure(d.CONFIG_TYPE_OTV,h);var e=this.vjsPlayer.tech_.shaka_,t=e.getNetworkingEngine();t.unregisterRequestFilter(this.requestFilterHandle),t.unregisterResponseFilter(this.responseFilterHandle),t.registerRequestFilter(this.requestFilterHandle),t.registerResponseFilter(this.responseFilterHandle)}},{key:"_getHttpCallback",value:function(){return this.drmDetails.config.requestLicenceCallback}},{key:"_makeTimelineLogger",value:function(e){return new p(e)}},{key:"_shakaRequestFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE){var n=this.vjsPlayer.tech_.shaka_;if(t.xSourceObject=this.source,t.xKeySystem=n.keySystem(),t.xCallback=this._getHttpCallback(),"com.tvkey.drm"===n.keySystem()){var r=shaka.util.StringUtils,i=JSON.parse(r.fromUTF8(t.body)),o={OttLicenseRequestMessage:i},a=JSON.stringify(o);this.log("tvkey license request payload: "+a),t.body=r.toUTF8(a)}}}},{key:"_shakaResponseFilter",value:function(e,t){var n=this.vjsPlayer.tech_.shaka_;if(e===shaka.net.NetworkingEngine.RequestType.LICENSE&&"com.tvkey.drm"===n.keySystem()){var r=shaka.util.StringUtils.fromUTF8(t.data);this.log("tvkey license reponse payload: "+r)}}}]),t}(l.DrmDashController);t.default=f;var p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.token="",n.renewal=!1,n}return a(t,e),s(t,[{key:"tearDown",value:function(){this.renewal=!1,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this)}},{key:"setSource",value:function(e){this.token=e.token||"",u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setSource",this).call(this,e)}},{key:"setRenewal",value:function(){this.renewal=!0}},{key:"_shakaRequestFilter",value:function(e,n){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if("license-renewal"===n.licenseRequestType||this.renewal){this.renewal=!0,this.provision=!1;var i=JSON.stringify(r({},c.OtvEventExtraKey.contentToken,this.token)),o=c.OtvEventType.sessionManagement,a=c.OtvEventCommandSessionManagement.renewalStart;OTV.eventTimeline.addToTimeline(o,a,i)}else this.renewal=!1,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_shakaRequestFilter",this).call(this,e,n)}},{key:"_shakaResponseFilter",value:function(e,n){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if(this.renewal){var i=void 0,o=r({},c.OtvEventExtraKey.contentToken,this.token);i=c.OtvEventCommandSessionManagement.renewalSuccessful;var a=c.OtvEventType.sessionManagement,s=JSON.stringify(o);OTV.eventTimeline.addToTimeline(a,i,s)}else u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_shakaResponseFilter",this).call(this,e,n)}},{key:"_onErrorEvent",value:function(e){if(6007===e.detail.code)if(this.renewal){var n=void 0,i=r({},c.OtvEventExtraKey.contentToken,this.token);i[c.OtvEventExtraKey.error]=e.detail.message,n=c.OtvEventCommandSessionManagement.renewalFailure;var o=c.OtvEventType.sessionManagement,a=JSON.stringify(i);OTV.eventTimeline.addToTimeline(o,n,a)}else u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onErrorEvent",this).call(this,e)}}]),t}(l.DrmDashTimeline)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(41),c=r(l),d=n(56),h=r(d),f=n(101),p=n(147),g=r(p),y=n(371),v=r(y),m="com.apple.fps.1_0",b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.config=e.config,r.logger=new h.default(n,e.system),r.licenceRequester=r._makeLicenceRequester(r.config.requestLicenceCallback,m),r.certificateRequester=r._makeCertificateRequester(r.config.fairplayServerCertificate);var a={drmOptions:r.config,certificateRequester:r.certificateRequester,logger:r.logger,licenceRequester:r.licenceRequester};return r.videoDecryption=r._makeVideoDecryptionHandler(a),r}return a(t,e),s(t,[{key:"ready",value:function(e){this.videoDecryption.setVideoElement(e)}},{key:"tearDown",value:function(){this.videoDecryption.tearDown()}},{key:"updateSourceData",value:function(e){return this.src=e,this.licenceRequester.setSource(e),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}},{key:"renewLicence",value:function(){this.videoDecryption.renewLicence()}},{key:"_makeLicenceRequester",value:function(e,t){return new g.default(e,t)}},{key:"_makeCertificateRequester",value:function(e){return new v.default(e)}},{key:"_makeVideoDecryptionHandler",value:function(e){return(0,f.makeDecryptionInterface)(e)}}]),t}(c.default);t.default=b},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),s=function(){function e(t,n){i(this,e),this.callback=t,this.keysystem=n,this.source=void 0}return o(e,[{key:"setSource",value:function(e){this.source=e}},{key:"request",value:function(e,t){var n=this;return new Promise(function(r,i){n._logKeyRequestStatTimelineEvent(t),n.callback(n.keysystem,n.source,e,t).then(function(e){n._logKeyStatSuccessTimelineEvent(t),r(e)}).catch(function(e){n._logKeyRequestStatFailureTimelineEvent(e,t),i(e)})})}},{key:"_logKeyRequestStatTimelineEvent",value:function(e){var t=void 0,n=void 0;"license-renewal"===e?(t=a.OtvEventType.sessionManagement,n=a.OtvEventCommandSessionManagement.renewalStart):(t=a.OtvEventType.licenseRequest,n=a.OtvEventCommandLicenseRequest.keyRequestStart),OTV.eventTimeline.addToTimeline(t,n)}},{key:"_logKeyStatSuccessTimelineEvent",value:function(e){var t=void 0,n=void 0;"license-renewal"===e?(t=a.OtvEventType.sessionManagement,n=a.OtvEventCommandSessionManagement.renewalSuccessful):(t=a.OtvEventType.licenseRequest,n=a.OtvEventCommandLicenseRequest.keyRequestSuccessful),OTV.eventTimeline.addToTimeline(t,n)}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e,t){var n=void 0,i=void 0;"license-renewal"===t?(n=a.OtvEventType.sessionManagement,i=a.OtvEventCommandSessionManagement.renewalFailure):(n=a.OtvEventType.licenseRequest,i=a.OtvEventCommandLicenseRequest.keyRequestFailed);var o=JSON.stringify(r({},a.OtvEventExtraKey.error,e));OTV.eventTimeline.addToTimeline(n,i,o)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(102),l=n(30),c=r(l),d=n(377),h=r(d),f=[{initDataTypes:["keyids","cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.640028"'}]}],p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mediaKeySession=null,n}return a(t,e),s(t,[{key:"renewLicence",value:function(){this.logger.addType().message(" Renew licence is not supported.").warn()}},{key:"tearDown",value:function(){if(this.mediaKeySession){var e=this;this.mediaKeySession.close().finally(function(){e.mediaKeySession=null,e.videoElement.setMediaKeys(null),e._setEncryptedListener(e.videoElement,e.onVideoEncryptedHandle)})}}},{key:"_setEncryptedListener",value:function(e,t){e.addEventListener("encrypted",t,!1)}},{key:"_removeEncryptedListener",value:function(e,t){e.removeEventListener("encrypted",t,!1)}},{key:"_supportKeySystem",value:function(){var e=Boolean(navigator.requestMediaKeySystemAccess);return e||this.logger.addType().message(" TVKey System not supported by browser.").log(),e}},{key:"_onVideoEncrypted",value:function(e){this.logger.message("Function: _onVideoEncrypted for ").addType().log();var t=e.initDataType,n=e.initData,r=this;if(!this._isPrmPsshInitData(n))return void this.logger.message("This is not a PRM init data. Skip").log();this._removeEncryptedListener(this.videoElement,this.onVideoEncryptedHandle),navigator.requestMediaKeySystemAccess("com.tvkey.drm",f).then(function(e){r.logger.message("Access to mediakeysystem granted").log(),e.createMediaKeys().then(function(e){r.logger.message("Keys created").log(),r.videoElement.setMediaKeys(e),r.mediaKeySession=e.createSession(),r.logger.message("MediaKey session Created.").log(),r._configureSessionListeners(r.mediaKeySession),r.logger.message("Generating MediaKey session request").log(),r.mediaKeySession.generateRequest(t,n).catch(function(e){var t=e.errorCode,n=e.message,i=t.systemCode;r.logger.message("Error: "+n+", system: "+i+"\n"+JSON.stringify(e)).error()})})})}},{key:"_isPrmPsshInitData",value:function(e){var t=new Uint8Array(e);this.logger.message("init Data length : "+t.length).log(),this.logger.message("init Data (base64) : "+c.default.toBase64(e)).log();var n=new h.default(t);return!(!n.systemId||(this.logger.message("Pssh system id: "+n.systemId).log(),"adb41c242dbf4a6d958b4457c0d27b95"!==n.systemId))}},{key:"_configureSessionListeners",value:function(e){var t=this;e.addEventListener("message",function(e){t.logger.message("MediaKey message received.  Requesting licence").log(),t.licenceRequester.request(e.message,e.messageType).then(function(n){t.logger.message("Licence Key received").log(),e.target.update(n).catch(function(e){t.logger.message("Error: "+e.message).error()})}).catch(function(e){var t="Failed to retrieve licence.  Error: "+e;throw new Error(t)})},!1)}}]),t}(u.DecryptionInterface);t.default=p},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){g&&f&&(g=!1,f.length?p=f.concat(p):y=-1,p.length&&s())}function s(){if(!g){var e=i(a);g=!0;for(var t=p.length;t;){for(f=p,p=[];++y<t;)f&&f[y].run();y=-1,t=p.length}f=null,g=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,d,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var f,p=[],g=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||g||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.preference=t,this.sourcePreference=void 0}return i(e,[{key:"getPreference",value:function(){return this.sourcePreference||this.preference}},{key:"setPreference",value:function(e){this.preference=e}},{key:"setSourcePreference",value:function(e){this.sourcePreference=e}}]),e}(),a=new o;t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.videojs=t,this.onErrorHandle=this._onErrorEvent.bind(this)}return i(e,[{key:"dispose",value:function(){var e=this._getPlayerInstance();e&&this._removePlayerListeners(e),this.videojs=void 0}},{key:"setErrorListener",value:function(e){this.listener=e}},{key:"ready",value:function(){var e=this._getPlayerInstance();e&&(this._removePlayerListeners(e),this._setupPlayerListeners(e))}},{key:"_setupPlayerListeners",value:function(e){e.addEventListener("error",this.onErrorHandle)}},{key:"_removePlayerListeners",value:function(e){e.removeEventListener("error",this.onErrorHandle)}},{key:"_getPlayerInstance",value:function(){}},{key:"_onErrorEvent",value:function(e){this.listener&&this.listener.errorChanged&&this.listener.errorChanged(e.detail.severity,e.detail.category,e.detail.code,e.detail.message)}}]),e}();t.default={ErrorReporting:o}},function(e,t,n){n(153),n(339),e.exports=n(340)},function(e,t,n){"use strict";n(154);var r=function(e){return e&&e.__esModule?e:{default:e}}(n(326));r.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),r.default._babelPolyfill=!0},function(e,t,n){"use strict";n(155),n(298),n(300),n(303),n(305),n(307),n(309),n(311),n(313),n(315),n(317),n(319),n(321),n(325)},function(e,t,n){n(156),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(237),n(238),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(92),n(261),n(124),n(262),n(125),n(263),n(264),n(265),n(266),n(126),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),e.exports=n(7)},function(e,t,n){"use strict";var r=n(1),i=n(14),o=n(8),a=n(0),s=n(12),u=n(29).KEY,l=n(2),c=n(58),d=n(43),h=n(32),f=n(5),p=n(73),g=n(105),y=n(158),v=n(61),m=n(3),b=n(4),w=n(10),_=n(16),T=n(28),S=n(31),E=n(36),k=n(108),A=n(22),x=n(60),C=n(9),I=n(34),M=A.f,O=C.f,P=k.f,j=r.Symbol,D=r.JSON,R=D&&D.stringify,L=f("_hidden"),N=f("toPrimitive"),U={}.propertyIsEnumerable,F=c("symbol-registry"),B=c("symbols"),V=c("op-symbols"),H=Object.prototype,W="function"==typeof j&&!!x.f,K=r.QObject,q=!K||!K.prototype||!K.prototype.findChild,G=o&&l(function(){return 7!=E(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=M(H,t);r&&delete H[t],O(e,t,n),r&&e!==H&&O(H,t,r)}:O,z=function(e){var t=B[e]=E(j.prototype);return t._k=e,t},X=W&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},Y=function(e,t,n){return e===H&&Y(V,t,n),m(e),t=T(t,!0),m(n),i(B,t)?(n.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),n=E(n,{enumerable:S(0,!1)})):(i(e,L)||O(e,L,S(1,{})),e[L][t]=!0),G(e,t,n)):O(e,t,n)},J=function(e,t){m(e);for(var n,r=y(t=_(t)),i=0,o=r.length;o>i;)Y(e,n=r[i++],t[n]);return e},Q=function(e,t){return void 0===t?E(e):J(E(e),t)},$=function(e){var t=U.call(this,e=T(e,!0));return!(this===H&&i(B,e)&&!i(V,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,L)&&this[L][e])||t)},Z=function(e,t){if(e=_(e),t=T(t,!0),e!==H||!i(B,t)||i(V,t)){var n=M(e,t);return!n||!i(B,t)||i(e,L)&&e[L][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=P(_(e)),r=[],o=0;n.length>o;)i(B,t=n[o++])||t==L||t==u||r.push(t);return r},te=function(e){for(var t,n=e===H,r=P(n?V:_(e)),o=[],a=0;r.length>a;)!i(B,t=r[a++])||n&&!i(H,t)||o.push(B[t]);return o};W||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(V,n),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),G(this,e,S(1,n))};return o&&q&&G(H,e,{configurable:!0,set:t}),z(e)},s(j.prototype,"toString",function(){return this._k}),A.f=Z,C.f=Y,n(37).f=k.f=ee,n(52).f=$,x.f=te,o&&!n(33)&&s(H,"propertyIsEnumerable",$,!0),p.f=function(e){return z(f(e))}),a(a.G+a.W+a.F*!W,{Symbol:j});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)f(ne[re++]);for(var ie=I(f.store),oe=0;ie.length>oe;)g(ie[oe++]);a(a.S+a.F*!W,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=j(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!W,"Object",{create:Q,defineProperty:Y,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=l(function(){x.f(1)});a(a.S+a.F*ae,"Object",{getOwnPropertySymbols:function(e){return x.f(w(e))}}),D&&a(a.S+a.F*(!W||l(function(){var e=j();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!X(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!X(t))return t}),r[1]=t,R.apply(D,r)}}),j.prototype[N]||n(15)(j.prototype,N,j.prototype.valueOf),d(j,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){e.exports=n(58)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(34),i=n(60),o=n(52);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,l=0;s.length>l;)u.call(e,a=s[l++])&&t.push(a);return t}},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(36)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperty:n(9).f})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperties:n(107)})},function(e,t,n){var r=n(16),i=n(22).f;n(23)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){var r=n(10),i=n(38);n(23)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(10),i=n(34);n(23)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){n(23)("getOwnPropertyNames",function(){return n(108).f})},function(e,t,n){var r=n(4),i=n(29).onFreeze;n(23)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(4),i=n(29).onFreeze;n(23)("seal",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(4),i=n(29).onFreeze;n(23)("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(4);n(23)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(4);n(23)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(4);n(23)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(109)})},function(e,t,n){var r=n(0);r(r.S,"Object",{is:n(110)})},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(77).set})},function(e,t,n){"use strict";var r=n(53),i={};i[n(5)("toStringTag")]="z",i+""!="[object z]"&&n(12)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(111)})},function(e,t,n){var r=n(9).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(8)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(4),i=n(38),o=n(5)("hasInstance"),a=Function.prototype;o in a||n(9).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(0),i=n(113);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(0),i=n(114);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(1),i=n(14),o=n(25),a=n(79),s=n(28),u=n(2),l=n(37).f,c=n(22).f,d=n(9).f,h=n(44).trim,f=r.Number,p=f,g=f.prototype,y="Number"==o(n(36)(g)),v="trim"in String.prototype,m=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():h(t,3);var n,r,i,o=t.charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,u=t.slice(2),l=0,c=u.length;l<c;l++)if((a=u.charCodeAt(l))<48||a>i)return NaN;return parseInt(u,r)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof f&&(y?u(function(){g.valueOf.call(n)}):"Number"!=o(n))?a(new p(m(t)),n,f):m(t)};for(var b,w=n(8)?l(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;w.length>_;_++)i(p,b=w[_])&&!i(f,b)&&d(f,b,c(p,b));f.prototype=g,g.constructor=f,n(12)(r,"Number",f)}},function(e,t,n){"use strict";var r=n(0),i=n(21),o=n(115),a=n(80),s=1..toFixed,u=Math.floor,l=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",d=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*l[n],l[n]=r%1e7,r=u(r/1e7)},h=function(e){for(var t=6,n=0;--t>=0;)n+=l[t],l[t]=u(n/e),n=n%e*1e7},f=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==l[e]){var n=String(l[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},p=function(e,t,n){return 0===t?n:t%2==1?p(e,t-1,n*e):p(e*e,t/2,n)},g=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(2)(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,r,s,u=o(this,c),l=i(e),y="",v="0";if(l<0||l>20)throw RangeError(c);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(y="-",u=-u),u>1e-21)if(t=g(u*p(2,69,1))-69,n=t<0?u*p(2,-t,1):u/p(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),r=l;r>=7;)d(1e7,0),r-=7;for(d(p(10,r,1),0),r=t-1;r>=23;)h(1<<23),r-=23;h(1<<r),d(1,1),h(2),v=f()}else d(0,n),d(1<<-t,0),v=f()+a.call("0",l);return l>0?(s=v.length,v=y+(s<=l?"0."+a.call("0",l-s)+v:v.slice(0,s-l)+"."+v.slice(s-l))):v=y+v,v}})},function(e,t,n){"use strict";var r=n(0),i=n(2),o=n(115),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(0),i=n(1).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isInteger:n(116)})},function(e,t,n){var r=n(0);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(0),i=n(116),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(0),i=n(114);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(0),i=n(113);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(0),i=n(117),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=n(0),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(e,t,n){var r=n(0),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(0),i=n(81);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(0),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(0),i=n(82);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(0);r(r.S,"Math",{fround:n(201)})},function(e,t,n){var r=n(81),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126),l=function(e){return e+1/o-1/o};e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),c=r(e);return i<u?c*l(i/u/a)*u*a:(t=(1+a/o)*i,n=t-(t-i),n>s||n!=n?c*(1/0):c*n)}},function(e,t,n){var r=n(0),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)n=i(arguments[a++]),u<n?(r=u/n,o=o*r*r+1,u=n):n>0?(r=n/u,o+=r*r):o+=n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(e,t,n){var r=n(0),i=Math.imul;r(r.S+r.F*n(2)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log1p:n(117)})},function(e,t,n){var r=n(0);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(0);r(r.S,"Math",{sign:n(81)})},function(e,t,n){var r=n(0),i=n(82),o=Math.exp;r(r.S+r.F*n(2)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(0),i=n(82),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(0),i=n(35),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(0),i=n(16),o=n(6);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(44)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var r=n(83)(!0);n(84)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(0),i=n(83)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(85),a="".endsWith;r(r.P+r.F*n(87)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),u=String(e);return a?a.call(t,u,s):t.slice(s-u.length,s)===u}})},function(e,t,n){"use strict";var r=n(0),i=n(85);r(r.P+r.F*n(87)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(0);r(r.P,"String",{repeat:n(80)})},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(85),a="".startsWith;r(r.P+r.F*n(87)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(13)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){"use strict";n(13)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(13)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(13)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(13)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(13)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(13)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(13)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(13)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(13)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(13)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(13)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(13)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n(28);r(r.P+r.F*n(2)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(0),i=n(236);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(2),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(12)(r,"toString",function(){var e=o.call(this);return e===e?i.call(this):"Invalid Date"})},function(e,t,n){var r=n(5)("toPrimitive"),i=Date.prototype;r in i||n(15)(i,r,n(239))},function(e,t,n){"use strict";var r=n(3),i=n(28);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(61)})},function(e,t,n){"use strict";var r=n(19),i=n(0),o=n(10),a=n(119),s=n(88),u=n(6),l=n(89),c=n(90);i(i.S+i.F*!n(62)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,d,h=o(e),f="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,y=void 0!==g,v=0,m=c(h);if(y&&(g=r(g,p>2?arguments[2]:void 0,2)),void 0==m||f==Array&&s(m))for(t=u(h.length),n=new f(t);t>v;v++)l(n,v,y?g(h[v],v):h[v]);else for(d=m.call(h),n=new f;!(i=d.next()).done;v++)l(n,v,y?a(d,g,[i.value,v],!0):i.value);return n.length=v,n}})},function(e,t,n){"use strict";var r=n(0),i=n(89);r(r.S+r.F*n(2)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(0),i=n(16),o=[].join;r(r.P+r.F*(n(51)!=Object||!n(17)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(0),i=n(76),o=n(25),a=n(35),s=n(6),u=[].slice;r(r.P+r.F*n(2)(function(){i&&u.call(i)}),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return u.call(this,e,t);for(var i=a(e,n),l=a(t,n),c=s(l-i),d=new Array(c),h=0;h<c;h++)d[h]="String"==r?this.charAt(i+h):this[i+h];return d}})},function(e,t,n){"use strict";var r=n(0),i=n(20),o=n(10),a=n(2),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n(17)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(0),i=n(24)(0),o=n(17)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(4),i=n(61),o=n(5)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(0),i=n(24)(1);r(r.P+r.F*!n(17)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(24)(2);r(r.P+r.F*!n(17)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(24)(3);r(r.P+r.F*!n(17)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(24)(4);r(r.P+r.F*!n(17)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(121);r(r.P+r.F*!n(17)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(0),i=n(121);r(r.P+r.F*!n(17)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(0),i=n(59)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(17)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(16),o=n(21),a=n(6),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(17)(s)),"Array",{lastIndexOf:function(e){if(u)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(0);r(r.P,"Array",{copyWithin:n(122)}),n(39)("copyWithin")},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(91)}),n(39)("fill")},function(e,t,n){"use strict";var r=n(0),i=n(24)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(39)("find")},function(e,t,n){"use strict";var r=n(0),i=n(24)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(39)(o)},function(e,t,n){n(46)("Array")},function(e,t,n){var r=n(1),i=n(79),o=n(9).f,a=n(37).f,s=n(86),u=n(63),l=r.RegExp,c=l,d=l.prototype,h=/a/g,f=/a/g,p=new l(h)!==h;if(n(8)&&(!p||n(2)(function(){return f[n(5)("match")]=!1,l(h)!=h||l(f)==f||"/a/i"!=l(h,"i")}))){l=function(e,t){var n=this instanceof l,r=s(e),o=void 0===t;return!n&&r&&e.constructor===l&&o?e:i(p?new c(r&&!o?e.source:e,t):c((r=e instanceof l)?e.source:e,r&&o?u.call(e):t),n?this:d,l)};for(var g=a(c),y=0;g.length>y;)!function(e){e in l||o(l,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})}(g[y++]);d.constructor=l,l.prototype=d,n(12)(r,"RegExp",l)}n(46)("RegExp")},function(e,t,n){"use strict";n(125);var r=n(3),i=n(63),o=n(8),a=/./.toString,s=function(e){n(12)(RegExp.prototype,"toString",e,!0)};n(2)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(e,t,n){"use strict";var r=n(3),i=n(6),o=n(94),a=n(64);n(65)("match",1,function(e,t,n,s){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var u=r(e),l=String(this);if(!u.global)return a(u,l);var c=u.unicode;u.lastIndex=0;for(var d,h=[],f=0;null!==(d=a(u,l));){var p=String(d[0]);h[f]=p,""===p&&(u.lastIndex=o(l,i(u.lastIndex),c)),f++}return 0===f?null:h}]})},function(e,t,n){"use strict";var r=n(3),i=n(10),o=n(6),a=n(21),s=n(94),u=n(64),l=Math.max,c=Math.min,d=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,p=function(e){return void 0===e?e:String(e)};n(65)("replace",2,function(e,t,n,g){function y(e,t,r,o,a,s){var u=r+e.length,l=o.length,c=f;return void 0!==a&&(a=i(a),c=h),n.call(s,c,function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return n;if(c>l){var h=d(c/10);return 0===h?n:h<=l?void 0===o[h-1]?i.charAt(1):o[h-1]+i.charAt(1):n}s=o[c-1]}return void 0===s?"":s})}return[function(r,i){var o=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=g(n,e,this,t);if(i.done)return i.value;var d=r(e),h=String(this),f="function"==typeof t;f||(t=String(t));var v=d.global;if(v){var m=d.unicode;d.lastIndex=0}for(var b=[];;){var w=u(d,h);if(null===w)break;if(b.push(w),!v)break;""===String(w[0])&&(d.lastIndex=s(h,o(d.lastIndex),m))}for(var _="",T=0,S=0;S<b.length;S++){w=b[S];for(var E=String(w[0]),k=l(c(a(w.index),h.length),0),A=[],x=1;x<w.length;x++)A.push(p(w[x]));var C=w.groups;if(f){var I=[E].concat(A,k,h);void 0!==C&&I.push(C);var M=String(t.apply(void 0,I))}else M=y(E,h,k,A,C,t);k>=T&&(_+=h.slice(T,k)+M,T=k+E.length)}return _+h.slice(T)}]})},function(e,t,n){"use strict";var r=n(3),i=n(110),o=n(64);n(65)("search",1,function(e,t,n,a){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),u=String(this),l=s.lastIndex;i(l,0)||(s.lastIndex=0);var c=o(s,u);return i(s.lastIndex,l)||(s.lastIndex=l),null===c?-1:c.index}]})},function(e,t,n){"use strict";var r=n(86),i=n(3),o=n(54),a=n(94),s=n(6),u=n(64),l=n(93),c=n(2),d=Math.min,h=[].push,f="length",p=!c(function(){RegExp(4294967295,"y")});n(65)("split",2,function(e,t,n,c){var g;return g="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[f]||2!="ab".split(/(?:ab)*/)[f]||4!=".".split(/(.?)(.?)/)[f]||".".split(/()()/)[f]>1||"".split(/.?/)[f]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,a,s,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=void 0===t?4294967295:t>>>0,g=new RegExp(e.source,c+"g");(o=l.call(g,i))&&!((a=g.lastIndex)>d&&(u.push(i.slice(d,o.index)),o[f]>1&&o.index<i[f]&&h.apply(u,o.slice(1)),s=o[0][f],d=a,u[f]>=p));)g.lastIndex===o.index&&g.lastIndex++;return d===i[f]?!s&&g.test("")||u.push(""):u.push(i.slice(d)),u[f]>p?u.slice(0,p):u}:"0".split(void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,r):g.call(String(i),n,r)},function(e,t){var r=c(g,e,this,t,g!==n);if(r.done)return r.value;var l=i(e),h=String(this),f=o(l,RegExp),y=l.unicode,v=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(p?"y":"g"),m=new f(p?l:"^(?:"+l.source+")",v),b=void 0===t?4294967295:t>>>0;if(0===b)return[];if(0===h.length)return null===u(m,h)?[h]:[];for(var w=0,_=0,T=[];_<h.length;){m.lastIndex=p?_:0;var S,E=u(m,p?h:h.slice(_));if(null===E||(S=d(s(m.lastIndex+(p?0:_)),h.length))===w)_=a(h,_,y);else{if(T.push(h.slice(w,_)),T.length===b)return T;for(var k=1;k<=E.length-1;k++)if(T.push(E[k]),T.length===b)return T;_=w=S}}return T.push(h.slice(w)),T}]})},function(e,t,n){var r=n(1),i=n(95).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(25)(a);e.exports=function(){var e,t,n,l=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var d=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),n=function(){h.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var r=n(129),i=n(40);e.exports=n(68)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(129),i=n(40);e.exports=n(68)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(1),o=n(24)(0),a=n(12),s=n(29),u=n(109),l=n(130),c=n(4),d=n(40),h=n(40),f=!i.ActiveXObject&&"ActiveXObject"in i,p=s.getWeak,g=Object.isExtensible,y=l.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(e){if(c(e)){var t=p(e);return!0===t?y(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(d(this,"WeakMap"),e,t)}},b=e.exports=n(68)("WeakMap",v,m,l,!0,!0);h&&f&&(r=l.getConstructor(v,"WeakMap"),u(r.prototype,m),s.NEED=!0,o(["delete","has","get","set"],function(e){var t=b.prototype,n=t[e];a(t,e,function(t,i){if(c(t)&&!g(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)})}))},function(e,t,n){"use strict";var r=n(130),i=n(40);n(68)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(0),i=n(69),o=n(96),a=n(3),s=n(35),u=n(6),l=n(4),c=n(1).ArrayBuffer,d=n(54),h=o.ArrayBuffer,f=o.DataView,p=i.ABV&&c.isView,g=h.prototype.slice,y=i.VIEW;r(r.G+r.W+r.F*(c!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||l(e)&&y in e}}),r(r.P+r.U+r.F*n(2)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==g&&void 0===t)return g.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(d(this,h))(u(i-r)),l=new f(this),c=new f(o),p=0;r<i;)c.setUint8(p++,l.getUint8(r++));return o}}),n(46)("ArrayBuffer")},function(e,t,n){var r=n(0);r(r.G+r.W+r.F*!n(69).ABV,{DataView:n(96).DataView})},function(e,t,n){n(27)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(e,t,n){n(27)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){var r=n(0),i=n(20),o=n(3),a=(n(1).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(2)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var r=i(e),u=o(n);return a?a(r,t,u):s.call(r,t,u)}})},function(e,t,n){var r=n(0),i=n(36),o=n(20),a=n(3),s=n(4),u=n(2),l=n(111),c=(n(1).Reflect||{}).construct,d=u(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),h=!u(function(){c(function(){})});r(r.S+r.F*(d||h),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(h&&!d)return c(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(l.apply(e,r))}var u=n.prototype,f=i(s(u)?u:Object.prototype),p=Function.apply.call(e,f,t);return s(p)?p:f}})},function(e,t,n){var r=n(9),i=n(0),o=n(3),a=n(28);i(i.S+i.F*n(2)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(0),i=n(22).f,o=n(3);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(0),i=n(3),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(118)(o,"Object",function(){var e,t=this,n=t._k;do{if(t._i>=n.length)return{value:void 0,done:!0}}while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){function r(e,t){var n,s,c=arguments.length<3?e:arguments[2];return l(e)===c?e[t]:(n=i.f(e,t))?a(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:u(s=o(e))?r(s,t,c):void 0}var i=n(22),o=n(38),a=n(14),s=n(0),u=n(4),l=n(3);s(s.S,"Reflect",{get:r})},function(e,t,n){var r=n(22),i=n(0),o=n(3);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(0),i=n(38),o=n(3);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(0),i=n(3),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(132)})},function(e,t,n){var r=n(0),i=n(3),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){function r(e,t,n){var u,h,f=arguments.length<4?e:arguments[3],p=o.f(c(e),t);if(!p){if(d(h=a(e)))return r(h,t,n,f);p=l(0)}if(s(p,"value")){if(!1===p.writable||!d(f))return!1;if(u=o.f(f,t)){if(u.get||u.set||!1===u.writable)return!1;u.value=n,i.f(f,t,u)}else i.f(f,t,l(0,n));return!0}return void 0!==p.set&&(p.set.call(f,n),!0)}var i=n(9),o=n(22),a=n(38),s=n(14),u=n(0),l=n(31),c=n(3),d=n(4);u(u.S,"Reflect",{set:r})},function(e,t,n){var r=n(0),i=n(77);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){n(299),e.exports=n(7).Array.includes},function(e,t,n){"use strict";var r=n(0),i=n(59)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(39)("includes")},function(e,t,n){n(301),e.exports=n(7).Array.flatMap},function(e,t,n){"use strict";var r=n(0),i=n(302),o=n(10),a=n(6),s=n(20),u=n(120);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=u(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(39)("flatMap")},function(e,t,n){"use strict";function r(e,t,n,l,c,d,h,f){for(var p,g,y=c,v=0,m=!!h&&s(h,f,3);v<l;){if(v in n){if(p=m?m(n[v],v,t):n[v],g=!1,o(p)&&(g=p[u],g=void 0!==g?!!g:i(p)),g&&d>0)y=r(e,t,p,a(p.length),y,d-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=p}y++}v++}return y}var i=n(61),o=n(4),a=n(6),s=n(19),u=n(5)("isConcatSpreadable");e.exports=r},function(e,t,n){n(304),e.exports=n(7).String.padStart},function(e,t,n){"use strict";var r=n(0),i=n(133),o=n(67),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){n(306),e.exports=n(7).String.padEnd},function(e,t,n){"use strict";var r=n(0),i=n(133),o=n(67),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){n(308),e.exports=n(7).String.trimLeft},function(e,t,n){"use strict";n(44)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){n(310),e.exports=n(7).String.trimRight},function(e,t,n){"use strict";n(44)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){n(312),e.exports=n(73).f("asyncIterator")},function(e,t,n){n(105)("asyncIterator")},function(e,t,n){n(314),e.exports=n(7).Object.getOwnPropertyDescriptors},function(e,t,n){var r=n(0),i=n(132),o=n(16),a=n(22),s=n(89);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),u=a.f,l=i(r),c={},d=0;l.length>d;)void 0!==(n=u(r,t=l[d++]))&&s(c,t,n);return c}})},function(e,t,n){n(316),e.exports=n(7).Object.values},function(e,t,n){var r=n(0),i=n(134)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){n(318),e.exports=n(7).Object.entries},function(e,t,n){var r=n(0),i=n(134)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";n(126),n(320),e.exports=n(7).Promise.finally},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(1),a=n(54),s=n(128);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){n(322),n(323),n(324),e.exports=n(7)},function(e,t,n){var r=n(1),i=n(0),o=n(67),a=[].slice,s=/MSIE .\./.test(o),u=function(e){return function(t,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(e,t,n){var r=n(0),i=n(95);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var r=n(92),i=n(34),o=n(12),a=n(1),s=n(15),u=n(45),l=n(5),c=l("iterator"),d=l("toStringTag"),h=u.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(f),g=0;g<p.length;g++){var y,v=p[g],m=f[v],b=a[v],w=b&&b.prototype;if(w&&(w[c]||s(w,c,h),w[d]||s(w,d,v),u[v]=h,m))for(y in r)w[y]||o(w,y,r[y],!0)}},function(e,t,n){var r=function(e){"use strict";function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,r){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),s=new f(r||[]);return b(a,"_invoke",{value:l(e,n,s)}),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach(function(n){t(e,n,function(e){return this._invoke(n,e)})})}function u(e,t){function n(i,o,a,s){var u=r(e[i],e,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&m.call(c,"__await")?t.resolve(c.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(c).then(function(e){l.value=e,a(l)},function(e){return n("throw",e,a,s)})}s(u.arg)}function i(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return o=o?o.then(i,i):i()}var o;b(this,"_invoke",{value:i})}function l(e,t,n){var i=E;return function(o,a){if(i===A)throw new Error("Generator is already running");if(i===x){if("throw"===o)throw a;return g()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=c(s,n);if(u){if(u===C)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===E)throw i=x,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=A;var l=r(e,t,n);if("normal"===l.type){if(i=n.done?x:k,l.arg===C)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=x,n.method="throw",n.arg=l.arg)}}}function c(e,t){var n=t.method,i=e.iterator[n];if(i===y)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=y,c(e,t),"throw"===t.method)?C:("return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),C);var o=r(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,C;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=y),t.delegate=null,C):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,C)}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function p(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=y,t.done=!0,t};return r.next=r}}return{next:g}}function g(){return{value:y,done:!0}}var y,v=Object.prototype,m=v.hasOwnProperty,b=Object.defineProperty||function(e,t,n){e[t]=n.value},w="function"==typeof Symbol?Symbol:{},_=w.iterator||"@@iterator",T=w.asyncIterator||"@@asyncIterator",S=w.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,n){return e[t]=n}}e.wrap=n;var E="suspendedStart",k="suspendedYield",A="executing",x="completed",C={},I={};t(I,_,function(){return this});var M=Object.getPrototypeOf,O=M&&M(M(p([])));O&&O!==v&&m.call(O,_)&&(I=O);var P=a.prototype=i.prototype=Object.create(I);return o.prototype=a,b(P,"constructor",{value:a,configurable:!0}),b(a,"constructor",{value:o,configurable:!0}),o.displayName=t(a,S,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,S,"GeneratorFunction")),e.prototype=Object.create(P),e},e.awrap=function(e){return{__await:e}},s(u.prototype),t(u.prototype,T,function(){return this}),e.AsyncIterator=u,e.async=function(t,r,i,o,a){void 0===a&&(a=Promise);var s=new u(n(t,r,i,o),a);return e.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},s(P),t(P,S,"Generator"),t(P,_,function(){return this}),t(P,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=p,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=y)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=y),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,C):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),C},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),h(n),C}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;h(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=y),C}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){n(327),e.exports=n(135).global},function(e,t,n){var r=n(328);r(r.G,{global:n(97)})},function(e,t,n){var r=n(97),i=n(135),o=n(329),a=n(331),s=n(338),u=function(e,t,n){var l,c,d,h=e&u.F,f=e&u.G,p=e&u.S,g=e&u.P,y=e&u.B,v=e&u.W,m=f?i:i[t]||(i[t]={}),b=m.prototype,w=f?r:p?r[t]:(r[t]||{}).prototype;f&&(n=t);for(l in n)(c=!h&&w&&void 0!==w[l])&&s(m,l)||(d=c?w[l]:n[l],m[l]=f&&"function"!=typeof w[l]?n[l]:y&&c?o(d,r):v&&w[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):g&&"function"==typeof d?o(Function.call,d):d,g&&((m.virtual||(m.virtual={}))[l]=d,e&u.R&&b&&!b[l]&&a(b,l,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(330);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(332),i=n(337);e.exports=n(99)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(333),i=n(334),o=n(336),a=Object.defineProperty;t.f=n(99)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(98);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(99)&&!n(136)(function(){return 7!=Object.defineProperty(n(335)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(98),i=n(97).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(98);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r,i;/**
 * @file Web Cryptography API shim
 * @author Artem S Vybornov <vybornov@gmail.com>
 * @license MIT
 */
!function(n,o){r=[],void 0!==(i=function(){return o(n)}.apply(t,r))&&(e.exports=i)}("undefined"!=typeof self?self:this,function(e){"use strict";function t(e){return btoa(e).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function n(e){return e+="===",e=e.slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function r(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function i(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function o(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=o(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=o(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function a(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function s(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(i(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach(function(n){n in e&&(t[n]=e[n])});break;default:throw new TypeError("Unsupported key type")}return t}function u(e){var t=s(e);return _&&(t.extractable=t.ext,delete t.ext),r(unescape(encodeURIComponent(JSON.stringify(t)))).buffer}function l(e){var n=d(e),r=!1;n.length>2&&(r=!0,n.shift());var o={ext:!0};switch(n[0][0]){case"1.2.840.113549.1.1.1":var a=["n","e","d","p","q","dp","dq","qi"],s=d(n[1]);r&&s.shift();for(var u=0;u<s.length;u++)s[u][0]||(s[u]=s[u].subarray(1)),o[a[u]]=t(i(s[u]));o.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return o}function c(e){var t,i=[["",null]],o=!1;switch(e.kty){case"RSA":for(var a=["n","e","d","p","q","dp","dq","qi"],s=[],u=0;u<a.length&&a[u]in e;u++){var l=s[u]=r(n(e[a[u]]));128&l[0]&&(s[u]=new Uint8Array(l.length+1),s[u].set(l,1))}s.length>2&&(o=!0,s.unshift(new Uint8Array([0]))),i[0][0]="1.2.840.113549.1.1.1",t=s;break;default:throw new TypeError("Unsupported key type")}return i.push(new Uint8Array(h(t)).buffer),o?i.unshift(new Uint8Array([0])):i[1]={tag:3,value:i[1]},new Uint8Array(h(i)).buffer}function d(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),t.end-t.pos<2||t.end>e.length)throw new RangeError("Malformed DER");var n=e[t.pos++],r=e[t.pos++];if(r>=128){if(r&=127,t.end-t.pos<r)throw new RangeError("Malformed DER");for(var o=0;r--;)o<<=8,o|=e[t.pos++];r=o}if(t.end-t.pos<r)throw new RangeError("Malformed DER");var a;switch(n){case 2:a=e.subarray(t.pos,t.pos+=r);break;case 3:if(e[t.pos++])throw new Error("Unsupported bit string");r--;case 4:a=new Uint8Array(e.subarray(t.pos,t.pos+=r)).buffer;break;case 5:a=null;break;case 6:var s=btoa(i(e.subarray(t.pos,t.pos+=r)));if(!(s in S))throw new Error("Unsupported OBJECT ID "+s);a=S[s];break;case 48:a=[];for(var u=t.pos+r;t.pos<u;)a.push(d(e,t));break;default:throw new Error("Unsupported DER tag 0x"+n.toString(16))}return a}function h(e,t){t||(t=[]);var n=0,i=0,o=t.length+2;if(t.push(0,0),e instanceof Uint8Array){n=2,i=e.length;for(var a=0;a<i;a++)t.push(e[a])}else if(e instanceof ArrayBuffer){n=4,i=e.byteLength,e=new Uint8Array(e);for(var a=0;a<i;a++)t.push(e[a])}else if(null===e)n=5,i=0;else if("string"==typeof e&&e in E){var s=r(atob(E[e]));n=6,i=s.length;for(var a=0;a<i;a++)t.push(s[a])}else if(e instanceof Array){for(var a=0;a<e.length;a++)h(e[a],t);n=48,i=t.length-o}else{if(!("object"==typeof e&&3===e.tag&&e.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+e);e=new Uint8Array(e.value),n=3,i=e.byteLength,t.push(0);for(var a=0;a<i;a++)t.push(e[a]);i++}if(i>=128){var u=i,i=4;for(t.splice(o,0,u>>24&255,u>>16&255,u>>8&255,255&u);i>1&&!(u>>24);)u<<=8,i--;i<4&&t.splice(o,4-i),i|=128}return t.splice(o-2,2,n,i),t}function f(e,t,n,r){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===n?e.extractable:n,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===r?e.usages:r,enumerable:!0}})}function p(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function g(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}if("function"!=typeof Promise)throw"Promise support required";var y=e.crypto||e.msCrypto;if(y){var v=y.subtle||y.webkitSubtle;if(v){var m=e.Crypto||y.constructor||Object,b=e.SubtleCrypto||v.constructor||Object,w=(e.CryptoKey||e.Key||Object,e.navigator.userAgent.indexOf("Edge/")>-1),_=!!e.msCrypto&&!w,T=!y.subtle&&!!y.webkitSubtle;if(_||T){var S={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},E={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach(function(e){var t=v[e];v[e]=function(i,c,d){var h,m,b,w=[].slice.call(arguments);switch(e){case"generateKey":h=o(i),m=c,b=d;break;case"importKey":h=o(d),m=w[3],b=w[4],"jwk"===i&&(c=s(c),c.alg||(c.alg=a(h)),c.key_ops||(c.key_ops="oct"!==c.kty?"d"in c?b.filter(g):b.filter(p):b.slice()),w[1]=u(c));break;case"unwrapKey":h=w[4],m=w[5],b=w[6],w[2]=d._key}if("generateKey"===e&&"HMAC"===h.name&&h.hash)return h.length=h.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[h.hash.name],v.importKey("raw",y.getRandomValues(new Uint8Array(h.length+7>>3)),h,m,b);if(T&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===h.name&&(!h.modulusLength||h.modulusLength>=2048))return i=o(i),i.name="RSAES-PKCS1-v1_5",delete i.hash,v.generateKey(i,!0,["encrypt","decrypt"]).then(function(e){return Promise.all([v.exportKey("jwk",e.publicKey),v.exportKey("jwk",e.privateKey)])}).then(function(e){return e[0].alg=e[1].alg=a(h),e[0].key_ops=b.filter(p),e[1].key_ops=b.filter(g),Promise.all([v.importKey("jwk",e[0],h,!0,e[0].key_ops),v.importKey("jwk",e[1],h,m,e[1].key_ops)])}).then(function(e){return{publicKey:e[0],privateKey:e[1]}});if((T||_&&"SHA-1"===(h.hash||{}).name)&&"importKey"===e&&"jwk"===i&&"HMAC"===h.name&&"oct"===c.kty)return v.importKey("raw",r(n(c.k)),d,w[3],w[4]);if(T&&"importKey"===e&&("spki"===i||"pkcs8"===i))return v.importKey("jwk",l(c),d,w[3],w[4]);if(_&&"unwrapKey"===e)return v.decrypt(w[3],d,c).then(function(e){return v.importKey(i,e,w[4],w[5],w[6])});var S;try{S=t.apply(v,w)}catch(e){return Promise.reject(e)}return _&&(S=new Promise(function(e,t){S.onabort=S.onerror=function(e){t(e)},S.oncomplete=function(t){e(t.target.result)}})),S=S.then(function(e){return"HMAC"===h.name&&(h.length||(h.length=8*e.algorithm.length)),0==h.name.search("RSA")&&(h.modulusLength||(h.modulusLength=(e.publicKey||e).algorithm.modulusLength),h.publicExponent||(h.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e=e.publicKey&&e.privateKey?{publicKey:new f(e.publicKey,h,m,b.filter(p)),privateKey:new f(e.privateKey,h,m,b.filter(g))}:new f(e,h,m,b)})}}),["exportKey","wrapKey"].forEach(function(e){var n=v[e];v[e]=function(o,u,l){var d=[].slice.call(arguments);switch(e){case"exportKey":d[1]=u._key;break;case"wrapKey":d[1]=u._key,d[2]=l._key}if((T||_&&"SHA-1"===(u.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===o&&"HMAC"===u.algorithm.name&&(d[0]="raw"),!T||"exportKey"!==e||"spki"!==o&&"pkcs8"!==o||(d[0]="jwk"),_&&"wrapKey"===e)return v.exportKey(o,u).then(function(e){return"jwk"===o&&(e=r(unescape(encodeURIComponent(JSON.stringify(s(e)))))),v.encrypt(d[3],l,e)});var h;try{h=n.apply(v,d)}catch(e){return Promise.reject(e)}return _&&(h=new Promise(function(e,t){h.onabort=h.onerror=function(e){t(e)},h.oncomplete=function(t){e(t.target.result)}})),"exportKey"===e&&"jwk"===o&&(h=h.then(function(e){return(T||_&&"SHA-1"===(u.algorithm.hash||{}).name)&&"HMAC"===u.algorithm.name?{kty:"oct",alg:a(u.algorithm),key_ops:u.usages.slice(),ext:!0,k:t(i(e))}:(e=s(e),e.alg||(e.alg=a(u.algorithm)),e.key_ops||(e.key_ops="public"===u.type?u.usages.filter(p):"private"===u.type?u.usages.filter(g):u.usages.slice()),e)})),!T||"exportKey"!==e||"spki"!==o&&"pkcs8"!==o||(h=h.then(function(e){return e=c(s(e))})),h}}),["encrypt","decrypt","sign","verify"].forEach(function(e){var t=v[e];v[e]=function(n,r,i,a){if(_&&(!i.byteLength||a&&!a.byteLength))throw new Error("Empy input is not allowed");var s=[].slice.call(arguments),u=o(n);if(_&&"decrypt"===e&&"AES-GCM"===u.name){var l=n.tagLength>>3;s[2]=(i.buffer||i).slice(0,i.byteLength-l),n.tag=(i.buffer||i).slice(i.byteLength-l)}s[1]=r._key;var c;try{c=t.apply(v,s)}catch(e){return Promise.reject(e)}return _&&(c=new Promise(function(t,n){c.onabort=c.onerror=function(e){n(e)},c.oncomplete=function(n){var n=n.target.result;if("encrypt"===e&&n instanceof AesGcmEncryptResult){var r=n.ciphertext,i=n.tag;n=new Uint8Array(r.byteLength+i.byteLength),n.set(new Uint8Array(r),0),n.set(new Uint8Array(i),r.byteLength),n=n.buffer}t(n)}})),c}}),_){var k=v.digest;v.digest=function(e,t){if(!t.byteLength)throw new Error("Empy input is not allowed");var n;try{n=k.call(v,e,t)}catch(e){return Promise.reject(e)}return n=new Promise(function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}})},e.crypto=Object.create(y,{getRandomValues:{value:function(e){return y.getRandomValues(e)}},subtle:{value:v}}),e.CryptoKey=f}T&&(y.subtle=v,e.Crypto=m,e.SubtleCrypto=b,e.CryptoKey=f)}}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(341);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}),n(351),n(414),n(420),n(421),n(423),n(424)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.OtvInsightAgent=t.eventTimelineAnalyzer=t.eventTimeline=t.conax=t.versions=t.ssp=t.player=t.utils=void 0;var i=n(342),o=n(346),a=r(o),s=n(347),u=r(s),l=n(348),c=n(11),d=n(349),h=n(350),f=function(e){return e&&e.__esModule?e:{default:e}}(h),p={product:u.product,buildNumber:u.number,buildType:"production",revision:u.revision,cmit:u.cmit},g={},y={SSPLicenseFormatter:a},v={getOrCreateCxDeviceId:i.getOrCreateCxDeviceId,resetCxDeviceId:i.resetCxDeviceId,getOperator:i.getOperator,getOttAccount:i.getOttAccount,generateUUID:i.generateUUID,addDevice:i.addDevice,getToken:i.getToken},m=new c.OtvEventTimeline,b=new d.OtvEventTimelineAnalyzer,w=new l.BrowserDetector(window),_={browser:w};t.utils=_,t.player=g,t.ssp=y,t.versions=p,t.conax=v,t.eventTimeline=m,t.eventTimelineAnalyzer=b,t.OtvInsightAgent=f.default},function(e,t,n){"use strict";function r(e){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function i(){var e=r("operator");return e||(e="default"),e}function o(){var e=r("ottaccount");return e||(e="a000002342"),e}function a(e,t,n){var r=new XMLHttpRequest;if(r.open("GET",e+"?accountid="+t+"&deviceid="+n,!1),r.send(),r.status===f){var i=JSON.parse(r.responseText);return window.console.log("Token: "+i.authtoken+" for "+t+":"+n),i.authtoken}window.console.error("Error getting token for "+t+":"+n+" - "+r.status)}function s(e,t,n,r,i){var o=new XMLHttpRequest;o.open("PUT",e+"?accountid="+t+"&deviceid="+n+"&devicetype="+r+"&friendlyname="+i,!1),o.send(),o.status===f?window.console.log("Added device: "+n+" to "+t):window.console.error("Error adding device: "+n+" to "+t+" - "+o.status)}function u(){return(0,h.default)()}function l(e){if("undefined"!=typeof Storage){var t=localStorage.getItem("cxDeviceId."+e);return null===t&&(t=u(),localStorage.setItem("cxDeviceId."+e,t),window.console.log("Created new CxDeviceId "+t+" for "+e)),t}return window.console.error("No web storage support, can not store CxDeviceId"),u()}function c(e){"undefined"!=typeof Storage?(localStorage.removeItem("cxDeviceId."+e),window.console.log("Removed CxDeviceId for "+e)):window.console.error("No web storage support, a new id is generated every time")}Object.defineProperty(t,"__esModule",{value:!0}),t.getToken=t.addDevice=t.generateUUID=t.getOttAccount=t.getOperator=t.resetCxDeviceId=t.getOrCreateCxDeviceId=void 0;var d=n(343),h=function(e){return e&&e.__esModule?e:{default:e}}(d),f=200;t.getOrCreateCxDeviceId=l,t.resetCxDeviceId=c,t.getOperator=i,t.getOttAccount=o,t.generateUUID=u,t.addDevice=s,t.getToken=a},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[r+s]=a[s];return t||o(a)}var i=n(344),o=n(345);e.exports=r},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){var t=e;try{var n=String.fromCharCode.apply(String,r(new Uint8Array(e))),i=JSON.parse(n);t=Uint8Array.from(atob(i.license[0]),function(e){return e.charCodeAt(0)})}catch(e){}return t}function o(e){return'{"challenge":"'+btoa(String.fromCharCode.apply(String,r(new Uint8Array(e))))+'"}'}Object.defineProperty(t,"__esModule",{value:!0}),t.unpackageLicense=i,t.packagePayload=o},function(e,t){e.exports={product:"5.19.3",number:27,revision:1718720473,cmit:"e415769217ff0db7c28b4b164c819645cc53528b"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this._window=t,this._userAgent=t.navigator.userAgent,this._smartTV=!1,this._chrome=!1,this._safari=!1,this._isLowLatencyCapable=!1,this._parseUserAgent()}return i(e,[{key:"_parseUserAgent",value:function(){this._smartTV=this._userAgent.toLowerCase().includes("smart");var e=this._window.chrome,t=this._window.navigator,n=t.vendor,r=void 0!==this._window.opr,i=t.userAgent.indexOf("Edge")>-1;t.userAgent.match("CriOS")?this._chrome=!0:null!==e&&void 0!==e&&"Google Inc."===n&&!1===r&&!1===i&&(this._chrome=!0),this._safari=-1!==this._userAgent.indexOf("Safari")&&-1===this._userAgent.indexOf("Chrome")&&-1===this._userAgent.indexOf("CriOS")}},{key:"isChrome",value:function(){return this._chrome}},{key:"isSmartTV",value:function(){return this._smartTV}},{key:"isSafari",value:function(){return!this._smartTV&&this._safari}},{key:"_getSmartTVOS",value:function(){var e="Browser",t=/Tizen|VIDAA|Web0S/gi,n=this._userAgent.match(t);return n&&(e=n[0]),e}},{key:"_handleTizenVersion",value:function(){var e=!1,t=/Tizen\W([\d|.]+)/g,n=this._userAgent.match(t);if(n){var r=n[0].slice("tizen ".length);e=Number(r)>=5.5}return e}},{key:"_handleChromium4DigitVersion",value:function(){var e=!1,t=/chrome\W([\d|.]+)/g,n=this._userAgent.toLocaleLowerCase().match(t);if(n){var r=n[0].slice("chrome ".length),i=r.split(".");e=Number(i[0])>=68}return e}},{key:"_handleVidaaVersion",value:function(){var e=!1;if(-1!==this._userAgent.toLocaleLowerCase().indexOf("vidaa")){var t=/VIDAA\W([\d|.]+)/g,n=this._userAgent.match(t);if(n){var r=n[0].slice("vidaa ".length);e=Number(r)>=5}}return e}},{key:"isLowLatencyCapable",value:function(){return this._isLowLatencyCapable=this._handleTizenVersion()||this._handleChromium4DigitVersion()||this._handleVidaaVersion(),this._isLowLatencyCapable}}]),e}();t.BrowserDetector=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OtvEventTimelineAnalyzer=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(11),a=function(){function e(){r(this,e)}return i(e,[{key:"getStartDuration",value:function(e){var t=[];return this._enumerateStartDurations(e,function(n,r){t.push({url:e?void 0:n,duration:r})}),t}},{key:"getSeekDuration",value:function(e){var t=[];return this._enumerateSeekDurations(e,function(n,r){t.push({url:e?void 0:n,duration:r})}),t}},{key:"getStartDurationDetails",value:function(e){if(e){for(var t=[],n=OTV.eventTimeline.getTimelineList(),r=-1,i=0;i<n.length;i++){var a=n[i];if(a.eventType===o.OtvEventType.playback){var s=JSON.parse(a.extra)[o.OtvEventExtraKey.url];if(r>=0&&a.command===o.OtvEventCommandPlayback.firstFrame){if(s===e){var u=n.slice(r,i+1);t=t.concat(u)}r=-1}a.command===o.OtvEventCommandPlayback.setURL&&s===e&&(r=i)}}return t}return[]}},{key:"getSeekDurationDetails",value:function(e){if(e){for(var t=[],n=OTV.eventTimeline.getTimelineList(),r=-1,i=0;i<n.length;i++){var a=n[i];if(a.eventType===o.OtvEventType.playback){var s=JSON.parse(a.extra)[o.OtvEventExtraKey.url];if(r>=0&&a.command===o.OtvEventCommandPlayback.seeked){if(s===e){var u=n.slice(r,i+1);t=t.concat(u)}r=-1}a.command===o.OtvEventCommandPlayback.seeking&&s===e&&(r=i)}}return t}return[]}},{key:"getZapDuration",value:function(e,t){if(e&&t){for(var n=OTV.eventTimeline.getTimelineList(),r=void 0,i=n.length-1;i>=0;i--){var a=n[i];if(a.eventType===o.OtvEventType.playback){var s=JSON.parse(a.extra)[o.OtvEventExtraKey.url];if(r&&a.command===o.OtvEventCommandPlayback.stop){if(s===e)return r.time-a.time;r=void 0}a.command===o.OtvEventCommandPlayback.firstFrame&&s===t&&(r=a)}}return-1}return-1}},{key:"_enumerateStartDurations",value:function(e,t){var n=OTV.eventTimeline.getTimelineList(),r=void 0,i=!0,a=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;if(c.eventType===o.OtvEventType.playback){var d=JSON.parse(c.extra)[o.OtvEventExtraKey.url],h=!e||d===e;if(r&&c.command===o.OtvEventCommandPlayback.firstFrame){if(h){t(d,c.time-r.time)}r=void 0}c.command===o.OtvEventCommandPlayback.setURL&&h&&(r=c)}}}catch(e){a=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}}},{key:"_enumerateSeekDurations",value:function(e,t){var n=OTV.eventTimeline.getTimelineList(),r=void 0,i=!0,a=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;if(c.eventType===o.OtvEventType.playback){var d=JSON.parse(c.extra)[o.OtvEventExtraKey.url],h=!e||d===e;if(r&&c.command===o.OtvEventCommandPlayback.seeked){if(h){t(d,c.time-r.time)}r=void 0}c.command===o.OtvEventCommandPlayback.seeking&&h&&(r=c)}}}catch(e){a=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}}}]),e}();t.OtvEventTimelineAnalyzer=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){if(r(this,e),"undefined"==typeof ni||void 0===ni.initialize)throw new Error("Nagra Insight module not loaded");ni.initialize(t),this.timeUpdateHandle=this._onTimeUpdate.bind(this),this.loadStartHandle=this._onLoadStart.bind(this),this.loadedMetadataHandle=this._onLoadedMetadata.bind(this),this.pauseHandle=this._onPause.bind(this),this.playingHandle=this._onPlaying.bind(this),this.seekingHandle=this._onSeeking.bind(this),this.bufferingHandle=this._onBuffering.bind(this),this.errorHandle=this._onError.bind(this),this.availableBitratesChangedHandle=this._onAvailableBitratesChanged.bind(this),this.networkErrorHandle=this._onNetworkError.bind(this),this.bitrateChangedHandle=this._onBitrateChanged.bind(this),this.networkStatisticsListeners={availableBitratesChanged:this.availableBitratesChangedHandle,errorChanged:this.networkErrorHandle},this.playbackStatisticsListeners={streamBitrateChanged:this.bitrateChangedHandle}}return i(e,[{key:"startSession",value:function(e,t,n){if(this.player)throw new Error("Only one insight session is possible at a time");this.player=e,this.content=t,this.liveOffset=0,n&&ni.setUserInfo(n),this.player.one("loadstart",this.loadStartHandle),this.audioLanguage=this._getAudioLanguage()}},{key:"stopSession",value:function(){this._cancelEvents(),ni.stop(),this.player=void 0}},{key:"terminate",value:function(){ni.terminate(),this._invalidate()}},{key:"_invalidate",value:function(){var e=function(){throw new Error("This OtvInsightAgent object is invalid after termination.")};this.startSession=e,this.stopSession=e,this.terminate=e}},{key:"_initialiseEvents",value:function(){this.player.on("pause",this.pauseHandle),this.player.on("playing",this.playingHandle),this.player.on("seeking",this.seekingHandle),this.player.on("waiting",this.bufferingHandle),this.player.on("error",this.errorHandle),this.player.on("timeupdate",this.timeUpdateHandle),this.player.one("loadedmetadata",this.loadedMetadataHandle),this.player.otvtoolkit().networkStatistics.addNetworkListener(this.networkStatisticsListeners),this.player.otvtoolkit().playbackStatistics.addPlaybackListener(this.playbackStatisticsListeners)}},{key:"_cancelEvents",value:function(){clearInterval(this.interval),this.interval=0,this.player.off("timeupdate",this.timeUpdateHandle),this.player.off("loadstart",this.loadStartHandle),this.player.off("loadedmetadata",this.loadedMetadataHandle),this.player.off("pause",this.pauseHandle),this.player.off("playing",this.playingHandle),this.player.off("seeking",this.seekingHandle),this.player.off("waiting",this.bufferingHandle),this.player.off("error",this.errorHandle),this.player.otvtoolkit().networkStatistics.removeNetworkListener(this.networkStatisticsListeners),this.player.otvtoolkit().playbackStatistics.removePlaybackListener(this.playbackStatisticsListeners)}},{key:"_onLoadStart",value:function(){ni.play(),this._initialiseEvents(),this.frameDrops=this.player.otvtoolkit().renderingStatistics.getFrameDrops()||0}},{key:"_onPause",value:function(){this.player.paused()&&ni.pause()}},{key:"_onPlaying",value:function(){ni.playing()}},{key:"_onSeeking",value:function(){ni.seekTo(this.player.currentTime())}},{key:"_onBuffering",value:function(){ni.buffering()}},{key:"_onError",value:function(){ni.addErrorEvent(this.player.error().code.toString(),this.player.error().message)}},{key:"_onLoadedMetadata",value:function(){var e=Object.assign({},this.content),t=this.player.duration(),n=this.player.otvtoolkit().networkStatistics.getAdaptiveStreaming();e.uri=this.player.currentSrc();var r=n.availableBitrates;r.length&&(e.bitrates=r),t===1/0?ni.setLiveContent(e):(e.duration=t,ni.setVodContent(e)),this.interval=setInterval(this._pollTask.bind(this),1e3)}},{key:"_onTimeUpdate",value:function(){if(this.player.duration()===1/0){var e=this._getLiveOffset();e!==this.liveOffset&&(ni.setOffsetFromLive(e),this.liveOffset=e)}else{var t=this.player.currentTime();ni.setPosition(t)}}},{key:"_getLiveOffset",value:function(){var e=this.player.currentTime(),t=this.player.seekable(),n=t.end(t.length-1)-e;return Math.round(10*(n+Number.EPSILON))/10}},{key:"_onAvailableBitratesChanged",value:function(e){ni.setAvailableBitrates(e)}},{key:"_onNetworkError",value:function(e,t){ni.addErrorEvent(e,t)}},{key:"_onBitrateChanged",value:function(e){ni.setBitrate(e)}},{key:"_pollTask",value:function(){var e=this.player.otvtoolkit().renderingStatistics.getFrameDrops();if(e&&e!==this.frameDrops){var t=e-this.frameDrops;ni.setFrameDrops(t),this.frameDrops=e}var n=this._getAudioLanguage();n!==this.audioLanguage&&(ni.setAudioLanguage(n),this.audioLanguage=n)}},{key:"_getAudioLanguage",value:function(){var e=this.player.audioTracks().tracks_,t=e.find(function(e){return e.enabled});return t?t.language:void 0}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(55),c=r(l),d=n(354),h=n(355),f=r(h),p=n(356),g=r(p),y=n(380),v=r(y),m=n(71),b=r(m),w=n(389),_=r(w),T=n(392),S=r(T),E=n(395),k=r(E),A=n(398),x=r(A),C=n(399),I=r(C),M=n(42),O=r(M),P=n(400),j=n(150),D=r(j),R=n(402),L=n(404),N=r(L),U=n(405),F=r(U),B=n(30),V=r(B),H=n(406),W=r(H),K=n(407),q=r(K),G=n(408),z=r(G),X=n(409),Y=r(X),J=n(410),Q=r(J),$=n(411),Z=r($),ee=n(412),te=r(ee),ne=n(57),re=n(413),ie=r(re),oe={drm:{system:"none",config:{"com.widevine.alpha":{persistentState:"optional"}}}},ae=c.default.getPlugin("plugin"),se={streaming:{retryParameters:{maxAttempts:4}},manifest:{retryParameters:{maxAttempts:4,timeout:5e3}}},ue=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._initComponents(n.components),r.otvVideoTracksButton&&r.otvVideoTracksButton(),r.techConfig=new ne.TechConfiguration,r._init(e,n),r}return a(t,e),s(t,[{key:"dispose",value:function(){this.otvResolutionController&&this.otvResolutionController.dispose(),this.drmSecurityLevel&&this.drmSecurityLevel.dispose(),this.networkStatistics&&this.networkStatistics.dispose(),this.playbackStatistics&&this.playbackStatistics.dispose(),this.renderingStatistics&&this.renderingStatistics.dispose(),this.timeline&&this.timeline.dispose(),this.errorReporting&&this.errorReporting.dispose(),this.reset(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this);for(var e=document.getElementsByClassName("opy-videowindow"),n=0;n<e.length;n++)e[n].remove()}},{key:"addEventListener",value:function(e,t,n){return this.eventTarget.addEventListener(e,t,n)}},{key:"removeEventListener",value:function(e,t,n){return this.eventTarget.removeEventListener(e,t,n)}},{key:"dispatchEvent",value:function(e){var t=void 0;return"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event"),t.initEvent(e,!0,!0)),this.eventTarget.dispatchEvent(t)}},{key:"addThumbnailPreview",value:function(e){var t=this;(0,ie.default)()&&setTimeout(function(){return t.player.thumbnails({vtt:e})},100)}},{key:"addChapters",value:function(e){var t=this;!(0,ie.default)()||this.chapterManager&&this.chapterManager.uri===e||(this.chapterManager&&(this.chapterManager.reset(),this.chapterManager=void 0),e&&setTimeout(function(){t.chapterManager=new chapters.ChapterManager(t.player,e)},0))}},{key:"getThumbnail",value:function(e,t){var n=this.player.tech_.shaka_;if(n){var r=n.getImageTracks();r.length?n.getThumbnails(r[0].id,e).then(function(e){var n={url:e.uris[0],x:Math.floor(e.positionX),y:Math.floor(e.positionY),width:Math.floor(e.width),height:Math.floor(e.height)};t(n)}).catch(function(){t(null)}):t(null)}else t(null)}},{key:"startThumbnailPresenter",value:function(){(0,ie.default)()&&!this.thumbnailPresenter&&(this.thumbnailPresenter=new thumbnailPresenter.ThumbnailPresenter(this.player,this.getThumbnail))}},{key:"createSourceObjectFromURL",value:function(e,t){return(new b.default.SourceBuilder).build(e,t)}},{key:"getResolution",value:function(){return this.playbackStatistics.getResolution()}},{key:"getBandwidth",value:function(){return this.playbackStatistics.getStreamBitrate()}},{key:"getMaxBandwidth",value:function(){return this.otvResolutionController.getMaxBandwidth()}},{key:"getMaxResolution",value:function(){return this.otvResolutionController.getMaxResolution()}},{key:"getVideoJS",value:function(){return c.default}},{key:"setMaxBandwidth",value:function(e){this.otvResolutionController.setMaxBandwidth(e)}},{key:"setMaxResolution",value:function(e,t){this.otvResolutionController.setMaxResolution(e,t)}},{key:"enablePiP",value:function(){(0,ie.default)()&&null===this.pipManager&&(this.pipManager=new pip.PiPManager(this.player,this.videoWindowDiv))}},{key:"enableAutoPiPInitiationOnScroll",value:function(e){(0,ie.default)()&&null!==this.pipManager&&this.pipManager.enableAutoPiPInitiationOnScroll(e)}},{key:"reset",value:function(){clearTimeout(this._zappingTimerId),this.timeline.onStop(),this.player.removeClass("vjs-has-started"),this._disableAllSubtitleTracks(),(0,ie.default)()&&this.addChapters(),(0,ie.default)()&&this.player.thumbnails&&this.player.thumbnails(),this.drmController.tearDown()}},{key:"getConfiguration",value:function(){return this.techConfig.getConfiguration(ne.CONFIG_TYPE_CUSTOMER)}},{key:"configure",value:function(e,t){return this.techConfig.configure(ne.CONFIG_TYPE_CUSTOMER,e,t)}},{key:"_init",value:function(e,t){var n=this;this._zappingTimerId=null,(0,ie.default)()&&(this.pipManager=null),e.addClass("vjs-otvtoolkit"),this.timeline=new W.default(e),this.segmentTimeoutController=new N.default.SegmentTimeoutController(e),this.eventTarget=document.createDocumentFragment(),this._log=(0,Y.default)(!1),this._initSource(e),this._initReset(e),this.pluginOptions=c.default.mergeOptions(oe,t),this.otvResolutionController=new I.default(e,this._log),this._initUIElement();e.$("video");this._initDrm(e),this._initPlayerEvents(e,this.drmController),this._checkForEdge(),this.on(e,"durationchange",function(){e.duration()===1/0?n._updateFormatTime():n._resetFormatTime()}),this._initDiagnostics(e),this.pluginOptions.quickmark&&this._initQuickmark(e),this._initCheckForSeekable(),O.default.isSmartTV()&&console.log("Executing on SmartTV"),this._initPlayerWaiting(e),this._initVideoSizeMonitor(e)}},{key:"_initVideoSizeMonitor",value:function(e){this.sizeMonitor=new F.default(e,this)}},{key:"_initQuickmark",value:function(e){var t=this.pluginOptions.quickmark.quickmarkConfig,n={};this.pluginOptions.quickmark.message&&(n.message=this.pluginOptions.quickmark.message),this.pluginOptions.quickmark.error&&(n.error=this.pluginOptions.quickmark.error),this.pluginOptions.quickmark.tlValidation&&(n.tlValidation=this.pluginOptions.quickmark.tlValidation);try{this.quickmarkInterface=new R.QuickmarkInterface({player:e,toolkit:this,url:t.url,service:t.service,token:t.token,tenant:t.tenant,apikey:t.apikey,secret:t.secret,callbacks:n}),this._log("jswbw version: "+this.quickmarkInterface.getVersion())}catch(e){this._log("Failed to create quickmark interface: "+e.message)}}},{key:"_initUIElement",value:function(){var e=document.getElementsByClassName("opy-videowindow");e.length>0?this.videoWindowDiv=e[0]:(this.videoWindowDiv=document.createElement("div"),this.videoWindowDiv.className="opy-videowindow"),document.body.contains(this.player.el())&&(this.player.el().parentNode.insertBefore(this.videoWindowDiv,this.player.el()),this.videoWindowDiv.appendChild(this.player.el()))}},{key:"_initDrm",value:function(e){var t=void 0,n=void 0;this.pluginOptions.drm&&this.pluginOptions.drm.config&&(t=this.pluginOptions.drm.config.preferredDRM,n=this.pluginOptions.drm.config.tvkeyOperatorUUID),D.default.setPreference(this._updatePreferenceForTVKey(t));var r=Z.default.homogeniseSsmUri(this.pluginOptions.drm);this.drmController=g.default.createDRMController(r,this._log,this.player,this.pluginOptions.preferredPlayer),this.drmSecurityLevel=new P.DrmSecurityLevel(e,this._log),this.wvhw=new te.default(this.pluginOptions.drm,this.drmSecurityLevel,this.techConfig,ne.CONFIG_TYPE_OTV,this._log),O.default.isTVKeyCapable()&&n&&this.drmSecurityLevel.activateTVKey(this.pluginOptions.drm.config)}},{key:"_updatePreferenceForTVKey",value:function(e){if(!e||"com.tvkey.drm"!==e.toLowerCase()||O.default.isTVKeyCapable())return e}},{key:"_initDiagnostics",value:function(e){this.networkStatistics=new _.default.NetworkStatistics(e),this.playbackStatistics=new S.default.PlaybackStatistics(e),this.renderingStatistics=new k.default.RenderingStatistics(e),this.errorReporting=O.default.isSafari()?new q.default.NativePlayerErrorReporting(e):new z.default.ShakaPlayerErrorReporting(e),this.logProvider=new Q.default.LogProvider(e)}},{key:"_disableAllSubtitleTracks",value:function(){for(var e=this.player.textTracks(),t=0;t<e.length;t++){var n=e[t];try{switch(n.kind.toLowerCase()){case"subtitles":case"captions":case"descriptions":n.mode="disabled"}}catch(e){this._log("Invalid track kind detected.")}}}},{key:"_resetFormatTime",value:function(){c.default.resetFormatTime&&this.updatedFormatTime&&(this._log("Resetting formatTime"),c.default.resetFormatTime(),delete this.updatedFormatTime)}},{key:"_updateFormatTime",value:function(){c.default.setFormatTime&&!this.updatedFormatTime&&(this._log("Setting formatTime to live"),c.default.setFormatTime(v.default.liveFormatTime.bind(this.player)),this.updatedFormatTime=!0)}},{key:"_createError",value:function(e,t){var n=new Error(t);return n.name=e,n}},{key:"_enableIntegrationLogo",value:function(e){var t=document.getElementById("logo"),n=document.getElementById("logo-img");t?(t.removeChild(n),t.parentNode.removeChild(t)):t=document.createElement("div"),n=document.createElement("div"),n.id="logo-img",n.style.backgroundImage="url('"+f.default+"')",n.style.width="100%",n.style.height="100%",n.style.backgroundSize="100%",n.style.backgroundRepeat="round",t.id="logo",t.style.pointerEvents="none",t.style.right="0",t.style.top="0",t.style.position="absolute",t.style.padding="5px",t.style.width="144px",t.style.height="72px",t.appendChild(n);var r=!1;return e&&(e.parentNode.appendChild(t),r=!0),r}},{key:"_makeSeekable",value:function(e){var t=this.player.el();e!==t.classList.contains("opy-seekable")&&(e?t.classList.add("opy-seekable"):t.classList.remove("opy-seekable"))}},{key:"_initSource",value:function(e){e.origSrc=e.src,e.src=function(t){var n=this.otvtoolkit();if(t){if(D.default.setSourcePreference(n._updatePreferenceForTVKey(t.preferredDRM)),D.default.getPreference()&&n.techConfig.configure(ne.CONFIG_TYPE_OTV,"drm.preferredKeySystems",[D.default.getPreference()]),n.segmentTimeoutController.setVodTimeoutMultiplier(t.vodSegmentTimeout||N.default.USE_DEFAULT),n.segmentTimeoutController.setLiveTimeoutMultiplier(t.liveSegmentTimeout||N.default.USE_DEFAULT),e.addClass("opy-zapping"),n._isConfigTimerDrivenNudgeable(e)){var r=function t(){n._isNudgeNeeded(e,!0)&&(n._doNudge(e)&&(e._zappingTimerId=setTimeout(function(){t()},5e3)))};clearTimeout(e._zappingTimerId),e._zappingTimerId=setTimeout(function(){r()},5e3)}this.one(e,["canplay","contentcanplay"],function(){e.removeClass("opy-zapping")}),n.reset();var i=n.drmController.updateSourceData(t);return e.tech_.shaka_&&e.tech_.shaka_.configure({streaming:{lowLatencyMode:void 0,rebufferingGoal:void 0,inaccurateManifestTolerance:void 0}}),n.otvResolutionController&&(t.startAtLowestBitrate?n.otvResolutionController.setShakaPlayToStartAtLowestBitrate():n.otvResolutionController.resetShakaPlayToStartAtLowestBitrate()),n.techConfig.configure(ne.CONFIG_TYPE_OTV,{streaming:{autoLowLatencyMode:i.lowLatencyEnabled}}),void 0!==n.pluginOptions.preferredPlayer&&(i.preferredPlayer=n.pluginOptions.preferredPlayer),n.timeline.onSetUrl(i),n.networkStatistics.setSource(t),n.playbackStatistics.setSource(t),n.renderingStatistics.setSource(t),void this.origSrc(i)}return this.origSrc(t)}}},{key:"_initReset",value:function(e){var t=this,n=e.reset.bind(e);e.reset=function(){t.techConfig.setTech(null),t._saveSettings(),t.reset(),n()}}},{key:"_saveSettings",value:function(){this.player&&(this._muted=this.player.muted(),this._volume=this.player.volume())}},{key:"_reinstateSettings",value:function(e){e&&(void 0!==this._muted&&(e.muted=this._muted,e.defaultMuted=this._muted),void 0!==this._volume&&(e.volume=this._volume),e.disablePictureInPicture=!0,e.addEventListener("contextmenu",function(e){e.preventDefault()},!1))}},{key:"_initReadyEvent",value:function(e,t){var n=this;this.on(e,"ready",function(){n.errorReporting.ready(),t.ready(e.tech_.el_);var r=e.$("video");if(n._reinstateSettings(r),n.startThumbnailPresenter(),n.techConfig.setTech(e.tech_.shaka_),n.otvResolutionController.ready(),e.tech_.shaka_){if(void 0===n.defaultInitDataTransform){var i=n.getConfiguration();n.defaultInitDataTransform=i.drm.initDataTransform}n._applyPlatformSpecificConfig(),e.options_.shakaConfig&&n.techConfig.configure(ne.CONFIG_TYPE_OTV,e.options_.shakaConfig),n.techConfig.configure(ne.CONFIG_TYPE_OTV,se),n.techConfig.configure(ne.CONFIG_TYPE_OTV,"drm.initDataTransform",function(e,t,r){return n._log("initDataTransform: current Drm system: "+r.keySystem),"com.tvkey.drm"!==r.keySystem?n.defaultInitDataTransform(e,t,r):(n._log("initDataTransform is called for tvkey."),n._log("init type: "+t),n._log("init Data: "+V.default.toBase64(e)),e)}),n.wvhw.setHwDecryption(n.pluginOptions.drm,n.drmSecurityLevel,n.techConfig,ne.CONFIG_TYPE_OTV)}})}},{key:"_applyPlatformSpecificConfig",value:function(){var e=O.default.getTizenVersion();isNaN(e)||5.5!==e||(this._log("Tizen 5.5 detected. Applying stallSkip configuration"),this.techConfig.configure(ne.CONFIG_TYPE_OTV,{streaming:{stallSkip:.2}}))}},{key:"_isConfigTimerDrivenNudgeable",value:function(){return O.default.isSmartTV()}},{key:"_isConfigPlayingEvtNudgeable",value:function(e){var t=!!e.otvtoolkit().pluginOptions.drm.config.ssmServer,n=!!e.otvtoolkit().pluginOptions.drm.system.includes("customer"),r=!!e.otvtoolkit().pluginOptions.drm.config.requestLicenceCallback;return!O.default.isSafari()&&(t||n||r)}},{key:"_isNudgeNeeded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.paused(),r=e.autoplay(),i=e.el_.classList.contains("opy-zapping"),o=r&&i;return o=t?o&&n:o&&this._isConfigPlayingEvtNudgeable(e)}},{key:"_doNudge",value:function(e){var t=!1,n=e.tech_.shaka_&&e.tech_.shaka_.isLive(),r=e.seekable().length;if(n)e.play(),t=!0;else if(r>0){var i=e.currentTime(),o=Math.min(5,2*(e.seekable().end(r-1)-e.seekable().start(r-1))/1e3);e.log("NUDGING currentTime is "+i+" <= "+o+" ?"),i<=o&&e.currentTime(o),t=!0}return t}},{key:"_initPlayingEvent",value:function(e){var t=this;this.one(e,"playing",function(){t._isNudgeNeeded(e)&&t._doNudge(e)})}},{key:"_initSeekEvent",value:function(e){this.on(e,"seeked",function(){e.paused()||e.play()})}},{key:"_initLoadStartEvent",value:function(e){var t=this;this.on(e,"loadstart",function(){t._configureTextDisplayFactory(),t._log("Current Tech name is:"+t.player.techName_)})}},{key:"_initPlayerEvents",value:function(e,t){this._initReadyEvent(e,t),this._initSeekEvent(e),this._initLoadStartEvent(e),this._initPlayingEvent(e)}},{key:"_initComponents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x.default.initialiseToolkit(this);for(var t in e)e.hasOwnProperty(t)&&(this.hasOwnProperty(t)?this[t](e[t]):c.default.log.warn('Component "'+t+'", does not exist it will not be added.'))}},{key:"_initPlayerWaiting",value:function(e){var t=function(){e.addClass("vjs-waiting");var t=e.currentTime(),n=function n(){e.currentTime()-t>.04&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))};e.on("timeupdate",n)};e.on("waiting",t)}},{key:"_initCheckForSeekable",value:function(){var e=this,t=function(){var t=e.player.seekable(),n=e.player.hasClass("vjs-liveui");0===t.length&&n&&e.player.removeClass("vjs-liveui")};this.on(this.player,"canplaythrough",t)}},{key:"_checkForEdge",value:function(){-1!==window.navigator.userAgent.toLowerCase().indexOf("edge")?this.player.hasClass("opy-edge")||this.player.addClass("opy-edge"):this.player.hasClass("opy-edge")&&this.player.removeClass("opy-edge")}},{key:"_enableConsoleLogging",value:function(e){this.on(e,"loadstart",this._printEvent),this.on(e,"sourceset",this._printEvent),this.on(e,"waiting",this._printEvent),this.on(e,"canplay",this._printEvent),this.on(e,"canplaythrough",this._printEvent),this.on(e,"playing",this._printEvent),this.on(e,"ended",this._printEvent),this.on(e,"seeking",this._printEvent),this.on(e,"seeked",this._printEvent),this.on(e,"play",this._printEvent),this.on(e,"firstplay",this._printEvent),this.on(e,"pause",this._printEvent),this.on(e,"durationchange",this._printEvent),this.on(e,"fullscreenchange",this._printEvent),this.on(e,"error",this._printEvent),this.on(e,"loadedmetadata",this._printEvent),this.on(e,"posterchange",this._printEvent),this.on(e,"textdata",this._printEvent),this.on(e,"ready",this._printEvent)}},{key:"_printEvent",value:function(e){this._log("Event: "+e.type+" called")}},{key:"_configureTextDisplayFactory",value:function(){var e=this,t=void 0,n=e.player.el_.getElementsByTagName("video")[0],r=n.parentElement;this.player.tech_.shaka_&&this.player.tech_.shaka_.setVideoContainer(r),t=function(){return new shaka.text.UITextDisplayer(n,r)},this.techConfig.configure(ne.CONFIG_TYPE_OTV,"textDisplayFactory",t)}}]),t}(ae);ue.VERSION=d.version,c.default.registerPlugin("otvtoolkit",ue),t.default=ue},function(e,t,n){(function(t){e.exports=t.videojs=n(353)}).call(t,n(18))},function(e,t,n){(function(t){/**
 * @license
 * Video.js 7.21.5-nmp-7 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}function n(e,t){St(e).forEach(function(n){return t(e[n],n)})}function r(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return Object.assign?_t.apply(void 0,[e].concat(r)):(r.forEach(function(t){t&&n(t,function(t,n){e[n]=t})}),e)}function i(e){return!!e&&"object"==typeof e}function o(e){return i(e)&&"[object Object]"===Tt.call(e)&&e.constructor===Object}function a(e,t){if(!e||!t)return"";if("function"!=typeof window.getComputedStyle)return"";var n;try{n=window.getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}function s(e){return"string"==typeof e&&Boolean(e.trim())}function u(e){if(0<=e.indexOf(" "))throw new Error("class has illegal whitespace characters")}function l(){return document===window.document}function c(e){return i(e)&&1===e.nodeType}function d(e){return function(t,n){return s(t)?(n=c(n=s(n)?document.querySelector(n):n)?n:document,n[e]&&n[e](t)):document[e](null)}}function h(e,t,n,r){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={});var i=document.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(mt.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+n+"."),i.setAttribute(e,n)):"textContent"===e?f(i,n):i[e]===n&&"tabIndex"!==e||(i[e]=n)}),Object.getOwnPropertyNames(n).forEach(function(e){i.setAttribute(e,n[e])}),r&&C(i,r),i}function f(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function p(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function g(e,t){return u(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function y(e,t){return e.classList?e.classList.add(t):g(e,t)||(e.className=(e.className+" "+t).trim()),e}function v(e,t){return e?(e.classList?e.classList.remove(t):(u(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e):(mt.warn("removeClass was called with an element that doesn't exist"),null)}function m(e,t,n){var r=g(e,t);if((n="boolean"!=typeof(n="function"==typeof n?n(e,t):n)?!r:n)!==r)return(n?y:v)(e,t),e}function b(e,t){Object.getOwnPropertyNames(t).forEach(function(n){var r=t[n];null===r||void 0===r||!1===r?e.removeAttribute(n):e.setAttribute(n,!0===r?"":r)})}function w(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var n=e.attributes,r=n.length-1;0<=r;r--){var i=n[r].name,o=n[r].value;"boolean"!=typeof e[i]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+",")||(o=null!==o),t[i]=o}return t}function _(e,t){return e.getAttribute(t)}function T(e,t,n){e.setAttribute(t,n)}function S(e,t){e.removeAttribute(t)}function E(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,r=0,i=0;e.offsetParent&&e!==document[ct.fullscreenElement];)r+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{left:r,top:i,width:t,height:n}}function k(e){return i(e)&&3===e.nodeType}function A(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function x(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return c(e="function"==typeof e?e():e)||k(e)?e:"string"==typeof e&&/\S/.test(e)?document.createTextNode(e):void 0}).filter(function(e){return e})}function C(e,t){return x(t).forEach(function(t){return e.appendChild(t)}),e}function I(e,t){return C(A(e),t)}function M(e,t){l()&&(t&&(gt=t),window.setTimeout($t,e))}function O(){Qt=!0,window.removeEventListener("load",O)}function P(e){var t=document.createElement("style");return t.className=e,t}function j(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}function D(e,t){var n;nn.has(e)&&(0===(n=nn.get(e)).handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&nn.delete(e))}function R(e,t,n,r){n.forEach(function(n){e(t,n,r)})}function L(e){function t(){return!0}function n(){return!1}if(e.fixed_)return e;if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var r,i,o,a=e||window.event;for(r in e={},a)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&"path"!==r&&("returnValue"===r&&a.preventDefault||(e[r]=a[r]));e.target||(e.target=e.srcElement||document),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){a.preventDefault&&a.preventDefault(),e.returnValue=!1,a.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),e.cancelBubble=!0,a.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX&&(i=document.documentElement,o=document.body,e.pageX=e.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}function N(e,t,n){if(Array.isArray(t))return R(N,e,t,n);nn.has(e)||nn.set(e,{});var r=nn.get(e);r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=Zt++),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(!r.disabled){t=L(t);var i=r.handlers[t.type];if(i)for(var o=i.slice(0),a=0,s=o.length;a<s&&!t.isImmediatePropagationStopped();a++)try{o[a].call(e,t,n)}catch(t){mt.error(t)}}}),1===r.handlers[t].length&&(e.addEventListener?(n=!1,rn()&&-1<on.indexOf(t)&&(n={passive:!0}),e.addEventListener(t,r.dispatcher,n)):e.attachEvent&&e.attachEvent("on"+t,r.dispatcher))}function U(e,t,n){if(nn.has(e)){var r=nn.get(e);if(r.handlers){if(Array.isArray(t))return R(U,e,t,n);var i=function(e,t){r.handlers[t]=[],D(e,t)};if(void 0!==t){var o=r.handlers[t];if(o)if(n){if(n.guid)for(var a=0;a<o.length;a++)o[a].guid===n.guid&&o.splice(a--,1);D(e,t)}else i(e,t)}else for(var s in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},s)&&i(e,s)}}}function F(e,t,n){var r=nn.has(e)?nn.get(e):{},i=e.parentNode||e.ownerDocument;return"string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=L(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles?F.call(null,i,t,n):!i&&!t.defaultPrevented&&t.target&&t.target[t.type]&&(nn.has(t.target)||nn.set(t.target,{}),i=nn.get(t.target),t.target[t.type]&&(i.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),i.disabled=!1)),!t.defaultPrevented}function B(e,t,n){function r(){U(e,t,r),n.apply(this,arguments)}if(Array.isArray(t))return R(B,e,t,n);r.guid=n.guid=n.guid||Zt++,N(e,t,r)}function V(e,t,n){function r(){U(e,t,r),n.apply(this,arguments)}r.guid=n.guid=n.guid||Zt++,N(e,t,r)}function H(e,t,n){return t.guid||(t.guid=Zt++),(e=t.bind(e)).guid=n?n+"_"+t.guid:t.guid,e}function W(){}function K(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_||(e.constructor&&e.constructor.name?e.constructor.name:typeof e)}function q(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length}function G(e,t,n){if(!e||!e.nodeName&&!sn(e))throw new Error("Invalid target for "+K(t)+"#"+n+"; must be a DOM node or evented object.")}function z(e,t,n){if(!q(e))throw new Error("Invalid event type for "+K(t)+"#"+n+"; must be a non-empty string or array.")}function X(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for "+K(t)+"#"+n+"; must be a function.")}function Y(e,t,n){var r,i,o=t.length<3||t[0]===e||t[0]===e.eventBusEl_,t=o?(r=e.eventBusEl_,3<=t.length&&t.shift(),i=t[0],t[1]):(r=t[0],i=t[1],t[2]);return G(r,e,n),z(i,e,n),X(t,e,n),{isTargetingSelf:o,target:r,type:i,listener:t=H(e,t)}}function J(e,t,n,r){G(e,e,t),e.nodeName?an[t](e,n,r):e[t](n,r)}function Q(e,t){if(t=(t=void 0===t?{}:t).eventBusKey){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=h("span",{className:"vjs-event-bus"});return r(e,un),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),[e,e.el_,e.eventBusEl_].forEach(function(e){e&&nn.has(e)&&nn.delete(e)}),window.setTimeout(function(){e.eventBusEl_=null},0)}),e}function $(e,t){return r(e,ln),e.state=r({},e.state,t),"function"==typeof e.handleStateChanged&&sn(e)&&e.on("statechanged",e.handleStateChanged),e}function Z(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})}function ee(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function te(){for(var e={},t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return r.forEach(function(t){t&&n(t,function(t,n){o(t)?(o(e[n])||(e[n]={}),e[n]=te(e[n],t)):e[n]=t})}),e}function ne(e,t,n,r){return function(e,t,n){if("number"!=typeof t||t<0||n<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,r,n.length-1),n[r][t]}function re(e){var t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:ne.bind(null,"start",0,e),end:ne.bind(null,"end",1,e)};return window.Symbol&&window.Symbol.iterator&&(t[window.Symbol.iterator]=function(){return(e||[]).values()}),t}function ie(e,t){return Array.isArray(e)?re(e):void 0===e||void 0===t?re():re([[e,t]])}function oe(e,t){var n,r,i=0;if(!t)return 0;e&&e.length||(e=ie(0,0));for(var o=0;o<e.length;o++)n=e.start(o),i+=(r=t<(r=e.end(o))?t:r)-n;return i/t}function ae(e){if(e instanceof ae)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:i(e)&&("number"==typeof e.code&&(this.code=e.code),r(this,e)),this.message||(this.message=ae.defaultMessages[this.code]||"")}function se(e){return null!=e&&"function"==typeof e.then}function ue(e){se(e)&&e.then(null,function(e){})}function le(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,n,r){return e[n]&&(t[n]=e[n]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}function ce(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)}function de(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)}function he(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=document.createElement("a");n.href=e;for(var r={},i=0;i<t.length;i++)r[t[i]]=n[t[i]];return"http:"===r.protocol&&(r.host=r.host.replace(/:80$/,"")),"https:"===r.protocol&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=window.location.protocol),r.host||(r.host=window.location.host),r}function fe(e){var t;return e.match(/^https?:\/\//)||((t=document.createElement("a")).href=e,e=t.href),e}function pe(e){return"string"==typeof e&&(e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e))?e.pop().toLowerCase():""}function ge(e,t){return void 0===t&&(t=window.location),(":"===(e=he(e)).protocol?t:e).protocol+e.host!==t.protocol+t.host}function ye(e,t,n){var r=e;return On(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=_t({},t,{uri:e}),r.callback=n,r}function ve(e,t,n){return me(t=ye(e,t,n))}function me(e){function t(){var e=void 0,e=l.response||l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(l);if(g)try{e=JSON.parse(e)}catch(e){}return e}function n(e){return clearTimeout(a),(e=e instanceof Error?e:new Error(""+(e||"Unknown XMLHttpRequest Error"))).statusCode=0,u(e,y)}function r(){if(!o){clearTimeout(a);var n=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status,r=y,i=null;return 0!==n?(r={body:t(),statusCode:n,method:d,headers:{},url:c,rawRequest:l},l.getAllResponseHeaders&&(r.headers=jn(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),u(i,r,r.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var i,o,a,s=!1,u=function(t,n,r){s||(s=!0,e.callback(t,n,r))},l=e.xhr||null,c=(l=l||new(e.cors||e.useXDR?ve.XDomainRequest:ve.XMLHttpRequest)).url=e.uri||e.url,d=l.method=e.method||"GET",h=e.body||e.data,f=l.headers=e.headers||{},p=!!e.sync,g=!1,y={body:void 0,headers:{},statusCode:0,method:d,url:c,rawRequest:l};if("json"in e&&!1!==e.json&&(g=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),h=JSON.stringify(!0===e.json?h:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(r,0)},l.onload=r,l.onerror=n,l.onprogress=function(){},l.onabort=function(){o=!0},l.ontimeout=n,l.open(d,c,!p,e.username,e.password),p||(l.withCredentials=!!e.withCredentials),!p&&0<e.timeout&&(a=setTimeout(function(){var e;o||(o=!0,l.abort("timeout"),(e=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",n(e))},e.timeout)),l.setRequestHeader)for(i in f)f.hasOwnProperty(i)&&l.setRequestHeader(i,f[i]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(h||null),l}function be(e,t){var n=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<r.length&&(window.console&&window.console.groupCollapsed&&window.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach(function(e){return mt.error(e)}),window.console&&window.console.groupEnd&&window.console.groupEnd()),n.flush()}function we(e,t){var n={uri:e};(e=ge(e))&&(n.cors=e),(e="use-credentials"===t.tech_.crossOrigin())&&(n.withCredentials=e),Dn(n,H(this,function(e,n,r){return e?mt.error(e,n):(t.loaded_=!0,void("function"!=typeof window.WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(e){return"vttjserror"!==e.type?be(r,t):void mt.error("vttjs failed to load, stopping trying to process "+t.src)}):be(r,t)))}))}function _e(){}function Te(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Se(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}return e=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/),e?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function Ee(){this.values=Vn(null)}function ke(e,t,n,r){var i,o,a=r?e.split(r):[e];for(i in a)"string"==typeof a[i]&&2===(o=a[i].split(n)).length&&t(o[0].trim(),o[1].trim())}function Ae(e,t,n){function r(){var t=Se(e);if(null===t)throw new Te(Te.Errors.BadTimeStamp,"Malformed timestamp: "+o);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(){e=e.replace(/^\s+/,"")}var o=e;if(i(),t.startTime=r(),i(),"--\x3e"!==e.substr(0,3))throw new Te(Te.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);e=e.substr(3),i(),t.endTime=r(),i(),function(e,t){var r=new Ee;ke(e,function(e,t){switch(e){case"region":for(var i=n.length-1;0<=i;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];r.integer(e,a),r.percent(e,a)&&r.set("snapToLines",!1),r.alt(e,a,["auto"]),2===o.length&&r.alt("lineAlign",o[1],["start","center","end"]);break;case"position":o=t.split(","),r.percent(e,o[0]),2===o.length&&r.alt("positionAlign",o[1],["start","center","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");try{t.line=r.get("line","auto")}catch(e){}t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100);try{t.align=r.get("align","center")}catch(e){t.align=r.get("align","middle")}try{t.position=r.get("position","auto")}catch(e){t.position=r.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=r.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}function xe(e,t){for(var n,r,i,o,a,s,u,l,c,d,h=e.document.createElement("div"),f=h,p=[];null!==(n=function(){if(!t)return null;var e=t.match(/^([^<]*)(<[^>]*>?)?/);return e=e[1]||e[2],t=t.substr(e.length),e}());)"<"!==n[0]?f.appendChild(e.document.createTextNode((a=n,Hn.innerHTML=a,a=Hn.textContent,Hn.textContent="",a))):"/"!==n[1]?(o=Se(n.substr(1,n.length-2)))?(r=e.document.createProcessingInstruction("timestamp",o),f.appendChild(r)):(i=n.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(l=i[1],c=i[3],d=void 0,d=Wn[l],(r=d?(d=e.document.createElement(d),(l=qn[l])&&c&&(d[l]=c.trim()),d):null)&&(s=f,Gn[(u=r).localName]&&Gn[u.localName]!==s.localName||(i[2]&&((o=i[2].split(".")).forEach(function(e){var t=/^bg_/.test(e),e=t?e.slice(3):e;Kn.hasOwnProperty(e)&&(e=Kn[e],r.style[t?"background-color":"color"]=e)}),r.className=o.join(" ")),p.push(i[1]),f.appendChild(r),f=r))):p.length&&p[p.length-1]===n.substr(2).replace(">","")&&(p.pop(),f=f.parentNode);return h}function Ce(e){function t(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}var n=[],r="";if(!e||!e.childNodes)return"ltr";for(t(n,e);r=function e(n){if(!n||!n.length)return null;var r=n.pop(),i=r.textContent||r.innerText;if(i){var o=i.match(/^.*(\n|\r)/);return o?o[n.length=0]:i}return"ruby"===r.tagName?e(n):r.childNodes?(t(n,r),e(n)):void 0}(n);)for(var i=0;i<r.length;i++)if(function(e){for(var t=0;t<zn.length;t++){var n=zn[t];if(e>=n[0]&&e<=n[1])return 1}}(r.charCodeAt(i)))return"rtl";return"ltr"}function Ie(){}function Me(e,t,n){Ie.call(this),this.cue=t,this.cueDiv=xe(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:Ce(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":case"line-left":i=t.position;break;case"center":i=t.position-t.size/2;break;case"end":case"line-right":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Oe(e){var t,n,r,i;e.div&&(t=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop,i=(i=e.div.childNodes)&&(i=i[0])&&i.getClientRects&&i.getClientRects(),e=e.div.getBoundingClientRect(),i=i?Math.max(i[0]&&i[0].height||0,e.height/i.length):0),this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||t,this.bottom=e.bottom||r+(e.height||t),this.width=e.width||n,this.lineHeight=void 0!==i?i:e.lineHeight}function Pe(e,t,n,r){var i,o=new Oe(t),a=t.cue,s=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(a),u=[];if(a.snapToLines){switch(a.vertical){case"":u=["+y","-y"],i="height";break;case"rl":u=["+x","-x"],i="width";break;case"lr":u=["-x","+x"],i="width"}var l=o.lineHeight,c=l*Math.round(s),d=n[i]+l,h=u[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/l)*l),s<0&&(c+=""===a.vertical?n.height:n.width,u=u.reverse()),o.move(h,c)}else{var f=o.lineHeight/n.height*100;switch(a.lineAlign){case"center":s-=f/2;break;case"end":s-=f}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}u=["+y","-x","+x","-y"],o=new Oe(t)}o=function(e,t){for(var i,o=new Oe(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var u=e.intersectPercentage(n);u<a&&(i=new Oe(e),a=u),e=new Oe(o)}return i||o}(o,u),t.move(o.toCSSCompatValues(n))}function je(){}function De(e){return"string"==typeof e&&!!Jn[e.toLowerCase()]&&e.toLowerCase()}function Re(e,t,n){this.hasBeenReset=!1;var r="",i=!1,o=e,a=t,s=n,u=null,l="",c=!0,d="auto",h="start",f="auto",p="auto",g=100,y="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(e){r=""+e}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(e){i=!!e}},startTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");o=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");a=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return s},set:function(e){s=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(e){if(!1===(e="string"==typeof(e=e)&&!!Yn[e.toLowerCase()]&&e.toLowerCase()))throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");l=e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){(e=De(e))&&(h=e,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return f},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");f=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(e){(e=De(e))&&(p=e,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return y},set:function(e){if(!(e=De(e)))throw new SyntaxError("align: an invalid or illegal alignment string was specified.");y=e,this.hasBeenReset=!0}}}),this.displayState=void 0}function Le(e){return"number"==typeof e&&0<=e&&e<=100}function Ne(){var e=100,t=3,n=0,r=100,i=0,o=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Le(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!Le(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!Le(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!Le(e))throw new Error("ViewportAnchorY must be between 0 and 100.");o=e}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!Le(e))throw new Error("ViewportAnchorX must be between 0 and 100.");i=e}},scroll:{enumerable:!0,get:function(){return a},set:function(e){!1===(e="string"==typeof(e=e)&&!!$n[e.toLowerCase()]&&e.toLowerCase())||(a=e)}}})}function Ue(e,t,n){e.setTimeout(function(){return function e(t,n,i,o,a,s){void 0===t&&(t={}),void 0===n&&(n=[]),void 0===a&&(a=[]),void 0===s&&(s=!1);var u=n,n=u[0],l=u.slice(1);if("string"==typeof n)e(t,tr[n],i,o,a,s);else if(n){var c=Ve(o,n);if(!c.setSource)return a.push(c),e(t,l,i,o,a,s);c.setSource(r({},t),function(n,r){return n?e(t,l,i,o,a,s):(a.push(c),void e(r,t.type===r.type?l:tr[r.type],i,o,a,s))})}else l.length?e(t,l,i,o,a,s):s?i(t,a):e(t,tr["*"],i,o,a,!0)}(t,tr[t.type],n,e)},1)}function Fe(e,t,n,r){void 0===r&&(r=null);var i="call"+ee(n),i=e.reduce(Be(i),r),r=i===rr,i=r?null:t[n](i);return function(e,t,n,r){for(var i=e.length-1;0<=i;i--){var o=e[i];o[t]&&o[t](r,n)}}(e,n,i,r),i}function Be(e){return function(t,n){return t===rr?rr:n[e]?n[e](t):t}}function Ve(e,t){var n=nr[e.id()],r=null;if(null==n)return r=t(e),nr[e.id()]=[[t,r]],r;for(var i=0;i<n.length;i++){var o=n[i],a=o[0],o=o[1];a===t&&(r=o)}return null===r&&(r=t(e),n.push([t,r])),r}function He(e){return e=pe(e=void 0===e?"":e),sr[e.toLowerCase()]||""}function We(e){var t;return e=Array.isArray(e)?(t=[],e.forEach(function(e){e=We(e),Array.isArray(e)?t=t.concat(e):i(e)&&t.push(e)}),t):"string"==typeof e&&e.trim()?[Ke({src:e})]:i(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Ke(e)]:[]}function Ke(e){var t;return e.type||(t=He(e.src))&&(e.type=t),e}function qe(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Ge(e,t,n){try{e.style[t]=n}catch(e){return}}function ze(e){if((r=e.el()).hasAttribute("src"))return e.triggerSourceset(r.src),1;var t=e.$$("source"),n=[],r="";if(t.length){for(var i=0;i<t.length;i++){var o=t[i].src;o&&-1===n.indexOf(o)&&n.push(o)}return!!n.length&&(1===n.length&&(r=n[0]),e.triggerSourceset(r),!0)}}function Xe(e,t){for(var n={},r=0;r<e.length&&!((n=Object.getOwnPropertyDescriptor(e[r],t))&&n.set&&n.get);r++);return n.enumerable=!0,n.configurable=!0,n}function Ye(e){var t,n,r,i=e.el();i.resetSourceWatch_||(t={},n=Xe([e.el(),window.HTMLMediaElement.prototype,window.Element.prototype,dr],"innerHTML"),r=function(t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=t.apply(i,r);return ze(e),a}},["append","appendChild","insertAdjacentHTML"].forEach(function(e){i[e]&&(t[e]=i[e],i[e]=r(t[e]))}),Object.defineProperty(i,"innerHTML",te(n,{set:r(n.set)})),i.resetSourceWatch_=function(){i.resetSourceWatch_=null,Object.keys(t).forEach(function(e){i[e]=t[e]}),Object.defineProperty(i,"innerHTML",n)},e.one("sourceset",i.resetSourceWatch_))}function Je(e){var t,n,r,i;e.featuresSourceset&&((t=e.el()).resetSourceset_||(n=Xe([e.el(),window.HTMLMediaElement.prototype,hr],"src"),r=t.setAttribute,i=t.load,Object.defineProperty(t,"src",te(n,{set:function(r){return r=n.set.call(t,r),e.triggerSourceset(t.src),r}})),t.setAttribute=function(n,i){return i=r.call(t,n,i),/src/i.test(n)&&e.triggerSourceset(t.src),i},t.load=function(){var n=i.call(t);return ze(e)||(e.triggerSourceset(""),Ye(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):ze(e)||Ye(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=i,t.setAttribute=r,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}))}function Qe(e,t,n,r){function i(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})}var o={configurable:!0,enumerable:!0,get:function(){var e=n();return i(e),e}};return(r=void 0===r||r)&&(o.set=i),Object.defineProperty(e,t,o)}function $e(e){return kr.hasOwnProperty(e)}function Ze(e){return $e(e)?kr[e]:void 0}function et(e,t,n){n=(n?"before":"")+"pluginsetup",e.trigger(n,t),e.trigger(n+":"+t.name,t)}function tt(e,t){function n(){et(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return Ar(this,e),et(this,{name:e,plugin:t,instance:n}),n}return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function nt(e,t){return t.prototype.name=e,function(){et(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=Tr(t,[this].concat(r));return this[e]=function(){return o},et(this,o.getEventHash()),o}}function rt(e,t){e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),o=Math.floor(t/60%60),t=Math.floor(t/3600);return(i=0<(i=isNaN(e)||e===1/0?r=n="-":i)||0<t?i+":":"")+(r=((i||10<=o)&&r<10?"0"+r:r)+":")+(n=n<10?"0"+n:n)}function it(e,t,n){if(o=it.getPlayer(e))return t&&mt.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&o.ready(n),o;var r="string"==typeof e?Xt("#"+Or(e)):e;if(!c(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||mt.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),ut("beforesetup").forEach(function(e){e=e(r,te(t)),i(e)&&!Array.isArray(e)?t=te(t,e):mt.error("please return an object in beforesetup hooks")});var o=new(fn.getComponent("Player"))(r,t,n);return ut("setup").forEach(function(e){return e(o)}),o}for(var ot,at="7.21.5-nmp-7",st={},ut=function(e,t){return st[e]=st[e]||[],t&&(st[e]=st[e].concat(t)),st[e]},lt=function(e,t){return!((t=ut(e).indexOf(t))<=-1||(st[e]=st[e].slice(),st[e].splice(t,1),0))},ct={prefixed:!0},dt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],ht=dt[0],ft=0;ft<dt.length;ft++)if(dt[ft][1]in document){ot=dt[ft];break}if(ot){for(var pt=0;pt<ot.length;pt++)ct[ht[pt]]=ot[pt];ct.prefixed=ot[0]!==ht[0]}var gt,yt=[],vt=function(e,t){return function(n,r,i){var o,a=t.levels[r],r=new RegExp("^("+a+")$");"log"!==n&&i.unshift(n.toUpperCase()+":"),i.unshift(e+":"),yt&&(yt.push([].concat(i)),o=yt.length-1e3,yt.splice(0,0<o?o:0)),!window.console||(o=(o=window.console[n])||"debug"!==n?o:window.console.info||window.console.log)&&a&&r.test(n)&&o[Array.isArray(i)?"apply":"call"](window.console,i)}},mt=function e(t){function n(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i("log",r,t)}var r="info",i=vt(t,n);return n.createLogger=function(n){return e(t+": "+n)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},n.level=function(e){if("string"==typeof e){if(!n.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');r=e}return r},(n.history=function(){return yt?[].concat(yt):[]}).filter=function(e){return(yt||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},n.history.clear=function(){yt&&(yt.length=0)},n.history.disable=function(){null!==yt&&(yt.length=0,yt=null)},n.history.enable=function(){null===yt&&(yt=[])},n.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("error",r,t)},n.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("warn",r,t)},n.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("debug",r,t)},n}("VIDEOJS"),bt=mt.createLogger,wt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},_t=e(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.apply(this,arguments)}e.exports=t}),Tt=Object.prototype.toString,St=function(e){return i(e)?Object.keys(e):[]},Et=window.navigator&&window.navigator.userAgent||"",kt=/AppleWebKit\/([\d.]+)/i.exec(Et),At=kt?parseFloat(kt.pop()):null,xt=/iPod/i.test(Et),Ct=(Ut=Et.match(/OS (\d+)_/i))&&Ut[1]?Ut[1]:null,It=/Android/i.test(Et),Mt=function(){var e=Et.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),Ot=It&&Mt<5&&At<537,Pt=/Firefox/i.test(Et),jt=/Edg/i.test(Et),Dt=!jt&&(/Chrome/i.test(Et)||/CriOS/i.test(Et)),Rt=(zt=Et.match(/(Chrome|CriOS)\/(\d+)/))&&zt[2]?parseFloat(zt[2]):null,Lt=En=!(En=(En=/MSIE\s(\d+)\.\d/.exec(Et))&&parseFloat(En[1]))&&/Trident\/7.0/i.test(Et)&&/rv:11.0/.test(Et)?11:En,kt=/Safari/i.test(Et)&&!Dt&&!It&&!jt,Nt=/Tizen/i.test(Et),Ut=/Smart/i.test(Et),Ft=/Xbox/i.test(Et),Bt=/VIDAA/i.test(Et),Vt=/WebView\/3.0/i.test(Et),Ht=/Windows/i.test(Et),Wt=Boolean(l()&&("ontouchstart"in window||window.navigator.maxTouchPoints||window.DocumentTouch&&window.document instanceof window.DocumentTouch)),At=/iPad/i.test(Et)||kt&&Wt&&!/iPhone/i.test(Et),Kt=/iPhone/i.test(Et)&&!At,qt=Kt||At||xt,Gt=(kt||qt)&&!Dt,zt=Object.freeze({__proto__:null,IS_IPOD:xt,IOS_VERSION:Ct,IS_ANDROID:It,ANDROID_VERSION:Mt,IS_NATIVE_ANDROID:Ot,IS_FIREFOX:Pt,IS_EDGE:jt,IS_CHROME:Dt,CHROME_VERSION:Rt,IE_VERSION:Lt,IS_SAFARI:kt,IS_TIZEN:Nt,IS_SMARTTV:Ut,IS_XBOX:Ft,IS_VIDAA:Bt,IS_WEBVIEW:Vt,IS_WINDOWS:Ht,TOUCH_ENABLED:Wt,IS_IPAD:At,IS_IPHONE:Kt,IS_IOS:qt,IS_ANY_SAFARI:Gt}),Xt=d("querySelector"),Yt=d("querySelectorAll"),Jt=Object.freeze({__proto__:null,isReal:l,isEl:c,isInFrame:function(){try{return window.parent!==window.self}catch(e){return!0}},createEl:h,textContent:f,prependTo:p,hasClass:g,addClass:y,removeClass:v,toggleClass:m,setAttributes:b,getAttributes:w,getAttribute:_,setAttribute:T,removeAttribute:S,blockTextSelection:function(){document.body.focus(),document.onselectstart=function(){return!1}},unblockTextSelection:function(){document.onselectstart=function(){return!0}},getBoundingClientRect:function(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),n.height||(n.height=parseFloat(a(e,"height"))),n.width||(n.width=parseFloat(a(e,"width"))),n}},findPosition:E,getPointerPosition:function(e,t){var n={x:0,y:0};if(qt)for(var r=e;r&&"html"!==r.nodeName.toLowerCase();){var i,o=a(r,"transform");/^matrix/.test(o)?(i=o.slice(7,-1).split(/,\s/).map(Number),n.x+=i[4],n.y+=i[5]):/^matrix3d/.test(o)&&(o=o.slice(9,-1).split(/,\s/).map(Number),n.x+=o[12],n.y+=o[13]),r=r.parentNode}var s={},u=E(t.target),l=E(e),c=l.width,d=l.height,e=t.offsetY-(l.top-u.top),u=t.offsetX-(l.left-u.left);return t.changedTouches&&(u=t.changedTouches[0].pageX-l.left,e=t.changedTouches[0].pageY+l.top,qt&&(u-=n.x,e-=n.y)),s.y=1-Math.max(0,Math.min(1,e/d)),s.x=Math.max(0,Math.min(1,u/c)),s},isTextNode:k,emptyEl:A,normalizeContent:x,appendContent:C,insertContent:I,isSingleLeftClick:function(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons},$:Xt,$$:Yt}),Qt=!1,$t=function(){if(!1!==gt.options.autoSetup){var e=Array.prototype.slice.call(document.getElementsByTagName("video")),t=Array.prototype.slice.call(document.getElementsByTagName("audio")),n=Array.prototype.slice.call(document.getElementsByTagName("video-js")),r=e.concat(t,n);if(r&&0<r.length)for(var i=0,o=r.length;i<o;i++){var a=r[i];if(!a||!a.getAttribute){M(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&gt(a)}else Qt||M(1)}};l()&&("complete"===document.readyState?O():window.addEventListener("load",O));var Zt=3;window.WeakMap||(Rn=function(){function e(){this.vdata="vdata"+Math.floor(window.performance&&window.performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||Zt++;return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];mt("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var en,tn,nn=new(window.WeakMap?WeakMap:Rn),rn=function(){if("boolean"!=typeof en){en=!1;try{var e=Object.defineProperty({},"passive",{get:function(){en=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}return en},on=["touchstart","touchmove"],an=Object.freeze({__proto__:null,fixEvent:L,on:N,off:U,trigger:F,one:B,any:V});W.prototype.allowedEvents_={},W.prototype.addEventListener=W.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},N(this,e,t),this.addEventListener=n},W.prototype.removeEventListener=W.prototype.off=function(e,t){U(this,e,t)},W.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},B(this,e,t),this.addEventListener=n},W.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},V(this,e,t),this.addEventListener=n},W.prototype.dispatchEvent=W.prototype.trigger=function(e){var t=e.type||e;e=L(e="string"==typeof e?{type:t}:e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),F(this,e)},W.prototype.queueTrigger=function(e){var t=this;tn=tn||new Map;var n=e.type||e,r=tn.get(this);r||(r=new Map,tn.set(this,r));var i=r.get(n);r.delete(n),window.clearTimeout(i),i=window.setTimeout(function(){r.delete(n),0===r.size&&(r=null,tn.delete(t)),t.trigger(e)},0),r.set(n,i)};var sn=function(e){return e instanceof W||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},un={on:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,o=Y(this,n,"on"),a=o.isTargetingSelf,s=o.target,u=o.type,l=o.listener;J(s,"on",u,l),a||((i=function(){return e.off(s,u,l)}).guid=l.guid,(a=function(){return e.off("dispose",i)}).guid=l.guid,J(this,"on","dispose",i),J(s,"on","dispose",a))},one:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Y(this,n,"one"),o=i.isTargetingSelf,a=i.target,s=i.type,u=i.listener;o?J(a,"one",s,u):((o=function t(){e.off(a,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];u.apply(null,r)}).guid=u.guid,J(a,"one",s,o))},any:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Y(this,n,"any"),o=i.isTargetingSelf,a=i.target,s=i.type,u=i.listener;o?J(a,"any",s,u):((o=function t(){e.off(a,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];u.apply(null,r)}).guid=u.guid,J(a,"any",s,o))},off:function(e,t,n){!e||q(e)?U(this.eventBusEl_,e,t):(t=t,G(e=e,this,"off"),z(t,this,"off"),X(n,this,"off"),n=H(this,n),this.off("dispose",n),e.nodeName?(U(e,t,n),U(e,"dispose",n)):sn(e)&&(e.off(t,n),e.off("dispose",n)))},trigger:function(e,t){G(this.eventBusEl_,this,"trigger");var n=e&&"string"!=typeof e?e.type:e;if(!q(n)){if(n="Invalid event type for "+K(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.",!e)throw new Error(n);(this.log||mt).error(n)}return F(this.eventBusEl_,e,t)}},ln={state:{},setState:function(e){var t,r=this;return n(e="function"==typeof e?e():e,function(e,n){r.state[n]!==e&&((t=t||{})[n]={from:r.state[n],to:e}),r.state[n]=e}),t&&sn(this)&&this.trigger({changes:t,type:"statechanged"}),t}},cn=window.Map||function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var n in this.map_)e.call(t,this.map_[n],n,this)},e}(),dn=window.Set||function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}(),hn=e(function(e,t){function n(e){if(!e||"object"!=typeof e||(t=e.which||e.keyCode||e.charCode)&&(e=t),"number"==typeof e)return s[e];var t=String(e),e=r[t.toLowerCase()];return e||((e=i[t.toLowerCase()])?e:1===t.length?t.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){if(e=r[t.toLowerCase()])return e===n;if(e=i[t.toLowerCase()])return e===n}else if("number"==typeof t)return t===n;return!1}};for(var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91},o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var a,s=t.names=t.title={};for(o in r)s[r[o]]=o;for(a in i)r[a]=i[a]});hn.code,hn.codes,hn.aliases,hn.names,hn.title;var fn=function(){function e(e,t,n){var r=this;!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=te({},this.options_),t=this.options_=te(this.options_,t),this.id_=t.id||t.el&&t.el.id,this.id_||(e=e&&e.id&&e.id()||"no_player",this.id_=e+"_component_"+Zt++),this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(function(e){return r.addClass(e)}),!1!==t.evented&&(Q(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),$(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new dn,this.setIntervalIds_=new dn,this.rafIds_=new dn,this.namedRafs_=new cn,(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(e){if(void 0===e&&(e={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;0<=t;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e&&(this.options_=te(this.options_,e)),this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return h(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),o=i&&i[r],r=r&&r.split("-")[0],r=i&&i[r],n=n;return o&&o[e]?n=o[e]:r&&r[e]&&(n=r[e]),n=t?n.replace(/\{(\d+)\}/g,function(e,n){return n=t[n-1],void 0===n?e:n}):n},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var t=t.reduce(function(e,t){return e.concat(t)},[]),r=this,i=0;i<t.length;i++)if(!(r=r.getChild(t[i]))||!r.getChild)return;return r},t.addChild=function(t,n,r){if(void 0===n&&(n={}),void 0===r&&(r=this.children_.length),"string"==typeof t){var i=ee(t),o=n.componentClass||i;n.name=i;var a=e.getComponent(o);if(!a)throw new Error("Component "+o+" does not exist");if("function"!=typeof a)return null;a=new a(this.player_||this,n)}else a=t;return a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(r,0,a),a.parentComponent_=this,"function"==typeof a.id&&(this.childIndex_[a.id()]=a),(i=i||a.name&&ee(a.name()))&&(this.childNameIndex_[i]=a,this.childNameIndex_[Z(i)]=a),"function"==typeof a.el&&a.el()&&(i=null,this.children_[r+1]&&(this.children_[r+1].el_?i=this.children_[r+1].el_:c(this.children_[r+1])&&(i=this.children_[r+1])),this.contentEl().insertBefore(a.el(),i)),a},t.removeChild=function(e){if((e="string"==typeof e?this.getChild(e):e)&&this.children_){for(var t,n=!1,r=this.children_.length-1;0<=r;r--)if(this.children_[r]===e){n=!0,this.children_.splice(r,1);break}n&&(e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[ee(e.name())]=null,this.childNameIndex_[Z(e.name())]=null,(t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el()))}},t.initChildren=function(){var t,n,r,i=this,o=this.options_.children;o&&(t=this.options_,n=e.getComponent("Tech"),(r=Array.isArray(o)?o:Object.keys(o)).concat(Object.keys(this.options_).filter(function(e){return!r.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var t,e="string"==typeof e?o[t=e]||i.options_[t]||{}:(t=e.name,e);return{name:t,opts:e}}).filter(function(t){return(t=e.getComponent(t.opts.componentClass||ee(t.name)))&&!n.isTech(t)}).forEach(function(e){var n=e.name,e=e.opts;!1!==(e=void 0!==t[n]?t[n]:e)&&((e=!0===e?{}:e).playerOptions=i.options_.playerOptions,(e=i.addChild(n,e))&&(i[n]=e))}))},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},t.$=function(e,t){return Xt(e,t||this.contentEl())},t.$$=function(e,t){return Yt(e,t||this.contentEl())},t.hasClass=function(e){return g(this.el_,e)},t.addClass=function(e){y(this.el_,e)},t.removeClass=function(e){v(this.el_,e)},t.toggleClass=function(e,t){m(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return _(this.el_,e)},t.setAttribute=function(e,t){T(this.el_,e,t)},t.removeAttribute=function(e){S(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){return void 0!==t?(-1!==(""+(t=null===t||t!=t?0:t)).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"))):this.el_?(t=this.el_.style[e],n=t.indexOf("px"),-1!==n?parseInt(t.slice(0,n),10):parseInt(this.el_["offset"+ee(e)],10)):0},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");return t=a(this.el_,e),0!==(t=parseFloat(t))&&!isNaN(t)||(e="offset"+ee(e),t=this.el_[e]),t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(hn.isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){function e(){t=!1}var t,n=0,r=null;this.on("touchstart",function(e){1===e.touches.length&&(r={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},n=window.performance.now(),t=!0)}),this.on("touchmove",function(e){var n;1<e.touches.length?t=!1:r&&(n=e.touches[0].pageX-r.pageX,e=e.touches[0].pageY-r.pageY,10<Math.sqrt(n*n+e*e)&&(t=!1))}),this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(r=null)===t&&window.performance.now()-n<200&&(e.preventDefault(),this.trigger("tap"))})},t.enableTouchActivity=function(){var e,t,n;this.player()&&this.player().reportUserActivity&&(e=H(this.player(),this.player().reportUserActivity),this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}),n=function(n){e(),this.clearInterval(t)},this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n))},t.setTimeout=function(e,t){var n,r=this;return e=H(this,e),this.clearTimersOnDispose_(),n=window.setTimeout(function(){r.setTimeoutIds_.has(n)&&r.setTimeoutIds_.delete(n),e()},t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),window.clearTimeout(e)),e},t.setInterval=function(e,t){return e=H(this,e),this.clearTimersOnDispose_(),t=window.setInterval(e,t),this.setIntervalIds_.add(t),t},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),window.clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=H(this,e),t=window.requestAnimationFrame(function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()}),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var n=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=H(this,t);var r=this.requestAnimationFrame(function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)});return this.namedRafs_.set(e,r),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),window.cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var n=t[0],r=t[1];e[n].forEach(function(t,n){return e[r](n)})}),e.clearingTimersOnDispose_=!1}))},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var r=e.getComponent("Tech"),i=r&&r.isTech(n),r=e===n||e.prototype.isPrototypeOf(n.prototype);if(i||!r){var o=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass";throw new Error('Illegal component, "'+t+'"; '+o+".")}if(t=ee(t),e.components_||(e.components_={}),o=e.getComponent("Player"),"Player"===t&&o&&o.players){var a=o.players,o=Object.keys(a);if(a&&0<o.length&&o.map(function(e){return a[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[Z(t)]=n},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();fn.prototype.supportsRaf_="function"==typeof window.requestAnimationFrame&&"function"==typeof window.cancelAnimationFrame,fn.registerComponent("Component",fn);var pn=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},gn=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t};ae.prototype.code=0,ae.prototype.message="",ae.prototype.status=null,ae.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ae.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var yn=0;yn<ae.errorTypes.length;yn++)ae[ae.errorTypes[yn]]=yn,ae.prototype[ae.errorTypes[yn]]=yn;var vn=function(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(e){r=e}return[r,n]},mn=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=le(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(le))},bn=function(e,t){return e.forEach(function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return n.addCue(e)})}),t.textTracks()},wn="vjs-modal-dialog",_n=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleKeyDown_=function(e){return r.handleKeyDown(e)},r.close_=function(e){return r.close(e)},r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=h("div",{className:wn+"-content"},{role:"document"}),r.descEl_=h("p",{className:wn+"-description vjs-control-text",id:r.el().getAttribute("aria-describedby")}),f(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}gn(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return wn+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){var e;this.opened_||(e=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){var e;this.opened_&&(e=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose())},n.closeable=function(e){var t,n;return"boolean"==typeof e&&(t=this.closeable_=!!e,n=this.getChild("closeButton"),t&&!n&&(e=this.contentEl_,this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(n,"close",this.close_)),!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())),this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),I(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t),(t=this.getChild("closeButton"))&&n.appendChild(t.el_)},n.empty=function(){this.trigger("beforemodalempty"),A(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=document.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),hn.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(hn.isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),r=this.el_.querySelector(":focus"),i=0;i<n.length;i++)if(r===n[i]){t=i;break}document.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof window.HTMLAnchorElement||e instanceof window.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof window.HTMLInputElement||e instanceof window.HTMLSelectElement||e instanceof window.HTMLTextAreaElement||e instanceof window.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof window.HTMLIFrameElement||e instanceof window.HTMLObjectElement||e instanceof window.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},t}(fn);_n.prototype.options_={pauseOnOpen:!0,temporary:!0},fn.registerComponent("ModalDialog",_n);var Tn,Sn=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(pn(n),"length",{get:function(){return this.tracks_.length}});for(var r=0;r<t.length;r++)n.addTrack(t[r]);return n}gn(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},sn(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,n=0,r=this.length;n<r;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(W);for(Tn in Sn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Sn.prototype.allowedEvents_)Sn.prototype["on"+Tn]=null;var En=function(e){function t(t){for(var n,r=(t=void 0===t?[]:t).length-1;0<=r;r--)if(t[r].enabled){ce(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,n}gn(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&ce(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,ce(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(Sn),xt=function(e){function t(t){for(var n,r=(t=void 0===t?[]:t).length-1;0<=r;r--)if(t[r].selected){de(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(pn(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}gn(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&de(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,de(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(Sn),Ct=function(e){function t(){return e.apply(this,arguments)||this}gn(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(Sn),jt=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),kn=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){function t(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}var n=this.length||0,r=0,i=e.length;if(this.cues_=e,this.length_=e.length,n<i)for(r=n;r<i;r++)t.call(this,r)},t.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}(),An={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},xn={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Cn={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},In={disabled:"disabled",hidden:"hidden",showing:"showing"},kt=function(e){function t(t){void 0===t&&(t={});var n,r=e.call(this)||this,i={id:t.id||"vjs_track_"+Zt++,kind:t.kind||"",language:t.language||""},o=t.label||"";for(n in i)!function(e){Object.defineProperty(pn(r),e,{get:function(){return i[e]},set:function(){}})}(n);return Object.defineProperty(pn(r),"label",{get:function(){return o},set:function(e){e!==o&&(o=e,this.trigger("labelchange"))}}),r}return gn(t,e),t}(W),Ut=Object.freeze({__proto__:null,parseUrl:he,getAbsoluteURL:fe,getFileExtension:pe,isCrossOrigin:ge}),At="undefined"!=typeof window?window:void 0!==wt?wt:"undefined"!=typeof self?self:{},Mn=At,On=function(e){if(!e)return!1;var t=Pn.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},Pn=Object.prototype.toString;ve.httpHandler=function(e,t){return void 0===t&&(t=!1),function(n,r,i){if(n)e(n);else if(400<=r.statusCode&&r.statusCode<=599){if(n=i,t)if(Mn.TextDecoder){r=function(e){return void 0===e&&(e=""),e.toLowerCase().split(";").reduce(function(e,t){var n=t.split("="),t=n[0],n=n[1];return"charset"===t.trim()?n.trim():e},"utf-8")}(r.headers&&r.headers["content-type"]);try{n=new TextDecoder(r).decode(i)}catch(n){}}else n=String.fromCharCode.apply(null,new Uint8Array(i));e({cause:n})}else e(null,i)}};/**
     * @license
     * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
     * Copyright (c) 2014 David Björklund
     * Available under the MIT license
     * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
     */
var jn=function(e){var t={};return e&&e.trim().split("\n").forEach(function(e){var n=e.indexOf(":"),r=e.slice(0,n).trim().toLowerCase(),n=e.slice(n+1).trim();void 0===t[r]?t[r]=n:Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]}),t},Dn=ve,Rn=ve;ve.XMLHttpRequest=Mn.XMLHttpRequest||function(){},ve.XDomainRequest="withCredentials"in new ve.XMLHttpRequest?ve.XMLHttpRequest:Mn.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)!function(e){ve["delete"===e?"del":e]=function(t,n,r){return(n=ye(t,n,r)).method=e.toUpperCase(),me(n)}}(e[n])}(["get","put","post","patch","head","delete"]),Dn.default=Rn;var Ln=function(e){function t(t){var n;if(!(t=void 0===t?{}:t).tech)throw new Error("A tech was not provided.");var t=te(t,{kind:Cn[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=In[t.mode]||"disabled",i=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(r="hidden"),(n=e.call(this,t)||this).tech_=t.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var o=new kn(n.cues_),a=new kn(n.activeCues_),s=!1;return n.timeupdateHandler=H(pn(n),function(e){void 0===e&&(e={}),this.tech_.isDisposed()||(this.tech_.isReady_&&(this.activeCues=this.activeCues,s&&(this.trigger("cuechange"),s=!1)),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}),n.tech_.one("dispose",function(){n.stopTracking()}),"disabled"!==r&&n.startTracking(),Object.defineProperties(pn(n),{default:{get:function(){return i},set:function(){}},mode:{get:function(){return r},set:function(e){In[e]&&r!==e&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||we(this.src,this),this.stopTracking(),"disabled"!==r&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return a;for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];(i.startTime<=e&&i.endTime>=e||i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e)&&t.push(i)}if(s=!1,t.length!==this.activeCues_.length)s=!0;else for(var o=0;o<t.length;o++)-1===this.activeCues_.indexOf(t[o])&&(s=!0);return this.activeCues_=t,a.setCues_(this.activeCues_),a},set:function(){}}}),t.src?(n.src=t.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&we(n.src,pn(n))):n.loaded_=!0,n}gn(t,e);var n=t.prototype;return n.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},n.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},n.addCue=function(e){var t=e;if(t.constructor&&"VTTCue"!==t.constructor.name){for(var n in t=new window.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var r=this.tech_.textTracks(),i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(kt);Ln.prototype.allowedEvents_={cuechange:"cuechange"},At=function(e){function t(t){var n=te(t=void 0===t?{}:t,{kind:xn[t.kind]||""}),t=e.call(this,n)||this,r=!1,i="",o="";return Object.defineProperty(pn(t),"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),Object.defineProperty(pn(t),"audioChannelConfig",{get:function(){return i},set:function(e){"string"==typeof e&&e!==i&&(i=e)}}),Object.defineProperty(pn(t),"audioCodec",{get:function(){return o},set:function(e){"string"==typeof e&&e!==o&&(o=e)}}),n.enabled&&(t.enabled=n.enabled),i=n.audioChannelConfig||"",o=n.audioCodec||"",t.loaded_=!0,t}return gn(t,e),t}(kt),Rn=function(e){function t(t){var n=te(t=void 0===t?{}:t,{kind:An[t.kind]||""}),t=e.call(this,n)||this,r=!1;return Object.defineProperty(pn(t),"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),n.selected&&(t.selected=n.selected),t}return gn(t,e),t}(kt),kt=function(e){function t(t){var n;void 0===t&&(t={});var r=e.call(this)||this,i=new Ln(t);return r.kind=i.kind,r.src=i.src,r.srclang=i.language,r.label=i.label,r.default=i.default,Object.defineProperties(pn(r),{readyState:{get:function(){return n}},track:{get:function(){return i}}}),n=0,i.addEventListener("loadeddata",function(){n=2,r.trigger({type:"load",target:pn(r)})}),r}return gn(t,e),t}(W),kt.prototype.allowedEvents_={load:"load"},kt.NONE=0,kt.LOADING=1,kt.LOADED=2,kt.ERROR=3;var Nn={audio:{ListClass:En,TrackClass:At,capitalName:"Audio"},video:{ListClass:xt,TrackClass:Rn,capitalName:"Video"},text:{ListClass:Ct,TrackClass:Ln,capitalName:"Text"}};Object.keys(Nn).forEach(function(e){Nn[e].getterName=e+"Tracks",Nn[e].privateName=e+"Tracks_"});var Un={remoteText:{ListClass:Ct,TrackClass:Ln,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:jt,TrackClass:kt,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Fn=_t({},Nn,Un);Un.names=Object.keys(Un),Nn.names=Object.keys(Nn),Fn.names=[].concat(Un.names).concat(Nn.names);var wt=void 0!==wt?wt:"undefined"!=typeof window?window:{},Bn="undefined"!=typeof document?document:(Bn=wt["__GLOBAL_DOCUMENT_CACHE@4"])||(wt["__GLOBAL_DOCUMENT_CACHE@4"]={}),wt=Bn,Vn=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return _e.prototype=e,new _e};((Te.prototype=Vn(Error.prototype)).constructor=Te).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Ee.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var Hn=wt.createElement&&wt.createElement("textarea"),Wn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Kn={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},qn={v:"title",lang:"lang"},Gn={rt:"ruby"},zn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Ie.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},Ie.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(Me.prototype=Vn(Ie.prototype)).constructor=Me,Oe.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Oe.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Oe.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Oe.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Oe.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Oe.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Oe.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Oe.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},je.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},je.convertCueToDOMTree=function(e,t){return e&&t?xe(e,t):null},je.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1}(t)){var i=[],o=Oe.getSimpleBoxPosition(r),a={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var n,s,u=0;u<t.length;u++)s=t[u],n=new Me(e,s,a),r.appendChild(n.div),Pe(0,n,o,i),s.displayState=n.div,i.push(Oe.getSimpleBoxPosition(n))}()}else for(var s=0;s<t.length;s++)r.appendChild(t[s].displayState)},(je.Parser=function(e,t,n){n||(n=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof Te))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function t(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var r,i=(r=t()).match(/^WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Te(Te.Errors.BadSignature);n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:r=t(),n.state){case"HEADER":/:/.test(r)?function(e){e.match(/X-TIMESTAMP-MAP/)?ke(e,function(e,t){var r;"X-TIMESTAMP-MAP"===e&&(t=t,r=new Ee,ke(t,function(e,t){switch(e){case"MPEGT":r.integer(e+"S",t);break;case"LOCA":r.set(e+"L",Se(t))}},/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:r.get("MPEGTS"),LOCAL:r.get("LOCAL")}))},/=/):ke(e,function(e,t){var r;"Region"===e&&(t=t,r=new Ee,ke(t,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var i=new Ee;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;r.set(e+"X",i.get("x")),r.set(e+"Y",i.get("y"));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id")&&((t=new(n.vttjs.VTTRegion||n.window.VTTRegion)).width=r.get("width",100),t.lines=r.get("lines",3),t.regionAnchorX=r.get("regionanchorX",0),t.regionAnchorY=r.get("regionanchorY",100),t.viewportAnchorX=r.get("viewportanchorX",0),t.viewportAnchorY=r.get("viewportanchorY",100),t.scroll=r.get("scroll",""),n.onregion&&n.onregion(t),n.regionList.push({id:r.get("id"),region:t})))},/:/)}(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{Ae(r,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var a=-1!==r.indexOf("--\x3e");if(!r||a&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Te(Te.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var Xn=je,Yn={"":1,lr:1,rl:1},Jn={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};Re.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Qn=Re,$n={"":!0,up:!0},Zn=e(function(e){e=e.exports={WebVTT:Xn,VTTCue:Qn,VTTRegion:Ne},Mn.vttjs=e,Mn.WebVTT=e.WebVTT;var t=e.VTTCue,n=e.VTTRegion,r=Mn.VTTCue,i=Mn.VTTRegion;e.shim=function(){Mn.VTTCue=t,Mn.VTTRegion=n},e.restore=function(){Mn.VTTCue=r,Mn.VTTRegion=i},Mn.VTTCue||e.shim()});Zn.WebVTT,Zn.VTTCue,Zn.VTTRegion;var er=function(e){function t(t,n){var r;return void 0===n&&(n=function(){}),(t=void 0===t?{}:t).reportTouchActivity=!1,(r=e.call(this,null,t,n)||this).onDurationChange_=function(e){return r.onDurationChange(e)},r.trackProgress_=function(e){return r.trackProgress(e)},r.trackCurrentTime_=function(e){return r.trackCurrentTime(e)},r.stopTrackingCurrentTime_=function(e){return r.stopTrackingCurrentTime(e)},r.disposeSourceHandler_=function(e){return r.disposeSourceHandler(e)},r.queuedHanders_=new Set,r.hasStarted_=!1,r.on("playing",function(){this.hasStarted_=!0}),r.on("loadstart",function(){this.hasStarted_=!1}),Fn.names.forEach(function(e){e=Fn[e],t&&t[e.getterName]&&(r[e.privateName]=t[e.getterName])}),r.featuresProgressEvents||r.manualProgressOn(),r.featuresTimeupdateEvents||r.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(r["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?r.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(r.featuresNativeTextTracks=!0),r.featuresNativeTextTracks||r.emulateTextTracks(),r.preloadTextTracks=!1!==t.preloadTextTracks,r.autoRemoteTextTracks_=new Fn.text.ListClass,r.initTrackListeners(),t.nativeControlsForTouch||r.emitTapEvents(),r.constructor&&(r.name_=r.constructor.name||"Unknown Tech"),r}gn(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(H(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return ie(0,0)},n.bufferedPercent=function(){return oe(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(Nn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(e){for(var n=t[e+"Tracks"]()||[],r=n.length;r--;){var i=n[r];"text"===e&&t.removeRemoteTextTrack(i),n.removeTrack(i)}})},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return void 0!==e&&(this.error_=new ae(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?ie(0,0):ie()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;Nn.names.forEach(function(t){function n(){e.trigger(t+"trackchange")}var r=Nn[t],i=e[r.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),e.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})},n.addWebVttScript_=function(){var e,t=this;window.WebVTT||(document.body.contains(this.el())?!this.options_["vtt.js"]&&o(Zn)&&0<Object.keys(Zn).length?this.trigger("vttjsloaded"):((e=document.createElement("script")).src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),window.WebVTT=!0,this.el().parentNode.appendChild(e)):this.ready(this.addWebVttScript_))},n.emulateTextTracks=function(){function e(e){return o.addTrack(e.track)}function t(e){return o.removeTrack(e.track)}function n(){return i.trigger("texttrackchange")}function r(){n();for(var e=0;e<o.length;e++){var t=o[e];t.removeEventListener("cuechange",n),"showing"===t.mode&&t.addEventListener("cuechange",n)}}var i=this,o=this.textTracks(),a=this.remoteTextTracks();a.on("addtrack",e),a.on("removetrack",t),this.addWebVttScript_(),r(),o.addEventListener("change",r),o.addEventListener("addtrack",r),o.addEventListener("removetrack",r),this.on("dispose",function(){a.off("addtrack",e),a.off("removetrack",t),o.removeEventListener("change",r),o.removeEventListener("addtrack",r),o.removeEventListener("removetrack",r);for(var i=0;i<o.length;i++)o[i].removeEventListener("cuechange",n)})},n.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,r,i){void 0===i&&(i={});var o=e.textTracks();return i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e,i=new Fn.text.TrackClass(i),o.addTrack(i),i}(this,e,t,n)},n.createRemoteTextTrack=function(e){return e=te(e,{tech:this}),new Un.remoteTextEl.TrackClass(e)},n.addRemoteTextTrack=function(e,t){var n=this,r=this.createRemoteTextTrack(e=void 0===e?{}:e);return!0!==t&&!1!==t&&(mt.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!0!==t&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(r.track)}),r},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||window.Promise;if(e)return e.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.requestVideoFrameCallback=function(e){var t=this,n=Zt++;return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",function(){t.queuedHanders_.has(n)&&(t.queuedHanders_.delete(n),e())})):this.requestNamedAnimationFrame(n,e),n},n.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n,r){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ee(e),t.techs_[e]=n,t.techs_[Z(e)]=n,"Tech"!==e&&(void 0!==r&&!0===r?t.defaultTechOrder_.push(e):t.defaultTechOrder_.unshift(e)),n},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=ee(e),window&&window.videojs&&window.videojs[e]?(mt.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),window.videojs[e]):void 0)},t}(fn);Fn.names.forEach(function(e){var t=Fn[e];er.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),er.prototype.featuresVolumeControl=!0,er.prototype.featuresMuteControl=!0,er.prototype.featuresFullscreenResize=!1,er.prototype.featuresPlaybackRate=!1,er.prototype.featuresProgressEvents=!1,er.prototype.featuresSourceset=!1,er.prototype.featuresTimeupdateEvents=!1,er.prototype.featuresNativeTextTracks=!1,er.prototype.featuresVideoFrameCallback=!1,er.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var r=(r=e.sourceHandlers)||(e.sourceHandlers=[]);void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){for(var n,r=e.sourceHandlers||[],i=0;i<r.length;i++)if(n=r[i].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var r=e.sourceHandlers||[],i=0;i<r.length;i++)if(r[i].canHandleSource(t,n))return r[i];return null},e.canPlaySource=function(t,n){var r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""},["seekable","seeking","duration","currentTime","setCurrentTime"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:mt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},fn.registerComponent("Tech",er),er.registerTech("Tech",er),er.defaultTechOrder_=[];var tr={},nr={},rr={},ir={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},or={setCurrentTime:1,setMuted:1,setVolume:1},ar={play:1,pause:1},sr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};Bn=function(e){function t(t,n,r){var i=te({createEl:!1},n),r=e.call(this,t,i,r)||this;if(n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var o=0,a=n.playerOptions.techOrder;o<a.length;o++){var s=ee(a[o]),u=er.getTech(s);if((u=s?u:fn.getComponent(s))&&u.isSupported()){t.loadTech_(s);break}}return r}return gn(t,e),t}(fn),fn.registerComponent("MediaLoader",Bn);var ur="#222",lr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};fn.registerComponent("TextTrackDisplay",function(e){function t(t,n,r){function i(e){return o.updateDisplay(e)}var o=e.call(this,t,n,r)||this;return t.on("loadstart",function(e){return o.toggleDisplay(e)}),t.on("texttrackchange",i),t.on("loadedmetadata",function(e){return o.preselectTrack(e)}),t.ready(H(pn(o),function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",i),t.on("playerresize",i),window.addEventListener("orientationchange",i),t.on("dispose",function(){return window.removeEventListener("orientationchange",i)});for(var e=this.options_.playerOptions.tracks||[],n=0;n<e.length;n++)this.player_.addRemoteTextTrack(e[n],!0);this.preselectTrack()}})),o}gn(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,r={captions:1,subtitles:1},i=this.player_.textTracks(),o=this.player_.cache_.selectedLanguage,a=0;a<i.length;a++){var s=i[a];o&&o.enabled&&o.language&&o.language===s.language&&s.kind in r?n=s.kind!==o.kind&&n||s:o&&!o.enabled?t=e=n=null:s.default&&("descriptions"!==s.kind||e?s.kind in r&&!t&&(t=s):e=s)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof window.WebVTT&&window.WebVTT.processCues(window,[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],r=0;r<e.length;++r){var i=e[r];"showing"===i.mode&&n.push(i)}this.updateForTrack(n)}else{for(var o=null,a=null,s=e.length;s--;){var u=e[s];"showing"===u.mode&&("descriptions"===u.kind?o=u:a=u)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):o&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(o))}},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,r=n.length;r--;){var i,o=n[r];o&&(i=o.displayState,t.color&&(i.firstChild.style.color=t.color),t.textOpacity&&Ge(i.firstChild,"color",qe(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(i.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Ge(i.firstChild,"backgroundColor",qe(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Ge(i,"backgroundColor",qe(t.windowColor,t.windowOpacity)):i.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?i.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+ur:"raised"===t.edgeStyle?i.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+ur:"depressed"===t.edgeStyle?i.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+ur:"uniform"===t.edgeStyle&&(i.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+ur)),t.fontPercent&&1!==t.fontPercent&&(o=window.parseFloat(i.style.fontSize),i.style.fontSize=o*t.fontPercent+"px",i.style.height="auto",i.style.top="auto"),t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?i.firstChild.style.fontVariant="small-caps":i.firstChild.style.fontFamily=lr[t.fontFamily]))}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof window.WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],i=0;i<r.activeCues.length;++i)t.push(r.activeCues[i]);window.WebVTT.processCues(window,t,this.el_);for(var o=0;o<e.length;++o){for(var a=e[o],s=0;s<a.activeCues.length;++s){var u=a.activeCues[s].displayState;y(u,"vjs-text-track-cue"),y(u,"vjs-text-track-cue-"+(a.language||o)),a.language&&T(u,"lang",a.language)}this.player_.textTrackSettings&&this.updateDisplayState(a)}}},t}(fn));var cr,dr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=document.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=document.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",window.Element.prototype.appendChild.call(this,n),this.innerHTML}}),hr=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?fe(window.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return window.Element.prototype.setAttribute.call(this,"src",e),e}}),fr=function(e){function t(t,n){var r=e.call(this,t,n)||this,n=t.source,i=!1;if(r.featuresVideoFrameCallback=r.featuresVideoFrameCallback&&"VIDEO"===r.el_.tagName,n&&(r.el_.currentSrc!==n.src||t.tag&&3===t.tag.initNetworkState_)?r.setSource(n):r.handleLateInit_(r.el_),t.enableSourceset&&r.setupSourcesetHandling_(),r.isScrubbing_=!1,r.el_.hasChildNodes()){for(var o=r.el_.childNodes,a=o.length,s=[];a--;){var u=o[a];"track"===u.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(u),r.remoteTextTracks().addTrack(u.track),r.textTracks().addTrack(u.track),i||r.el_.hasAttribute("crossorigin")||!ge(u.src)||(i=!0)):s.push(u))}for(var l=0;l<s.length;l++)r.el_.removeChild(s[l])}return r.proxyNativeTracks_(),r.featuresNativeTextTracks&&i&&mt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),r.restoreMetadataTracksInIOSNativePlayer_(),(Wt||Kt||Ot)&&!0===t.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}gn(t,e);var n=t.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){Je(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){n=[];for(var e=0;e<r.length;e++){var t=r[e];"metadata"===t.kind&&n.push({track:t,storedMode:t.mode})}}function t(){for(var e=0;e<n.length;e++){var i=n[e];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}r.removeEventListener("change",t)}var n,r=this.textTracks();e(),r.addEventListener("change",e),this.on("dispose",function(){return r.removeEventListener("change",e)}),this.on("webkitbeginfullscreen",function(){r.removeEventListener("change",e),r.removeEventListener("change",t),r.addEventListener("change",t)}),this.on("webkitendfullscreen",function(){r.removeEventListener("change",e),r.addEventListener("change",e),r.removeEventListener("change",t)})},n.overrideNative_=function(e,t){var n,r=this;t===this["featuresNative"+e+"Tracks"]&&(this[(n=e.toLowerCase())+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){r.el()[n+"Tracks"].removeEventListener(e,r[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n))},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t,n,r=this,i=Nn[e],o=this.el()[i.getterName],a=this[i.getterName]();this["featuresNative"+i.capitalName+"Tracks"]&&o&&o.addEventListener&&(n=function(){for(var e=[],t=0;t<a.length;t++){for(var n=!1,r=0;r<o.length;r++)if(o[r]===a[t]){n=!0;break}n||e.push(a[t])}for(;e.length;)a.removeTrack(e.shift())},this[i.getterName+"Listeners_"]=t={change:function(t){var n={type:"change",target:a,currentTarget:a,srcElement:a};a.trigger(n),"text"===e&&r[Un.remoteText.getterName]().trigger(n)},addtrack:function(e){a.addTrack(e.track)},removetrack:function(e){a.removeTrack(e.track)}},Object.keys(t).forEach(function(e){var n=t[e];o.addEventListener(e,n),r.on("dispose",function(t){return o.removeEventListener(e,n)})}),this.on("loadstart",n),this.on("dispose",function(e){return r.off("loadstart",n)}))},n.proxyNativeTracks_=function(){var e=this;Nn.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},n.createEl=function(){var e,n=this.options_.tag;n&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(n?(e=n.cloneNode(!0),n.parentNode&&n.parentNode.insertBefore(e,n),t.disposeMediaElement(n),n=e):(n=document.createElement("video"),e=te({},this.options_.tag&&w(this.options_.tag)),Wt&&!0===this.options_.nativeControlsForTouch||delete e.controls,b(n,r(e,{id:this.options_.techId,class:"vjs-tech"}))),n.playerId=this.options_.playerId),void 0!==this.options_.preload&&T(n,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(n.disablePictureInPicture=this.options_.disablePictureInPicture);for(var i=["loop","muted","playsinline","autoplay"],o=0;o<i.length;o++){var a=i[o],s=this.options_[a];void 0!==s&&(s?T(n,a,a):S(n,a),n[a]=s)}return n},n.handleLateInit_=function(e){if(void 0!==e.networkState&&0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var r=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),t||this.trigger("loadstart")})}var i=["loadstart"];i.push("loadedmetadata"),2<=e.readyState&&i.push("loadeddata"),3<=e.readyState&&i.push("canplay"),4<=e.readyState&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(e){this.trigger(e)},this)})}},n.setScrubbing=function(e){this.isScrubbing_=e},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&Gt?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){mt(e,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;return this.el_.duration===1/0&&It&&Dt&&0===this.el_.currentTime?(this.on("timeupdate",function t(){0<e.el_.currentTime&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN):this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e,t,n=this;"webkitDisplayingFullscreen"in this.el_&&(e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))},this.on("webkitbeginfullscreen",t),this.on("dispose",function(){n.off("webkitbeginfullscreen",t),n.off("webkitendfullscreen",e)}))},n.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=window.navigator&&window.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)ue(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):e.prototype.requestVideoFrameCallback.call(this,t)},n.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):e.prototype.cancelVideoFrameCallback.call(this,t)},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){t.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):e.prototype.addTextTrack.call(this,t,n,r)},n.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=document.createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},n.addRemoteTextTrack=function(t,n){return n=e.prototype.addRemoteTextTrack.call(this,t,n),this.featuresNativeTextTracks&&this.el().appendChild(n),n},n.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),r=n.length;r--;)t!==n[r]&&t!==n[r].track||this.el().removeChild(n[r])},n.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),window.performance&&"function"==typeof window.performance.now?e.creationTime=window.performance.now():window.performance&&window.performance.timing&&"number"==typeof window.performance.timing.navigationStart&&(e.creationTime=window.Date.now()-window.performance.timing.navigationStart),e},t}(er);Qe(fr,"TEST_VID",function(){if(l()){var e=document.createElement("video"),t=document.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}}),fr.isSupported=function(){try{fr.TEST_VID.volume=.5}catch(e){return!1}return!(!fr.TEST_VID||!fr.TEST_VID.canPlayType)},fr.canPlayType=function(e){return fr.TEST_VID.canPlayType(e)},fr.canPlaySource=function(e,t){return fr.canPlayType(e.type)},fr.canControlVolume=function(){try{var e=fr.TEST_VID.volume;fr.TEST_VID.volume=e/2+.1;var t=e!==fr.TEST_VID.volume;return t&&qt?(window.setTimeout(function(){fr&&fr.prototype&&(fr.prototype.featuresVolumeControl=e!==fr.TEST_VID.volume)}),!1):t}catch(e){return!1}},fr.canMuteVolume=function(){try{var e=fr.TEST_VID.muted;return fr.TEST_VID.muted=!e,fr.TEST_VID.muted?T(fr.TEST_VID,"muted","muted"):S(fr.TEST_VID,"muted"),e!==fr.TEST_VID.muted}catch(e){return!1}},fr.canControlPlaybackRate=function(){if(It&&Dt&&Rt<58)return!1;try{var e=fr.TEST_VID.playbackRate;return fr.TEST_VID.playbackRate=e/2+.1,e!==fr.TEST_VID.playbackRate}catch(e){return!1}},fr.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(document.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(document.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(document.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(document.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},fr.supportsNativeTextTracks=function(){return Gt&&!Bt&&!Nt&&!Ft&&!Vt||qt&&Dt},fr.supportsNativeVideoTracks=function(){return!(!fr.TEST_VID||!fr.TEST_VID.videoTracks)},fr.supportsNativeAudioTracks=function(){return!(!fr.TEST_VID||!fr.TEST_VID.audioTracks)},fr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[0],n=e[1];Qe(fr.prototype,t,function(){return fr[n]()},!0)}),fr.prototype.featuresVolumeControl=fr.canControlVolume(),fr.prototype.movingMediaElementInDOM=!qt,fr.prototype.featuresFullscreenResize=!0,fr.prototype.featuresProgressEvents=!0,fr.prototype.featuresTimeupdateEvents=!0,fr.prototype.featuresVideoFrameCallback=!(!fr.TEST_VID||!fr.TEST_VID.requestVideoFrameCallback),fr.patchCanPlayType=function(){4<=Mt&&!Pt&&!Dt&&(cr=fr.TEST_VID&&fr.TEST_VID.constructor.prototype.canPlayType,fr.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":cr.call(this,e)})},fr.unpatchCanPlayType=function(){var e=fr.TEST_VID.constructor.prototype.canPlayType;return cr&&(fr.TEST_VID.constructor.prototype.canPlayType=cr),e},fr.patchCanPlayType(),fr.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},fr.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){fr.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){fr.prototype["set"+ee(e)]=function(t){(this.el_[e]=t)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){fr.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(e){fr.prototype["set"+ee(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){fr.prototype[e]=function(){return this.el_[e]()}}),er.withSourceHandlers(fr),fr.nativeSourceHandler={},fr.nativeSourceHandler.canPlayType=function(e){try{return fr.TEST_VID.canPlayType(e)}catch(e){return""}},fr.nativeSourceHandler.canHandleSource=function(e,t){return e.type?fr.nativeSourceHandler.canPlayType(e.type):e.src?(e=pe(e.src),fr.nativeSourceHandler.canPlayType("video/"+e)):""},fr.nativeSourceHandler.handleSource=function(e,t,n){var r;e.startTime&&(r=e.startTime,e.startTime===1/0&&(r=864e3),t.el_.currentTime=r),t.setSrc(e.src)},fr.nativeSourceHandler.dispose=function(){},fr.registerSourceHandler(fr.nativeSourceHandler),er.registerTech("Html5",fr);var pr=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],gr={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},yr=["tiny","xsmall","small","medium","large","xlarge","huge"],vr={};yr.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;vr[e]="vjs-layout-"+t});var mr={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},br=function(e){function t(n,i,o){var a,s;if(n.id=n.id||i.id||"vjs_video_"+Zt++,(i=r(t.getTagSettings(n),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof n.closest){var u=n.closest("[lang]");u&&u.getAttribute&&(i.language=u.getAttribute("lang"))}else for(var l=n;l&&1===l.nodeType;){if(w(l).hasOwnProperty("lang")){i.language=l.getAttribute("lang");break}l=l.parentNode}if((a=e.call(this,null,i,o)||this).boundDocumentFullscreenChange_=function(e){return a.documentFullscreenChange_(e)},a.boundFullWindowOnEscKey_=function(e){return a.fullWindowOnEscKey(e)},a.boundUpdateStyleEl_=function(e){return a.updateStyleEl_(e)},a.boundApplyInitTime_=function(e){return a.applyInitTime_(e)},a.boundUpdateCurrentBreakpoint_=function(e){return a.updateCurrentBreakpoint_(e)},a.boundHandleTechClick_=function(e){return a.handleTechClick_(e)},a.boundHandleTechDoubleClick_=function(e){return a.handleTechDoubleClick_(e)},a.boundHandleTechTouchStart_=function(e){return a.handleTechTouchStart_(e)},a.boundHandleTechTouchMove_=function(e){return a.handleTechTouchMove_(e)},a.boundHandleTechTouchEnd_=function(e){return a.handleTechTouchEnd_(e)},a.boundHandleTechTap_=function(e){return a.handleTechTap_(e)},a.isFullscreen_=!1,a.log=bt(a.id_),a.fsApi_=ct,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");return a.tag=n,a.tagAttributes=n&&w(n),a.language(a.options_.language),i.languages?(s={},Object.getOwnPropertyNames(i.languages).forEach(function(e){s[e.toLowerCase()]=i.languages[e]}),a.languages_=s):a.languages_=t.prototype.options_.languages,a.resetCache_(),a.poster_=i.poster||"",a.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],n.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(function(e){if("function"!=typeof a[e])throw new Error('plugin "'+e+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),Q(pn(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(N(document,a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_),o=te(a.options_),i.plugins&&Object.keys(i.plugins).forEach(function(e){a[e](i.plugins[e])}),i.debug&&a.debug(!0),a.options_.playerOptions=o,a.middleware_=[],a.playbackRates(i.playbackRates),a.initChildren(),a.isAudio("audio"===n.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),Wt&&a.addClass("vjs-touch-enabled"),qt||a.addClass("vjs-workinghover"),t.players[a.id_]=pn(a),n=at.split(".")[0],a.addClass("vjs-v"+n),a.userActive(!0),a.reportUserActivity(),a.one("play",function(e){return a.listenForUserActivity_(e)}),a.on("stageclick",function(e){return a.handleStageClick_(e)}),a.on("keydown",function(e){return a.handleKeyDown(e)}),a.on("languagechange",function(e){return a.handleLanguagechange(e)}),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)}),a}gn(t,e);var n=t.prototype;return n.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),U(document,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),U(document,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),nr[this.id()]=null,Fn.names.forEach(function(e){e=Fn[e],e=n[e.getterName](),e&&e.off&&e.off()}),e.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},n.createEl=function(){var t,n=this.tag,r=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),i="video-js"===this.tag.tagName.toLowerCase();r?t=this.el_=n.parentNode:i||(t=this.el_=e.prototype.createEl.call(this,"div"));var o,a,s=w(n);if(i){for(t=this.el_=n,n=this.tag=document.createElement("video");t.children.length;)n.appendChild(t.firstChild);g(t,"video-js")||y(t,"video-js"),t.appendChild(n),r=this.playerElIngest_=t,Object.keys(t).forEach(function(e){try{n[e]=t[e]}catch(e){}})}n.setAttribute("tabindex","-1"),s.tabindex="-1",(Lt||Dt&&Ht)&&(n.setAttribute("role","application"),s.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(e){i&&"class"===e||t.setAttribute(e,s[e]),i&&n.setAttribute(e,s[e])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",(n.player=t.player=this).addClass("vjs-paused"),!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=P("vjs-styles-dimensions"),o=Xt(".vjs-styles-defaults"),(a=Xt("head")).insertBefore(this.styleEl_,o?o.nextSibling:a.firstChild)),this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var u=n.getElementsByTagName("a"),l=0;l<u.length;l++){var c=u.item(l);y(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!r&&n.parentNode.insertBefore(t,n),p(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t},n.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):mt.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var r=parseFloat(t);isNaN(r)?mt.error('Improper value "'+t+'" supplied for for '+e):(this[n]=r,this.updateStyleEl_())},n.fluid=function(e){var t,n=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,sn(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),t=function(){n.on(["playerreset","resize"],n.boundUpdateStyleEl_)},sn(e=this)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){var e,t,n,r;!0!==window.VIDEOJS_NO_DYNAMIC_STYLE?(r=(n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/n[0],e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),j(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*r+"%;\n      }\n    ")):(t="number"==typeof this.width_?this.width_:this.options_.width,n="number"==typeof this.height_?this.height_:this.options_.height,(r=this.tech_&&this.tech_.el())&&(0<=t&&(r.width=t),0<=n&&(r.height=n)))},n.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=ee(e),o=e.charAt(0).toLowerCase()+e.slice(1);this.tag&&(er.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a=this.autoplay(),s={source:t,autoplay:a=!("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+o+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};if(Fn.names.forEach(function(e){e=Fn[e],s[e.getterName]=n[e.privateName]}),r(s,this.options_[i]),r(s,this.options_[o]),r(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(s.startTime=this.cache_.currentTime),!(e=er.getTech(e)))throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new e(s),this.tech_.ready(H(this,this.handleTechReady_),!0),bn(this.textTracksJson_||[],this.tech_),pr.forEach(function(e){n.on(n.tech_,e,function(t){return n["handleTech"+ee(e)+"_"](t)})}),Object.keys(gr).forEach(function(e){n.on(n.tech_,e,function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+gr[e]+"_"].bind(n),event:t}):n["handleTech"+gr[e]+"_"](t)})}),this.on(this.tech_,"loadstart",function(e){return n.handleTechLoadStart_(e)}),this.on(this.tech_,"sourceset",function(e){return n.handleTechSourceset_(e)}),this.on(this.tech_,"waiting",function(e){return n.handleTechWaiting_(e)}),this.on(this.tech_,"ended",function(e){return n.handleTechEnded_(e)}),this.on(this.tech_,"seeking",function(e){return n.handleTechSeeking_(e)}),this.on(this.tech_,"play",function(e){return n.handleTechPlay_(e)}),this.on(this.tech_,"firstplay",function(e){return n.handleTechFirstPlay_(e)}),this.on(this.tech_,"pause",function(e){return n.handleTechPause_(e)}),this.on(this.tech_,"durationchange",function(e){return n.handleTechDurationChange_(e)}),this.on(this.tech_,"fullscreenchange",function(e,t){return n.handleTechFullscreenChange_(e,t)}),this.on(this.tech_,"fullscreenerror",function(e,t){return n.handleTechFullscreenError_(e,t)}),this.on(this.tech_,"enterpictureinpicture",function(e){return n.handleTechEnterPictureInPicture_(e)}),this.on(this.tech_,"leavepictureinpicture",function(e){return n.handleTechLeavePictureInPicture_(e)}),this.on(this.tech_,"error",function(e){return n.handleTechError_(e)}),this.on(this.tech_,"posterchange",function(e){return n.handleTechPosterChange_(e)}),this.on(this.tech_,"textdata",function(e){return n.handleTechTextData_(e)}),this.on(this.tech_,"ratechange",function(e){return n.handleTechRateChange_(e)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||p(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e=this;Fn.names.forEach(function(t){t=Fn[t],e[t.privateName]=e[t.getterName]()}),this.textTracksJson_=mn(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&mt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,r=function(){function e(){t.muted(n)}var n=t.muted();t.muted(!0),t.playTerminatedQueue_.push(e);var r=t.play();if(se(r))return r.catch(function(t){throw e(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(t||""))})};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():r():se(n=this.play())&&(n=n.catch(r)),se(n))return n.then(function(){t.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){t.trigger({type:"autoplay-failure",autoplay:e})})}},n.updateSourceCaches_=function(e){var t=e=void 0===e?"":e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(e){return e.src===t});if(n.length)return n[0].type;for(var r=e.$$("source"),i=0;i<r.length;i++){var o=r[i];if(o.type&&o.src&&o.src===t)return o.type}return He(t)}(this,t)),this.cache_.source=te({},e,{src:t,type:n});for(var n=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),r=[],i=this.$$("source"),o=[],a=0;a<i.length;a++){var s=w(i[a]);r.push(s),s.src&&s.src===t&&o.push(s.src)}o.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t,n,r,i=this;this.changingSrc_||(t=function(e){return i.updateSourceCaches_(e)},n=this.currentSource().src,r=e.src,n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(this.lastSource_&&(this.lastSource_.tech===r||this.lastSource_.player===n)||(t=function(){})),t(r),e.src||this.tech_.any(["sourceset","loadstart"],function(e){"sourceset"!==e.type&&(e=i.techGet("currentSrc"),i.lastSource_.tech=e,i.updateSourceCaches_(e))})),this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))})},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(mt.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?ue(this.play()):this.pause()))},n.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t=e.target.player;t&&t!==this||(e=this.el(),!(t=document[this.fsApi_.fullscreenElement]===e)&&e.matches?t=e.matches(":"+this.fsApi_.fullscreen):!t&&e.msMatchesSelector&&(t=e.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(t))},n.handleTechFullscreenChange_=function(e,t){var n=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){n.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))},n.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){this.trigger("textdata",1<arguments.length?arguments[1]:null)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(e,t){this.ready(function(){if(e in or)return n=this.middleware_,r=this.tech_,i=t,r[r=e](n.reduce(Be(r),i));if(e in ar)return Fe(this.middleware_,this.tech_,e,t);var n,r,i;try{this.tech_&&this.tech_[e](t)}catch(n){throw mt(n),n}},!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in ir)return t=this.middleware_,n=this.tech_,r=e,t.reduceRight(Be(r),n[r]());if(e in ar)return Fe(this.middleware_,this.tech_,e);var t,n,r;try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw mt("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw mt("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw mt(t),t}}},n.play=function(){var e=this,t=this.options_.Promise||window.Promise;return t?new t(function(t){e.play_(t)}):this.play_()},n.play_=function(e){var t=this;this.playCallbacks_.push(e=void 0===e?ue:e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),e=Boolean(Gt||qt);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!n&&e&&this.load());n=this.techGet_("play"),e&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||ie(0,0)},n.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=(e=parseFloat(e))<0?1/0:e)!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e;return e=(e=this.techGet_("buffered"))&&e.length?e:ie(0,0)},n.bufferedPercent=function(){return oe(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),e=e.end(e.length-1);return e=t<e?t:e},n.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){if(void 0===e)return this.isFullscreen_;var t=this.isFullscreen_;this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_()},n.requestFullscreen=function(e){var t=this.options_.Promise||window.Promise;if(t){var n=this;return new t(function(t,r){function i(){n.off("fullscreenerror",a),n.off("fullscreenchange",o)}function o(){i(),t()}function a(e,t){i(),r(t)}n.one("fullscreenchange",o),n.one("fullscreenerror",a);var s=n.requestFullscreenHelper_(e);s&&(s.then(i,i),s.then(t,r))})}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(e){var t=this;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(n=e)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](n);return n&&n.then(function(){return t.isFullscreen(!0)},function(){return t.isFullscreen(!1)}),n}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var e=this.options_.Promise||window.Promise;if(e){var t=this;return new e(function(e,n){function r(){t.off("fullscreenerror",o),t.off("fullscreenchange",i)}function i(){r(),e()}function o(e,t){r(),n(t)}t.one("fullscreenchange",i),t.one("fullscreenerror",o);var a=t.exitFullscreenHelper_();a&&(a.then(r,r),a.then(e,n))})}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=document[this.fsApi_.exitFullscreen]();return t&&ue(t.then(function(){return e.isFullscreen(!1)})),t}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,N(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow="hidden",y(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){hn.isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,U(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow=this.docOrigOverflow,v(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in document&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in document)return document.exitPictureInPicture()},n.handleKeyDown=function(e){var t=this.options_.userActions;t&&t.hotkeys&&(function(e){var t=e.tagName.toLowerCase();return!!e.isContentEditable||("input"===t?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type):-1!==["textarea"].indexOf(t))}(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e)))},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,r=t.muteKey,r=void 0===r?function(e){return hn.isEventKey(e,"m")}:r,t=t.playPauseKey,t=void 0===t?function(e){return hn.isEventKey(e,"k")||hn.isEventKey(e,"Space")}:t;(void 0===n?function(e){return hn.isEventKey(e,"f")}:n).call(this,e)?(e.preventDefault(),e.stopPropagation(),n=fn.getComponent("FullscreenToggle"),!1!==document[this.fsApi_.fullscreenEnabled]&&n.prototype.handleClick.call(this,e)):r.call(this,e)?(e.preventDefault(),e.stopPropagation(),fn.getComponent("MuteToggle").prototype.handleClick.call(this,e)):t.call(this,e)&&(e.preventDefault(),e.stopPropagation(),fn.getComponent("PlayToggle").prototype.handleClick.call(this,e))},n.canPlayType=function(e){for(var t,n=0,r=this.options_.techOrder;n<r.length;n++){var i=r[n],o=er.getTech(i);if(o=o||fn.getComponent(i)){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else mt.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){function t(e,t,n){var r;return e.some(function(e){return t.some(function(t){if(r=n(e,t))return!0})}),r}var n,r=this,i=this.options_.techOrder.map(function(e){return[e,er.getTech(e)]}).filter(function(e){var t=e[0],e=e[1];return e?e.isSupported():(mt.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(e,t){var n=e[0];if(e[1].canPlaySource(t,r.options_[n.toLowerCase()]))return{source:t,tech:n}},o=this.options_.sourceOrder?t(e,i,(n=o,function(e,t){return n(t,e)})):t(i,e,o);return o||!1},n.handleSrc_=function(e,t){var n=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var r,i,o=We(e);o.length?(this.changingSrc_=!0,t||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),Ue(this,o[0],function(e,r){var i;return n.middleware_=r,t||(n.cache_.sources=o),n.updateSourceCaches_(e),n.src_(e)?1<o.length?n.handleSrc_(o.slice(1)):(n.changingSrc_=!1,n.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void n.triggerReady()):(r=r,i=n.tech_,void r.forEach(function(e){return e.setTech&&e.setTech(i)}))}),this.options_.retryOnError&&1<o.length&&(i=function(){n.off("error",r)},this.one("error",r=function(){n.error(null),n.handleSrc_(o.slice(1),!0)}),this.one("playing",i),this.resetRetryOnError_=function(){n.off("error",r),n.off("playing",i)})):this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},n.src=function(e){return this.handleSrc_(e,!1)},n.src_=function(e){var t,n,r=this,i=this.selectSource([e]);return!i||(t=i.tech,n=this.techName_,ee(t)!==ee(n)?(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(function(){r.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1)},n.load=function(){this.techCall_("load")},n.reset=function(){var e=this,t=this.options_.Promise||window.Promise;this.paused()||!t?this.doReset_():ue(this.play().then(function(){return e.doReset_()}))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),sn(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){var e;this.poster_&&!this.options_.techCanOverridePoster||!this.tech_||!this.tech_.poster||(e=this.tech_.poster()||"")!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))},n.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(ut("beforeerror").forEach(function(n){n=n(t,e),i(n)&&!Array.isArray(n)||"string"==typeof n||"number"==typeof n||null===n?e=n:t.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){var n=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",function(){this.off(["click","touchstart"],n)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new ae(e),this.addClass("vjs-error"),mt.error("(CODE:"+this.error_.code+" "+ae.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),ut("error").forEach(function(e){return e(t,t.error_)})},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,n,r=H(this,this.reportUserActivity),i=function(t){r(),this.clearInterval(e)};this.on("mousedown",function(){r(),this.clearInterval(e),e=this.setInterval(r,250)}),this.on("mousemove",function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())}),this.on("mouseup",i),this.on("mouseleave",i);var o,i=this.getChild("controlBar");!i||qt||It||(i.on("mouseenter",function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),i.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){var e;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o),(e=this.options_.inactivityTimeout)<=0||(o=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e)))},250)},n.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),n=this.getChild("ControlBar"),r=n&&n.currentHeight();t.forEach(function(t){t!==n&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(r),this.trigger("audioonlymodechange")},n.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(e){return e.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},n.audioOnlyMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var n=this.options_.Promise||window.Promise;if(n){if(e){var r=[];return this.isInPictureInPicture()&&r.push(this.exitPictureInPicture()),this.isFullscreen()&&r.push(this.exitFullscreen()),this.audioPosterMode()&&r.push(this.audioPosterMode(!1)),n.all(r).then(function(){return t.enableAudioOnlyUI_()})}return n.resolve().then(function(){return t.disableAudioOnlyUI_()})}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},n.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.audioPosterMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var n=this.options_.Promise||window.Promise;return n?e?(this.audioOnlyMode()?this.audioOnlyMode(!1):n.resolve()).then(function(){t.enablePosterModeUI_()}):n.resolve().then(function(){t.disablePosterModeUI_()}):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},n.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){var t=(t=(e=void 0===e?{}:e).track)||e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),sn(this)&&this.trigger("languagechange"))},n.languages=function(){return te(t.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=te(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];(r=te(r)).player=void 0,e.tracks[n]=r}return e},n.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var r=new _n(this,t);return this.addChild(r),r.on("dispose",function(){n.removeChild(r)}),r.open(),r},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<yr.length;n++){var r=yr[n];if(t<=this.breakpoints_[r]){if(e===r)return;e&&this.removeClass(vr[e]),this.addClass(vr[r]),this.breakpoint_=r;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=r({},mr,e),this.updateCurrentBreakpoint_()),r(this.breakpoints_)},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return vr[this.breakpoint_]||""},n.loadMedia=function(e,t){var n,r,i,o=this;e&&"object"==typeof e&&(this.reset(),this.cache_.media=te(e),n=(i=this.cache_.media).artwork,r=i.poster,e=i.src,i=i.textTracks,!n&&r&&(this.cache_.media.artwork=[{src:r,type:He(r)}]),e&&this.src(e),r&&this.poster(r),Array.isArray(i)&&i.forEach(function(e){return o.addRemoteTextTrack(e,!1)}),this.ready(t))},n.getMedia=function(){if(this.cache_.media)return te(this.cache_.media);var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:He(t.poster)}]),t},t.getTagSettings=function(e){var t,n={sources:[],tracks:[]},i=w(e),o=i["data-setup"];if(g(e,"vjs-fill")&&(i.fill=!0),g(e,"vjs-fluid")&&(i.fluid=!0),null!==o&&(o=(t=vn(o||"{}"))[0],t=t[1],o&&mt.error(o),r(i,t)),r(n,i),e.hasChildNodes())for(var a=e.childNodes,s=0,u=a.length;s<u;s++){var l=a[s],c=l.nodeName.toLowerCase();"source"===c?n.sources.push(w(l)):"track"===c&&n.tracks.push(w(l))}return n},n.flexNotSupported_=function(){var e=document.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},n.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(function(e){return"number"==typeof e})&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(fn);Fn.names.forEach(function(e){var t=Fn[e];br.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),br.prototype.crossorigin=br.prototype.crossOrigin,br.players={},wt=window.navigator,br.prototype.options_={techOrder:er.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","textTrackDisplay"],language:wt&&(wt.languages&&wt.languages[0]||wt.userLanguage||wt.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){br.prototype[e]=function(){return this.techGet_(e)}}),pr.forEach(function(e){br.prototype["handleTech"+ee(e)+"_"]=function(){return this.trigger(e)}}),fn.registerComponent("Player",br);var wr=e(function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t}),_r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}},Tr=e(function(e){function t(n,r,i){return _r()?e.exports=t=Reflect.construct:e.exports=t=function(e,t,n){var r=[null];return r.push.apply(r,t),r=new(Function.bind.apply(e,r)),n&&wr(r,n.prototype),r},t.apply(null,arguments)}e.exports=t}),Sr="plugin",Er="activePlugins_",kr={},Ar=function(e,t){e[Er]=e[Er]||{},e[Er][t]=!0},xr=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Q(this),delete this.trigger,$(this,this.constructor.defaultState),Ar(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return(e=void 0===e?{}:e).name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return F(this.eventBusEl_,e,this.getEventHash(t=void 0===t?{}:t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Er][e]=!1,this.player=this.state=null,t[e]=nt(e,kr[e])},e.isBasic=function(t){return"function"==typeof(t="string"==typeof t?Ze(t):t)&&!e.prototype.isPrototypeOf(t.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if($e(t))mt.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(br.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return kr[t]=n,t!==Sr&&(e.isBasic(n)?br.prototype[t]=tt(t,n):br.prototype[t]=nt(t,n)),n},e.deregisterPlugin=function(e){if(e===Sr)throw new Error("Cannot de-register base plugin.");$e(e)&&(delete kr[e],delete br.prototype[e])},e.getPlugins=function(e){var t;return(e=void 0===e?Object.keys(kr):e).forEach(function(e){var n=Ze(e);n&&((t=t||{})[e]=n)}),t},e.getPluginVersion=function(e){return(e=Ze(e))&&e.VERSION||""},e}();xr.getPlugin=Ze,xr.BASE_PLUGIN_NAME=Sr,xr.registerPlugin(Sr,xr),br.prototype.usingPlugin=function(e){return!!this[Er]&&!0===this[Er][e]},br.prototype.hasPlugin=function(e){return!!$e(e)};var Cr=rt,Ir=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wr(e,t)},Mr=!1,Or=function(e){return 0===e.indexOf("#")?e.slice(1):e};return it.hooks_=st,it.hooks=ut,it.hook=function(e,t){ut(e,t)},it.hookOnce=function(e,t){ut(e,[].concat(t).map(function(t){return function n(){return lt(e,n),t.apply(void 0,arguments)}}))},it.removeHook=lt,!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&l()&&((Bn=Xt(".vjs-styles-defaults"))||(Bn=P("vjs-styles-defaults"),(wt=Xt("head"))&&wt.insertBefore(Bn,wt.firstChild),j(Bn,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    "))),M(1,it),it.VERSION=at,it.options=br.prototype.options_,it.getPlayers=function(){return br.players},it.getPlayer=function(e){var t=br.players;if("string"==typeof e){var n=Or(e),r=t[n];if(r)return r;n=Xt("#"+n)}else n=e;if(c(n)&&(e=n.player,n=n.playerId,e||t[n]))return e||t[n]},it.getAllPlayers=function(){return Object.keys(br.players).map(function(e){return br.players[e]}).filter(Boolean)},it.players=br.players,it.getComponent=fn.getComponent,it.registerComponent=function(e,t){er.isTech(t)&&mt.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),fn.registerComponent.call(fn,e,t)},it.getTech=er.getTech,it.registerTech=er.registerTech,it.use=function(e,t){tr[e]=tr[e]||[],tr[e].push(t)},Object.defineProperty(it,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(it.middleware,"TERMINATOR",{value:rr,writeable:!1,enumerable:!0}),it.browser=zt,it.TOUCH_ENABLED=Wt,it.extend=function(e,t){void 0===t&&(t={}),Mr||(mt.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),Mr=!0);var n,r=function(){e.apply(this,arguments)},i={};for(n in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(r=t.constructor),i=t):"function"==typeof t&&(r=t),Ir(r,e),e&&(r.super_=e),i)i.hasOwnProperty(n)&&(r.prototype[n]=i[n]);return r},it.mergeOptions=te,it.bind=H,it.registerPlugin=xr.registerPlugin,it.deregisterPlugin=xr.deregisterPlugin,it.plugin=function(e,t){return mt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),xr.registerPlugin(e,t)},it.getPlugins=xr.getPlugins,it.getPlugin=xr.getPlugin,it.getPluginVersion=xr.getPluginVersion,it.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),it.options.languages=te(it.options.languages,((n={})[e]=t,n)),it.options.languages[e]},it.log=mt,it.createLogger=bt,it.createTimeRange=it.createTimeRanges=ie,it.formatTime=function(e,t){return Cr(e,t=void 0===t?e:t)},it.setFormatTime=function(e){Cr=e},it.resetFormatTime=function(){Cr=rt},it.parseUrl=he,it.isCrossOrigin=ge,it.EventTarget=W,it.on=N,it.one=B,it.off=U,it.trigger=F,it.xhr=Dn,it.TextTrack=Ln,it.AudioTrack=At,it.VideoTrack=Rn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){it[e]=function(){return mt.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Jt[e].apply(null,arguments)}}),it.computedStyle=a,it.dom=Jt,it.url=Ut,it.defineLazyProperty=Qe,it.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"}),it})}).call(t,n(18))},function(e,t){e.exports={name:"@nagra/videojs-otvtoolkit",version:"0.0.0",description:"OpenTV Player plugin",main:"dist/videojs-otvtoolkit.cjs.js",module:"dist/videojs-otvtoolkit.es.js","generator-videojs-plugin":{version:"5.0.4"},"otv-resolution-capper-plugin":{version:"0.0.0"},scripts:{prebuild:"npm run clean",build:"npm-run-all -p build:*","build:css":"npm-run-all build:css:scss","build:css:scss":"sass src/controlbar.scss dist/videojs-otvtoolkit.css","build:test":"node scripts/buildUnitTests.js","build:lint":"npm run lint",devbuild:"npm-run-all build:css lint",clean:"rimraf dist test/dist",postclean:"mkdirp dist test/dist",docs:"npm-run-all docs:*","docs:api":"jsdoc src -r -c jsdoc.json -d docs/api","docs:toc":"doctoc README.md",lint:"eslint src",pretest:"npm run build:test",test:"karma start test/karma.conf.js",debugUnittest:"karma start test/karma.conf.js --browsers Chrome --single-run=false",version:"node scripts/version.js",prepublish:"npm run build"},keywords:["videojs","videojs-plugin"],author:"Nagra",license:"UNLICENSED",vjsstandard:{ignore:["dist","docs","test/dist","test/karma.conf.js"]},peerDependencies:{},dependencies:{ajv:"5.5.2",global:"4.4.0"},devDependencies:{"@nagra/video.js":"7.21.5-nmp-7","@nagra/videojs-shaka":"0.5.0-nmp-32","@procot/webostv":"1.2.3","babel-eslint":"10.0.1","babel-plugin-external-helpers":"6.22.0","babel-plugin-transform-object-assign":"6.22.0","babel-preset-es2015":"6.24.0",bannerize:"1.1.4","conventional-changelog-cli":"1.3.22","conventional-changelog-videojs":"3.0.0","coverage-istanbul-loader":"3.0.5",doctoc:"1.4.0",eslint:"4.19.0","fs-extra":"4.0.3",glob:"7.1.6","google-protobuf":"3.9.1",husky:"0.13.4",jquery:"3.3.1",jsdoc:"3.6.3",jssha:"2.4.2",karma:"3.1.4","karma-chrome-launcher":"2.2.0","karma-coverage":"1.1.2","karma-coverage-istanbul-reporter":"3.0.3","karma-detect-browsers":"2.3.3","karma-edge-launcher":"0.4.2","karma-firefox-launcher":"1.0.1","karma-junit-reporter":"1.2.0","karma-qunit":"2.0.1","karma-safari-launcher":"1.0.0",lodash:"4.17.11",mkdirp:"0.5.1","node-static":"0.7.11","npm-run-all":"4.1.5",qunit:"2.11.0",rimraf:"2.7.1",sass:"1.54.9",semver:"5.7.1",sinon:"2.4.1","uglify-js":"3.6.2",webpack:"3.12.0","xhr-promise":"2.0.0"},repository:{type:"git",url:"https://gitlab.hq.k.grp/rndopy/product/browser/opy-sdk-browser-shaka.git"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAAA+CAYAAADu4GOJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVBNEYxM0I3MDVDRDExRTQ5MkUwOUNGNjM0MkM4QUZEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVBNEYxM0I4MDVDRDExRTQ5MkUwOUNGNjM0MkM4QUZEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUE0RjEzQjUwNUNEMTFFNDkyRTA5Q0Y2MzQyQzhBRkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUE0RjEzQjYwNUNEMTFFNDkyRTA5Q0Y2MzQyQzhBRkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4ISt+NAAAJwUlEQVR42uxdCWwWVRDeUpBTgQJyiwXECxAQvNECgtGInAoaSBCPxqKCR4wheKCiiIGAiajBIBrESkIiEImIgAciQTnkEBURDBFEEFtboVz+fuM/qy/bPebt8ffXvi/5sv2Xt7NvZ2fnzZt3kJNKpSwDAydyjGEYGMMwMIZhYAzDwBiGgTEMA2MYBsYwDIxhGBjDMKgWhmEspZragjEMg1CG0c3oqFpis69h5OTk/O81gGeui0Mf8AqwE5gHngAPgzvBz8FPoIuj1cUqKtmBi8cY43P9N1DWOg/BN7GC/fA1rl/vU7l+OLQVPstyyNqv+fBn4fAoOAo8PaB4KbgAnIb77HGR1RGHqyK+jxJwN7gF90gJn+EaHPKF8ldA7k9hDOPvEw76oQRs4SF4cyoYM30qVp/lSzFTwyBywYng0ZQ+6JqnwJoOmWNS8eFH8G6qZ8Bz1AZ/0ZD7ko7HUKlrGIRFCRnGXZrK/B08Q/DAZ4DLY3h5q8FmCRmGjXe5mfN6llGa8srBxmEMo0YI9zcUFw5NoJkr0ixPTcHYgIeth8MH4IAY6lcAroLMPCs5DAJf9fn3cZry6oN3hqlIjZAPMBsKahRj4HN5yN7QfbjW7xneBC+N8cV1BotxzyQj9NGQ38dFR6Sfy0LIG+dsBpM0jObg9Cr0FjbagwM9jI2C6GEJvLj+Ib5cXTwYg7ew0Q4cnCnDIIzlXkRUb0Ht9i0RREzw6I5OS/DFPQk2SFB+P/UrZ+98W5w6CkLNiA8wB5XujC7RkSgGBp4Wpe1HHbqiDlscMpsJrqWu82vgViud8T2PmzRJU/EnOCtEfanLPCSgDBn2meA+JYVQL4KOroSOekJHX2olNjR7JU5MD9srofgA3B1DND/XIfcLwTUTEo4V/HS+WlC/9lyWck3fxaCj+Ul3V504BfYKaRg3xtTNqwDPtJsmQfnJVZhhbALuEui0PpfvH5OOjoOtpIZRM4ZnpThlbsh45R5BmVOcrq7jU6Y2WAg+DfYIkEfZ0ucUhRSHjPbDoqWg6dwEt/+HRmBOzWAFN0FeqMWyJmUixlC7cbpfDrnK6wVFyQUeERhREWQ+j2OHgHJLoPQK5XcLjtyzCa+zjtp69bocWAj+DI4PKFcImVMkY0A1qvDhCwVBHn0JU8EX2HP4gV7wCEGQ9oOV3fiWA2JbR7kCHT3F6YMTAWWbSns3VWIYsFpqFu6QfAmwbhq4o4GmYkF5+mKCvoYGWWwUh6jHguc9Bh1Rc3OXUEc0OLmXvWssXdewhvF9RAVQ3qKJ8EuwMVUg92Lw/IAyVzt+kwv+0YNx4KSw3A7wKrzgHfx7GHdZdXQ0zQqeaNVZlH8K2Su5J2RkPJPvuU5QttilrksF120XlOkp0Mu1MfUGnhGW2089FuX+aySDbi71XiS4bmlS3dV8cGsYwwC7C8t2d6n85cLucxB2gs19jKItuDdAxp8aulopLLuQ7981go56Ca6jup/jZxhhm5JUhJSzJOe/GC51k/Mkzv09syqG5pEm2VASbIg6B4LS0CAFZ1+AbQJkrNLQ1Z2C2IdwM9+/KIKOqO4rA66loP9+3wIhJwPnc7p2l0CBKt7g+KJuQLmN4F6fl3phzAHfdn7ui8DGwpd9qzAgzqcZYNDzA/h7hqB8Cecc6kfQEaUCugRcT3mS1qhbqe0x4ogxzuZrH9ZsSspS/w/Mp2FwTV3lCmOrTOIhLzsI7TH4KzidrbZhFnb9Sjn3EffEmoOc0KP08iaprlj5dN0GK9qgYZygnlcH1O+U0w4i5TEgsMzyn3FUlSBjnSNI+uiAZI3Ac/8SUl/bcHg2i3REGd9BSSW4ZsWs/DjRjWOaihhkHQeH4+WujiiHDGNbFuloQiKGAUXtE2bcqgLXceKoX8SEFTWXBXjWJTHoiz6i2630fI5sQG80Iz2SSolPt7IX9+JlrMWxK/cKdLxHBT9bZ+4qxwKeMDMjm72GW/BZIBC0zjFCSYEVDV3XyULDOKIucuLE1khOOVMKvZ5LN24N+D64wCuegBwac+kZRld8Pd13QEAqvTxDOqJmcq2vYVSHJYrKy8nlPEwTfhHU4zgIHZy0qhkkSxTNavfqCbMNgkGwYbjN4OpjdGTg5jHsFWblalvLwZZtSGWULfNpr8j6GgbIOSaZYsbZ1VxHHFQSog2lYM8v41geFFtAxj9jGGHq4JBFYz4d2UN/67aiPiA2slfrl6or5Xk9bw1JHXkyUD2uQ2mloMNjrKRAKdOfZxkTlrBAvxs2cpPD//aRzmp1j9nnNMPpM7CvhjLnBYwbFAhkDLYLRzCINlx3J5api6YDZKjjNI2U84XK+akCOWOUXQz0ht15XeliKz3iRxM8KPt3vAq822+cpNrPHoc2PVkRYjXcCf46nMxUT+Qtrjv1gCgxuIjzJTQxel4Eg6PR3tn8cybe0aORuyleHgO8CCyVeoqEPcYE5VxL8Cs+v0HTY0RRfiSPwVsy2OionO+rnM/T9Ri8Psf26C9LF1KF9Rg0w+dDkNqsZVXoKSoHRumddB7jnz14mv1/AeqHdaUySYjGX7ozdbd3os7CQvbor4BF0t15/OBnGLQbC003pyCzMFuMQsFG5e98jeuG44XscXBZhgyaJgXZW1WR5zqMe1OG9RHSM/59c4h9v6hpoolPNGZ1fxxGEWQYtfhIVv1iFn59x5S/czWuo15FOwdbZbDeg61/F1GRN6aBPgoUt8BIFtN2Spry7Nlw9AyPx1VJP8NYr7hrmhtZlGWGoU4pPKBx3dtWevqeyt4ZbAYPgKOV+5KO7VXotMHdaE2RC6x/R7cnum26ErdhUFQ7hSJ//j0DN+0S4mt2fo15LmXCwN4U5VcrvXpLiuPUv3ewLBNGQTOzeaY8raw7gfuuAZ/B35coTUwnTbH3WukJ1rv5fdK0w6ZR6+q3djVF7RVAcwe2soUX8z4LRwO+Ctrpjl7WudTu0bJ/K72HJu0LYa9z3aJZ19a83VAOf2mP8Pk5fsk2F7TwyFns0UwyucnYxnGE3wdjry89QEbCSbULrPS+GQTdJZT0nmijOtqi8lP+EKkHNjBSvCFMcI1Qzr8qlDvSJ5m0g5cphk1w2Vjrt8udZoLrSZ3uqgcGC2S85ti+oVT5vVuyt5lPgmuycn68QI5nd9XNY3zMxxLFA7zDq7d6kRfgXXS2BXgN8i5l3CRdysHsAU6STXKbo+CBL9W6MGhZIa3rmKfRW/pGeTY3SLzFoQAZhwQyCtkDj2FPQQEobdL6HviEMNVertRDTczRNhCUH2kN3gD903ySgz5yfmY5leZ9mP+WwsD9wzaGYWAMw8AYhoExDIME8JcAAwBHloxfTog8lAAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=!1;return e&&(t="html5"===e.toLowerCase()),t}function o(e,t,n,r){var o="none";if(e&&e.system&&(o=e.system),o.includes("nagra-ssp")&&e.config.ssmServer){return new(U[o]||L.DrmDashController)(e,t,n)}if(x.default.isSafari()&&("customer"!==o&&"customer-ssm"!==o&&"nagra-ssp"!==o&&"nagra-conax"!==o&&"nagra-conax-upfront"!==o||(o+="-fps")),x.default.isTVKeyCapable()){!i(r)||"customer"!==o&&"nagra-ssp"!==o||(o+="-tvkey")}return new(N[o]||L.DrmDashController)(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(357),s=r(a),u=n(360),l=r(u),c=n(141),d=r(c),h=n(363),f=r(h),p=n(364),g=r(p),y=n(365),v=r(y),m=n(366),b=r(m),w=n(369),_=r(w),T=n(145),S=r(T),E=n(146),k=r(E),A=n(42),x=r(A),C=n(372),I=r(C),M=n(373),O=r(M),P=n(374),j=r(P),D=n(378),R=r(D),L=n(49),N={};N["nagra-conax"]=f.default,N["nagra-conax-fps"]=s.default,N["nagra-conax-upfront"]=g.default,N["nagra-conax-upfront-fps"]=v.default,N["nagra-ssp"]=l.default,N["nagra-ssp-fps"]=d.default,N["nagra-ssp-tvkey"]=j.default,N["microsoft-azure"]=L.DrmDashController,N.customer=S.default,N["customer-fps"]=k.default,N["customer-tvkey"]=R.default,N["customer-ssm"]=I.default,N["customer-ssm-fps"]=O.default;var U={};U["nagra-ssp"]=b.default,U["nagra-ssp-fps"]=_.default,t.default={createDRMController:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(137),l=r(u),c=n(41),d=r(c),h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.conaxFairPlay=new l.default(e.system,e.config,n),r.conaxFairPlay.initialise(),r}return a(t,e),s(t,[{key:"ready",value:function(e){this.conaxFairPlay.setVideoElement(e)}},{key:"tearDown",value:function(){this.conaxFairPlay.tearDown()}}]),t}(d.default);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){var r=0,i=new ArrayBuffer(e.byteLength+d+t.byteLength+d+n.byteLength),o=new DataView(i);new Uint8Array(i,r,e.byteLength).set(e),r+=e.byteLength,o.setUint32(r,t.byteLength,!0),r+=d;var a=new Uint16Array(i,r,t.length);return a.set(t),r+=a.byteLength,o.setUint32(r,n.byteLength,!0),r+=d,new Uint8Array(i,r,n.byteLength).set(n),new Uint8Array(i,0,i.byteLength)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(30),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(102),d=4,h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.keySystem="com.apple.fps.1_0",n.firstKey=!1,n.sessions=[],n}return o(t,e),s(t,[{key:"tearDown",value:function(){if(this.sessions.length){var e=!0,t=!1,n=void 0;try{for(var r,i=this.sessions[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.close()}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}this.sessions=[],this.videoElement.webkitSetMediaKeys(null)}}},{key:"_setEncryptedListener",value:function(e,t){e.addEventListener("webkitneedkey",t,!1)}},{key:"_removeEncryptedListener",value:function(e,t){e.removeEventListener("webkitneedkey",t,!1)}},{key:"_onVideoEncrypted",value:function(e){var t=this;this.logger.message("Function: onneedkey for ").addType().log();var n=e.initData;this._setWebkitKeys(),this.certificateRequester.getCertificate().then(function(e){var r=t._createFairPlayInitData(n,e),i=t._createKeySession(r);t.sessions.push(i),t._configureSessionListeners(i)})}},{key:"_supportKeySystem",value:function(){var e=window.WebKitMediaKeys&&window.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4");return e||this.logger.addType().message(" FairPlay Key System not supported by browser.").log(),e}},{key:"_setWebkitKeys",value:function(){if(this.videoElement.webkitKeys||this.videoElement.webkitSetMediaKeys(new WebKitMediaKeys(this.keySystem)),this.logger.message("Key system selected").log(),!this.videoElement.webkitKeys)throw new Error("Could not create MediaKeys.");this.logger.message("Media keys created").log()}},{key:"_createFairPlayInitData",value:function(e,t){var n=this._extractAssetId(e);return a(e,l.default.stringToArray(n),t)}},{key:"_createKeySession",value:function(e){var t=this.videoElement.webkitKeys.createSession("video/mp4",e);if(!t)throw new Error("Could not create key session.");return this.logger.message("Key session created").log(),t}},{key:"_extractAssetId",value:function(e){var t=l.default.arrayToString(e);this.logger.message("initData: "+t).debug();var n=window.atob(t.split("skd://")[1].split("?")[0]);return this.logger.message("Base64decoded: "+n),n}},{key:"_configureSessionListeners",value:function(e){var t=this;e.addEventListener("webkitkeymessage",function(e){t.firstKey=!0,t.licenceRequester.request(e.message,"license-request").then(function(t){e.target.update(t)}).catch(function(e){var t="Failed to retrieve licence.  Error: "+e;throw new Error(t)})},!1),e.addEventListener("webkitkeyadded",function(){return t._onKeyAdded()},!1),e.addEventListener("webkitkeyerror",function(e){return t._onKeyError(e)},!1)}},{key:"_onKeyAdded",value:function(){this.logger.message("Decryption key was added to session.").log()}},{key:"_onKeyError",value:function(e){var t="A decryption key error was encountered";if(e.target&&e.target.error&&(t=t+" - Event error code: "+e.target.error.code+" - Event error message: "+e.target.error.message),this.drmOptions.keyErrorHandler&&this.drmOptions.keyErrorHandler[e.target.error.code]&&this.drmOptions.keyErrorHandler[e.target.error.code](),this.firstKey)throw new Error(t);this.firstKey=!0}}]),t}(c.DecryptionInterface);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(102),u=[{initDataTypes:["skd"],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}],l=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}("renew"),c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mediaKeySession=null,n}return o(t,e),a(t,[{key:"renewLicence",value:function(){this.mediaKeySession&&this.mediaKeySession.update(l)}},{key:"tearDown",value:function(){if(this.mediaKeySession){var e=this;this.mediaKeySession.close().finally(function(){e.mediaKeySession=void 0,e.videoElement.setMediaKeys(null),e._setEncryptedListener(e.videoElement,e.onVideoEncryptedHandle)})}}},{key:"_setEncryptedListener",value:function(e,t){e.addEventListener("encrypted",t,{once:!0})}},{key:"_removeEncryptedListener",value:function(e,t){e.removeEventListener("encrypted",t,{once:!0})}},{key:"_supportKeySystem",value:function(){var e=Boolean(navigator.requestMediaKeySystemAccess);return e||this.logger.addType().message(" FairPlay Key System not supported by browser.").log(),e}},{key:"_onVideoEncrypted",value:function(e){this.logger.message("Function: _onVideoEncrypted for ").addType().log();var t=e.initData,n=this;navigator.requestMediaKeySystemAccess("com.apple.fps",u).then(function(e){n.logger.message("Access to mediakeysystem granted").log(),e.createMediaKeys().then(function(e){n.logger.message("Keys created").log(),n.videoElement.setMediaKeys(e),n.certificateRequester.getCertificate().then(function(r){e.setServerCertificate(r).then(function(){n.logger.message("Server Certificate is set").log(),n.mediaKeySession=e.createSession(),n.logger.message("MediaKey session Created.").log(),n._configureSessionListeners(n.mediaKeySession),n.logger.message("Generating MediaKey session request").log(),n.mediaKeySession.generateRequest("skd",t).catch(function(e){var t=e.errorCode,r=e.message,i=t.systemCode;n.logger.message("Error: "+r+", system: "+i+"\n"+JSON.stringify(e))})}).catch(function(e){console.log("Error setting server certificate: "+JSON.stringify(e))})})})})}},{key:"_configureSessionListeners",value:function(e){var t=this;e.addEventListener("message",function(e){t.logger.message("MediaKey message received.  Requesting licence").log(),t.licenceRequester.request(e.message,e.messageType).then(function(n){t.logger.message("Licence Key received").log(),e.target.update(n)}).catch(function(e){var t="Failed to retrieve licence.  Error: "+e;throw new Error(t)})},!1)}}]),t}(s.DecryptionInterface);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(49),c=n(70),d=r(c),h=n(140),f=r(h),p=n(362),g=r(p),y=n(57),v=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return a.vmp=a._makeVmp(e,n),a.requestFilterHandle=a._shakaRequestFilter.bind(a),a.responseFilterHandle=a._shakaResponseFilter.bind(a),a}return a(t,e),s(t,[{key:"ready",value:function(e){this.vjsPlayer.tech_.shaka_&&(this.drmDetails.config.multiSession?this.configureMultiSession_():this._configureSingleSession(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this,e))}},{key:"configureMultiSession_",value:function(){var e=this,t=this.vjsPlayer.tech_.shaka_;this.temporalPredelivery_=this._makeTemporalPreDelivery(t);var n=function(t,n){return e.temporalPredelivery_.licenceRequired(t,n)?[!1,!1]:[!0,!1]};t.setLicenceRequiredCallback(n)}},{key:"_configureDrm",value:function(){var e=void 0,t=this.vjsPlayer.tech_.shaka_,n=t.getNetworkingEngine();if(n.unregisterRequestFilter(this.requestFilterHandle),n.unregisterResponseFilter(this.responseFilterHandle),this.token){var r=this.drmDetails.config.tenantId,i=this.drmDetails.config.licenceServer,o=d.default.buildUrlWith(i,r,"Widevine","License");e={"com.microsoft.playready":d.default.buildUrlWith(i,r,"PlayReady","License"),"com.widevine.alpha":o,"com.tvkey.drm":d.default.buildUrlWith(i,r,"Tvkey","License")},n.registerRequestFilter(this.requestFilterHandle),n.registerResponseFilter(this.responseFilterHandle)}var a={drm:{servers:e}};this.vjsPlayer.otvtoolkit().techConfig.configure(y.CONFIG_TYPE_OTV,a)}},{key:"_makeVmp",value:function(e,t){return new f.default(e,t)}},{key:"_makeTemporalPreDelivery",value:function(e){return new g.default(e,this.log)}},{key:"_shakaRequestFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if(this.log("request url: "+t.uris[0]),t.headers["nv-authorizations"]=this.token,t.uris[0].includes("wvls"))t.headers["Content-Type"]="application/octet-stream";else if(t.uris[0].includes("prls"))t.headers["Content-Type"]="text/xml; charset=utf-8";else if(t.uris[0].includes("tkls")){var n=shaka.util.StringUtils;t.headers["Content-Type"]="application/json";var r=JSON.parse(n.fromUTF8(t.body)),i={OttLicenseRequestMessage:r},o=JSON.stringify(i);this.log("tvkey license request payload: "+o),t.body=n.toUTF8(o)}}},{key:"_shakaResponseFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE&&(this.log("response url: "+t.uri),t.uri.includes("tkls"))){var n=shaka.util.StringUtils.fromUTF8(t.data);this.log("tvkey license reponse payload: "+n);var r=JSON.stringify(n);r&&r.errorCode&&this.log.error("tvkey request license failure, error code :"+r.errorCode)}}}]),t}(l.DrmDashController);t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i;a.warn=i;var s=["49UM7340PVA"],u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;r(this,e),this._isSmartTV=t,this.log=n,this.discover()}return o(e,[{key:"getLGModelAndIdIfPossible",value:function(){var e=this;return new Promise(function(t){e._queryWebOSModelName().then(function(e){t(e)}).catch(function(){t(void 0)})})}},{key:"discover",value:function(){if(this._isSmartTV){var e=this;this.getLGModelAndIdIfPossible().then(function(t){e._modelName=t})}}},{key:"_queryWebOSModelName",value:function(){return new Promise(function(e,t){try{var n=setTimeout(function(){t(new Error("getSystemInfo timeout"))},1e3);webOS.service.request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["modelName","firmwareVersion","UHD","sdkVersion"]},onComplete:function(r){r.returnValue?(clearTimeout(n),e(r.modelName)):(clearTimeout(n),t(new Error("getSystemInfo error - "+r.errorCode+": "+r.errorText)))}})}catch(e){t(e)}})}},{key:"adjustDefault",value:function(e){var t=e;return s.includes(this._modelName)&&(console.warn("WVPersistentState: LG Model "+this._modelName+' setting to "required"'),t="required"),t}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){for(var t=atob(e),n="",r=0;r<t.length;r++){var i=t.charCodeAt(r).toString(16);n+=2===i.length?i:"0"+i}return n}function o(e){for(var t=atob(e),n=t.length,r=new ArrayBuffer(n),i=new Uint8Array(r),o=0;o<n;o++)i[o]=t.charCodeAt(o);var a=new DataView(r),s=a.getUint32(0,!0),u=a.getUint16(4,!0),l=a.getUint16(6,!0);a.setUint32(0,s,!1),a.setUint16(4,u,!1),a.setUint16(6,l,!1);var c="",d=!0,h=!1,f=void 0;try{for(var p,g=i[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){var y=p.value;y=y.toString(16),1===y.length&&(y="0"+y),c+=y}}catch(e){h=!0,f=e}finally{try{!d&&g.return&&g.return()}finally{if(h)throw f}}return c}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){},u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;r(this,e),this.player=t,this.log=n}return a(e,[{key:"licenceRequired",value:function(e,t){var n=this._findKeyId(e),r="com.microsoft.playready"===this.player.keySystem()?o:i;return!n.every(function(e){var n=r(e);return"usable"===t[n]})}},{key:"_findKeyId",value:function(e){var t=this.player.keySystem(),n=void 0;return"com.widevine.alpha"===t?n=this._parseKeyIdFromWidevineInitData(e):"com.microsoft.playready"===t&&(n=this._parseKeyIdFromPlayreadyInitData(e)),n}},{key:"_getPSSHData",value:function(e){var t=e.buffer,n=e.byteOffset,r=n+e.byteLength,i=new DataView(t);n+=8;var o=i.getUint8(n);return n+=20,o>0&&(n+=4+16*i.getUint32(n)),n+=4,t.slice(n,r)}},{key:"_parseKeyIdFromWidevineInitData",value:function(e){var t=this._getPSSHData(e);return proto.WidevinePsshData.deserializeBinary(t).getKeyIdsList_asB64()}},{key:"_parseKeyIdFromPlayreadyInitData",value:function(e){var t=this._getPSSHData(e),n=this._getPlayreadyHeaderData(t);return this._getPlayreadyKidList(n)}},{key:"_getPlayreadyHeaderData",value:function(e){var t=4,n=new DataView(e),r=n.getUint16(t,!0);t+=2;for(var i=[],o=0;o<r;o++){t+=2;var a=n.getUint16(t,!0);t+=2;var s=e.slice(t,t+a),u=new TextDecoder("utf-16le").decode(s);i.push(u),t+=a}return i}},{key:"_getPlayreadyKidList",value:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.push(this._getKidFromRecord(s))}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}},{key:"_getKidFromRecord",value:function(e){return this._fetchFromXML(e,"KID")}},{key:"_fetchFromXML",value:function(e,t){var n=new window.DOMParser,r="";try{r=n.parseFromString(e,"text/xml").getElementsByTagName(t)[0].childNodes[0].nodeValue}catch(e){return!1}return r}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){var r=e.config.licenceServer,i={Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:"Widevine-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}},o={serverURL:r,httpRequestHeaders:{"Conax-Custom-Data":JSON.stringify(i)}};return e.config.widevineServerCertificate&&!c.default.isSmartTV()&&(o.serverCertificate=e.config.widevineServerCertificate),[{name:"com.widevine.alpha",options:o}]}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(42),c=function(e){return e&&e.__esModule?e:{default:e}}(l),d=n(49),h=function(e){function t(e,n,o){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));a.conaxApi=OTV.conax,a.drmDetails.config.system=e.system,a.cxDeviceId=a.conaxApi.getOrCreateCxDeviceId("HTML5.Widevine");var s=a.conaxApi.getOperator(),u=a.conaxApi.getOttAccount();return a.conaxApi.addDevice(e.config.portalURL+"/ottAccount/device/"+s,u,a.cxDeviceId,"HTML5.Widevine","HTML5.Widevine"),a.cxAuthToken=a.conaxApi.getToken(e.config.portalURL+"/authtoken/"+s,u,a.cxDeviceId),a}return o(t,e),s(t,[{key:"updateSourceData",value:function(e){return e.keySystemOptions=a(this.drmDetails,this.cxAuthToken,this.cxDeviceId),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}}]),t}(d.DrmDashController);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=e.config.licenceServer;return[{name:"com.microsoft.playready",options:{serverURL:n,httpRequestHeaders:{PreAuthorization:t,"Content-Type":"text/xml; charset=utf-8"}}},{name:"com.widevine.alpha",options:{serverURL:n,httpRequestHeaders:{Accept:"application/octet-stream","Content-Type":"application/octet-stream",PreAuthorization:t}}}]}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(49),c=function(e){function t(e,n,o){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));return a.drmDetails.config.system=e.system,a}return o(t,e),s(t,[{key:"updateSourceData",value:function(e){return e.keySystemOptions=a(this.drmDetails,e.token),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}}]),t}(l.DrmDashController);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(41),c=r(l),d=n(137),h=r(d),f=n(42),p=r(f),g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.drmDetails=e,r.drmDetails.config.system=e.system,p.default.isSafari()&&(r.conaxFairPlay=new h.default(e.system,e.config,n),r.conaxFairPlay.initialise()),r}return a(t,e),s(t,[{key:"tearDown",value:function(){this.conaxFairPlay.tearDown()}},{key:"ready",value:function(e){this.conaxFairPlay.setVideoElement(e)}},{key:"updateSourceData",value:function(e){return e&&e.token&&this.conaxFairPlay.setSourceToken(e.token),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}}]),t}(c.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return e.split(",")[0]}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=n(143),h=r(d),f=n(140),p=r(f),g=n(367),y=r(g),v=n(144),m=r(v),b=n(30),w=r(b),_=n(57),T=n(70),S=r(T),E={drm:{servers:{"com.microsoft.playready":"http:callback-uri","com.widevine.alpha":"http:callback-uri","com.tvkey.drm":"http:callback-uri"}}},k=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return i.vmp=i._makeVmp(e,n),i.sessionToken=null,i.isRenewal=!1,i.secureSession=i._makeSecureSessionMgr(e,n),i.setupPromise=Promise.resolve(),i}return s(t,e),l(t,[{key:"ready",value:function(e){this.vjsPlayer.tech_.shaka_&&(this.drmDetails.config.multiSession||this._configureSingleSession(),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this,e))}},{key:"updateSourceData",value:function(e){var n=this,r=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e);if(this.secureSession.teardown().catch(function(e){return n._tearDownError(e)}).finally(function(){return n._setSessionToken(null)}),r.token){var i=u(r.token);this.setupPromise=this.secureSession.setup(i),this.setupPromise.then(function(e){return n._setSessionToken(e)}).catch(function(e){n.log("SSM session open failed: "+e),n._error("ssmsetuperror",e)})}return r}},{key:"tearDown",value:function(){var e=this;c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this),this.sessionToken&&(this.secureSession.teardown().catch(function(t){return e._tearDownError(t)}),this._setSessionToken(null)),this.isRenewal=!1}},{key:"_configureDrm",value:function(){this.vjsPlayer.otvtoolkit().techConfig.configure(_.CONFIG_TYPE_OTV,E);var e=this.vjsPlayer.tech_.shaka_,t=this._requestLicence.bind(this),n=this;e.getNetworkingEngine().registerRequestFilter(function(r,i){r===shaka.net.NetworkingEngine.RequestType.LICENSE&&(i.xSourceObject=n.source,i.xKeySystem=e.keySystem(),i.xCallback=t)})}},{key:"_makeSecureSessionMgr",value:function(e,t){return new m.default(e.config.ssmServer,t,this._heartbeatCallback.bind(this))}},{key:"_makeVmp",value:function(e,t){return new p.default(e,t)}},{key:"_setSessionToken",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSessionToken",this).call(this,e),this.sessionToken=e}},{key:"_heartbeatCallback",value:function(){var e=this;(this.isPlayReady||this.isTVKey)&&(this.isRenewal?this.renewLicence():this.secureSession.heartbeat().then(function(t){return e._setSessionToken(t)}).catch(function(t){return e._heartbeatError(t)}))}},{key:"_tearDownError",value:function(e){this._error("ssmteardownerror",e)}},{key:"_heartbeatError",value:function(e){this._error("ssmheartbeaterror",e)}},{key:"_error",value:function(e,t){this.vjsPlayer.trigger({type:e,reason:t})}},{key:"_requestLicence",value:function(e,t,n,r){var i=this;return new Promise(function(o,a){i.log("Need licence");var s={keySystem:e,source:t,requestPayload:n,requestType:r,resolve:o,reject:a};i.setupPromise.then(function(){return i._doRequestNow(s)}).catch(function(){i.log("Failed to setup"),a("Can't get licence as setup failed")})})}},{key:"_doRequestNow",value:function(e){"license-renewal"===e.requestType?(this.log("Renewing licence"),this._doLicenceRenew(e)):(this.log("Requesting licence"),this._doLicenceRequest(e))}},{key:"_isPlayready",value:function(e){return"com.microsoft.playready"===e}},{key:"_isTVKey",value:function(e){return"com.tvkey.drm"===e}},{key:"_makeLicenseServerUrl",value:function(){var e=this.drmDetails.config.licenceServer,t=this.drmDetails.config.tenantId,n="Widevine";this.isPlayReady?n="PlayReady":this.isTVKey&&(n="Tvkey");var r=S.default.buildUrlWith(e,t,n,"License");return this.isRenewal&&(r+="?renew=true"),r}},{key:"_makeHeaders",value:function(e){var t="application/octet-stream";this.isPlayReady?t="text/xml; charset=utf-8":this.isTVKey&&(t="application/json");var n=this.isRenewal?this.sessionToken:e.source.token+","+this.sessionToken;return this.log("nv-authorizations: "+n),{"Content-Type":t,"nv-authorizations":n}}},{key:"_doLicenceRequest",value:function(e){var t=this;this.isPlayReady=this._isPlayready(e.keySystem),this.isTVKey=this._isTVKey(e.keySystem);var n=this._makeLicenseServerUrl(),r=this._makeHeaders(e),i=new XMLHttpRequest;i.open("POST",n,!0),i.responseType="arraybuffer";for(var o in r)r.hasOwnProperty(o)&&i.setRequestHeader(o,r[o]);i.onload=function(){var n=!!t.isPlayReady&&t._getParsedPlayreadyResponse(i.response);if(200===i.status){if(n){var r=Boolean(n.proactive);if(r){var o=n.customData.sessionToken;t._setSessionToken(o),t.secureSession.updateSessionToken(o)}t.isRenewal=r}else if(t.isTVKey){var a=t._parseTVKeyResponse(new Uint8Array(i.response));t.log("Session token is : "+a),a?(t.isRenewal=!0,t._setSessionToken(a),t.secureSession.updateSessionToken(a)):t.log("SSM renewal is not supported.")}e.resolve(new Uint8Array(i.response))}else{if(t.isRenewal){var s=n?JSON.stringify(n.customData):w.default.arrayBufferToString(i.response),u=new Error(s);t._error("ssmrenewalerror",u)}t.isTVKey&&t.log.error("Server return error: "+shaka.util.StringUtils.fromUTF8(i.response)),t.log("HTTP "+i.status+" received"),e.reject("Failed to receive licence, HTTP status:"+i.status)}},i.onerror=function(){t.log("xhr error"),e.reject("Error on licence request")};var a=this.isTVKey?this._updateTVKeyRequestPayload(e.requestPayload):e.requestPayload;i.send(a)}},{key:"_parseTVKeyResponse",value:function(e){var t=shaka.util.StringUtils.fromUTF8(e);this.log("tvkey SSM license reponse payload: "+t);var n=JSON.stringify(t);if(n&&n.errorCode)this.log.error("tvkey ssm request license failure, error code :"+n.errorCode);else{var r=n.OttLicenseResponseMessage;r&&r.Application6}return""}},{key:"_updateTVKeyRequestPayload",value:function(e){var t=shaka.util.StringUtils,n=JSON.parse(t.fromUTF8(new Uint8Array(e)));if(!n.OttLicenseRequestMessage){var r={OttLicenseRequestMessage:n},i=JSON.stringify(r);return this.log("tvkey SSM license request payload: "+i),t.toUTF8(i)}return e}},{key:"_getParsedPlayreadyResponse",value:function(e){return new h.default.PlayReadyServerResponseParser(e)}},{key:"_doLicenceRenew",value:function(e){var t=this,n=this.drmDetails.config.ssmServer+"/renewal-license-wv",r={Accept:"application/json","Content-Type":"application/json","nv-authorizations":this.sessionToken},i=this._makeJsonPayload(e.requestPayload),o=new XMLHttpRequest;o.open("POST",n,!0),o.responseType="text";for(var a in r)r.hasOwnProperty(a)&&o.setRequestHeader(a,r[a]);o.onload=function(){if(200===o.status)try{var n=JSON.parse(o.response),r=n.sessionToken;t._setSessionToken(r),t.secureSession.updateSessionToken(r),t.log("Received new SSM session token from license renewal: "+r);for(var i=atob(n.license),a=new ArrayBuffer(i.length),s=new Uint8Array(a),u=0,l=i.length;u<l;u++)s[u]=i.charCodeAt(u);e.resolve(s)}catch(t){var c="Failed JSON response parse: "+t;e.reject(c)}else{var d=void 0;try{d=JSON.parse(o.response)}catch(e){d={}}d.code=o.status;var h=JSON.stringify(d),f=new Error(h);t._error("ssmrenewalerror",f);var p="Failed to receive licence, HTTP status:"+h;e.reject(p)}},o.onerror=function(){e.reject("Error on licence request")},o.send(i)}},{key:"_makeJsonPayload",value:function(e){return JSON.stringify({challenge:btoa(String.fromCharCode.apply(String,i(new Uint8Array(e))))})}}]),t}(y.default);t.default=k},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(49),c=n(11),d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"_makeTimelineLogger",value:function(){return new h}},{key:"_setSessionToken",value:function(e){this.timeline.setSessionToken(e)}}]),t}(l.DrmDashController);t.default=d;var h=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.token="",e.sessionToken="",e.renewal=!1,e}return a(t,e),u(t,[{key:"tearDown",value:function(){this.renewal=!1,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this)}},{key:"setSource",value:function(e){this.token=e.token||"",s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setSource",this).call(this,e)}},{key:"setSessionToken",value:function(e){this.sessionToken=e}},{key:"_shakaRequestFilter",value:function(e,n){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if("license-renewal"===n.licenseRequestType){var i;this.renewal=!0,this.provision=!1;var o=JSON.stringify((i={},r(i,c.OtvEventExtraKey.contentToken,this.token),r(i,c.OtvEventExtraKey.sessionToken,this.sessionToken),i)),a=c.OtvEventType.sessionManagement,u=c.OtvEventCommandSessionManagement.renewalStart;OTV.eventTimeline.addToTimeline(a,u,o)}else this.renewal=!1,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_shakaRequestFilter",this).call(this,e,n)}},{key:"_shakaResponseFilter",value:function(e,n){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if(this.renewal){var i,o=void 0,a=(i={},r(i,c.OtvEventExtraKey.contentToken,this.token),r(i,c.OtvEventExtraKey.sessionToken,this.sessionToken),i);o=c.OtvEventCommandSessionManagement.renewalSuccessful;var u=c.OtvEventType.sessionManagement,l=JSON.stringify(a);OTV.eventTimeline.addToTimeline(u,o,l)}else s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_shakaResponseFilter",this).call(this,e,n)}},{key:"_onErrorEvent",value:function(e){if(6007===e.detail.code)if(this.renewal){var n,i=void 0,o=(n={},r(n,c.OtvEventExtraKey.contentToken,this.token),r(n,c.OtvEventExtraKey.sessionToken,this.sessionToken),n);o[c.OtvEventExtraKey.error]=e.detail.message,i=c.OtvEventCommandSessionManagement.renewalFailure;var a=c.OtvEventType.sessionManagement,u=JSON.stringify(o);OTV.eventTimeline.addToTimeline(a,i,u)}else s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onErrorEvent",this).call(this,e)}}]),t}(l.DrmDashTimeline)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(42),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=n(11),l=function(){},c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;i(this,e),this.ssmEndpointUrl=t,this.log=n,this.timeline=new d}return o(e,[{key:"doSetup",value:function(e){var t=this;return this.log("doSetup - authToken: "+e),this.timeline.logSetupStart(e),new Promise(function(n,r){t._requestSessionToken(t.ssmEndpointUrl+"/setup",e).then(function(e){var i=e.heartbeat,o=e.sessionToken;t.log("doSetup - received session token from ssm mgr:"),t.log("   heartbeat "+i),t.log("   sessionToken "+o),(!i||i<=0)&&r("doSetup - Invalid heartbeat period"),t.timeline.logSetupSuccessful(o),n({sessionToken:o,heartbeatPeriod:i})}).catch(function(e){t.timeline.logSetupFailure(e),r(e)})})}},{key:"tearDown",value:function(e){var t=this;return new Promise(function(n,r){t.log("tearDown - performing teardown for session token: "+e+" via "+t.ssmEndpointUrl+"/teardown"),t.timeline.logTeardownStart(e),t._ssmApiCall(t.ssmEndpointUrl+"/teardown",e,!0).then(function(){t.log("tearDown - teared down session for sessionToken "+e),t.timeline.logTeardownSuccessful(e),n()}).catch(function(n){t.log("tearDown - tear down has failed session for sessionToken "+e),t.timeline.logTeardownFailure(e,n),r(n)})})}},{key:"heartbeat",value:function(e){var t=this,n=new Date;return this.log("Making heartbeat - "+n.toISOString()+" current session token = "+e),this.timeline.logHeartbeatStart(e),new Promise(function(n,r){t._requestSessionToken(t.ssmEndpointUrl+"/heartbeat",e).then(function(r){var i=r.sessionToken;t.log("Heartbeat - Refreshed sessionToken "+e+", is now "+i),t.timeline.logHeartbeatSuccessful(i),n(i)}).catch(function(n){t.log("Heartbeat - error while making heartbeat call, reason="+n),t.timeline.logHeartbeatFailure(e,n),r(n)})})}},{key:"_ssmApiCall",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={method:"POST",mode:"cors",redirect:"follow",headers:{"nv-authorizations":t,"content-type":"application/json; charset=utf-8"},body:"{}"};return r&&!s.default.isChrome()&&(i.keepalive=!0),new Promise(function(t,r){fetch(e,i).then(function(e){if(e.ok)t(e.json());else{var i=e.status;n.log(JSON.stringify(e)),e.text().then(function(e){var t=void 0;try{t=JSON.parse(e)}catch(e){t={}}t.code=i,r(Error(JSON.stringify(t)))})}}).catch(function(t){n.log("Error making request to "+e),r(t)})})}},{key:"_requestSessionToken",value:function(e,t){var n=this;return this.log("_requestSessionToken - trying to get sessionToken from "+e),new Promise(function(r,i){n._ssmApiCall(e,t).then(function(t){n.log("_requestSessionToken - got response from "+e),r(t)}).catch(function(e){n.log("_requestSessionToken - error API call, reason="+e),i(e)})})}}]),e}(),d=function(){function e(){i(this,e),this.contentToken=""}return o(e,[{key:"logSetupStart",value:function(e){this.contentToken=e;var t=JSON.stringify(r({},u.OtvEventExtraKey.contentToken,e));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.setupStart,t)}},{key:"logSetupSuccessful",value:function(e){var t,n=JSON.stringify((t={},r(t,u.OtvEventExtraKey.sessionToken,e),r(t,u.OtvEventExtraKey.contentToken,this.contentToken),t));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.setupSuccessful,n)}},{key:"logSetupFailure",value:function(e){var t,n=JSON.stringify((t={},r(t,u.OtvEventExtraKey.error,e),r(t,u.OtvEventExtraKey.contentToken,this.contentToken),t));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.setupFailure,n)}},{key:"logTeardownStart",value:function(e){var t,n=JSON.stringify((t={},r(t,u.OtvEventExtraKey.sessionToken,e),r(t,u.OtvEventExtraKey.contentToken,this.contentToken),t));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.teardownStart,n)}},{key:"logTeardownSuccessful",value:function(e){var t,n=JSON.stringify((t={},r(t,u.OtvEventExtraKey.sessionToken,e),r(t,u.OtvEventExtraKey.contentToken,this.contentToken),t));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.teardownSuccessful,n)}},{key:"logTeardownFailure",value:function(e,t){var n,i=JSON.stringify((n={},r(n,u.OtvEventExtraKey.sessionToken,e),r(n,u.OtvEventExtraKey.contentToken,this.contentToken),r(n,u.OtvEventExtraKey.error,t),n));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.teardownFailure,i)}},{key:"logHeartbeatStart",value:function(e){var t,n=JSON.stringify((t={},r(t,u.OtvEventExtraKey.sessionToken,e),r(t,u.OtvEventExtraKey.contentToken,this.contentToken),t));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.heartbeatStart,n)}},{key:"logHeartbeatSuccessful",value:function(e){var t,n=JSON.stringify((t={},r(t,u.OtvEventExtraKey.sessionToken,e),r(t,u.OtvEventExtraKey.contentToken,this.contentToken),t));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.heartbeatSuccessful,n)}},{key:"logHeartbeatFailure",value:function(e,t){var n,i=JSON.stringify((n={},r(n,u.OtvEventExtraKey.sessionToken,e),r(n,u.OtvEventExtraKey.contentToken,this.contentToken),r(n,u.OtvEventExtraKey.error,t),n));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.heartbeatFailure,i)}}]),e}();t.default={SsmInterface:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(370),c=r(l),d=n(144),h=r(d),f=n(141),p=r(f),g=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.log=n,a.vjsPlayer=r,a.drmDetails=e,a.heartbeatMode=!0,a.secureSession=new h.default(e.config.ssmServer,n,a._heartbeatCallback.bind(a)),a}return a(t,e),s(t,[{key:"updateSourceData",value:function(e){var n=this,r=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e);return this.heartbeatMode=!0,this.secureSession.teardown().catch(function(e){return n._tearDownError(e)}).finally(function(){return n._setSessionToken(null)}),r.token&&this.secureSession.setup(r.token).then(function(e){return n._setSessionToken(e)}).catch(function(e){n.log("SSM session open failed: "+e),n._error("ssmsetuperror",e)}),r}},{key:"tearDown",value:function(){var e=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this),this.sessionToken&&(this.secureSession.teardown().catch(function(t){return e._tearDownError(t)}),this._setSessionToken(null))}},{key:"renewLicence",value:function(){this.sspFairPlay.renewLicence()}},{key:"_makeFairPlaySystem",value:function(e,t,n){return new c.default(e,t,this._sessionUpdateCb.bind(this),n,this._error.bind(this))}},{key:"_heartbeatCallback",value:function(){var e=this;this.heartbeatMode?this.secureSession.heartbeat().then(function(t){return e._setSessionToken(t)}).catch(function(t){return e._heartbeatError(t)}):this.renewLicence()}},{key:"_setSessionToken",value:function(e){this.sessionToken=e,this.sspFairPlay.setSessionToken(e)}},{key:"_sessionUpdateCb",value:function(e){this.heartbeatMode=!1,this._setSessionToken(e),this.secureSession.updateSessionToken(e)}},{key:"_tearDownError",value:function(e){this._error("ssmteardownerror",e)}},{key:"_heartbeatError",value:function(e){this._error("ssmheartbeaterror",e)}},{key:"_error",value:function(e,t){this.vjsPlayer.trigger({type:e,reason:t})}}]),t}(p.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(142),d=r(c),h=n(100),f=r(h),p=n(30),g=r(p),y=n(11),v=function(e){function t(e,n,r,i,s){o(this,t);var u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));return u.sessionToken=null,u.sessionCallback=r,u.errorCallback=s,u}return s(t,e),l(t,[{key:"setSessionToken",value:function(e){this.sessionToken=e,this.licenceRequester.setSessionToken(e)}},{key:"renewLicence",value:function(){this.videoDecryption.renewLicence()}},{key:"_makeLicenceRequester",value:function(e){return e.sessionCallback=this.sessionCallback,e.errorCallback=this.errorCallback,new m(e)}}]),t}(d.default.SSPFairPlaySystem);t.default=v;var m=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sessionToken=null,n.sessionCallback=e.sessionCallback,n.errorCallback=e.errorCallback,n._makeSetupPromise(),n}return s(t,e),l(t,[{key:"setSessionToken",value:function(e){this.sessionToken=e,e?this.setupResolve():this._makeSetupPromise()}},{key:"request",value:function(e,n){var r=this;return new Promise(function(i,o){var a=r;r.setupPromise.then(function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"request",r).call(r,e,n).then(function(e){return i(e)}).catch(function(e){"license-renewal"===n&&a.errorCallback&&a.errorCallback("ssmrenewalerror",e),o(e)})})})}},{key:"_makeSetupPromise",value:function(){var e=this;this.setupPromise=new Promise(function(t){e.setupResolve=t})}},{key:"_getTokenString",value:function(e){return this.sessionToken?"license-request"===e?u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTokenString",this).call(this)+","+this.sessionToken:this.sessionToken:u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTokenString",this).call(this)}},{key:"_getLicenceUri",value:function(e){var n=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getLicenceUri",this).call(this);return"license-request"!==e&&(n+="?renew=true"),n}},{key:"_getCkc",value:function(e){var t=JSON.parse(e);return t.sessionToken&&this.sessionCallback(t.sessionToken),this.logger.message("CkcMessage: "+t.CkcMessage).debug(),g.default.base64DecodeUint8Array(t.CkcMessage)}},{key:"_logKeyRequestStatTimelineEvent",value:function(e,n){if("license-request"===e)u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_logKeyRequestStatTimelineEvent",this).call(this,e,n);else{var r,o=JSON.stringify((r={},i(r,y.OtvEventExtraKey.contentToken,this.token),i(r,y.OtvEventExtraKey.sessionToken,this.sessionToken),r)),a=y.OtvEventType.sessionManagement,s=y.OtvEventCommandSessionManagement.renewalStart;OTV.eventTimeline.addToTimeline(a,s,o)}}},{key:"_logKeyStatSuccessTimelineEvent",value:function(e,n){if("license-request"===e)u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_logKeyStatSuccessTimelineEvent",this).call(this,e,n);else{var r,o=(r={},i(r,y.OtvEventExtraKey.contentToken,this.token),i(r,y.OtvEventExtraKey.sessionToken,this.sessionToken),r),a=y.OtvEventCommandSessionManagement.renewalSuccessful,s=y.OtvEventType.sessionManagement,l=JSON.stringify(o);OTV.eventTimeline.addToTimeline(s,a,l)}}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e,n,r){if("license-request"===e)u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_logKeyRequestStatFailureTimelineEvent",this).call(this,e,n,r);else{var o,a=(o={},i(o,y.OtvEventExtraKey.contentToken,this.token),i(o,y.OtvEventExtraKey.sessionToken,this.sessionToken),i(o,y.OtvEventExtraKey.error,r),o),s=y.OtvEventCommandSessionManagement.renewalFailure,l=y.OtvEventType.sessionManagement,c=JSON.stringify(a);OTV.eventTimeline.addToTimeline(l,s,c)}}}]),t}(f.default)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.certificate=t}return i(e,[{key:"getCertificate",value:function(){return"function"==typeof this.certificate?this.certificate():Promise.resolve(this.certificate)}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=n(145),h=r(d),f=n(143),p=r(f),g=(u={},s(u,"com.widevine.alpha","edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"),s(u,"com.microsoft.playready","9a04f079-9840-4286-ab92-e65be0885f95"),s(u,"com.tvkey.drm","adb41c24-2dbf-4a6d-958b-4457c0d27b95"),u),y=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return a.heartbeatTimer=0,a.isRenewal=!1,a}return a(t,e),l(t,[{key:"tearDown",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this),this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=0),this.isRenewal=!1}},{key:"_getHttpCallback",value:function(){return this._onNeedLicence.bind(this)}},{key:"_onNeedLicence",value:function(e,t,n,r){var i=this,o=this,a=this._getRequestType(e,r),s=this._getContentProtectionScheme(e);return new Promise(function(t,r){s?i.drmDetails.config.customerSsmCallback.getLicence(s,n,a).then(function(n){o._gotLicence(e,a,n.licence,n.heartbeat);var r="com.widevine.alpha"===e?n.licence:new Uint8Array(n.licence);t(r)}).catch(function(e){r(e)}):r("Key system "+e+" not supported in this DRM mode")})}},{key:"_getRequestType",value:function(e,t){return"com.microsoft.playready"!==e&&"com.tvkey.drm"!==e||!this.isRenewal?t:"license-renewal"}},{key:"_heartbeat",value:function(){this.drmDetails.config.customerSsmCallback.heartbeat()}},{key:"_renewTimerTask",value:function(){this.isRenewal=!0,this.renewLicence()}},{key:"_gotLicence",value:function(e,t,n,r){var i="com.microsoft.playready"===e,o="com.tvkey.drm"===e;if((i||o)&&"license-request"===t&&!this.heartbeatTimer){var a=!1;if(i){a=this._parseLicence(n).proactive}else{this._parseTVKeyResponse(new Uint8Array(n))&&(a=!0)}var s=a?this._renewTimerTask.bind(this):this._heartbeat.bind(this);this.heartbeatTimer=this._makeTimer(r,s)}}},{key:"_parseTVKeyResponse",value:function(e){var t=shaka.util.StringUtils.fromUTF8(e);this.log("tvkey license response payload: "+t);var n=JSON.stringify(t);if(n&&n.errorCode)this.log.error("tvkey request license failure, error code :"+n.errorCode);else{var r=n.OttLicenseResponseMessage;r&&r.Application6}return""}},{key:"_parseLicence",value:function(e){return new p.default.PlayReadyServerResponseParser(e)}},{key:"_makeTimer",value:function(e,t){return setInterval(t,1e3*e)}},{key:"_getContentProtectionScheme",value:function(e){return g[e]}}]),t}(h.default);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(146),c=r(l),d=n(147),h=r(d),f=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"com.apple.fps.1_0","94CE86FB-07FF-4F43-ADB8-93D2FA968CA2"),p=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ssmHeartbeatInterval=null,r.enforcement=!0,r}return a(t,e),s(t,[{key:"setEnforcement",value:function(e){this.enforcement=Boolean(e)}},{key:"_heartbeat",value:function(){this.enforcement?this.renewLicence():this.config.customerSsmCallback.heartbeat()}},{key:"_licenceRequestWrapper",value:function(e,t,n,r){var i=this,o=this,a=this._getContentProtectionScheme(e);return new Promise(function(t,s){a?i.config.customerSsmCallback.getLicence(a,n,r).then(function(n){o._gotLicence(e,r,n.licence,n.heartbeat),t(n.licence)}).catch(function(e){s(e)}):s("Key system "+e+" not supported in this DRM mode")})}},{key:"_gotLicence",value:function(e,t,n,r){if("com.apple.fps.1_0"===e&&!this.ssmHeartbeatInterval){var i=this._heartbeat.bind(this);this.ssmHeartbeatInterval=setInterval(i,1e3*r)}}},{key:"tearDown",value:function(){this.ssmHeartbeatInterval&&(clearInterval(this.ssmHeartbeatInterval),this.ssmHeartbeatInterval=null),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this)}},{key:"_makeLicenceRequester",value:function(e,t,n){return new h.default(this._licenceRequestWrapper.bind(this),t,n)}},{key:"_getContentProtectionScheme",value:function(e){return f[e]}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(375),c=r(l),d=n(41),h=r(d),f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.logger=n,r.tvkeyNative=r._makeTVKeyNative(e.system,e.config,n),r.readyEventCalled=!1,r}return a(t,e),s(t,[{key:"ready",value:function(e){if(this.logger("SSPTVKeyNativeController.ready() called."),this.readyEventCalled)return void this.logger("SSPTVKeyNativeController.ready() has been called. Skip.");this.tvkeyNative.setVideoElement(e),this.readyEventCalled=!0}},{key:"updateSourceData",value:function(e){return e&&e.token&&this.tvkeyNative.setSourceToken(e.token),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}},{key:"tearDown",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this),this.readyEventCalled=!1}},{key:"_makeTVKeyNative",value:function(e,t,n){return new c.default.SSPTVKeyNative(e,t,n)}}]),t}(h.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(56),s=r(a),u=n(376),l=r(u),c=n(148),d=r(c),h=n(70),f=r(h),p=function(){function e(t,n,r){i(this,e),n.system=t,this.logger=new s.default(r,t),this.token=void 0,this.videoDecryption=null,n.licenceServer=f.default.buildUrlWith(n.licenceServer,n.tenantId,"Tvkey","License"),this.drmOptions=n}return o(e,[{key:"initialise",value:function(){var e={drmOptions:this.drmOptions,logger:this.logger};this.licenceRequester=this._makeLicenceRequester(e);var t={drmOptions:this.drmOptions,logger:this.logger,licenceRequester:this.licenceRequester};this.videoDecryption=this._makeVideoDecryptionHandler(t)}},{key:"setVideoElement",value:function(e){this.videoDecryption.setVideoElement(e)}},{key:"setSourceToken",value:function(e){this.token=e,this.licenceRequester.setToken(e)}},{key:"_makeLicenceRequester",value:function(e){return new l.default(e)}},{key:"_makeVideoDecryptionHandler",value:function(e){return new d.default(e)}}]),e}();t.default={SSPTVKeyNative:p}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),s=n(139),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(){function e(t){i(this,e),this.drmOptions=t.drmOptions,this.logger=t.logger,this.drmOptions.licenceServer||this.logger.addType().message(" TVKey licenceServer not configured!").warn(),this.drmImplementer=u.default.getDrmImplementation(this.drmOptions.system)}return o(e,[{key:"setToken",value:function(e){this.token=e}},{key:"request",value:function(e,t){var n=this;this.logger.message("Function: TVKeyLicenceRequester.request()").log();var r=this._getLicenceUri(t);return this._logKeyRequestStatTimelineEvent(t,r),new Promise(function(i,o){var a=new XMLHttpRequest;a.responseType="text";var s=n;a.addEventListener("load",function(e){s.logger.message("licence request loaded").log();var n=e.target;if(200===n.status){s.logger.message("Response: "+n.responseText).debug();var a=s._getLicence(n.responseText);s.logger.message("licence request loaded - updating key").log(),s._logKeyStatSuccessTimelineEvent(t,r),i(a)}else{var u="licence request failed: "+n.status+": "+n.responseText;s.logger.message(u).warn(),s.logger.message("licence response headers: "+n.getAllResponseHeaders()).log(),s._logKeyRequestStatFailureTimelineEvent(t,r,u),o(u)}},!1),a.addEventListener("error",function(e){var t="The licence request failed";e.target&&e.target.error&&(t=t+" - Event error code: "+e.target.error.code+" - Event error message: "+e.target.error.message),n._logKeyRequestStatFailureTimelineEvent(r,e.target.error.message),o(t)},!1),a.open("POST",r,!0),a.setRequestHeader("Content-type","application/json"),n.drmImplementer.setRequestHeaders(a,n._getTokenString(t),n.drmOptions.mode),n.logger.message("Sending licence request to: "+r).log(),a.send(n._getTVKeyRequestPayload(e))})}},{key:"_getTVKeyRequestPayload",value:function(e){var t=shaka.util.StringUtils,n=t.fromUTF8(e),r=JSON.parse(n);if(!r.OttLicenseRequestMessage){var i={OttLicenseRequestMessage:r},o=JSON.stringify(i);return this.logger.message("tvkey license request payload: "+o).log(),o}return n}},{key:"_getLicence",value:function(e){return this.logger.message("tvkey licence : "+e).log(),shaka.util.StringUtils.toUTF8(e)}},{key:"_getLicenceUri",value:function(){return this.drmOptions.licenceServer}},{key:"_getTokenString",value:function(){return this.token}},{key:"_logKeyRequestStatTimelineEvent",value:function(e,t){this._logTimelineEvent(a.OtvEventCommandLicenseRequest.keyRequestStart,t)}},{key:"_logKeyStatSuccessTimelineEvent",value:function(e,t){this._logTimelineEvent(a.OtvEventCommandLicenseRequest.keyRequestSuccessful,t)}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e,t,n){this._logTimelineEvent(a.OtvEventCommandLicenseRequest.keyRequestFailed,t,n)}},{key:"_logTimelineEvent",value:function(e,t,n){var i="";if(n){var o;i=JSON.stringify((o={},r(o,a.OtvEventExtraKey.url,t),r(o,a.OtvEventExtraKey.error,n),o))}else i=JSON.stringify(r({},a.OtvEventExtraKey.url,t));OTV.eventTimeline.addToTimeline(a.OtvEventType.licenseRequest,e,i)}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.psshBox=t,this.version=null,this.systemId=null,this.data=null,this._parse()}return i(e,[{key:"_parse",value:function(){if(this.psshBox&&!(this.psshBox.length<32)){var e=new DataView(this.psshBox.buffer),t=0;if(t+=4,1886614376===e.getUint32(t)&&(t+=4,this.version=e.getUint8(t),0===this.version||1===this.version)){t+=4,this.systemId="";for(var n=0;n<16;n++){var r=e.getUint8(t+n).toString(16);this.systemId+=1===r.length?"0"+r:r}this.systemId=this.systemId.toLowerCase(),t+=16,e.getUint32(t)>0&&(t+=4,this.data=e.buffer.slice(t))}}}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(41),c=r(l),d=n(56),h=r(d),f=n(148),p=r(f),g=n(379),y=r(g),v="com.tvkey.drm",m=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.config=e.config,r.logger=new h.default(n,e.system),r.videoDecryption=null,r.readyEventCalled=!1,r.licenceRequester=r._makeLicenceRequester(r.config.requestLicenceCallback,v,r.logger);var a={drmOptions:r.config,logger:r.logger,licenceRequester:r.licenceRequester};return r.videoDecryption=r._makeVideoDecryptionHandler(a),r}return a(t,e),s(t,[{key:"ready",value:function(e){if(this.logger.message("DrmCustomerTVKeyNativeController.ready()").log(),this.readyEventCalled)return void this.logger.message("DrmCustomerTVKeyNativeController.ready() has been called. Skip.").log();this.videoDecryption.setVideoElement(e),this.readyEventCalled=!0}},{key:"updateSourceData",value:function(e){return this.src=e,this.licenceRequester.setSource(e),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}},{key:"tearDown",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this),this.videoDecryption.tearDown(),this.readyEventCalled=!1}},{key:"_makeLicenceRequester",value:function(e,t,n){return new y.default(e,t,n)}},{key:"_makeVideoDecryptionHandler",value:function(e){return new p.default(e)}}]),t}(c.default);t.default=m},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),s=function(){function e(t,n,r){i(this,e),this.callback=t,this.keysystem=n,this.logger=r}return o(e,[{key:"setSource",value:function(e){this.source=e}},{key:"request",value:function(e,t){var n=this;return new Promise(function(r,i){n._logKeyRequestStatTimelineEvent(),n.callback(n.keysystem,n.source,n._getTVKeyRequestPayload(e),t).then(function(e){n._logKeyStatSuccessTimelineEvent(),r(n._getLicence(e))}).catch(function(e){n._logKeyRequestStatFailureTimelineEvent(e),i(e)})})}},{key:"_getTVKeyRequestPayload",value:function(e){var t=shaka.util.StringUtils,n=t.fromUTF8(e),r=JSON.parse(n);if(!r.OttLicenseRequestMessage){var i={OttLicenseRequestMessage:r},o=JSON.stringify(i);return this.logger.message("tvkey license request payload: "+o).log(),o}return n}},{key:"_getLicence",value:function(e){return this.logger.message("tvkey licence : "+e).log(),shaka.util.StringUtils.toUTF8(e)}},{key:"_logKeyRequestStatTimelineEvent",value:function(){var e=a.OtvEventType.licenseRequest,t=a.OtvEventCommandLicenseRequest.keyRequestStart;OTV.eventTimeline.addToTimeline(e,t)}},{key:"_logKeyStatSuccessTimelineEvent",value:function(){var e=a.OtvEventType.licenseRequest,t=a.OtvEventCommandLicenseRequest.keyRequestSuccessful;OTV.eventTimeline.addToTimeline(e,t)}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e){var t=a.OtvEventType.licenseRequest,n=a.OtvEventCommandLicenseRequest.keyRequestFailed,i=JSON.stringify(r({},a.OtvEventExtraKey.error,e));OTV.eventTimeline.addToTimeline(t,n,i)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){var n=e<0?0:e,r=Math.floor(n%a),i=Math.floor(n/a%a),o=Math.floor(n/(a*s)),l=Math.floor(t/a%a),c=Math.floor(t/(a*s));return(isNaN(n)||n===1/0)&&(o=i=r="0"),o=o>0||c>0?o+":":"",i=((o||l>=u)&&i<u?"0"+i:i)+":",r=r<u?"0"+r:r,o+i+r}function i(e){var t="-";return(e===1/0||e<1)&&(t=""),t}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=void 0;if(t===1/0&&this.liveTracker&&this.liveTracker.isLive()){var o=this.liveTracker.liveWindow(),a=0;this.liveTracker.behindLiveEdge()&&(a=this.liveTracker.seekableEnd()-e+this.liveTracker.pastSeekEnd()),n=i(a)+r(a,o)}else n=r(e,t);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=60,s=60,u=10;t.default={liveFormatTime:o}},function(e,t,n){e.exports=n(382)},function(e,t,n){(function(t){null==t.Promise&&(t.Promise=n(383)),null==Object.assign&&Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n(386)}),e.exports=n(387)}).call(t,n(18))},function(e,t,n){(function(t,n,r){!function(t){"use strict";function i(e){if(!(this instanceof i))throw new TypeError("Zousan must be created with the new keyword");if("function"==typeof e){var t=this;try{e(function(e){t.resolve(e)},function(e){t.reject(e)})}catch(e){t.reject(e)}}else if(0<arguments.length)throw new TypeError("Zousan resolver "+e+" is not a function")}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(u,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function a(e,t){if("function"==typeof e.n)try{var n=e.n.call(u,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}var s,u,l="fulfilled",c="undefined",d=function(){function e(){for(;i.length-o;){try{i[o]()}catch(e){t.console&&t.console.error(e)}i[o++]=u,1024==o&&(i.splice(0,1024),o=0)}}var i=[],o=0,a=function(){if(typeof MutationObserver===c)return typeof n!==c&&"function"==typeof n.nextTick?function(){n.nextTick(e)}:typeof r!==c?function(){r(e)}:function(){setTimeout(e,0)};var t=document.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.setAttribute("a",0)}}();return function(e){i.push(e),i.length-o==1&&a()}}();i.prototype={resolve:function(e){if(this.state===s){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"==typeof e))try{var n=!0,r=e.then;if("function"==typeof r)return void r.call(e,function(e){n&&(n=!1,t.resolve(e))},function(e){n&&(n=!1,t.reject(e))})}catch(r){return void(n&&this.reject(r))}this.state=l,this.v=e,t.c&&d(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(this.state===s){var n=this;this.state="rejected",this.v=e;var r=this.c;d(r?function(){for(var t=0,n=r.length;t<n;t++)a(r[t],e)}:function(){n.handled||!i.suppressUncaughtRejectionError&&t.console&&i.warn("You upset Zousan. Please catch rejections: ",e,e?e.stack:null)})}},then:function(e,t){var n=new i,r={y:e,n:t,p:n};if(this.state===s)this.c?this.c.push(r):this.c=[r];else{var u=this.state,c=this.v;this.handled=!0,d(function(){u===l?o(r,c):a(r,c)})}return n},catch:function(e){return this.then(null,e)},finally:function(e){return this.then(e,e)},timeout:function(e,t){t=t||"Timeout";var n=this;return new i(function(r,i){setTimeout(function(){i(Error(t))},e),n.then(function(e){r(e)},function(e){i(e)})})}},i.resolve=function(e){var t=new i;return t.resolve(e),t},i.reject=function(e){var t=new i;return t.c=[],t.reject(e),t},i.all=function(e){for(var t=[],n=0,r=new i,o=0;o<e.length;o++)!function(o,a){o&&"function"==typeof o.then||(o=i.resolve(o)),o.then(function(i){t[a]=i,++n==e.length&&r.resolve(t)},function(e){r.reject(e)})}(e[o],o);return e.length||r.resolve(t),r},i.warn=console.warn,typeof e!=c&&e.exports&&(e.exports=i),t.define&&t.define.amd&&t.define([],function(){return i}),(t.Zousan=i).soon=d}(void 0!==t?t:this)}).call(t,n(18),n(149),n(384).setImmediate)},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(385),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(18))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[u]=r,s(u),u++}function i(e){delete l[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(c)setTimeout(a,0,e);else{var t=l[e];if(t){c=!0;try{o(t)}finally{i(e),c=!1}}}}if(!e.setImmediate){var s,u=1,l={},c=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;s=function(t){var n=d.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(a,0,e)}}(),h.setImmediate=r,h.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(18),n(149))},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)o.call(n,c)&&(u[c]=n[c]);if(i){s=i(n);for(var d=0;d<s.length;d++)a.call(n,s[d])&&(u[s[d]]=n[s[d]])}}return u}},function(e,t,n){var r;r=n(388),e.exports=function(){function e(){}return e.DEFAULT_CONTENT_TYPE="application/x-www-form-urlencoded; charset=UTF-8",e.prototype.send=function(e){var t;return null==e&&(e={}),t={method:"GET",data:null,headers:{},async:!0,username:null,password:null,withCredentials:!1},e=Object.assign({},t,e),new Promise(function(t){return function(n,r){var i,o,a,s,u;if(!XMLHttpRequest)return void t._handleError("browser",r,null,"browser doesn't support XMLHttpRequest");if("string"!=typeof e.url||0===e.url.length)return void t._handleError("url",r,null,"URL is a required parameter");t._xhr=u=new XMLHttpRequest,u.onload=function(){var e;t._detachWindowUnload();try{e=t._getResponseText()}catch(e){return void t._handleError("parse",r,null,"invalid JSON response")}return n({url:t._getResponseUrl(),status:u.status,statusText:u.statusText,responseText:e,headers:t._getHeaders(),xhr:u})},u.onerror=function(){return t._handleError("error",r)},u.ontimeout=function(){return t._handleError("timeout",r)},u.onabort=function(){return t._handleError("abort",r)},t._attachWindowUnload(),u.open(e.method,e.url,e.async,e.username,e.password),e.withCredentials&&(u.withCredentials=!0),null==e.data||e.headers["Content-Type"]||(e.headers["Content-Type"]=t.constructor.DEFAULT_CONTENT_TYPE),a=e.headers;for(o in a)s=a[o],u.setRequestHeader(o,s);try{return u.send(e.data)}catch(e){return i=e,t._handleError("send",r,null,i.toString())}}}(this))},e.prototype.getXHR=function(){return this._xhr},e.prototype._attachWindowUnload=function(){if(this._unloadHandler=this._handleWindowUnload.bind(this),window.attachEvent)return window.attachEvent("onunload",this._unloadHandler)},e.prototype._detachWindowUnload=function(){if(window.detachEvent)return window.detachEvent("onunload",this._unloadHandler)},e.prototype._getHeaders=function(){return r(this._xhr.getAllResponseHeaders())},e.prototype._getResponseText=function(){var e;switch(e="string"==typeof this._xhr.responseText?this._xhr.responseText:"",(this._xhr.getResponseHeader("Content-Type")||"").split(";")[0]){case"application/json":case"text/javascript":e=JSON.parse(e+"")}return e},e.prototype._getResponseUrl=function(){return null!=this._xhr.responseURL?this._xhr.responseURL:/^X-Request-URL:/m.test(this._xhr.getAllResponseHeaders())?this._xhr.getResponseHeader("X-Request-URL"):""},e.prototype._handleError=function(e,t,n,r){return this._detachWindowUnload(),t({reason:e,status:n||this._xhr.status,statusText:r||this._xhr.statusText,xhr:this._xhr})},e.prototype._handleWindowUnload=function(){return this._xhr.abort()},e}()},function(e,t){var n=function(e){return e.replace(/^\s+|\s+$/g,"")},r=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};for(var t={},i=n(e).split("\n"),o=0;o<i.length;o++){var a=i[o],s=a.indexOf(":"),u=n(a.slice(0,s)).toLowerCase(),l=n(a.slice(s+1));void 0===t[u]?t[u]=l:r(t[u])?t[u].push(l):t[u]=[t[u],l]}return t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return"application/dash+xml"===t?new u.default.DashNetworkStatistics(e):new c.default.HlsNetworkStatistics(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(390),u=r(s),l=n(391),c=r(l),d=n(71),h=r(d),f=n(103),p=r(f),g=function(){function e(t){i(this,e),this.player=t,this.networkListenerList=new p.default.ListenerList}return a(e,[{key:"setSource",value:function(e){var t=this;if(this._resetImp(),e.type)this.impl=o(this.player,e.type),this._setupImpListeners();else{var n=new h.default.SourceBuilder,r=e.src?e.src:e,i=this;n.build(r).then(function(e){i.player&&(t.impl=o(t.player,e.type),t._setupImpListeners())})}}},{key:"getAdaptiveStreaming",value:function(){return this.impl?this.impl.getAdaptiveStreaming():null}},{key:"getContentServer",value:function(){return this.impl?this.impl.getContentServer():null}},{key:"getNetworkUsage",value:function(){return this.impl?this.impl.getNetworkUsage():null}},{key:"setNetworkListener",value:function(e){this.listener=e,this.impl&&this.impl.setListener(e)}},{key:"addNetworkListener",value:function(e){this.impl&&this.impl.addListener(e),this.networkListenerList.add(e)}},{key:"removeNetworkListener",value:function(e){this.impl&&this.impl.removeListener(e),this.networkListenerList.remove(e)}},{key:"dispose",value:function(){this._resetImp(),this.networkListenerList.clear(),this.networkListenerList=void 0,this.player=void 0}},{key:"_resetImp",value:function(){this.impl&&(this.impl.dispose(),this.impl=null)}},{key:"_setupImpListeners",value:function(){this.impl.setListener(this.listener);for(var e=0;e<this.networkListenerList.length();e++)this.impl.addListener(this.networkListenerList.get(e))}}]),e}();t.default={NetworkStatistics:g}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(50),c=function(e){return e&&e.__esModule?e:{default:e}}(l),d=n(11),h=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setupShakaPlayerListenersHandle=n._setupShakaPlayerListeners.bind(n),n.videojs.on("loadstart",n.setupShakaPlayerListenersHandle),n.requestFilterHandle=n._shakaRequestFilter.bind(n),n.responseFilterHandle=n._shakaResponseFilter.bind(n),n.tracksChangedHandle=n._onTracksChangedEvent.bind(n),n.adaptationHandle=n._onAdaptationEvent.bind(n),n.variantHandle=n._onVariantChangedEvent.bind(n),n.errorHandle=n._onErrorEvent.bind(n),n}return a(t,e),s(t,[{key:"dispose",value:function(){this._clearShakaPlayerListeners(),this.videojs.off("loadstart",this.setupShakaPlayerListenersHandle),this.listener=void 0,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"getAdaptiveStreaming",value:function(){var e=this._getShakaPlayerInstance();if(!e||0===e.getVariantTracks().length)return{selectedBitrate:NaN,availableBitrates:[]};for(var t=[],n=NaN,r=e.getVariantTracks(),i=0;i<r.length;i++){var o=r[i].videoBandwidth+r[i].audioBandwidth;-1===t.indexOf(o)&&t.push(o),r[i].active&&(n=o)}return t.sort(function(e,t){return e-t}),{selectedBitrate:n,availableBitrates:t}}},{key:"getContentServer",value:function(){return{url:this.videojs.currentSrc(),finalUrl:"",finalIpAddress:""}}},{key:"getNetworkUsage",value:function(){var e=this._getShakaPlayerInstance();if(!e)return{bytesDownloaded:NaN,downloadBitrate:NaN,downloadBitrateAverage:NaN};for(var t=NaN,n=e.getStats(),r=n.estimatedBandwidth,i=n.switchHistory,o=i.length-1;o>=0;o--)if("variant"===i[o].type){t=this._getBandWidthById(e,i[o].id);break}return{bytesDownloaded:NaN,downloadBitrate:t,downloadBitrateAverage:r}}},{key:"_getBandWidthById",value:function(e,t){for(var n=NaN,r=e.getVariantTracks(),i=0;i<r.length;i++)if(r[i].id===t){n=r[i].videoBandwidth+r[i].audioBandwidth;break}return n}},{key:"_setupShakaPlayerListeners",value:function(){this._clearShakaPlayerListeners();var e=this._getShakaPlayerInstance();e&&(e.addEventListener("trackschanged",this.tracksChangedHandle),e.addEventListener("adaptation",this.adaptationHandle),e.addEventListener("variantchanged",this.variantHandle),e.addEventListener("error",this.errorHandle),e.getNetworkingEngine().registerRequestFilter(this.requestFilterHandle),e.getNetworkingEngine().registerResponseFilter(this.responseFilterHandle))}},{key:"_clearShakaPlayerListeners",value:function(){var e=this._getShakaPlayerInstance();e&&(e.removeEventListener("trackschanged",this.tracksChangedHandle),e.removeEventListener("adaptation",this.adaptationHandle),e.removeEventListener("variantchanged",this.variantHandle),e.removeEventListener("error",this.errorHandle),e.getNetworkingEngine().unregisterRequestFilter(this.requestFilterHandle),e.getNetworkingEngine().unregisterResponseFilter(this.responseFilterHandle))}},{key:"_shakaRequestFilter",value:function(e,t){var n=t.uris;if(Array.isArray(n)&&1===n.length&&(n=n[0]),e===shaka.net.NetworkingEngine.RequestType.MANIFEST){var i=JSON.stringify(r({},d.OtvEventExtraKey.url,n));this._sendtoEventTimeline(d.OtvEventType.manifestDl,d.OtvEventCommandNetwork.networkStart,i)}else if(e===shaka.net.NetworkingEngine.RequestType.SEGMENT){var o=JSON.stringify(r({},d.OtvEventExtraKey.url,n));this._sendtoEventTimeline(d.OtvEventType.segmentDl,d.OtvEventCommandNetwork.networkStart,o)}}},{key:"_shakaResponseFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.MANIFEST){var n=t.uri,i=JSON.stringify(r({},d.OtvEventExtraKey.url,n));this._sendtoEventTimeline(d.OtvEventType.manifestDl,d.OtvEventCommandNetwork.networkComplete,i)}else if(e===shaka.net.NetworkingEngine.RequestType.SEGMENT){var o=JSON.stringify(r({},d.OtvEventExtraKey.url,t.uri));this._sendtoEventTimeline(d.OtvEventType.segmentDl,d.OtvEventCommandNetwork.networkComplete,o)}}},{key:"_onTracksChangedEvent",value:function(){var e=this.getAdaptiveStreaming();this.listener&&this.listener.availableBitratesChanged&&this.listener.availableBitratesChanged(e.availableBitrates);for(var t=0;t<this.eventListeners.length();t++){var n=this.eventListeners.get(t);n&&n.availableBitratesChanged&&n.availableBitratesChanged(e.availableBitrates)}}},{key:"_onAdaptationEvent",value:function(){this._fireSelectedBitrateChangedEvent()}},{key:"_onVariantChangedEvent",value:function(){this._fireSelectedBitrateChangedEvent()}},{key:"_fireSelectedBitrateChangedEvent",value:function(){var e=this.getAdaptiveStreaming();this.listener&&this.listener.selectedBitrateChanged&&this.listener.selectedBitrateChanged(e.selectedBitrate);for(var t=0;t<this.eventListeners.length();t++){var n=this.eventListeners.get(t);n&&n.selectedBitrateChanged&&n.selectedBitrateChanged(e.selectedBitrate)}}},{key:"_onErrorEvent",value:function(e){var t=NaN,n="";if(1001===e.detail.code){t=e.detail.data[1],n=e.detail.data[2]}else if(1002===e.detail.code){if(n=e.detail.data[1],e.detail.data[2]===shaka.net.NetworkingEngine.RequestType.MANIFEST){var i=JSON.stringify(r({},d.OtvEventExtraKey.url,e.detail.data[0]));this._sendtoEventTimeline(d.OtvEventType.manifestDl,d.OtvEventCommandNetwork.networkError,i)}else if(e.detail.data[2]===shaka.net.NetworkingEngine.RequestType.SEGMENT){var o=JSON.stringify(r({},d.OtvEventExtraKey.url,e.detail.data[0]));this._sendtoEventTimeline(d.OtvEventType.segmentDl,d.OtvEventCommandNetwork.networkError,o)}}this.listener&&this.listener.errorChanged&&this.listener.errorChanged(t,n);for(var a=0;a<this.eventListeners.length();a++){var s=this.eventListeners.get(a);s&&s.errorChanged&&s.errorChanged(t,n)}}},{key:"_sendtoEventTimeline",value:function(e,t,n){OTV.eventTimeline.addToTimeline(e,t,n)}}]),t}(c.default.Statistics);t.default={DashNetworkStatistics:h}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(50),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"dispose",value:function(){this.listener=void 0,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"getAdaptiveStreaming",value:function(){return{selectedBitrate:0,availableBitrates:[]}}},{key:"getContentServer",value:function(){return{url:this.videojs.currentSrc()}}},{key:"getNetworkUsage",value:function(){return{bytesDownloaded:0,downloadBitrate:0,downloadBitrateAverage:0}}}]),t}(l.default.Statistics);t.default={HlsNetworkStatistics:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return"application/dash+xml"===t?new u.default.DashPlaybackStatistics(e):new c.default.HlsPlaybackStatistics(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(393),u=r(s),l=n(394),c=r(l),d=n(71),h=r(d),f=n(103),p=r(f),g=function(){function e(t){i(this,e),this.player=t,this.playbackListenerList=new p.default.ListenerList}return a(e,[{key:"setSource",value:function(e){var t=this;if(this._resetImp(),e.type)this.impl=o(this.player,e.type),this._setupImpListeners(this.listener);else{var n=new h.default.SourceBuilder,r=e.src?e.src:e,i=this;n.build(r).then(function(e){i.player&&(t.impl=o(t.player,e.type),t._setupImpListeners(t.listener))})}}},{key:"getBufferedDuration",value:function(){return this.impl?this.impl.getBufferedDuration():null}},{key:"getStreamBitrate",value:function(){return this.impl?this.impl.getStreamBitrate():null}},{key:"getCodecs",value:function(){return this.impl?this.impl.getCodecs():""}},{key:"getAudioChannelConfig",value:function(){return this.impl?this.impl.getAudioChannelConfig():""}},{key:"getResolution",value:function(){return this.impl?this.impl.getResolution():{width:0,height:0}}},{key:"setPlaybackListener",value:function(e){this.listener=e,this.impl&&this.impl.setListener(e)}},{key:"addPlaybackListener",value:function(e){this.impl&&this.impl.addListener(e),this.playbackListenerList.add(e)}},{key:"removePlaybackListener",value:function(e){this.impl&&this.impl.removeListener(e),this.playbackListenerList.remove(e)}},{key:"dispose",value:function(){this._resetImp(),this.playbackListenerList.clear(),this.playbackListenerList=void 0,this.listener=void 0}},{key:"_resetImp",value:function(){this.impl&&(this.impl.dispose(),this.impl=null)}},{key:"_setupImpListeners",value:function(){this.impl.setListener(this.listener);for(var e=0;e<this.playbackListenerList.length();e++)this.impl.addListener(this.playbackListenerList.get(e))}}]),e}();t.default={PlaybackStatistics:g}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(50),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.previousBitrate=0,n.videoWidth=0,n.videoHeight=0,n.addShakaPlayerListenerHandle=n._addShakaPlayerListener.bind(n),n.onStreamBitrateChangedHandle=n._onStreamBitrateChanged.bind(n),n.videojs.on("loadstart",n.addShakaPlayerListenerHandle),n}return o(t,e),a(t,[{key:"dispose",value:function(){this._removeShakaPlayerListener(),this.videojs.off("loadstart",this.addShakaPlayerListenerHandle),this.listener=void 0,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_removeShakaPlayerListener",value:function(){var e=this._getShakaPlayerInstance();e&&(e.removeEventListener("adaptation",this.onStreamBitrateChangedHandle),e.removeEventListener("variantchanged",this.onStreamBitrateChangedHandle))}},{key:"getResolution",value:function(){var e=this._getShakaPlayerInstance();if(!e)return{width:0,height:0};var t=e.getStats();return{width:t.width,height:t.height}}},{key:"getBufferedDuration",value:function(){var e=this._getShakaPlayerInstance();if(!e)return 0;var t=e.getBufferedInfo();if(!t.total||!t.total.length)return 0;var n=this.videojs.currentTime();return t.total[0].end-n}},{key:"getCodecs",value:function(){var e="",t=this._getShakaPlayerInstance();if(t){var n=t.getVariantTracks(),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u.active){e=u.codecs;break}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}return e}},{key:"getAudioChannelConfig",value:function(){var e="",t=this._getShakaPlayerInstance();if(t){var n=t.getVariantTracks(),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u.active){e=u.audioChannelConfig;break}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}return e}},{key:"getStreamBitrate",value:function(){var e=0,t=this._getShakaPlayerInstance();if(t){var n=t.getVariantTracks(),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u.active){isNaN(u.videoBandwidth)||isNaN(u.audioBandwidth)||(e=u.videoBandwidth+u.audioBandwidth);break}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}return e}},{key:"_addShakaPlayerListener",value:function(){this._removeShakaPlayerListener();var e=this._getShakaPlayerInstance();e&&(e.addEventListener("adaptation",this.onStreamBitrateChangedHandle),e.addEventListener("variantchanged",this.onStreamBitrateChangedHandle))}},{key:"_onStreamBitrateChanged",value:function(){this._checkResolutionChanged();var e=this.getStreamBitrate();this.previousBitrate!==e&&(this.previousBitrate=e,this._fireStreamBitrateChanged(e))}},{key:"_checkResolutionChanged",value:function(){var e=this.getResolution();e.width===this.videoWidth&&e.height===this.videoHeight||(this._fireResolutionChanged(e.width,e.height),this.videoWidth=e.width,this.videoHeight=e.height)}},{key:"_fireResolutionChanged",value:function(e,t){this.listener&&this.listener.resolutionChanged&&this.listener.resolutionChanged(e,t);for(var n=0;n<this.eventListeners.length();n++){var r=this.eventListeners.get(n);r&&r.resolutionChanged&&r.resolutionChanged(e,t)}}},{key:"_fireStreamBitrateChanged",value:function(e){this.listener&&this.listener.streamBitrateChanged&&this.listener.streamBitrateChanged(e);for(var t=0;t<this.eventListeners.length();t++){var n=this.eventListeners.get(t);n&&n.streamBitrateChanged&&n.streamBitrateChanged(e)}}}]),t}(l.default.Statistics);t.default={DashPlaybackStatistics:c}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(50),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"dispose",value:function(){this.listener=void 0,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"getResolution",value:function(){return{width:this.videojs.videoWidth(),height:this.videojs.videoHeight()}}},{key:"getBufferedDuration",value:function(){return 0}},{key:"getStreamBitrate",value:function(){return NaN}},{key:"getCodecs",value:function(){return""}},{key:"getAudioChannelConfig",value:function(){return""}}]),t}(l.default.Statistics);t.default={HlsPlaybackStatistics:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return"application/dash+xml"===t?new u.default.DashRenderingStatistics(e):new c.default.HlsRenderingStatistics(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(396),u=r(s),l=n(397),c=r(l),d=n(71),h=r(d),f=function(){function e(t){i(this,e),this.player=t}return a(e,[{key:"setSource",value:function(e){var t=this;if(this._resetImp(),e.type)this.impl=o(this.player,e.type);else{var n=new h.default.SourceBuilder,r=e.src?e.src:e,i=this;n.build(r).then(function(e){i.player&&(t.impl=o(t.player,e.type))})}}},{key:"getFramesPerSecondNominal",value:function(){return this.impl?this.impl.getFramesPerSecondNominal():null}},{key:"getFramesPerSecond",value:function(){return this.impl?this.impl.getFramesPerSecond():null}},{key:"getFrameDrops",value:function(){return this.impl?this.impl.getFrameDrops():null}},{key:"getFrameDropsPerSecond",value:function(){return this.impl?this.impl.getFrameDropsPerSecond():null}},{key:"dispose",value:function(){this._resetImp(),this.player=void 0}},{key:"_resetImp",value:function(){this.impl&&(this.impl.dispose(),this.impl=null)}}]),e}();t.default={RenderingStatistics:f}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(50),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=1e3,d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.intervalID=setInterval(n._intervalTask.bind(n),c),n.lastFrameDropCount=0,n.lastDecodedFramesCount=0,n.frameDropsPerSecond=0,n.framesPerSecond=0,n}return o(t,e),a(t,[{key:"dispose",value:function(){clearInterval(this.intervalID),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"getFramesPerSecondNominal",value:function(){var e=this._getShakaPlayerInstance(),t=0;if(e)for(var n=e.getVariantTracks(),r=0;r<n.length;r++)if(n[r].active){isNaN(n[r].frameRate)||(t=n[r].frameRate);break}return t}},{key:"getFramesPerSecond",value:function(){return this.framesPerSecond}},{key:"getFrameDrops",value:function(){var e=this._getShakaPlayerInstance(),t=0;if(e){t=e.getStats().droppedFrames}return t}},{key:"getFrameDropsPerSecond",value:function(){return this.frameDropsPerSecond}},{key:"_intervalTask",value:function(){var e=this._getShakaPlayerInstance();if(e){var t=e.getStats(),n=t.droppedFrames;this.frameDropsPerSecond=n-this.lastFrameDropCount,this.lastFrameDropCount=n;var r=t.decodedFrames;this.framesPerSecond=r-this.lastDecodedFramesCount-this.frameDropsPerSecond,this.lastDecodedFramesCount=r}}}]),t}(l.default.Statistics);t.default={DashRenderingStatistics:d}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(50),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"dispose",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"getFramesPerSecondNominal",value:function(){return 0}},{key:"getFramesPerSecond",value:function(){return 0}},{key:"getFrameDrops",value:function(){return 0}},{key:"getFrameDropsPerSecond",value:function(){return 0}}]),t}(l.default.Statistics);t.default={HlsRenderingStatistics:c}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(55),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l={},c=function(){function e(){i(this,e)}return a(e,null,[{key:"register",value:function(e,t){if("string"!=typeof e)throw new Error('Illegal component name, "'+e+'", must be a string, was '+(void 0===e?"undefined":o(e))+".");if(this.componentExists(e)&&u.default.log.warn('A component named "'+e+'" already exists. You may want to avoid re-registering components!'),"function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+(void 0===t?"undefined":o(t))+".");l[e]=t}},{key:"componentExists",value:function(e){return void 0!==l[e]}},{key:"deregister",value:function(e){this.componentExists(e)&&delete l[e]}},{key:"clearToolkit",value:function(e){for(var t in l)l.hasOwnProperty(t)&&this.clearComponent(e,t)}},{key:"clearComponent",value:function(e,t){e.hasOwnProperty(t)&&delete e[t]}},{key:"initialiseToolkit",value:function(e){for(var t in l)l.hasOwnProperty(t)&&this._addComponent(e,t)}},{key:"_addComponent",value:function(e,t){if(e.hasOwnProperty(t))throw new Error('Illegal components name, "'+t+'", cannot share a name with an existing otvtoolkit method!');e[t]=function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=l[t],s=new(Function.prototype.bind.apply(a,[null].concat([e],r(0===i.length?{}:i))));return e[t]=function(){return s},s}}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(57),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;r(this,e),this.player=t,this._log=n,this.selectedBandwidth=1/0,this.selectedResolution=[1/0,1/0],this.isInvalidMaxHeightSet=!1,this.isPendingSetMaxResolution=!1,this.userMaxHeight=1/0,this.userMaxWidth=1/0,this.setListenerOnShakaReady=!1,this.shakaOnStateChangeHandler=this._shakaOnStateChangeListener.bind(this),this.resetMaxHeightHandler=this._resetToUserMaxHeight.bind(this)}return o(e,[{key:"getMaxBandwidth",value:function(){return this.selectedBandwidth}},{key:"getMaxResolution",value:function(){return this.selectedResolution}},{key:"setMaxBandwidth",value:function(e){this.selectedBandwidth=e,this.player.otvtoolkit().techConfig.configure(a.CONFIG_TYPE_OTV,"abr.restrictions.maxBandwidth",e),this.player.trigger("otvmaxbandwidthchange")}},{key:"setMaxResolution",value:function(e,t){if(this.selectedResolution=[Number(e),Number(t)],!1===this.isInvalidMaxHeightSet){var n={abr:{restrictions:{maxWidth:Number(e),maxHeight:Number(t)}}};this.player.otvtoolkit().techConfig.configure(a.CONFIG_TYPE_OTV,n),this.isPendingSetMaxResolution=!1,this.player.trigger("otvmaxresolutionchange")}else this.isPendingSetMaxResolution=!0}},{key:"_resetToUserMaxHeight",value:function(){var e=this.player.otvtoolkit().getConfiguration().abr.restrictions.maxHeight;if(this._log("_resetToUserMaxHeight(): userMaxHeight:"+this.userMaxHeight+" currentMaxHeight:"+e),!0===this.isInvalidMaxHeightSet)if(this.isInvalidMaxHeightSet=!1,this.isPendingSetMaxResolution&&this.selectedResolution)this.setMaxResolution(this.selectedResolution[0],this.selectedResolution[1]);else if(e!==this.userMaxHeight){var t={abr:{restrictions:{maxWidth:Number(this.userMaxWidth),maxHeight:Number(this.userMaxHeight)}}};this.player.otvtoolkit().techConfig.configure(a.CONFIG_TYPE_OTV,t)}}},{key:"_shakaOnStateChangeListener",value:function(e){if("load"===e.state&&!1===this.isInvalidMaxHeightSet){this.userMaxWidth=this.player.otvtoolkit().getConfiguration().abr.restrictions.maxWidth,this.userMaxHeight=this.player.otvtoolkit().getConfiguration().abr.restrictions.maxHeight;var t={abr:{restrictions:{maxWidth:Number(this.userMaxWidth),maxHeight:Number(1)}}};this.player.otvtoolkit().techConfig.configure(a.CONFIG_TYPE_OTV,t),this.player.off("playing",this.resetMaxHeightHandler),this.player.one("playing",this.resetMaxHeightHandler),this.isInvalidMaxHeightSet=!0,this.isPendingSetMaxResolution=!1,this.player.tech_.shaka_.removeEventListener("onstatechange",this.shakaOnStateChangeHandler)}}},{key:"setShakaPlayToStartAtLowestBitrate",value:function(){this.player.tech_&&this.player.tech_.shaka_&&(this.player.tech_.shaka_.addEventListener("onstatechange",this.shakaOnStateChangeHandler),this.setListenerOnShakaReady=!0)}},{key:"resetShakaPlayToStartAtLowestBitrate",value:function(){this.player.tech_&&this.player.tech_.shaka_&&this.player.tech_.shaka_.removeEventListener("onstatechange",this.shakaOnStateChangeHandler),this.setListenerOnShakaReady=!1}},{key:"ready",value:function(){this.setListenerOnShakaReady&&this.setShakaPlayToStartAtLowestBitrate()}},{key:"dispose",value:function(){}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,r){return new Promise(function(i){var o=[{initDataTypes:P}];o[0][t]=n,void 0!==navigator.requestMediaKeySystemAccess?navigator.requestMediaKeySystemAccess(e,o).then(function(){r&&r(),i(!0)}).catch(function(){i(!1)}):i(!1)})}function a(e,t,n,r){var i=e.find(function(e){return e.name===t&&e.contentType===n});if(i)i.securityLevel=Math.max(i.securityLevel,r);else{var o={name:t,contentType:n,securityLevel:r};e.push(o)}}function s(e){return e.reduce(function(e,t){return e.concat(t)},[])}function u(e,t){return new Promise(function(n){var r=e+"Capabilities",i=[],s=[],u=!0,l=!1,c=void 0;try{for(var d,h=j[Symbol.iterator]();!(u=(d=h.next()).done);u=!0){var f=p(d.value,2),g=f[0],y=f[1],v=[{contentType:t,robustness:g}],m=a.bind(null,s,k,t,y),b=o(k,r,v,m);i.push(b)}}catch(e){l=!0,c=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw c}}Promise.all(i).then(function(){n(s)})})}function l(e,t){return new Promise(function(n){var r=e+"Capabilities",i=[],s=[],u=[{contentType:t}],l=!0,c=!1,d=void 0;try{for(var h,f=D[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var g=p(h.value,2),y=g[0],v=g[1],m=A+y,b=a.bind(null,s,A,t,v),w=o(m,r,u,b);i.push(w)}}catch(e){c=!0,d=e}finally{try{!l&&f.return&&f.return()}finally{if(c)throw d}}Promise.all(i).then(function(){n(s)})})}function c(){return new Promise(function(e){var t=[];y.default.isSafari()&&t.push({name:x,contentType:"",securityLevel:_}),e(t)})}function d(e,t){return new Promise(function(n){var r=e+"Capabilities",i=[{contentType:t}],s=[],u=a.bind(null,s,C,t,E);o(C,r,i,u).then(function(){n(s)})})}function h(){}Object.defineProperty(t,"__esModule",{value:!0}),t.DrmSecurityLevel=t.OTVDRMSL_HW_DECODE=t.OTVDRMSL_HW_CRYPT=t.OTVDRMSL_SW=t.OTVDRMSL_UNKNOWN=void 0;var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=n(42),y=r(g),v=n(150),m=r(v),b=n(401),w=r(b),_=t.OTVDRMSL_UNKNOWN=0,T=t.OTVDRMSL_SW=1,S=t.OTVDRMSL_HW_CRYPT=2,E=t.OTVDRMSL_HW_DECODE=3,k="com.widevine.alpha",A="com.microsoft.playready",x="com.apple.fps.1_0",C="com.tvkey.drm",I='video/mp4;codecs="avc1.640015"',M='video/mp4;codecs="avc1.640015"',O='video/mp4;codecs="avc1.640028"',P=["keyids","cenc"],j=new Map([["SW_SECURE_CRYPTO",T],["HW_SECURE_CRYPTO",S],["HW_SECURE_DECODE",E]]),D=new Map([["",T],[".hardware",E]]);t.DrmSecurityLevel=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;i(this,e),this.videojsPlayer=t,this.log=r,this.widevinePromise=u("video",M),this.playreadyPromise=l("video",I),this.fairplayPromise=c(),this.tvkeyPromise=d("video",O),this.promises=[this.widevinePromise,this.playreadyPromise,this.fairplayPromise,this.tvkeyPromise],this.getDrmInfo().then(function(e){if(n.log(JSON.stringify(e)),n.getPreferredDrm())n.log("Preferred DRM set to customer choice: "+n.getPreferredDrm());else if(y.default.isSmartTV())n.setPreferredDrm(k),n.log("For smartTV preferred DRM set to "+k);else if(0===e.length)n.setPreferredDrm(k),n.log("DRM security unknown, setting preferred to: "+k);else{var t=e.reduce(function(e,t){return Math.max(e,t.securityLevel)},0),r=e.filter(function(e){return e.securityLevel===t}),i=r.find(function(e){return e.name===x})||r.find(function(e){return e.name===k})||r[0];n.setPreferredDrm(i.name),n.log("Preferred DRM set to most secure: "+i.name)}})}return f(e,[{key:"getDrmInfo",value:function(e,t,n){var r=this;return e===k?t&&n?u(t,n):this.widevinePromise:e===A?t&&n?l(t,n):this.playreadyPromise:e===x?this.fairplayPromise:e===C?t&&n?d(t,n):this.tvkeyPromise:e?Promise.resolve([]):new Promise(function(e){Promise.all(r.promises).then(function(t){return e(s(t))})})}},{key:"setPreferredDrm",value:function(e){m.default.setPreference(e)}},{key:"getPreferredDrm",value:function(){return m.default.getPreference()}},{key:"dispose",value:function(){this.videojsPlayer=null,this.log=null}},{key:"getCurrentSelectedDrm",value:function(){if(y.default.isSafari())return x;var e=void 0;return this.videojsPlayer.tech_&&this.videojsPlayer.tech_.shaka_&&(e=this.videojsPlayer.tech_.shaka_.keySystem()),e||this.getPreferredDrm()}},{key:"activateTVKey",value:function(e){var t=this;this.getDrmInfo(C).then(function(n){if(0===n.length)t.log.warn("The device can not support tvkey in HBBTV.");else try{new w.default(e,t.log).processActivation()}catch(e){t.log.error("Got exception: "+e.message)}})}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.operatorUUID=t.tvkeyOperatorUUID,this.serverURL=t.licenceServer+"/"+t.tenantId+"/tkap/v1/tvkey/activateDevice",this.log=n,this.oipfDrmAgent=this._createOipfDrmAgent()}return i(e,[{key:"_createOipfDrmAgent",value:function(){try{return window.oipfObjectFactory.createDrmAgentObject()}catch(e){return this.log.error("oipfDrmAgent object could not be created. error message: "+e.message),null}}},{key:"processActivation",value:function(){var e=this;this.checkActivationStatus().then(function(t){t?e.log("tvkey has been activated on this device."):(e.log("Start to activate tvkey on this device."),e.activateDevice().then(function(t){t?e.log("Activate tvkey successfully."):e.log.error("Activate tvkey failed.")}))}).catch(function(){e.log.error("check device activation failure.")})}},{key:"checkActivationStatus",value:function(){var e=this,t={type:"RequestLicenseStatus",OperatorUUID:this.operatorUUID};if(null===this.oipfDrmAgent)throw new Error("The OIPF Drm Agent is invalid.");return this._sendTvkeyMsg(t,"ProvideLicenseStatus").then(function(t){return new Promise(function(n,r){try{var i=JSON.parse(t);n(new Date(i.LicenseStatuses.ActivationRenewalDate).getTime()-6e4<Date.now()?!1:!0)}catch(t){r(t),e.log.error("Got error: "+t.message)}})}).catch(function(t){return e.log.error("get activation status failure: "+t),Promise.resolve(!1)})}},{key:"activateDevice",value:function(){var e=this;if(null===this.oipfDrmAgent)throw new Error("The OIPF Drm Agent is invalid.");return this._getActivationResquest().then(function(t){return e._postActivationPayload(t)}).then(function(t){return e._provideActivationResponse(t)}).catch(function(t){return e.log.error("Activation failure: "+t),Promise.resolve(!1)})}},{key:"_getActivationResquest",value:function(){var e={type:"RequestActivationRequestMessage",OperatorUUID:this.operatorUUID};return this._sendTvkeyMsg(e,"ProvideActivationRequestMessage").then(function(e){var t=JSON.parse(e);return Promise.resolve(JSON.stringify(t.Message))})}},{key:"_provideActivationResponse",value:function(e){var t=JSON.parse(e),n={type:"ProvideActivationResponseMessage",OperatorUUID:this.operatorUUID,Message:t.ActivationResponseMessage};return this._sendTvkeyMsg(n,"ActivationResponseParseResult").then(function(){return Promise.resolve(!0)})}},{key:"_sendTvkeyMsg",value:function(e,t){var n,r=this;return new Promise(function(i,o){function a(e){for(var t=e.toString(),n="",r=0;r<t.length&&"00"!==t.substr(r,u);r+=u)n+=String.fromCharCode(parseInt(t.substr(r,u),s));return n}var s=16,u=2;r.oipfDrmAgent.onDRMMessageResult=function(e,s,u){if(e===n)if(0===u)try{var l=a(s),c=JSON.parse(l);if(c.type===t)if(c.Success){var d=JSON.stringify(c.Result);i(d)}else r.log.error("Get error response: "+JSON.stringify(c.Result)),o(JSON.stringify(c.Result));else"ErrorResponse"===c.type&&(r.log.error("Get error response: "+l),o(l))}catch(e){r.log.error("Parse JSon object failed: "+e.message),o(e)}else r.log.error("Get Drm error code: "+u),o("resultCode: "+u)},n=r.oipfDrmAgent.sendDRMMessage("application/vnd.tvkey.cloud-json",function(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(Number(e.charCodeAt(n)).toString(s));return t.join("")}(JSON.stringify(e)),"urn:dvb:casystemid:19300")})}},{key:"_postActivationPayload",value:function(e){var t="",n=new XMLHttpRequest;if(n.open("POST",this.serverURL,!1),n.setRequestHeader("Accept","application/json"),n.send(e),200===n.status){t=n.responseText;return JSON.parse(t).ErrorCode?Promise.reject(t):Promise.resolve(t)}return Promise.reject(t)}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.QuickmarkInterface=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(55),s=(r(a),n(403)),u=r(s),l="invalidconf",c=-1,d=1,h=2,f=7;t.QuickmarkInterface=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.config=n,n.callbacks||(this.config.callbacks={});var r={tlValidation:this._tlValidationCb.bind(this),image:this._imageCb.bind(this),message:this._messageCb.bind(this),error:this._errorCb.bind(this)},o={callback:r};if("undefined"==typeof jswbwVersion||void 0===jswbwVersion.version)throw this._changeState(l),this._errorCb(c,"Quickmark module not loaded"),new Error("Quickmark module not loaded");if(this.cssClassName="dynamic-size",!n.player)throw this._changeState(l),this._errorCb(f,"no player provided"),new Error("QuickmarkInterface configuration is invalid, no player provided");if(this.player=n.player,!n.tlValidation&&!n.secret)throw this._changeState(l),this._errorCb(f,"Need a secret or a tlValidation"),new Error("QuickmarkInterface configuration is invalid.  Need a secret or a tlValidation");if(o.url=this._getUrl(n.url,n.service,n.tenant),o.token=n.token,o.apikey=n.apikey,o.url&&!n.token)throw this._changeState(l),this._errorCb(d,"Missing token"),new Error("QuickmarkInterface configuration is invalid.  Need token for pull mode");if(n.token&&!o.url){this._changeState(l);var a=n.service?"Missing tenant":"Missing service URL";throw this._errorCb(h,a),new Error("QuickmarkInterface configuration is invalid.  Need URL (or service and tenant) for pull mode")}this.waitingForPlaying=!1,this.player.on(this.player,"loadedmetadata",this._onPlay.bind(this)),this.fullscreenChangeHandler=function(){setTimeout(function(){t.resize()},0)},this.player.on("fullscreenchange",this.fullscreenChangeHandler),this.jswbw=new jswbw2(o),n.toolkit.addEventListener("pipon",function(){t.resize()}),n.toolkit.addEventListener("pipoff",function(){t.resize()}),window.addEventListener("resize",function(){t.resize()})}return o(e,[{key:"_changeState",value:function(e){this.state!==e&&("stopped"===e&&this.jswbw&&this.jswbw.pause(),"started"===e&&this.jswbw&&(this.jswbw.isStarted()?this.jswbw.resume():this.jswbw.start()),this.state=e,this._messageCb("Changing state to "+e))}},{key:"_getUrl",value:function(e,t,n){return e||(t&&n?t+"/"+n+"/qm/v2/surfaces":void 0)}},{key:"_onPlay",value:function(){this._log("QuickmarkInterface::_onPlay() loadedmetadata"),this.waitingForPlaying||(this.player.one("playing",this._onPlaying.bind(this)),this.waitingForPlaying=!0)}},{key:"_onPlaying",value:function(){this._log("QuickmarkInterface::_onPlaying() playing"),this.waitingForPlaying=!1,this.resize();var e=this.player.el_.getElementsByTagName("video")[0];e.removeEventListener("resize",this.resize.bind(this)),e.addEventListener("resize",this.resize.bind(this))}},{key:"_imageCb",value:function(e){this._log("A new marker is ready to display"),this.resize(),this.player.trigger("jswbwUpdate");var t=!0,n=document.getElementsByClassName("vjs-control-bar");n&&0!==n.length||(t=!1,n=document.getElementsByClassName("vjs-shaka"));var r=document.getElementById("ng"),i=document.getElementById("ng-img");r?(r.removeChild(i),r.parentNode.removeChild(r)):r=document.createElement("div"),i=document.createElement("div"),i.id="ng-img",i.style.backgroundImage="url('"+e+"')",i.style.width="100%",i.style.height="100%",i.style.backgroundSize="100%",i.style.backgroundRepeat="round",r.id="ng",r.style.pointerEvents="none",r.classList.add("vjs-overlay"),r.classList.add("dynamic-size"),r.classList.add("vjs-overlay-background"),r.appendChild(i);var o=n[0];t||(o=n[0].nextSibling),n[0].parentNode.insertBefore(r,o),this.player.trigger("jswbwStart")}},{key:"_messageCb",value:function(e){this._log("QuickmarkInterface Message received: '"+e+"'"),this.config.callbacks.message&&this.config.callbacks.message(e)}},{key:"_errorCb",value:function(e,t){this._log("QuickmarkInterface Error "+e+" received: '"+t+"'"),this.config.callbacks.error&&this.config.callbacks.error(e,t)}},{key:"_tlValidationCb",value:function(e){if(this.config.tlValidation)return this._log("Calling customer tlvalidation"),this.config.tlValidation(e);if(this.config.secret){var t=this._makeShaObj();t.setHMACKey(this.config.secret,"BYTES"),t.update(e);return t.getHMAC("UINT8ARRAY")}return this._log("QuickmarkInterface tlValidation unable to calculate signature"),new Uint8Array}},{key:"_makeShaObj",value:function(){return new u.default("SHA-1","ARRAYBUFFER")}},{key:"resize",value:function(){var e=this.player.$("video"),t=this.videoDimensions(e),n="\n\t\t.dynamic-size {\n\t\t\theight: "+t.height+";\n\t\t\tleft: "+t.left+";\n\t\t\twidth: "+t.width+";\n\t\t\ttop: "+t.top+";\n\t\t\ttransform: translateY("+t.translateY+");\n\t\t\t}\n\t\t",r=null;document.getElementById(this.cssClassName)?(r=document.getElementById(this.cssClassName),r.innerHTML=n):(r=document.createElement("style"),r.id=this.cssClassName,r.type="text/css",r.innerHTML=n,document.head.appendChild(r)),this.player.isFullscreen_||0===e.offsetHeight||(this.preFullScreenSize=e.offsetHeight)}},{key:"_pixelPerfectRounding",value:function(e,t){var n=Math.ceil(e);return n===t-1&&(n=t),n}},{key:"videoDimensions",value:function(e){var t=0===e.offsetHeight?this.preFullScreenSize:e.offsetHeight,n={width:e.offsetWidth,height:t,ratio:this.player.videoWidth()/this.player.videoHeight(),elementOffsetWidth:e.offsetWidth,elementOffsetHeight:t,elementRatio:e.offsetWidth/t};n.elementRatio>n.ratio?n.width=this._pixelPerfectRounding(n.height*n.ratio,n.width):n.height=this._pixelPerfectRounding(n.width/n.ratio,n.height);var r=Math.ceil((n.elementOffsetWidth-n.width)/2),i=2*Math.round(n.height/2),o=Math.ceil(n.height/2),a=Math.ceil((n.elementOffsetHeight-n.height)/2);return{height:i+"px!important",left:r+"px",width:n.width+"px!important",top:o+a+"px",translateY:"-"+o+"px"}}},{key:"getVersion",value:function(){return jswbwVersion.version}},{key:"update",value:function(e,t){return this._log("QuickmarkInterface::update()"),this.jswbw.update(e,t)}},{key:"setApiKey",value:function(e){this.jswbw&&this.jswbw.cnxHandler&&e&&(this._log("QuickmarkInterface: setting apiKey: "+e),this.config.apiKey=e,this.jswbw.cnxHandler.setApiKey(e))}},{key:"setToken",value:function(e){this.jswbw&&e&&(this._log("QuickmarkInterface: setting token: "+e),this.config.token=e,this.jswbw.setToken(e))}},{key:"setTenant",value:function(e){if(this.jswbw&&this.jswbw.cnxHandler&&e&&this.config.service&&!this.config.url){this._log("QuickmarkInterface: setting tenant: "+e),this.config.tenant=e;var t=this._getUrl(null,this.config.service,this.config.tenant);this.jswbw.cnxHandler.setUrl(t)}}},{key:"setURL",value:function(e){this.jswbw&&this.jswbw.cnxHandler&&e&&(this._log("QuickmarkInterface: setting url:"+e),this.config.url=e,this.jswbw.cnxHandler.setUrl(e))}},{key:"setMessageCallback",value:function(e){e&&(this.config.callbacks.message=e)}},{key:"setErrorCallback",value:function(e){e&&(this.config.callbacks.error=e)}},{key:"setTlValidationCallback",value:function(e){e&&(this.config.callbacks.tlValidation=e)}},{key:"setCallbacks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.setMessageCallback(e),this.setErrorCallback(t),this.setTlValidationCallback(n)}},{key:"start",value:function(){this._log("QuickmarkInterface: starting quickmark"),this._changeState("started")}},{key:"stop",value:function(){this._log("QuickmarkInterface: stopping quickmark"),this._changeState("stopped")}},{key:"_log",value:function(e){}}]),e}()},function(e,t,n){"use strict";var r;!function(i){function o(e,t,n){var r,i,o,a,s,g,y,v,m,b=0,w=[],_=0,T=!1,S=[],E=[],k=!1,A=!1,x=-1;if(n=n||{},r=n.encoding||"UTF8",(m=n.numRounds||1)!==parseInt(m,10)||1>m)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)s=512,g=B,y=V,a=160,v=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(g=function(t,n){return H(t,n,e)},y=function(t,n,r,i){var o,a;if("SHA-224"===e||"SHA-256"===e)o=15+(n+65>>>9<<4),a=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");o=31+(n+129>>>10<<5),a=32}for(;t.length<=o;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=r,t[o]=4294967295&n,t[o-1]=n/4294967296|0,r=t.length,n=0;n<r;n+=a)i=H(t.slice(n,n+a),i,e);if("SHA-224"===e)t=[i[0],i[1],i[2],i[3],i[4],i[5],i[6]];else if("SHA-256"===e)t=i;else if("SHA-384"===e)t=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");t=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b,i[6].a,i[6].b,i[7].a,i[7].b]}return t},v=function(e){return e.slice()},"SHA-224"===e)s=512,a=224;else if("SHA-256"===e)s=512,a=256;else if("SHA-384"===e)s=1024,a=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");s=1024,a=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var C=6;if(g=W,v=function(e){var t,n=[];for(t=0;5>t;t+=1)n[t]=e[t].slice();return n},x=1,"SHA3-224"===e)s=1152,a=224;else if("SHA3-256"===e)s=1088,a=256;else if("SHA3-384"===e)s=832,a=384;else if("SHA3-512"===e)s=576,a=512;else if("SHAKE128"===e)s=1344,a=-1,C=31,A=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");s=1088,a=-1,C=31,A=!0}y=function(e,t,n,r,i){n=s;var o,a=C,u=[],l=n>>>5,c=0,d=t>>>5;for(o=0;o<d&&t>=n;o+=l)r=W(e.slice(o,o+l),r),t-=n;for(e=e.slice(o),t%=n;e.length<l;)e.push(0);for(o=t>>>3,e[o>>2]^=a<<o%4*8,e[l-1]^=2147483648,r=W(e,r);32*u.length<i&&(e=r[c%5][c/5|0],u.push(e.b),!(32*u.length>=i));)u.push(e.a),0==64*(c+=1)%n&&(W(null,r),c=0);return u}}o=p(t,r,x),i=F(e),this.setHMACKey=function(t,n,o){var u;if(!0===T)throw Error("HMAC key already set");if(!0===k)throw Error("Cannot set HMAC key after calling update");if(!0===A)throw Error("SHAKE is not supported for HMAC");for(r=(o||{}).encoding||"UTF8",n=p(n,r,x)(t),t=n.binLen,n=n.value,u=s>>>3,o=u/4-1,u<t/8&&(n=y(n,t,0,F(e),a));n.length<=o;)n.push(0);for(t=0;t<=o;t+=1)S[t]=909522486^n[t],E[t]=1549556828^n[t];i=g(S,i),b=s,T=!0},this.update=function(e){var t,n,r,a=0,u=s>>>5;for(t=o(e,w,_),e=t.binLen,n=t.value,t=e>>>5,r=0;r<t;r+=u)a+s<=e&&(i=g(n.slice(r,r+u),i),a+=s);b+=a,w=n.slice(a>>>5),_=e%s,k=!0},this.getHash=function(t,n){var r,o,s,p;if(!0===T)throw Error("Cannot call getHash after setting HMAC key");if(s=f(n),!0===A){if(-1===s.shakeLen)throw Error("shakeLen must be specified in options");a=s.shakeLen}switch(t){case"HEX":r=function(e){return u(e,a,x,s)};break;case"B64":r=function(e){return l(e,a,x,s)};break;case"BYTES":r=function(e){return c(e,a,x)};break;case"ARRAYBUFFER":try{o=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}r=function(e){return d(e,a,x)};break;case"UINT8ARRAY":try{o=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}r=function(e){return h(e,a,x)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(p=y(w.slice(),_,b,v(i),a),o=1;o<m;o+=1)!0===A&&0!=a%32&&(p[p.length-1]&=16777215>>>24-a%32),p=y(p,a,0,F(e),a);return r(p)},this.getHMAC=function(t,n){var r,o,p,m;if(!1===T)throw Error("Cannot call getHMAC without first setting HMAC key");switch(p=f(n),t){case"HEX":r=function(e){return u(e,a,x,p)};break;case"B64":r=function(e){return l(e,a,x,p)};break;case"BYTES":r=function(e){return c(e,a,x)};break;case"ARRAYBUFFER":try{r=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}r=function(e){return d(e,a,x)};break;case"UINT8ARRAY":try{r=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}r=function(e){return h(e,a,x)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return o=y(w.slice(),_,b,v(i),a),m=g(E,F(e)),m=y(o,a,s,m,a),r(m)}}function a(e,t){this.a=e,this.b=t}function s(e,t,n,r){var i,o,a,s,u;for(t=t||[0],n=n||0,o=n>>>3,u=-1===r?3:0,i=0;i<e.length;i+=1)s=i+o,a=s>>>2,t.length<=a&&t.push(0),t[a]|=e[i]<<8*(u+s%4*r);return{value:t,binLen:8*e.length+n}}function u(e,t,n,r){var i="";t/=8;var o,a,s;for(s=-1===n?3:0,o=0;o<t;o+=1)a=e[o>>>2]>>>8*(s+o%4*n),i+="0123456789abcdef".charAt(a>>>4&15)+"0123456789abcdef".charAt(15&a);return r.outputUpper?i.toUpperCase():i}function l(e,t,n,r){var i,o,a,s,u="",l=t/8;for(s=-1===n?3:0,i=0;i<l;i+=3)for(o=i+1<l?e[i+1>>>2]:0,a=i+2<l?e[i+2>>>2]:0,a=(e[i>>>2]>>>8*(s+i%4*n)&255)<<16|(o>>>8*(s+(i+1)%4*n)&255)<<8|a>>>8*(s+(i+2)%4*n)&255,o=0;4>o;o+=1)u+=8*i+6*o<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6*(3-o)&63):r.b64Pad;return u}function c(e,t,n){var r="";t/=8;var i,o,a;for(a=-1===n?3:0,i=0;i<t;i+=1)o=e[i>>>2]>>>8*(a+i%4*n)&255,r+=String.fromCharCode(o);return r}function d(e,t,n){t/=8;var r,i,o,a=new ArrayBuffer(t);for(o=new Uint8Array(a),i=-1===n?3:0,r=0;r<t;r+=1)o[r]=e[r>>>2]>>>8*(i+r%4*n)&255;return a}function h(e,t,n){t/=8;var r,i,o=new Uint8Array(t);for(i=-1===n?3:0,r=0;r<t;r+=1)o[r]=e[r>>>2]>>>8*(i+r%4*n)&255;return o}function f(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function p(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,t,r){var i,o,a,s,u,l,c=e.length;if(0!=c%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],r=r||0,u=r>>>3,l=-1===n?3:0,i=0;i<c;i+=2){if(o=parseInt(e.substr(i,2),16),isNaN(o))throw Error("String of HEX type contains invalid characters");for(s=(i>>>1)+u,a=s>>>2;t.length<=a;)t.push(0);t[a]|=o<<8*(l+s%4*n)}return{value:t,binLen:4*c+r}};break;case"TEXT":e=function(e,r,i){var o,a,s,u,l,c,d,h,f=0;if(r=r||[0],i=i||0,l=i>>>3,"UTF8"===t)for(h=-1===n?3:0,s=0;s<e.length;s+=1)for(o=e.charCodeAt(s),a=[],128>o?a.push(o):2048>o?(a.push(192|o>>>6),a.push(128|63&o)):55296>o||57344<=o?a.push(224|o>>>12,128|o>>>6&63,128|63&o):(s+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(s)),a.push(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)),u=0;u<a.length;u+=1){for(d=f+l,c=d>>>2;r.length<=c;)r.push(0);r[c]|=a[u]<<8*(h+d%4*n),f+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(h=-1===n?2:0,a="UTF16LE"===t&&1!==n||"UTF16LE"!==t&&1===n,s=0;s<e.length;s+=1){for(o=e.charCodeAt(s),!0===a&&(u=255&o,o=u<<8|o>>>8),d=f+l,c=d>>>2;r.length<=c;)r.push(0);r[c]|=o<<8*(h+d%4*n),f+=2}return{value:r,binLen:8*f+i}};break;case"B64":e=function(e,t,r){var i,o,a,s,u,l,c,d,h=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(o=e.indexOf("="),e=e.replace(/\=/g,""),-1!==o&&o<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],r=r||0,l=r>>>3,d=-1===n?3:0,o=0;o<e.length;o+=4){for(u=e.substr(o,4),a=s=0;a<u.length;a+=1)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(u.charAt(a)),s|=i<<18-6*a;for(a=0;a<u.length-1;a+=1){for(c=h+l,i=c>>>2;t.length<=i;)t.push(0);t[i]|=(s>>>16-8*a&255)<<8*(d+c%4*n),h+=1}}return{value:t,binLen:8*h+r}};break;case"BYTES":e=function(e,t,r){var i,o,a,s,u,l;for(t=t||[0],r=r||0,a=r>>>3,l=-1===n?3:0,o=0;o<e.length;o+=1)i=e.charCodeAt(o),u=o+a,s=u>>>2,t.length<=s&&t.push(0),t[s]|=i<<8*(l+u%4*n);return{value:t,binLen:8*e.length+r}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,t,r){return s(new Uint8Array(e),t,r,n)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}e=function(e,t,r){return s(e,t,r,n)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function g(e,t){return e<<t|e>>>32-t}function y(e,t){return 32<t?(t-=32,new a(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0!==t?new a(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function v(e,t){return e>>>t|e<<32-t}function m(e,t){var n=null,n=new a(e.a,e.b);return n=32>=t?new a(n.a>>>t|n.b<<32-t&4294967295,n.b>>>t|n.a<<32-t&4294967295):new a(n.b>>>t-32|n.a<<64-t&4294967295,n.a>>>t-32|n.b<<64-t&4294967295)}function b(e,t){return 32>=t?new a(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new a(0,e.a>>>t-32)}function w(e,t,n){return e&t^~e&n}function _(e,t,n){return new a(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function T(e,t,n){return e&t^e&n^t&n}function S(e,t,n){return new a(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function E(e){return v(e,2)^v(e,13)^v(e,22)}function k(e){var t=m(e,28),n=m(e,34);return e=m(e,39),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function A(e){return v(e,6)^v(e,11)^v(e,25)}function x(e){var t=m(e,14),n=m(e,18);return e=m(e,41),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function C(e){return v(e,7)^v(e,18)^e>>>3}function I(e){var t=m(e,1),n=m(e,8);return e=b(e,7),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function M(e){return v(e,17)^v(e,19)^e>>>10}function O(e){var t=m(e,19),n=m(e,61);return e=b(e,6),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function P(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function j(e,t,n,r){var i=(65535&e)+(65535&t)+(65535&n)+(65535&r);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)&65535)<<16|65535&i}function D(e,t,n,r,i){var o=(65535&e)+(65535&t)+(65535&n)+(65535&r)+(65535&i);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)+(o>>>16)&65535)<<16|65535&o}function R(e,t){var n,r,i;return n=(65535&e.b)+(65535&t.b),r=(e.b>>>16)+(t.b>>>16)+(n>>>16),i=(65535&r)<<16|65535&n,n=(65535&e.a)+(65535&t.a)+(r>>>16),r=(e.a>>>16)+(t.a>>>16)+(n>>>16),new a((65535&r)<<16|65535&n,i)}function L(e,t,n,r){var i,o,s;return i=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&r.b),o=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(r.b>>>16)+(i>>>16),s=(65535&o)<<16|65535&i,i=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&r.a)+(o>>>16),o=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(r.a>>>16)+(i>>>16),new a((65535&o)<<16|65535&i,s)}function N(e,t,n,r,i){var o,s,u;return o=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&r.b)+(65535&i.b),s=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(r.b>>>16)+(i.b>>>16)+(o>>>16),u=(65535&s)<<16|65535&o,o=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&r.a)+(65535&i.a)+(s>>>16),s=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(r.a>>>16)+(i.a>>>16)+(o>>>16),new a((65535&s)<<16|65535&o,u)}function U(e,t){return new a(e.a^t.a,e.b^t.b)}function F(e){var t,n=[];if("SHA-1"===e)n=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":n=t;break;case"SHA-384":n=[new a(3418070365,n[0]),new a(1654270250,n[1]),new a(2438529370,n[2]),new a(355462360,n[3]),new a(1731405415,n[4]),new a(41048885895,n[5]),new a(3675008525,n[6]),new a(1203062813,n[7])];break;case"SHA-512":n=[new a(t[0],4089235720),new a(t[1],2227873595),new a(t[2],4271175723),new a(t[3],1595750129),new a(t[4],2917565137),new a(t[5],725511199),new a(t[6],4215389547),new a(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)n[e]=[new a(0,0),new a(0,0),new a(0,0),new a(0,0),new a(0,0)]}return n}function B(e,t){var n,r,i,o,a,s,u,l=[];for(n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=0;80>u;u+=1)l[u]=16>u?e[u]:g(l[u-3]^l[u-8]^l[u-14]^l[u-16],1),s=20>u?D(g(n,5),r&i^~r&o,a,1518500249,l[u]):40>u?D(g(n,5),r^i^o,a,1859775393,l[u]):60>u?D(g(n,5),T(r,i,o),a,2400959708,l[u]):D(g(n,5),r^i^o,a,3395469782,l[u]),a=o,o=i,i=g(r,30),r=n,n=s;return t[0]=P(n,t[0]),t[1]=P(r,t[1]),t[2]=P(i,t[2]),t[3]=P(o,t[3]),t[4]=P(a,t[4]),t}function V(e,t,n,r){var i;for(i=15+(t+65>>>9<<4);e.length<=i;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=n,e[i]=4294967295&t,e[i-1]=t/4294967296|0,t=e.length,i=0;i<t;i+=16)r=B(e.slice(i,i+16),r);return r}function H(e,t,n){var r,i,o,s,u,l,c,d,h,f,p,g,y,v,m,b,U,F,B,V,H,W,G,z=[];if("SHA-224"===n||"SHA-256"===n)f=64,g=1,W=Number,y=P,v=j,m=D,b=C,U=M,F=E,B=A,H=T,V=w,G=K;else{if("SHA-384"!==n&&"SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");f=80,g=2,W=a,y=R,v=L,m=N,b=I,U=O,F=k,B=x,H=S,V=_,G=q}for(n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=0;p<f;p+=1)16>p?(h=p*g,d=e.length<=h?0:e[h],h=e.length<=h+1?0:e[h+1],z[p]=new W(d,h)):z[p]=v(U(z[p-2]),z[p-7],b(z[p-15]),z[p-16]),d=m(c,B(s),V(s,u,l),G[p],z[p]),h=y(F(n),H(n,r,i)),c=l,l=u,u=s,s=y(o,d),o=i,i=r,r=n,n=y(d,h);return t[0]=y(n,t[0]),t[1]=y(r,t[1]),t[2]=y(i,t[2]),t[3]=y(o,t[3]),t[4]=y(s,t[4]),t[5]=y(u,t[5]),t[6]=y(l,t[6]),t[7]=y(c,t[7]),t}function W(e,t){var n,r,i,o,s=[],u=[];if(null!==e)for(r=0;r<e.length;r+=2)t[(r>>>1)%5][(r>>>1)/5|0]=U(t[(r>>>1)%5][(r>>>1)/5|0],new a(e[r+1],e[r]));for(n=0;24>n;n+=1){for(o=F("SHA3-"),r=0;5>r;r+=1){i=t[r][0];var l=t[r][1],c=t[r][2],d=t[r][3],h=t[r][4];s[r]=new a(i.a^l.a^c.a^d.a^h.a,i.b^l.b^c.b^d.b^h.b)}for(r=0;5>r;r+=1)u[r]=U(s[(r+4)%5],y(s[(r+1)%5],1));for(r=0;5>r;r+=1)for(i=0;5>i;i+=1)t[r][i]=U(t[r][i],u[r]);for(r=0;5>r;r+=1)for(i=0;5>i;i+=1)o[i][(2*r+3*i)%5]=y(t[r][i],G[r][i]);for(r=0;5>r;r+=1)for(i=0;5>i;i+=1)t[r][i]=U(o[r][i],new a(~o[(r+1)%5][i].a&o[(r+2)%5][i].a,~o[(r+1)%5][i].b&o[(r+2)%5][i].b));t[0][0]=U(t[0][0],z[n])}return t}var K,q,G,z;K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],q=[new a(K[0],3609767458),new a(K[1],602891725),new a(K[2],3964484399),new a(K[3],2173295548),new a(K[4],4081628472),new a(K[5],3053834265),new a(K[6],2937671579),new a(K[7],3664609560),new a(K[8],2734883394),new a(K[9],1164996542),new a(K[10],1323610764),new a(K[11],3590304994),new a(K[12],4068182383),new a(K[13],991336113),new a(K[14],633803317),new a(K[15],3479774868),new a(K[16],2666613458),new a(K[17],944711139),new a(K[18],2341262773),new a(K[19],2007800933),new a(K[20],1495990901),new a(K[21],1856431235),new a(K[22],3175218132),new a(K[23],2198950837),new a(K[24],3999719339),new a(K[25],766784016),new a(K[26],2566594879),new a(K[27],3203337956),new a(K[28],1034457026),new a(K[29],2466948901),new a(K[30],3758326383),new a(K[31],168717936),new a(K[32],1188179964),new a(K[33],1546045734),new a(K[34],1522805485),new a(K[35],2643833823),new a(K[36],2343527390),new a(K[37],1014477480),new a(K[38],1206759142),new a(K[39],344077627),new a(K[40],1290863460),new a(K[41],3158454273),new a(K[42],3505952657),new a(K[43],106217008),new a(K[44],3606008344),new a(K[45],1432725776),new a(K[46],1467031594),new a(K[47],851169720),new a(K[48],3100823752),new a(K[49],1363258195),new a(K[50],3750685593),new a(K[51],3785050280),new a(K[52],3318307427),new a(K[53],3812723403),new a(K[54],2003034995),new a(K[55],3602036899),new a(K[56],1575990012),new a(K[57],1125592928),new a(K[58],2716904306),new a(K[59],442776044),new a(K[60],593698344),new a(K[61],3733110249),new a(K[62],2999351573),new a(K[63],3815920427),new a(3391569614,3928383900),new a(3515267271,566280711),new a(3940187606,3454069534),new a(4118630271,4000239992),new a(116418474,1914138554),new a(174292421,2731055270),new a(289380356,3203993006),new a(460393269,320620315),new a(685471733,587496836),new a(852142971,1086792851),new a(1017036298,365543100),new a(1126000580,2618297676),new a(1288033470,3409855158),new a(1501505948,4234509866),new a(1607167915,987167468),new a(1816402316,1246189591)],z=[new a(0,1),new a(0,32898),new a(2147483648,32906),new a(2147483648,2147516416),new a(0,32907),new a(0,2147483649),new a(2147483648,2147516545),new a(2147483648,32777),new a(0,138),new a(0,136),new a(0,2147516425),new a(0,2147483658),new a(0,2147516555),new a(2147483648,139),new a(2147483648,32905),new a(2147483648,32771),new a(2147483648,32770),new a(2147483648,128),new a(0,32778),new a(2147483648,2147483658),new a(2147483648,2147516545),new a(2147483648,32896),new a(0,2147483649),new a(2147483648,2147516424)],G=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0!==(r=function(){return o}.call(t,n,t,e))&&(e.exports=r)}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.player=t,this._initReadyEvent()}return i(e,[{key:"_onStreamingEvent",value:function(){var e=this.player.tech_.shaka_.getStats(),t=e.maxSegmentDuration,n=-1===this.vodTimeoutMultiplier&&-1===this.liveTimeoutMultiplier,r=0;r=this.player.tech_.shaka_.isLive()?-1===this.liveTimeoutMultiplier?1.5:this.liveTimeoutMultiplier:-1===this.vodTimeoutMultiplier?5:this.vodTimeoutMultiplier;var i=t*r*1e3;n&&(i=Math.max(6e3,Math.min(15e3,i))),this.player.tech_.shaka_.configure("streaming.retryParameters.timeout",i)}},{key:"_initReadyEvent",value:function(){var e=this;this.player.on("ready",function(){e.player.tech_.shaka_&&e.player.tech_.shaka_.addEventListener("streaming",function(){return e._onStreamingEvent()})})}},{key:"setVodTimeoutMultiplier",value:function(e){this.vodTimeoutMultiplier=e}},{key:"setLiveTimeoutMultiplier",value:function(e){this.liveTimeoutMultiplier=e}}]),e}();t.default={SegmentTimeoutController:o,USE_DEFAULT:-1}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=[{width:350,name:"opy-tiny"},{width:550,name:"opy-xsmall"},{width:800,name:"opy-small"}],a=function(){function e(t,n){var i=this;r(this,e),this.player_=t,this.toolkit_=n,this.currentBreakpoint_=void 0,this.setBreakpoint_(),this.screenConfigChangeHandler=function(){setTimeout(function(){i.setBreakpoint_()},0)},this.toolkit_.addEventListener("pipon",this.screenConfigChangeHandler),this.toolkit_.addEventListener("pipoff",this.screenConfigChangeHandler),this.player_.on("fullscreenchange",this.screenConfigChangeHandler),this.player_.on("loadstart",function(){i.setBreakpoint_()}),window.addEventListener("resize",function(){i.setBreakpoint_()})}return i(e,[{key:"assignBreakpoint_",value:function(e){this.currentBreakpoint_=e,this.currentBreakpoint_&&this.addBp_(this.currentBreakpoint_)}},{key:"setBreakpoint_",value:function(){if(this.player_.el()){var e=this.player_.el().getElementsByTagName("video")[0];if(e&&e.parentElement){var t=e.parentElement.clientWidth,n=o.find(function(e){return t<e.width}),r=n?n.name:void 0;this.currentBreakpoint_?this.currentBreakpoint_!==r&&(this.removeBp_(this.currentBreakpoint_),this.assignBreakpoint_(r)):this.assignBreakpoint_(r)}}}},{key:"addBp_",value:function(e){this.player_.el().classList.add(e)}},{key:"removeBp_",value:function(e){this.player_.el().classList.remove(e)}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),s=function(){function e(t){i(this,e),this.extra="",this.player=t,this.onCanPlayHandle=this._onCanPlay.bind(this),this.onPlayHandle=this._onPlay.bind(this),this.onTimeUpdateHandle=this._onTimeUpdate.bind(this),this.onSeekingHandle=this._onSeeking.bind(this),this.onSeekedHandle=this._onSeeked.bind(this)}return o(e,[{key:"dispose",value:function(){this._removeListeners(),this.player=void 0}},{key:"onSetUrl",value:function(e){var t=e.src||e;this.extra=JSON.stringify(r({},a.OtvEventExtraKey.url,t)),OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.setURL,this.extra),this._removeListeners(),this.player.one("canplay",this.onCanPlayHandle),this.player.one("play",this.onPlayHandle),this.player.on("seeking",this.onSeekingHandle),this.player.on("seeked",this.onSeekedHandle)}},{key:"onStop",value:function(){this.extra&&(OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.stop,this.extra),this.extra="",this._removeListeners())}},{key:"_removeListeners",value:function(){this.player&&(this.player.off("canplay",this.onCanPlayHandle),this.player.off("play",this.onPlayHandle),this.player.off("timeupdate",this.onTimeUpdateHandle),this.player.off("seeking",this.onSeekingHandle),this.player.off("seeked",this.onSeekedHandle))}},{key:"_onSeeking",value:function(){OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.seeking,this.extra)}},{key:"_onSeeked",value:function(){OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.seeked,this.extra)}},{key:"_onCanPlay",value:function(){OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.prepared,this.extra),this.player.one("timeupdate",this.onTimeUpdateHandle)}},{key:"_onPlay",value:function(){OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.start,this.extra)}},{key:"_onTimeUpdate",value:function(){OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.firstFrame,this.extra)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(151),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},c=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"_getPlayerInstance",value:function(){var e=void 0;if(this.videojs&&this.videojs.el_){e=this.videojs.el_.getElementsByClassName("vjs-tech")[0]}return e}},{key:"_onErrorEvent",value:function(e){var t=shaka.util.Error.Category.PLAYER,n=shaka.util.Error.Code.BAD_HTTP_STATUS;switch(console.log(""+JSON.stringify(e.target.error)),e.target.error.code){case l.MEDIA_ERR_ABORTED:t=shaka.util.Error.Category.STREAMING,n=shaka.util.Error.Code.BAD_HTTP_STATUS;break;case l.MEDIA_ERR_NETWORK:t=shaka.util.Error.Category.NETWORK,n=shaka.util.Error.Code.BAD_HTTP_STATUS;break;case l.MEDIA_ERR_DECODE:t=shaka.util.Error.Category.MEDIA,n=shaka.util.Error.Code.BAD_ENCODING;break;case l.MEDIA_ERR_SRC_NOT_SUPPORTED:t=shaka.util.Error.Category.MEDIA,n=shaka.util.Error.Code.DASH_UNSUPPORTED_CONTAINER}this.listener&&this.listener.errorChanged&&this.listener.errorChanged(shaka.util.Error.Severity.CRITICAL,t,n,e.target.error.message)}}]),t}(u.default.ErrorReporting);t.default={NativePlayerErrorReporting:c}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(151),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"_getPlayerInstance",value:function(){var e=void 0;return this.videojs&&this.videojs.tech_&&(e=this.videojs.tech_.shaka_),e}}]),t}(u.default.ErrorReporting);t.default={ShakaPlayerErrorReporting:l}},function(e,t,n){"use strict";function r(e){var t=function(t){e&&o.default.log(t)};return t.error=function(e){return o.default.log.error(e)},t.warn=function(e){return o.default.log.warn(e)},t.debug=function(t){e&&"function"==typeof o.default.debug&&o.default.debug(t)},t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(55),o=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.videojs=t}return i(e,[{key:"setDebugLevel",value:function(e){shaka.log.setLevel(e)}},{key:"setLogProvider",value:function(e){this.listener=e,e&&this._captureConsoleLogs()}},{key:"reset",value:function(){this.listener=void 0}},{key:"_captureConsoleLogs",value:function(){var e=this;void 0===console.everything&&(console.everything="",console.visible="",console.defaultInfo=console.info.bind(console),console.info=function(){var t="Info: "+Array.from(arguments)+"\n";console.defaultInfo.apply(console,arguments),e._onLogEvent(t)},console.defaultLog=console.log.bind(console),console.log=function(){var t="Log: "+Array.from(arguments)+"\n";console.defaultLog.apply(console,arguments),e._onLogEvent(t)},console.defaultError=console.error.bind(console),console.error=function(){var t="Error: "+Array.from(arguments)+"\n";console.defaultError.apply(console,arguments),e._onLogEvent(t)},console.defaultWarn=console.warn.bind(console),console.warn=function(){var t="Warning: "+Array.from(arguments)+"\n";console.defaultWarn.apply(console,arguments),e._onLogEvent(t)},console.defaultDebug=console.debug.bind(console),console.debug=function(){var t="Debug: "+Array.from(arguments)+"\n";console.defaultDebug.apply(console,arguments),e._onLogEvent(t)})}},{key:"_onLogEvent",value:function(e){if(this.listener&&this.listener.logProvider){var t=new Date;this.listener.logProvider(t+": "+e)}}}]),e}();t.default={LogProvider:o}},function(e,t,n){"use strict";function r(e){var t=e;if(t&&t.config&&t.config.ssmServer){var n=t.config.ssmServer.match(/^(http(s)?):(\/\/.*?)(\/v1)?(\/)?$/);n&&(t.config.ssmServer=n[1]+":"+n[3]+"/v1")}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default={homogeniseSsmUri:r}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i,o){r(this,e),this._drmSecurityLevel=n,this._pluginDrmConfig=t,this._configUtil=i,this._configType=o}return i(e,[{key:"setHwDecryption",value:function(){var e=this;this._pluginDrmConfig&&this._pluginDrmConfig.config.useHW&&this._drmSecurityLevel.getDrmInfo("com.widevine.alpha").then(function(t){if(t.find(function(e){return 3===e.securityLevel})){var n={drm:{advanced:{"com.widevine.alpha":{videoRobustness:"HW_SECURE_DECODE",audioRobustness:"HW_SECURE_CRYPTO"}}}};e._configUtil.configure(e._configType,n)}else{var r={drm:{advanced:{"com.widevine.alpha":{videoRobustness:"HW_SECURE_CRYPTO",audioRobustness:"HW_SECURE_CRYPTO"}}}};e._configUtil.configure(e._configType,r)}})}}]),e}();t.default=o},function(e,t,n){"use strict";function r(){var e=videojs.getComponent("MenuItem");return Boolean(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var r=n(415),i=r,o=Function("return this")();i.exportSymbol("proto.WidevinePsshData",null,o),i.exportSymbol("proto.WidevinePsshData.Algorithm",null,o),i.exportSymbol("proto.WidevinePsshData.EntitledKey",null,o),i.exportSymbol("proto.WidevinePsshData.Type",null,o),proto.WidevinePsshData=function(e){r.Message.initialize(this,e,0,-1,proto.WidevinePsshData.repeatedFields_,null)},i.inherits(proto.WidevinePsshData,r.Message),i.DEBUG&&!COMPILED&&(proto.WidevinePsshData.displayName="proto.WidevinePsshData"),proto.WidevinePsshData.EntitledKey=function(e){r.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.WidevinePsshData.EntitledKey,r.Message),i.DEBUG&&!COMPILED&&(proto.WidevinePsshData.EntitledKey.displayName="proto.WidevinePsshData.EntitledKey"),proto.WidevinePsshData.repeatedFields_=[2,13,14],r.Message.GENERATE_TO_OBJECT&&(proto.WidevinePsshData.prototype.toObject=function(e){return proto.WidevinePsshData.toObject(e,this)},proto.WidevinePsshData.toObject=function(e,t){var n,i={keyIdsList:t.getKeyIdsList_asB64(),contentId:t.getContentId_asB64(),cryptoPeriodIndex:null==(n=r.Message.getField(t,7))?void 0:n,protectionScheme:null==(n=r.Message.getField(t,9))?void 0:n,cryptoPeriodSeconds:null==(n=r.Message.getField(t,10))?void 0:n,type:r.Message.getFieldWithDefault(t,11,0),keySequence:null==(n=r.Message.getField(t,12))?void 0:n,groupIdsList:t.getGroupIdsList_asB64(),entitledKeysList:r.Message.toObjectList(t.getEntitledKeysList(),proto.WidevinePsshData.EntitledKey.toObject,e),algorithm:null==(n=r.Message.getField(t,1))?void 0:n,provider:null==(n=r.Message.getField(t,3))?void 0:n,trackType:null==(n=r.Message.getField(t,5))?void 0:n,policy:null==(n=r.Message.getField(t,6))?void 0:n,groupedLicense:t.getGroupedLicense_asB64()};return e&&(i.$jspbMessageInstance=t),i}),proto.WidevinePsshData.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.WidevinePsshData;return proto.WidevinePsshData.deserializeBinaryFromReader(n,t)},proto.WidevinePsshData.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var n=t.readBytes();e.addKeyIds(n);break;case 4:var n=t.readBytes();e.setContentId(n);break;case 7:var n=t.readUint32();e.setCryptoPeriodIndex(n);break;case 9:var n=t.readUint32();e.setProtectionScheme(n);break;case 10:var n=t.readUint32();e.setCryptoPeriodSeconds(n);break;case 11:var n=t.readEnum();e.setType(n);break;case 12:var n=t.readUint32();e.setKeySequence(n);break;case 13:var n=t.readBytes();e.addGroupIds(n);break;case 14:var n=new proto.WidevinePsshData.EntitledKey;t.readMessage(n,proto.WidevinePsshData.EntitledKey.deserializeBinaryFromReader),e.addEntitledKeys(n);break;case 1:var n=t.readEnum();e.setAlgorithm(n);break;case 3:var n=t.readString();e.setProvider(n);break;case 5:var n=t.readString();e.setTrackType(n);break;case 6:var n=t.readString();e.setPolicy(n);break;case 8:var n=t.readBytes();e.setGroupedLicense(n);break;default:t.skipField()}}return e},proto.WidevinePsshData.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.WidevinePsshData.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.WidevinePsshData.serializeBinaryToWriter=function(e,t){var n=void 0;n=e.getKeyIdsList_asU8(),n.length>0&&t.writeRepeatedBytes(2,n),n=r.Message.getField(e,4),null!=n&&t.writeBytes(4,n),n=r.Message.getField(e,7),null!=n&&t.writeUint32(7,n),n=r.Message.getField(e,9),null!=n&&t.writeUint32(9,n),n=r.Message.getField(e,10),null!=n&&t.writeUint32(10,n),n=r.Message.getField(e,11),null!=n&&t.writeEnum(11,n),n=r.Message.getField(e,12),null!=n&&t.writeUint32(12,n),n=e.getGroupIdsList_asU8(),n.length>0&&t.writeRepeatedBytes(13,n),n=e.getEntitledKeysList(),n.length>0&&t.writeRepeatedMessage(14,n,proto.WidevinePsshData.EntitledKey.serializeBinaryToWriter),n=r.Message.getField(e,1),null!=n&&t.writeEnum(1,n),n=r.Message.getField(e,3),null!=n&&t.writeString(3,n),n=r.Message.getField(e,5),null!=n&&t.writeString(5,n),n=r.Message.getField(e,6),null!=n&&t.writeString(6,n),null!=(n=r.Message.getField(e,8))&&t.writeBytes(8,n)},proto.WidevinePsshData.Type={SINGLE:0,ENTITLEMENT:1,ENTITLED_KEY:2},proto.WidevinePsshData.Algorithm={UNENCRYPTED:0,AESCTR:1},r.Message.GENERATE_TO_OBJECT&&(proto.WidevinePsshData.EntitledKey.prototype.toObject=function(e){return proto.WidevinePsshData.EntitledKey.toObject(e,this)},proto.WidevinePsshData.EntitledKey.toObject=function(e,t){var n={entitlementKeyId:t.getEntitlementKeyId_asB64(),keyId:t.getKeyId_asB64(),key:t.getKey_asB64(),iv:t.getIv_asB64(),entitlementKeySizeBytes:r.Message.getFieldWithDefault(t,5,32)};return e&&(n.$jspbMessageInstance=t),n}),proto.WidevinePsshData.EntitledKey.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.WidevinePsshData.EntitledKey;return proto.WidevinePsshData.EntitledKey.deserializeBinaryFromReader(n,t)},proto.WidevinePsshData.EntitledKey.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var n=t.readBytes();e.setEntitlementKeyId(n);break;case 2:var n=t.readBytes();e.setKeyId(n);break;case 3:var n=t.readBytes();e.setKey(n);break;case 4:var n=t.readBytes();e.setIv(n);break;case 5:var n=t.readUint32();e.setEntitlementKeySizeBytes(n);break;default:t.skipField()}}return e},proto.WidevinePsshData.EntitledKey.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.WidevinePsshData.EntitledKey.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.WidevinePsshData.EntitledKey.serializeBinaryToWriter=function(e,t){var n=void 0;n=r.Message.getField(e,1),null!=n&&t.writeBytes(1,n),n=r.Message.getField(e,2),null!=n&&t.writeBytes(2,n),n=r.Message.getField(e,3),null!=n&&t.writeBytes(3,n),n=r.Message.getField(e,4),null!=n&&t.writeBytes(4,n),null!=(n=r.Message.getField(e,5))&&t.writeUint32(5,n)},proto.WidevinePsshData.EntitledKey.prototype.getEntitlementKeyId=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.WidevinePsshData.EntitledKey.prototype.getEntitlementKeyId_asB64=function(){return r.Message.bytesAsB64(this.getEntitlementKeyId())},proto.WidevinePsshData.EntitledKey.prototype.getEntitlementKeyId_asU8=function(){return r.Message.bytesAsU8(this.getEntitlementKeyId())},proto.WidevinePsshData.EntitledKey.prototype.setEntitlementKeyId=function(e){r.Message.setField(this,1,e)},proto.WidevinePsshData.EntitledKey.prototype.clearEntitlementKeyId=function(){r.Message.setField(this,1,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasEntitlementKeyId=function(){return null!=r.Message.getField(this,1)},proto.WidevinePsshData.EntitledKey.prototype.getKeyId=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.WidevinePsshData.EntitledKey.prototype.getKeyId_asB64=function(){return r.Message.bytesAsB64(this.getKeyId())},proto.WidevinePsshData.EntitledKey.prototype.getKeyId_asU8=function(){return r.Message.bytesAsU8(this.getKeyId())},proto.WidevinePsshData.EntitledKey.prototype.setKeyId=function(e){r.Message.setField(this,2,e)},proto.WidevinePsshData.EntitledKey.prototype.clearKeyId=function(){r.Message.setField(this,2,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasKeyId=function(){return null!=r.Message.getField(this,2)},proto.WidevinePsshData.EntitledKey.prototype.getKey=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.WidevinePsshData.EntitledKey.prototype.getKey_asB64=function(){return r.Message.bytesAsB64(this.getKey())},proto.WidevinePsshData.EntitledKey.prototype.getKey_asU8=function(){return r.Message.bytesAsU8(this.getKey())},proto.WidevinePsshData.EntitledKey.prototype.setKey=function(e){r.Message.setField(this,3,e)},proto.WidevinePsshData.EntitledKey.prototype.clearKey=function(){r.Message.setField(this,3,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasKey=function(){return null!=r.Message.getField(this,3)},proto.WidevinePsshData.EntitledKey.prototype.getIv=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.WidevinePsshData.EntitledKey.prototype.getIv_asB64=function(){return r.Message.bytesAsB64(this.getIv())},proto.WidevinePsshData.EntitledKey.prototype.getIv_asU8=function(){return r.Message.bytesAsU8(this.getIv())},proto.WidevinePsshData.EntitledKey.prototype.setIv=function(e){r.Message.setField(this,4,e)},proto.WidevinePsshData.EntitledKey.prototype.clearIv=function(){r.Message.setField(this,4,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasIv=function(){return null!=r.Message.getField(this,4)},proto.WidevinePsshData.EntitledKey.prototype.getEntitlementKeySizeBytes=function(){return r.Message.getFieldWithDefault(this,5,32)},proto.WidevinePsshData.EntitledKey.prototype.setEntitlementKeySizeBytes=function(e){r.Message.setField(this,5,e)},proto.WidevinePsshData.EntitledKey.prototype.clearEntitlementKeySizeBytes=function(){r.Message.setField(this,5,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasEntitlementKeySizeBytes=function(){return null!=r.Message.getField(this,5)},proto.WidevinePsshData.prototype.getKeyIdsList=function(){return r.Message.getRepeatedField(this,2)},proto.WidevinePsshData.prototype.getKeyIdsList_asB64=function(){return r.Message.bytesListAsB64(this.getKeyIdsList())},proto.WidevinePsshData.prototype.getKeyIdsList_asU8=function(){return r.Message.bytesListAsU8(this.getKeyIdsList())},proto.WidevinePsshData.prototype.setKeyIdsList=function(e){r.Message.setField(this,2,e||[])},proto.WidevinePsshData.prototype.addKeyIds=function(e,t){r.Message.addToRepeatedField(this,2,e,t)},proto.WidevinePsshData.prototype.clearKeyIdsList=function(){this.setKeyIdsList([])},proto.WidevinePsshData.prototype.getContentId=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.WidevinePsshData.prototype.getContentId_asB64=function(){return r.Message.bytesAsB64(this.getContentId())},proto.WidevinePsshData.prototype.getContentId_asU8=function(){return r.Message.bytesAsU8(this.getContentId())},proto.WidevinePsshData.prototype.setContentId=function(e){r.Message.setField(this,4,e)},proto.WidevinePsshData.prototype.clearContentId=function(){r.Message.setField(this,4,void 0)},proto.WidevinePsshData.prototype.hasContentId=function(){return null!=r.Message.getField(this,4)},proto.WidevinePsshData.prototype.getCryptoPeriodIndex=function(){return r.Message.getFieldWithDefault(this,7,0)},proto.WidevinePsshData.prototype.setCryptoPeriodIndex=function(e){r.Message.setField(this,7,e)},proto.WidevinePsshData.prototype.clearCryptoPeriodIndex=function(){r.Message.setField(this,7,void 0)},proto.WidevinePsshData.prototype.hasCryptoPeriodIndex=function(){return null!=r.Message.getField(this,7)},proto.WidevinePsshData.prototype.getProtectionScheme=function(){return r.Message.getFieldWithDefault(this,9,0)},proto.WidevinePsshData.prototype.setProtectionScheme=function(e){r.Message.setField(this,9,e)},proto.WidevinePsshData.prototype.clearProtectionScheme=function(){r.Message.setField(this,9,void 0)},proto.WidevinePsshData.prototype.hasProtectionScheme=function(){return null!=r.Message.getField(this,9)},proto.WidevinePsshData.prototype.getCryptoPeriodSeconds=function(){return r.Message.getFieldWithDefault(this,10,0)},proto.WidevinePsshData.prototype.setCryptoPeriodSeconds=function(e){r.Message.setField(this,10,e)},proto.WidevinePsshData.prototype.clearCryptoPeriodSeconds=function(){r.Message.setField(this,10,void 0)},proto.WidevinePsshData.prototype.hasCryptoPeriodSeconds=function(){return null!=r.Message.getField(this,10)},proto.WidevinePsshData.prototype.getType=function(){return r.Message.getFieldWithDefault(this,11,0)},proto.WidevinePsshData.prototype.setType=function(e){r.Message.setField(this,11,e)},proto.WidevinePsshData.prototype.clearType=function(){r.Message.setField(this,11,void 0)},proto.WidevinePsshData.prototype.hasType=function(){return null!=r.Message.getField(this,11)},proto.WidevinePsshData.prototype.getKeySequence=function(){return r.Message.getFieldWithDefault(this,12,0)},proto.WidevinePsshData.prototype.setKeySequence=function(e){r.Message.setField(this,12,e)},proto.WidevinePsshData.prototype.clearKeySequence=function(){r.Message.setField(this,12,void 0)},proto.WidevinePsshData.prototype.hasKeySequence=function(){return null!=r.Message.getField(this,12)},proto.WidevinePsshData.prototype.getGroupIdsList=function(){return r.Message.getRepeatedField(this,13)},proto.WidevinePsshData.prototype.getGroupIdsList_asB64=function(){return r.Message.bytesListAsB64(this.getGroupIdsList())},proto.WidevinePsshData.prototype.getGroupIdsList_asU8=function(){return r.Message.bytesListAsU8(this.getGroupIdsList())},proto.WidevinePsshData.prototype.setGroupIdsList=function(e){r.Message.setField(this,13,e||[])},proto.WidevinePsshData.prototype.addGroupIds=function(e,t){r.Message.addToRepeatedField(this,13,e,t)},proto.WidevinePsshData.prototype.clearGroupIdsList=function(){this.setGroupIdsList([])},proto.WidevinePsshData.prototype.getEntitledKeysList=function(){return r.Message.getRepeatedWrapperField(this,proto.WidevinePsshData.EntitledKey,14)},proto.WidevinePsshData.prototype.setEntitledKeysList=function(e){r.Message.setRepeatedWrapperField(this,14,e)},proto.WidevinePsshData.prototype.addEntitledKeys=function(e,t){return r.Message.addToRepeatedWrapperField(this,14,e,proto.WidevinePsshData.EntitledKey,t)},proto.WidevinePsshData.prototype.clearEntitledKeysList=function(){this.setEntitledKeysList([])},proto.WidevinePsshData.prototype.getAlgorithm=function(){return r.Message.getFieldWithDefault(this,1,0)},proto.WidevinePsshData.prototype.setAlgorithm=function(e){r.Message.setField(this,1,e)},proto.WidevinePsshData.prototype.clearAlgorithm=function(){r.Message.setField(this,1,void 0)},proto.WidevinePsshData.prototype.hasAlgorithm=function(){return null!=r.Message.getField(this,1)},proto.WidevinePsshData.prototype.getProvider=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.WidevinePsshData.prototype.setProvider=function(e){r.Message.setField(this,3,e)},proto.WidevinePsshData.prototype.clearProvider=function(){r.Message.setField(this,3,void 0)},proto.WidevinePsshData.prototype.hasProvider=function(){return null!=r.Message.getField(this,3)},proto.WidevinePsshData.prototype.getTrackType=function(){return r.Message.getFieldWithDefault(this,5,"")},proto.WidevinePsshData.prototype.setTrackType=function(e){r.Message.setField(this,5,e)},proto.WidevinePsshData.prototype.clearTrackType=function(){r.Message.setField(this,5,void 0)},proto.WidevinePsshData.prototype.hasTrackType=function(){return null!=r.Message.getField(this,5)},proto.WidevinePsshData.prototype.getPolicy=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.WidevinePsshData.prototype.setPolicy=function(e){r.Message.setField(this,6,e)},proto.WidevinePsshData.prototype.clearPolicy=function(){r.Message.setField(this,6,void 0)},proto.WidevinePsshData.prototype.hasPolicy=function(){return null!=r.Message.getField(this,6)},proto.WidevinePsshData.prototype.getGroupedLicense=function(){return r.Message.getFieldWithDefault(this,8,"")},proto.WidevinePsshData.prototype.getGroupedLicense_asB64=function(){return r.Message.bytesAsB64(this.getGroupedLicense())},proto.WidevinePsshData.prototype.getGroupedLicense_asU8=function(){return r.Message.bytesAsU8(this.getGroupedLicense())},proto.WidevinePsshData.prototype.setGroupedLicense=function(e){r.Message.setField(this,8,e)},proto.WidevinePsshData.prototype.clearGroupedLicense=function(){r.Message.setField(this,8,void 0)},proto.WidevinePsshData.prototype.hasGroupedLicense=function(){return null!=r.Message.getField(this,8)},i.object.extend(t,proto)},function(module,exports,__webpack_require__){(function(global,Buffer){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{i:i,v:o}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,n,r){if(t){for(n=$jscomp.global,e=e.split("."),r=0;r<e.length-1;r++){var i=e[r];i in n||(n[i]={}),n=n[i]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.findIndex",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).i}},"es6","es3"),$jscomp.checkStringArgs=function(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.startsWith",function(e){return e||function(e,t){var n=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var r=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var o=0;o<i&&t<r;)if(n[t++]!=e[o++])return!1;return o>=i}},"es6","es3"),$jscomp.polyfill("String.prototype.endsWith",function(e){return e||function(e,t){var n=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var r=e.length;0<r&&0<t;)if(n[--t]!=e[--r])return!1;return 0>=r}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(e){return e||function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(e){return void 0!==e},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.exportPath_=function(e,t,n){e=e.split("."),n=n||goog.global,e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)!e.length&&goog.isDef(t)?n[r]=t:n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}},goog.define=function(e,t){if(!COMPILED){var n=goog.global.CLOSURE_UNCOMPILED_DEFINES,r=goog.global.CLOSURE_DEFINES;n&&void 0===n.nodeType&&Object.prototype.hasOwnProperty.call(n,e)?t=n[e]:r&&void 0===r.nodeType&&Object.prototype.hasOwnProperty.call(r,e)&&(t=r[e])}return goog.exportPath_(e,t),t},goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var n=e;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(e,t)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e].exports;if(!goog.implicitNamespaces_[e])return e=goog.getObjectByName(e),null!=e?e:null}return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&("function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath())},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(e in goog.loadedModules_)throw Error('Module with namespace "'+e+'" already exists.')}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.module.declareNamespace=goog.declareModuleId,goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var n=0;n<e.length;n++)if(t=t[e[n]],!goog.isDefAndNotNull(t))return null;return t},goog.globalize=function(e,t){t=t||goog.global;for(var n in e)t[n]=e[n]},goog.addDependency=function(e,t,n,r){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(e,t,n,r)},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(e),goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(e)}finally{goog.moduleLoaderState_=t}}return null}},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(e))var n=e.call(void 0,{});else{if(!goog.isString(e))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),n=goog.loadModuleFromSource_.call(void 0,e)}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof n&&null!=n&&Object.seal(n),goog.loadedModules_[r]={exports:n,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(a,b,c){var d=goog.global.$jscomp;d||(goog.global.$jscomp=d={});var e=d.transpile;if(!e){var f=goog.basePath+goog.TRANSPILER,g=goog.loadFileSync_(f);if(g){if(function(){eval(g+"\n//# sourceURL="+f)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,d=goog.global.$jscomp,e=d.transpile}}return e||(e=d.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}),e(a,b,c)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();t="array"==t?[]:{};for(var n in e)t[n]=goog.cloneObject(e[n]);return t}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,n=t.createElement("SCRIPT");n.type="text/javascript",n.defer=!1,n.appendChild(t.createTextNode(e)),t.head.appendChild(n),t.head.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var n=function(e){return goog.cssNameMapping_[e]||e},r=function(e){e=e.split("-");for(var t=[],r=0;r<e.length;r++)t.push(n(e[r]));return t.join("-")};return r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:r:function(e){return e},e=t?e+"-"+r(t):r(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}},goog.base=function(e,t,n){var r=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(void 0!==r.superClass_){for(var i=Array(arguments.length-1),o=1;o<arguments.length;o++)i[o-1]=arguments[o];return r.superClass_.constructor.apply(e,i)}if("string"!=typeof t&&"symbol"!=typeof t)throw Error("method names provided to goog.base must be a string or a symbol");for(i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];o=!1;for(var a=e.constructor;a;a=a.superClass_&&a.superClass_.constructor)if(a.prototype[t]===r)o=!0;else if(o)return a.prototype[t].apply(e,i);if(e[t]===r)return e.constructor.prototype[t].apply(e,i);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var n=t.constructor,r=t.statics;return n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),n=goog.defineClass.createSealingConstructor_(n,e),e&&goog.inherits(n,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(n.prototype,t),null!=r&&(r instanceof Function?r(n):goog.defineClass.applyProperties_(n,r)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var n=!goog.defineClass.isUnsealable_(t),r=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===r&&n&&Object.seal instanceof Function&&Object.seal(t),t};return r},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.isDocumentLoading_=function(){var e=goog.global.document;return e.attachEvent?"complete"!=e.readyState:"loading"==e.readyState},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)&&goog.isString(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var e=goog.global.document,t=e.currentScript;for(e=t?[t]:e.getElementsByTagName("SCRIPT"),t=e.length-1;0<=t;--t){var n=e[t].src,r=n.lastIndexOf("?");if(r=-1==r?n.length:r,"base.js"==n.substr(r-7,7)){goog.basePath=n.substr(0,r-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null,this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(t,n){e?d[t]=!0:n()?(c=t,d[t]=!1):e=d[t]=!0}function b(a){try{return!!eval(a)}catch(e){return!1}}var c="es3",d={es3:!1},e=!1,f=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",function(){return b("[1,].length==1")}),a("es6",function(){return!f.match(/Edge\/(\d+)(\.\d)*/i)&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')}),a("es6-impl",function(){return!0}),a("es7",function(){return b("2 ** 2 == 4")}),a("es8",function(){return b("async () => 1, true")}),a("es9",function(){return b("({...rest} = {}), true")}),a("es_next",function(){return!1}),{target:c,map:d}},goog.Transpiler.prototype.needsTranspile=function(e,t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!this.requiresTranspilation_){var n=this.createRequiresTranspilation_();this.requiresTranspilation_=n.map,this.transpilationTarget_=this.transpilationTarget_||n.target}if(e in this.requiresTranspilation_)return!!this.requiresTranspilation_[e]||!(!goog.inHtmlDocument_()||"es6"!=t||"noModule"in goog.global.document.createElement("script"));throw Error("Unknown language mode: "+e)},goog.Transpiler.prototype.transpile=function(e,t){return goog.transpile_(e,t,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={},this.idToPath_={},this.written_={},this.loadingDeps_=[],this.depsToLoad_=[],this.paused_=!1,this.factory_=new goog.DependencyFactory(goog.transpiler_),this.deferredCallbacks_={},this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(e,t){function n(){r&&(goog.global.setTimeout(r,0),r=null)}var r=t;if(e.length){t=[];for(var i=0;i<e.length;i++){var o=this.getPathFromDeps_(e[i]);if(!o)throw Error("Unregonized namespace: "+e[i]);t.push(this.dependencies_[o])}o=goog.require;var a=0;for(i=0;i<e.length;i++)o(e[i]),t[i].onLoad(function(){++a==e.length&&n()})}else n()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1)),this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(e,t){(e=this.getPathFromDeps_(e))&&(t||this.areDepsLoaded_(this.dependencies_[e].requires))&&(t=this.deferredCallbacks_[e])&&(delete this.deferredCallbacks_[e],t())},goog.DebugLoader_.prototype.setDependencyFactory=function(e){this.factory_=e},goog.DebugLoader_.prototype.load_=function(e){if(!this.getPathFromDeps_(e))throw e="goog.require could not find: "+e,goog.logToConsole_(e),Error(e);var t=this,n=[],r=function(e){var i=t.getPathFromDeps_(e);if(!i)throw Error("Bad dependency path or symbol: "+e);if(!t.written_[i]){for(t.written_[i]=!0,e=t.dependencies_[i],i=0;i<e.requires.length;i++)goog.isProvided_(e.requires[i])||r(e.requires[i]);n.push(e)}};r(e),e=!!this.depsToLoad_.length,this.depsToLoad_=this.depsToLoad_.concat(n),this.paused_||e||this.loadDeps_()},goog.DebugLoader_.prototype.loadDeps_=function(){for(var e=this,t=this.paused_;this.depsToLoad_.length&&!t;)!function(){var n=!1,r=e.depsToLoad_.shift(),i=!1;e.loading_(r);var o={pause:function(){if(n)throw Error("Cannot call pause after the call to load.");t=!0},resume:function(){n?e.resume_():t=!1},loaded:function(){if(i)throw Error("Double call to loaded.");i=!0,e.loaded_(r)},pending:function(){for(var t=[],n=0;n<e.loadingDeps_.length;n++)t.push(e.loadingDeps_[n]);return t},setModuleState:function(e){goog.moduleLoaderState_={type:e,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(e,t,n){n&&(goog.loadedModules_[n]={exports:t,type:goog.ModuleType.ES6,moduleId:n||""})},registerGoogModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.GOOG,moduleId:e}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(t){if(n)throw Error("Cannot register with defer after the call to load.");e.defer_(r,t)},areDepsLoaded:function(){return e.areDepsLoaded_(r.requires)}};try{r.load(o)}finally{n=!0}}();t&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(e){this.loadingDeps_.push(e)},goog.DebugLoader_.prototype.loaded_=function(e){for(var t=0;t<this.loadingDeps_.length;t++)if(this.loadingDeps_[t]==e){this.loadingDeps_.splice(t,1);break}for(t=0;t<this.deferredQueue_.length;t++)if(this.deferredQueue_[t]==e.path){this.deferredQueue_.splice(t,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);e.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(e){for(var t=0;t<e.length;t++){var n=this.getPathFromDeps_(e[t]);if(!n||!(n in this.deferredCallbacks_||goog.isProvided_(e[t])))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=function(e){return e in this.idToPath_?this.idToPath_[e]:e in this.dependencies_?e:null},goog.DebugLoader_.prototype.defer_=function(e,t){this.deferredCallbacks_[e.path]=t,this.deferredQueue_.push(e.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(e,t,n){},goog.LoadController.prototype.setModuleState=function(e){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(e){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(e,t,n,r,i){this.path=e,this.relativePath=t,this.provides=n,this.requires=r,this.loadFlags=i,this.loaded_=!1,this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var e=this.path,t=e.indexOf("://");return 0<=t&&(e=e.substring(t+3),0<=(t=e.indexOf("/"))&&(e=e.substring(t+1))),e},goog.Dependency.prototype.onLoad=function(e){this.loaded_?e():this.loadCallbacks_.push(e)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var e=this.loadCallbacks_;this.loadCallbacks_=[];for(var t=0;t<e.length;t++)e[t]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(e){var t=Math.random().toString(32);return goog.Dependency.callbackMap_[t]=e,t},goog.Dependency.unregisterCallback_=function(e){delete goog.Dependency.callbackMap_[e]},goog.Dependency.callback_=function(e,t){if(!(e in goog.Dependency.callbackMap_))throw Error("Callback key "+e+" does not exist (was base.js loaded more than once?).");for(var n=goog.Dependency.callbackMap_[e],r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);n.apply(void 0,r)},goog.Dependency.prototype.load=function(e){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document;if("complete"==t.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path))return void e.loaded();throw Error('Cannot write "'+this.path+'" after document load')}if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var n=goog.Dependency.registerCallback_(function(t){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=t.readyState||(goog.Dependency.unregisterCallback_(n),e.loaded())}),r=!goog.DebugLoader_.IS_OLD_IE_&&goog.getScriptNonce()?' nonce="'+goog.getScriptNonce()+'"':"";t.write('<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+n+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+r+"><\/script>")}else{var i=t.createElement("script");i.defer=goog.Dependency.defer_,i.async=!1,i.type="text/javascript",(r=goog.getScriptNonce())&&i.setAttribute("nonce",r),goog.DebugLoader_.IS_OLD_IE_?(e.pause(),i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(e.loaded(),e.resume())}):i.onload=function(){i.onload=null,e.loaded()},i.src=this.path,t.head.appendChild(i)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),e.loaded()):e.pause()},goog.Es6ModuleDependency=function(e,t,n,r,i){goog.Dependency.call(this,e,t,n,r,i)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(e){function t(e,t){t?r.write('<script type="module" crossorigin>'+t+"<\/script>"):r.write('<script type="module" crossorigin src="'+e+'"><\/script>')}function n(e,t){var n=r.createElement("script");n.defer=!0,n.async=!1,n.type="module",n.setAttribute("crossorigin",!0);var i=goog.getScriptNonce();i&&n.setAttribute("nonce",i),t?n.textContent=t:n.src=e,r.head.appendChild(n)}if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var r=goog.global.document,i=this;if(goog.isDocumentLoading_()){var o=t;goog.Dependency.defer_=!0}else o=n;var a=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(a),e.setModuleState(goog.ModuleType.ES6)});o(void 0,'goog.Dependency.callback_("'+a+'")'),o(this.path,void 0);var s=goog.Dependency.registerCallback_(function(t){goog.Dependency.unregisterCallback_(s),e.registerEs6ModuleExports(i.path,t,goog.moduleLoaderState_.moduleName)});o(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+s+'", m)');var u=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(u),e.clearModuleState(),e.loaded()});o(void 0,'goog.Dependency.callback_("'+u+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),e.pause()},goog.TransformedDependency=function(e,t,n,r,i){goog.Dependency.call(this,e,t,n,r,i),this.contents_=null,this.lazyFetch_=!(goog.inHtmlDocument_()&&"noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(e){function t(){r.contents_=goog.loadFileSync_(r.path),r.contents_&&(r.contents_=r.transform(r.contents_),r.contents_&&(r.contents_+="\n//# sourceURL="+r.path))}function n(){if(r.lazyFetch_&&t(),r.contents_){i&&e.setModuleState(goog.ModuleType.ES6);try{var n=r.contents_;if(r.contents_=null,goog.globalEval(n),i)var o=goog.moduleLoaderState_.moduleName}finally{i&&e.clearModuleState()}i&&goog.global.$jscomp.require.ensure([r.getPathName()],function(){e.registerEs6ModuleExports(r.path,goog.global.$jscomp.require(r.getPathName()),o)}),e.loaded()}}var r=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)t(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,e.loaded()):e.pause();else{var i=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||t();var o=1<e.pending().length,a=o&&goog.DebugLoader_.IS_OLD_IE_;if(o=goog.Dependency.defer_&&(o||goog.isDocumentLoading_()),a||o)e.defer(function(){n()});else{var s=goog.global.document;if(a=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global,i&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!a){goog.Dependency.defer_=!0,e.pause();var u=s.onreadystatechange;s.onreadystatechange=function(){"interactive"==s.readyState&&(s.onreadystatechange=u,n(),e.resume()),goog.isFunction(u)&&u.apply(void 0,arguments)}}else!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?function(){var e=goog.global.document,t=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(t),n()});e.write('<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+t+'");')+"<\/script>")}():n()}}},goog.TransformedDependency.prototype.transform=function(e){},goog.TranspiledDependency=function(e,t,n,r,i,o){goog.TransformedDependency.call(this,e,t,n,r,i),this.transpiler=o},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(e){return this.transpiler.transpile(e,this.getPathName())},goog.PreTranspiledEs6ModuleDependency=function(e,t,n,r,i){goog.TransformedDependency.call(this,e,t,n,r,i)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(e){return e},goog.GoogModuleDependency=function(e,t,n,r,i,o,a){goog.TransformedDependency.call(this,e,t,n,r,i),this.needsTranspile_=o,this.transpiler_=a},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(e){return this.needsTranspile_&&(e=this.transpiler_.transpile(e,this.getPathName())),goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(e,t,n,r){t=t||[],e=e.replace(/\\/g,"/");var i=goog.normalizePath_(goog.basePath+e);for(r&&"boolean"!=typeof r||(r=r?{module:goog.ModuleType.GOOG}:{}),n=this.factory_.createDependency(i,e,t,n,r,goog.transpiler_.needsTranspile(r.lang||"es3",r.module)),this.dependencies_[i]=n,n=0;n<t.length;n++)this.idToPath_[t[n]]=i;this.idToPath_[e]=i},goog.DependencyFactory=function(e){this.transpiler=e},goog.DependencyFactory.prototype.createDependency=function(e,t,n,r,i,o){return i.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(e,t,n,r,i,o,this.transpiler):o?new goog.TranspiledDependency(e,t,n,r,i,this.transpiler):i.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(e,t,n,r,i):new goog.Es6ModuleDependency(e,t,n,r,i):new goog.Dependency(e,t,n,r,i)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(e){goog.debugLoader_.setDependencyFactory(e)},goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(e,t){goog.debugLoader_.bootstrap(e,t)});var jspb={BinaryConstants:{},ConstBinaryMessage:function(){},BinaryMessage:function(){}};jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,n=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return n.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return n.FIXED64;case t.STRING:case t.MESSAGE:case t.BYTES:return n.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return n.FIXED32;default:return n.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1.401298464324817e-45,jspb.BinaryConstants.FLOAT32_MIN=1.1754943508222875e-38,jspb.BinaryConstants.FLOAT32_MAX=3.4028234663852886e38,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=2.2250738585072014e-308,jspb.BinaryConstants.FLOAT64_MAX=1.7976931348623157e308,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=0x8000000000000000,jspb.BinaryConstants.TWO_TO_64=0x10000000000000000,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){e=e.split("%s");for(var n="",r=e.length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");return n+e[r]},goog.asserts.doAssertFailure_=function(e,t,n,r){var i="Assertion failed";if(n){i+=": "+n;var o=r}else e&&(i+=": "+e,o=t);e=new goog.asserts.AssertionError(""+i,o||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,r){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=!1,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==n?e.length-1:n)}:function(e,t,n){if(n=null==n?e.length-1:n,0>n&&(n=Math.max(0,e.length+n)),goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,n):-1;for(;0<=n;n--)if(n in e&&e[n]===t)return n;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,n){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},goog.array.forEachRight=function(e,t,n){var r=e.length,i=goog.isString(e)?e.split(""):e;for(--r;0<=r;--r)r in i&&t.call(n,i[r],r,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=[],o=0,a=goog.isString(e)?e.split(""):e,s=0;s<r;s++)if(s in a){var u=a[s];t.call(n,u,s,e)&&(i[o++]=u)}return i},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=Array(r),o=goog.isString(e)?e.split(""):e,a=0;a<r;a++)a in o&&(i[a]=t.call(n,o[a],a,e));return i},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,n,r){return goog.asserts.assert(null!=e.length),r&&(t=goog.bind(t,r)),Array.prototype.reduce.call(e,t,n)}:function(e,t,n,r){var i=n;return goog.array.forEach(e,function(n,o){i=t.call(r,i,n,o,e)}),i},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,n,r){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),r&&(t=goog.bind(t,r)),Array.prototype.reduceRight.call(e,t,n)}:function(e,t,n,r){var i=n;return goog.array.forEachRight(e,function(n,o){i=t.call(r,i,n,o,e)}),i},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&t.call(n,i[o],o,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&!t.call(n,i[o],o,e))return!1;return!0},goog.array.count=function(e,t,n){var r=0;return goog.array.forEach(e,function(e,i,o){t.call(n,e,i,o)&&++r},n),r},goog.array.find=function(e,t,n){return t=goog.array.findIndex(e,t,n),0>t?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,n){for(var r=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&t.call(n,i[o],o,e))return o;return-1},goog.array.findRight=function(e,t,n){return t=goog.array.findIndexRight(e,t,n),0>t?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,n){var r=e.length,i=goog.isString(e)?e.split(""):e;for(--r;0<=r;r--)if(r in i&&t.call(n,i[r],r,e))return r;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,n){goog.array.splice(e,n,0,t)},goog.array.insertArrayAt=function(e,t,n){goog.partial(goog.array.splice,e,n,0).apply(null,t)},goog.array.insertBefore=function(e,t,n){var r;2==arguments.length||0>(r=goog.array.indexOf(e,n))?e.push(t):goog.array.insertAt(e,t,r)},goog.array.remove=function(e,t){t=goog.array.indexOf(e,t);var n;return(n=0<=t)&&goog.array.removeAt(e,t),n},goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,n){return 0<=(t=goog.array.findIndex(e,t,n))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(e,t,n){var r=0;return goog.array.forEachRight(e,function(i,o){t.call(n,i,o,e)&&goog.array.removeAt(e,o)&&r++}),r},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(goog.isArrayLike(r)){var i=e.length||0,o=r.length||0;e.length=i+o;for(var a=0;a<o;a++)e[i+a]=r[a]}else e.push(r)}},goog.array.splice=function(e,t,n,r){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,n){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)},goog.array.removeDuplicates=function(e,t,n){t=t||e;var r=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};n=n||r,r={};for(var i=0,o=0;o<e.length;){var a=e[o++],s=n(a);Object.prototype.hasOwnProperty.call(r,s)||(r[s]=!0,t[i++]=a)}t.length=i},goog.array.binarySearch=function(e,t,n){return goog.array.binarySearch_(e,n||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,n){return goog.array.binarySearch_(e,t,!0,void 0,n)},goog.array.binarySearch_=function(e,t,n,r,i){for(var o,a=0,s=e.length;a<s;){var u=a+s>>1,l=n?t.call(i,e[u],u,e):t(r,e[u]);0<l?a=u+1:(s=u,o=!l)}return o?a:~a},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]={index:r,value:e[r]};var i=t||goog.array.defaultCompare;for(goog.array.sort(n,function(e,t){return i(e.value,t.value)||e.index-t.index}),r=0;r<e.length;r++)e[r]=n[r].value},goog.array.sortByKey=function(e,t,n){var r=n||goog.array.defaultCompare;goog.array.sort(e,function(e,n){return r(t(e),t(n))})},goog.array.sortObjectsByKey=function(e,t,n){goog.array.sortByKey(e,function(e){return e[t]},n)},goog.array.isSorted=function(e,t,n){t=t||goog.array.defaultCompare;for(var r=1;r<e.length;r++){var i=t(e[r-1],e[r]);if(0<i||0==i&&n)return!1}return!0},goog.array.equals=function(e,t,n){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var r=e.length;n=n||goog.array.defaultCompareEquality;for(var i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0},goog.array.compare3=function(e,t,n){n=n||goog.array.defaultCompare;for(var r=Math.min(e.length,t.length),i=0;i<r;i++){var o=n(e[i],t[i]);if(0!=o)return o}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,n){return 0>(n=goog.array.binarySearch(e,t,n))&&(goog.array.insertAt(e,t,-(n+1)),!0)},goog.array.binaryRemove=function(e,t,n){return 0<=(t=goog.array.binarySearch(e,t,n))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,n){for(var r={},i=0;i<e.length;i++){var o=e[i],a=t.call(n,o,i,e);goog.isDef(a)&&(r[a]||(r[a]=[])).push(o)}return r},goog.array.toObject=function(e,t,n){var r={};return goog.array.forEach(e,function(i,o){r[t.call(n,i,o,e)]=i}),r},goog.array.range=function(e,t,n){var r=[],i=0,o=e;if(n=n||1,void 0!==t&&(i=e,o=t),0>n*(o-i))return[];if(0<n)for(e=i;e<o;e+=n)r.push(e);else for(e=i;e>o;e+=n)r.push(e);return r},goog.array.repeat=function(e,t){for(var n=[],r=0;r<t;r++)n[r]=e;return n},goog.array.flatten=function(e){for(var t=[],n=0;n<arguments.length;n++){var r=arguments[n];if(goog.isArray(r))for(var i=0;i<r.length;i+=8192){var o=goog.array.slice(r,i,i+8192);o=goog.array.flatten.apply(null,o);for(var a=0;a<o.length;a++)t.push(o[a])}else t.push(r)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(t%=e.length,0<t?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,n){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=n&&n<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,n,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],n=arguments[0].length,r=1;r<arguments.length;r++)arguments[r].length<n&&(n=arguments[r].length);for(r=0;r<n;r++){for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o][r]);t.push(i)}return t},goog.array.shuffle=function(e,t){t=t||Math.random;for(var n=e.length-1;0<n;n--){var r=Math.floor(t()*(n+1)),i=e[n];e[n]=e[r],e[r]=i}},goog.array.copyByIndex=function(e,t){var n=[];return goog.array.forEach(t,function(t){n.push(e[t])}),n},goog.array.concatMap=function(e,t,n){return goog.array.concat.apply([],goog.array.map(e,t,n))},goog.crypt={},goog.crypt.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);255<i&&(t[n++]=255&i,i>>=8),t[n++]=i}return t},goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",n=0;n<e.length;n+=8192){var r=goog.array.slice(e,n,n+8192);t+=String.fromCharCode.apply(null,r)}return t},goog.crypt.byteArrayToHex=function(e,t){return goog.array.map(e,function(e){return e=e.toString(16),1<e.length?e:"0"+e}).join(t||"")},goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substring(n,n+2),16));return t},goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);128>i?t[n++]=i:(2048>i?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(128>i)t[r++]=String.fromCharCode(i);else if(191<i&&224>i){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=e[n++];var a=e[n++],s=e[n++];i=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536,t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else o=e[n++],a=e[n++],t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return t.join("")},goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var n=[],r=0;r<e.length;r++)n.push(e[r]^t[r]);return n},goog.string={},goog.string.internal={},goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.internal.endsWith=function(e,t){var n=e.length-t.length;return 0<=n&&e.indexOf(t,n)==n},goog.string.internal.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.internal.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.internal.caseInsensitiveCompare=function(e,t){return e=String(e).toLowerCase(),t=String(t).toLowerCase(),e<t?-1:e==t?0:1},goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.internal.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.internal.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.internal.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.internal.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.internal.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())},goog.string.internal.compareVersions=function(e,t){var n=0;e=goog.string.internal.trim(String(e)).split("."),t=goog.string.internal.trim(String(t)).split(".");for(var r=Math.max(e.length,t.length),i=0;0==n&&i<r;i++){var o=e[i]||"",a=t[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;n=0==o[1].length?0:parseInt(o[1],10);var s=0==a[1].length?0:parseInt(a[1],10);n=goog.string.internal.compareElements_(n,s)||goog.string.internal.compareElements_(0==o[2].length,0==a[2].length)||goog.string.internal.compareElements_(o[2],a[2]),o=o[3],a=a[3]}while(0==n)}return n},goog.string.internal.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"�">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(e,t,n){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var r=e.toLowerCase().match(n),i=t.toLowerCase().match(n),o=Math.min(r.length,i.length),a=0;a<o;a++){n=r[a];var s=i[a];if(n!=s)return e=parseInt(n,10),!isNaN(e)&&(t=parseInt(s,10),!isNaN(t)&&e-t)?e-t:n<s?-1:1}return r.length!=i.length?r.length-i.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(e,t){return e=goog.string.internal.htmlEscape(e,t),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},r=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var i=n[e];return i||("#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(i=String.fromCharCode(t))),i||(r.innerHTML=e+" ",i=r.firstChild.nodeValue.slice(0,-1)),n[e]=i)})},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var n=t.length,r=0;r<n;r++){var i=1==n?t:t.charAt(r);if(e.charAt(0)==i&&e.charAt(e.length-1)==i)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,n){return n&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),n&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,n,r){if(n&&(e=goog.string.unescapeEntities(e)),r&&e.length>t){r>t&&(r=t);var i=e.length-r;e=e.substring(0,t-r)+"..."+e.substring(i)}else e.length>t&&(r=Math.floor(t/2),i=e.length-r,e=e.substring(0,r+t%2)+"..."+e.substring(i));return n&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],n=0;n<e.length;n++){var r=e.charAt(n),i=r.charCodeAt(0);t[n+1]=goog.string.specialEscapeChars_[r]||(31<i&&127>i?r:goog.string.escapeChar(r))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=goog.string.escapeChar(e.charAt(n));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e.charCodeAt(0);if(31<t&&127>t)var n=e;else 256>t?(n="\\x",(16>t||256<t)&&(n+="0")):(n="\\u",4096>t&&(n+="0")),n+=t.toString(16).toUpperCase();return goog.string.jsEscapeCache_[e]=n},goog.string.contains=goog.string.internal.contains;goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,n){var r=e;return 0<=t&&t<e.length&&0<n&&(r=e.substr(0,t)+e.substr(t+n,e.length-t-n)),r},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,"")},goog.string.replaceAll=function(e,t,n){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,n.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,n){return e=goog.isDef(n)?e.toFixed(n):String(e),n=e.indexOf("."),-1==n&&(n=e.length),goog.string.repeat("0",Math.max(0,t-n))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(e){for(var t=0,n=0;n<e.length;++n)t=31*t+e.charCodeAt(n)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){return t=goog.isString(t)?goog.string.regExpEscape(t):"\\s",e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),function(e,t,n){return t+n.toUpperCase()})},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),goog.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,n){e=e.split(t);for(var r=[];0<n&&e.length;)r.push(e.shift()),n--;return e.length&&r.push(e.join(t)),r},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var n=-1,r=0;r<t.length;r++)if(""!=t[r]){var i=e.lastIndexOf(t[r]);i>n&&(n=i)}return-1==n?e:e.slice(n+1)},goog.string.editDistance=function(e,t){var n=[],r=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var i=0;i<t.length+1;i++)n[i]=i;for(i=0;i<e.length;i++){r[0]=i+1;for(var o=0;o<t.length;o++)r[o+1]=Math.min(r[o]+1,n[o+1]+1,n[o]+Number(e[i]!=t[o]));for(o=0;o<n.length;o++)n[o]=r[o]}return r[t.length]},goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,n=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,r=[];t=n.exec(e);)r.push([t[1],t[2],t[3]||void 0]);return r},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.isGo2Phone=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?(t=/Windows (?:NT|Phone) ([0-9.]+)/,t=(e=t.exec(e))?e[1]:"0.0"):goog.labs.userAgent.platform.isIos()?(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,t=(e=t.exec(e))&&e[1].replace(/_/g,".")):goog.labs.userAgent.platform.isMacintosh()?(t=/Mac OS X ([0-9_.]+)/,t=(e=t.exec(e))?e[1].replace(/_/g,"."):"10"):goog.labs.userAgent.platform.isAndroid()?(t=/Android\s+([^\);]+)(\)|;)/,t=(e=t.exec(e))&&e[1]):goog.labs.userAgent.platform.isChromeOS()&&(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,t=(e=t.exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t},goog.object.forEach=function(e,t,n){for(var r in e)t.call(n,e[r],r,e)},goog.object.filter=function(e,t,n){var r,i={};for(r in e)t.call(n,e[r],r,e)&&(i[r]=e[r]);return i},goog.object.map=function(e,t,n){var r,i={};for(r in e)i[r]=t.call(n,e[r],r,e);return i},goog.object.some=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return!0;return!1},goog.object.every=function(e,t,n){for(var r in e)if(!t.call(n,e[r],r,e))return!1;return!0},goog.object.getCount=function(e){var t,n=0;for(t in e)n++;return n},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,n=[],r=0;for(t in e)n[r++]=e[t];return n},goog.object.getKeys=function(e){var t,n=[],r=0;for(t in e)n[r++]=t;return n},goog.object.getValueByKeys=function(e,t){var n=goog.isArrayLike(t),r=n?t:arguments;for(n=n?0:1;n<r.length;n++){if(null==e)return;e=e[r[n]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},goog.object.findKey=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},goog.object.findValue=function(e,t,n){return(t=goog.object.findKey(e,t,n))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var n;return(n=t in e)&&delete e[t],n},goog.object.add=function(e,t,n){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,n)},goog.object.get=function(e,t,n){return null!==e&&t in e?e[t]:n},goog.object.set=function(e,t,n){e[t]=n},goog.object.setIfUndefined=function(e,t,n){return t in e?e[t]:e[t]=n},goog.object.setWithReturnValueIfNotSet=function(e,t,n){return t in e?e[t]:(n=n(),e[t]=n)},goog.object.equals=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(n in t)if(!(n in e))return!1;return!0},goog.object.clone=function(e){var t,n={};for(t in e)n[t]=e[t];return n},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();t="array"==t?[]:{};for(var n in e)t[n]=goog.object.unsafeClone(e[n]);return t}return e},goog.object.transpose=function(e){var t,n={};for(t in e)n[e[t]]=t;return n},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var o=0;o<goog.object.PROTOTYPE_FIELDS_.length;o++)n=goog.object.PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var n={},r=0;r<t;r+=2)n[arguments[r]]=arguments[r+1];return n},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var n={},r=0;r<t;r++)n[arguments[r]]=!0;return n},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,n){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var r={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||n);){for(var i=Object.getOwnPropertyNames(e),o=0;o<i.length;o++)r[i[o]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(r)},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdge_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,r),n[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var n={};goog.array.forEach(t,function(e){n[e[0]]=e[1]});var r=goog.partial(goog.object.containsKey,n);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var n=/MSIE +([\d\.]+)/.exec(e);if(n&&n[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==n[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=n[1];return t},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,n,r){return r=r?r(t):t,Object.prototype.hasOwnProperty.call(e,r)?e[r]:e[r]=n(t)},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e);var t=goog.labs.userAgent.engine.getEngineTuple_(e);if(t)return"Gecko"==t[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):t[1];e=e[0];var n;if(e&&(n=e[2])&&(n=/Trident\/([^\s;]+)/.exec(n)))return n[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var n=e[t];if("Edge"==n[0])return n}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,function(e){return t==e[0]}))&&e[1]||""},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.ASSUME_GO2PHONE=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.GO2PHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_GO2PHONE:goog.labs.userAgent.platform.isGo2Phone(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e)?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){var e=goog.global.document,t=goog.userAgent.getDocumentMode_();if(e&&goog.userAgent.IE)return t||("CSS1Compat"==e.compatMode?parseInt(goog.userAgent.VERSION,10):5)}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox();goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.byteToCharMap_=null,goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.byteToCharMapWebSafe_=null,goog.crypt.base64.ENCODED_VALS_BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.ENCODED_VALS_BASE+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.ENCODED_VALS_BASE+"-_.",goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa,goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob,goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter"),goog.crypt.base64.init_(),t=t?goog.crypt.base64.byteToCharMapWebSafe_:goog.crypt.base64.byteToCharMap_;for(var n=[],r=0;r<e.length;r+=3){var i=e[r],o=r+1<e.length,a=o?e[r+1]:0,s=r+2<e.length,u=s?e[r+2]:0,l=i>>2;i=(3&i)<<4|a>>4,a=(15&a)<<2|u>>6,u&=63,s||(u=64,o||(a=64)),n.push(t[l],t[i],t[a],t[u])}return n.join("")},goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)},goog.crypt.base64.decodeString=function(e,t){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var n="";return goog.crypt.base64.decodeStringInternal_(e,function(e){n+=String.fromCharCode(e)}),n},goog.crypt.base64.decodeStringToByteArray=function(e,t){var n=[];return goog.crypt.base64.decodeStringInternal_(e,function(e){n.push(e)}),n},goog.crypt.base64.decodeStringToUint8Array=function(e){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=e.length,n=0;"="===e[t-2]?n=2:"="===e[t-1]&&(n=1);var r=new Uint8Array(Math.ceil(3*t/4)-n),i=0;return goog.crypt.base64.decodeStringInternal_(e,function(e){r[i++]=e}),r.subarray(0,i)},goog.crypt.base64.decodeStringInternal_=function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=goog.crypt.base64.charToByteMap_[n];if(null!=i)return i;if(!goog.string.isEmptyOrWhitespace(n))throw Error("Unknown base64 encoding at char: "+n)}return t}goog.crypt.base64.init_();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.byteToCharMap_){goog.crypt.base64.byteToCharMap_={},goog.crypt.base64.charToByteMap_={},goog.crypt.base64.byteToCharMapWebSafe_={};for(var e=0;e<goog.crypt.base64.ENCODED_VALS.length;e++)goog.crypt.base64.byteToCharMap_[e]=goog.crypt.base64.ENCODED_VALS.charAt(e),goog.crypt.base64.charToByteMap_[goog.crypt.base64.byteToCharMap_[e]]=e,goog.crypt.base64.byteToCharMapWebSafe_[e]=goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e),e>=goog.crypt.base64.ENCODED_VALS_BASE.length&&(goog.crypt.base64.charToByteMap_[goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e)]=e)}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=t,jspb.utils.split64High=e},jspb.utils.splitInt64=function(e){var t=0>e;e=Math.abs(e);var n=e>>>0;e=Math.floor((e-n)/jspb.BinaryConstants.TWO_TO_32),e>>>=0,t&&(e=~e>>>0,4294967295<(n=1+(~n>>>0))&&(n=0,4294967295<++e&&(e=0))),jspb.utils.split64Low=n,jspb.utils.split64High=e},jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e),jspb.utils.splitUint64(e),e=jspb.utils.split64Low;var n=jspb.utils.split64High;t&&(0==e?0==n?n=e=4294967295:(n--,e=4294967295):e--),jspb.utils.split64Low=e,jspb.utils.split64High=n},jspb.utils.splitFloat32=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(e))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(e>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|2139095040)>>>0;else if(e<jspb.BinaryConstants.FLOAT32_MIN)e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|e)>>>0;else{var n=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-n),e=8388607&Math.round(e*jspb.BinaryConstants.TWO_TO_23),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|n+127<<23|e)>>>0}},jspb.utils.splitFloat64=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){var n=e/Math.pow(2,-1074);e=n/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(t<<31|e)>>>0,jspb.utils.split64Low=n>>>0}else{var r=Math.floor(Math.log(e)/Math.LN2);1024==r&&(r=1023),n=e*Math.pow(2,-r),e=n*jspb.BinaryConstants.TWO_TO_20&1048575,n=n*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(t<<31|r+1023<<20|e)>>>0,jspb.utils.split64Low=n}},jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=e.charCodeAt(4),a=e.charCodeAt(5),s=e.charCodeAt(6);e=e.charCodeAt(7),jspb.utils.split64Low=t+(n<<8)+(r<<16)+(i<<24)>>>0,jspb.utils.split64High=o+(a<<8)+(s<<16)+(e<<24)>>>0},jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+e},jspb.utils.joinInt64=function(e,t){var n=2147483648&t;return n&&(e=1+~e>>>0,t=~t>>>0,0==e&&(t=t+1>>>0)),e=jspb.utils.joinUint64(e,t),n?-e:e},jspb.utils.joinZigzag64=function(e,t){var n=1&e;return e=(e>>>1|t<<31)>>>0,t>>>=1,n&&0==(e=e+1>>>0)&&(t=t+1>>>0),e=jspb.utils.joinUint64(e,t),n?-e:e},jspb.utils.joinFloat32=function(e,t){t=2*(e>>31)+1;var n=e>>>23&255;return e&=8388607,255==n?e?NaN:1/0*t:0==n?t*Math.pow(2,-149)*e:t*Math.pow(2,n-150)*(e+Math.pow(2,23))},jspb.utils.joinFloat64=function(e,t){var n=2*(t>>31)+1,r=t>>>20&2047;return e=jspb.BinaryConstants.TWO_TO_32*(1048575&t)+e,2047==r?e?NaN:1/0*n:0==r?n*Math.pow(2,-1074)*e:n*Math.pow(2,r-1075)*(e+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.joinUnsignedDecimalString=function(e,t){function n(e){for(var t=1e7,n=0;7>n;n++){t/=10;var r=e/t%10>>>0;(0!=r||o)&&(o=!0,a+=i[r])}}if(2097151>=t)return""+(jspb.BinaryConstants.TWO_TO_32*t+e);var r=(e>>>24|t<<8)>>>0&16777215;t=t>>16&65535,e=(16777215&e)+6777216*r+6710656*t,r+=8147497*t,t*=2,1e7<=e&&(r+=Math.floor(e/1e7),e%=1e7),1e7<=r&&(t+=Math.floor(r/1e7),r%=1e7);var i=jspb.utils.DIGITS,o=!1,a="";return(t||o)&&n(t),(r||o)&&n(r),(e||o)&&n(e),a},jspb.utils.joinSignedDecimalString=function(e,t){var n=2147483648&t;return n&&(e=1+~e>>>0,t=~t+(0==e?1:0)>>>0),e=jspb.utils.joinUnsignedDecimalString(e,t),n?"-"+e:e},jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var n=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(e,n):jspb.utils.joinUnsignedDecimalString(e,n)},jspb.utils.hash64ArrayToDecimalStrings=function(e,t){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]=jspb.utils.hash64ToDecimalString(e[r],t);return n},jspb.utils.decimalStringToHash64=function(e){function t(e,t){for(var n=0;8>n&&(1!==e||0<t);n++)t=e*r[n]+t,r[n]=255&t,t>>>=8}goog.asserts.assert(0<e.length);var n=!1;"-"===e[0]&&(n=!0,e=e.slice(1));for(var r=[0,0,0,0,0,0,0,0],i=0;i<e.length;i++)t(10,jspb.utils.DIGITS.indexOf(e[i]));return n&&(function(){for(var e=0;8>e;e++)r[e]=255&~r[e]}(),t(1,1)),goog.crypt.byteArrayToString(r)},jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))},jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0",t[1]="x";for(var n=0;8>n;n++){var r=e.charCodeAt(7-n);t[2*n+2]=jspb.utils.DIGITS[r>>4],t[2*n+3]=jspb.utils.DIGITS[15&r]}return t.join("")},jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase(),goog.asserts.assert(18==e.length),goog.asserts.assert("0"==e[0]),goog.asserts.assert("x"==e[1]);for(var t="",n=0;8>n;n++){var r=jspb.utils.DIGITS.indexOf(e[2*n+2]),i=jspb.utils.DIGITS.indexOf(e[2*n+3]);t=String.fromCharCode(16*r+i)+t}return t},jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var n=jspb.utils.split64High;return t?jspb.utils.joinInt64(e,n):jspb.utils.joinUint64(e,n)},jspb.utils.numberToHash64=function(e){return jspb.utils.splitInt64(e),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(e,t,n){for(var r=0,i=t;i<n;i++)r+=e[i]>>7;return n-t-r},jspb.utils.countVarintFields=function(e,t,n,r){var i=0;if(128>(r=8*r+jspb.BinaryConstants.WireType.VARINT))for(;t<n&&e[t++]==r;)for(i++;;){var o=e[t++];if(0==(128&o))break}else for(;t<n;){for(o=r;128<o;){if(e[t]!=(127&o|128))return i;t++,o>>=7}if(e[t++]!=o)break;for(i++;0!=(128&(o=e[t++])););}return i},jspb.utils.countFixedFields_=function(e,t,n,r,i){var o=0;if(128>r)for(;t<n&&e[t++]==r;)o++,t+=i;else for(;t<n;){for(var a=r;128<a;){if(e[t++]!=(127&a|128))return o;a>>=7}if(e[t++]!=a)break;o++,t+=i}return o},jspb.utils.countFixed32Fields=function(e,t,n,r){return jspb.utils.countFixedFields_(e,t,n,8*r+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(e,t,n,r){return jspb.utils.countFixedFields_(e,t,n,8*r+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(e,t,n,r){var i=0;for(r=8*r+jspb.BinaryConstants.WireType.DELIMITED;t<n;){for(var o=r;128<o;){if(e[t++]!=(127&o|128))return i;o>>=7}if(e[t++]!=o)break;i++;for(var a=0,s=1;o=e[t++],a+=(127&o)*s,s*=128,0!=(128&o););t+=a}return i},jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var n=0;n<e.length;n++)t+="\\x",16>e[n]&&(t+="0"),t+=e[n].toString(16)}return t+'"'},jspb.utils.debugScalarToTextFormat=function(e){return goog.isString(e)?goog.string.quote(e):e.toString()},jspb.utils.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++){var r=e.charCodeAt(n);if(255<r)throw Error("Conversion error: string contains codepoint outside of byte range");t[n]=r}return t},jspb.utils.byteSourceToUint8Array=function(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||void 0!==Buffer&&e.constructor===Buffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?goog.crypt.base64.decodeStringToUint8Array(e):(goog.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryIterator=function(e,t,n){this.elements_=this.nextMethod_=this.decoder_=null,this.cursor_=0,this.nextValue_=null,this.atEnd_=!0,this.init_(e,t,n)},jspb.BinaryIterator.prototype.init_=function(e,t,n){e&&t&&(this.decoder_=e,this.nextMethod_=t),this.elements_=n||null,this.cursor_=0,this.nextValue_=null,this.atEnd_=!this.decoder_&&!this.elements_,this.next()},jspb.BinaryIterator.instanceCache_=[],jspb.BinaryIterator.alloc=function(e,t,n){if(jspb.BinaryIterator.instanceCache_.length){var r=jspb.BinaryIterator.instanceCache_.pop();return r.init_(e,t,n),r}return new jspb.BinaryIterator(e,t,n)},jspb.BinaryIterator.prototype.free=function(){this.clear(),100>jspb.BinaryIterator.instanceCache_.length&&jspb.BinaryIterator.instanceCache_.push(this)},jspb.BinaryIterator.prototype.clear=function(){this.decoder_&&this.decoder_.free(),this.elements_=this.nextMethod_=this.decoder_=null,this.cursor_=0,this.nextValue_=null,this.atEnd_=!0},jspb.BinaryIterator.prototype.get=function(){return this.nextValue_},jspb.BinaryIterator.prototype.atEnd=function(){return this.atEnd_},jspb.BinaryIterator.prototype.next=function(){var e=this.nextValue_;return this.decoder_?this.decoder_.atEnd()?(this.nextValue_=null,this.atEnd_=!0):this.nextValue_=this.nextMethod_.call(this.decoder_):this.elements_&&(this.cursor_==this.elements_.length?(this.nextValue_=null,this.atEnd_=!0):this.nextValue_=this.elements_[this.cursor_++]),e},jspb.BinaryDecoder=function(e,t,n){this.bytes_=null,this.tempHigh_=this.tempLow_=this.cursor_=this.end_=this.start_=0,this.error_=!1,e&&this.setBlock(e,t,n)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(e,t,n){if(jspb.BinaryDecoder.instanceCache_.length){var r=jspb.BinaryDecoder.instanceCache_.pop();return e&&r.setBlock(e,t,n),r}return new jspb.BinaryDecoder(e,t,n)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(e,t,n){this.bytes_=jspb.utils.byteSourceToUint8Array(e),this.start_=goog.isDef(t)?t:0,this.end_=goog.isDef(n)?this.start_+n:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e},jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e,goog.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64_=function(){for(var e,t,n=0,r=0;4>r;r++)if(e=this.bytes_[this.cursor_++],n|=(127&e)<<7*r,128>e)return this.tempLow_=n>>>0,void(this.tempHigh_=0);if(e=this.bytes_[this.cursor_++],n|=(127&e)<<28,t=0|(127&e)>>4,128>e)this.tempLow_=n>>>0,this.tempHigh_=t>>>0;else{for(r=0;5>r;r++)if(e=this.bytes_[this.cursor_++],t|=(127&e)<<7*r+3,128>e)return this.tempLow_=n>>>0,void(this.tempHigh_=t>>>0);goog.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0}},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var e=this.bytes_,t=e[this.cursor_+0],n=127&t;return 128>t?(this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),n):(t=e[this.cursor_+1],n|=(127&t)<<7,128>t?(this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),n):(t=e[this.cursor_+2],n|=(127&t)<<14,128>t?(this.cursor_+=3,goog.asserts.assert(this.cursor_<=this.end_),n):(t=e[this.cursor_+3],n|=(127&t)<<21,128>t?(this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),n):(t=e[this.cursor_+4],n|=(15&t)<<28,128>t?(this.cursor_+=5,goog.asserts.assert(this.cursor_<=this.end_),n>>>0):(this.cursor_+=5,128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&goog.asserts.assert(!1),goog.asserts.assert(this.cursor_<=this.end_),n)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=jspb.BinaryDecoder.prototype.readUnsignedVarint32,jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(1&e)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64_(),jspb.utils.joinUint64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64_(),jspb.utils.joinUnsignedDecimalString(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64_(),jspb.utils.joinInt64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64_(),jspb.utils.joinSignedDecimalString(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64_(),jspb.utils.joinZigzag64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readZigzagVarint64().toString()},jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],n=this.bytes_[this.cursor_+2],r=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8|n<<16|r<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)},jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),e<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],n=this.bytes_[this.cursor_+2],r=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8|n<<16|r<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)},jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readFloat=function(){var e=this.readUint32();return jspb.utils.joinFloat32(e,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,n=this.cursor_;e=n+e;for(var r=[],i="";n<e;){var o=t[n++];if(128>o)r.push(o);else{if(192>o)continue;if(224>o){var a=t[n++];r.push((31&o)<<6|63&a)}else if(240>o){a=t[n++];var s=t[n++];r.push((15&o)<<12|(63&a)<<6|63&s)}else if(248>o){a=t[n++],s=t[n++];var u=t[n++];o=(7&o)<<18|(63&a)<<12|(63&s)<<6|63&u,o-=65536,r.push(55296+(o>>10&1023),56320+(1023&o))}}8192<=r.length&&(i+=String.fromCharCode.apply(null,r),r.length=0)}return i+=goog.crypt.byteArrayToString(r),this.cursor_=n,i},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)},jspb.BinaryDecoder.prototype.readBytes=function(e){if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,goog.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);return this.cursor_+=e,goog.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64_(),jspb.utils.joinHash64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3],a=e[t+4],s=e[t+5],u=e[t+6];return e=e[t+7],this.cursor_+=8,String.fromCharCode(n,r,i,o,a,s,u,e)},jspb.BinaryReader=function(e,t,n){this.decoder_=jspb.BinaryDecoder.alloc(e,t,n),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(e,t,n){if(jspb.BinaryReader.instanceCache_.length){var r=jspb.BinaryReader.instanceCache_.pop();return e&&r.decoder_.setBlock(e,t,n),r}return new jspb.BinaryReader(e,t,n)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(e,t,n){this.decoder_.setBlock(e,t,n),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return goog.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e=this.decoder_.readUnsignedVarint32(),t=e>>>3;return(e&=7)!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP?(goog.asserts.fail("Invalid wire type: %s (at position %s)",e,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=t,this.nextWireType_=e,!0)},jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(goog.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)goog.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(goog.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(goog.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var e=this.nextField_;;){if(!this.nextField()){goog.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=e&&(goog.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:goog.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(e,t){goog.isNull(this.readCallbacks_)&&(this.readCallbacks_={}),goog.asserts.assert(!this.readCallbacks_[e]),this.readCallbacks_[e]=t},jspb.BinaryReader.prototype.runReadCallback=function(e){return goog.asserts.assert(!goog.isNull(this.readCallbacks_)),e=this.readCallbacks_[e],goog.asserts.assert(e),e(this)},jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e);var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64();case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString();case t.GROUP:goog.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:goog.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes();case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32();case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:goog.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(e,t){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var n=this.decoder_.getEnd(),r=this.decoder_.readUnsignedVarint32();r=this.decoder_.getCursor()+r,this.decoder_.setEnd(r),t(e,this),this.decoder_.setCursor(r),this.decoder_.setEnd(n)},jspb.BinaryReader.prototype.readGroup=function(e,t,n){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),goog.asserts.assert(this.nextField_==e),n(t,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(goog.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},jspb.BinaryReader.prototype.getFieldDecoder=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),n=t+e;return e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e),this.decoder_.setCursor(n),e},jspb.BinaryReader.prototype.readInt32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},jspb.BinaryReader.prototype.readInt32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readInt64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readUint32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},jspb.BinaryReader.prototype.readUint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},jspb.BinaryReader.prototype.readSint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},jspb.BinaryReader.prototype.readSint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},jspb.BinaryReader.prototype.readFixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},jspb.BinaryReader.prototype.readFixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},jspb.BinaryReader.prototype.readSfixed32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},jspb.BinaryReader.prototype.readSfixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},jspb.BinaryReader.prototype.readDouble=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},jspb.BinaryReader.prototype.readBool=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readEnum=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readString=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)},jspb.BinaryReader.prototype.readBytes=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)},jspb.BinaryReader.prototype.readVarintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readFixedHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readPackedField_=function(e){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();t=this.decoder_.getCursor()+t;for(var n=[];this.decoder_.getCursor()<t;)n.push(e.call(this.decoder_));return n},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.Map=function(e,t){this.arr_=e,this.valueCtor_=t,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()};jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],n=t[0];this.map_[n.toString()]=new jspb.Map.Entry_(n,t[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e,t=this.map_;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e].valueWrapper;n&&n.toArray()}}}else{for(this.arr_.length=0,t=this.stringKeys_(),t.sort(),e=0;e<t.length;e++){var r=this.map_[t[e]];(n=r.valueWrapper)&&n.toArray(),this.arr_.push([r.key,r.value])}this.arrClean=!0}return this.arr_},jspb.Map.prototype.toObject=function(e,t){for(var n=this.toArray(),r=[],i=0;i<n.length;i++){var o=this.map_[n[i][0].toString()];this.wrapEntry_(o);var a=o.valueWrapper;a?(goog.asserts.assert(t),r.push([o.key,t(e,a)])):r.push([o.key,o.value])}return r},jspb.Map.fromObject=function(e,t,n){t=new jspb.Map([],t);for(var r=0;r<e.length;r++){var i=e[r][0],o=n(e[r][1]);t.set(i,o)}return t},jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0,this.arr_=e},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},"undefined"!=typeof Symbol&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);return delete this.map_[e],this.arrClean=!1,t},jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++){var r=this.map_[t[n]];e.push([r.key,r.value])}return e},jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++){var r=this.map_[t[n]];e.push([r.key,this.wrapEntry_(r)])}return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++)e.push(this.map_[t[n]].key);return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++)e.push(this.wrapEntry_(this.map_[t[n]]));return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.forEach=function(e,t){var n=this.stringKeys_();n.sort();for(var r=0;r<n.length;r++){var i=this.map_[n[r]];e.call(t,this.wrapEntry_(i),i.key,this)}},jspb.Map.prototype.set=function(e,t){var n=new jspb.Map.Entry_(e);return this.valueCtor_?(n.valueWrapper=t,n.value=t.toArray()):n.value=t,this.map_[e.toString()]=n,this.arrClean=!1,this},jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value},jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)},jspb.Map.prototype.has=function(e){return e.toString()in this.map_},jspb.Map.prototype.serializeBinary=function(e,t,n,r,i){var o=this.stringKeys_();o.sort();for(var a=0;a<o.length;a++){var s=this.map_[o[a]];t.beginSubMessage(e),n.call(t,1,s.key),this.valueCtor_?r.call(t,2,this.wrapEntry_(s),i):r.call(t,2,s.value),t.endSubMessage()}},jspb.Map.deserializeBinary=function(e,t,n,r,i,o){for(var a=void 0;t.nextField()&&!t.isEndGroup();){var s=t.getFieldNumber();1==s?o=n.call(t):2==s&&(e.valueCtor_?(goog.asserts.assert(i),a=new e.valueCtor_,r.call(t,a,i)):a=r.call(t))}goog.asserts.assert(void 0!=o),goog.asserts.assert(void 0!=a),e.set(o,a)},jspb.Map.prototype.stringKeys_=function(){var e,t=this.map_,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n},jspb.Map.Entry_=function(e,t){this.key=e,this.value=t,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(e,t,n,r,i){this.fieldIndex=e,this.fieldName=t,this.ctor=n,this.toObjectFn=r,this.isRepeated=i},jspb.ExtensionFieldBinaryInfo=function(e,t,n,r,i,o){this.fieldInfo=e,this.binaryReaderFn=t,this.binaryWriterFn=n,this.binaryMessageSerializeFn=r,this.binaryMessageDeserializeFn=i,this.isPacked=o},jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},jspb.Message=function(){},jspb.Message.GENERATE_TO_OBJECT=!0,jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array,jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},jspb.Message.getIndex_=function(e,t){return t+e.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(e,t){return t-e.arrayIndexOffset_},jspb.Message.initialize=function(e,t,n,r,i,o){if(e.wrappers_=null,t||(t=n?[n]:[]),e.messageId_=n?String(n):void 0,e.arrayIndexOffset_=0===n?-1:0,e.array=t,jspb.Message.initPivotAndExtensionObject_(e,r),e.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(e.repeatedFields=i),i)for(t=0;t<i.length;t++)n=i[t],n<e.pivot_?(n=jspb.Message.getIndex_(e,n),e.array[n]=e.array[n]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[n]=e.extensionObject_[n]||jspb.Message.EMPTY_LIST_SENTINEL_);if(o&&o.length)for(t=0;t<o.length;t++)jspb.Message.computeOneofCase(e,o[t])},jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(e){return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:goog.isArray(e)},jspb.Message.isExtensionObject_=function(e){return!(null===e||"object"!=typeof e||jspb.Message.isArray_(e)||jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(e,t){var n=e.array.length,r=-1;if(n&&(r=n-1,n=e.array[r],jspb.Message.isExtensionObject_(n)))return e.pivot_=jspb.Message.getFieldNumber_(e,r),void(e.extensionObject_=n);-1<t?(e.pivot_=Math.max(t,jspb.Message.getFieldNumber_(e,r+1)),e.extensionObject_=null):e.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(e){var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})},jspb.Message.toObjectList=function(e,t,n){for(var r=[],i=0;i<e.length;i++)r[i]=t.call(e[i],n,e[i]);return r},jspb.Message.toObjectExtension=function(e,t,n,r,i){for(var o in n){var a=n[o],s=r.call(e,a);if(null!=s){for(var u in a.fieldName)if(a.fieldName.hasOwnProperty(u))break;t[u]=a.toObjectFn?a.isRepeated?jspb.Message.toObjectList(s,a.toObjectFn,i):a.toObjectFn(i,s):s}}},jspb.Message.serializeBinaryExtensions=function(e,t,n,r){for(var i in n){var o=n[i],a=o.fieldInfo;if(!o.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var s=r.call(e,a);if(null!=s)if(a.isMessageType()){if(!o.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");o.binaryWriterFn.call(t,a.fieldIndex,s,o.binaryMessageSerializeFn)}else o.binaryWriterFn.call(t,a.fieldIndex,s)}},jspb.Message.readBinaryExtension=function(e,t,n,r,i){var o=n[t.getFieldNumber()];if(o){if(n=o.fieldInfo,!o.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(n.isMessageType()){var a=new n.ctor;o.binaryReaderFn.call(t,a,o.binaryMessageDeserializeFn)}else a=o.binaryReaderFn.call(t);n.isRepeated&&!o.isPacked?(t=r.call(e,n))?t.push(a):i.call(e,n,[a]):i.call(e,n,a)}else t.skipField()},jspb.Message.getField=function(e,t){if(t<e.pivot_){t=jspb.Message.getIndex_(e,t);var n=e.array[t];return n===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[t]=[]:n}if(e.extensionObject_)return n=e.extensionObject_[t],n===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:n},jspb.Message.getRepeatedField=function(e,t){return jspb.Message.getField(e,t)},jspb.Message.getOptionalFloatingPointField=function(e,t){return e=jspb.Message.getField(e,t),null==e?e:+e},jspb.Message.getBooleanField=function(e,t){return e=jspb.Message.getField(e,t),null==e?e:!!e},jspb.Message.getRepeatedFloatingPointField=function(e,t){var n=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var r=0;r<n.length;r++)n[r]=+n[r];e.convertedPrimitiveFields_[t]=!0}return n},jspb.Message.getRepeatedBooleanField=function(e,t){var n=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var r=0;r<n.length;r++)n[r]=!!n[r];e.convertedPrimitiveFields_[t]=!0}return n},jspb.Message.bytesAsB64=function(e){return null==e||goog.isString(e)?e:jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array?goog.crypt.base64.encodeByteArray(e):(goog.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e)),null)},jspb.Message.bytesAsU8=function(e){return null==e||e instanceof Uint8Array?e:goog.isString(e)?goog.crypt.base64.decodeStringToUint8Array(e):(goog.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e)),null)},jspb.Message.bytesListAsB64=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||goog.isString(e[0])?e:goog.array.map(e,jspb.Message.bytesAsB64)},jspb.Message.bytesListAsU8=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)},jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0]);goog.array.forEach(e,function(e){goog.typeOf(e)!=t&&goog.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)})}},jspb.Message.getFieldWithDefault=function(e,t,n){return e=jspb.Message.getField(e,t),null==e?n:e},jspb.Message.getBooleanFieldWithDefault=function(e,t,n){return e=jspb.Message.getBooleanField(e,t),null==e?n:e},jspb.Message.getFloatingPointFieldWithDefault=function(e,t,n){return e=jspb.Message.getOptionalFloatingPointField(e,t),null==e?n:e},jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,jspb.Message.getMapField=function(e,t,n,r){if(e.wrappers_||(e.wrappers_={}),t in e.wrappers_)return e.wrappers_[t];var i=jspb.Message.getField(e,t);if(!i){if(n)return;i=[],jspb.Message.setField(e,t,i)}return e.wrappers_[t]=new jspb.Map(i,r)},jspb.Message.setField=function(e,t,n){t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=n:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=n)},jspb.Message.setProto3IntField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,0)},jspb.Message.setProto3FloatField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,0)},jspb.Message.setProto3BooleanField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,!1)},jspb.Message.setProto3StringField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,"")},jspb.Message.setProto3BytesField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,"")},jspb.Message.setProto3EnumField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,0)},jspb.Message.setProto3StringIntField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,"0")},jspb.Message.setFieldIgnoringDefault_=function(e,t,n,r){n!==r?jspb.Message.setField(e,t,n):e.array[jspb.Message.getIndex_(e,t)]=null},jspb.Message.addToRepeatedField=function(e,t,n,r){e=jspb.Message.getRepeatedField(e,t),void 0!=r?e.splice(r,0,n):e.push(n)},jspb.Message.setOneofField=function(e,t,n,r){(n=jspb.Message.computeOneofCase(e,n))&&n!==t&&void 0!==r&&(e.wrappers_&&n in e.wrappers_&&(e.wrappers_[n]=void 0),jspb.Message.setField(e,n,void 0)),jspb.Message.setField(e,t,r)},jspb.Message.computeOneofCase=function(e,t){for(var n,r,i=0;i<t.length;i++){var o=t[i],a=jspb.Message.getField(e,o);null!=a&&(n=o,r=a,jspb.Message.setField(e,o,void 0))}return n?(jspb.Message.setField(e,n,r),n):0},jspb.Message.getWrapperField=function(e,t,n,r){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[n]){var i=jspb.Message.getField(e,n);(r||i)&&(e.wrappers_[n]=new t(i))}return e.wrappers_[n]},jspb.Message.getRepeatedWrapperField=function(e,t,n){return jspb.Message.wrapRepeatedField_(e,t,n),t=e.wrappers_[n],t==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[n]=[]),t},jspb.Message.wrapRepeatedField_=function(e,t,n){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[n]){for(var r=jspb.Message.getRepeatedField(e,n),i=[],o=0;o<r.length;o++)i[o]=new t(r[o]);e.wrappers_[n]=i}},jspb.Message.setWrapperField=function(e,t,n){e.wrappers_||(e.wrappers_={});var r=n?n.toArray():n;e.wrappers_[t]=n,jspb.Message.setField(e,t,r)},jspb.Message.setOneofWrapperField=function(e,t,n,r){e.wrappers_||(e.wrappers_={});var i=r?r.toArray():r;e.wrappers_[t]=r,jspb.Message.setOneofField(e,t,n,i)},jspb.Message.setRepeatedWrapperField=function(e,t,n){e.wrappers_||(e.wrappers_={}),n=n||[];for(var r=[],i=0;i<n.length;i++)r[i]=n[i].toArray();e.wrappers_[t]=n,jspb.Message.setField(e,t,r)},jspb.Message.addToRepeatedWrapperField=function(e,t,n,r,i){jspb.Message.wrapRepeatedField_(e,r,t);var o=e.wrappers_[t];return o||(o=e.wrappers_[t]=[]),n=n||new r,e=jspb.Message.getRepeatedField(e,t),void 0!=i?(o.splice(i,0,n),e.splice(i,0,n.toArray())):(o.push(n),e.push(n.toArray())),n},jspb.Message.toMap=function(e,t,n,r){for(var i={},o=0;o<e.length;o++)i[t.call(e[o])]=n?n.call(e[o],r,e[o]):e[o];return i},jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){var t=this.wrappers_[e];if(goog.isArray(t))for(var n=0;n<t.length;n++)t[n]&&t[n].toArray();else t&&t.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(e){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],function(t){return new e.ctor(t)})),this.wrappers_[t]}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}},jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var n=e.fieldIndex;return e.isRepeated?(t=t||[],e.isMessageType()?(this.wrappers_[n]=t,this.extensionObject_[n]=goog.array.map(t,function(e){return e.toArray()})):this.extensionObject_[n]=t):e.isMessageType()?(this.wrappers_[n]=t,this.extensionObject_[n]=t?t.toArray():t):this.extensionObject_[n]=t,this},jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var n=e.toArray();t=t.toArray();var r=[],i=0,o=n.length>t.length?n.length:t.length;for(e.getJsPbMessageId()&&(r[0]=e.getJsPbMessageId(),i=1);i<o;i++)jspb.Message.compareFields(n[i],t[i])||(r[i]=t[i]);return new e.constructor(r)},jspb.Message.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())},jspb.Message.compareExtensions=function(e,t){e=e||{},t=t||{};var n,r={};for(n in e)r[n]=0;for(n in t)r[n]=0;for(n in r)if(!jspb.Message.compareFields(e[n],t[n]))return!1;return!0},jspb.Message.compareFields=function(e,t){if(e==t)return!0;if(!goog.isObject(e)||!goog.isObject(t))return!!(goog.isNumber(e)&&isNaN(e)||goog.isNumber(t)&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}if(e.constructor===Array){var r=void 0,i=void 0,o=Math.max(e.length,t.length);for(n=0;n<o;n++){var a=e[n],s=t[n];if(a&&a.constructor==Object&&(goog.asserts.assert(void 0===r),goog.asserts.assert(n===e.length-1),r=a,a=void 0),s&&s.constructor==Object&&(goog.asserts.assert(void 0===i),goog.asserts.assert(n===t.length-1),i=s,s=void 0),!jspb.Message.compareFields(a,s))return!1}return!r&&!i||(r=r||{},i=i||{},jspb.Message.compareExtensions(r,i))}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")},jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)},jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))},jspb.Message.copyInto=function(e,t){goog.asserts.assertInstanceof(e,jspb.Message),goog.asserts.assertInstanceof(t,jspb.Message),goog.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type."),e=jspb.Message.clone(e);for(var n=t.toArray(),r=e.toArray(),i=n.length=0;i<r.length;i++)n[i]=r[i];t.wrappers_=e.wrappers_,t.extensionObject_=e.extensionObject_},jspb.Message.clone_=function(e){if(goog.isArray(e)){for(var t=Array(e.length),n=0;n<e.length;n++){var r=e[n];null!=r&&(t[n]="object"==typeof r?jspb.Message.clone_(goog.asserts.assert(r)):r)}return t}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);t={};for(n in e)null!=(r=e[n])&&(t[n]="object"==typeof r?jspb.Message.clone_(goog.asserts.assert(r)):r);return t},jspb.Message.registerMessageType=function(e,t){jspb.Message.registry_[e]=t,t.messageId=e},jspb.Message.registry_={},jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.arith={},jspb.arith.UInt64=function(e,t){this.lo=e,this.hi=t},jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi},jspb.arith.UInt64.prototype.add=function(e){return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(e){return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(e,t){var n=65535&e;e>>>=16;var r=65535&t,i=t>>>16;for(t=n*r+65536*(n*i&65535)+65536*(e*r&65535),n=e*i+(n*i>>>16)+(e*r>>>16);4294967296<=t;)t-=4294967296,n+=1;return new jspb.arith.UInt64(t>>>0,n>>>0)},jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);return e=jspb.arith.UInt64.mul32x32(this.hi,e),e.hi=e.lo,e.lo=0,t.add(e)},jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),n=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0);for(var r=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),r=r.leftShift();for(;!r.zero();)0>=e.cmp(n)&&(t=t.add(r),n=n.sub(e)),e=e.rightShift(),r=r.rightShift();return[t,n]},jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();){t=t.div(10);var n=t[0];e=t[1].lo+e,t=n}return""==e&&(e="0"),e},jspb.arith.UInt64.fromString=function(e){for(var t=new jspb.arith.UInt64(0,0),n=new jspb.arith.UInt64(0,0),r=0;r<e.length;r++){if("0">e[r]||"9"<e[r])return null;var i=parseInt(e[r],10);n.lo=i,t=t.mul(10).add(n)}return t},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(e,t){this.lo=e,this.hi=t},jspb.arith.Int64.prototype.add=function(e){return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(e){return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var e=0!=(2147483648&this.hi),t=new jspb.arith.UInt64(this.lo,this.hi);return e&&(t=new jspb.arith.UInt64(0,0).sub(t)),(e?"-":"")+t.toString()},jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=jspb.arith.UInt64.fromString(e))?null:(t&&(e=new jspb.arith.UInt64(0,0).sub(e)),new jspb.arith.Int64(e.lo,e.hi))},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;return this.buffer_=[],e},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){for(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(t==Math.floor(t)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(t==Math.floor(t)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(e),this.writeUint32(t)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){for(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(127&e|128),e>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){if(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(127&e|128),e>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((e<<1^e>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarint64(parseInt(e,10))},jspb.BinaryEncoder.prototype.writeUint8=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&256>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&65536>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(-128<=e&&128>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(-32768<=e&&32768>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(e){goog.asserts.assert(e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(e),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(e){goog.asserts.assert(e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(e){goog.asserts.assert(goog.isBoolean(e)||goog.isNumber(e)),this.buffer_.push(e?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(e)},jspb.BinaryEncoder.prototype.writeBytes=function(e){this.buffer_.push.apply(this.buffer_,e)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(e){for(var t=this.buffer_.length,n=0;n<e.length;n++){var r=e.charCodeAt(n);if(128>r)this.buffer_.push(r);else if(2048>r)this.buffer_.push(r>>6|192),this.buffer_.push(63&r|128);else if(65536>r)if(55296<=r&&56319>=r&&n+1<e.length){var i=e.charCodeAt(n+1);56320<=i&&57343>=i&&(r=1024*(r-55296)+i-56320+65536,this.buffer_.push(r>>18|240),this.buffer_.push(r>>12&63|128),this.buffer_.push(r>>6&63|128),this.buffer_.push(63&r|128),n++)}else this.buffer_.push(r>>12|224),this.buffer_.push(r>>6&63|128),this.buffer_.push(63&r|128)}return this.buffer_.length-t},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t),this.blocks_.push(e),this.totalLength_+=t.length+e.length},jspb.BinaryWriter.prototype.beginDelimited_=function(e){return this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),e=this.encoder_.end(),this.blocks_.push(e),this.totalLength_+=e.length,e.push(this.totalLength_),e},jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop();for(t=this.totalLength_+this.encoder_.length()-t,goog.asserts.assert(0<=t);127<t;)e.push(127&t|128),t>>>=7,this.totalLength_++;e.push(t),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,n){this.appendUint8Array_(e.subarray(t,n))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,n){null!=e&&null!=t&&null!=n&&this.writeSerializedMessage(e,t,n)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){goog.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,n=t.length,r=0,i=0;i<n;i++){var o=t[i];e.set(o,r),r+=o.length}return t=this.encoder_.end(),e.set(t,r),r+=t.length,goog.asserts.assert(r==e.length),this.blocks_=[e],e},jspb.BinaryWriter.prototype.getResultBase64String=function(e){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),e)},jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))},jspb.BinaryWriter.prototype.endSubMessage=function(){goog.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){goog.asserts.assert(1<=e&&e==Math.floor(e)),this.encoder_.writeUnsignedVarint32(8*e+t)},jspb.BinaryWriter.prototype.writeAny=function(e,t,n){var r=jspb.BinaryConstants.FieldType;switch(e){case r.DOUBLE:this.writeDouble(t,n);break;case r.FLOAT:this.writeFloat(t,n);break;case r.INT64:this.writeInt64(t,n);break;case r.UINT64:this.writeUint64(t,n);break;case r.INT32:this.writeInt32(t,n);break;case r.FIXED64:this.writeFixed64(t,n);break;case r.FIXED32:this.writeFixed32(t,n);break;case r.BOOL:this.writeBool(t,n);break;case r.STRING:this.writeString(t,n);break;case r.GROUP:goog.asserts.fail("Group field type not supported in writeAny()");break;case r.MESSAGE:goog.asserts.fail("Message field type not supported in writeAny()");break;case r.BYTES:this.writeBytes(t,n);break;case r.UINT32:this.writeUint32(t,n);break;case r.ENUM:this.writeEnum(t,n);break;case r.SFIXED32:this.writeSfixed32(t,n);break;case r.SFIXED64:this.writeSfixed64(t,n);break;case r.SINT32:this.writeSint32(t,n);break;case r.SINT64:this.writeSint64(t,n);break;case r.FHASH64:this.writeFixedHash64(t,n);break;case r.VHASH64:this.writeVarintHash64(t,n);break;default:goog.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))},jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt32String=function(e,t){null!=t&&(t=parseInt(t,10),goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(e,t))},jspb.BinaryWriter.prototype.writeInt64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint32String=function(e,t){null!=t&&(t=parseInt(t,10),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))},jspb.BinaryWriter.prototype.writeUint64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(e,t))},jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(e,t))},jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&(goog.asserts.assert(+t>=-jspb.BinaryConstants.TWO_TO_63&&+t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64String_(e,t))},jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))},jspb.BinaryWriter.prototype.writeFixed64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))},jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))},jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))},jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeFloat=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))},jspb.BinaryWriter.prototype.writeDouble=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))},jspb.BinaryWriter.prototype.writeBool=function(e,t){null!=t&&(goog.asserts.assert(goog.isBoolean(t)||goog.isNumber(t)),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))},jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeString=function(e,t){null!=t&&(e=this.beginDelimited_(e),this.encoder_.writeString(t),this.endDelimited_(e))},jspb.BinaryWriter.prototype.writeBytes=function(e,t){null!=t&&(t=jspb.utils.byteSourceToUint8Array(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),this.appendUint8Array_(t))},jspb.BinaryWriter.prototype.writeMessage=function(e,t,n){null!=t&&(e=this.beginDelimited_(e),n(t,this),this.endDelimited_(e))},jspb.BinaryWriter.prototype.writeMessageSet=function(e,t,n){null!=t&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e),e=this.beginDelimited_(3),n(t,this),this.endDelimited_(e),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(e,t,n){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),n(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(t))};jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSignedVarint32_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeInt32String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSignedVarint64_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeInt64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUnsignedVarint32_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUint32String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUnsignedVarint64_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUint64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarint32_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarint64_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarint64String_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixed32(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixed64(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixed64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSfixed32(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSfixed64(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSfixed64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFloat(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeDouble(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeBool(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeEnum(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeString(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeBytes(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,n){if(null!=t)for(var r=0;r<t.length;r++){var i=this.beginDelimited_(e);n(t[r],this),this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,n){if(null!=t)for(var r=0;r<t.length;r++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),n(t[r],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)},jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixedHash64(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeVarintHash64(e,t[n])},jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSignedVarint32(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSignedVarint32(parseInt(t[n],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSignedVarint64(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++){var r=jspb.arith.Int64.fromString(t[n]);this.encoder_.writeSplitVarint64(r.lo,r.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint32(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint32(parseInt(t[n],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint64(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++){var r=jspb.arith.UInt64.fromString(t[n]);this.encoder_.writeSplitVarint64(r.lo,r.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarint32(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarint64(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarint64(parseInt(t[n],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeUint32(t[e])},jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeUint64(t[e])},jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++){var n=jspb.arith.UInt64.fromString(t[e]);this.encoder_.writeSplitFixed64(n.lo,n.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeInt32(t[e])},jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64(t[e])},jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64String(t[e])},jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeFloat(t[e])},jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeDouble(t[e])},jspb.BinaryWriter.prototype.writePackedBool=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),e=0;e<t.length;e++)this.encoder_.writeBool(t[e])},jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeEnum(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeFixedHash64(t[e])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeVarintHash64(t[n]);this.endDelimited_(e)}},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf}).call(exports,__webpack_require__(18),__webpack_require__(416).Buffer)},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?c(e,t,n):f(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return s(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function l(e,t){if(s(t),e=i(e,t<0?0:0|p(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function c(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=i(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function d(e,t){var n=t.length<0?0:0|p(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=d(e,t),e}function f(e,t){if(o.isBuffer(t)){var n=0|p(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Y(t.length)?i(e,0):d(e,t);if("Buffer"===t.type&&$(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function y(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return K(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var l;if(i){var c=-1;for(l=n;l<s;l++)if(o(e,l)===o(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===u)return c*a}else-1!==c&&(l-=l-c),c=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var d=!0,h=0;h<u;h++)if(o(e,l+h)!==o(t,h)){d=!1;break}if(d)return l}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function T(e,t,n,r){return X(K(t,e.length-n),e,n,r)}function S(e,t,n,r){return X(q(t),e,n,r)}function E(e,t,n,r){return S(e,t,n,r)}function k(e,t,n,r){return X(z(t),e,n,r)}function A(e,t,n,r){return X(G(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,l,c,d;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[i+1],128==(192&u)&&(d=(31&o)<<6|63&u)>127&&(a=d);break;case 3:u=e[i+1],l=e[i+2],128==(192&u)&&128==(192&l)&&(d=(15&o)<<12|(63&u)<<6|63&l)>2047&&(d<55296||d>57343)&&(a=d);break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(d=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&d<1114112&&(a=d)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return I(r)}function I(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=W(e[o]);return i}function j(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function U(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,i){return i||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,i){return i||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function V(e){if(e=H(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function G(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function z(e){return J.toByteArray(V(e))}function X(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Y(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var J=n(417),Q=n(418),$=n(419);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return u(null,e,t,n)},o.allocUnsafe=function(e){return l(null,e)},o.allocUnsafeSlow=function(e){return l(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):v.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,u=Math.min(a,s),l=this.slice(r,i),c=e.slice(t,n),d=0;d<u;++d)if(l[d]!==c[d]){a=l[d],s=c[d];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:K(new o(e,r).toString()),u=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(18))},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function o(e,t,n){return 3*(t+n)/4-n}function a(e){var t,n,i=r(e),a=i[0],s=i[1],u=new h(o(e,a,s)),l=0,c=s>0?a-4:a;for(n=0;n<c;n+=4)t=d[e.charCodeAt(n)]<<18|d[e.charCodeAt(n+1)]<<12|d[e.charCodeAt(n+2)]<<6|d[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===s&&(t=d[e.charCodeAt(n)]<<2|d[e.charCodeAt(n+1)]>>4,u[l++]=255&t),1===s&&(t=d[e.charCodeAt(n)]<<10|d[e.charCodeAt(n+1)]<<4|d[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u}function s(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function u(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join("")}function l(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(u(e,o,o+16383>a?a:o+16383));return 1===r?(t=e[n-1],i.push(c[t>>2]+c[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(c[t>>10]+c[t>>4&63]+c[t<<2&63]+"=")),i.join("")}t.byteLength=i,t.toByteArray=a,t.fromByteArray=l;for(var c=[],d=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,g=f.length;p<g;++p)c[p]=f[p],d[f.charCodeAt(p)]=p;d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+d],d+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,d=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+d>=1?h/u:h*Math.pow(2,1-d),t*u>=2&&(a++,u/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*u-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+f]=255&a,f+=p,a/=256,l-=8);e[n+f-p]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){/*! @name @nagra/videojs-shaka @version 0.5.0-nmp-32 @license MIT */
!function(e,r){r(t,n(55))}(0,function(e,t){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function u(e,t){var n=e.xCallback(e.xKeySystem,e.xSourceObject,e.body,e.licenseRequestType),r=new Promise(function(e,r){n.then(function(n){e({uri:t,originalUri:t,data:n,headers:[],fromCache:!1})}).catch(function(e){var t=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,v,e);r(t)})});return shaka.util.AbortableOperation.notAbortable(r)}function l(e,t,n,r,i){return n===shaka.net.NetworkingEngine.RequestType.LICENSE&&"http:callback-uri"===e?u(t,e):shaka.net.HttpFetchPlugin.parse(e,t,n,r,i)}function c(e,t,n,r,i){return n===shaka.net.NetworkingEngine.RequestType.LICENSE&&"http:callback-uri"===e?u(t,e):shaka.net.HttpXHRPlugin.parse(e,t,n,r,i)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var d=function(){function e(e,t){this._player=e,this._shakaPlayer=t,this._trackDictionary=[],this._updateActiveTracksEventHandle=this._updateActiveShakaTextTrack.bind(this),this._handleTextTracksAdded(t.getTextTracks())}var t=e.prototype;return t.dispose=function(){this._player.textTracks().off("change",this._updateActiveTracksEventHandle),this._clearShakaTracks()},t._generateKindFromTrack=function(e){var t=e.roles;return t&&t.some(function(e){return"caption"===e})?"captions":"subtitles"},t._updateActiveShakaTextTrack=function(){for(var e,t=this._player.textTracks(),n=this,r=0;r<t.length;r+=1)!function(){var i=t[r];if("showing"===i.mode){var o=s(n._trackDictionary,function(e){return e.textTrack===i});e=o?o.shakaTrack:null}}();e?(this._shakaPlayer.selectTextTrack(e),this._shakaPlayer.setTextTrackVisibility(!0)):this._shakaPlayer.setTextTrackVisibility(!1)},t._attachShakaTextTracksToVideojs=function(e){var t=this,n=e.map(function(e){var n;return n=Array.isArray(e.labels)&&1===e.labels.length?e.labels[0].text:"application/cea-608"===e.mimeType&&"und"===e.language?e.originalTextId:e.language||e.label,{shakaTrack:e,trackConfig:{label:n,language:e.language,srclang:e.language,kind:t._generateKindFromTrack(e),roles:e.roles}}}).map(function(e){var n,r=e.trackConfig,i=e.shakaTrack,o=s(t._trackDictionary,function(e){var t=e.textTrack.language===r.language&&e.textTrack.kind===r.kind&&e.textTrack.label===r.label;return e.shakaTrack.roles.length>0&&(t=t&&e.shakaTrack.roles===r.roles),t});return o||(n=t._player.addRemoteTextTrack(r,!1),t._trackDictionary.push({textTrack:n.track,shakaTrack:i})),n});this._player.textTracks().on("change",this._updateActiveTracksEventHandle);var r=this._trackDictionary.find(function(e){e.track;return e.shakaTrack.active});return this._player.textTracks().tracks_.forEach(function(e){e.mode=r&&e===r.textTrack?"showing":"disabled"}),n},t._handleTextTracksAdded=function(e){this._clearShakaTracks(),e.length&&this._attachShakaTextTracksToVideojs(e)},t._clearShakaTracks=function(){var e=this;this._trackDictionary.forEach(function(t){e._player.removeRemoteTextTrack(t.textTrack)}),this._trackDictionary=[]},e}(),h={ShakaTextTrackHandler:d},f=function(){function e(e,t){this._player=e,this._shakaPlayer=t,this._updateActiveTracksEventHandle=this._updateActiveShakaTrack.bind(this),this._handleAudioTracksAdded()}var n=e.prototype;return n.dispose=function(){this._player.audioTracks().off("change",this._updateActiveTracksEventHandle),this._player.clearTracks(["audio"])},n._generateIdFromTrackIndex=function(e){return"dash-audio-"+e},n._generateKindFromTrack=function(e){var t="main";return e.roles.includes("dub")&&(t="translation"),e.accessibilityPurpose&&"visually impaired"===e.accessibilityPurpose&&(t="main-desc",e.roles.includes("dub")&&(t="descriptions")),t},n._isTracksEquivalentAccessibility=function(e,t){var n=!1;return e.accessibilityPurpose?"visually impaired"!==e.accessibilityPurpose||"main-desc"!==t.kind&&"descriptions"!==t.kind||(n=!0):"main"!==t.kind&&"translation"!==t.kind||(n=!0),n},n._generateLabelFromVariant=function(e){var t=e.language;return e.audioRoles&&e.audioRoles.length>0&&""!==e.audioRoles[0]&&(t+=" ("+e.audioRoles.join(",")+")"),t},n._generateLabelFromOurTrack=function(e){var t=e.language;return e.roles&&e.roles.length>0&&""!==e.roles[0]&&(t+=" ("+e.roles.join(",")+")"),t},n._findShakaAudioTrack=function(e){var t=this;return this.setOfTracksWithChannels.find(function(n){return t._generateLabelFromOurTrack(n)===e.label&&(!n.audioChannelConfig||n.audioChannelConfig===e.audioChannelConfig)&&n.audioCodec===e.audioCodec&&t._isTracksEquivalentAccessibility(n,e)})},n._handleAudioTracksAdded=function(){var e=this,n=this._player.audioTracks();n.length&&this._player.clearTracks(["audio"]);var r=this._shakaPlayer.getVariantTracks();this.setOfTracksWithChannels=[];for(var i,o,s=a(r);!(o=s()).done;)!function(){var t=o.value,n="und";t.language&&(n=shaka.util.LanguageUtils.normalize(t.language));var r=[];r="variant"===t.type?t.audioRoles:t.roles,r.length||(r=[""]);var a=e._generateLabelFromVariant(t),s={active:t.active,audioCodec:t.audioCodec,language:n,role:r.join(","),roles:r,accessibilityPurpose:t.accessibilityPurpose,channelsCount:t.channelsCount,audioChannelConfig:t.audioChannelConfig,label:a};e.setOfTracksWithChannels.find(function(e){return e.label===s.label&&e.language===s.language&&e.channelsCount===s.channelsCount&&e.role===s.role&&e.accessibilityPurpose===s.accessibilityPurpose})||e.setOfTracksWithChannels.push(s),t.active&&(i=s)}();for(var u,l=i?this.setOfTracksWithChannels.find(function(e){return e.label===i.label&&e.language===i.language&&e.channelsCount===i.channelsCount&&e.audioChannelConfig===i.audioChannelConfig&&(!e.role||i.roles.includes(e.role))}):this.setOfTracksWithChannels.find(function(e){return"main"===e.role})||this.setOfTracksWithChannels[0],c=0,d=a(this.setOfTracksWithChannels);!(u=d()).done;){var h=u.value;h===l&&this._player.trigger("shakaaudiotrackchange",{language:h.language}),n.addTrack(new t.AudioTrack({enabled:h===l,id:this._generateIdFromTrackIndex(c++),kind:this._generateKindFromTrack(h),label:h.label,language:h.language,audioCodec:h.audioCodec,audioChannelConfig:h.audioChannelConfig}))}this._player.audioTracks().on("change",this._updateActiveTracksEventHandle),this._shakaPlayer.addEventListener("unloading",function(){n.removeEventListener("change",e._updateActiveTracksEventHandle)})},n._updateActiveShakaTrack=function(){for(var e=this._player.audioTracks(),t=0;t<e.length;t++){var n=this._player.audioTracks()[t];if(n.enabled){var r=this._findShakaAudioTrack(n);if(r){this._player.trigger("shakaaudiotrackchange",{language:r.language}),this._shakaPlayer.selectAudioLanguage(r.language,r.role,r.channelsCount,r.audioChannelConfig,r.accessibilityPurpose);continue}}}},e}(),p={ShakaAudioTrackHandler:f},g=function(){function e(e,t){this._player=e,this._shakaPlayer=t,this._trackDictionary=[],this._loadedMetaListenerHandle=this._handlePlaybackMetadataLoadedForVideo.bind(this),this._player.one("loadedmetadata",this._loadedMetaListenerHandle),this._skipBandwidthRestrictions=!1,this._restrictionFromKeyStatusChangeApplied=!1,this._checkDeviceIfNeedWorkaround()&&(this._log("Apply workaround on Samsung Tizen TV."),this._enableVideoTrackWithLowestBandwidth())}var n=e.prototype;return n.dispose=function(){var e=this,t=[];this._trackDictionary.forEach(function(n){t.push(e._generateIdFromTrackIndex(n.track.id))}),this._trackDictionary=[],t.forEach(function(t){var n=e._player.videoTracks().getTrackById(t);n&&e._player.videoTracks().removeTrack(n)}),this._shakaPlayer.configure("restrictions",void 0)},n._checkDeviceIfNeedWorkaround=function(){var e=!1;return this._isMultiVideoStream()&&this._isEncryptedStream()&&this._isTizenTV()&&(e=!0),e},n._isMultiVideoStream=function(){var e=[];return this._shakaPlayer.getVariantTracks().forEach(function(t){e.includes(t.label)||e.push(t.label)}),e.length>1},n._isEncryptedStream=function(){return""!==this._shakaPlayer.keySystem()},n._isTizenTV=function(){return/Tizen/i.test(window.navigator&&window.navigator.userAgent||"")},n._enableVideoTrackWithLowestBandwidth=function(){for(var e=-1,t=1/0,n="",r=this._shakaPlayer.getVariantTracks(),i=0;i<r.length;i++){var o=r[i];o.active&&(n=o.label),o.bandwidth<t&&(t=o.bandwidth,e=i)}var a=r[e].label;if(e>=0&&n!==a){var s=this._shakaPlayer.getStats().estimatedBandwidth,u=e;r.length>1&&s>r[e].bandwidth&&(u=this._findBandwidthClosestVarantTrack(a,s)),this._shakaPlayer.selectVariantTrack(r[u],!0,0)}},n._findBandwidthClosestVarantTrack=function(e,t){for(var n=this._shakaPlayer.getVariantTracks(),r=0,i=0,o=0;o<n.length;o++){var a=n[o];a.label===e&&a.bandwidth>i&&a.bandwidth<=t&&(i=a.bandwidth,r=o)}return r},n._removeShakaListener=function(e,t){this._shakaPlayer.removeEventListener(e,t)},n._find=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},n._generateIdFromTrackIndex=function(e){return"shaka-video-"+e},n._generateKindFromTrack=function(e){if(e.roles){if(e.roles.some(function(e){return"main"===e}))return e.roles.some(function(e){return"caption"===e})?"captions":e.roles.some(function(e){return"subtitle"===e})?"subtitle":"main";if(e.roles.some(function(e){return"commentary"===e}))return"commentary";if(e.roles.some(function(e){return"alternate"===e}))return"alternate";if(e.roles.some(function(e){return"sign"===e}))return"sign"}return""},n._videoTracksChangeHandler=function(){this._skipBandwidthRestrictions?this._skipBandwidthRestrictions=!1:this._restrictBandwidth()},n._onShakaDrmSessionUpdate=function(){var e=this;if(!this._restrictionFromKeyStatusChangeApplied){window.setTimeout(function(){e._restrictBandwidth()},1e3),this._removeShakaListener("drmsessionupdate",this._onShakaDrmSessionUpdate.bind(this)),this._restrictionFromKeyStatusChangeApplied=!0}},n._restrictBandwidth=function(){for(var e,t=this._player.videoTracks(),n=0;n<t.length&&t.length>1;n++){var r=t[n];if(r.selected){var i=this._findShakaVideoTrack(r);if(i){var o=this._shakaPlayer.getConfiguration();o.restrictions&&o.restrictions.minBandwidth===i.track.minBandwidth&&o.restrictions.maxBandwidth===i.track.maxBandwidth?this._log("Skip to apply bandwidth restrictions due to no change."):e={minBandwidth:i.track.minBandwidth,maxBandwidth:i.track.maxBandwidth}}}}this._shakaPlayer.configure("restrictions",e)},n._isBandwidthRestrictionsApplied=function(){var e=!1,t=this._shakaPlayer.getConfiguration();return!t.restrictions||0===t.restrictions.minBandwidth&&t.restrictions.maxBandwidth===1/0||(e=!0),e},n._onShakaPlayerAdaptationEvent=function(){var e=this;if(this._isBandwidthRestrictionsApplied())this._removeShakaListener("adaptation",this._onShakaPlayerAdaptationEvent.bind(this));else{var t=[];this._trackDictionary.forEach(function(n){e._findVideoTrackWithLabel(n.label)||(t.push(n.label),e._log("remove video track with lable: "+n.label))});var n=[],r=!1;if(this._trackDictionary=this._trackDictionary.filter(function(i){var o=!t.includes(i.label);return o||(i.track.active&&(r=!0),n.push(e._generateIdFromTrackIndex(i.track.id))),o}),n.forEach(function(t){var n=e._player.videoTracks().getTrackById(t);n&&e._player.videoTracks().removeTrack(n)}),r){var i=this._findActiveTrackLabel(),o=this._findTrackIdWithLabel(i),a=this._player.videoTracks().getTrackById(o);a&&(this._log("Select new video track with label: "+i),a.selected=!0)}}},n._findTrackIdWithLabel=function(e){if(e)for(var t=0;t<this._trackDictionary.length;t++){var n=this._trackDictionary[t];if(n.label===e)return this._generateIdFromTrackIndex(n.track.id)}return null},n._findActiveTrackLabel=function(){for(var e=this._shakaPlayer.getVariantTracks(),t=0;t<e.length;t++)if(e[t].active)return e[t].label;return null},n._findShakaVideoTrack=function(e){var t=this;return this._find(this._trackDictionary,function(n){return t._generateIdFromTrackIndex(n.track.id)===e.id})},n._findVideoTrackWithLabel=function(e){for(var t=this._shakaPlayer.getVariantTracks(),n=0;n<t.length;n++)if(t[n].label&&t[n].label===e)return!0;return!1},n._isKPTStream=function(){return this._trackDictionary.length>1&&this._isEncryptedStream()},n._log=function(e){this._player.vjsPlayer.log((new Date).toISOString()+":"+e)},n._handlePlaybackMetadataLoadedForVideo=function(){var e=this,n=0;this._shakaPlayer.getVariantTracks().forEach(function(t){if(t.label){var r=e._find(e._trackDictionary,function(e){return e.label===t.label});r?(r.track.maxBandwidth=Math.max(r.track.maxBandwidth,t.bandwidth),r.track.minBandwidth=Math.min(r.track.minBandwidth,t.bandwidth),r.track.active=r.track.active||t.active):e._trackDictionary.push({label:t.label,track:{id:n++,roles:t.roles,language:t.language,accessibility:t.accessibility,minBandwidth:t.bandwidth,maxBandwidth:t.bandwidth,active:t.active}})}}),this._trackDictionary.forEach(function(n){var r=n.label;n.track.roles&&n.track.roles.length&&(r+=" ("+n.track.roles.join(", ")+")"),e._player.videoTracks().addTrack(new t.VideoTrack({selected:n.track.active,id:e._generateIdFromTrackIndex(n.track.id),kind:e._generateKindFromTrack(n),label:r,language:n.track.language}))}),this._tracksChangedListenerHandle=this._videoTracksChangeHandler.bind(this),this._player.videoTracks().addEventListener("change",this._tracksChangedListenerHandle),this._shakaPlayer.addEventListener("unloading",function(){e._player.videoTracks().removeEventListener("change",e._tracksChangedListenerHandle)}),this._isKPTStream()&&(this._log("Register listeners to handle Key Per Track stream."),this._shakaPlayer.addEventListener("adaptation",this._onShakaPlayerAdaptationEvent.bind(this)),this._shakaPlayer.addEventListener("drmsessionupdate",this._onShakaDrmSessionUpdate.bind(this)),this._skipBandwidthRestrictions=!0),this._player.videoTracks().trigger("change")},e}(),y={ShakaVideoTrackHandler:g},v=6999,m={xhrPlugin:c,fetchPlugin:l},b=t.getTech("Html5"),w=function(e){function r(n,r){var i;return i=e.call(this,n,r)||this,i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0),i.vjsPlayer=t(n.playerId),i.player_.ready(function(){i.player_.addClass("vjs-shaka")}),i._initLivePauseTimeUpdate(),i._initErrorClearing(),i._videoTrackHandler=null,i._textTrackHandler=null,i._previousError=null,i}n(r,e);var i=r.prototype;return i.createEl=function(){var e=this;return this.el_=b.prototype.createEl.apply(this,arguments),shaka.polyfill.installAll(),window.AbortController!==shaka.polyfill.AbortController&&shaka.net.HttpFetchPlugin.isSupported()&&(shaka.net.NetworkingEngine.registerScheme("http",m.fetchPlugin,shaka.net.NetworkingEngine.PluginPriority.PREFERRED),shaka.net.NetworkingEngine.registerScheme("https",m.fetchPlugin,shaka.net.NetworkingEngine.PluginPriority.PREFERRED)),shaka.net.NetworkingEngine.registerScheme("http",m.xhrPlugin,shaka.net.NetworkingEngine.PluginPriority.FALLBACK),shaka.net.NetworkingEngine.registerScheme("https",m.xhrPlugin,shaka.net.NetworkingEngine.PluginPriority.FALLBACK),this.shaka_=new shaka.Player,this.shaka_.attach(this.el_,!1),this.shaka_.addEventListener("buffering",function(t){e.vjsPlayer.el_&&(t.buffering?e.vjsPlayer.trigger("waiting"):e.vjsPlayer.paused()||e.vjsPlayer.trigger("playing"))}),this.shaka_.addEventListener("error",function(t){e.retriggerError(t.detail)}),this.el_.tech=this,this.el_},i.setSource=function(e){var t=this;this._audioTrackHandler&&this._audioTrackHandler.dispose(),this._videoTrackHandler&&this._videoTrackHandler.dispose(),this._textTrackHandler&&this._textTrackHandler.dispose();var n=void 0;this.vjsPlayer.cache_&&this.vjsPlayer.cache_.source&&this.vjsPlayer.cache_.source.type&&this.vjsPlayer.cache_.source.src===e.src&&(n=this.vjsPlayer.cache_.source.type),this.shaka_.load(e.src,e.startTime,n).then(function(){t.initShakaMenus(t)}).catch(t._reinjectErrorToListeners.bind(this))},i.duration=function(){var e=this.shaka_.seekRange(),t=e.end-e.start;return this.shaka_.isLive()?-t:t},i.seekable=function(){var e=this.shaka_.seekRange();return{length:1,start:function(){return e.start},end:function(){return e.end}}},i.dispose=function(){this.shaka_&&(this.shaka_.unload(),this.shaka_.destroy()),this._stopLivePauseTimeUpdates(),e.prototype.dispose.call(this)},i.initShakaMenus=function(e){e._textTrackHandler=new h.ShakaTextTrackHandler(e,e.shaka_),e._audioTrackHandler=new p.ShakaAudioTrackHandler(e,e.shaka_),e._videoTrackHandler=new y.ShakaVideoTrackHandler(e,e.shaka_)},i._reinjectErrorToListeners=function(e){this.vjsPlayer&&this.vjsPlayer.otvtoolkit()&&this.vjsPlayer.otvtoolkit().errorReporting&&this.vjsPlayer.otvtoolkit().errorReporting.listener&&this.vjsPlayer.otvtoolkit().errorReporting.listener.errorChanged(e.severity,e.category,e.code,e.message),this.retriggerError(e)},i.retriggerError=function(e){var t;if(e.message&&(e.message.indexOf("UNSUPPORTED")>-1||e.message.indexOf("NOT_SUPPORTED")>-1))t=4;else switch(e.category){case shaka.util.Error.Category.NETWORK:t=2;break;case shaka.util.Error.Category.TEXT:case shaka.util.Error.Category.MEDIA:case shaka.util.Error.Category.MANIFEST:t=3;break;case shaka.util.Error.Category.STREAMING:t=1;break;case shaka.util.Error.Category.DRM:t=5;break;case shaka.util.Error.Category.PLAYER:case shaka.util.Error.Category.CAST:case shaka.util.Error.Category.STORAGE:t=0}if(e.severity===shaka.util.Error.Severity.CRITICAL){null!==this._previousError&&t!==this._previousError&&this._clearError(),this.vjsPlayer.error({code:t,message:e.code+" - "+e.message}),this._previousError=t;6007===e.code&&(this.vjsPlayer.pause(),this.vjsPlayer.otvtoolkit().reset())}},i._clearError=function(){this.vjsPlayer.error(null)},i._initLivePauseTimeUpdate=function(){this.vjsPlayer&&(this.vjsPlayer.on("play",this._stopLivePauseTimeUpdates.bind(this)),this.vjsPlayer.on("pause",this._startLivePauseTimeUpdates.bind(this)))},i._initErrorClearing=function(){this.vjsPlayer&&this.vjsPlayer.on("playing",this._clearError.bind(this))},i._startLivePauseTimeUpdates=function(){if(this.shaka_.isLive()){this.livePauseTimeUpdateInterval&&this._stopLivePauseTimeUpdates();var e=this.vjsPlayer;this.livePauseTimeUpdateInterval=this.vjsPlayer.setInterval(function(){e.trigger({type:"timeupdate",target:e,manuallyTriggered:!0})},250)}},i._stopLivePauseTimeUpdates=function(){this.vjsPlayer.clearInterval(this.livePauseTimeUpdateInterval)},r}(b);w.defaultState={},w.VERSION="0.5.0-nmp-32",w.isSupported=function(){return!!window.MediaSource},w.canPlaySource=function(e,t){return/^(application\/dash\+xml|application\/x-mpegURL)/i.test(e.type)?"probably":""};var _=window.navigator&&window.navigator.userAgent||"",T=/Tizen/i.test(_),S=/Web0S/i.test(_),E=/Edg/i.test(_),k=!E&&(/Chrome/i.test(_)||/CriOS/i.test(_)),A=/CriOS/i.test(navigator.userAgent)&&/iphone|ipod|ipad/i.test(navigator.userAgent),x=/iPod/i.test(_),C=/iPad/i.test(_)||P&&TOUCH_ENABLED&&!/iPhone/i.test(_),I=/iPhone/i.test(_)&&!C,M=I||C||x,O=/Android/i.test(_),P=/Safari/i.test(_)&&!k&&!O&&!E&&!T&&!S,j=(P||M)&&!k,D=t.getTech("Tech");try{if(void 0!==webapis){var R=webapis.productinfo.getFirmware().toLowerCase();(R.includes("nklc")||R.includes("nkm"))&&(console.info("Positive NKLC"),!0)}}catch(e){}var L=j||A;D.registerTech("Shaka",w,L),e.IS_ANDROID=O,e.IS_ANY_SAFARI=j,e.IS_CHROME=k,e.IS_CRIOS=A,e.IS_EDGE=E,e.IS_IOS=M,e.IS_IPAD=C,e.IS_IPHONE=I,e.IS_IPOD=x,e.IS_SAFARI=P,e.IS_TIZEN=T,e.IS_WEBOS=S,e.default=w,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){(function(t){e.exports=t.shaka=n(422)}).call(t,n(18))},function(e,t,n){(function(e){/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
!function(){var n="undefined"!=typeof window?window:e,r={};(function(e,t,n){function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function i(e,t){if(t)e:{var n=e_;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&null!=t&&Zw(n,e,{configurable:!0,writable:!0,value:t})}}function o(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function a(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function s(e){if(!(e instanceof Array)){e=a(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function u(e,t){if(e.prototype=n_(t.prototype),e.prototype.constructor=e,a_)a_(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.nj=t.prototype}function l(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function c(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function d(e,t){e.i={Of:t,Zf:!0},e.g=e.m||e.j}function h(e,t,n){return e.g=n,{value:t}}function f(e){e.g=0}function p(e,t,n){e.m=t,void 0!=n&&(e.j=n)}function g(e,t){e.m=0,e.j=t||0}function y(e,t,n){e.g=t,e.m=n||0}function v(e,t){return e.m=t||0,t=e.i.Of,e.i=null,t}function m(e){e.u=[e.i],e.m=0,e.j=0}function b(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.Zf?e.g=e.m||e.j:void 0!=n.B&&e.j<n.B?(e.g=n.B,e.i=null):e.g=e.j:e.g=t}function w(e){this.g=new l,this.h=e}function _(e,t){c(e.g);var n=e.g.l;return n?T(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),S(e))}function T(e,t,n,r){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.o=!1,i;var o=i.value}catch(t){return e.g.l=null,d(e.g,t),S(e)}return e.g.l=null,r.call(e.g,o),S(e)}function S(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,d(e.g,t)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Zf)throw t.Of;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function E(e){this.next=function(t){return c(e.g),e.g.l?t=T(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=S(e)),t},this.throw=function(t){return c(e.g),e.g.l?t=T(e,e.g.l.throw,t,e.g.s):(d(e.g,t),t=S(e)),t},this.return=function(t){return _(e,t)},this[Symbol.iterator]=function(){return this}}function k(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(r,i){function o(e){e.done?r(e.value):Promise.resolve(e.value).then(t,n).then(o,i)}o(e.next())})}function A(e){return k(new E(new w(e)))}function x(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function I(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}function M(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{Wf:i,v:o}}return{Wf:-1,v:void 0}}function O(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function P(e,t){e=e.split(".");var n=u_;e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||void 0===t?n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}:n[r]=t}/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function j(){}function D(){}function R(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function L(e){return e.h/(1-Math.pow(e.g,e.i))}function N(){this.h=new R(2),this.j=new R(5),this.g=0,this.i=128e3,this.l=16e3}function U(){}function F(){}function B(){}function V(e){var t=x.apply(1,arguments);c_.has(e)||(c_.add(e),B.apply(U,s(t)))}function H(){}function W(){}function K(){}function q(){}function G(){}function z(){}function X(e){function t(){}l_=e,H=1<=l_?console.error.bind(console):t,W=2<=l_?console.warn.bind(console):t,K=3<=l_?console.info.bind(console):t,q=4<=l_?console.log.bind(console):t,G=5<=l_?console.debug.bind(console):t,z=6<=l_?console.debug.bind(console):t}function Y(){e.console&&(B=function(){return console.warn.apply(console,s(x.apply(0,arguments)))},F=function(){return console.error.apply(console,s(x.apply(0,arguments)))},X(0))}function J(){this.g={}}function Q(){this.g=new J}function $(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=Z(e,r),this.target.addEventListener(t,n,this.g)}function Z(e,t){if(void 0==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),ee(e)?t:t.capture||!1}function ee(e){var t=d_;if(void 0==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(e){t=!1}d_=t}return t||!1}function te(t){if(h_.has(t))return h_.get(t);if(e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported(t);return h_.set(t,n),n}return!!e.MediaSource&&(n=MediaSource.isTypeSupported(t),h_.set(t,n),n)}function ne(){return!!e.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}function re(){}function ie(){}function oe(){}function ae(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(se(e)==se(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=le(e);t=le(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function se(e){return e instanceof ArrayBuffer?e:e.buffer}function ue(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function le(e,t,n){return n=void 0===n?1/0:n,he(e,void 0===t?0:t,n,Uint8Array)}function ce(e,t,n){return n=void 0===n?1/0:n,he(e,void 0===t?0:t,n,Uint16Array)}function de(e,t,n){return n=void 0===n?1/0:n,he(e,void 0===t?0:t,n,DataView)}function he(e,t,n,r){var i=se(e),o=1;"BYTES_PER_ELEMENT"in r&&(o=r.BYTES_PER_ELEMENT);var a=((e.byteOffset||0)+e.byteLength)/o;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/o,a))),new r(i,e,Math.floor(Math.min(e+Math.max(n,0),a))-e)}function fe(){}function pe(e){this.l=new ie,(e=f_[e.toLowerCase()])&&(this.l=e()),this.g=new re,(e=p_)&&(this.g=e())}function ge(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function ye(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function ve(e,t,n){if(n||(n=ge),e.length!=t.length)return!1;t=t.slice();var r={};e=a(e);for(var i=e.next();!i.done;r={be:r.be},i=e.next()){if(r.be=i.value,-1==(i=t.findIndex(function(e){return function(t){return n(e.be,t)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function me(e,t,n){if(n||(n=ge),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function be(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Te,this.position=null,this.positionAlign=g_,this.size=0,this.textAlign=y_,this.direction=w_,this.writingMode=__,this.lineInterpretation=T_,this.line=null,this.lineHeight="",this.lineAlign=S_,this.displayAlign=m_,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=x_,this.fontStyle=C_,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Jb:32,rows:15}}function we(e,t){return e=new be(e,t,""),e.lineBreak=!0,e}function _e(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!me(e.nestedCues,t.nestedCues,_e))return!1}else if("region"==n||"cellResolution"==n){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!me(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}function Te(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=M_,this.scroll=O_}function Se(){}function Ee(e,t,n){P_[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,Wd:t}}function ke(e,t){for(var n=e.toLowerCase().split(";")[0],r=a([L_,R_,D_,j_]),i=r.next();!i.done;i=r.next())if(i=P_[n+"-"+i.value]){var o=i.Wd(),s=o.isSupported(e,t);if(o.destroy(),s)return i.Wd}return null}/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
function Ae(e){var t;e instanceof Ae?(xe(this,e.ab),this.Xb=e.Xb,Ce(this,e.mb),Ie(this,e.oc),this.Fa=e.Fa,Me(this,e.g.clone()),this.Kb=e.Kb):e&&(t=String(e).match(N_))?(xe(this,t[1]||"",!0),this.Xb=Oe(t[2]||""),Ce(this,t[3]||"",!0),Ie(this,t[4]),this.Fa=Oe(t[5]||"",!0),Me(this,t[6]||"",!0),this.Kb=Oe(t[7]||"")):this.g=new De(null)}function xe(e,t,n){e.ab=n?Oe(t,!0):t,e.ab&&(e.ab=e.ab.replace(/:$/,""))}function Ce(e,t,n){e.mb=n?Oe(t,!0):t}function Ie(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.oc=t}else e.oc=null}function Me(e,t,n){t instanceof De?e.g=t:(n||(t=Pe(t,V_)),e.g=new De(t))}function Oe(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Pe(e,t,n){return null!=e?(e=encodeURI(e).replace(t,je),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function je(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function De(e){this.g=e||null}function Re(e){if(!e.xa&&(e.xa={},e.Rc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];o=decodeURIComponent(o.replace(/\+/g," ")),i=i||"",e.add(o,decodeURIComponent(i.replace(/\+/g," ")))}}function Le(e){return Re(e),e.Rc}function Ne(e,t,n){var r=x.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1;var i,o=r="UNKNOWN";for(i in K_){K_[i]==this.category&&(r=i);for(var a in q_)q_[a]==this.code&&(o=a)}for(var s in q_)q_[s]==this.code&&(o=s);if(this.message="Shaka Error "+r+"."+o+" ("+this.data.toString()+")",W_)try{throw Error(this.message||"Shaka Error")}catch(e){this.stack=e.stack}for(var u in q_);}function Ue(e,t){if(0==t.length)return e;if(1==e.length&&1==t.length){var n=new Ae(e[0]);return t=new Ae(t[0]),[n.resolve(t).toString()]}t=t.map(function(e){return new Ae(e)}),n=[],e=a(e);for(var r=e.next();!r.done;r=e.next()){r=new Ae(r.value);for(var i=a(t),o=i.next();!o.done;o=i.next())n.push(r.resolve(o.value).toString())}return n}function Fe(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function Be(e,t){if(1==t.length)return t[0];if(null!=(e=Ve(e,t)))return e;throw new Ne(2,4,4025,t)}function Ve(e,t){for(var n=a(Y_[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var i=a(t),o=i.next();!o.done;o=i.next())if(o=o.value,r.test(o.trim()))return o.trim()}return e==G_?"":null}function He(){}function We(e,t){var n=e;return t&&!Q_.includes(e)&&(n+='; codecs="'+t+'"'),n}function Ke(e,t){return t&&(e+='; codecs="'+t+'"'),e}function qe(e,t,n){var r=We(e,t);return t=Ke(e,t),ke(t)?(e=ke(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?r.replace("video","audio"):r,n}function Ge(e,t,n){var r=[t];return J_.forEach(function(t,i){var o=e[i];"codecs"==i?Q_.includes(e.mimeType)||r.push('codecs="'+n+'"'):o&&r.push(t+'="'+o+'"')}),"PQ"==e.hdr&&r.push('eotf="smpte2084"'),r.join(";")}function ze(e){return e.split(";")[0].split("/")[1]}function Xe(e){var t=Ze(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function Ye(e){var t=[];e=a(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Ze(n.value),t.push(n[0]);return t.sort().join(",")}function Je(e){return e.split(";")[0]}function Qe(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function $e(e){return"application/x-mpegurl"===e||"application/vnd.apple.mpegurl"===e}function Ze(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}function et(e){this.i=null,this.j=e,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.A="",this.o=new Map}function tt(e){return!!$_[e]||("application/cea-608"==e||"application/cea-708"==e)&&!!p_}function nt(e,t,n,r,i){var o,a,s,u;return A(function(l){return 1==l.g?h(l,Promise.resolve(),2):e.i&&e.j?null==n||null==r?(e.i.parseInit(le(t)),l.return()):(o=e.u?n:e.s,a={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:o},s=e.i.parseMedia(le(t),a,i),u=s.filter(function(t){return t.startTime>=e.l&&t.startTime<e.m}),e.j.append(u),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),void f(l)):l.return()})}function rt(e,t,n){e.l=t,e.m=n}function it(e,t,n){if(e.A=t,t=e.o.get(t))for(var r=a(t.keys()),i=r.next();!i.done;i=r.next())(i=t.get(i.value).filter(function(e){return e.endTime<=n}))&&e.j.append(i)}function ot(e,t,n){t.startTime+=n,t.endTime+=n,t=a(t.nestedCues);for(var r=t.next();!r.done;r=t.next())ot(e,r.value,n)}function at(e,t,n,r,i){var o=n+" "+r,s=new Map;t=a(t);for(var u=t.next();!u.done;u=t.next()){var l=u.value;u=l.stream,l=l.cue,s.has(u)||s.set(u,new Map),s.get(u).has(o)||s.get(u).set(o,[]),ot(e,l,i),l.startTime>=e.l&&l.startTime<e.m&&(s.get(u).get(o).push(l),u==e.A&&e.j.append([l]))}for(i=a(s.keys()),o=i.next();!o.done;o=i.next())for(o=o.value,e.o.has(o)||e.o.set(o,new Map),t=a(s.get(o).keys()),u=t.next();!u.done;u=t.next())u=u.value,l=s.get(o).get(u),e.o.get(o).set(u,l);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}function st(e,t){return e.concat(t)}function ut(){}function lt(e){return null!=e}function ct(){}function dt(e,t){return e=pt(e),t=pt(t),e.split("-")[0]==t.split("-")[0]}function ht(e,t){return e=pt(e),t=pt(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function ft(e,t){return e=pt(e),t=pt(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function pt(e){e=a(e.split("-x-"));var t=e.next().value;t=void 0===t?"":t,e=e.next().value,e=void 0===e?"":e;var n=a(t.split("-"));return t=n.next().value,t=void 0===t?"":t,n=n.next().value,n=void 0===n?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Z_.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function gt(e,t){return e=pt(e),t=pt(t),t==e?4:ht(t,e)?3:ft(t,e)?2:ht(e,t)?1:0}function yt(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=Z_.get(e)||e}function vt(e){return e.language?pt(e.language):e.audio&&e.audio.language?pt(e.audio.language):e.video&&e.video.language?pt(e.video.language):"und"}function mt(e,t){e=pt(e);var n=new Set,r=a(t);for(t=r.next();!t.done;t=r.next())n.add(pt(t.value));for(r=a(n),t=r.next();!t.done;t=r.next())if((t=t.value)==e)return t;for(r=a(n),t=r.next();!t.done;t=r.next())if(t=t.value,ht(t,e))return t;for(r=a(n),t=r.next();!t.done;t=r.next())if(t=t.value,ft(t,e))return t;for(n=a(n),t=n.next();!t.done;t=n.next())if(t=t.value,ht(e,t))return t;return null}function bt(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e||e.buffer&&e.buffer.constructor==ArrayBuffer)return e;if(n.has(e))return null;var r=e.constructor==Array;if(e.constructor!=Object&&!r)return null;n.add(e);var i,o=r?[]:{};for(i in e)o[i]=t(e[i]);return r&&(o.length=e.length),o}}var n=new WeakSet;return t(e)}function wt(e){var t,n={};for(t in e)n[t]=e[t];return n}function _t(e){this.h=e,this.g=null}function Tt(e){this.h=e,this.g=null}function St(){var t=e.ManagedMediaSource||e.MediaSource;return!(!t||!t.isTypeSupported)}function Et(e){return""!=Nt().canPlayType(e)}function kt(){return!!navigator.userAgent.match(/Edge?\//)}function At(){return Lt("Xbox One")}function xt(){return Lt("Tizen")}function Ct(){return Lt("Tizen 3")}function It(){return Lt("Tizen 2")}function Mt(){return Lt("Web0S")}function Ot(){return Lt("CrKey")}function Pt(){if(!Lt("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function jt(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!xt()&&!Lt("PC=EOS")&&!Lt("PC=APL")&&!Lt("VirginMedia")&&!Lt("SOPOpenBrowser")&&!Dt()&&!Lt("AFT")&&!Lt("WPE")}function Dt(){return Lt("PlayStation 4")}function Rt(){if(!jt())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e?parseInt(e[1],10):(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Lt(e){return(navigator.userAgent||"").includes(e)}function Nt(){return tT||(eT||(eT=new Tt(function(){tT=null})),(tT=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(tT=document.createElement("video")),eT.U(1),tT)}function Ut(){}function Ft(e,t,n,r){var i=e.variants;if((t.length||n.length)&&(i=Bt(i,t,n)),r.length){for(t=new J,n=a(i),i=n.next();!i.done;i=n.next())i=i.value,t.push(String(i.video.width||0),i);var o=[];t.forEach(function(e,t){e=0;var n=[],i={};t=a(t);for(var u=t.next();!u.done;i={Kc:i.Kc},u=t.next())i.Kc=u.value,u=r.filter(function(e){return function(t){return e.Kc.decodingInfos[0][t]}}(i)).length,u>e?(e=u,n=[i.Kc]):u==e&&n.push(i.Kc);o.push.apply(o,s(n))}),i=o}n=new Set,t=new Set;var u=a(i);for(i=u.next();!i.done;i=u.next())i=i.value,i.audio&&n.add(i.audio),i.video&&t.add(i.video);n=Array.from(n).sort(function(e,t){return e.bandwidth-t.bandwidth});var l=[];for(i=new Map,n=a(n),u=n.next();!u.done;u=n.next()){u=u.value;var c=u.language+(u.channelsCount||0)+(u.audioSamplingRate||0)+u.roles.join(",")+u.label+u.groupId+u.fastSwitching,d=i.get(c)||[];if(d.length){var h=d[d.length-1],f=Xe(h.codecs),p=Xe(u.codecs);f==p&&u.bandwidth>h.bandwidth&&(d.push(u),l.push(u.id))}else d.push(u),l.push(u.id);i.set(c,d)}n=Array.from(t).sort(function(e,t){return e.bandwidth&&t.bandwidth?e.bandwidth-t.bandwidth:e.width-t.width}),t=ne();var g=[];for(i=new Map,n=a(n),u=n.next();!u.done;u=n.next()){if(u=u.value,c=Math.round(u.frameRate||0)+(u.hdr||"")+u.fastSwitching,d=i.get(c)||[],d.length){if(h=d[d.length-1],!t&&(f=Xe(h.codecs),p=Xe(u.codecs),f!==p))continue;u.width>h.width||u.height>h.height?(d.push(u),g.push(u.id)):u.width==h.width&&u.height==h.height&&(f=Xe(h.codecs),p=Xe(u.codecs),f==p&&u.bandwidth>h.bandwidth&&(d.push(u),g.push(u.id)))}else d.push(u),g.push(u.id);i.set(c,d)}e.variants=e.variants.filter(function(e){var t=e.audio,n=e.video;return!(t&&!l.includes(t.id)||n&&!g.includes(n.id))||(q("Dropping Variant (better codec available)",e),!1)})}function Bt(e,t,n){var r={};t=a(t);for(var i=t.next();!i.done;r={he:r.he},i=t.next())if(r.he=i.value,i=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.he)}}(r)),i.length){e=i;break}for(r={},n=a(n),t=n.next();!t.done;r={ae:r.ae},t=n.next())if(r.ae=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.ae)}}(r)),t.length){e=t;break}return e}function Vt(e,t,n){e.variants=e.variants.filter(function(e){return Ht(e,t,n)})}function Ht(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;return!(i&&i.width&&i.height&&(!r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))||!r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Wt(e,t,n){var r=!1;e=a(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var o=i.allowedByApplication;i.allowedByApplication=Ht(i,t,n),o!=i.allowedByApplication&&(r=!0)}return r}function Kt(e,t){return A(function(n){return 1==n.g?h(n,qt(e,t,0<t.offlineSessionIds.length),2):(en(t),h(n,tn(t),0))})}function qt(e,t,n){var r,i;return A(function(o){if(1==o.g)return h(o,Jt(t.variants,n,!1,[]),2);r=null,e&&(i=e.g)&&(r=i.keySystem),t.variants=t.variants.filter(function(e){var t=Gt(e,r);if(!t){var n=q,i=[];e.audio&&i.push(gn(e.audio)),e.video&&i.push(gn(e.video)),n("Dropping variant - not compatible with platform",i.join(", "))}return t}),f(o)})}function Gt(e,t){var n=At(),r=Lt("Firefox")&&Lt("Android"),i=e.video,o=i&&i.width||0,a=i&&i.height||0;if(n&&i&&(1920<o||1080<a)&&(i.codecs.includes("avc1.")||i.codecs.includes("avc3.")))return!1;if(i){if(n=Zt(i.codecs),i.codecs.includes(",")){if(o=i.codecs.split(","),n=Be("video",o),n=Zt(n),o=Be("audio",o),o=$t(o),a=qe(i.mimeType,o,"audio"),!te(a))return!1;n=[n,o].join()}if(o=qe(i.mimeType,n,"video"),!te(o))return!1;i.codecs=n}if(i=e.audio,r&&i&&i.encrypted&&i.codecs.toLowerCase().includes("opus"))return!1;if(i){if(r=$t(i.codecs),n=qe(i.mimeType,r,"audio"),!te(n))return!1;i.codecs=r}return e.decodingInfos.some(function(e){return!(!e.supported||t&&(e=e.keySystemAccess)&&e.keySystem!=t)})}function zt(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=a(t);for(var r=t.next();!r.done;r=t.next()){var i=r.value;r=JSON.stringify(i),i=e[i],i instanceof Object?(i=zt(i),n.push(r+":"+i)):(i=JSON.stringify(i),n.push(r+":"+i))}return"{"+n.join(",")+"}"}function Xt(e,t){var n,r,i,o,s,u,l;return A(function(c){if(1==c.g){for(n=function(e,t){if(e){var n=bt(e);return n.supported=e.supported&&t.supported,n.powerEfficient=e.powerEfficient&&t.powerEfficient,n.smooth=e.smooth&&t.smooth,t.keySystemAccess&&!n.keySystemAccess&&(n.keySystemAccess=t.keySystemAccess),n}return t},r=null,i=[],o={},s=a(t),u=s.next();!u.done;o={wc:o.wc,$b:o.$b},u=s.next())l=u.value,o.$b=zt(l),o.wc=nT,o.wc[o.$b]?(z("Using cached results of mediaCapabilities.decodingInfo","for key",o.$b),r=n(r,o.wc[o.$b])):i.push(Yt(l).then(function(e){return function(t){var i=null;t=a(t||[]);for(var o=t.next();!o.done;o=t.next())i=n(i,o.value);i&&(e.wc[e.$b]=i,r=n(r,i))}}(o)));return h(c,Promise.all(i),2)}r&&e.decodingInfos.push(r),f(c)})}function Yt(e){var t=[""];e.video&&(t=Qe(e.video.contentType).split(","));var n=[""];e.audio&&(n=Qe(e.audio.contentType).split(","));var r=[];t=a(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;for(var o={},s=a(n),u=s.next();!u.done;o={Eb:o.Eb},u=s.next())u=u.value,o.Eb=bt(e),e.video&&(o.Eb.video.contentType=We(Je(o.Eb.video.contentType),i)),e.audio&&(o.Eb.audio.contentType=We(Je(o.Eb.audio.contentType),u)),r.push(new Promise(function(e){return function(t,n){navigator.mediaCapabilities.decodingInfo(e.Eb).then(function(e){t(e)}).catch(n)}}(o)))}return Promise.all(r).catch(function(t){return K("MediaCapabilities.decodingInfo() failed.",JSON.stringify(e),t),null})}function Jt(e,t,n,r){var i,o,s,u,l,c,d,f,p,g,y,v,m,b,w,_,T;return A(function(S){switch(S.g){case 1:if(i=e.some(function(e){return e.decodingInfos.length}))return q("Already got the variants' decodingInfo."),S.return();o={},s=a(r),u=s.next();case 2:if(u.done){S.B(4);break}o.ce=u.value,l=!1,c=a(e),d=c.next();case 5:if(d.done){S.B(7);break}f=d.value,p=Qt(f,t,n).filter(function(e){return function(t){return t=t[0],(t.keySystemConfiguration&&t.keySystemConfiguration.keySystem)===e.ce}}(o)),g=a(p),y=g.next();case 8:if(y.done){S.B(10);break}return v=y.value,h(S,Xt(f,v),9);case 9:y=g.next(),S.B(8);break;case 10:f.decodingInfos.length&&(l=!0),d=c.next(),S.B(5);break;case 7:if(l)return S.return();o={ce:o.ce},u=s.next(),S.B(2);break;case 4:m=a(e),d=m.next();case 12:if(d.done){S.B(0);break}b=d.value,w=Qt(b,t,n).filter(function(e){return e=e[0],!(e=e.keySystemConfiguration&&e.keySystemConfiguration.keySystem)||!r.includes(e)}),_=a(w),y=_.next();case 15:if(y.done){d=m.next(),S.B(12);break}return T=y.value,h(S,Xt(b,T),16);case 16:y=_.next(),S.B(15)}})}function Qt(e,t,n){var r=e.audio,i=e.video,o=[],s=[];if(i)for(var u=a(i.fullMimeTypes),l=u.next();!l.done;l=u.next()){l=l.value;var c=Qe(l);if(c.includes(",")&&!r){var d=c.split(",");c=Be("video",d),d=Be("audio",d),d=$t(d),d=qe(Je(l),d,"audio"),s.push({contentType:d,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(c=Zt(c),l={contentType:qe(Je(l),c,"video"),width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||1},i.hdr)switch(i.hdr){case"SDR":l.transferFunction="srgb";break;case"PQ":l.transferFunction="pq";break;case"HLG":l.transferFunction="hlg"}o.push(l)}if(r)for(u=a(r.fullMimeTypes),l=u.next();!l.done;l=u.next())l=l.value,c=$t(Qe(l)),l=qe(Je(l),c,"audio"),s.push({contentType:l,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(u=[],0==o.length&&o.push(null),0==s.length&&s.push(null),o=a(o),l=o.next();!l.done;l=o.next())for(l=l.value,c=a(s),d=c.next();!d.done;d=c.next()){d=d.value;var h={type:n?"file":"media-source"};l&&(h.video=l),d&&(h.audio=d),u.push(h)}if(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!s.length)return[u];e=[],n=new Map,s=a(s);for(var f=s.next();!f.done;f=s.next())o=f.value,n.get(o.keySystem)||n.set(o.keySystem,[]),n.get(o.keySystem).push(o);for(s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],o=a(n.keys()),l=o.next();!l.done;l=o.next()){for(l=l.value,c=[],d=a(u),h=d.next();!h.done;h=d.next()){h=Object.assign({},h.value);var p=n.get(l),g={keySystem:l,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t};for(p=a(p),f=p.next();!f.done;f=p.next()){if(f=f.value,f.initData&&f.initData.length){for(var y=new Set,v=a(f.initData),m=v.next();!m.done;m=v.next())y.add(m.value.initDataType);1<y.size&&z("DrmInfo contains more than one initDataType,","and we use the initDataType of the first initData.",f),g.initDataType=f.initData[0].initDataType}f.distinctiveIdentifierRequired&&(g.distinctiveIdentifier="required"),f.persistentStateRequired&&(g.persistentState="required"),f.sessionType&&(g.sessionTypes=[f.sessionType]),r&&(""!=f.audioRobustness?g.audio?g.audio.robustness=g.audio.robustness||f.audioRobustness:g.audio={robustness:f.audioRobustness}:g.audio||(g.audio={})),i&&(""!=f.videoRobustness?g.video?g.video.robustness=g.video.robustness||f.videoRobustness:g.video={robustness:f.videoRobustness}:g.video||(g.video={}))}h.keySystemConfiguration=g,c.push(h)}e.push(c)}return e}function $t(e){return"flac"==e.toLowerCase()?Rt()?"fLaC":"flac":"Opus"===e?"opus":e}function Zt(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function en(e){e.textStreams=e.textStreams.filter(function(e){var t=We(e.mimeType,e.codecs);return(t=tt(t))||q("Dropping text stream. Is not supported by the platform.",e),t})}function tn(e){var t,n,r,i,o,s,u,l;return A(function(c){switch(c.g){case 1:t=[],n=a(e.imageStreams),r=n.next();case 2:if(r.done){c.B(4);break}if(i=r.value,o=i.mimeType,"application/mp4"==o&&"mjpg"==i.codecs&&(o="image/jpg"),iT.has(o)){c.B(5);break}if(!(s=oT.get(o))){iT.set(o,!1),c.B(5);break}return h(c,nn(s),7);case 7:u=c.h,iT.set(o,u);case 5:(l=iT.get(o))?t.push(i):q("Dropping image stream. Is not supported by the platform.",i),r=n.next(),c.B(2);break;case 4:e.imageStreams=t,f(c)}})}function nn(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(2===n.height)}})}function rn(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,i=n?n.mimeType:null,o=t?t.codecs:null,s=n?n.codecs:null,u=[];s&&u.push(s),o&&u.push(o);var l=[];n&&l.push(n.mimeType),t&&l.push(t.mimeType),l=l[0]||null;var c=[];t&&c.push(t.kind),n&&c.push(n.kind),c=c[0]||null;var d=new Set;if(t)for(var h=a(t.roles),f=h.next();!f.done;f=h.next())d.add(f.value);if(n)for(h=a(n.roles),f=h.next();!f.done;f=h.next())d.add(f.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:e.label,kind:c,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:l,audioMimeType:r,videoMimeType:i,codecs:u.join(", "),audioCodec:o,videoCodec:s,primary:e.primary,roles:Array.from(d),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioChannelConfig=t.audioChannelConfig,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=e.label||t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function on(e){return{id:e.id,active:!1,type:G_,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function an(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var i=e.tilesLayout;return r&&(i=r.tilesLayout||i),i&&null!=t&&(t/=Number(i.split("x")[0])),i&&null!=n&&(n/=Number(i.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:i||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function sn(e){return e.__shaka_id||(e.__shaka_id=rT++),e.__shaka_id}function un(e){var t=cn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="unknown"),"subtitles"==e.kind&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function ln(e){var t=cn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function cn(e){var t=e.language;return{id:sn(e),active:!1,type:"",bandwidth:0,language:pt(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function dn(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function hn(e){return e.filter(function(e){return dn(e)})}function fn(e,t,n,r){var i=e,o=e.filter(function(e){return e.primary});o.length&&(i=o);var a=i.length?i[0].language:"";if(i=i.filter(function(e){return e.language==a}),t){var s=mt(pt(t),e.map(function(e){return e.language}));s&&(i=e.filter(function(e){return pt(e.language)==s}))}if(i=i.filter(function(e){return e.forced==r}),n){if(e=pn(i,n),e.length)return e;W("No exact match for the text role could be found.")}else if(e=i.filter(function(e){return 0==e.roles.length}),e.length)return e;return e=i.map(function(e){return e.roles}).reduce(st,[]),e.length?pn(i,e[0]):i}function pn(e,t){return e.filter(function(e){return e.roles.includes(t)})}function gn(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function yn(){var e=this;this.u=null,this.j=!1,this.i=new N,this.F=new Q,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new N,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.u(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.o=[],this.A=1,this.G=!1,this.h=this.m=this.g=this.s=null,this.C=new Tt(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.u(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.l=null}function vn(e){if(z("Suggesting Streams..."),e.G){if(Date.now()-e.s<1e3*e.g.switchInterval)return void z("Still within switch interval...")}else{var t=e.i;if(!(t.g>=t.i))return void z("Still waiting for a good estimate...");e.G=!0}t=e.chooseVariant();var n=e.getBandwidthEstimate();n=Math.round(n/1e3),t&&(q("Calling switch_(), bandwidth="+n+" kbps"),e.u(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function mn(e,t,n,r,i){if(e.l){var o=e.l.Tf();o&&(n=n.filter(function(e){return!e.bandwidth||!o||e.bandwidth<=o}))}return t&&(n=n.filter(function(e){return Ht(e,t,{width:i,height:r})})),n.sort(function(e,t){return e.bandwidth-t.bandwidth})}function bn(e){var t=[];e=a(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(e,t){return e.width-t.width})}function wn(e,t){this.g=e,this.h=t}function _n(e,t){var n=new wn(5,0),r=sT,i=r.g,o=n.h-i.h;(0<(n.g-i.g||o)?r.i:r.h)(r.g,n,e,t)}function Tn(e,t,n,r){B([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Sn(e,t,n,r){F([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}function En(e,t,n,r){for(n=void 0===n||n,r=void 0!==r&&r,this.h=e,this.g=new Set([e]),t=t||[],e=a(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}function kn(e,t,n,r){var i;if(!(i=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(i=e.audio&&t.audio)){i=e.audio;var o=t.audio;i=!!((!i.channelsCount||!o.channelsCount||2<i.channelsCount||2<o.channelsCount)&&i.channelsCount!=o.channelsCount||i.audioChannelConfig!=o.audioChannelConfig||i.accessibilityPurpose!=o.accessibilityPurpose||n&&!An(i,o)||!xn(i.roles,o.roles)||r&&i.groupId!==o.groupId)}return!(r=i)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||An(e,t))&&xn(e.roles,t.roles))),!r}function An(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map(function(e){return Ye(e)}),t=t.codecs.split(",").map(function(e){return Ye(e)}),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function xn(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=a(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Cn(e,t,n){t=void 0===t?"reload":t,n=void 0!==n&&n,this.i=e,this.h=t,this.g=n,this.j=new In(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n,e.audio&&e.audio.audioChannelConfig?e.audio.audioChannelConfig:"",e.audio&&e.audio.accessibilityPurpose?e.audio.accessibilityPurpose:void 0)}function In(e,t,n,r,i,o,a,s,u,l,c,d){this.A=e,this.C=t,this.j=n,this.h=void 0===c?"":c,this.g=void 0===d?"":d,this.l=r,this.F=i,this.o=o,this.i=void 0===a?"":a,this.m=void 0===s?"":s,this.s=void 0===u?"reload":u,this.u=void 0!==l&&l}function Mn(e,t){t=pt(t);var n=mt(t,e.map(function(e){return vt(e)}));return n?e.filter(function(e){return n==vt(e)}):[]}function On(e,t){return e.filter(function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)})}function Pn(e,t){return e.filter(function(e){return!(!e.audio||!e.audio.label)&&e.audio.label.toLowerCase()==t.toLowerCase()})}function jn(e,t){return e.filter(function(e){return!(!e.video||!e.video.label)&&e.video.label.toLowerCase()==t.toLowerCase()})}function Dn(e,t){return e.filter(function(e){return!e.audio||!e.audio.channelsCount||e.audio.channelsCount==t})}function Rn(e,t){return e.filter(function(e){return!e.audio||!e.audio.audioChannelConfig||e.audio.audioChannelConfig==t})}function Ln(e,t){return e.filter(function(e){return!e.audio||e.audio.accessibilityPurpose==t})}function Nn(t,n){return"AUTO"==n&&(n=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),t.filter(function(e){return!e.video||!e.video.hdr||e.video.hdr==n})}function Un(e,t){return e.filter(function(e){return!e.video||!e.video.videoLayout||e.video.videoLayout==t})}function Fn(e,t){return e.filter(function(e){return!e.audio||e.audio.spatialAudio==t})}function Bn(){this.g=lT,this.h=(new Map).set(lT,2).set(uT,1)}function Vn(e,t,n){e.h.set(lT,n).set(uT,t)}function Hn(e,t){var n=Kn();this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function Wn(e){var t,n;return A(function(r){if(1==r.g){if(e.g>=e.l){if(!e.i)throw new Ne(2,7,1010);e.g=1,e.h=e.j}return t=e.g,(e.g++,0==t)?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),h(r,new Promise(function(e){new Tt(e).U(n/1e3)}),2))}e.h*=e.m,f(r)})}function Kn(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function qn(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function Gn(e,t){this.promise=e,this.i=t,this.g=!1}function zn(e){return new Gn(Promise.reject(e),function(){return Promise.resolve()})}function Xn(){var e=Promise.reject(new Ne(2,7,7001));return e.catch(function(){}),new Gn(e,function(){return Promise.resolve()})}function Yn(e){return new Gn(Promise.resolve(e),function(){return Promise.resolve()})}function Jn(e){return new Gn(e,function(){return e.catch(function(){})})}function Qn(e){return new Gn(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function $n(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}function Zn(t,n){if(n)if(n instanceof Map)for(var r=a(n.keys()),i=r.next();!i.done;i=r.next())i=i.value,Object.defineProperty(this,i,{value:n.get(i),writable:!0,enumerable:!0});else for(r in n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function er(e){var t,n=new Zn(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}function tr(){this.ha=new J,this.Cd=this}function nr(){this.g=[]}function rr(e,t){e.g.push(t.finally(function(){ye(e.g,t)}))}function ir(e,t,n,r,i){tr.call(this),this.i=!1,this.m=new nr,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.u=r||null,this.A=i||null,this.o=!1}function or(e,t,n,r){n=n||hT;var i=fT[e];(!i||n>=i.priority)&&(fT[e]={priority:n,Wd:t,Mh:void 0!==r&&r})}function ar(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function sr(e,t,n,r){function i(e){o=o.oa(function(){return n.body&&(n.body=ue(n.body)),e(t,n,r)})}var o=Yn(void 0);e.u&&i(e.u),e=a(e.g);for(var s=e.next();!s.done;s=e.next())i(s.value);return o.oa(void 0,function(e){if(e instanceof Ne&&7001==e.code)throw e;throw new Ne(2,1,1006,e)})}function ur(e,t,n,r,i,o,a,s){e.o&&(n.uris[o]=n.uris[o].replace("http://","https://")),0<o&&e.A&&e.A(t,r,n.uris[o],n.uris[o-1]);var u=new Ae(n.uris[o]),l=u.ab,c=!1;l||(l=location.protocol,l=l.slice(0,-1),xe(u,l),n.uris[o]=u.toString()),l=l.toLowerCase();var d=(l=fT[l])?l.Wd:null;if(!d)return zn(new Ne(2,1,1e3,u));var h,f=l.Mh,p=null,g=null,y=!1,v=!1;return Jn(Wn(i)).oa(function(){if(e.i)return Xn();h=Date.now();var i=d(n.uris[o],n,t,function(n,i,o){p&&p.stop(),g&&g.U(u/1e3),e.l&&t==dT&&(e.l(n,i,cr(r)),c=!0,s.g=o)},function(r){e.j&&e.j(r,n,t),v=!0});if(!f)return i;var a=n.retryParameters.connectionTimeout;a&&(p=new Tt(function(){y=!0,i.abort()}),p.U(a/1e3));var u=n.retryParameters.stallTimeout;return u&&(g=new Tt(function(){y=!0,i.abort()})),i}).oa(function(r){p&&p.stop(),g&&g.stop(),void 0==r.timeMs&&(r.timeMs=Date.now()-h);var i={response:r,uh:c};return!v&&e.j&&e.j(r.headers,n,t),i},function(u){if(p&&p.stop(),g&&g.stop(),e.s){var l=null,c=0;u instanceof Ne&&(l=u,1001==u.code&&(c=u.data[1])),e.s(n,l,c,y)}if(e.i)return Xn();if(y&&(u=new Ne(1,1,1003,n.uris[o],t)),u instanceof Ne){if(7001==u.code)throw u;if(1010==u.code)throw a;if(1==u.severity)return l=(new Map).set("error",u),l=new Zn("retry",l),e.dispatchEvent(l),o=(o+1)%n.uris.length,ur(e,t,n,r,i,o,u,s)}throw u})}function lr(e,t,n,r){var i=Yn(void 0),o={};e=a(e.h);for(var s=e.next();!s.done;o={ee:o.ee},s=e.next())o.ee=s.value,i=i.oa(function(e){return function(){var i=n.response;return i.data&&(i.data=ue(i.data)),e.ee(t,i,r)}}(o));return i.oa(function(){return n},function(e){var t=2;if(e instanceof Ne){if(7001==e.code)throw e;t=e.severity}throw new Ne(t,1,1007,e)})}function cr(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.cd)return!1}return!0}function dr(){this.g=0}function hr(e,t,n){Gn.call(this,e,t),this.h=n}function fr(e){this.g=!1,this.h=new qn,this.i=e}function pr(e,t){if(e.g){if(t instanceof Ne&&7003==t.code)throw t;throw new Ne(2,7,7003,t)}}function gr(e,t){var n=[];e=a(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function yr(e,t){e=a(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function vr(e){this.h=e,this.g=void 0}function mr(e){for(var t=new Map,n=a(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function br(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}function wr(){}function _r(t){if(!t)return"";if(t=le(t),239==t[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!Dt())return t=(new TextDecoder).decode(t),t.includes("�")&&F('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",r=0;r<t.length;++r){var i=65533;if(0==(128&t[r])?i=t[r]:t.length>=r+2&&192==(224&t[r])&&128==(192&t[r+1])?(i=(31&t[r])<<6|63&t[r+1],r+=1):t.length>=r+3&&224==(240&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])?(i=(15&t[r])<<12|(63&t[r+1])<<6|63&t[r+2],r+=2):t.length>=r+4&&240==(241&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])&&128==(192&t[r+3])&&(i=(7&t[r])<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3],r+=3),65535>=i)n+=String.fromCharCode(i);else{i-=65536;var o=1023&i;n+=String.fromCharCode(55296+(i>>10)),n+=String.fromCharCode(56320+o)}}return n}function Tr(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw H("Data has an incorrect length, must be even."),new Ne(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=de(e);for(var i=0;i<n;i++)r[i]=e.getUint16(2*i,t);return Ar(r)}function Sr(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=le(e);if(239==n[0]&&187==n[1]&&191==n[2])return _r(n);if(254==n[0]&&255==n[1])return Tr(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Tr(n.subarray(2),!0);if(q("Unable to find byte-order-mark, making an educated guess."),0==n[0]&&0==n[2])return Tr(e,!1);if(0==n[1]&&0==n[3])return Tr(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return _r(e);throw new Ne(2,2,2003)}function Er(t){if(e.TextEncoder&&!Dt()){var n=new TextEncoder;return ue(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var r=0;r<t.length;r++)n[r]=t[r].charCodeAt(0);return ue(n)}function kr(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n}function Ar(e){return pT.value()(e)}function xr(e,t){this.h=de(e),this.i=t==gT,this.g=0}function Cr(){return new Ne(2,3,3e3)}function Ir(){this.i=[],this.h=[],this.g=!1}function Mr(e){for(var t=Nr(e);e.reader.ea()&&!e.parser.g;)e.parser.nc(e.start+t,e.reader,e.partialOkay)}function Or(e){for(var t=Nr(e),n=e.reader.M(),r=0;r<n&&(e.parser.nc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function Pr(e){var t=Nr(e);for(e.reader.skip(78);e.reader.ea()&&!e.parser.g;)e.parser.nc(e.start+t,e.reader,e.partialOkay)}function jr(e){var t=Nr(e);e.reader.skip(8);var n=e.reader.ya();for(e.reader.skip(6),2==n?e.reader.skip(48):e.reader.skip(12),1==n&&e.reader.skip(16);e.reader.ea()&&!e.parser.g;)e.parser.nc(e.start+t,e.reader,e.partialOkay)}function Dr(e){return function(t){e(t.reader.rb(t.reader.getLength()-t.reader.pa()))}}function Rr(e){var t=0;e=a(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Lr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Nr(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}function Ur(){}function Fr(e){return e=Ar(le(e)),btoa(e)}function Br(e,t){return t=void 0==t||t,e=Fr(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Vr(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function Hr(t){for(var n=t.length/2,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.parseInt(t.substr(2*i,2),16);return r}function Wr(e){var t=le(e);e="",t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),1==n.length&&(n="0"+n),e+=n;return e}function Kr(){for(var e=x.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var i=e[r];i instanceof Uint8Array?t.set(i,n):t.set(le(i),n),n+=i.byteLength}return t}function qr(e){var t=this;this.g=[],this.h=[],this.data=[],(new Ir).box("moov",Mr).box("moof",Mr).O("pssh",function(e){if(1<e.version)W("Unrecognized PSSH version found!");else{var n=le(e.reader.h,-12,e.size);if(t.data.push(n),t.g.push(Wr(e.reader.rb(16))),0<e.version){n=e.reader.M();for(var r=0;r<n;r++){var i=Wr(e.reader.rb(16));t.h.push(i)}}}}).parse(e),0==this.data.length&&z("No pssh box found!")}function Gr(e,t,n,r){var i=e.length,o=t.length+16+i;0<r&&(o+=4+16*n.size);var s=new Uint8Array(o),u=de(s),l=0;if(u.setUint32(l,o),l+=4,u.setUint32(l,1886614376),l+=4,1>r?u.setUint32(l,0):u.setUint32(l,16777216),l+=4,s.set(t,l),l+=t.length,0<r)for(u.setUint32(l,n.size),l+=4,t=a(n),n=t.next();!n.done;n=t.next())n=Hr(n.value),s.set(n,l),l+=n.length;return u.setUint32(l,i),s.set(e,l+4),s}function zr(e,t){return e=Yr(e,t),1!=e.length?null:e[0]}function Xr(e,t,n){return e=Qr(e,t,n),1!=e.length?null:e[0]}function Yr(e,t){var n=[];e=a(e.childNodes);for(var r=e.next();!r.done;r=e.next())(r=r.value)instanceof Element&&r.tagName==t&&n.push(r);return n}function Jr(e){return Array.from(e.childNodes).filter(function(e){return e instanceof Element})}function Qr(e,t,n){var r=[];e=a(e.childNodes);for(var i=e.next();!i.done;i=e.next())(i=i.value)instanceof Element&&i.localName==n&&i.namespaceURI==t&&r.push(i);return r}function $r(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Zr(e,t,n){t=a(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,e.hasAttributeNS(r,n))return e.getAttributeNS(r,n);return null}function ei(e){return Array.from(e.childNodes).every(ti)?e.textContent.trim():null}function ti(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function ni(e,t,n,r){r=void 0===r?null:r;var i=null;return e=e.getAttribute(t),null!=e&&(i=n(e)),null==i?r:i}function ri(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function ii(e){if(!e)return null;var t=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);return t?(e=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(e)?e:null):(W("Invalid duration string:",e),null)}function oi(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function ai(e){return e=Number(e),0==e%1?e:null}function si(e){return e=Number(e),0==e%1&&0<e?e:null}function ui(e){return e=Number(e),0==e%1&&0<=e?e:null}function li(e){return e=Number(e),isNaN(e)?null:e}function ci(e){return!!e&&"true"===e.toLowerCase()}function di(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function hi(e,t){var n=new DOMParser,r=mT.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(e){return H("XML parsing exception:",e),null}if(!(n=e.documentElement))return H("XML document was empty!"),null;if(r=n.getElementsByTagName("parsererror"),r.length)return H("XML parser error found:",r[0]),null;if(n.tagName!=t)return H('XML tag name does not match expected "'+t+'":',n.tagName),null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return H("XML document embeds unsafe content!"),null;return n}function fi(e,t){try{return hi(Sr(e),t)}catch(e){return H("parseXmlString threw!",e),null}}function pi(e,t){var n=this;t=void 0===t?1:t,this.C=e,this.H=new Set,this.m=this.u=this.V=null,this.na=this.ca=!1,this.J=0,this.g=null,this.A=new Q,this.i=new Map,this.o=new Map,this.j=new qn,this.h=null,this.s=function(t){2==t.severity&&n.j.reject(t),e.onError(t)},this.Y=new Map,this.ga=new Map,this.K=new Tt(function(){return Ui(n)}),this.N=!1,this.L=[],this.W=!1,this.ha=new Tt(function(){qi(n)}).$a(t),this.j.catch(function(){}),this.l=new fr(function(){return gi(n)}),this.ba=!1,this.F=this.G=null}function gi(e){return A(function(t){switch(t.g){case 1:return e.A.release(),e.A=null,e.j.reject(),e.ha.stop(),e.ha=null,e.K.stop(),e.K=null,h(t,Vi(e),2);case 2:if(!e.m){t.B(3);break}return p(t,4),h(t,e.m.setMediaKeys(null),6);case 6:y(t,5);break;case 4:v(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.u=null,e.o=new Map,e.h=null,e.s=function(){},e.C=null,e.ba=!1,e.G=null,f(t)}})}function yi(e,t,n){return e.na=!0,e.o=new Map,e.N=n,bi(e,t)}function vi(e,t,n){e.o=new Map,n=a(n);for(var r=n.next();!r.done;r=n.next())e.o.set(r.value,{initData:null,initDataType:null});for(n=a(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.o.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.N=0<e.o.size,bi(e,t)}function mi(e,t,n,r,i,o){var a=new Map;return i={audioCapabilities:i,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},i.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],a.set(t,i),Ci(e,a,[])}function bi(e,t){var n,r,i,o,s,u,l,c,d,f,p,g,y,v,m,b,w;return A(function(_){if(1==_.g){if(n=Oi(e))for(r=a(t),i=r.next();!i.done;i=r.next())o=i.value,o.video&&(o.video.drmInfos=[n]),o.audio&&(o.audio.drmInfos=[n]);for(s=t.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}),s||(u=mr(e.h.servers),Xi(t,u)),l=new Set,c=a(t),i=c.next();!i.done;i=c.next())for(d=i.value,f=Ki(d),p=a(f),g=p.next();!g.done;g=p.next())y=g.value,l.add(y);for(v=a(l),g=v.next();!g.done;g=v.next())m=g.value,Ji(m,mr(e.h.servers),mr(e.h.advanced||{}),e.h.keySystemsMapping);return h(_,Jt(t,e.N,e.ba,e.h.preferredKeySystems),2)}return(b=s||Object.keys(e.h.servers).length)?(w=Ci(e,void 0,t),_.return(s?w:w.catch(function(){}))):(e.ca=!0,_.return(Promise.resolve()))})}function wi(e){var t;return A(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.B(2);break}return h(n,e.G,3);case 3:return pr(e.l),n.return();case 2:return p(n,4),e.G=e.m.setMediaKeys(e.u),h(n,e.G,6);case 6:y(n,5);break;case 4:t=v(n),e.s(new Ne(2,6,6003,t.message));case 5:pr(e.l),f(n)}})}function _i(e,t){return A(function(n){if(1==n.g)return h(n,wi(e),2);ki(e,t.initDataType,le(t.initData)),f(n)})}function Ti(e){var t,n,r,i,o,a;return A(function(s){switch(s.g){case 1:if(!e.u||!e.g)return s.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){s.B(2);break}return t=ar([e.g.serverCertificateUri],e.h.retryParameters),p(s,3),n=e.C.Ub.request(5,t),h(s,n.promise,5);case 5:r=s.h,e.g.serverCertificate=le(r.data),y(s,4);break;case 3:throw i=v(s),new Ne(2,6,6017,i);case 4:if(e.l.g)return s.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(p(s,6),h(s,e.u.setServerCertificate(e.g.serverCertificate),8)):s.return();case 8:(o=s.h)||W("Server certificates are not supported by the key system.  The server certificate has been ignored."),y(s,0);break;case 6:throw a=v(s),new Ne(2,6,6004,a.message)}})}function Si(e,t){var n,r,i;return A(function(o){return 1==o.g?h(o,Di(e,t,{initData:null,initDataType:null}),2):3!=o.g?(n=o.h)?(r=[],(i=e.i.get(n))&&(i.Qa=new qn,r.push(i.Qa)),z("Attempting to remove session",t),r.push(n.remove()),h(o,Promise.all(r),3)):(z("Ignoring attempt to remove missing session",t),o.return()):(e.i.delete(n),void f(o))})}function Ei(e){var t,n,r,i,o;return A(function(s){if(1==s.g)return e.o.size?(e.o.forEach(function(t,n){Di(e,n,t)}),h(s,e.j,3)):s.B(2);if(2!=s.g){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&zi(e))return s.return(e.j);e.j=new qn,e.j.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=a(n),i=r.next();!i.done;i=r.next())o=i.value,ki(e,o.initDataType,o.initData);return Gi(e)&&e.j.resolve(),s.return(e.j)})}function ki(e,t,n){if(n.length){if(!It()){var r=!1;if(e.V){var i=ST.get(e.g.keySystem),o=new qr(n);if(0<=(i=o.g.indexOf(i))){r=o.data[i];var s=e.Vc();s=a(e.V(r,s)),r=s.next().value,s=s.next().value}}if(r&&!s)return void q("Ignoring init data.");if(!r)for(r=e.i.values(),r=a(r),s=r.next();!s.done;s=r.next())if(ae(n,s.value.initData))return void q("Ignoring duplicate init data.")}0<e.i.size&&Gi(e)&&(e.j.resolve(),e.j=new qn,e.j.catch(function(){})),Ri(e,t,n,e.g.sessionType)}}function Ai(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function xi(e){return e=e.i.keys(),e=gr(e,function(e){return e.sessionId}),Array.from(e)}function Ci(e,t,n){var r,i,o,s,u,l,c,d,f,g,m,b,w,_,T;return A(function(S){switch(S.g){case 1:if(r=new Map,n.length){i=Ii(e,n,r),S.B(2);break}return h(S,Mi(e,t),3);case 3:i=S.h;case 2:if(!(o=i))throw new Ne(2,6,6001);for(pr(e.l),p(S,4),e.H.clear(),s=o.getConfiguration(),z("Got MediaKeySystemAccess with configuration",s),u=s.audioCapabilities||[],l=s.videoCapabilities||[],c=a(u),d=c.next();!d.done;d=c.next())f=d.value,e.H.add(f.contentType.toLowerCase());for(g=a(l),d=g.next();!d.done;d=g.next())m=d.value,e.H.add(m.contentType.toLowerCase());if(n.length){var E=o.keySystem,k=r.get(o.keySystem),A=[],x=[],C=[],I=[],M=new Set;Yi(k,A,C,x,I,M),1<C.length&&W("Multiple unique server certificates found! Only the first will be used."),1<A.length&&W("Multiple unique license server URIs found! Only the first will be used."),1<x.length&&W("Multiple unique server certificate URIs found! Only the first will be used.");var O=e.N?"persistent-license":"temporary";for(E={keySystem:E,licenseServerUri:A[0],distinctiveIdentifierRequired:k[0].distinctiveIdentifierRequired,persistentStateRequired:k[0].persistentStateRequired,sessionType:k[0].sessionType||O,audioRobustness:k[0].audioRobustness||"",videoRobustness:k[0].videoRobustness||"",serverCertificate:C[0],serverCertificateUri:x[0],initData:I,keyIds:M},k=a(k),A=k.next();!A.done;A=k.next())A=A.value,A.distinctiveIdentifierRequired&&(E.distinctiveIdentifierRequired=A.distinctiveIdentifierRequired),A.persistentStateRequired&&(E.persistentStateRequired=A.persistentStateRequired);k=E}else k=o.keySystem,E=t.get(o.keySystem),A=[],x=[],C=[],I=[],M=new Set,Yi(E.drmInfos,A,C,x,I,M),1<C.length&&W("Multiple unique server certificates found! Only the first will be used."),1<x.length&&W("Multiple unique server certificate URIs found! Only the first will be used."),1<A.length&&W("Multiple unique license server URIs found! Only the first will be used."),k={keySystem:k,licenseServerUri:A[0],distinctiveIdentifierRequired:"required"==E.distinctiveIdentifier,persistentStateRequired:"required"==E.persistentState,sessionType:E.sessionTypes[0]||"temporary",audioRobustness:(E.audioCapabilities?E.audioCapabilities[0].robustness:"")||"",videoRobustness:(E.videoCapabilities?E.videoCapabilities[0].robustness:"")||"",serverCertificate:C[0],serverCertificateUri:x[0],initData:I,keyIds:M};if(e.g=k,!e.g.licenseServerUri)throw new Ne(2,6,6012,e.g.keySystem);return h(S,o.createMediaKeys(),6);case 6:if(b=S.h,pr(e.l),K("Created MediaKeys object for key system",e.g.keySystem),e.u=b,!(""!=e.h.minHdcpVersion&&"getStatusForPolicy"in e.u)){S.B(7);break}return p(S,8),h(S,e.u.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if("usable"!=(w=S.h))throw new Ne(2,6,6018);pr(e.l),y(S,7,4);break;case 8:if((_=v(S,4))instanceof Ne)throw _;throw new Ne(2,6,6019,_.message);case 7:return e.ca=!0,h(S,Ti(e),11);case 11:pr(e.l),y(S,0);break;case 4:if(T=v(S),pr(e.l,T),e.g=null,e.H.clear(),T instanceof Ne)throw T;throw new Ne(2,6,6002,T.message)}})}function Ii(e,t,n){for(var r=a(t),i=r.next();!i.done;i=r.next()){var o=a(Ki(i.value));for(i=o.next();!i.done;i=o.next())i=i.value,n.has(i.keySystem)||n.set(i.keySystem,[]),n.get(i.keySystem).push(i)}if(1==n.size&&n.has(""))throw new Ne(2,6,6e3);for(r={},e=a(e.h.preferredKeySystems),i=e.next();!i.done;r={de:r.de},i=e.next())for(r.de=i.value,o=a(t),i=o.next();!i.done;i=o.next())if(i=i.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.de}}(r)))return i.keySystemAccess;for(e=a([!0,!1]),i=e.next();!i.done;i=e.next())for(r=i.value,o=a(t),i=o.next();!i.done;i=o.next()){var s=a(i.value.decodingInfos);for(i=s.next();!i.done;i=s.next()){var u=i.value;if(u.supported&&u.keySystemAccess){i=n.get(u.keySystemAccess.keySystem);var l=a(i);for(i=l.next();!i.done;i=l.next())if(!!i.value.licenseServerUri==r)return u.keySystemAccess}}}return null}function Mi(e,t){var n,r,i,o,s,u,l,c,d,f,g,y,m,b,w,_,T;return A(function(S){switch(S.g){case 1:if(1==t.size&&t.has(""))throw new Ne(2,6,6e3);for(r=a(t.values()),i=r.next();!i.done;i=r.next())o=i.value,0==o.audioCapabilities.length&&delete o.audioCapabilities,0==o.videoCapabilities.length&&delete o.videoCapabilities;s=a(e.h.preferredKeySystems),u=s.next();case 2:if(u.done){S.B(4);break}if(l=u.value,!t.has(l)){S.B(3);break}return c=t.get(l),p(S,6),h(S,navigator.requestMediaKeySystemAccess(l,[c]),8);case 8:return n=S.h,S.return(n);case 6:d=v(S),z("Requesting",l,"failed with config",c,d);case 7:pr(e.l);case 3:u=s.next(),S.B(2);break;case 4:f=a([!0,!1]),g=f.next();case 9:if(g.done){S.B(11);break}y=g.value,m=a(t.keys()),u=m.next();case 12:if(u.done){g=f.next(),S.B(9);break}if(b=u.value,w=t.get(b),(_=w.drmInfos.some(function(e){return!!e.licenseServerUri}))!=y){S.B(13);break}return p(S,15),h(S,navigator.requestMediaKeySystemAccess(b,[w]),17);case 17:return n=S.h,S.return(n);case 15:T=v(S),z("Requesting",b,"failed with config",w,T);case 16:pr(e.l);case 13:u=m.next(),S.B(12);break;case 11:return S.return(n)}})}function Oi(t){if(t=mr(t.h.clearKeys),0==t.size)return null;var n=[],r=[];t.forEach(function(e,t){var i=t;22!=i.length&&(i=Br(Hr(t),!1)),t=e,22!=t.length&&(t=Br(Hr(e),!1)),e={kty:"oct",kid:i,k:t},n.push(e),r.push(e.kid)}),t=JSON.stringify({keys:n});var i=JSON.stringify({kids:r});return i=[{initData:le(Er(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:i,keyIds:new Set(r)}}function Pi(e){Gi(e)&&e.j.resolve()}function ji(e,t){new Tt(function(){t.loaded=!0,Pi(e)}).U(wT)}function Di(e,t,n){var r,i,o,a,s,u,l;return A(function(c){switch(c.g){case 1:try{G("Attempting to load an offline session",t),r=e.u.createSession("persistent-license")}catch(t){return i=new Ne(2,6,6005,t.message),e.s(i),c.return(Promise.reject(i))}return e.A.D(r,"message",function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.W?e.L.push(t):Li(e,t)}),e.A.D(r,"keystatuseschange",function(t){return Ni(e,t)}),o={initData:n.initData,initDataType:n.initDataType,loaded:!1,af:1/0,Qa:null,type:"persistent-license"},e.i.set(r,o),p(c,2),h(c,r.load(t),4);case 4:return a=c.h,pr(e.l),z("Loaded offline session",t,a),a||(e.i.delete(r),s=e.h.persistentSessionOnlinePlayback?1:2,e.s(new Ne(s,6,6013)),o.loaded=!0),ji(e,o),Pi(e),c.return(r);case 2:u=v(c),pr(e.l,u),e.i.delete(r),l=e.h.persistentSessionOnlinePlayback?1:2,e.s(new Ne(l,6,6005,u.message)),o.loaded=!0,Pi(e);case 3:return c.return(Promise.resolve())}})}function Ri(e,t,n,r){try{K("Creating new",r,"session");var i=e.u.createSession(r)}catch(t){return void e.s(new Ne(2,6,6005,t.message))}e.A.D(i,"message",function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.W?e.L.push(t):Li(e,t)}),e.A.D(i,"keystatuseschange",function(t){return Ni(e,t)}),e.i.set(i,{initData:n,initDataType:t,loaded:!1,af:1/0,Qa:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(n){return t=n,n instanceof Ne||(t=new Ne(2,6,6016,n)),void e.s(t)}e.h.logLicenseExchange&&(r=Br(n),K("EME init data: type=",t,"data=",r)),i.generateRequest(t,n).catch(function(t){if(!e.l.g){e.i.delete(i);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;0>r&&(r+=Math.pow(2,32)),r="0x"+r.toString(16)}e.s(new Ne(2,6,6006,t.message,t,r))}})}function Li(e,t){var n,r,i,o,s,u,l,c,d,g,m,b,w,_,T;A(function(S){switch(S.g){case 1:if(n=t.target,G("Sending license request for session",n.sessionId,"of type",t.messageType),e.h.logLicenseExchange&&(r=Br(t.message),K("EME license request",r)),i=e.i.get(n),o=e.g.licenseServerUri,s=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&s&&s.individualizationServer&&(o=s.individualizationServer),u=ar([o],e.h.retryParameters),u.body=t.message,u.method="POST",u.licenseRequestType=t.messageType,u.sessionId=n.sessionId,u.drmInfo=e.g,i&&(u.initData=i.initData,u.initDataType=i.initDataType),Ai(e.g.keySystem)){var E=Tr(u.body,!0,!0);if(E.includes("PlayReadyKeyMessage")){q("Unwrapping PlayReady request."),E=hi(E,"PlayReadyKeyMessage");for(var k=a(E.getElementsByTagName("HttpHeader")),A=k.next();!A.done;A=k.next())A=A.value,u.headers[A.getElementsByTagName("name")[0].textContent]=A.getElementsByTagName("value")[0].textContent;u.body=Vr(E.getElementsByTagName("Challenge")[0].textContent)}else q("PlayReady request is already unwrapped."),u.headers["Content-Type"]="text/xml; charset=utf-8"}return l=Date.now(),p(S,2),d=e.C.Ub.request(2,u),h(S,d.promise,4);case 4:c=S.h,y(S,3);break;case 2:return g=v(S),e.l.g?S.return():(m=new Ne(2,6,6007,g),1==e.i.size?(e.s(m),i&&i.Qa&&i.Qa.reject(m)):(i&&i.Qa&&i.Qa.reject(m),e.i.delete(n),Gi(e)&&(e.j.resolve(),e.K.U(.1))),S.return());case 3:return e.l.g?S.return():(e.J+=(Date.now()-l)/1e3,e.h.logLicenseExchange&&(b=Br(c.data),K("EME license response",b)),p(S,5),G("Updating session",n.sessionId),h(S,n.update(c.data),7));case 7:y(S,6);break;case 5:return w=v(S),_=new Ne(2,6,6008,w.message),e.s(_),i&&i.Qa&&i.Qa.reject(_),S.return();case 6:if(e.l.g)return S.return();T=new Zn("drmsessionupdate"),e.C.onEvent(T),i&&(i.Qa&&i.Qa.resolve(),ji(e,i)),f(S)}})}function Ni(e,t){t=t.target,z("Key status changed for session",t.sessionId);var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(t,i){if("string"==typeof i){var o=i;i=t,t=o}if(Ai(e.g.keySystem)&&16==i.byteLength&&(kt()||Dt())){o=de(i);var a=o.getUint32(0,!0),s=o.getUint16(4,!0),u=o.getUint16(6,!0);o.setUint32(0,a,!1),o.setUint16(4,s,!1),o.setUint16(6,u,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(r=!0),i=Wr(i).slice(0,32),e.Y.set(i,t)});var i=t.expiration-Date.now();(0>i||r&&1e3>i)&&n&&!n.Qa&&(q("Session has expired",t.sessionId),e.i.delete(t),t.close().catch(function(){})),Gi(e)&&(e.j.resolve(),e.K.U(_T))}function Ui(e){var t=e.Y,n=e.ga;n.clear(),t.forEach(function(e,t){return n.set(t,e)}),t=Array.from(n.values()),t.length&&t.every(function(e){return"expired"==e})&&e.s(new Ne(2,6,6014)),e.C.Vd(br(n))}function Fi(){var e,t,n,r,i,o,a,s;return A(function(u){return 1==u.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},r={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},i=[r,n],o=new Map,a=function(e){var t,n,r;return A(function(a){switch(a.g){case 1:if(p(a,2),"org.w3.clearkey"===e&&Rt())throw Error("Unsupported keySystem");return h(a,navigator.requestMediaKeySystemAccess(e,i),4);case 4:return t=a.h,r=!!(n=t.getConfiguration().sessionTypes)&&n.includes("persistent-license"),Ct()&&(r=!1),o.set(e,{persistentState:r}),h(a,t.createMediaKeys(),5);case 5:y(a,0);break;case 2:v(a),o.set(e,null),f(a)}})},s=e.map(function(e){return a(e)}),h(u,Promise.all(s),2)):u.return(br(o))})}function Bi(e){var t;return A(function(n){return 1==n.g?(t=new Promise(function(e,t){new Tt(t).U(bT)}),p(n,2),h(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?y(n,0):(v(n),W("Timeout waiting for session close"),void f(n))})}function Vi(e){var t;return A(function(n){return t=Array.from(e.i.entries()),e.i.clear(),h(n,Promise.all(t.map(function(t){t=a(t);var n,r=t.next().value,i=t.next().value;return A(function(t){return 1==t.g?(p(t,2),e.na||e.o.has(r.sessionId)||"persistent-license"!==i.type||e.h.persistentSessionOnlinePlayback?(G("Closing session",r.sessionId,i),h(t,Bi(r),5)):(G("Removing session",r.sessionId),h(t,r.remove(),5))):2!=t.g?y(t,0):(n=v(t),H("Failed to close or remove the session",n),void f(t))})})),0)})}function Hi(e,t){return!e.length||!t.length||e===t||0<Wi(e,t).length}function Wi(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=a(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var i=a(t),o=i.next();!o.done;o=i.next())if(o=o.value,r.keySystem==o.keySystem){i=new Map;for(var u=a((r.initData||[]).concat(o.initData||[])),l=u.next();!l.done;l=u.next())l=l.value,i.set(l.keyId,l);i=Array.from(i.values()),u=r.keyIds&&o.keyIds?new Set([].concat(s(r.keyIds),s(o.keyIds))):r.keyIds||o.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||o.persistentStateRequired,videoRobustness:r.videoRobustness||o.videoRobustness,audioRobustness:r.audioRobustness||o.audioRobustness,serverCertificate:r.serverCertificate||o.serverCertificate,serverCertificateUri:r.serverCertificateUri||o.serverCertificateUri,initData:i,keyIds:u});break}}return n}function Ki(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function qi(e){e.i.forEach(function(t,n){var r=t.af,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.C.onExpirationUpdated(n.sessionId,i),t.af=i)})}function Gi(e){return e=e.i.values(),yr(e,function(e){return e.loaded})}function zi(e){for(var t=a(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.Y.get(n.value))return!1;return!0}function Xi(e,t){var n=[];for(t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=a(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function Yi(e,t,n,r,i,o){var s={};e=a(e);for(var u=e.next();!u.done;s={Da:s.Da},u=e.next()){if(s.Da=u.value,t.includes(s.Da.licenseServerUri)||t.push(s.Da.licenseServerUri),r.includes(s.Da.serverCertificateUri)||r.push(s.Da.serverCertificateUri),s.Da.serverCertificate&&(n.some(function(e){return function(t){return ae(t,e.Da.serverCertificate)}}(s))||n.push(s.Da.serverCertificate)),s.Da.initData){u={};for(var l=a(s.Da.initData),c=l.next();!c.done;u={nd:u.nd},c=l.next())u.nd=c.value,i.some(function(e){return function(t){var n=e.nd;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&ae(t.initData,n.initData)}}(u))||i.push(u.nd)}if(s.Da.keyIds)for(u=a(s.Da.keyIds),l=u.next();!l.done;l=u.next())o.add(l.value)}}function Ji(t,n,r,i){var o=t.keySystem;!o||"org.w3.clearkey"==o&&t.licenseServerUri||(n.size&&(n=n.get(o)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(r=r.get(o))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate),r.sessionType&&(t.sessionType=r.sessionType),t.serverCertificateUri||(t.serverCertificateUri=r.serverCertificateUri)),i[o]&&(t.keySystem=i[o]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==o&&(t.keySystem="com.chromecast.playready"))}function Qi(){}function $i(e,t){if(t){var n=ET[t.toLowerCase()];if(n)return n;W("Could not determine manifest type using MIME type ",t)}throw new Ne(2,4,4e3,e,t)}function Zi(e){function t(){i=!0}function n(e){o.push(e),Mr(e)}e=le(e);var r,i=!1,o=[],s=[];if((new Ir).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).O("stsd",function(e){r=e,o.push(e),Or(e)}).O("encv",t).O("enca",t).O("dvav",function(e){s.push({box:e,Ea:1701733238})}).O("dva1",function(e){s.push({box:e,Ea:1701733238})}).O("dvh1",function(e){s.push({box:e,Ea:1701733238})}).O("dvhe",function(e){s.push({box:e,Ea:1701733238})}).O("hev1",function(e){s.push({box:e,Ea:1701733238})}).O("hvc1",function(e){s.push({box:e,Ea:1701733238})}).O("avc1",function(e){s.push({box:e,Ea:1701733238})}).O("avc3",function(e){s.push({box:e,Ea:1701733238})}).O("ac-3",function(e){s.push({box:e,Ea:1701733217})}).O("ec-3",function(e){s.push({box:e,Ea:1701733217})}).O("ac-4",function(e){s.push({box:e,Ea:1701733217})}).O("mp4a",function(e){s.push({box:e,Ea:1701733217})}).parse(e),i)return q("Init segment already indicates encryption."),e;if(0==s.length||!r)throw H("Failed to find boxes needed to fake encryption!"),z("Failed init segment (hex):",Wr(e)),new Ne(2,3,3019);s.reverse();for(var u=a(s),l=u.next();!l.done;l=u.next())l=l.value,q('Inserting "'+Lr(l.Ea)+'" box into init segment.'),e=eo(e,r,l.box,o,l.Ea);return e}function eo(e,t,n,r,i){var o=kT.value(),s=e.subarray(n.start,n.start+n.size),u=de(s),l=new Uint8Array(n.size+o.byteLength);for(l.set(s,0),s=de(l),s.setUint32(4,i),l.set(o,n.size),i=u.getUint32(4),s.setUint32(n.size+16,i),to(l,0,l.byteLength),i=new Uint8Array(e.byteLength+l.byteLength),n=At()?n.start:n.start+n.size,o=e.subarray(n),i.set(e.subarray(0,n)),i.set(l,n),i.set(o,n+l.byteLength),e=a(r),r=e.next();!r.done;r=e.next())r=r.value,to(i,r.start,r.size+l.byteLength);return l=de(i,t.start),t=Nr(t),e=l.getUint32(t),l.setUint32(t,e+1),i}function to(e,t,n){e=de(e,t),0!=(t=e.getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}function no(e,t,n,r,i,o,a){this.Z=e,this.Pa=t,this.wa=n,this.We=void 0===r?null:r,this.timescale=void 0===i?null:i,this.g=void 0===o?null:o,this.aes128Key=void 0===a?null:a,this.mimeType=this.codecs=null}function ro(e,t){return e===t||(e&&t?e.jc()==t.jc()&&e.ic()==t.ic()&&me(e.Z().sort(),t.Z().sort())&&ae(e.g,t.g):e==t)}function io(e,t,n,r,i,o,s,u,l,c,d,h,f,p,g,y){for(c=void 0===c?[]:c,p=void 0===p?AT:p,this.startTime=e,this.j=this.endTime=t,this.F=n,this.Pa=r,this.wa=i,this.h=o,this.timestampOffset=s,this.appendWindowStart=u,this.appendWindowEnd=l,this.i=c,this.tilesLayout=void 0===d?"":d,this.C=void 0===h?null:h,this.g=void 0===f?null:f,this.status=p,this.o=!1,this.m=!0,this.s=!1,this.aes128Key=void 0===g?null:g,this.A=null,this.l=0,this.u=void 0!==y&&y,this.Nd=this.cd=!1,e=a(this.i),t=e.next();!t.done;t=e.next())t.value.cg();this.u&&this.i.length&&this.i[this.i.length-1].bg(),this.mimeType=this.codecs=null}function oo(e,t){e.h=t,e=a(e.i);for(var n=e.next();!n.done;n=e.next())oo(n.value,t)}function ao(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function so(e,t){return!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t>=e.start(0)}function uo(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=a(co(e));for(var r=e.next();!r.done;r=e.next()){var i=r.value;r=i.start,i=i.end,i>t&&(n+=i-Math.max(r,t))}return n}function lo(e,t,n){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)?null:(e=co(e).findIndex(function(e,r,i){return e.start>t&&(0==r||i[r-1].end-t<=n)}),0<=e?e:null)}function co(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function ho(){}function fo(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function po(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function go(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]}function yo(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===e.type){if(2>e.size)return null;if(3!==e.data[0])return W("Ignore frame with unrecognized character encoding"),null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var r=_r(le(e.data,1,n)),i=e.data[2+n],o=e.data.subarray(3+n).indexOf(0);if(-1===o)return null;var a,s=_r(le(e.data,3+n,o));return a="--\x3e"===r?_r(le(e.data,4+n+o)):ue(e.data.subarray(4+n+o)),t.mimeType=r,t.pictureType=i,t.description=s,t.data=a,t}return"TXXX"===e.type?2>e.size?null:3!==e.data[0]?(W("Ignore frame with unrecognized character encoding"),null):-1===(r=e.data.subarray(1).indexOf(0))?null:(n=_r(le(e.data,1,r)),e=_r(le(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):"WXXX"===e.type?2>e.size?null:3!==e.data[0]?(W("Ignore frame with unrecognized character encoding"),null):-1===(r=e.data.subarray(1).indexOf(0))?null:(n=_r(le(e.data,1,r)),e=_r(le(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):"PRIV"===e.type?2>e.size?null:-1===(n=e.data.indexOf(0))?null:(n=_r(le(e.data,0,n)),t.description=n,"com.apple.streaming.transportStreamTimestamp"==n?(n=e.data.subarray(n.length+1),e=1&n[3],n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=47721858.84),t.data=n):(e=ue(e.data.subarray(n.length+1)),t.data=e),t):"T"===e.type[0]?2>e.size?null:3!==e.data[0]?(W("Ignore frame with unrecognized character encoding"),null):(e=_r(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=_r(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(W("Unrecognized ID3 frame type:",e.type),t.data=ue(e.data),t):null}function vo(e){for(var t=0,n=[];fo(e,t);){var r=go(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var i=e.subarray(t),o=go(i,4);i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:o,data:i.subarray(10,10+o)},(o=yo(i))&&n.push(o),t+=i.size+10}po(e,t)&&(t+=10)}return n}function mo(e,t){for(var n=t=void 0===t?0:t,r=0;fo(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=go(e,t+6),po(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}function bo(e,t){var n=null,r=null,i=null,o=e.M();return 1&t&&(i=e.pc()),2&t&&e.skip(4),8&t&&(n=e.M()),16&t&&(r=e.M()),{trackId:o,Mf:n,Pg:r,ij:i}}function wo(e,t){return 1==t?(t=e.M(),e=e.M(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.M()}}function _o(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.M(),e.skip(4),e=e.ya(),{timescale:t,language:String.fromCharCode(96+(e>>10))+String.fromCharCode(96+((960&e)>>5))+String.fromCharCode(96+(31&e))}}function To(e,t,n){var r=e.M(),i=[],o=null;1&n&&(o=e.M()),4&n&&e.skip(4);for(var a=0;a<r;a++){var s={kf:null,sampleSize:null,Xd:null};256&n&&(s.kf=e.M()),512&n&&(s.sampleSize=e.M()),1024&n&&e.skip(4),2048&n&&(s.Xd=0==t?e.M():e.hg()),i.push(s)}return{mj:r,kg:i,Og:o}}function So(e,t){1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.M();return 1==t?e.skip(8):e.skip(4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),t=e.ya()+e.ya()/16,e=e.ya()+e.ya()/16,{trackId:n,width:t,height:e}}function Eo(e){for(var t,n,r="mp4a";e.ea();){t=e.fa();for(var i=e.fa();128&i;)i=e.fa();if(3==t)e.ya(),i=e.fa(),128&i&&e.ya(),64&i&&e.skip(e.fa()),32&i&&e.ya();else if(4==t)n=e.fa(),e.skip(12);else if(5==t)break}return n&&(r+="."+this.g(n),5==t&&e.ea()&&(t=e.fa(),n=(248&t)>>3,31===n&&e.ea()&&(n=32+((7&t)<<3)+((224&e.fa())>>5)),r+="."+n)),{ka:r}}function ko(e,t){return e.skip(87),{ka:t+"."+this.g(e.fa())+this.g(e.fa())+this.g(e.fa())}}function Ao(e){return e=e.M(),{ka:Lr(e)}}function xo(e,t){if(this.j=e,void 0===t?0:t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&3==e[r]&&0==e[r-1]&&0==e[r-2]||(t[n]=e[r],n++);this.j=le(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Co(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);0!==r&&(n.set(e.j.subarray(t,t+r)),e.h=new xr(n,0).M(),e.g=8*r,e.i-=r)}function Io(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Co(e)}e.h<<=t,e.g-=t}function Mo(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Co(e),n=t-n,0<n?r<<n|Mo(e,n):r}function Oo(e){var t;for(t=0;t<e.g;++t)if(0!=(e.h&2147483648>>>t))return e.h<<=t,e.g-=t,t;return Co(e),t+Oo(e)}function Po(e){Io(e,1+Oo(e))}function jo(e){return Mo(e,Oo(e)+1)-1}function Do(e){return e=jo(e),1&e?1+e>>>1:-1*(e>>>1)}function Ro(e){return 1===Mo(e,1)}function Lo(e){return Mo(e,8)}function No(e,t){for(var n=8,r=8,i=0;i<t;i++)0!==r&&(r=Do(e),r=(n+r+256)%256),n=0===r?n:r}function Uo(e){return Lo(e),jo(e),jo(e)}function Fo(){this.F=null,this.G=!1,this.m=this.H=null,this.j=[],this.g=[],this.u=this.A=null,this.i=[],this.h=[],this.C=null,this.l=[],this.o=this.s=null}function Bo(e,t){if(1!=(t[0]<<16|t[1]<<8|t[2]))return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(192&r){var i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2;null==e.s&&(e.s=i),n.pts=Wo(i,e.s),e.s=n.pts,n.dts=n.pts,64&r&&(r=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,null==e.o&&(e.o=r),n.dts=Wo(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}function Vo(e){var t={height:null,width:null,ka:null};if(e=e.Gd(),!e.length)return t;if(!(e=e.find(function(e){return 7==e.type})))return t;e=new xo(e.data);var n=Lo(e),r=Lo(e),i=Lo(e);if(Po(e),CT.includes(n)){var o=jo(e);if(3===o&&Io(e,1),Po(e),Po(e),Io(e,1),Ro(e)){o=3!==o?8:12;for(var a=0;a<o;a++)Ro(e)&&(6>a?No(e,16):No(e,64))}}if(Po(e),0===(o=jo(e)))jo(e);else if(1===o)for(Io(e,1),Po(e),Po(e),o=jo(e),a=0;a<o;a++)Po(e);Po(e),Io(e,1),o=jo(e),a=jo(e);var s=Mo(e,1);0===s&&Io(e,1),Io(e,1);var u=0,l=0,c=0,d=0;return Ro(e)&&(u=jo(e),l=jo(e),c=jo(e),d=jo(e)),t.height=String((2-s)*(a+1)*16-2*c-2*d),t.width=String(16*(o+1)-2*u-2*l),t.ka="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2),t}function Ho(e){var t={height:null,width:null,ka:null};if(e=e.Gd(),!e.length)return t;if(!(e=e.find(function(e){return 33==e.type})))return t;var n=new xo(e.fullData,!0);Lo(n),Lo(n),Mo(n,4);var r=Mo(n,3);Ro(n);var i=Mo(n,2),o=Mo(n,1),a=Mo(n,5),s=Mo(n,32);e=Lo(n);for(var u=Lo(n),l=Lo(n),c=Lo(n),d=Lo(n),h=Lo(n),f=Lo(n),p=[],g=[],y=0;y<r;y++)p.push(Ro(n)),g.push(Ro(n));if(0<r)for(y=r;8>y;y++)Mo(n,2);for(y=0;y<r;y++)p[y]&&Mo(n,88),g[y]&&Lo(n);jo(n),r=jo(n),3==r&&Mo(n,1),p=jo(n),g=jo(n);var v=y=0,m=0,b=0;return Ro(n)&&(y+=jo(n),v+=jo(n),m+=jo(n),b+=jo(n)),t.width=String(p-(y+v)*(1===r||2===r?2:1)),t.height=String(g-(m+b)*(1===r?2:1)),n=function(e){for(var t=0,n=0;32>n;n++)t|=(e>>n&1)<<31-n;return t>>>0}(s),o=1==o?"H":"L",i="hvc1."+["","A","B","C"][i]+a,i+="."+n.toString(16).toUpperCase(),i+="."+o+f,h&&(i+="."+h.toString(16).toUpperCase()),d&&(i+="."+d.toString(16).toUpperCase()),c&&(i+="."+c.toString(16).toUpperCase()),l&&(i+="."+l.toString(16).toUpperCase()),u&&(i+="."+u.toString(16).toUpperCase()),e&&(i+="."+e.toString(16).toUpperCase()),t.ka=i,t}function Wo(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Ko(e){return!(0>(e=qo(e)))&&(0<e&&W("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),!0)}function qo(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}function Go(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if("undefined"==typeof libDPIModule&&B("Could not find LCEVC Library dependencies on this page"),"undefined"!=typeof LCEVCdec)this.h=LCEVCdec;else{if("undefined"==typeof LcevcDil){B("Could not find LCEVC Library on this page"),e=!1;break e}this.h=LcevcDil,this.j=!0,_n("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead")}void 0===this.h.SupportObject?(B("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||B(this.h.SupportObject.SupportError),e=void 0!==this.h&&"undefined"!=typeof libDPIModule&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function zo(e){e.g&&e.i.classList.add("shaka-hidden")}function Xo(e,t,n){var r=IT,i=DT;switch(t.mimeType){case"video/webm":r=MT;break;case"video/mp4":r=OT}switch(n){case"DASH":i=jT;break;case"HLS":i=PT}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(i))}function Yo(e,t,n,r){var i=this;this.i=e,this.C=null,this.F=t,this.g={},this.G={},this.Aa={},this.h=null,this.ba=!1,this.Ha=n||function(){},this.V=r||null,this.j={},this.o=new Q,this.m={},this.H=null,this.L=new qn,this.N="",this.ca=!1,this.l=Jo(this,this.L),this.A=!1,this.J=new fr(function(){return $o(i)}),this.u=!1,this.Y="UNKNOWN",this.na=this.Ba=!1,this.ha=new qn,this.s=!1,this.ga=!0,this.K=this.W=null}function Jo(t,n){if(e.ManagedMediaSource){t.i.disableRemotePlayback=!0;var r=new ManagedMediaSource;return t.o.D(r,"startstreaming",function(){t.ga=!0}),t.o.D(r,"endstreaming",function(){t.ga=!1}),t.o.la(r,"sourceopen",function(){URL.revokeObjectURL(t.N),n.resolve()}),t.o.la(t.i,"playing",function(){t.ca=!0}),t.N=RT(r),t.i.src=t.N,r}return r=new MediaSource,t.o.la(r,"sourceopen",function(){URL.revokeObjectURL(t.N),n.resolve()}),t.o.la(t.i,"playing",function(){t.ca=!0}),t.N=RT(r),t.i.src=t.N,r}function Qo(e,t){var n,r,i,o,s,u,l,c,d,f,p;return A(function(g){if(1==g.g)return e.createSegmentIndex?h(g,e.createSegmentIndex(),2):g.B(2);if(!e.segmentIndex)return g.return(!1);if(0==e.segmentIndex.ob())return g.return(!0);for(n=z_,r=new Set,i=a(e.segmentIndex),o=i.next();!o.done;o=i.next())if(s=o.value,u=s.mimeType||e.mimeType||"",l=s.codecs||e.codecs||"",c=u+":"+l,!r.has(c))if(r.add(c),t==n.ia){if(d=We(u,l),!tt(d))return g.return(!1)}else if(t==n.$?l=Zt(l):t==n.P&&(l=$t(l)),f=Ge(e,u,l),p=Ke(u,l),!te(f)&&!ke(p))return g.return(!1);return g.return(!0)})}function $o(e){var t,n,r,i,o,s,u,l;return A(function(c){if(1==c.g){t=[];for(n in e.j)for(r=e.j[n],i=r[0],e.j[n]=r.slice(0,1),i&&t.push(i.p.catch(ut)),o=a(r.slice(1)),s=o.next();!s.done;s=o.next())u=s.value,u.p.reject(new Ne(2,7,7003,void 0));e.h&&t.push(e.h.destroy()),e.F&&t.push(e.F.destroy());for(l in e.m)t.push(e.m[l].destroy());return h(c,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.C=null,e.l=null,e.h=null,e.F=null,e.g={},e.m={},e.H=null,e.j={},e.V=null,e.K=null,f(c)})}function Zo(e,t,n,r){var i,o,a,s,u,l,c,d,p,g,y,v;return A(function(m){switch(m.g){case 1:return i=z_,o=j,a=D,h(m,Qo(n,t),2);case 2:if(a.call(o,m.h,"Type negotiation should happen before MediaSourceEngine.init!"),s=We(n.mimeType,r),t==i.ia){ea(e,s,e.u,n.external),m.B(0);break}if(u=e.C.forceTransmux,(!te(s)||!e.u&&Q_.includes(s))&&(u=!0),l=Ke(n.mimeType,r),!u){m.B(4);break}if(c=Ve(i.P,(r||"").split(",")),d=Ve(i.$,(r||"").split(",")),!c||!d){m.B(5);break}return e.s=!0,h(m,Zo(e,i.P,n,c),6);case 6:return h(m,Zo(e,i.$,n,d),7);case 7:return m.return();case 5:(p=ke(l))&&(g=p(),e.m[t]=g,s=g.convertCodecs(t,l));case 4:y=s+e.C.sourceBufferExtraFeatures,pr(e.J);try{v=e.l.addSourceBuffer(y)}catch(t){throw new Ne(2,3,3015,t,"The mediaSource_ status was "+e.l.readyState+" expected 'open'")}e.u&&(v.mode=LT),e.o.D(v,"error",function(){e.j[t][0].p.reject(new Ne(2,3,3014,e.i.error?e.i.error.code:0))}),e.o.D(v,"updateend",function(){return ya(e,t)}),e.g[t]=v,e.G[t]=s,e.Aa[t]=!!n.drmInfos.length,f(m)}})}function ea(e,t,n,r){e.h||(e.h=new et(e.F));var i=e.h;r=r||e.ba,e=e.Y,"application/cea-608"==t||"application/cea-708"==t?i.i=null:(i.i=(0,$_[t])(),i.i.setSequenceMode?i.i.setSequenceMode(n):B('Text parsers should have a "setSequenceMode" method!'),i.i.setManifestType?i.i.setManifestType(e):B('Text parsers should have a "setManifestType" method!'),i.u=r)}function ta(e){return!e.A&&(!e.l||"ended"==e.l.readyState)}function na(e,t){return e.A||!Object.keys(e.g).length?e=null:t==G_?e=e.h.g:(e=oa(e,t),e=!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null),e}function ra(e,t){return e.A?null:t==G_?e.h.h:ao(oa(e,t))}function ia(e,t,n){return e.A?0:t==G_?(e=e.h,null==e.h||e.h<n?0:e.h-Math.max(n,e.g)):(e=oa(e,t),uo(e,n))}function oa(e,t){try{return e.g[t].buffered}catch(n){return t in e.g&&H("failed to get buffered range for "+t,n),null}}function aa(e,t,n,r,i,o){var a=null,s=le(n);if(Q_.includes(i))o=vo(s),o.length&&r&&((t=o.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&t.data&&(a=Math.round(t.data)/1e3),e.Ha([{cueTime:r.startTime,data:s,frames:o,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(i.includes("/mp4")&&r&&0==r.timestampOffset&&r.h&&r.h.timescale){var u=r.h.timescale;if(!isNaN(u)){var l=0,c=!1;(new Ir).box("moof",Mr).box("traf",Mr).O("tfdt",function(e){l=wo(e.reader,e.version).baseMediaDecodeTime/u,c=!0,e.parser.stop()}).parse(n,!0),c&&(a=l)}}else i.includes("/mp4")||i.includes("/webm")||!Ko(s)||(e.K?e.K.clearData():e.K=new Fo,s=e.K.parse(s),t=s.getStartTime(t),null!=t&&(a=t),s=s.getMetadata(),s.length&&e.Ha(s,o,r?r.endTime:null));return a}function sa(e,t,n,r,i,o,a,s,u,l){a=void 0!==a&&a,s=void 0!==s&&s,u=void 0!==u&&u,l=void 0!==l&&l;var c,d,p,g,y,v,m,b,w,_,T;return A(function(S){switch(S.g){case 1:if(c=z_,t!=c.ia){S.B(2);break}if(!e.u){S.B(3);break}return h(S,e.ha,4);case 4:d=S.h,e.h.s=d;case 3:return h(S,nt(e.h,n,r?r.startTime:null,r?r.endTime:null,r?r.Z()[0]:null),5);case 5:return S.return();case 2:if(l||!e.s){S.B(6);break}return h(S,sa(e,c.P,n,r,i,o,a,s,u,!0),7);case 7:return h(S,sa(e,c.$,n,r,i,o,a,s,u,!0),8);case 8:return S.return();case 6:if(!e.g[t])return W("Attempted to restore a non-existent source buffer"),S.return();if(p=e.g[t].timestampOffset,g=e.G[t],e.m[t]&&(g=e.m[t].getOriginalMimeType()),r&&null!=(y=aa(e,t,n,r,g,p))&&(v=r.startTime-y,m=Math.abs(p-v),(.001<=m||a||s)&&(!u||0<v||!p)&&(p=v,e.na&&(va(e,t,function(){return pa(e,t)}),va(e,t,function(){return ga(e,t,p)}))),b=t==c.$||!(c.$ in e.g),e.u&&b&&e.ha.resolve(p)),o&&t==c.$&&(e.h||ea(e,"application/cea-608",e.u,!1),e.H||(w=g.split(";",1)[0],e.H=new pe(w)),r?(_=e.H.i(n),_.length&&at(e.h,_,r.startTime,r.endTime,p)):e.H.init(n)),!e.m[t]){S.B(9);break}return h(S,e.m[t].transmux(n,i,r,e.l.duration,t),10);case 10:n=S.h;case 9:return n=_a(e,n,r?r.startTime:null,t),r&&e.u&&t!=c.ia&&(a||s)&&(T=r.startTime,va(e,t,function(){return pa(e,t)}),va(e,t,function(){return ga(e,t,T)})),h(S,va(e,t,function(){var r=n;if("video"==t&&e.V){var i=e.V;i.g&&i.g.appendBuffer(r,"video",i.o,-p)}e.g[t].appendBuffer(r)}),11);case 11:f(S)}})}function ua(e,t){var n=ra(e,"video")||0;it(e.h,t,n)}function la(e){e.h&&it(e.h,"",0)}function ca(e,t){var n;return A(function(r){return 1==r.g?(n=z_,t==n.ia?e.h?h(r,e.h.remove(0,1/0),0):r.return():h(r,va(e,t,function(){return fa(e,t,0,e.l.duration)}),4)):e.s?h(r,va(e,n.P,function(){return fa(e,n.P,0,e.l.duration)}),0):r.B(0)})}function da(e,t,n,r,i,o,a,s,u){var l,c,d;return A(function(f){return 1==f.g?(l=z_,t==l.ia?(o||(e.h.s=n),rt(e.h,r,i),f.return()):(c=[],h(f,ka(e,t,a,s,u),2))):(d=f.h,d||(c.push(va(e,t,function(){return pa(e,t)})),e.s&&c.push(va(e,l.P,function(){return pa(e,l.P)}))),o||(c.push(va(e,t,function(){return ga(e,t,n)})),e.s&&c.push(va(e,l.P,function(){return ga(e,l.P,n)}))),c.push(va(e,t,function(){e.g[t].appendWindowStart=0,e.g[t].appendWindowEnd=i,e.g[t].appendWindowStart=r,ya(e,t)})),e.s&&c.push(va(e,l.P,function(){var t=l.P;e.g[t].appendWindowStart=0,e.g[t].appendWindowEnd=i,e.g[t].appendWindowStart=r,ya(e,t)})),h(f,Promise.all(c),0))})}function ha(e,t,n){var r;return A(function(i){return 1==i.g?(r=z_,t==r.ia?i.return():(t==r.$&&(e.ha=new qn),va(e,t,function(){return pa(e,t)}),e.s&&va(e,r.P,function(){return pa(e,r.P)}),h(i,va(e,t,function(){return ga(e,t,n)}),2))):e.s?h(i,va(e,r.P,function(){return ga(e,r.P,n)}),0):i.B(0)})}function fa(e,t,n,r){r<=n?ya(e,t):e.g[t].remove(n,r)}function pa(e,t){var n=e.g[t].appendWindowStart,r=e.g[t].appendWindowEnd;e.g[t].abort(),e.g[t].appendWindowStart=n,e.g[t].appendWindowEnd=r,ya(e,t)}function ga(e,t,n){0>n&&(n+=.001),e.g[t].timestampOffset=n,ya(e,t)}function ya(e,t){if(!e.A){var n=e.j[t][0];n&&(n.p.resolve(),ba(e,t))}}function va(e,t,n){return pr(e.J),n={start:n,p:new qn},e.j[t].push(n),1==e.j[t].length&&wa(e,t),n.p}function ma(e,t){var n,r,i,o,a,s,u;return A(function(l){switch(l.g){case 1:pr(e.J),n=[],r={};for(i in e.g)r.Bc=new qn,o={start:function(e){return function(){return e.Bc.resolve()}}(r),p:r.Bc},e.j[i].push(o),n.push(r.Bc),1==e.j[i].length&&o.start(),r={Bc:r.Bc};return p(l,2),h(l,Promise.all(n),4);case 4:y(l,3);break;case 2:throw a=v(l);case 3:return p(l,5,6),h(l,t(),6);case 6:m(l);for(s in e.g)ba(e,s);b(l,0);break;case 5:throw u=v(l),new Ne(2,3,3015,u,e.i.error||"No error in the media element")}})}function ba(e,t){e.j[t].shift(),wa(e,t)}function wa(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new Ne(2,3,3017,t)):n.p.reject(new Ne(2,3,3015,r,e.i.error||"No error in the media element")),ba(e,t)}}function _a(e,t,n,r){var i=e.Aa[r];return e.C.insertFakeEncryptionInInit&&null==n&&i&&(xt()||At()||Lt("SOPOpenBrowser"))&&"mp4"==ze(e.G[r])&&(q("Forcing fake encryption information in init segment."),t=Zi(t)),t}function Ta(e,t,n,r){return va(e,t,function(){t===G_?q("Change not supported for "+t):(q("Change Type: "+e.G[t]+" -> "+n),ne()?(e.m[t]&&(e.m[t].destroy(),delete e.m[t]),r&&(e.m[t]=r),e.g[t].changeType(n+e.C.sourceBufferExtraFeatures),e.G[t]=n):q("Change Type not supported"),ya(e,t))})}function Sa(e,t){var n,r,i,o,s,u,l,c,d,f,p,y,v,w,_,T,S,E,k,x,C,I,M,O;return A(function(A){switch(A.g){case 1:n=z_,e.A=!0,e.s=!1,r=e.i.currentTime,i=e.i.autoplay,o=e.i.paused,e.ca&&(e.i.autoplay=!1),g(A,2),e.o.Za(),s=[];for(u in e.m)s.push(e.m[u].destroy());for(l in e.j)for(c=e.j[l],d=c[0],e.j[l]=c.slice(0,1),d&&s.push(d.p.catch(ut)),f=a(c.slice(1)),p=f.next();!p.done;p=f.next())y=p.value,y.p.reject(new Ne(2,7,7003,void 0));for(v in e.g){w=e.g[v];try{e.l.removeSourceBuffer(w)}catch(e){}}return h(A,Promise.all(s),4);case 4:return e.m={},e.g={},_=e.l.duration,e.L=new qn,e.l=Jo(e,e.L),h(A,e.L,5);case 5:!isNaN(_)&&_?e.l.duration=_:!isNaN(e.W)&&e.W&&(e.l.duration=e.W),T=new qn,S=e.l.sourceBuffers,E=t.size,k=0,x=function(){++k===E&&(T.resolve(),e.o.Cb(S,"addsourcebuffer",x))},e.o.D(S,"addsourcebuffer",x),C=a(t.keys()),I=C.next();case 6:return I.done?(e.i.currentTime=r,h(A,T,2)):(M=I.value,O=t.get(M),h(A,Zo(e,M,O,O.codecs),9));case 9:e.s?(e.j[n.P]=[],e.j[n.$]=[]):e.j[M]=[],I=C.next(),A.B(6);break;case 2:m(A),e.A=!1,pr(e.J),e.o.la(e.i,"canplaythrough",function(){e.J.g||(e.i.autoplay=i,o||e.i.play())}),b(A,0)}})}function Ea(e,t){return ma(e,function(){return Sa(e,t)})}function ka(e,t,n,r,i){var o,a,s,u,l,c,d,f,p,g,y,v,m,b,w,_;return A(function(T){return 1==T.g?(o=z_,t==o.ia?T.return(!1):(a=Ye(Qe(e.G[t])),s=Je(e.G[t]),l=!1,c=We(n,r),d=e.C.forceTransmux,(!te(c)||!e.u&&Q_.includes(c))&&(d=!0),d&&(f=Ke(n,r),p=ke(f))&&(u=p(),g=Ve(o.P,(r||"").split(",")),y=Ve(o.$,(r||"").split(",")),g&&y?(l=!0,v=y,t==o.P&&(v=g),c=u.convertCodecs(t,Ke(n,v))):c=u.convertCodecs(t,f)),m=Qe(c),b=Ye(m),w=Je(c),a===b&&s===w?T.return(!1):(_=!0,(e.s||l&&u&&!e.m[t])&&(_=!1),_&&"smooth"===e.C.codecSwitchingStrategy&&ne()?h(T,Ta(e,t,c,u),3):(u&&u.destroy(),h(T,Ea(e,i),3))))):T.return(!0)})}function Aa(e,t,n,r){if(t==G_)var i=!1;else{i=Ye(Qe(e.G[t]));var o=Je(e.G[t]),a=We(n,r),s=e.C.forceTransmux;(!te(a)||!e.u&&Q_.includes(a))&&(s=!0),n=Ke(n,r),s&&(s=ke(n))&&(s=s(),a=s.convertCodecs(t,n),s.destroy()),t=Ye(Qe(a)),a=Je(a),i=i!==t||o!==a}return!!i&&("smooth"!==e.C.codecSwitchingStrategy||!ne()||e.s)}function xa(e,t,n){this.i=e,this.o=t,this.u=this.j=1/0,this.g=1,this.h=this.l=null,this.s=0,this.F=!0,this.G=0,this.A=void 0===n||n,this.H=0,this.m=!1,this.C=null}function Ca(e,t,n){this.j=n,this.l=e,this.s=Oa(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=t,this.i=function(){}}function Ia(e,t){e.i=t}function Ma(e){this.g=e}function Oa(e){if(e.g.paused||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime,e=a(co(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function Pa(e,t,n,r,i){var o=this;this.u=i,this.g=e,this.A=t,this.s=n,this.l=new Q,this.j=!1,this.F=e.readyState,this.C=this.h=0,this.i=r,this.o=!1,this.l.D(e,"waiting",function(){return ja(o)}),this.m=new Tt(function(){ja(o)}).$a(this.s.gapJumpTimerTime)}function ja(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.h&&(e.g.autoplay||e.g.currentTime!=e.h)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.i)){t=e.i;var n=t.l,r=Oa(n),i=n.g.currentTime,o=Date.now()/1e3;t.g==i&&t.s==r||(t.m=o,t.g=i,t.s=r,t.h=!1),i=o-t.m,(r=i>=t.u&&r&&!t.h)&&(t.i(t.g,i),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Zn("stalldetected"))),t=!r}t&&(t=e.g.currentTime,xt()&&0==t&&0!=e.h?B("Samsung Tizen device avoid gap jump!"):(n=e.g.buffered,null==(r=lo(n,t,e.s.gapDetectionThreshold))||0==r&&!e.o||(i=n.start(r))>=e.A.eb()||.001>(o=i-t)||(0==r?K("Jumping forward",o,"seconds because of gap before start time of",i):K("Jumping forward",o,"seconds because of gap starting at",n.end(r-1),"and ending at",i),e.g.currentTime=i,t==e.h&&(e.h=i),e.C++,e.u(new Zn("gapjumped")))))}}}function Da(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=NT.value().get(t),n.la(e,t,r))}function Ra(e,t,n,r){var i=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return null==i.l&&(i.l=r()),i.l},this.o=!1,this.h=new Q,this.i=new Ba(e),Da(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Ua(i,i.j())})}function La(e){return e.o?e.g.currentTime:e.j()}function Na(e,t){0<e.g.readyState?Va(e.i,t):Da(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){Ua(e,e.j())})}function Ua(e,t){.001>Math.abs(e.g.currentTime-t)?Fa(e):(e.h.la(e.g,"seeking",function(){Fa(e)}),Va(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function Fa(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function Ba(e){var t=this;this.h=e,this.m=10,this.l=this.i=this.j=0,this.g=new Tt(function(){0>=t.j?(W(["Failed to move playhead from",t.i,"to",t.l].join(" ")),t.g.stop()):t.h.currentTime!=t.i?t.g.stop():(t.h.currentTime=t.l,t.j--)})}function Va(e,t){e.i=e.h.currentTime,e.l=t,e.j=e.m,e.h.currentTime=t,e.g.$a(.1)}function Ha(e){this.g=e,this.j=!1,this.h=null,this.i=new Q}function Wa(e,t,n,r,i,o){var a=this;this.i=e,this.g=t.presentationTimeline,this.C=t.minBufferTime||0,this.l=n,this.u=i,this.s=null,this.A=r,this.o=za(e,n,o),this.j=new Pa(e,t.presentationTimeline,n,this.o,o),this.h=new Ra(e,function(){e:{var e=a.j;e.j=!0,e.o=!1,e=La(a.h);var t=qa(a,e);if(.001<Math.abs(t-e)){var n=Date.now()/1e3;if(!a.s||a.s<n-1){a.s=n,Na(a.h,t),e=void 0;break e}}G("Seek to "+e),a.u(),e=void 0}return e},function(e){var t=a.j;t.g.seeking&&!t.j&&(t.j=!0,t.h=e)},function(){var e=r;return null==e?e=1/0>a.g.getDuration()?a.g.Ob():a.g.eb():0>e&&(e=a.g.eb()+e),Ka(a,Ga(a,e))}),this.m=new Tt(function(){if(0!=a.i.readyState&&!a.i.paused){var e=La(a.h);if(xt()&&0==e&&0!=a.A)B("Samsung Tizen device avoid seek into future!");else{var t=a.g.Ob(),n=a.g.eb();3>n-t&&(t=n-3),e<t&&(t=qa(a,e),K("Jumping forward "+(t-e)+" seconds to catch up with the seek range."),a.i.currentTime=t)}}})}function Ka(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function qa(e,t){var n=Math.max(e.C,e.l.rebufferingGoal),r=e.l.safeSeekOffset,i=e.g.Ob(),o=e.g.eb(),a=e.g.getDuration();3>o-i&&(i=o-3);var s=e.g.Wc(n),u=e.g.Wc(r);return n=e.g.Wc(n+r),t>=a?(G("Playhead past duration."),Ka(e,t)):t>o?(G("Playhead past end."),o):t<i?so(e.i.buffered,u)?(G("Playhead before start & start is buffered"),u):(G("Playhead before start & start is unbuffered"),n):t>=s||so(e.i.buffered,t)?(G("Playhead in safe region or in buffered region."),t):(G("Playhead outside safe region & in unbuffered region."),n)}function Ga(e,t){var n=e.g.Ob();return t<n?n:(e=e.g.eb(),t>e?e:t)}function za(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new Ca(new Ma(e),t.stallThreshold,n),Ia(t,function(t,n){q("Stall detected at "+t+" for "+n+" seconds."),r?(q("Seeking forward "+r+" seconds to break stall."),e.currentTime+=r):(q("Pausing and unpausing to break stall."),e.pause(),e.play())}),t}function Xa(e){this.g=e,this.m=null,this.j=0,this.o=!1}function Ya(e,t,n){return e=new io(e,e+t,function(){return n},0,null,null,e,e,e+t),new Xa([e])}function Ja(e,t,n){this.i=e,this.g=t,this.h=n}function Qa(){Xa.call(this,[]),this.h=[]}function $a(e){var t=this;this.g=e,this.h=this.g.Fd(),this.i=new Tt(function(){t.g.dg(.25*t.h)})}function Za(e){var t=this;this.h=e,this.g=new Set,this.i=new Tt(function(){es(t,!1)}).$a(.25)}function es(e,t){for(var n=a(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function ts(e){tr.call(this),this.g=new Map,this.h=e}function ns(e,t){var n=e.g.get(t);return n||(n={dd:[],Kf:null,contentType:t},e.g.set(t,n)),n}function rs(e,t,n){var r=ns(e,t.contentType);is(e,r),e={We:t,position:n},r=r.dd,t=r.findIndex(function(e){return e.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}function is(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,i=t.dd;t.dd=i.filter(function(e,t){return!(e.position<=n&&t+1<i.length&&i[t+1].position<=n||e.position>=r)})}else t.dd=[]}function os(e){tr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new Tt(function(){for(var e=t.i(),n=a(t.g),r=n.next();!r.done;r=n.next())r=r.value,r.endTime<e.start&&(t.g.delete(r),r=new Zn("regionremove",new Map([["region",r]])),t.dispatchEvent(r))}).$a(2)}function as(e,t){tr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{Zb:null,Yb:FT,Qb:function(e,t){return ss(n,"enter",e,t)}},{Zb:UT,Yb:FT,Qb:function(e,t){return ss(n,"enter",e,t)}},{Zb:BT,Yb:FT,Qb:function(e,t){return ss(n,"enter",e,t)}},{Zb:FT,Yb:UT,Qb:function(e,t){return ss(n,"exit",e,t)}},{Zb:FT,Yb:BT,Qb:function(e,t){return ss(n,"exit",e,t)}},{Zb:UT,Yb:BT,Qb:function(e,t){return ss(n,"skip",e,t)}},{Zb:BT,Yb:UT,Qb:function(e,t){return ss(n,"skip",e,t)}}],this.h=new Q,this.h.D(this.i,"regionremove",function(e){n.g.delete(e.region)})}function ss(e,t,n,r){t=new Zn(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}function us(e,t,n){this.i=e,this.h=t,this.j=0,this.l=n,this.g=new Map}function ls(e,t,n){n=void 0!==n&&n;var r=ps(e.h);if(e.h.segmentIndex){if(r=e.h.segmentIndex.Mb(Math.max(t.startTime,e.j))){var i=t;for(n&&(i=r.next().value)&&i.startTime==t.startTime&&i.endTime==t.endTime&&(i=null);e.g.size<e.i&&null!=i&&(t=!0,i.o&&null!=i.wa&&(t=!1),2==i.Pb()&&(t=!1),t&&!e.g.has(i)&&(t=new gs(e.l),ys(t,i,e.h),e.g.set(i,t)),e.j=i.startTime,!(e.h.fastSwitching&&i.cd&&i.Nd));)i=r.next().value}}else K(r,"missing segmentIndex")}function cs(e,t){var n=ps(e.h);e.h.segmentIndex?e.g.size<e.i&&!e.g.has(t)&&(n=new gs(e.l),ys(n,t,e.h),e.g.set(t,n)):K(n,"missing segmentIndex")}function ds(e){if(0!==e.g.size){for(var t=ps(e.h),n=a(e.g.keys()),r=n.next();!r.done;r=n.next())(r=r.value)&&fs(e,r);K(t,"cleared all"),e.j=0}}function hs(e,t){t&&t!==e.h&&(ds(e),e.h=t)}function fs(e,t){var n=ps(e.h),r=e.g.get(t);e.g.delete(t),r&&(r.abort(),t instanceof io?K(n,"pop and abort prefetched segment at time:",t.startTime):K(n,"pop and abort prefetched init segment"))}function ps(e){return"SegmentPrefetch("+e.type+":"+e.id+")"}function gs(e){this.i=e,this.g=this.h=null}function ys(e,t,n){var r=new Uint8Array(0);e.g=e.i(t,n,function(t){return A(function(n){if(1==n.g)return r=0<r.byteLength?Kr(r,t):t,e.h?h(n,e.h(r),3):n.B(0);r=new Uint8Array(0),f(n)})})}function vs(e,t,n,r,i){return e=ar(e,r,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function ms(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.u=1,this.o=this.j=null,this.F=0,this.C=!1,this.i=new Map,this.A=!1,this.G=null,this.s=!1,this.l=new fr(function(){return bs(n)}),this.H=Date.now()/1e3}function bs(e){var t,n,r,i;return A(function(o){if(1==o.g){for(t=[],n=a(e.i.values()),r=n.next();!r.done;r=n.next())i=r.value,Gs(i),t.push(zs(i));return h(o,Promise.all(t),2)}e.i.clear(),e.g=null,e.m=null,e.h=null,f(o)})}function ws(e,t){var n,r,i,o,a,s,u;A(function(l){switch(l.g){case 1:return n=z_,e.F++,r=e.F,p(l,2),h(l,ca(e.g.T,n.ia),4);case 4:y(l,3);break;case 2:i=v(l),e.g&&e.g.onError(i);case 3:o=We(t.mimeType,t.codecs),ea(e.g.T,o,e.m.sequenceMode,t.external),a=e.g.T.F,(s=a.isTextVisible()||e.h.alwaysStreamText)&&e.F==r&&(u=Is(e,t),e.i.set(n.ia,u),qs(e,u,0)),f(l)}})}function _s(e){var t=e.i.get(G_);t&&(Gs(t),zs(t).catch(function(){}),e.i.delete(G_)),e.o=null}function Ts(e,t){var n=e.i.get("video");if(n){var r=n.stream;r&&(q("setTrickPlay",t),t?(t=r.trickModeVideo)&&!n.Wb&&(q("Engaging trick mode stream",t),ks(e,t,!1,0,!1),n.Wb=r):(r=n.Wb)&&(q("Restoring non-trick-mode stream",r),n.Wb=null,ks(e,r,!0,0,!1)))}}function Ss(e,t,n,r,i,o){n=void 0!==n&&n,r=void 0===r?0:r,i=void 0!==i&&i,o=void 0!==o&&o,e.j=t,e.A&&(t.video&&ks(e,t.video,n,r,i,o),t.audio&&ks(e,t.audio,n,r,i,o))}function Es(e,t){A(function(n){if(1==n.g)return e.o=t,e.A?t.segmentIndex?n.B(2):h(n,t.createSegmentIndex(),2):n.return();ks(e,t,!0,0,!1),f(n)})}function ks(e,t,n,r,i,o){var a=e.i.get(t.type);a||t.type!=G_?a&&(a.Wb&&(q("switch during trick play mode",t),t.trickModeVideo?(a.Wb=t,t=t.trickModeVideo,q("switch found trick play stream",t)):(a.Wb=null,q("switch found no special trick play stream"))),a.stream!=t||i?(a.qa&&hs(a.qa,t),t.type==G_&&(i=We(t.mimeType,t.codecs),ea(e.g.T,i,e.m.sequenceMode,t.external)),a.stream.closeSegmentIndex&&a.stream.closeSegmentIndex(),a.stream=t,a.X=null,a.Ef=!!o,q("switch: switching to Stream "+Js(a)),n&&(a.Pc?a.$d=!0:a.Ga?(a.Db=!0,a.xd=r,a.$d=!0):(Gs(a),Ks(e,a,!0,r).catch(function(t){e.g&&e.g.onError(t)}))),As(e,a).catch(function(t){e.g&&e.g.onError(t)})):q("switch: Stream "+Js(a)+" already active")):ws(e,t)}function As(e,t){var n,r;return A(function(i){if(1==i.g)return t.Ma?(n=t.stream,r=t.Ma,n.segmentIndex?i.B(2):h(i,n.createSegmentIndex(),2)):i.return();if(t.Ma!=r||t.stream!=n)return i.return();var o=e.g.Ed(),a=ra(e.g.T,t.type),s=t.stream.segmentIndex.find(t.Ca?t.Ca.endTime:o),u=null==s?null:t.stream.segmentIndex.get(s);s=u&&u.wa?u.wa-u.Pa:null,u&&!s&&(s=(u.endTime-u.getStartTime())*(t.stream.bandwidth||0)/8),s?((u=u.h)&&(s+=(u.wa?u.wa-u.Pa:null)||0),u=e.g.getBandwidthEstimate(),o=8*s/u<(a||0)-o-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.Ma.h.g>s):o=!1,o&&(K("Aborting current segment request."),t.Ma.abort()),f(i)})}function xs(e,t){var n=Js(t);t.Pc?q(n,"clear: already clearing the buffer"):t.Db?q(n,"clear: already waiting"):t.Ga?(q(n,"clear: currently updating"),t.Db=!0,t.xd=0):null==na(e.g.T,t.type)?(q(n,"clear: nothing buffered"),null==t.ib&&qs(e,t,0)):(q(n,"clear: handling right now"),Gs(t),Ks(e,t,!1,0).catch(function(t){e.g&&e.g.onError(t)}))}function Cs(e){var t,n,r,i,o,s,u,l,c;return A(function(d){if(1==d.g){if(t=z_,!e.j)throw H("init: no Streams chosen"),new Ne(2,5,5006);return n=new Map,r=new Set,e.j.audio&&(n.set(t.P,e.j.audio),r.add(e.j.audio)),e.j.video&&(n.set(t.$,e.j.video),r.add(e.j.video)),e.o&&(n.set(t.ia,e.o),r.add(e.o)),i=e.g.T,h(d,i.init(n,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(pr(e.l),e.updateDuration(),o=a(n.keys()),s=o.next();!s.done;s=o.next())u=s.value,l=n.get(u),e.i.has(u)||(c=Is(e,l),e.i.set(u,c),qs(e,c,0));f(d)})}function Is(e,t){return{stream:t,type:t.type,X:null,qa:Ms(e,t),Ca:null,zb:null,Se:null,Qe:null,Pe:null,Wb:null,endOfStream:!1,Ga:!1,ib:null,Db:!1,xd:0,$d:!1,Pc:!1,fd:!0,gf:!1,Yc:!1,Ma:null}}function Ms(e,t){return"video"!==t.type&&"audio"!==t.type?null:0<e.h.segmentPrefetchLimit?new us(e.h.segmentPrefetchLimit,t,function(t,n,r){return Ws(e,t,n,r)}):null}function Os(e,t){var n,r,i,o,a,s;return A(function(u){switch(u.g){case 1:if(pr(e.l),n=Js(t),t.Ga||null==t.ib||t.Pc)return u.return();if(t.ib=null,!t.Db){u.B(2);break}return q(n,"skipping update and clearing the buffer"),h(u,Ks(e,t,t.$d,t.xd),3);case 3:return u.return();case 2:if(t.stream.segmentIndex){u.B(4);break}return r=t.stream,h(u,t.stream.createSegmentIndex(),5);case 5:if(r!=t.stream)return r.closeSegmentIndex&&r.closeSegmentIndex(),t.Ga||t.ib||qs(e,t,0),u.return();case 4:p(u,6),i=Ps(e,t),null!=i&&(qs(e,t,i),t.Yc=!1),y(u,7);break;case 6:return o=v(u),h(u,Xs(e,t,o),8);case 8:return u.return();case 7:if(a=Array.from(e.i.values()),!e.A||!a.every(function(e){return e.endOfStream})){u.B(0);break}return G(n,"calling endOfStream()..."),h(u,e.g.T.endOfStream(),10);case 10:pr(e.l),s=e.g.T.getDuration(),0!=s&&s<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Oa(s),f(u)}})}function Ps(e,t){if(Vs(t))return ua(e.g.T,t.stream.originalId||""),null;if(t.type==G_&&la(e.g.T),!e.g.T.ga&&t.type!=G_)return e.h.updateIntervalSeconds/2;var n=Js(t),r=e.g.Ed(),i=t.Ca?t.Ca.endTime:r;z(n,"timeNeeded="+i);var o=ia(e.g.T,t.type,r);z(n,"update_:","presentationTime="+r,"bufferedAhead="+o);var s=Math.max(1,Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.u),u=e.m.presentationTimeline.getDuration()-i,l=ra(e.g.T,t.type);if(1e-6>u&&l)return q(n,"buffered to end of presentation"),t.endOfStream=!0,"video"==t.type&&(e=e.i.get(G_))&&Vs(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,o>=s)return z(n,"buffering goal met"),e.h.updateIntervalSeconds/2;if(!(o=js(e,t,r,l)))return e.h.updateIntervalSeconds;for(s=1/0,u=Array.from(e.i.values()),u=a(u),l=u.next();!l.done;l=u.next())l=l.value,Vs(l)||l.X&&!l.X.current()||(s=Math.min(s,l.Ca?l.Ca.endTime:r));return i>=s+e.m.presentationTimeline.g?(z(n,"waiting for other streams to buffer"),e.h.updateIntervalSeconds):(t.qa&&t.X&&(n=o.h,!n||t.Ca&&ro(n,t.zb)||cs(t.qa,n),ls(t.qa,o)),Ds(e,t,r,o).catch(function(){}),null)}function js(e,t,n,r){var i=Js(t);if(t.X)return t.X.current();if(t.Ca||r)return n=t.Ca?t.Ca.endTime:r,G(i,"looking up segment from new stream endTime:",n),t.X=t.stream.segmentIndex.Mb(n),t=t.X&&t.X.next().value,null==t&&W(i,"cannot find segment","endTime:",n),t;e=e.h.inaccurateManifestTolerance,r=Math.max(n-e,0),G(i,"looking up segment","lookupTime:",r,"presentationTime:",n);var o=null;return e&&(t.X=t.stream.segmentIndex.Mb(r),o=t.X&&t.X.next().value),o||(t.X=t.stream.segmentIndex.Mb(n),o=t.X&&t.X.next().value),null==o&&W(i,"cannot find segment","lookupTime:",r,"presentationTime:",n),o}function Ds(t,n,r,i){var o,a,s,u,l,c,d,g,m,b,w,_,T,S,E,k,x,C;return A(function(I){switch(I.g){case 1:if(o=z_,a=Js(n),G(a,"fetchAndAppend_:","presentationTime="+r,"reference.startTime="+i.startTime,"reference.endTime="+i.endTime),s=n.stream,u=n.X,n.Ga=!0,p(I,2),2==i.Pb())throw new Ne(1,1,1011);return h(I,Us(t,n,i),4);case 4:return pr(t.l),t.s?I.return():(z(a,"fetching segment"),l="video/mp4"==s.mimeType||"audio/mp4"==s.mimeType,c=e.ReadableStream,t.h.lowLatencyMode&&c&&l&&("HLS"!=t.m.type||i.s)?(m=new Uint8Array(0),w=b=!1,T=function(e){var o,a,u,l;return A(function(c){switch(c.g){case 1:if(b)return c.return();if(w=!0,pr(t.l),t.s)return c.return();if(p(c,2),m=Ls(m,e),o=!1,a=0,(new Ir).box("mdat",function(e){a=e.size+e.start,o=!0}).parse(m,!1,!0),!o){c.B(4);break}return u=m.subarray(0,a),m=m.subarray(a),h(c,Fs(t,n,r,s,i,u,!0),5);case 5:n.qa&&n.X&&ls(n.qa,i,!0);case 4:y(c,0);break;case 2:_=l=v(c),f(c)}})},h(I,Hs(t,n,i,T),9)):(t.h.lowLatencyMode&&!c&&W("Low latency streaming mode is enabled, but ReadableStream is not supported by the browser."),d=Hs(t,n,i),h(I,d,7)));case 7:return g=I.h,(pr(t.l),t.s)?I.return():(pr(t.l),n.Db?(K(a,"waitingToClearBuffer, skip append"),n.Ga=!1,qs(t,n,0),I.return()):h(I,Fs(t,n,r,s,i,g),6));case 9:if(S=I.h,_)throw _;if(w){I.B(10);break}return b=!0,pr(t.l),t.s?I.return():n.Db?(K(a,"waitingToClearBuffer, skip append"),n.Ga=!1,qs(t,n,0),I.return()):h(I,Fs(t,n,r,s,i,S),10);case 10:n.qa&&n.X&&ls(n.qa,i,!0);case 6:if(pr(t.l),t.s)return I.return();n.Ca=i,E=u.next().value,z(a,"advancing to next segment",E),n.Ga=!1,n.gf=!1,k=t.g.T.nb(),x=k[n.type],G(a,"finished fetch and append",JSON.stringify(x)),n.Db||t.g.bf(i,n.stream),qs(t,n,0),y(I,0);break;case 2:if(C=v(I),pr(t.l,C),t.s)return I.return();if(n.Ga=!1,7001==C.code)n.Ga=!1,Gs(n),qs(t,n,0),I.B(0);else if(n.type==o.ia&&t.h.ignoreTextStreamFailures)1001==C.code?W(a,"Text stream failed to download. Proceeding without it."):W(a,"Text stream failed to parse. Proceeding without it."),t.i.delete(o.ia),I.B(0);else{if(3017!=C.code)return H(a,"failed fetch and append: code="+C.code),n.Yc=!0,C.severity=2,h(I,Xs(t,n,C),0);Ns(t,n,C),I.B(0)}}})}function Rs(t,n,r){var i,o,a,s;return A(function(u){if(1==u.g)return i=n,i.cryptoKey?u.B(2):h(u,i.fetchKey(),3);if(!(o=i.iv))for(o=le(new ArrayBuffer(16)),a=i.firstMediaSequenceNumber+r,s=o.byteLength-1;0<=s;s--)o[s]=255&a,a>>=8;return u.return(e.crypto.subtle.decrypt({name:"AES-CBC",iv:o},i.cryptoKey,t))})}function Ls(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Ns(e,t,n){var r=Js(t);if(Array.from(e.i.values()).some(function(e){return e!=t&&e.gf}))q(r,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{if(0<e.h.maxDisabledTime&&e.g.yd(t.stream,e.h.maxDisabledTime))return;var i=Math.round(100*e.u);if(20<i)e.u-=.2;else{if(!(4<i))return H(r,"MediaSource threw QuotaExceededError too many times"),t.Yc=!0,e.s=!0,void e.g.onError(n);e.u-=.04}W(r,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*e.u))+"%"),t.gf=!0}qs(e,t,4)}function Us(e,t,n){var r,i,o,a,s,u,l,c,d,f,g,m,b,w;return A(function(_){switch(_.g){case 1:if(r=z_,i=Js(t),o=[],a=Math.max(0,n.appendWindowStart-.1),s=n.appendWindowEnd+.01,u=Ye(t.stream.codecs),l=Je(t.stream.mimeType),(c=n.timestampOffset)==t.Se&&a==t.Qe&&s==t.Pe&&u==t.Re&&l==t.$f){_.B(2);break}if(G(i,"setting timestamp offset to "+c),G(i,"setting append window start to "+a),G(i,"setting append window end to "+s),!(d=t.Re&&t.$f&&Aa(e.g.T,t.type,l,u))){_.B(3);break}if(f=null,t.type===r.$?f=e.i.get(r.P):t.type===r.P&&(f=e.i.get(r.$)),!f){_.B(3);break}return h(_,zs(f).catch(function(){}),5);case 5:f.zb=null,xs(e,f);case 3:return g=function(){var i,o,d;return A(function(f){if(1==f.g)return i=new Map,e.j.audio&&i.set(r.P,e.j.audio),e.j.video&&i.set(r.$,e.j.video),p(f,2),t.Qe=a,t.Pe=s,t.Re=u,t.$f=l,t.Se=c,o=e.m.sequenceMode||"HLS"==e.m.type,h(f,da(e.g.T,t.type,c,a,s,o,n.mimeType||t.stream.mimeType,n.codecs||t.stream.codecs,i),4);if(2!=f.g)return y(f,0);throw d=v(f),t.Qe=null,t.Pe=null,t.Re=null,t.Se=null,d})},h(_,g(),2);case 2:return ro(n.h,t.zb)||(t.zb=n.h,n.m&&n.h&&(G(i,"fetching init segment"),m=Hs(e,t,n.h),b=function(){var o,a,s,u,l,c;return A(function(d){switch(d.g){case 1:return p(d,2),h(d,m,4);case 4:return o=d.h,pr(e.l),a=null,s=new Map,u=new Ir,u.box("moov",Mr).box("trak",Mr).box("mdia",Mr).O("mdhd",function(e){a=_o(e.reader,e.version).timescale}).box("hdlr",function(e){e=e.reader,e.skip(8),e=e.rb(4);var t=String.fromCharCode(e[0]);switch(t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])){case"soun":s.set(r.P,a);break;case"vide":s.set(r.$,a)}a=null}).parse(o),s.has(t.type)?n.h.timescale=s.get(t.type):null!=a&&(n.h.timescale=a),G(i,"appending init segment"),l=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,h(d,e.g.Gf(t.type,o),5);case 5:return h(d,sa(e.g.T,t.type,o,null,t.stream,l),6);case 6:y(d,0);break;case 2:throw c=v(d),t.zb=null,c}})},e.g.Ih(n.startTime,n.h),o.push(b()))),e.m.sequenceMode&&(w=t.Ca?t.Ca.l:null,n.l!=w&&o.push(ha(e.g.T,t.type,n.startTime))),h(_,Promise.all(o),0)}})}function Fs(e,t,n,r,i,o,a){a=void 0!==a&&a;var s,u,l,c,d,p,g;return A(function(y){switch(y.g){case 1:return s=Js(t),u=r.closedCaptions&&0<r.closedCaptions.size,c=null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,d=e.h.parsePrftBox&&!e.C,(c||d)&&(l=new Ir),c&&l.O("emsg",function(t){var n=r.emsgSchemeIdUris;if(0===t.version)var o=t.reader.ed(),a=t.reader.ed(),s=t.reader.M(),u=t.reader.M(),l=t.reader.M(),c=t.reader.M(),d=i.startTime+u/s;else s=t.reader.M(),d=t.reader.pc()/s+i.timestampOffset,u=d-i.startTime,l=t.reader.M(),c=t.reader.M(),o=t.reader.ed(),a=t.reader.ed();t=t.reader.rb(t.reader.getLength()-t.reader.pa()),(n&&n.includes(o)||e.h.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==o?e.g.Jh():(n=(new Map).set("detail",{startTime:d,endTime:d+l/s,schemeIdUri:o,value:a,timescale:s,presentationTimeDelta:u,eventDuration:l,id:c,messageData:t}),n=new Zn("emsg",n),n.cancelable=!0,e.g.onEvent(n),n.defaultPrevented||"https://aomedia.org/emsg/ID3"!=o&&"https://developer.apple.com/streaming/emsg-id3"!=o||(o=vo(t),o.length&&i&&e.g.Kh([{cueTime:i.startTime,data:t,frames:o,dts:i.startTime,pts:i.startTime}],0,i.endTime))))}),d&&l.O("prft",function(t){if(!e.C&&i.h.timescale){var n=t.reader,r=t.version;n.M(),t=n.M();t=1e3*t+n.M()/Math.pow(2,32)*1e3,0===r?n=n.M():(r=n.M(),n=n.M(),n=r*Math.pow(2,32)+n),t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+t).getTime(),n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/i.h.timescale*1e3)}),n=new Zn("prft",n),e.g.onEvent(n),e.C=!0}}),(c||d)&&l.parse(o),h(y,Bs(e,t,n),2);case 2:return pr(e.l),p=t.fd,t.fd=!1,g=t.Ef,t.Ef=!1,h(y,e.g.Gf(t.type,o),3);case 3:return h(y,sa(e.g.T,t.type,o,i,r,u,p,g,a),4);case 4:pr(e.l),z(s,"appended media segment"),f(y)}})}function Bs(e,t,n){var r,i,o,a,s;return A(function(u){if(1==u.g)return r=Js(t),z(r,"checking buffer length"),i=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),null==(o=na(e.g.T,t.type))?(z(r,"buffer behind okay because nothing buffered:","presentationTime="+n,"bufferBehind="+i),u.return()):(a=n-o,1>=(s=a-i)?(z(r,"buffer behind okay:","presentationTime="+n,"bufferedBehind="+a,"bufferBehind="+i,"underflow="+Math.abs(s)),u.return()):(G(r,"buffer behind too large:","presentationTime="+n,"bufferedBehind="+a,"bufferBehind="+i,"overflow="+s),h(u,e.g.T.remove(t.type,o,o+s),2)));pr(e.l),G(r,"evicted "+s+" seconds"),f(u)})}function Vs(e){return e&&e.type==G_&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Hs(e,t,n,r){var i,o,a,s,u;return A(function(l){switch(l.g){case 1:if(n instanceof no&&(i=n.g))return l.return(i);if(o=null,t.qa){var c=t.qa,d=ps(c.h);if(c.g.has(n)){var f=c.g.get(n);r&&(f.h=r),c.g.delete(n),n instanceof io?q(d,"reused prefetched segment at time:",n.startTime,"mapSize",c.g.size):q(d,"reused prefetched init segment at time, mapSize",c.g.size),o=f.g}else n instanceof io?q(d,"missed segment at time:",n.startTime,"mapSize",c.g.size):q(d,"missed init segment at time, mapSize",c.g.size),o=null}return o||(o=Ws(e,n,t.stream,r)),a=0,t.X&&(a=t.X.g),t.Ma=o,h(l,o.promise,2);case 2:if(s=l.h,t.Ma=null,u=s.data,!n.aes128Key){l.B(3);break}return h(l,Rs(u,n.aes128Key,a),4);case 4:u=l.h;case 3:return l.return(u)}})}function Ws(e,t,n,r){var i=t instanceof io?t:void 0,o=i?1:0;return r=vs(t.Z(),t.Pa,t.wa,e.h.retryParameters,r),z("fetching: reference=",t),e.g.Ub.request(dT,r,{type:o,stream:n,segment:i})}function Ks(e,t,n,r){var i,o,a;return A(function(s){return 1==s.g?(i=Js(t),t.Db=!1,t.$d=!1,t.xd=0,t.Pc=!0,t.Ca=null,t.zb=null,t.X=null,q(i,"clearing buffer"),t.qa&&ds(t.qa),r?(o=e.g.Ed(),a=e.g.T.getDuration(),h(s,e.g.T.remove(t.type,o+r,a),3)):h(s,ca(e.g.T,t.type),4)):3!=s.g?(pr(e.l),n?h(s,e.g.T.flush(t.type),3):s.B(3)):(pr(e.l),q(i,"cleared buffer"),t.Pc=!1,t.endOfStream=!1,t.Ga||t.ib||qs(e,t,0),void f(s))})}function qs(e,t,n){var r=Js(t),i=t.type;i!=G_||e.i.has(i)?(z(r,"updating in "+n+" seconds"),t.ib=new _t(function(){var n;return A(function(r){return 1==r.g?(p(r,2),h(r,Os(e,t),4)):2!=r.g?y(r,0):(n=v(r),e.g&&e.g.onError(n),void f(r))})}).U(n)):G(r,"Text stream is unloaded. No update is needed.")}function Gs(e){null!=e.ib&&(e.ib.stop(),e.ib=null)}function zs(e){return A(function(t){return e.Ma?h(t,e.Ma.abort(),0):t.B(0)})}function Xs(e,t,n){var r;return A(function(i){if(1==i.g)return h(i,Wn(e.G),2);pr(e.l),r=0===e.h.maxDisabledTime&&1011==n.code?1:e.h.maxDisabledTime,1===n.category&&0<r&&(n.handled=e.g.yd(t.stream,r),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.h.failureCallback(n),f(i)})}function Ys(e){var t,n,r,i,o,a;return A(function(s){return 1==s.g?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.H<n?s.return(!1):(e.H=t,r=z_,(i=e.i.get(r.P))&&(i.zb=null,xs(e,i),zs(i).catch(function(){})),(o=e.i.get(r.$))&&(o.zb=null,xs(e,o),zs(o).catch(function(){})),a=new Map,e.j.audio&&a.set(r.P,e.j.audio),e.j.video&&a.set(r.$,e.j.video),h(s,Ea(e.g.T,a),2))):s.return(!0)})}function Js(e){return"("+e.type+":"+e.stream.id+")"}function Qs(e,t,n){var r,i,o,a,s,u,l;return A(function(c){switch(c.g){case 1:var d=new Ae(e).Fa.split("/").pop().split(".");return r=1==d.length?"":d.pop().toLowerCase(),(i=VT[r])?c.return(i):(o=0,a=ar([e],n),p(c,2),a.method="HEAD",h(c,t.request(o,a).promise,4));case 4:s=c.h,i=s.headers["content-type"],y(c,3);break;case 2:if(!(u=v(c))||1002!=u.code&&1001!=u.code){c.B(3);break}return a.method="GET",h(c,t.request(o,a).promise,6);case 6:l=c.h,i=l.headers["content-type"];case 3:return c.return(i?i.toLowerCase().split(";").shift():"")}})}function $s(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(t){return $s(t,e)}).join("");var n=[],r=700<=e.fontWeight,i="italic"==e.fontStyle,o=e.textDecoration.includes("underline");return r&&n.push(["b"]),i&&n.push(["i"]),o&&n.push(["u"]),i=e.color,""==i&&t&&(i=t.color),r="",(i=Zs(i))&&(r+="."+i),i=e.backgroundColor,""==i&&t&&(i=t.backgroundColor),(t=Zs(i))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(e,t){var n=a(t);return t=n.next().value,n=n.next().value,"<"+t+(void 0===n?"":n)+">"+e+"</"+t+">"},e.payload)}function Zs(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(256|parseInt(t[1],10)).toString(16).slice(1)+(256|parseInt(t[2],10)).toString(16).slice(1)+(256|parseInt(t[3],10)).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function eu(e,t){var n=[];e=a(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,s(eu(r.nestedCues,r)));else{var i=r.clone();i.nestedCues=[],i.payload=$s(r,t),n.push(i)}return n}function tu(e,t){this.g=null;for(var n=a(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.mode="disabled",r.label==t&&(this.g=r);this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}function nu(e){if(e.startTime>=e.endTime)return W("Invalid cue times: "+e.startTime+" - "+e.endTime),null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function ru(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=a(Array.from(e.cues)),i=r.next();!i.done;i=r.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=n}/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function iu(){}function ou(){}function au(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function su(t,n){var r=this;this.m=!1,this.i=[],this.u=t,this.s=n,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),this.C=new Tt(function(){r.u.paused||cu(r)}).$a(.25),this.h=new Map,this.j=new Q,this.j.D(document,"fullscreenchange",function(){cu(r,!0)}),this.j.D(this.u,"seeking",function(){cu(r,!0)}),this.j.D(this.u,"resize",function(){var e=r.u,t=e.videoWidth;e=e.videoHeight,r.l=t&&e?t/e:null}),this.o=null,"ResizeObserver"in e&&(this.o=new ResizeObserver(function(){cu(r,!0)}),this.o.observe(this.g)),this.A=new Map}function uu(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function lu(e,t,n,r,i){var o=!1,s=[],u=[];t=a(t);for(var l=t.next();!l.done;l=t.next()){l=l.value,i.push(l);var c=e.h.get(l),d=l.startTime<=r&&l.endTime>r,h=c?c.zg:null;c&&(s.push(c.qe),c.Vb&&s.push(c.Vb),d||(o=!0,e.h.delete(l),c=null)),d&&(u.push(l),c?uu(e,h)||(o=!0):(du(e,l,i),c=e.h.get(l),h=c.zg,o=!0)),0<l.nestedCues.length&&h&&lu(e,l.nestedCues,h,r,i),i.pop()}if(o){for(r=a(s),i=r.next();!i.done;i=r.next())i=i.value,i.parentElement&&!i.id.includes("shaka-text-region")&&i.parentElement.removeChild(i);for(u.sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),u=a(u),l=u.next();!l.done;l=u.next())r=e.h.get(l.value),r.Vb?(r.Vb.contains(n)&&r.Vb.removeChild(n),n.appendChild(r.Vb),r.Vb.appendChild(r.qe)):n.appendChild(r.qe)}}function cu(e,t){if(e.g){var n=e.u.currentTime;if(!e.m||(void 0===t?0:t)){t=a(e.A.values());for(var r=t.next();!r.done;r=t.next())au(r.value);au(e.g),e.h.clear(),e.A.clear()}if(e.m){t=new Map,r=a(e.h.keys());for(var i=r.next();!i.done;i=r.next())i=i.value,t.set(i,e.h.get(i));lu(e,e.i,e.g,n,[])}}}function du(e,t,n){var r=1<n.length,i=r?"span":"div";t.lineBreak&&(i="br"),t.rubyTag&&(i=t.rubyTag),r=!r&&0<t.nestedCues.length;var o=document.createElement(i);if("br"!=i&&fu(e,o,t,n,r),n=null,t.region&&t.region.id){n=t.region,i=e.l===4/3?2.5:1.9;var a=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==M_?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==M_?"%":"px");if(e.A.has(a))n=e.A.get(a);else{var s=document.createElement("span"),u=n.heightUnits==M_?"%":"px",l=n.widthUnits==M_?"%":"px",c=n.viewportAnchorUnits==M_?"%":"px";s.id="shaka-text-region---"+a,s.classList.add("shaka-text-region"),s.style.position="absolute",2===n.heightUnits&&2===n.widthUnits?(s.style.height=5.33*n.height+"%",s.style.width=n.width*i+"%"):(s.style.height=n.height+u,s.style.width=n.width+l),2===n.viewportAnchorUnits?(u=n.viewportAnchorY/75*100,l=n.viewportAnchorX/(e.l===4/3?160:210)*100,u-=n.regionAnchorY*n.height*5.33/100,l-=n.regionAnchorX*n.width*i/100,s.style.top=u+"%",s.style.left=l+"%"):(s.style.top=n.viewportAnchorY-n.regionAnchorY*n.height/100+c,s.style.left=n.viewportAnchorX-n.regionAnchorX*n.width/100+c),s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="center",s.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.A.set(a,s),n=s}}i=o,r&&(i=document.createElement("span"),i.classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,i.style.lineHeight="normal",o.appendChild(i)),e.h.set(t,{qe:o,zg:i,Vb:n})}function hu(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==g_?n:"left"===e||"start"===e&&t===w_||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===w_?"line-right":"center"}function fu(e,t,n,r,i){var o=t.style,a=0==n.nestedCues.length,s=1<r.length;o.whiteSpace="pre-wrap";var u=n.payload.replace(/\s+$/g,function(e){return" ".repeat(e.length)});if(o.webkitTextStrokeColor=n.textStrokeColor,o.webkitTextStrokeWidth=n.textStrokeWidth,o.color=n.color,o.direction=n.direction,o.opacity=n.opacity,o.paddingLeft=pu(n.linePadding,n,e.s),o.paddingRight=pu(n.linePadding,n,e.s),o.textCombineUpright=n.textCombineUpright,o.textShadow=n.textShadow,n.backgroundImage)o.backgroundImage="url('"+n.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",o.width="100%",o.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),!i&&((t=gu(r,function(e){return e.backgroundColor}))?l.style.backgroundColor=t:u&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=gu(r,function(e){return e.fontFamily}))&&(l.style.fontFamily=t),u&&(l.textContent=u)}s&&!r[r.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",o.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),a||(o.margin="0"),o.fontFamily=n.fontFamily,o.fontWeight=n.fontWeight.toString(),o.fontStyle=n.fontStyle,o.letterSpacing=n.letterSpacing,o.fontSize=pu(n.fontSize,n,e.s),r=n.line,null!=r&&(a=n.lineInterpretation,a==T_&&(a=1,s=16,e.l&&1>e.l&&(s=32),r=0>r?100+r/s*100:r/s*100),1==a&&(o.position="absolute",n.writingMode==__?(o.width="100%",n.lineAlign==S_?o.top=r+"%":"end"==n.lineAlign&&(o.bottom=100-r+"%")):"vertical-lr"==n.writingMode?(o.height="100%",n.lineAlign==S_?o.left=r+"%":"end"==n.lineAlign&&(o.right=100-r+"%")):(o.height="100%",n.lineAlign==S_?o.right=r+"%":"end"==n.lineAlign&&(o.left=100-r+"%")))),o.lineHeight=n.lineHeight,null!=n.position&&(n.writingMode==__?o.paddingLeft=n.position:o.paddingTop=n.position),e=hu(n),"line-left"==e?o.cssFloat="left":"line-right"==e&&(o.cssFloat="right"),o.textAlign=n.textAlign,o.textDecoration=n.textDecoration.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==__?o.width=n.size+"%":o.height=n.size+"%")}function pu(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var i=r.value;switch(r.unit){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return e}}function gu(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||0===r)return r}return null}function yu(e,t){function n(e){for(var n=e,r=a(t),i=r.next();!i.done;i=r.next())i=i.value,i.end&&i.start<e&&(n+=i.end-i.start);return e=Math.floor(n/3600),r=Math.floor(n/60%60),i=Math.floor(n%60),n=Math.floor(1e3*n%1e3),(10>e?"0":"")+e+":"+(10>r?"0":"")+r+":"+(10>i?"0":"")+i+"."+(100>n?10>n?"00":"0":"")+n}var r=eu(e);e="WEBVTT\n\n",r=a(r);for(var i=r.next();!i.done;i=r.next())i=i.value,e+=n(i.startTime)+" --\x3e "+n(i.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case y_:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(i)+"\n",e+=i.payload+"\n\n";return e}function vu(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}function mu(e,t,n){try{if(!e.g.enabled)return t;var r=bu(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var i=WT;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":i=qT;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":i=HT;break e}i=void 0}r.ot=i,r.su=!0;var o=Eu(r);return Au(t,o)}catch(e){return V("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}function bu(t){return t.g.sessionId||(t.g.sessionId=e.crypto.randomUUID()),{v:1,sf:t.m,sid:t.g.sessionId,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function wu(e,t,n){n=void 0===n?{}:n;var r=void 0===r?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,bu(e)),n.pr=e.h.Dd();var i=n.ot===KT||n.ot===qT;if(e.j&&i&&(n.bs=!0,n.su=!0,e.j=!1),null==n.su&&(n.su=e.l),r)e=ku(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var o=Eu(n);o&&(t.uris=t.uris.map(function(e){return Au(e,o)}))}}}function _u(e){if(0===e.type)return GT;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?qT:KT;if("audio"==t)return WT;if("text"==t)return"application/mp4"===e.mimeType?XT:zT}}function Tu(e,t){if(t=e.h.nb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):NaN}function Su(e,t){var n=e.h.yb();if(!n.length)return NaN;e=n[0],n=a(n);for(var r=n.next();!r.done;r=n.next())r=r.value,"variant"===r.type&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case KT:return e.videoBandwidth||NaN;case WT:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Eu(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}var r=[],i={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},o=Object.keys(e||{}).sort();o=a(o);for(var s=o.next();!s.done;s=o.next()){s=s.value;var u=e[s];if(function(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}(u)&&("v"!==s||1!==u)&&("pr"!=s||1!==u)){var l=i[s];l&&(u=l(u)),l=typeof u;var c=void 0;c="string"===l&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(u):"boolean"===l?s:"symbol"===l?s+"="+u.description:s+"="+u,r.push(c)}}return r.join(",")}function ku(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=a(t);for(var s=t.next();!s.done;s=t.next())s=s.value,i[null!=o[s]?o[s]:1][s]=e[s];for(e=0;e<i.length;e++)(o=Eu(i[e]))&&(n["CMCD-"+r[e]]=o);return n}function Au(e,t){return!t||e.includes("offline:")?e:(e=new Ae(e),e.g.set("CMCD",t),e.toString())}function xu(e){this.h=e,this.g=null}function Cu(e){return!e||"false"!==e.toLowerCase()&&(/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}function Iu(){}function Mu(e,t,n,r,i){var o,a=i in r,s=!0;for(o in t){var u=i+"."+o,l=a?r[i]:n[o];a||o in n?void 0===t[o]?void 0===l||a?delete e[o]:e[o]=bt(l):l.constructor==Object&&t[o]&&t[o].constructor==Object?(e[o]||(e[o]=bt(l)),u=Mu(e[o],t[o],l,r,u),s=s&&u):typeof t[o]!=typeof l||null==t[o]||"function"!=typeof t[o]&&t[o].constructor!=l.constructor?(F("Invalid config, wrong type for "+u),s=!1):("function"==typeof n[o]&&n[o].length!=t[o].length&&B("Unexpected number of arguments for "+u),e[o]=t[o]):(F("Invalid config, unrecognized key "+u),s=!1)}return s}function Ou(e,t){for(var n={},r=n,i=0,o=0;!(0>(i=e.indexOf(".",i)));)0!=i&&"\\"==e[i-1]||(o=e.substring(o,i).replace(/\\\./g,"."),r[o]={},r=r[o],o=i+1),i+=1;return r[e.substring(o).replace(/\\\./g,".")]=t,n}function Pu(e,t){return e&&t}function ju(){this.g=null,this.h=[]}function Du(e,t){return A(function(n){if(1==n.g)return z(t+" has requested mutex"),e.g?h(n,new Promise(function(t){return e.h.push(t)}),2):n.B(2);e.g=t,z(t+" has acquired mutex"),f(n)})}function Ru(){}function Lu(e){return e=Sr(e),new Ae(e).mb}function Nu(e,t,n){function r(e){de(o).setUint32(a,e.byteLength,!0),a+=4,o.set(le(e),a),a+=e.byteLength}if(!n||!n.byteLength)throw new Ne(2,6,6015);var i;i="string"==typeof t?kr(t,!0):t,e=Sr(e),e=kr(e,!0);var o=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),a=0;return r(e),r(i),r(n),o}function Uu(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,n=Sr(e).split("skd://").pop(),Nu(e,n,t))}function Fu(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")}function Bu(){}function Vu(){var t=1/0;navigator.connection&&navigator.connection.saveData&&(t=360);var n={retryParameters:Kn(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(t,n,r){return e.shakaMediaKeysPolyfill&&"skd"==n&&(n=r.serverCertificate,r=Lu(t),t=Nu(t,r,n)),t},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:At(),minHdcpVersion:"",ignoreDuplicateInitData:!It()},r="reload",i=!1;It()||Ct()||Lt("Tizen 4")||Mt()&&38===Pt()||Mt()&&53===Pt()||Mt()&&68===Pt()||Ot()&&(!Ot()||!Lt("Android"))||(navigator.userAgentData&&navigator.userAgentData.platform?"windows"==navigator.userAgentData.platform.toLowerCase():navigator.platform&&navigator.platform.toLowerCase().includes("windows"))&&kt()||(r="smooth",i=!0),i={retryParameters:Kn(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:uuid:adb41c24-2dbf-4a6d-958b-4457c0d27b95":"com.tvkey.drm"},manifestPreprocessor:function(e){return Pu([e],e)},sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:i},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Ct()||It()||Mt()&&38===Pt()||Dt()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:function(e){return Pu([e],e)},sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var o={retryParameters:Kn(),failureCallback:function(e){return H("Unhandled streaming error",e),Pu([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5};(Mt()||xt()||Ot()||Lt("Hisense")||Lt("VIDAA"))&&(o.stallSkip=0);var a={trackSelectionCallback:function(e){return A(function(t){return t.return(e)})},downloadSizeCallback:function(e){var t;return A(function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?h(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))})},progressCallback:function(e,t){return Pu([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},s={drm:n,manifest:i,streaming:o,mediaSource:{codecSwitchingStrategy:r,sourceBufferExtraFeatures:"",forceTransmux:!1,insertFakeEncryptionInInit:!0},offline:a,abrFactory:function(){return new yn},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredAudioChannelConfig:"2",preferredAudioAccessibilityPurpose:"",preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1}};return a.trackSelectionCallback=function(e){return A(function(t){return t.return(Wu(e,s.preferredAudioLanguage,s.preferredVideoHdrLevel))})},s}function Hu(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Mu(e,t,n||Vu(),r,"")}function Wu(t,n,r){var i=r;"AUTO"==i&&(i=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var o=t.filter(function(e){return!("variant"!=e.type||e.hdr&&e.hdr!=i)});r=[];var s=mt(n,o.map(function(e){return e.language}));s&&(r=o.filter(function(e){return pt(e.language)==s})),0==r.length&&(r=o.filter(function(e){return e.primary})),0==r.length&&(1<new Set(o.map(function(e){return e.language})).size&&W("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),r=o);var u=r.filter(function(e){return e.height&&480>=e.height});for(u.length&&(u.sort(function(e,t){return t.height-e.height}),r=u.filter(function(e){return e.height==u[0].height})),n=[],r.length&&(o=Math.floor(r.length/2),r.sort(function(e,t){return e.bandwidth-t.bandwidth}),n.push(r[o])),t=a(t),r=t.next();!r.done;r=t.next())r=r.value,r.type!=G_&&"image"!=r.type||n.push(r);return n}function Ku(){this.g=null,this.h=[]}function qu(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=a(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function Gu(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=a(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}function zu(){this.i=this.h=null,this.g=[]}function Xu(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Yu(){this.u=this.A=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.L=this.N=this.H=this.J=this.K=this.l=this.o=NaN,this.g=new Ku,this.h=new zu}function Ju(t,n){tr.call(this);var r=this;this.Oe=null,this.m=eS,this.zd=this.h=null,this.ba=!1,this.Hd=new Q,this.uc=new Q,this.o=new Q,this.Ba=new Q,this.C=this.F=this.l=this.H=null,this.Ld=0,this.W=new ju,this.ca=this.ga=this.i=this.Md=this.G=this.j=this.na=this.K=this.gg=this.Y=this.V=this.Aa=this.L=this.J=this.bc=null,this.kb=!1,this.Ue=this.s=null,this.$e=1e9,this.Sc=[],this.N=NaN,this.g=Rl(this),this.Jd={width:1/0,height:1/0},this.u=null,this.Ha=new In(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,this.g.preferredAudioChannelConfig,this.g.preferredAudioAccessibilityPurpose),this.jb=this.g.preferredTextLanguage,this.Oc=this.g.preferredTextRole,this.Nc=this.g.preferForcedSubs,this.Lc=[],n&&n(this),this.V=El(this),this.Y=new xu(this.g.cmsd),this.H=ml(this),this.H.rf(this.g.streaming.forceHTTPS),this.A=null,aS&&(this.A=aS(),this.A.configure(this.g.ads)),this.Hd.D(e,"online",function(){oc(r),r.jf()}),this.Bd=new Tt(function(){return Yl(r)}),t&&(_n("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Mc(t,!0))}function Qu(e){null!=e.K&&(zo(e.K),e.K.release(),e.K=null)}function $u(e,t){if(t.lcevc.enabled){var n=e.yb();n&&n[0]&&"video/mp2t"==n[0].videoMimeType&&(kt()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||B("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),Qu(e),null==e.K&&(e.K=new Go(e.h,e.gg,t.lcevc),e.F&&(e.F.V=e.K))}else Qu(e)}function Zu(e,t){return new Zn(e,t)}function el(e,t){e.dispatchEvent(Zu("onstatechange",(new Map).set("state",t)))}function tl(e,t){var n;return A(function(r){return 1==r.g?(n=++e.Ld,h(r,Du(e.W,t),2)):n!=e.Ld?(e.W.release(),r.return(!0)):r.return(!1)})}function nl(e){var t,n;return A(function(r){return 1==r.g?(t=e.g.manifest.retryParameters,h(r,Qs(e.ga,e.H,t),2)):(n=r.h,"application/x-mpegurl"==n&&jt()&&(n="application/vnd.apple.mpegurl"),r.return(n))})}function rl(e,t){if(!St())return!0;if(t){if(""==(e.h||Nt()).canPlayType(t))return!1;if(!(St()&&t in ET))return!0;if($e(t)){if(e.g.streaming.preferNativeHls)return!0;if(jt())return e.g.streaming.useNativeHlsOnSafari}}return!1}function il(e){var t,n,r,i,o;return A(function(a){if(1==a.g)return el(e,"media-source"),t=e.g.textDisplayFactory,n=t(),e.Xe=t,r=Sl(e.h,n,function(t,n,r){fl(e,t,n,r)},e.K),r.configure(e.g.mediaSource),i=e.g.manifest,o=i.segmentRelativeVttTiming,r.ba=o,h(a,r.L,2);e.F=r,f(a)})}function ol(e,t){var n,r,i,o,s,u,l,c;return A(function(d){if(1==d.g)return n=e.H,el(e,"manifest-parser"),e.Md=$i(e.ga,t||null),e.G=e.Md(),r=bt(e.g.manifest),e.h&&"AUDIO"===e.h.nodeName&&(r.disableVideo=!0),e.G.configure(r),e.Aa=new os(function(){return e.Ab()}),e.Aa.addEventListener("regionadd",function(t){t=t.region,sc(e,"timelineregionadded",t),e.A&&e.A.onDashTimedMetadata(t)}),e.na=null,e.g.streaming.observeQualityChanges&&(e.na=new ts(function(){return e.nb()}),e.na.addEventListener("qualitychange",function(t){var n=t.quality;t=t.position,n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t),e.dispatchEvent(Zu("mediaqualitychanged",n))})),i={networkingEngine:n,filter:function(t){return Nl(e,t)},makeTextStreamsForClosedCaptions:function(t){return Ll(e,t)},onTimelineRegionAdded:function(t){var n=e.Aa;e:{for(var r=a(n.g),i=r.next();!i.done;i=r.next())if(i=i.value,i.schemeIdUri==t.schemeIdUri&&i.id==t.id&&i.startTime==t.startTime&&i.endTime==t.endTime){r=i;break e}r=null}null==r&&(n.g.add(t),t=new Zn("regionadd",new Map([["region",t]])),n.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return ac(e,t)},isLowLatencyMode:function(){return e.g.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.g.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(t){var n=e.l?e.l.g:null;n&&e.l.u&&Bl(e,n.keySystem,t)},onManifestUpdated:function(){var t=(new Map).set("isLive",e.R());e.dispatchEvent(Zu("manifestupdated",t)),e.A&&e.A.onManifestUpdated(e.R())},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()}},o=Date.now()/1e3,el(e,"manifest"),s=e,h(d,e.G.start(e.ga,i),2);if(s.i=d.h,u=Zu("manifestparsed"),e.dispatchEvent(u),0==e.i.variants.length)throw new Ne(2,4,4036);yl(e.i),l=Date.now()/1e3,c=l-o,e.u.F=c,f(d)})}function al(e){var t,n,r,i;return A(function(o){return 1==o.g?(el(e,"drm-engine"),t=Date.now()/1e3,n=!0,e.l=vl(e,{Ub:e.H,onError:function(t){ac(e,t)},Vd:function(t){lc(e,t)},onExpirationUpdated:function(t,n){cc(e,t,n)},onEvent:function(r){e.dispatchEvent(r),"drmsessionupdate"==r.type&&n&&(n=!1,e.u.j=Date.now()/1e3-t,e.K&&zo(e.K))}}),e.l.configure(e.g.drm),e.l.jd(e.Oe),(r=Wt(e.i.variants,e.g.restrictions,e.Jd))&&e.j&&ec(e),i=hn(e.i.variants),h(o,vi(e.l,i,e.i.offlineSessionIds),2)):3!=o.g?h(o,e.l.Mc(e.h),3):h(o,Nl(e,e.i),0)})}function sl(e,t){var n,r,i,o,s,u,l,c,d,p,g,y,v,m,b,w,_,T,S,E,k,x,C;return A(function(A){switch(A.g){case 1:for(el(e,"load"),n=e.h,e.J=new $a({Fd:function(){return n.playbackRate},hc:function(){return n.defaultPlaybackRate},uf:function(e){n.playbackRate=e},dg:function(e){n.currentTime+=e}}),r=function(){return Kl(e)},i=function(){return Wl(e)},e.o.D(n,"playing",r),e.o.D(n,"pause",r),e.o.D(n,"ended",r),e.o.D(n,"ratechange",i),$u(e,e.g),o=e.g.abrFactory,e.s&&e.Ue==o||(e.Ue=o,e.s=o(),"function"!=typeof e.s.setMediaElement&&(_n("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),e.s.setMediaElement=function(){}),"function"!=typeof e.s.setCmsdManager&&(_n("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),e.s.setCmsdManager=function(){}),"function"!=typeof e.s.trySuggestStreams&&(_n("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),e.s.trySuggestStreams=function(){}),e.s.configure(e.g.abr)),e.Ha=new In(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups,e.g.preferredAudioChannelConfig,e.g.preferredAudioAccessibilityPurpose),e.jb=e.g.preferredTextLanguage,e.Oc=e.g.preferredTextRole,e.Nc=e.g.preferForcedSubs,dc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.s.init(function(t,n,r){n=void 0!==n&&n,r=void 0===r?0:r,q("switch_"),e.j&&t!=e.j.j&&Ql(e,t,!0,n,r)}),e.s.setMediaElement(n),e.s.setCmsdManager(e.Y),Ft(e.i,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes),e.j=kl(e),e.j.configure(e.g.streaming),e.m=tS,n.textTracks&&e.o.D(n.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"chapters":gl(e,t)}}),e.dispatchEvent(Zu("streaming")),s=null,(u=e.j.j)||(s=Xl(e,!0)),l=[],c=u||s,d=a([c.video,c.audio]),p=d.next();!p.done;p=d.next())(g=p.value)&&!g.segmentIndex&&l.push(g.createSegmentIndex());if(!(0<l.length)){A.B(2);break}return h(A,Promise.all(l),2);case 2:if(e.G&&e.G.onInitialVariantChosen&&e.G.onInitialVariantChosen(c),dc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),y=function(r){e.C=bl(e,r),e.bc=wl(e,t),_l(e,n,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||y(e.ca),u){A.B(4);break}if(!e.g.streaming.startAtSegmentBoundary){A.B(5);break}return v=e.i.presentationTimeline,m=e.ca||e.h.currentTime,b=v.Ob(),w=v.eb(),m<b?m=b:m>w&&(m=w),h(A,Vl(s,m),6);case 6:_=A.h,y(_);case 5:Ql(e,s,!0,!1,0);case 4:return e.C.je(),T=e.kc().find(function(e){return e.active}),T||((S=fn(e.i.textStreams,e.jb,e.Oc,e.Nc)[0]||null)&&Xu(e.u.h,S,!0),s&&(S?(s.audio&&Zl(e,s.audio,S)&&(e.ba=!0),e.ba&&e.F.F.setTextVisibility(!0),rc(e)):e.ba=!1),S&&(e.g.streaming.alwaysStreamText||e.Ne())&&Es(e.j,S)),h(A,e.j.start(),7);case 7:e.g.abr.enabled&&(e.s.enable(),ic(e)),ec(e),zl(e),E=e.i.variants.some(function(e){return e.primary}),e.g.preferredAudioLanguage||E||W("No preferred audio language set.  We have chosen an arbitrary language initially"),(k=e.R())&&(e.g.streaming.liveSync||e.i.serviceDescription)?(x=function(){return ql(e)},e.o.D(n,"timeupdate",x)):k||(C=function(){return Gl(e)},e.o.D(n,"timeupdate",C),Gl(e)),e.A&&e.A.onManifestUpdated(k),e.kb=!0,e.o.la(n,"loadedmetadata",function(){e.u.m=Date.now()/1e3-t}),f(A)}})}function ul(e,t){var n,r,i,o;return A(function(a){return 1==a.g?(n=z_,r=Date.now()/1e3,i=!0,e.l=vl(e,{Ub:e.H,onError:function(t){ac(e,t)},Vd:function(t){lc(e,t)},onExpirationUpdated:function(t,n){cc(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&i&&(i=!1,e.u.j=Date.now()/1e3-r)}}),e.l.configure(e.g.drm),e.l.jd(e.Oe),o={id:0,language:"und",disabledUntilTime:0,primary:!1,label:null,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Je(t):"",codecs:t?Qe(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.$,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},o.video.fullMimeTypes.add(We(o.video.mimeType,o.video.codecs)),e.l.ba=!0,h(a,vi(e.l,[o],[]),2)):h(a,e.l.Mc(e.h),0)})}function ll(e,t,n){var r,i,o,a,s,u,l,c,d,p;return A(function(g){if(1==g.g)return el(e,"src-equals"),r=e.h,e.C=new Ha(r),i=!1,e.Lc.push(function(){i=!0}),null!=e.ca&&e.C.ke(e.ca),e.J=new $a({Fd:function(){return r.playbackRate},hc:function(){return r.defaultPlaybackRate},uf:function(e){r.playbackRate=e},dg:function(e){r.currentTime+=e}}),o=e.g.streaming.rebufferingGoal,_l(e,r,o),a=function(){return Kl(e)},s=function(){return Wl(e)},e.o.D(r,"playing",a),e.o.D(r,"pause",a),e.o.D(r,"ended",a),e.o.D(r,"ratechange",s),"none"!=r.preload&&e.o.la(r,"loadedmetadata",function(){e.u.m=Date.now()/1e3-t}),r.audioTracks&&(e.o.D(r.audioTracks,"addtrack",function(){return ec(e)}),e.o.D(r.audioTracks,"removetrack",function(){return ec(e)}),e.o.D(r.audioTracks,"change",function(){return ec(e)})),r.textTracks&&(e.o.D(r.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":hl(e,t);break;case"chapters":gl(e,t);break;default:ec(e)}}),e.o.D(r.textTracks,"removetrack",function(){return ec(e)}),e.o.D(r.textTracks,"change",function(){return ec(e)})),r.src=mu(e.V,e.ga,n),(xt()||Mt())&&r.load(),"none"!=r.preload&&!r.autoplay&&$e(n)&&Rt()&&r.load(),e.m=nS,e.dispatchEvent(Zu("streaming")),u=new qn,Da(r,HTMLMediaElement.HAVE_METADATA,e.o,function(){e.C.je(),u.resolve()}),Da(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.o,function(){var t;return A(function(n){return 1==n.g?(cl(e),t=Cl(e),t.find(function(e){return"disabled"!=e.mode})?(0<t.length&&(e.ba=!0),n.B(2)):h(n,new Promise(function(t){e.o.la(r.textTracks,"change",t),new Tt(t).U(1)}),2)):i?n.return():(dl(e),void f(n))})}),r.error?u.reject(uc(e)):"none"==r.preload&&(B('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),u.resolve()),e.o.la(r,"error",function(){u.reject(uc(e))}),h(g,u,2);(l=e.R())&&e.g.streaming.liveSync?(c=function(){return ql(e)},e.o.D(r,"timeupdate",c)):l||(d=function(){return Gl(e)},e.o.D(r,"timeupdate",d),Gl(e)),e.A&&(e.A.onManifestUpdated(l),l&&(p=e.Ab().end,e.o.D(r,"progress",function(){var t=e.Ab().end;p!=t&&(e.A.onManifestUpdated(e.R()),p=t)}))),e.kb=!0,f(g)})}function cl(e){var t=e.g.preferredAudioLanguage;""!=t&&e.lg(t,e.g.preferredVariantRole)}function dl(e){var t=e.g.preferredTextLanguage;""!=t&&e.mf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function hl(e,t){if("metadata"==t.kind){t.mode="hidden",e.o.D(t,"cuechange",function(){if(t.activeCues)for(var n=a(t.activeCues),r=n.next();!r.done;r=n.next())r=r.value,pl(e,r.startTime,r.endTime,r.type,r.value),e.A&&e.A.onCueMetadataChange(r.value)});var n=new Tt(function(){var t=Il(e);t=a(t);for(var n=t.next();!n.done;n=t.next())n.value.mode="hidden"}).sc().U(.5);e.Lc.push(function(){n.stop()})}}function fl(e,t,n,r){t=a(t);for(var i=t.next();!i.done;i=t.next())if(i=i.value,i.data&&i.cueTime&&i.frames){var o=i.cueTime+n,s=r;s&&o>s&&(s=o);for(var u=a(i.frames),l=u.next();!l.done;l=u.next())pl(e,o,s,"org.id3",l.value);e.A&&e.A.onHlsTimedMetadata(i,o)}}function pl(e,t,n,r,i){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",i),e.dispatchEvent(Zu("metadata",t))}function gl(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new Tt(function(){t.mode="hidden"}).sc().U(.5);e.Lc.push(function(){n.stop()})}}function yl(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(q("Found variant with audio and video content, so filtering out audio-only content."),e.variants=e.variants.filter(t))}function vl(e,t){return new pi(t,e.g.drm.updateExpirationTime)}function ml(e){return new ir(function(t,n,r){e.s&&e.s.segmentDownloaded(t,n,r)},function(t,n,r){if(n=(new Map).set("headers",t).set("request",n).set("requestType",r),e.dispatchEvent(Zu("downloadheadersreceived",n)),e.Y&&(n=e.Y,n.h.enabled)){if(r=t["cmsd-static"])try{var i=new Map,o=r.split(",");for(r=0;r<o.length;r++){var a=o[r].split("=");i.set(a[0],Cu(a[1]))}}catch(e){W("Failed to parse CMSD-Static response header value:",e)}if(t=t["cmsd-dynamic"]){try{var s=new Map,u=t.split(";");for(t=1;t<u.length;t++){var l=u[t].split("=");s.set(l[0],Cu(l[1]))}var c=s}catch(e){W("Failed to parse CMSD-Dynamic response header value:",e),c=null}c&&(n.g=c)}}},function(t,n,r,i){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",r).set("aborted",i),e.dispatchEvent(Zu("downloadfailed",t))},function(t,n,r){var i=e.V;if(r=void 0===r?{}:r,i.g.enabled)if("HEAD"===n.method)wu(i,n);else switch(t){case 0:try{if(i.g.enabled){if(r.type){e:{switch(r.type){case 4:var o="d";break e;case 3:case 2:o="h";break e;case 5:o="s";break e}o=void 0}i.m=o}wu(i,n,{ot:HT,su:!i.i})}}catch(e){V("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}break;case dT:t=r;try{if(i.g.enabled){var a=t.segment;o=0,a&&(o=a.endTime-a.startTime);var s={d:1e3*o,st:i.h.R()?"l":"v"};s.ot=_u(t);var u=s.ot===KT||s.ot===WT||s.ot===qT||s.ot===XT,l=t.stream;l&&(u&&(s.bl=Tu(i,l.type)),l.bandwidth&&(s.br=l.bandwidth/1e3)),u&&s.ot!==XT&&(s.tb=Su(i,s.ot)/1e3),wu(i,n,s)}}catch(e){V("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}break;case 2:case 5:case 6:wu(i,n,{ot:"k"});break;case 4:wu(i,n,{ot:"o"})}},function(t,n,r,i){e.G&&e.G.banLocation&&e.G.banLocation(i)})}function bl(e,t){return new Wa(e.h,e.i,e.g.streaming,t,function(){e.bc&&es(e.bc,!0),e.j&&e.j.fd(),e.L&&Tl(e)},function(t){return e.dispatchEvent(t)})}function wl(e,t){t=new as(e.Aa,e.R()||0<t),t.addEventListener("enter",function(t){sc(e,"timelineregionenter",t.region)}),t.addEventListener("exit",function(t){sc(e,"timelineregionexit",t.region)}),t.addEventListener("skip",function(t){var n=t.region;t.seeking||(sc(e,"timelineregionenter",n),sc(e,"timelineregionexit",n))});var n=new Za(e.h);return n.g.add(t),e.na&&n.g.add(e.na),n}function _l(e,t,n){e.L=new Bn,e.L.g=uT,Vn(e.L,n,Math.min(.5,n/2)),Hl(e),e.o.D(t,"waiting",function(){return Tl(e)}),e.o.D(t,"stalled",function(){return Tl(e)}),e.o.D(t,"canplaythrough",function(){return Tl(e)}),e.o.D(t,"progress",function(){return Tl(e)})}function Tl(e){switch(e.m){case nS:if(e.h.ended)var t=!0;else{var n=ao(e.h.buffered);t=null!=n&&n>=e.h.duration-1}break;case tS:e:if(e.h.ended||ta(e.F))t=!0;else{if(e.i.presentationTimeline.R()){n=e.i.presentationTimeline.xb();var r=ao(e.h.buffered);if(null!=r&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=uo(e.h.buffered,e.h.currentTime),n=e.L;var i=t,o=n.h.get(n.g);t=n.g,r=i||r>=o?lT:uT,n.g=r,t!=r&&Hl(e)}function Sl(e,t,n,r){return new Yo(e,t,n,r)}function El(e){return new vu({getBandwidthEstimate:function(){return e.s?e.s.getBandwidthEstimate():NaN},nb:function(){return e.nb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},Dd:function(){return e.Dd()},Nb:function(){return e.Nb()},yb:function(){return e.yb()},R:function(){return e.R()}},e.g.cmcd)}function kl(e){return new ms(e.i,{Ed:function(){return e.C?e.C.sd():0},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},T:e.F,Ub:e.H,onError:function(t){return ac(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Jh:function(){e.G&&e.G.update&&e.G.update()},bf:function(t,n){var r=t.startTime,i=t.endTime,o=n.type;if(e.C){e.C.eg();var a=na(e.F,o);!e.R()&&e.h.paused&&null!=a&&0<a&&e.C.sd()<a&&e.C.ke(a)}Tl(e),r=(new Map).set("start",r).set("end",i).set("contentType",o),e.dispatchEvent(Zu("segmentappended",r)),e.s&&n.fastSwitching&&t.cd&&t.Nd&&e.s.trySuggestStreams()},Ih:function(t,n){(n=n.We)&&e.na&&rs(e.na,n,t)},Gf:function(t,n){var r=e.l;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){n=new qr(le(n));var i=0,o=a(n.data);for(t=o.next();!t.done;t=o.next())i+=t.value.length;if(0==i)r=Promise.resolve();else{for(i=new Uint8Array(i),o=0,n=a(n.data),t=n.next();!t.done;t=n.next())t=t.value,i.set(t,o),o+=t.length;ki(r,"cenc",i),r=r.j}}else r=Promise.resolve();return r},Kh:function(t,n,r){fl(e,t,n,r)},yd:function(t,n){return e.yd(t,n)}})}function Al(e){if(e.G){var t=bt(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(t.disableVideo=!0),e.G.configure(t)}if(e.l&&e.l.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{Fl(e,e.i)}catch(t){ac(e,t)}e.s&&zl(e),!(t=e.j.j)||t.allowedByApplication&&t.allowedByKeySystem||(q("Choosing new variant after changing configuration"),Jl(e))}if(e.H&&e.H.rf(e.g.streaming.forceHTTPS),e.F&&(e.F.configure(e.g.mediaSource),e.F.ba=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.Xe!=t)){var n=t(),r=e.F,i=r.F;r.F=n,i&&(n.setTextVisibility(i.isTextVisible()),i.destroy()),r.h&&(r.h.j=n),e.Xe=t,e.j&&(t=e.j,(n=t.i.get(G_))&&ks(t,n.stream,!0,0,!0))}e.s&&(e.s.configure(e.g.abr),e.g.abr.enabled?e.s.enable():e.s.disable(),ic(e)),e.L&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Vn(e.L,t,Math.min(.5,t/2))),e.i&&dc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.V&&e.V.configure(e.g.cmcd),e.Y&&e.Y.configure(e.g.cmsd)}function xl(e){return e?(e=/(\d+)x(\d+)/.exec(e),e?{Jb:parseInt(e[1],10),rows:parseInt(e[2],10)}:(W("Tiles layout does not contain a valid format  (columns x rows)"),null)):null}function Cl(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function Il(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"==e.kind})}function Ml(e){return Array.from(e.h.textTracks).filter(function(e){return"chapters"==e.kind})}function Ol(e,t){var n;return A(function(r){switch(r.g){case 1:return p(r,2),h(r,Qs(t,e.H,e.g.streaming.retryParameters),4);case 4:n=r.h,y(r,3);break;case 2:v(r);case 3:if(n)return r.return(n);throw H("The mimeType has not been provided and it could not be deduced from its uri."),new Ne(1,2,2011,t)}})}function Pl(e,t,n,r,i,o,a){var s,u,l,c;return A(function(d){if(1==d.g)return"text/vtt"!=i||a.length?h(d,jl(e,t,e.H,e.g.streaming.retryParameters),3):d.B(2);2!=d.g&&(s=d.h,u=Dl(e,s,i,a),l=new Blob([u],{type:"text/vtt"}),t=RT(l),i="text/vtt"),c=document.createElement("track");var f=e.V,p=t;try{if(f.g.enabled){var g=bu(f);g.ot=zT,g.su=!0;var y=Eu(g),v=Au(p,y)}else v=p}catch(e){V("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),v=p}return c.src=v,c.label=o,c.kind=r,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),d.return(c)})}function jl(e,t,n,r){var i,o,a;return A(function(s){if(1==s.g){i=dT,o=ar([t],r),o.method="GET";var u=e.V;try{u.g.enabled&&wu(u,o,{ot:zT,su:!0})}catch(e){V("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return h(s,n.request(i,o).promise,2)}return a=s.h,s.return(a.data)})}function Dl(e,t,n,r){var i=$_[n];if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=le(t),t=n.parseMedia(t,e,null),yu(t,r);throw new Ne(2,2,2014,n)}function Rl(e){var t=Vu();return t.streaming.failureCallback=function(t){if(e.R()){var n=null;1001==t.code||1002==t.code?n=1:1003==t.code&&(n=.1),null!=n&&(t.severity=1,W("Live streaming error.  Retrying automatically..."),e.jf(n))}},t.textDisplayFactory=function(){return e.zd?new su(e.h,e.zd):HTMLMediaElement.prototype.addTextTrack?new tu(e.h,"Shaka Player TextTrack"):(W("Text tracks are not supported by the browser, disabling."),new iu)},t}function Ll(e,t){for(var n=new Set,r=a(t.textStreams),i=r.next();!i.done;i=r.next())i=i.value,"application/cea-608"!=i.mimeType&&"application/cea-708"!=i.mimeType||n.add(i.originalId);for(r=a(t.variants),i=r.next();!i.done;i=r.next())if((i=i.value.video)&&i.closedCaptions)for(var o=a(i.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(s=s.value,!n.has(s)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",l=new Qa,c=i.closedCaptions.get(s);u={id:e.$e++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:l,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:c,originalLanguage:c,label:null,type:G_,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([We(u,"")])},t.textStreams.push(u),n.add(s)}}function Nl(e,t){return A(function(n){if(1==n.g)return h(n,Ul(e,t),2);Fl(e,t),f(n)})}function Ul(e,t){return A(function(n){if(1==n.g)return h(n,Kt(e.l,t),2);if(!t.variants.some(dn))throw new Ne(2,4,4032);f(n)})}function Fl(e,t){if(e.m!=ZT){Wt(t.variants,e.g.restrictions,e.Jd)&&e.j&&ec(e);var n=e.l?e.l.g:null;if(n&&e.l.u)for(var r=a(t.variants),i=r.next();!i.done;i=r.next())i=i.value,Bl(e,n.keySystem,i.video),Bl(e,n.keySystem,i.audio);hc(e,t)}}function Bl(e,t,n){if(n){n=a(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=a(r.initData||[]);for(var i=r.next();!i.done;i=r.next())i=i.value,ki(e.l,i.initDataType,i.initData)}}}function Vl(e,t){var n,r,i,o,a;return A(function(s){return 1==s.g?(n=e.audio,r=e.video,i=function(e,t){var n,r,i;return A(function(o){return 1==o.g?e?h(o,e.createSegmentIndex(),2):o.return(null):(r=(n=e.segmentIndex.Mb(t))?n.next().value:null)?(i=r.startTime,o.return(i)):o.return(null)})},h(s,i(n,t),2)):3!=s.g?(o=s.h,h(s,i(r,t),3)):(a=s.h,null!=a&&null!=o?s.return(Math.max(a,o)):null!=a?s.return(a):null!=o?s.return(o):s.return(t))})}function Hl(e){var t=e.Le();if(z("Player changing buffering state to",t),e.u&&e.L&&e.C){if(e.V){var n=e.V;t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t}Kl(e)}t=(new Map).set("buffering",t),e.dispatchEvent(Zu("buffering",t))}function Wl(e){var t=e.h.playbackRate;0!=t&&(e.J&&e.J.set(t),t=Zu("ratechange"),e.dispatchEvent(t))}function Kl(e){if(e.u&&e.L){var t=e.u.g,n="playing";e.L.g==uT?n="buffering":e.h.paused?n="paused":e.h.ended&&(n="ended");var r=n;if(null==t.g)G("Changing Player state to",r),t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var i=Date.now()/1e3;t.g.duration=i-t.g.timestamp,t.g.state==r?t=!1:(G("Changing Player state to",r),t.h.push(t.g),t.g={timestamp:i,state:r,duration:0},t=!0)}t&&(n=(new Map).set("newstate",n),e.dispatchEvent(Zu("statechanged",n)))}}function ql(e){if(e.R()){var t=e.Ab();if(Number.isFinite(t.end)&&!(e.h.currentTime<t.start)){if(e.g.streaming.liveSync)var n=e.g.streaming.liveSyncMaxLatency,r=e.g.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(n=e.i.serviceDescription.maxLatency||e.g.streaming.liveSyncMaxLatency,r=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSyncPlaybackRate);if(e.g.streaming.liveSync)var i=e.g.streaming.liveSyncMinLatency,o=e.g.streaming.liveSyncMinPlaybackRate;else e.i&&e.i.serviceDescription&&(i=e.i.serviceDescription.minLatency||e.g.streaming.liveSyncMinLatency,o=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSyncMinPlaybackRate);var a=e.h.playbackRate,s=t.end-e.h.currentTime,u=0;if(e.m==nS){var l=e.h.buffered;0<l.length&&(u=l.end(l.length-1),u=Math.max(r,u-t.end))}n&&r&&s-u>n?a!=r&&(q("Latency ("+s+"s) is greater than liveSyncMaxLatency ("+n+"s). Updating playbackRate to "+r),e.zf(r)):i&&o&&s-u<i?a!=o&&(q("Latency ("+s+"s) is smaller than liveSyncMinLatency ("+i+"s). Updating playbackRate to "+o),e.zf(o)):a!==e.J.hc()&&e.wd()}}}function Gl(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.N)?(e.N=n,t=!0):(n=Math.max(e.N,n),e.N!=n&&(e.N=n,t=!0))),t){var r;0==e.N?r=Zu("started"):25==e.N?r=Zu("firstquartile"):50==e.N?r=Zu("midpoint"):75==e.N?r=Zu("thirdquartile"):100==e.N&&(r=Zu("complete")),r&&e.dispatchEvent(r)}}}function zl(e){try{hc(e,e.i)}catch(t){return ac(e,t),!1}var t=hn(e.i.variants);return t=e.Ha.create(t),e.s.setVariants(Array.from(t.values())),!0}function Xl(e,t){return t=void 0!==t&&t,zl(e)?e.s.chooseVariant(t):null}function Yl(e){for(var t=Date.now()/1e3,n=!1,r=a(e.i.variants),i=r.next();!i.done;i=r.next())i=i.value,0<i.disabledUntilTime&&i.disabledUntilTime<=t&&(i.disabledUntilTime=0,n=!0,z("Re-enabled variant with "+function(e){var t="";return e.video&&(t+="video:"+e.video.id),e.audio&&(t=t+(t?"&":"")+"audio:"+e.audio.id),t}(i)));e.i.variants.every(function(e){return 0===e.disabledUntilTime})&&e.Bd.stop(),n&&Jl(e,!0,void 0,!1,!1)}function Jl(e,t,n,r,i){t=void 0===t||t,n=void 0===n?0:n,r=void 0!==r&&r,i=void 0===i||i;var o=Xl(e);o&&Ql(e,o,i,t,n,r)}function Ql(e,t,n,r,i,o){o=void 0!==o&&o;var a=e.j.j;if(t==a)q("Variant already selected."),r&&Ss(e.j,t,r,i,!0);else{var s=e.u.h;s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Ss(e.j,t,r,i,o,n),r=null,a&&(r=rn(a)),t=rn(t),n?(n=(new Map).set("oldTrack",r).set("newTrack",t),e.K&&Xo(e.K,t,e.Ie()),n=Zu("adaptation",n),fc(e,n)):tc(e,r,t)}}function $l(e,t){var n=Array.from(e.h.audioTracks).find(function(e){return e.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=ln(n),t=ln(t),tc(e,n,t)}function Zl(e,t,n){if(0==e.g.autoShowText)return!1;if(1==e.g.autoShowText)return!0;var r=pt(e.g.preferredTextLanguage);return n=pt(n.language),2==e.g.autoShowText?dt(n,r):3==e.g.autoShowText?(e=pt(t.language),dt(n,r)&&!dt(e,n)):(B("Invalid autoShowText setting!"),!1)}function ec(e){fc(e,Zu("trackschanged"))}function tc(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.K&&Xo(e.K,n,e.Ie()),n=Zu("variantchanged",t),fc(e,n)}function nc(e){fc(e,Zu("textchanged"))}function rc(e){fc(e,Zu("texttrackvisibility"))}function ic(e){e.g.abr.enabled||oc(e),fc(e,Zu("abrstatuschanged",(new Map).set("newStatus",e.g.abr.enabled)))}function oc(e,t){if(t=void 0===t||t,e.m==tS){z("Restoring all disabled streams..."),e.Bd.stop();for(var n=a(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&zl(e)}}function ac(e,t){var n,r,i;return A(function(o){switch(o.g){case 1:if(e.m==ZT)return o.return();if(n=!0,!(e.kb&&e.i&&e.j)||3016!=t.code&&3014!=t.code&&3015!=t.code&&3018!=t.code){o.B(2);break}return p(o,3),h(o,Ys(e.j),5);case 5:r=o.h,n=!r,y(o,2);break;case 3:v(o),n=!0;case 2:if(!n)return o.return();2===t.severity&&oc(e,!1),i=Zu("error",(new Map).set("detail",t)),e.dispatchEvent(i),i.defaultPrevented&&(t.handled=!0),f(o)}})}function sc(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent(Zu(t,n))}function uc(e){if(!e.h.error)return null;var t=e.h.error.code;if(1==t)return null;var n=e.h.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new Ne(2,3,3016,t,n,e.h.error.message)}function lc(e,t){if(q("KeyStatuses: "+JSON.stringify(t,null,2)),e.j){var n=Zu("keystatuschanged");e.dispatchEvent(n);var r=Object.keys(t);0==r.length&&W("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),(n=1==r.length&&"00"==r[0])&&W("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var i=!1;if(r.length){r=a(e.i.variants);for(var o=r.next();!o.done;o=r.next()){o=o.value;var s=[];o.audio&&s.push(o.audio),o.video&&s.push(o.video),s=a(s);for(var u=s.next();!u.done;u=s.next()){var l=u.value;if(u=o.allowedByKeySystem,l.keyIds.size){o.allowedByKeySystem=!0,l=a(l.keyIds);for(var c=l.next();!c.done;c=l.next())c=c.value,((c=t[n?"00":c])||e.l.F)&&(o.allowedByKeySystem=o.allowedByKeySystem&&!!c&&!iS.includes(c))}u!=o.allowedByKeySystem&&(i=!0)}}}if(i&&(ec(e),!zl(e)))return;(t=e.j.j)&&!t.allowedByKeySystem&&(q("Choosing new streams after key status changed"),Jl(e))}}function cc(e,t,n){e.G&&e.G.onExpirationUpdated&&e.G.onExpirationUpdated(t,n),t=Zu("expirationupdated"),e.dispatchEvent(t)}function dc(e,t,n){0<t&&(e.R()?W("|playRangeStart| has been configured for live content. Ignoring the setting."):e.tg(t)),t=e.getDuration(),n<t&&(e.R()?W("|playRangeEnd| has been configured for live content. Ignoring the setting."):e.Oa(n))}function hc(e,t){e=e.l?e.l.Vc():{};var n=Object.keys(e);n=n.length&&"00"==n[0];var r=!1,i=!1,o=new Set,s=new Set;t=a(t.variants);for(var u=t.next();!u.done;u=t.next()){u=u.value;var l=[];u.audio&&l.push(u.audio),u.video&&l.push(u.video),l=a(l);for(var c=l.next();!c.done;c=l.next())if(c=c.value,c.keyIds.size){c=a(c.keyIds);for(var d=c.next();!d.done;d=c.next()){d=d.value;var h=e[n?"00":d];h?iS.includes(h)&&s.add(h):o.add(d)}}u.allowedByApplication?u.allowedByKeySystem&&(r=!0):i=!0}if(!r)throw e={hasAppRestrictions:i,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)},new Ne(2,4,4012,e)}function fc(e,t){A(function(n){if(1==n.g)return h(n,Promise.resolve(),2);e.m!=ZT&&e.dispatchEvent(t),f(n)})}function pc(e){var t=new Set;e=a(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(pt(n.language)):t.add("und");return t}function gc(e){var t=new Map,n=new Map,r=new Map;e=a(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var o="und",s=[];i.language&&(o=pt(i.language)),s="variant"==i.type?i.audioRoles:i.roles,s&&s.length||(s=[""]),t.has(o)||t.set(o,new Set),s=a(s);for(var u=s.next();!u.done;u=s.next())u=u.value,t.get(o).add(u),r.get(u)||r.set(u,i.accessibilityPurpose),i.label&&(n.has(o)||n.set(o,new Map),n.get(o).set(u,i.label))}var l=[];return t.forEach(function(e,t){e=a(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var o=null;n.has(t)&&n.get(t).has(i)&&(o=n.get(t).get(i)),l.push({language:t,role:i,label:o,accessibilityPurpose:r.get(i)})}}),l}function yc(){this.h=[],this.j=this.i=this.g=0}function vc(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Q,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}function mc(e,t,n,r,i){var o=this;this.o=e,this.i=t,this.C=!1,this.u=this.s=null,this.F=NaN,this.m=i,this.j=null,this.h=new Q,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),e=new google.ima.AdDisplayContainer(this.o,this.i),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("4.7.14-nmp-7"),this.g=null,this.A=r||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){wc(o,e)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){bc(o,e)}),this.h.D(this.i,"ended",function(){o.l.contentComplete()}),this.h.la(this.i,"play",function(){o.C=!0})}function bc(e,t){W("There was an ad error from the IMA SDK: "+t.getError()),W("Resuming playback."),t=(new Map).set("originalEvent",t),e.m(new Zn("ad-error",t)),Ec(e,null),e.m(new Zn("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function wc(t,n){if(t.m(new Zn("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.F))),t.s.customPlayheadTracker){var r={currentTime:t.i.currentTime};t.g=n.getAdsManager(r,t.A),t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume),t.h.D(t.i,"timeupdate",function(){t.i.duration&&(r.currentTime=t.i.currentTime)}),t.h.D(t.i,"volumechange",function(){t.j&&(t.j.setVolume(t.i.volume),t.i.muted&&t.j.setMuted(!0))})}else t.g=n.getAdsManager(t.i,t.A);t.m(new Zn("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){n=[],i=a(i);for(var o=i.next();!o.done;o=i.next())n.push({start:o.value,end:null});t.m(new Zn("ad-cue-points-changed",(new Map).set("cuepoints",n)))}Tc(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,_c(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.D(t.i,"loadeddata",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,_c(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in e?(t.u=new ResizeObserver(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,_c(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.u.observe(t.i)):t.h.D(document,"fullscreenchange",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,_c(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.C?t.g.start():t.h.la(t.i,"play",function(){t.C=!0,t.g.start()})}catch(e){Ec(t,null)}}function _c(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,!!e.webkitSupportsFullscreen&&e.webkitDisplayingFullscreen)}function Tc(e){function t(t,n){t=(new Map).set("originalEvent",t),e.m(new Zn(n,t))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(t){bc(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){Sc(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(t){Sc(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){t(e,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(e){t(e,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){t(e,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(e){t(e,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(t){Ec(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(t){Ec(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(e){t(e,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){t(e,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){t(e,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(e){t(e,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(e){t(e,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(e){t(e,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(e){t(e,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){t(e,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(e){t(e,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(e){t(e,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t(e,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){t(e,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(e){t(e,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(e){t(e,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){t(e,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(e){t(e,"ad-interaction")})}function Sc(e,t){var n=t.getAd();n?(e.j=new vc(n,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new Zn("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):B("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Ec(e,t){e.m(new Zn("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function kc(e,t,n,r,i){this.h=e,this.g=i,this.i=t,this.j=n,this.l=r}function Ac(e,t,n,r){this.A=e,this.J=t,this.g=n,this.l=null,this.W=NaN,this.i=r,this.H=!1,this.u=null,this.j=[],this.L=[],this.K=this.C=this.h=null,this.F=new Map,this.m=[],this.s=[],this.N="",this.V=!0,this.G="",this.o=new Q}function xc(e,t,n){var r,i,o,a,s,u,l,c,d,g,m;A(function(b){if(1==b.g)return r=ar([t],Kn()),r.method="POST",n&&(i=JSON.stringify(n),r.body=Er(i)),o=e.J.request(7,r),p(b,2),h(b,o.promise,4);if(2!=b.g){if(a=b.h,s=_r(a.data),u=JSON.parse(s),!u.manifestUrl||!u.trackingUrl)throw Error("Insufficient data from MediaTailor.");return l=new Ae(t),c=new Ae(u.trackingUrl),e.N=l.resolve(c).toString(),d=Date.now()/1e3,g=d-e.W,e.i(new Zn("ads-loaded",(new Map).set("loadTime",g))),m=new Ae(u.manifestUrl),e.l.resolve(l.resolve(m).toString()),e.l=null,y(b,0)}if(v(b),!e.G.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,b.return();W("MediaTailor request returned an error. Falling back to the backup asset uri."),e.l.resolve(e.G),e.l=null,f(b)})}function Cc(e,t,n){var r,i,o,s,u,l,c,d,g,m,b,w,_,T,S;A(function(E){if(1==E.g)return r=ar([t],Kn()),i=e.J.request(7,r),p(E,2),h(E,i.promise,4);if(2!=E.g){if(o=E.h,s=[],u=_r(o.data),l=JSON.parse(u),0<l.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(l.avails)){for(e.j=l.avails,c=a(e.j),d=c.next();!d.done;d=c.next())for(g=d.value,m=a(g.nonLinearAdsList),b=m.next();!b.done;b=m.next())for(w=b.value,_=a(w.nonLinearAdList),T=_.next();!T.done;T=_.next())S=T.value,Ic(e,S);s=e.getCuePoints(),e.i(new Zn("ad-cue-points-changed",(new Map).set("cuepoints",s)))}}else e.j.length&&e.i(new Zn("ad-cue-points-changed",(new Map).set("cuepoints",s))),Dc(e),e.j=[];return n&&(e.H||0<s.length)&&Oc(e),y(E,0)}v(E),f(E)})}function Ic(e,t){var n,r,i,o,a,s,u,l;A(function(c){return 1==c.g?t.staticResource?(n=Mc(t),(r=e.F.get(n))?c.return():(i=ar([t.staticResource],Kn()),o=e.J.request(7,i),p(c,2),e.F.set(n,[]),h(c,o.promise,4))):c.return():2!=c.g?(a=c.h,s=_r(a.data),u=JSON.parse(s),l=u.apps,e.F.set(n,l),y(c,0)):(v(c),e.F.delete(n),void f(c))})}function Mc(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function Oc(e){jc(e),e.H||(Pc(e),e.o.D(e.g,"seeked",function(){Pc(e)}),e.o.D(e.g,"ended",function(){Dc(e)})),e.o.D(e.g,"timeupdate",function(){jc(e)})}function Pc(e){var t=e.g.currentTime;if(0!=t&&null==e.u){for(var n,r,i=a(e.j),o=i.next();!o.done;o=i.next()){o=o.value;for(var s=a(o.ads),u=s.next();!u.done;u=s.next())if(u=u.value,r){if(u.startTimeInSeconds<t&&u.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=u,n=o;break}}else u.startTimeInSeconds<t&&(r=u,n=o)}n&&r&&!e.L.includes(r.adId)&&(K("Seeking back to the start of the ad break at "+n.startTimeInSeconds+" and will return to "+t),e.u=t,e.g.currentTime=n.startTimeInSeconds)}}function jc(e){if(e.g.duration&&(e.h||e.j.length)){var t=e.g.currentTime,n=!1;if(e.h){n=!0;var r=e.C,i=r.startTimeInSeconds+.5*r.durationInSeconds,o=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),Lc(e,"firstQuartile")):t>=i&&!e.s.includes("midpoint")?(e.s.push("midpoint"),Lc(e,"midpoint")):t>=o&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),Lc(e,"thirdQuartile")),r=e.h.getRemainingTime(),i=e.h.getDuration(),0<i&&(0>=r||r>i)&&Dc(e)}if(!e.h||!e.h.isLinear()){e:for(r=a(e.j),i=r.next();!i.done&&(i=i.value,!e.h||!e.h.isLinear());i=r.next())for(o=0;o<i.ads.length;o++){var s=i.ads[o],u=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&u>t){if(e.L.includes(s.adId)){if(e.g.ended)continue;e.g.currentTime=u;break e}Dc(e),e.K=i,e.h=new kc(s,o+1,i.ads.length,!0,e.g),e.C=s,0===o&&Lc(e,"breakStart"),Rc(e);break}}if(!e.h)for(r=a(e.j),i=r.next();!i.done&&(i=i.value,!e.h);i=r.next())for(o=0;o<i.nonLinearAdsList.length;o++)if(s=i.nonLinearAdsList[o],s.nonLinearAdList.length){u=i.startTimeInSeconds;var l=e.F.get(Mc(s.nonLinearAdList[0]));if(u<=t&&l&&l.length){Dc(e),u=e,l=a(l);for(var c=l.next();!c.done;c=l.next())if(c=c.value,c.data.source.length){var d=document.createElement("img");d.src=c.data.source[0].url,d.style.top=(c.placeholder.top||0)+"%",d.style.height=100-(c.placeholder.top||0)+"%",d.style.left=(c.placeholder.left||0)+"%",d.style.maxWidth=100-(c.placeholder.left||0)+"%",d.style.objectFit="contain",d.style.position="absolute",u.A.appendChild(d)}e.K=i,e.h=new kc(s,o+1,i.ads.length,!1,e.g),e.C=s,0===o&&Lc(e,"breakStart"),Rc(e);break}}n&&!e.h&&(t=e.g.currentTime,e.u&&e.u>t&&(e.g.currentTime=e.u),e.u=null)}}}function Dc(e){if(e.h){for(;e.A.lastChild;)e.A.removeChild(e.A.firstChild);e.H||e.L.push(e.C.adId),Lc(e,"complete");for(var t=a(e.m),n=t.next();!n.done;n=t.next())n=n.value,e.o.Cb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.h.getPositionInSequence(),n=e.h.getSequenceLength(),t===n&&Lc(e,"breakEnd"),e.h=null,e.C=null,e.K=null}}function Rc(e){var t=!1;e.g.paused?t=!0:(Lc(e,"impression"),Lc(e,"start")),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted&&Lc(e,"mute")}}),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted||Lc(e,"unmute")}}),e.m.push({target:e.g,type:"play",listener:function(){t?(Lc(e,"impression"),Lc(e,"start"),t=!1):Lc(e,"resume")}}),e.m.push({target:e.g,type:"pause",listener:function(){Lc(e,"pause")}});for(var n=a(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function Lc(e,t){var n=e.C.trackingEvents.find(function(e){return e.eventType==t});if(n||(n=e.K.adBreakTrackingEvents.find(function(e){return e.eventType==t})),n){n=a(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&""!=r&&(r=ar([r],Kn()),r.method="POST",e.J.request(7,r))}switch(t){case"impression":e.i(new Zn("ad-impression"));break;case"start":e.i(new Zn("ad-started",(new Map).set("ad",e.h)));break;case"mute":e.i(new Zn("ad-muted"));break;case"unmute":e.i(new Zn("ad-volume-changed"));break;case"resume":e.i(new Zn("ad-resumed"));break;case"pause":e.i(new Zn("ad-paused"));break;case"firstQuartile":e.i(new Zn("ad-first-quartile"));break;case"midpoint":e.i(new Zn("ad-midpoint"));break;case"thirdQuartile":e.i(new Zn("ad-third-quartile"));break;case"complete":e.i(new Zn("ad-complete")),e.i(new Zn("ad-stopped"));break;case"breakStart":e.A.setAttribute("ad-active","true");break;case"breakEnd":e.A.removeAttribute("ad-active")}}function Nc(e,t){this.g=e,this.i=null,this.h=t}function Uc(e,t,n,r){var i=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.u=this.m=this.o=null,this.A="",this.C=[],this.h=new Q,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Zn("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){K("Ad SS Loaded"),Fc(i,e)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){K("Ad SS Error"),i.A.length?(W("IMA stream request returned an error. Falling back to the backup asset uri."),i.j.resolve(i.A)):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){K("Ad Break Started")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){K("Ad Started"),e=e.getAd(),i.m=new Nc(e,i.l),i.u&&(i.m.i=i.u),i.i(new Zn("ad-started",(new Map).set("ad",i.m))),i.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){K("Ad Break Ended"),i.s.removeAttribute("ad-active");var e=i.l.currentTime;i.o&&i.o>e&&(i.l.currentTime=i.o,i.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){i.u=e.getStreamData().adProgressData,i.m&&(i.m.i=i.u)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){K("Ad event: First Quartile"),i.i(new Zn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){K("Ad event: Midpoint"),i.i(new Zn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){K("Ad event: Third Quartile"),i.i(new Zn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){K("Ad event: Complete"),i.i(new Zn("ad-complete")),i.i(new Zn("ad-stopped")),i.s.removeAttribute("ad-active"),i.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){K("Ad event: Skipped"),i.i(new Zn("ad-skipped")),i.i(new Zn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){K("Ad event: Cue points changed");var t=e.getStreamData();e=[],t=a(t.cuepoints);for(var n=t.next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});i.C=e,i.i(new Zn("ad-cue-points-changed",(new Map).set("cuepoints",e)))})}function Fc(e,t){e.i(new Zn("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(K("Seeking back to the start of the ad break at "+n.start+" and will return to "+t),e.o=t,e.l.currentTime=n.start)}})}function Bc(){tr.call(this),this.g=this.i=this.h=null,this.j=new yc,this.m=navigator.language,this.l=null}function Vc(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}function Hc(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Zn){var n={};for(r in t)(e=t[r])&&"object"==typeof e?"detail"==r&&(n[r]=e):r in Event||(n[r]=e);return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(e=a(Object.getOwnPropertyNames(t)),n=e.next();!n.done;n=e.next())r.add(n.value);for(e={},r=a(r),n=r.next();!n.done;n=r.next())n=n.value,e[n]=t[n];t={__type__:"Error",contents:e}}else if(t instanceof TimeRanges){for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},t=a(co(t)),n=t.next();!n.done;n=t.next())n=n.value,e=n.end,r.start.push(n.start),r.end.push(e);t=r}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}})}function Wc(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=Kc(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){e=t.contents,t=Error(e.message);for(n in e)t[n]=e[n];n=t}else n=t;return n})}function Kc(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}function qc(e,t,n,r,i,o,a){var s=this;this.G=e,this.K=a,this.j=new Tt(t),this.L=n,this.u=!1,this.s=r,this.F=i,this.N=o,this.h=this.m=!1,this.J="",this.o=null,this.A=function(){return Qc(s)},this.C=function(e,t){switch(e=Wc(t),z("CastSender: message",e),e.type){case"event":var n=e.targetName,r=er(e.event);s.s(n,r);break;case"update":n=e.update;for(r in n){e=s.g[r]||{};for(var i in n[r])e[i]=n[r][i]}s.u&&(s.L(),s.u=!1);break;case"asyncComplete":if(r=e.id,i=e.error,e=s.i[r],delete s.i[r],e)if(i){r=new Ne(i.severity,i.category,i.code);for(n in i)r[n]=i[n];e.reject(r)}else e.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.l=null,TS.add(this)}function Gc(e){e.h&&chrome.cast.requestSession(function(t){return zc(e,t)},function(t){return Xc(e,t)})}function zc(e,t){q("CastSender: onSessionInitiated");var n=e.N();wS=t,t.addUpdateListener(e.A),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),Qc(e),Zc(e,{type:"init",initState:n,appData:e.o}),e.l.resolve()}function Xc(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new Ne(2,8,n,t))}function Yc(e,t){q("CastSender: onExistingSessionJoined"),e.l=new qn,e.u=!0,zc(e,t)}function Jc(e){var t=wS;t.removeUpdateListener(e.A),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function Qc(e){var t=!!wS&&"connected"==wS.status;if(q("CastSender: connection status",t),e.h&&!t){e.F();for(var n in e.g)e.g[n]={};$c(e)}e.h=t,e.J=t?wS.receiver.friendlyName:"",e.j.sc()}function $c(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new Ne(1,7,7e3))}}function Zc(e,t){t=Hc(t);var n=wS;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},H)}catch(r){throw H("Cast session sendMessage threw",r),t=new Ne(2,8,8005,r),n=new Zn("error",(new Map).set("detail",t)),e.s("player",n),e.ec(),t}}function ed(t){if(_S?e.__onGCastApiAvailable=_S:delete e.__onGCastApiAvailable,_S=null,t)for(var n=a(TS),r=n.next();!r.done;r=n.next())r.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function td(e,t,n,r){r=void 0!==r&&r,tr.call(this);var i=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.A=r,this.u=new Map,this.g=new qc(n,function(){return ad(i)},function(){return sd(i)},function(e,t){return dd(i,e,t)},function(){return ud(i)},function(){return od(i)},r),nd(this)}function nd(e){e.g.init(),e.m=new Q;for(var t=a(sS),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(t){e.g.sa()||(t=er(t),e.j.dispatchEvent(t))});for(var r in cT)e.m.D(e.h,cT[r],function(t){e.g.sa()||e.o.dispatchEvent(t)});e.l={},t={};for(var i in e.i)t.zc=i,Object.defineProperty(e.l,t.zc,{configurable:!1,enumerable:!0,get:function(t){return function(){return ld(e,t.zc)}}(t),set:function(t){return function(n){var r=t.zc;e.g.sa()?e.g.set("video",r,n):e.i[r]=n}}(t)}),t={zc:t.zc};e.s={},id(e,function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return cd(e,t)}})}),rd(e),e.j=new tr,e.j.Cd=e.l,e.o=new tr,e.o.Cd=e.s}function rd(e){var t=new Map;id(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.u.set(n,r):e.u.set(r,n)):t.set(r,n)})}function id(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!o.has(e)}var r,i=e.h,o=new Set;for(r in i)n(r)&&(o.add(r),t(r,i[r]));for(e=Object.getPrototypeOf(i),r=Object.getPrototypeOf({});e&&e!=r;){for(var s=a(Object.getOwnPropertyNames(e)),u=s.next();!u.done;u=s.next())u=u.value,n(u)&&(o.add(u),t(u,i[u]));e=Object.getPrototypeOf(e)}}function od(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.He(),startTime:null};e.i.pause();for(var n=a(lS),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=a(pS),r=n.next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.h[i[0]](),t.player[r]=i}for(n=a(gS),r=n.next();!r.done;r=n.next())i=r.value,r=i[1],i=e.h[i[0]](),t.playerAfterLoad[r]=i;return t}function ad(e){var t=new Zn("caststatuschanged");e.dispatchEvent(t)}function sd(e){var t=new Zn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function ud(e){for(var t=a(pS),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var i=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var o=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var s;(r=e.g.get("player","getTextTracks")())&&r.length&&(s=r.find(function(e){return e.active}));var u=e.g.get("player","isTextTrackVisible")();i&&(e.i.autoplay=!1,t=e.h.load(i,n));var l={};for(n=a(lS),r=n.next();!r.done;r=n.next())r=r.value,l[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var t=a(lS),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=l[n];for(t=a(gS),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}e.h.rg(u),s&&e.h.mf(s.language,s.roles,s.forced),e.i.autoplay=o,i&&e.i.play()}},function(t){t=(new Map).set("detail",t),t=new Zn("error",t),e.h.dispatchEvent(t)})}function ld(e,t){if("addEventListener"==t)return function(t,n,r){return e.j.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.j.removeEventListener(t,n,r)};if(e.g.sa()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.sa()?e.g.get("video",t):(t=e.i[t],"function"==typeof t&&(t=t.bind(e.i)),t)}function cd(e,t){if(e.u.has(t)&&(t=e.u.get(t)),"addEventListener"==t)return function(t,n,r){return e.o.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.o.removeEventListener(t,n,r)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return W("Can't share configuration across a network. Returning copy."),e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return e.g.sa()&&W("NOTE: getNetworkingEngine() is always local!"),function(){return e.h.Nb()};if("getDrmEngine"==t)return e.g.sa()&&W("NOTE: getDrmEngine() is always local!"),function(){return e.h.l};if("getAdManager"==t)return e.g.sa()&&W("NOTE: getAdManager() is always local!"),function(){return e.h.Qf()};if("setVideoContainer"==t)return e.g.sa()&&W("NOTE: setVideoContainer() is always local!"),function(t){return e.h.ug(t)};if(e.g.sa()){if("getManifest"==t||"drmInfo"==t)return function(){return B(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return B(t+"() does not work while casting!"),Promise.resolve()}}return e.g.sa()&&0==Object.keys(e.g.g.video).length&&(dS[t]||hS[t])||!e.g.sa()?e.h[t].bind(e.h):e.g.get("player",t)}function dd(e,t,n){e.g.sa()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function hd(e,t,n,r){tr.call(this);var i=this;this.g=e,this.h=t,this.j=new Q,this.H={video:e,player:t},this.C=n||function(){},this.J=r||function(e){return e},this.i=null,this.F=!1,this.o=!0,this.m=0,this.A=!1,this.u=!0,this.s=this.l=null,this.G=new Tt(function(){md(i)}),fd(this)}function fd(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return pd(e)},t.onSenderDisconnected=function(){return pd(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Ed(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),Ed(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(t){return Td(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return _d(e,t)},t.start(),t=a(sS);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(t){return vd(e,"video",t)});for(var r in cT)e.j.D(e.h,cT[r],function(t){return vd(e,"player",t)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.tf(3840,2160):e.h.tf(1920,1080),e.j.D(e.g,"loadeddata",function(){e.A=!0}),e.j.D(e.h,"loading",function(){e.o=!1,gd(e)}),e.j.D(e.g,"playing",function(){e.o=!1,gd(e)}),e.j.D(e.g,"pause",function(){gd(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,gd(e)}),e.j.D(e.g,"ended",function(){new Tt(function(){e.g&&e.g.ended&&(e.o=!0,gd(e))}).U(ES)})}function pd(e){e.m=0,e.u=!0,e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,gd(e)}function gd(e){var t;A(function(n){return 1==n.g?h(n,Promise.resolve(),2):e.h?(t=new Zn("caststatuschanged"),e.dispatchEvent(t),bd(e)||kd(e),void f(n)):n.return()})}function yd(e,t,n){var r,i,o,a,s,u,l,c,d,g;A(function(m){switch(m.g){case 1:for(r in t.player)i=t.player[r],e.h[r](i);return e.C(n),o=e.g.autoplay,t.manifest?(e.g.autoplay=!1,p(m,5),h(m,e.h.load(t.manifest,t.startTime),7)):h(m,Promise.resolve(),3);case 7:y(m,3);break;case 5:return a=v(m),s=(new Map).set("detail",a),u=new Zn("error",s),e.h&&e.h.dispatchEvent(u),m.return();case 3:if(!e.h)return m.return();for(l in t.video)c=t.video[l],e.g[l]=c;for(d in t.playerAfterLoad)g=t.playerAfterLoad[d],e.h[d](g);e.g.autoplay=o,t.manifest&&(e.g.play(),kd(e)),f(m)}})}function vd(e,t,n){e.h&&(md(e),Ed(e,{type:"event",targetName:t,event:n},e.l))}function md(e){e.G.U(SS);for(var t={video:{},player:{}},n=a(uS),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.R())for(var i in fS)0==e.m%fS[i]&&(t.player[i]=e.h[i]());for(var o in dS)0==e.m%dS[o]&&(t.player[o]=e.h[o]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Ed(e,{type:"update",update:t},e.l);for(var s in hS)0==e.m%hS[s]&&(t={player:{}},t.player[s]=e.h[s](),Ed(e,{type:"update",update:t},e.l));e.A&&(e.m+=1),bd(e)}function bd(e){return!(!e.u||!e.g.duration&&!e.h.R())&&(wd(e),e.u=!1,!0)}function wd(e,t){var n={contentId:e.h.He(),streamType:e.h.R()?"LIVE":"BUFFERED",contentType:""};e.h.R()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),kd(e,void 0===t?0:t,n)}function _d(e,t){var n=Wc(t.data);switch(q("CastReceiver: message",n),n.type){case"init":e.m=0,e.A=!1,e.u=!0,yd(e,n.initState,n.appData),md(e);break;case"appData":e.C(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,"video"==r){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==i){t.setSystemVolumeLevel(n);break}if("muted"==i){t.setSystemVolumeMuted(n);break}}e.H[r][i]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,i=n.methodName,"player"==r&&"load"==i&&(e.m=0,e.A=!1);var o=n.id,a=t.senderId;t=e.H[r],n=t[i].apply(t,n.args),"player"==r&&"load"==i&&(n=n.then(function(){e.u=!0})),n.then(function(){return Sd(e,a,o,null)},function(t){return Sd(e,a,o,t)})}}function Td(e,t){var n=Wc(t.data);switch(q("CastReceiver: message",n),n.type){case"PLAY":e.g.play(),kd(e);break;case"PAUSE":e.g.pause(),kd(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;null!=t&&(e.g.currentTime=Number(t)),r&&"PLAYBACK_START"==r?(e.g.play(),kd(e)):r&&"PLAYBACK_PAUSE"==r&&(e.g.pause(),kd(e));break;case"STOP":e.h.tc().then(function(){e.h&&kd(e)});break;case"GET_STATUS":wd(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var i=e.g.volume,o=e.g.muted;null!=t&&(e.g.volume=Number(t)),null!=r&&(e.g.muted=r),i==e.g.volume&&o==e.g.muted||kd(e);break;case"LOAD":e.m=0,e.A=!1,e.u=!1,t=n.media,r=n.currentTime,i=e.J(t.contentId),o=n.autoplay||!0,e.C(t.customData),o&&(e.g.autoplay=!0),e.h.load(i,r).then(function(){e.h&&wd(e)}).catch(function(t){var r="LOAD_FAILED";7==t.category&&7e3==t.code&&(r="LOAD_CANCELLED"),Ed(e,{requestId:Number(n.requestId),type:r},e.s)});break;default:W("Unrecognized message type from the generic Chromecast controller!",n.type),Ed(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function Sd(e,t,n,r){e.h&&Ed(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function Ed(e,t,n,r){e.F&&(e=Hc(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function kd(e,t,n){n=void 0===n?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?kS:e.h.Le()?xS:e.g.paused?CS:AS,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),Ed(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}function Ad(e,t,n,r,i){if(r>=i)return null;for(var o=-1,a=-1,s=0;s<n.length;s++)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){o=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){a=s;break}if(-1===o||-1===a)return null;for(var u=s=!1,l="white",c="black",d=xd(r,i,s,u,l,c);o<=a;o++){for(var h=n[o],f=-1,p=-1,g=0;g<h.length;g++)if(null!=h[g]&&""!==h[g].g.trim()){f=g;break}for(g=h.length-1;0<=g;g--)if(null!=h[g]&&""!==h[g].g.trim()){p=g;break}if(-1===f||-1===p)h=Cd(r,i),e.nestedCues.push(h);else{for(;f<=p;f++)if(g=h[f]){var y=g.l,v=g.i,m=g.j,b=g.h;y==s&&v==u&&m==l&&b==c||(d.payload&&e.nestedCues.push(d),d=xd(r,i,y,v,m,b),s=y,u=v,l=m,c=b),d.payload+=g.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),o!==a&&(d=Cd(r,i),e.nestedCues.push(d)),d=xd(r,i,s,u,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function xd(e,t,n,r,i,o){return e=new be(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=i,e.backgroundColor=o,e}function Cd(e,t){return e=new be(e,t,""),e.lineBreak=!0,e}function Id(e,t,n,r,i){this.g=e,this.l=t,this.i=n,this.h=r,this.j=i}function Md(e,t){this.i=[],this.g=1,this.h=0,this.u=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Pd(this)}function Od(e,t,n){var r="CC"+(1+(e.u<<1|e.s)),i=new be(t,n,"");i.lineInterpretation=1;var o=NS.get(e.g);return o&&(i.line=o),Ad(i,r,e.i,t,n)}function Pd(e){Rd(e,0,15),e.g=1}function jd(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case IS:r=jS.has(n)?jS.get(n):String.fromCharCode(n);break;case MS:r=DS.get(n);break;case OS:e.i[e.g].pop(),r=RS.get(n);break;case PS:e.i[e.g].pop(),r=LS.get(n)}r&&e.i[e.g].push(new Id(r,e.m,e.j,e.o,e.l))}}function Dd(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(e){return e});else for(var i=0;i<r;i++)e.i[t+i]=e.i[n+i].map(function(e){return e})}function Rd(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}function Ld(e,t){this.h=US,this.o=new Md(e,t),this.i=new Md(e,t),this.g=this.j=new Md(e,t),this.l=0,this.m=null}function Nd(e,t,n){e.g=e.i;var r=e.g,i=null;return e.h!==BS&&e.h!==VS&&(i=Od(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,Rd(n,0,15),n=e.j,n.g=0<n.h?n.h:0,Rd(n,0,15),r.g=15),e.h=BS,r.h=t,i}function Ud(e){e.h=FS,e.g=e.j,e.g.h=0}function Fd(e){V("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=VS}function Bd(e,t){this.J=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=GS,this.i=[],this.g=this.h=this.j=0,this.C=this.u=!1,this.A="white",this.s="black",Vd(this)}function Vd(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Hd())}function Hd(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Wd(e,t){Kd(e)&&(e.i[e.h][e.g]=new Id(t,e.C,e.u,e.s,e.A),e.g++)}function Kd(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}function qd(e,t,n){var r=new be(e.j,t,"");r.textAlign=e.F===KS?"left":e.F===qS?"right":y_;var i=r.region;switch(e.J&&(i.id+="svc"+e.J),i.id+="win"+e.N,i.height=e.o,i.width=e.m,i.heightUnits=2,i.widthUnits=2,i.viewportAnchorX=e.H,i.viewportAnchorY=e.L,i.viewportAnchorUnits=e.K?M_:2,e.G){case zS:i.regionAnchorX=0,i.regionAnchorY=0;break;case XS:i.regionAnchorX=50,i.regionAnchorY=0;break;case YS:i.regionAnchorX=100,i.regionAnchorY=0;break;case JS:i.regionAnchorX=0,i.regionAnchorY=50;break;case QS:i.regionAnchorX=50,i.regionAnchorY=50;break;case $S:i.regionAnchorX=100,i.regionAnchorY=50;break;case ZS:i.regionAnchorX=0,i.regionAnchorY=100;break;case eE:i.regionAnchorX=50,i.regionAnchorY=100;break;case tE:i.regionAnchorX=100,i.regionAnchorY=100}return(n=Ad(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function Gd(){this.i=[],this.h=null,this.g=0}function zd(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new Xd(e.h)),e.h=null,e.g=0))}function Xd(e){this.g=0,this.h=e}function Yd(e){if(!e.ea())throw new Ne(2,2,3e3);return e.h[e.g++]}function Jd(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Qd(e,t,n,r){if(128<=n&&135>=n)r=7&n,e.h[r]&&(e.g=e.h[r]);else{if(136===n){n=Yd(t).value,t=null,n=a($d(e,n));for(var i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()&&(t=qd(i,r,e.i)),Vd(i);return t}if(137===n)for(t=Yd(t).value,t=a($d(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(138===n){for(n=Yd(t).value,t=null,n=a($d(e,n)),i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()&&(t=qd(i,r,e.i)),i.l=!1;return t}if(139===n){for(n=Yd(t).value,t=null,n=a($d(e,n)),i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()?t=qd(i,r,e.i):i.j=r,i.l=!i.l;return t}if(140===n)return t=Yd(t).value,Zd(e,t,r);if(143===n)return r=Zd(e,255,r),eh(e),r;if(144===n)t.skip(1),r=Yd(t).value,e.g&&(e.g.u=0<(128&r),e.g.C=0<(64&r));else if(145===n)r=Yd(t).value,n=Yd(t).value,t.skip(1),e.g&&(t=th((48&n)>>4,(12&n)>>2,3&n),e.g.A=th((48&r)>>4,(12&r)>>2,3&r),e.g.s=t);else if(146===n)r=Yd(t).value,t=Yd(t).value,e.g&&(e=e.g,e.h=15&r,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),r=Yd(t).value,t.skip(1),e.g&&(e.g.F=3&r);else if(152<=n&&159>=n){if(n=(15&n)-8,!(i=null!==e.h[n])){var o=new Bd(n,e.i);o.j=r,e.h[n]=o}r=Yd(t).value,o=Yd(t).value;var s=Yd(t).value,u=Yd(t).value,l=Yd(t).value;t=Yd(t).value,i&&0==(7&t)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.u=!1,t.A="white",t.s="black"),t=e.h[n],t.l=0<(32&r),t.L=127&o,t.H=s,t.G=(240&u)>>4,t.K=0<(128&o),t.o=1+(15&u),t.m=1+(63&l),e.g=e.h[n]}}}return null}function $d(e,t){for(var n=[],r=0;8>r;r++)1==(1&t)&&e.h[r]&&n.push(r),t>>=1;return n}function Zd(e,t,n){var r=null;t=a($d(e,t));for(var i=t.next();!i.done;i=t.next()){i=i.value;var o=e.h[i];o.isVisible()&&(r=qd(o,n,e.i)),e.h[i]=null}return r}function eh(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function th(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],rE[e<<2|t<<1|n]}function nh(){this.h=[],this.g=[],this.i=new Gd,this.l=0,this.m=new Map([["CC1",new Ld(0,0)],["CC2",new Ld(0,1)],["CC3",new Ld(1,0)],["CC4",new Ld(1,1)]]),this.s=this.o=0,this.j=new Map,this.A=!0,this.u=new Set,rh(this)}function rh(e){e.o=0,e.s=0;for(var t=a(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=US,n.g=n.j,n.m=null,Pd(n.i),Pd(n.j),Pd(n.o);e.A=!0}function ih(e,t){var n=t.type;if(16==(112&t.Sa)){var r=t.Sa>>3&1;0===n?e.o=r:e.s=r}if(r="CC"+(1+(n<<1|(n?e.s:e.o))),n=e.m.get(r),255===t.Sa&&255===t.lb||!t.Sa&&!t.lb||!ah(t.Sa)||!ah(t.lb))return 45<=++e.l&&rh(e),null;if(e.l=0,t.Sa&=127,t.lb&=127,!t.Sa&&!t.lb)return null;if(e.u.add(r),e=null,16==(112&t.Sa))e:{if(r=t.Sa,e=t.lb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,16==(240&r)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&r)<<1|e>>5&1];var i=(30&e)>>1;r="white";var o=!1;7>i?r=WS[i]:7===i&&(o=!0),e=1==(1&e),n.h!==VS&&(i=n.g,n.h===BS&&t!==i.g&&(n=1+t-i.h,Dd(i,n,1+i.g-i.h,i.h),Rd(i,0,n-1),Rd(i,t+1,15-t)),i.g=t,i.m=e,i.j=o,i.l=r,i.o="black")}else if(17==(247&r)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",jd(n.g,IS,32),r=!1,t=WS[(14&e)>>1],"white_italics"===t&&(t="white",r=!0),n.g.m=1==(1&e),n.g.j=r,n.g.l=t;else if(16==(247&r)&&32==(240&e)||23==(247&r)&&45==(255&e))t="black",0==(7&r)&&(t=HS[(14&e)>>1]),n.g.o=t;else if(17==(247&r)&&48==(240&e))jd(n.g,MS,e);else if(18==(246&r)&&32==(224&e))jd(n.g,1&r?PS:OS,e);else if(20==(246&r)&&32==(240&e)){switch(e=t.pts,r=null,t.lb){case 32:Ud(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=Nd(n,2,e);break;case 38:r=Nd(n,3,e);break;case 39:r=Nd(n,4,e);break;case 40:jd(n.g,IS,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Pd(n.o),Fd(n);break;case 43:Fd(n);break;case 44:t=n.i,r=null,n.h!==VS&&(r=Od(t,n.l,e)),Rd(t,0,15);break;case 45:t=n.g,n.h!==BS?r=null:(r=Od(t,n.l,e),o=t.g-t.h+1,Dd(t,o-1,o,t.h),Rd(t,0,o-1),Rd(t,t.g,15-t.g),n.l=e);break;case 46:Rd(n.j,0,15);break;case 47:t=null,n.h!==VS&&(t=Od(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,Ud(n),n.l=e,r=t}e=r;break e}e=null}else r=t.lb,jd(n.g,IS,t.Sa),jd(n.g,IS,r);return e}function oh(e,t){var n=[];try{for(;t.ea();){var r=Yd(t).value,i=(224&r)>>5,o=31&r;if(7===i&&0!=o&&(i=63&Yd(t).value),0!=i){e.u.add("svc"+i),e.j.has(i)||e.j.set(i,new Jd(i));for(var a=e.j.get(i),s=t.pa();t.pa()-s<o;){i=t;var u=Yd(i),l=u.value,c=u.pts;if(16===l){l=l<<16|Yd(i).value}if(0<=l&&31>=l){var d=c;if(a.g){var h=a.g;switch(i=null,l){case 8:!Kd(h)||0>=h.g&&0>=h.h||(0>=h.g?(h.g=h.m-1,h.h--):h.g--,h.i[h.h][h.g]=null);break;case 13:if(h.isVisible()&&(i=qd(h,d,a.i)),h.h+1>=h.o){d=h;for(var f=0,p=1;16>p;p++,f++)d.i[f]=d.i[p];for(p=0;1>p;p++,f++)d.i[f]=Hd()}else h.h++;h.g=0;break;case 14:h.isVisible()&&(i=qd(h,d,a.i)),h.i[h.h]=Hd(),h.g=0;break;case 12:h.isVisible()&&(i=qd(h,d,a.i)),Vd(h),d=h,d.h=0,d.g=0}var g=i}else g=null}else if(128<=l&&159>=l)g=Qd(a,i,l,c);else{if(4096<=l&&4127>=l)d=255&l,8<=d&&15>=d?i.skip(1):16<=d&&23>=d?i.skip(2):24<=d&&31>=d&&i.skip(3);else if(4224<=l&&4255>=l)d=255&l,128<=d&&135>=d?i.skip(4):136<=d&&143>=d&&i.skip(5);else if(32<=l&&127>=l)i=l,a.g&&(127===i?Wd(a.g,"♪"):Wd(a.g,String.fromCharCode(i)));else if(160<=l&&255>=l)a.g&&Wd(a.g,String.fromCharCode(l));else if(4128<=l&&4223>=l){if(i=255&l,a.g)if(nE.has(i)){var y=nE.get(i);Wd(a.g,y)}else Wd(a.g,"_")}else 4256<=l&&4351>=l&&a.g&&(160!=(255&l)?Wd(a.g,"_"):Wd(a.g,"[CC]"));g=null}(i=g)&&n.push(i)}}}}catch(e){if(!(e instanceof Ne&&3e3===e.code))throw e;V("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function ah(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function sh(e){for(var t=[],n=e,r=e=0;r<n.length;)2==e&&3==n[r]?(e=0,n=[].concat(s(n)),n.splice(r,1),n=new Uint8Array(n)):0==n[r]?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;255==e[r];)n+=255,r++;n+=e[r++];for(var i=0;255==e[r];)i+=255,r++;i+=e[r++],4==n&&t.push(e.subarray(r,r+i)),r+=i}return t}function uh(){this.j=new Map,this.i=this.h=0,this.g=iE}function lh(e,t,n,r,i,o,u,l,c){var d=0,h=o,f=l.map(function(e){return e.kg});for(f=[].concat.apply([],s(f)),f.length&&(h=f[0].sampleSize||o),t.skip(u+l[0].Og);t.ea();){u=t.M();var p=t.fa(),g=null;switch(g=!1,l=1,e.g){case oE:g=31&p,g=6==g;break;case aE:l=2,t.skip(1),g=p>>1&63,g=39==g||40==g;break;default:return}if(g)for(p=0,d<f.length&&(p=f[d].Xd||0),p=(n+p)/r,l=a(sh(t.rb(u-l))),g=l.next();!g.done;g=l.next())c.push({packet:g.value,pts:p});else try{t.skip(u-l)}catch(e){break}h-=u+4,0==h&&(n=d<f.length?n+(f[d].kf||i):n+i,d++,h=d<f.length?f[d].sampleSize||o:o)}}function ch(){this.g=null}function dh(e,t,n){var r=vh(e),i=null;e=[];var o=[],s=null,u=new Set(r.map(function(e){return e.keyId}));if(u.delete(null),1<u.size)throw new Ne(2,4,4010);if(!t){if(o=r.filter(function(e){return"urn:mpeg:dash:sea:2012"==e.qc}),1<o.length)throw new Ne(2,4,4050);o.length&&(s=bh(o[0])),o=r.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.qc?(i=e.init||i,!1):"urn:mpeg:dash:sea:2012"!=e.qc}),o.length&&(e=yh(i,o,n,u),0==e.length&&(e=[Fe("",i)]))}if(r.length&&!s&&(t||!o.length))for(e=[],t=a(Object.values(n)),n=t.next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Fe(n,i));if(u=Array.from(u)[0]||null)for(t=a(e),n=t.next();!n.done;n=t.next())for(n=a(n.value.initData),r=n.next();!r.done;r=n.next())r.value.keyId=u;return{Lf:u,jj:i,drmInfos:e,le:s,Pf:!0}}function hh(e,t,n,r){var i=dh(e,n,r);if(t.Pf)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==i.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=i.drmInfos),t.Pf=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(e){return i.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==t.drmInfos.length))throw new Ne(2,4,4008);return i.Lf||t.Lf}function fh(e){var t=0,n=de(e),r=n.getUint32(t,!0);if(t+=4,r!=e.byteLength)return W("PlayReady Object with invalid length encountered."),[];e:{for(e=t+2,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,0!=(1&i)||i+e>n.byteLength){W("Malformed MS PRO object"),n=[];break e}var o=le(n,e,i);t.push({type:r,value:o}),e+=i}n=t}return n}function ph(e){e=a(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next()){t=a(t.value.childNodes);for(var n=t.next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent}return""}function gh(e){var t=Xr(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=Xr(e.node,"urn:microsoft:playready","pro"))?(e=Vr(e.textContent),(e=fh(e).filter(function(e){return e.type===uE})[0])?(e=Tr(e.value,!0),(e=hi(e,"WRMHEADER"))?ph(e):""):""):""}function yh(e,t,n,r){var i=[];t=a(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s=n[o.qc];if(s){var u;if(u=Xr(o.node,"urn:microsoft:playready","pro")){u=Vr(u.textContent);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);u=[{initData:Gr(u,l,new Set,0),initDataType:"cenc",keyId:o.keyId}]}else u=null;if(l=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===o.qc)if(l=r,0==l.size)l=null;else{var c=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),d=new Uint8Array([]);l=[{initData:Gr(d,c,l,1),initDataType:"cenc",keyId:o.keyId}]}u=Fe(s,o.init||e||u||l),(s=lE.get(s))&&(u.licenseServerUri=s(o)),i.push(u)}}return i}function vh(e){var t=[];e=a(e);for(var n=e.next();!n.done;n=e.next())(n=mh(n.value))&&t.push(n);return t}function mh(e){var t=e.getAttribute("schemeIdUri"),n=$r(e,"urn:mpeg:cenc:2013","default_KID"),r=Qr(e,"urn:mpeg:cenc:2013","pssh").map(ei);if(!t)return H("Missing required schemeIdUri attribute on","ContentProtection element",e),null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new Ne(2,4,4009);var i=[];if("urn:uuid:adb41c24-2dbf-4a6d-958b-4457c0d27b95"===t&&(null===r||0===r.length)){var o=wh(e);if(null!==o)return i.push({initDataType:"cenc",initData:o,keyId:null}),{node:e,qc:t,keyId:n,init:i}}try{i=r.map(function(e){return{initDataType:"cenc",initData:Vr(e),keyId:null}})}catch(e){throw new Ne(2,4,4007)}return{node:e,qc:t,keyId:n,init:0<i.length?i:null}}function bh(t){if(!e.crypto||!e.crypto.subtle)throw B("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Ne(2,4,4042);var n=Xr(t.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!n)throw new Ne(2,4,4051);if("urn:mpeg:dash:sea:aes128-cbc:2013"!=n.getAttribute("schemeIdUri"))throw new Ne(2,4,4051);if(!(n=Xr(t.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod")))throw new Ne(2,4,4051);if(t=n.getAttribute("IV"),n=n.getAttribute("keyUriTemplate"),!t||!n)throw new Ne(2,4,4051);if(t=Hr(t.substr(2)),16!=t.byteLength)throw new Ne(2,4,4048);return{Dh:n,iv:t}}function wh(e){if(null!==(e=zr(e,"prm:PRM"))){var t=zr(e,"prm:PRMSignalization");if(null!==t){e=new Uint8Array([173,180,28,36,45,191,74,109,149,139,68,87,192,210,123,149]);var n=ei(t);if(null!==n)return t=new Set,n=Er(n),n=le(n),Gr(n,e,t,0)}}return null}function _h(t,n,r,i,o,a){var s={RepresentationID:n,Number:r,SubNumber:i,Bandwidth:o,Time:a};return t.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(n,r,i,o){if("$$"==n)return"$";var a=s[r];if(null==a)return W("URL template does not have an available substitution for ",'identifier "'+r+'":',t),n;switch("RepresentationID"==r&&i&&(W("URL template should not contain a width specifier for identifier",'"RepresentationID":',t),i=void 0),"Time"==r&&"bigint"!=typeof a&&(.2<=Math.abs(a-Math.round(a))&&B("Calculated $Time$ values must be close to integers"),a=Math.round(a)),o){case void 0:case"d":case"i":case"u":n=a.toString();break;case"o":n=a.toString(8);break;case"x":n=a.toString(16);break;case"X":n=a.toString(16).toUpperCase();break;default:n=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-n.length)+1).join("0")+n})}function Th(e,t){var n=Eh(e,t,"timescale"),r=1;n&&(r=si(n)||1);var i=Eh(e,t,"duration");n=si(i||""),"image"==e.I.contentType&&(n=li(i||"")),n&&(n/=r);var o=Eh(e,t,"startNumber");i=Number(Eh(e,t,"presentationTimeOffset"))||0;var a=ui(o||"");null!=o&&null!=a||(a=1);var s=kh(e,t,"SegmentTimeline");if(t=null,s){t=r,e=e.aa.duration||1/0,o=a,s=Yr(s,"S");for(var u=[],l=-i,c=0;c<s.length;++c){var d=s[c],h=s[c+1],f=ni(d,"t",ui),p=ni(d,"d",ui),g=ni(d,"r",ai),y=ni(d,"k",ai)||0;if(null!=f&&(f-=i),!p){W('"S" element must have a duration:','ignoring the remaining "S" elements.',d);break}if(f=null!=f?f:l,0>(g=g||0))if(h){if(null==(h=ni(h,"t",ui))){W('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',d);break}if(f>=h){W('An "S" element cannot have a negative repeatif its start ','time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',d);break}g=Math.ceil((h-f)/p)-1}else{if(1/0==e){W('The last "S" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "S" element.',d);break}if(f/t>=e){W('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',d);break}g=Math.ceil((e*t-f)/p)-1}for(0<u.length&&f!=l&&(Math.abs((f-l)/t)>=X_&&W("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",d),u[u.length-1].end=f/t),d=0;d<=g;++d)l=f+p,u.push({start:f/t,end:l/t,Bf:f,gb:y,Zh:u.length+o}),f=l}t=u}return{timescale:r,za:n,kd:a,sb:i/r||0,Af:i,timeline:t}}function Sh(e,t){return[t(e.I),t(e.ja),t(e.ta)].filter(lt)}function Eh(e,t,n){t=Sh(e,t),e=null,t=a(t);for(var r=t.next();!r.done&&!(e=r.value.getAttribute(n));r=t.next());return e}function kh(e,t,n){t=Sh(e,t),e=null,t=a(t);for(var r=t.next();!r.done&&!(e=zr(r.value,n));r=t.next());return e}function Ah(e,t,n,r,i,o){for(var s=$r(e,"http://www.w3.org/1999/xlink","href"),u=$r(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=a(Array.from(e.attributes)),c=l.next();!c.done;c=l.next())c=c.value,"http://www.w3.org/1999/xlink"==c.namespaceURI&&e.removeAttributeNS(c.namespaceURI,c.localName);if(5<=o)return zn(new Ne(2,4,4028));if("onLoad"!=u)return zn(new Ne(2,4,4027));var d=Ue([r],[s]);return i.request(0,ar(d,t)).oa(function(r){if(!(r=fi(r.data,e.tagName)))return zn(new Ne(2,4,4001,s));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;r.childNodes.length;){var u=r.childNodes[0];r.removeChild(u),e.appendChild(u)}for(r=a(Array.from(r.attributes)),u=r.next();!u.done;u=r.next())e.setAttributeNode(u.value.cloneNode(!1));return xh(e,t,n,d[0],i,o+1)})}function xh(e,t,n,r,i,o){if(o=void 0===o?0:o,$r(e,"http://www.w3.org/1999/xlink","href")){var s=Ah(e,t,n,r,i,o);return n&&(s=s.oa(void 0,function(){return xh(e,t,n,r,i,o)})),s}s=[];for(var u=a(Array.from(e.childNodes)),l=u.next();!l.done;l=u.next())(l=l.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==$r(l,"http://www.w3.org/1999/xlink","href")?e.removeChild(l):"SegmentTimeline"!=l.tagName&&s.push(xh(l,t,n,r,i,o)));return Qn(s).oa(function(){return e})}function Ch(e,t,n,r,i,o,a){var s,u=(new Ir).O("sidx",function(e){s=Ih(t,r,i,o,a,n,e)});if(e&&u.parse(e),s)return s;throw H('Invalid box type, expected "sidx".'),new Ne(2,3,3004)}function Ih(e,t,n,r,i,o,a){var s=[];a.reader.skip(4);var u=a.reader.M();if(0==u)throw H("Invalid timescale."),new Ne(2,3,3005);if(0==a.version)var l=a.reader.M(),c=a.reader.M();else l=a.reader.pc(),c=a.reader.pc();a.reader.skip(2);var d=a.reader.ya();for(e=e+a.size+c,c=0;c<d;c++){var h=a.reader.M(),f=(2147483648&h)>>>31;h&=2147483647;var p=a.reader.M();if(a.reader.skip(4),1==f)throw H("Heirarchical SIDXs are not supported."),new Ne(2,3,3006);s.push(new io(l/u+n,(l+p)/u+n,function(){return o},e,e+h-1,t,n,r,i)),l+=p,e+=h}return a.parser.stop(),s}function Mh(e){this.h=de(e),this.g=new xr(this.h,0)}function Oh(e){var t=Ph(e);if(7<t.length)throw new Ne(2,3,3002);var n=0;t=a(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=Ph(e);e:{r=a(cE);for(var i=r.next();!i.done;i=r.next())if(ae(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.pa();else{if(8==t.length&&224&t[1])throw new Ne(2,3,3001);for(i=r=0;i<t.length;i++){var o=t[i];r=0==i?o&(1<<8-t.length)-1:256*r+o}t=r}return t=e.g.pa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.pa(),r=de(e.h,e.g.pa(),t),e.g.skip(t),new jh(n,r)}function Ph(e){var t=e.g.pa(),n=e.g.fa();if(0==n)throw new Ne(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),le(e.h,t,n)}function jh(e,t){this.id=e,this.g=t}function Dh(e){if(8<e.g.byteLength)throw new Ne(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new Ne(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){t=256*t+e.g.getUint8(n)}return t}function Rh(e,t,n,r,i,o,a,s,u){function l(){return i}var c=[];e=new Mh(e.g);for(var d=null,h=null;e.ea();){var f=Oh(e);if(187==f.id){var p=Lh(f);p&&(f=n*p.hi,p=t+p.Ph,null!=d&&c.push(new io(d+a,f+a,l,h,p-1,o,a,s,u)),d=f,h=p)}}return null!=d&&c.push(new io(d+a,r+a,l,h,null,o,a,s,u)),c}function Lh(e){var t=new Mh(e.g);if(e=Oh(t),179!=e.id)throw W("Not a CueTime element."),new Ne(2,3,3013);if(e=Dh(e),t=Oh(t),183!=t.id)throw W("Not a CueTrackPositions element."),new Ne(2,3,3012);t=new Mh(t.g);for(var n=0;t.ea();){var r=Oh(t);if(241==r.id){n=Dh(r);break}}return{hi:e,Ph:n}}function Nh(e,t,n){if(!(t=kh(e,t,"Initialization")))return null;var r=e.I.cb(),i=t.getAttribute("sourceURL");i&&(r=Ue(r,[i])),i=0;var o=null;return(t=ni(t,"range",oi))&&(i=t.start,o=t.end),n=new no(function(){return r},i,o,Kh(e),null,null,n),n.codecs=e.I.codecs,n.mimeType=e.I.mimeType,n}function Uh(e,t,n){var r=Number(Eh(e,Bh,"presentationTimeOffset"))||0,i=Eh(e,Bh,"timescale"),o=1;i&&(o=si(i)||1);var a=r/o||0,s=Nh(e,Bh,n);Hh(e,s);var u=wt(e);return{fc:function(){var e=kh(u,Bh,"RepresentationIndex"),n=u.I.cb();return e&&(e=e.getAttribute("sourceURL"))&&(n=Ue(n,[e])),e=Vh(u),Fh(u,t,s,n,e.start,e.end,a)}}}function Fh(e,t,n,r,i,o,s){var u,l,c,d,f,p,g,y,v,m,b,w,_,T,S,E,k,x;return A(function(A){if(1==A.g)return u=e.presentationTimeline,l=!e.wb||!e.aa.Me,c=e.aa.start,d=e.aa.duration,f=e.I.mimeType.split("/")[1],p=t,g=null,y=[p(r,i,o,!1),"webm"==f?p(n.Z(),n.Pa,n.wa,!0):null],p=null,h(A,Promise.all(y),2);if(v=A.h,m=v[0],b=v[1]||null,w=null,_=c-s,T=c,S=d?c+d:1/0,"mp4"==f)var C=Ch(m,i,r,n,_,T,S);else{if(C=new Mh(b),440786851!=Oh(C).id)throw H("Not an EBML element."),new Ne(2,3,3008);var I=Oh(C);if(408125543!=I.id)throw H("Not a Segment element."),new Ne(2,3,3009);C=I.g.byteOffset,I=new Mh(I.g);for(var M=null;I.ea();){var O=Oh(I);if(357149030==O.id){M=O;break}}if(!M)throw H("Not an Info element."),new Ne(2,3,3010);for(M=new Mh(M.g),O=1e6,I=null;M.ea();){var P=Oh(M);if(2807729==P.id)O=Dh(P);else if(17545==P.id)if(4==P.g.byteLength)I=P.g.getFloat32(0);else{if(8!=P.g.byteLength)throw new Ne(2,3,3003);I=P.g.getFloat64(0)}}if(null==I)throw new Ne(2,3,3011);if(M=O/1e9,I*=M,O=Oh(new Mh(m)),475249515!=O.id)throw H("Not a Cues element."),new Ne(2,3,3007);C=Rh(O,C,M,I,r,n,_,T,S)}for(w=C,E=a(w),k=E.next();!k.done;k=E.next())x=k.value,x.codecs=e.I.codecs,x.mimeType=e.I.mimeType;return u.bd(w),g=new Xa(w),l&&g.cc(T,S,!0),A.return(g)})}function Bh(e){return e.gd}function Vh(e){var t=kh(e,Bh,"RepresentationIndex");return e=Eh(e,Bh,"indexRange"),e=oi(e||""),t&&(e=ni(t,"range",oi,e)),e}function Hh(e,t){if(Wh(e,t),!Vh(e))throw H("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",e.I),new Ne(2,4,4002)}function Wh(e,t){var n=e.I.mimeType.split("/")[1];if(e.I.contentType!=G_&&"mp4"!=n&&"webm"!=n)throw H("SegmentBase specifies an unsupported container type.",e.I),new Ne(2,4,4006);if("webm"==n&&!t)throw H("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",e.I),new Ne(2,4,4005)}function Kh(e){var t=e.I;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Ud,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function qh(e,t,n){var r=Nh(e,Gh,n),i=zh(e);Xh(e,i);var o=null,a=null;e.ta.id&&e.I.id&&(a=t[e.ta.id+","+e.I.id])&&(o=a.segmentIndex);var s=Yh(e.aa.start,e.aa.duration,e.I.cb,i,r,n,e.I.mimeType,e.I.codecs);return t=!o,o?o.ad(s,e.presentationTimeline.fb()):o=new Xa(s),e.presentationTimeline.bd(s),e.wb&&e.aa.Me||o.cc(e.aa.start,e.aa.duration?e.aa.start+e.aa.duration:1/0,t),a&&(a.segmentIndex=o),{fc:function(){return o&&0!=o.ob()||o.Rd(s),Promise.resolve(o)}}}function Gh(e){return e.Bb}function zh(e){var t=Jh(e);e=Th(e,Gh);var n=e.kd;0==n&&(W("SegmentList@startNumber must be > 0"),n=1);var r=0;return e.za?r=e.za*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{za:e.za,startTime:r,kd:n,sb:e.sb,timeline:e.timeline,Sb:t}}function Xh(e,t){if(!t.za&&!t.timeline&&1<t.Sb.length)throw W("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",e.I),new Ne(2,4,4002);if(!t.za&&!e.aa.duration&&!t.timeline&&1==t.Sb.length)throw W("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",e.I),new Ne(2,4,4002);if(t.timeline&&0==t.timeline.length)throw W("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",e.I),new Ne(2,4,4002)}function Yh(e,t,n,r,i,o,a,s){var u=r.Sb.length;r.timeline&&r.timeline.length!=r.Sb.length&&(u=Math.min(r.timeline.length,r.Sb.length),W("The number of items in the segment timeline and the number of ","segment URLs do not match, truncating",r.Sb.length,"to",u));for(var l=e-r.sb,c=t?e+t:1/0,d=[],h=r.startTime,f={},p=0;p<u;f={Ic:f.Ic,Dc:f.Dc},p++){f.Dc=r.Sb[p];var g=h;h=void 0,h=null!=r.za?g+r.za:r.timeline?r.timeline[p].end:g+t,f.Ic=null,g=new io(e+g,e+h,function(e){return function(){return null==e.Ic&&(e.Ic=Ue(n(),[e.Dc.Hh])),e.Ic}}(f),f.Dc.start,f.Dc.end,i,l,e,c,[],"",null,null,AT,o),g.codecs=s,g.mimeType=a,d.push(g)}return d}function Jh(e){return[e.I.Bb,e.ja.Bb,e.ta.Bb].filter(lt).map(function(e){return Yr(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){t.getAttribute("indexRange")&&!e.Yf&&(e.Yf=!0,W("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate."));var n=t.getAttribute("media");return t=ni(t,"mediaRange",oi,{start:0,end:null}),{Hh:n,start:t.start,end:t.end}})}function Qh(e,t,n,r,i,o,a){var s=nf(e,a),u=Zh(e);ef(e,u);var l=wt(e);if(u.Zc)return Wh(e,s),{fc:function(){var e=_h(u.Zc,l.I.id,null,null,l.bandwidth||null,null);return e=Ue(l.I.cb(),[e]),Fh(l,t,s,e,0,null,u.sb)}};if(u.za)return r||"image"===e.ja.contentType||(e.presentationTimeline.Ye(u.za),e.presentationTimeline.Td(e.aa.start)),{fc:function(){return tf(l,u,i,s,o,a)}};var c=null;r=r=null,e.ta.id&&e.I.id&&(r=e.ta.id+","+e.I.id,r=n[r])&&(c=r.segmentIndex);var d=e.aa.start,h=e.aa.duration?d+e.aa.duration:1/0;q("New manifest "+d+" - "+h);var f=!(e.wb&&e.aa.Me);return c?(n=c,of(n,u,d,h,f,s),n.bb(e.presentationTimeline.fb())):(q("Creating TSI with end "+h),c=new rf(u,e.I.id,e.bandwidth,e.I.cb,d,h,s,f,a,e.I.lf)),u.timeline&&"image"!==e.ja.contentType&&e.presentationTimeline.fg(u.timeline,d),r&&e.wb&&(r.segmentIndex=c),{fc:function(){return c instanceof rf&&0==c.ob()&&of(c,u,d,h,f,s),Promise.resolve(c)}}}function $h(e){return e.hd}function Zh(e){var t=Th(e,$h),n=Eh(e,$h,"media"),r=Eh(e,$h,"index");return{za:t.za,timescale:t.timescale,kd:t.kd,sb:t.sb,Af:t.Af,timeline:t.timeline,mc:n,Zc:r,mimeType:e.I.mimeType,codecs:e.I.codecs}}function ef(e,t){var n=t.Zc?1:0;if(n+=t.timeline?1:0,0==(n+=t.za?1:0))throw H("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",e.I),new Ne(2,4,4002);if(1!=n&&(W("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",e.I),t.Zc?(K("Using the index URL template by default."),t.timeline=null):K("Using the SegmentTimeline by default."),t.za=null),!t.Zc&&!t.mc)throw H("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",e.I),new Ne(2,4,4002)}function tf(t,n,r,i,o,s){function u(r){var o=(r-y)*g,a=o+n.sb,u=o+h;return o=u+g,u=new io(u,Math.min(o,c()),function(){var t=a*v;return"BigInt"in e&&t>Number.MAX_SAFE_INTEGER&&(t=BigInt(a)*BigInt(v)),t=_h(m,w,r,null,b,t),Ue(_(),[t])},0,null,i,T,h,c(),[],"",null,null,AT,s),u.codecs=t.I.codecs,u.mimeType=t.I.mimeType,u.j=o,u}function l(){var e=[Math.max(d.fb(),h),Math.min(d.xb(),c())].map(function(e){return e-h});return e=[Math.ceil(e[0]/g),Math.ceil(e[1]/g)-1],t.I.Ib&&e[1]++,e.map(function(e){return e+y})}function c(){var e=null!=f&&o[f]||p;return e?h+e:1/0}var d=t.presentationTimeline,h=t.aa.start,f=t.ta.id,p=t.aa.duration,g=n.za,y=n.kd,v=n.timescale,m=n.mc,b=t.bandwidth||null,w=t.I.id,_=t.I.cb,T=h-n.sb,S=l();r=t.wb?Math.max(S[0],S[1]-r+1):S[0],S=S[1];for(var E=[],k=r;k<=S;++k){var A=u(k);E.push(A)}var x=new Xa(E);if(E=d.xb()<c(),k=d.R(),E||k){var C=Math.max(r,S+1);x.Zd(g,function(){var e=d.fb();x.bb(e);var t=a(l());t.next(),t=t.next().value;for(var n=[];C<=t;){var r=u(C);n.push(r),C++}return e>c()&&!n.length?null:n})}return Promise.resolve(x)}function nf(e,t){var n=Eh(e,$h,"initialization");if(!n)return null;var r=e.I.id,i=e.bandwidth||null,o=e.I.cb;return t=new no(function(){var e=_h(n,r,null,null,i,null);return Ue(o(),[e])},0,null,Kh(e),null,null,t),t.codecs=e.I.codecs,t.mimeType=e.I.mimeType,t}function rf(e,t,n,r,i,o,a,s,u,l){Xa.call(this,[]),this.h=e,this.u=t,this.C=n,this.F=r,this.i=i,this.l=o,this.s=a,this.A=u,this.G=l,s&&sf(this)}function of(e,t,n,r,i,o){if(af(e,o),e.h){n=e.h.timeline,e.h.mc=t.mc;var a=n[n.length-1];t=t.timeline.filter(function(e){return e.start>=a.end}),0<t.length&&(q("Appending "+t.length+" entries"),e.h.timeline.push.apply(e.h.timeline,s(t))),e.l!==r&&(e.l=r)}else e.h=t,e.i=n,e.l=r;i&&sf(e)}function af(e,t){if(e.s!==t){e.s=t,e=a(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&oo(n,t)}}function sf(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.bb(e.i)}}function uf(e,t,n,r,i,o,a){return e=_h(e,t,n,o,r||null,i),Ue(a(),[e]).map(function(e){return e.toString()})}function lf(e){this.o=null,this.u=e,this.G=new nr,this.j=[],this.h=null,this.m=[],this.A=null,this.F=[],this.C=300,this.l=new Map,this.i=new Map,this.g=null,this.s="UNKNOWN"}function cf(e,t){var n,r,i,o,a,s,u;return A(function(l){return 1==l.g?(n=Ue(e.j,[df(e,t)]),r=ar(n,e.o.retryParameters),i=e.u.networkingEngine.request(8,r),rr(e.G,i),p(l,2),h(l,i.promise,4)):2!=l.g?(o=l.h,a=_r(o.data),s=JSON.parse(a),1==s.VERSION&&hf(e,s,o.uri),y(l,0)):(u=v(l))&&7001==u.code?l.return():(null!=e.g&&(e.g.stop(),e.g=null),e.g=new Tt(function(){cf(e,t)}),e.g.U(e.C),void f(l))})}function df(e,t){if(!e.m.length)return t;t=new Ae(t);var n=e.A||e.m[0],r=Math.round(e.u.getBandwidthEstimate()),i=t.g;return"DASH"==e.s?(i.add("_DASH_pathway",n),i.add("_DASH_throughput",String(r))):"HLS"==e.s&&(i.add("_HLS_pathway",n),i.add("_HLS_throughput",String(r))),Le(i)&&Me(t,i),t.toString()}function hf(e,t,n){null!=e.g&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new Tt(function(){cf(e,r)}),(n=t.TTL)&&(e.C=n),e.g.U(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function ff(e,t,n,r){var i=e.l.get(t);i||(i=new Map),i.set(n,r),e.l.set(t,i)}function pf(e,t,n){n=void 0!==n&&n,t=e.l.get(t)||new Map;for(var r=[],i={},o=a(e.m),s=o.next();!s.done;i={Hb:i.Hb},s=o.next())if(i.Hb=s.value,s=t.get(i.Hb))r.push({ef:i.Hb,location:s});else if(s=e.F.find(function(e){return function(t){return t.Ai==e.Hb}}(i))){var u=t.get(s["BASE-ID"]);u&&(s["URI-REPLACEMENT"].Ag?(u=new Ae(u),Ce(u,s["URI-REPLACEMENT"].Ag),r.push({ef:i.Hb,location:u.toString()})):r.push({ef:i.Hb,location:u}))}for(i=Date.now(),o=a(e.i.keys()),s=o.next();!s.done;s=o.next())s=s.value,u=e.i.get(s),i>u&&e.i.delete(s);if(r=r.filter(function(t){for(var n=a(e.i.keys()),r=n.next();!r.done;r=n.next())if(r.value.includes(new Ae(t.location).mb))return!1;return!0}),r.length&&(e.A=r[0].ef),r=r.map(function(e){return e.location}),!r.length&&e.h)for(i=a(e.h.split(",")),s=i.next();!s.done;s=i.next())(o=t.get(s.value))&&(e.A=e.h,r.push(o));if(!r.length)for(t=a(t.values()),i=t.next();!i.done;i=t.next())r.push(i.value);return n?r:Ue(e.j,r)}function gf(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.m=!1,this.o=new Set}function yf(e,t){var n=[],r=[],i=[],o=[];e=a(e);for(var s=e.next();!s.done;s=e.next()){var u=s.value;s=new Map(u.audioStreams.map(function(e){return[Wf(e),e]}));var l=new Map(u.videoStreams.map(function(e){return[Hf(e),e]})),c=new Map(u.textStreams.map(function(e){return[Kf(e),e]}));if(u=new Map(u.imageStreams.map(function(e){return[qf(e),e]})),t){var d=Uf(G_);c.set(Kf(d),d),d=Uf("image"),u.set(qf(d),d)}n.push(s),r.push(l),i.push(c),o.push(u)}return{Ff:n,yg:r,vg:i,Xf:o}}function vf(e){var t,n,r,i,o,s,u,l,c,d,f,p,g,y,v,m,b,w,_,T,S,E,k,x,C,I,M,O,P,j;return A(function(A){switch(A.g){case 1:if(t=z_,1==e.length)return A.return(e[0]);for(n=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.P}).map(function(e){return[Wf(e),e]}))}),r=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.$}).map(function(e){return[Hf(e),e]}))}),i=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.ia}).map(function(e){return[Kf(e),e]}))}),o=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.ie}).map(function(e){return[qf(e),e]}))}),s=a(i),u=s.next();!u.done;u=s.next())l=u.value,c=Nf(t.ia),l.set(Kf(c),c);for(d=a(o),f=d.next();!f.done;f=d.next())p=f.value,g=Nf(t.ie),p.set(qf(g),g);return y=new gf,h(A,mf(y,[],n,0,Ef,Af),2);case 2:return v=A.h,h(A,mf(y,[],r,0,Ef,Af),3);case 3:return m=A.h,h(A,mf(y,[],i,0,Ef,Af),4);case 4:return b=A.h,h(A,mf(y,[],o,0,Ef,Af),5);case 5:if(w=A.h,_=0,m.length&&v.length)for(x=a(v),C=x.next();!C.done;C=x.next())for(I=C.value,M=a(m),O=M.next();!O.done;O=M.next())P=O.value,j=_++,P.variantIds.push(j),I.variantIds.push(j);else for(T=m.concat(v),S=a(T),E=S.next();!E.done;E=S.next())k=E.value,k.variantIds=[_++];return A.return(m.concat(v).concat(b).concat(w))}})}function mf(e,t,n,r,i,o){var s,u,l,c,d,f,p,g,y,v,m,b,w,_,T,S,E,k,x;return A(function(A){switch(A.g){case 1:for(s=[],u=0;u<r;u++)s.push(new Set);for(l=r;l<n.length;l++)s.push(new Set(n[l].values()));c=a(t),d=c.next();case 2:if(d.done){A.B(4);break}return f=d.value,h(A,bf(e,f,n,r,o,s),5);case 5:if(!(p=A.h))throw new Ne(2,4,4037);d=c.next(),A.B(2);break;case 4:for(g=a(s),y=g.next();!y.done;y=g.next())for(v=y.value,m=a(v),b=m.next();!b.done;b=m.next())w=b.value,(_=_f(e,w,n,i,o,s))&&t.push(_);for(T=a(s),y=T.next();!y.done;y=T.next())for(S=y.value,E={},k=a(S),b=k.next();!b.done;E={Ec:E.Ec},b=k.next())if(E.Ec=b.value,!Vf(E.Ec)&&(x=t.some(function(t){return function(n){return Mf(e,t.Ec,n)}}(E))))throw H("Unused stream in period-flattening!",E.Ec,t),new Ne(2,4,4037);return A.return(t)}})}function bf(e,t,n,r,i,o){return A(function(a){return 1==a.g?(xf(e,n,t),t.matchedStreams?t.segmentIndex?h(a,wf(t,r),2):a.B(2):(H("No matches extending output stream!",t,n),a.return(!1))):(Tf(t,r,i,o),a.return(!0))})}function wf(e,t){var n,r,i,o,s,u,l;return A(function(c){if(1==c.g){for(n=[],r=e.matchedStreams,i=a(r),o=i.next();!o.done;o=i.next())s=o.value,n.push(s.createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex());return h(c,Promise.all(n),2)}if(e.segmentIndex instanceof Qa)for(u=t;u<r.length;u++)l=r[u],l.segmentIndex&&e.segmentIndex.h.push(l.segmentIndex);f(c)})}function _f(e,t,n,r,i,o){if(Vf(t))return null;var a=r(t);return xf(e,n,a),a.createSegmentIndex&&(a.createSegmentIndex=function(){return A(function(e){return a.segmentIndex?e.B(0):(a.segmentIndex=new Qa,h(e,wf(a,0),0))})}),a.matchedStreams&&a.matchedStreams.length?(Tf(a,0,i,o),a):null}function Tf(e,t,n,r){for(var i=e.matchedStreams;t<i.length;t++){var o=i[t];n(e,o);var s=!0;if("audio"==e.type&&0==gt(e.language,o.language)&&(s=!1),s&&(r[t].delete(o),o.fullMimeTypes))for(o=a(o.fullMimeTypes.values()),s=o.next();!s.done;s=o.next())e.fullMimeTypes.add(s.value)}}function Sf(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=a(t.matchedStreams),n=e.next();!n.done;n=e.next())n=n.value,n.segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Ef(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function kf(e,t){function n(e,t){e||(e=[]),t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,e.includes(n)||e.push(n);return e}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=a(t.keyIds),i=r.next();!i.done;i=r.next())e.keyIds.add(i.value);if(null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=Wi(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new Ne(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=a(t.closedCaptions),i=r.next();!i.done;i=r.next()){var o=a(i.value);i=o.next().value,o=o.next().value,e.closedCaptions.set(i,o)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Sf(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),kf(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&kf(e.trickModeVideo,t)}function Af(e,t){var n=e.roles;n||(n=[]);for(var r=a(t.roles),i=r.next();!i.done;i=r.next())i=i.value,n.includes(i)||n.push(i);for(e.roles=n,n=a(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,s(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=a(t.closedCaptions),n=t.next();!n.done;n=t.next())r=a(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function xf(e,t,n){var r=[];t=a(t);for(var i=t.next();!i.done;i=t.next()){if(!(i=Cf(e,i.value,n)))return;r.push(i)}n.matchedStreams=r}function Cf(e,t,n){var r=null,i=(0,{audio:Wf,video:Hf,text:Kf,image:qf}[n.type])(n);if(t.has(i))r=t.get(i);else{i={audio:function(t,n){return Mf(e,t,n)},video:function(t,n){return Mf(e,t,n)},text:Of,image:Pf}[n.type];var o={audio:jf,video:Df,text:Rf,image:Lf}[n.type];t=a(t.values());for(var s=t.next();!s.done;s=t.next())s=s.value,!i(n,s)||n.fastSwitching!=s.fastSwitching||r&&!o(n,r,s)||(r=s)}return r}function If(e,t){function n(e){if(!pE.has(e)){var t=Xe(e);pE.set(e,t)}return pE.get(e)}return e.mimeType==t.mimeType&&n(e.codecs)==n(t.codecs)}function Mf(e,t,n){return!(!If(t,n)&&!e.m||t.drmInfos&&!Hi(t.drmInfos,n.drmInfos))}function Of(e,t){return!t.language||e.forced===t.forced&&0!=gt(e.language,t.language)&&t.kind==e.kind}function Pf(){return!0}function jf(e,t,n){var r=If(e,t),i=If(e,n);if(r&&!i)return!1;if(!r&&i)return!0;if(r=gt(e.language,t.language),(i=gt(e.language,n.language))>r)return!0;if(i<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(r=t.roles.filter(function(t){return e.roles.includes(t)}),i=n.roles.filter(function(t){return e.roles.includes(t)}),i.length>r.length||!(i.length<r.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((r=Ff(e.channelsCount,t.channelsCount,n.channelsCount))==dE||r!=fE&&((r=Ff(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==dE||r!=fE&&!(!e.bandwidth||Bf(e.bandwidth,t.bandwidth,n.bandwidth)!=dE))))}function Df(e,t,n){var r=If(e,t),i=If(e,n);if(r&&!i)return!1;if(!r&&i)return!0;if((r=Ff(e.width*e.height,t.width*t.height,n.width*n.height))==dE)return!0;if(r==fE)return!1;if(e.frameRate){if((r=Ff(e.frameRate,t.frameRate,n.frameRate))==dE)return!0;if(r==fE)return!1}return!(!e.bandwidth||Bf(e.bandwidth,t.bandwidth,n.bandwidth)!=dE)}function Rf(e,t,n){var r=gt(e.language,t.language),i=gt(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(t){return e.roles.includes(t)}),i=n.roles.filter(function(t){return e.roles.includes(t)}),i.length>r.length)return!0;if(i.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Lf(e,t,n){return Ff(e.width*e.height,t.width*t.height,n.width*n.height)==dE}function Nf(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Uf(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Xa([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Ff(e,t,n){if(t==e&&e!=n)return fE;if(n==e&&e!=t)return dE;if(t>e){if(n<=e||n-e<t-e)return dE;if(n-e>t-e)return fE}else{if(n>e)return fE;if(e-n<e-t)return dE;if(e-n>e-t)return fE}return hE}function Bf(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?dE:t<e?fE:hE}function Vf(e){switch(e.type){case G_:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Hf(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function Wf(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Kf(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function qf(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function Gf(){var e=this;this.i=this.g=null,this.o=[],this.j=null,this.J=1,this.m={},this.L={},this.l=new gf,this.F=0,this.H=new R(5),this.G=new Tt(function(){np(e)}),this.C=new nr,this.u=null,this.K=[],this.A=1/0,this.s=!1,this.h=null}function zf(e){var t,n,r,i,o,a,s;return A(function(u){return 1==u.g?(t=e.o,1<e.o.length&&e.h&&(n=pf(e.h,"Location",!0),n.length&&(t=n)),r=ar(t,e.g.retryParameters),i=Date.now(),h(u,fp(e,r,0,{type:4}),2)):3!=u.g?(o=u.h,e.i?(o.uri&&o.uri!=o.originalUri&&!e.o.includes(o.uri)&&e.o.unshift(o.uri),h(u,Xf(e,o.data,o.uri),3)):u.return(0)):(a=Date.now(),s=(a-i)/1e3,e.H.sample(1,s),u.return(s))})}function Xf(e,t,n){var r,i,o,a,s;return A(function(u){if(1==u.g){if(!(r=fi(t,"MPD")))throw new Ne(2,4,4001,n);return(i=e.g.dash.disableXlinkProcessing)?u.return(Yf(e,r,n)):(o=e.g.dash.xlinkFailGracefully,a=xh(r,e.g.retryParameters,o,n,e.i.networkingEngine),rr(e.C,a),h(u,a.promise,2))}return s=u.h,u.return(Yf(e,s,n))})}function Yf(e,t,n){var r,i,o,s,u,l,c,d,p,g,y,v,m,b,w,_,T,S,E,k,x,C,I,M,O,P,j,D,R,L,N,U,F,V,H,W,K,q,G,z,X,Y,J,Q,$,Z,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,de;return A(function(A){switch(A.g){case 1:for((r=e.g.dash.manifestPreprocessor)&&r(t),e.h&&e.h.l.clear(),i=[n],o=[],s=new Map,u=Yr(t,"Location"),l=a(u),c=l.next();!c.done;c=l.next())d=c.value,p=d.getAttribute("serviceLocation"),(g=ei(d))&&(y=Ue(i,[g])[0],p&&(e.h?ff(e.h,"Location",p,y):s.set(p,y)),o.push(y));if(e.h?(v=pf(e.h,"Location",!0),0<v.length&&(i=e.o=v)):o.length&&(i=e.o=o),m=Promise.resolve(),(b=zr(t,"ContentSteering"))&&e.i)for(w=b.getAttribute("defaultServiceLocation"),e.h?(e.h.j=i,e.h.h=w):(e.h=new lf(e.i),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.j=i,e.h.h=w,(_=ei(b))&&((T=ni(b,"queryBeforeStart",ci,!1))?m=cf(e.h,_):cf(e.h,_))),S=a(s.keys()),E=S.next();!E.done;E=S.next())k=E.value,x=s.get(k),ff(e.h,"Location",k,x);if(C=Yr(t,"BaseURL"),M=!1,e.h)for(O=a(C),P=O.next();!P.done;P=O.next())j=P.value,D=j.getAttribute("serviceLocation"),R=ei(j),D&&R&&(ff(e.h,"BaseURL",D,R),M=!0);if(M&&e.h||(L=C.map(ei),I=Ue(i,L)),N=function(){return e.h&&M?pf(e.h,"BaseURL"):I||[]},U=0,C&&C.length&&(U=ni(C[0],"availabilityTimeOffset",li)||0),F=e.g.dash.ignoreMinBufferTime,V=0,F||(V=ni(t,"minBufferTime",ii)||0),e.F=ni(t,"minimumUpdatePeriod",ii,-1),H=ni(t,"availabilityStartTime",ri),W=ni(t,"timeShiftBufferDepth",ii),K=e.g.dash.ignoreSuggestedPresentationDelay,q=null,K||(q=ni(t,"suggestedPresentationDelay",ii)),G=e.g.dash.ignoreMaxSegmentDuration,z=null,G||(z=ni(t,"maxSegmentDuration",ii)),X=t.getAttribute("type")||"static",e.j)for(Y=e.j.presentationTimeline,J=a(Object.values(e.m)),Q=J.next();!Q.done;Q=J.next())$=Q.value,$.segmentIndex&&$.segmentIndex.bb(Y.fb());else Z=e.g.defaultPresentationDelay||1.5*V,ee=null!=q?q:Z,Y=new xa(H,ee,e.g.dash.autoCorrectDrift);return Y.rc("static"==X),(te=Y.R())&&!isNaN(e.g.availabilityWindowOverride)&&(W=e.g.availabilityWindowOverride),null==W&&(W=1/0),Y.Yd(W),ne=t.getAttribute("profiles")||"",re={wb:"static"!=X,presentationTimeline:Y,ta:null,aa:null,ja:null,I:null,bandwidth:0,Yf:!1,Ib:U,profiles:ne.split(",")},ie=Qf(e,re,N,t),oe=ie.duration,ae=ie.periods,"static"!=X&&ie.Nf||Y.Oa(oe||1/0),e.A&&!e.s&&(se=e.i.isAutoLowLatencyMode())&&(e.i.enableLowLatencyMode(),e.s=e.i.isLowLatencyMode()),e.s?Y.ng(e.A):e.A&&B("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),Y.Ye(z||1),h(A,e.l.If(ae,re.wb),2);case 2:return h(A,m,3);case 3:if(e.s&&(V=0,ue=null!=q?q:e.g.defaultPresentationDelay,Y.qf(ue)),e.j){e.j.variants=e.l.j,le=e.l.Je(),0<le.length&&(e.j.textStreams=le),e.j.imageStreams=e.l.i,e.i.filter(e.j),A.B(4);break}if(e.j={presentationTimeline:Y,variants:e.l.j,textStreams:e.l.Je(),imageStreams:e.l.i,offlineSessionIds:[],minBufferTime:V||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:Jf(t)},!Y.xg()){A.B(5);break}return ce=Yr(t,"UTCTiming"),h(A,lp(e,N,ce),6);case 6:if(de=A.h,!e.i)return A.return();Y.og(de);case 5:Y.Od();case 4:e.i.makeTextStreamsForClosedCaptions(e.j),f(A)}})}function Jf(e){if(!(e=zr(e,"ServiceDescription")))return null;var t=zr(e,"Latency"),n=zr(e,"PlaybackRate");if(t&&t.getAttribute("max")||n){e=t&&t.getAttribute("max")?parseInt(t.getAttribute("max"),10)/1e3:null;var r=n?parseFloat(n.getAttribute("max")):null;return t=t&&t.getAttribute("min")?parseInt(t.getAttribute("min"),10)/1e3:null,n=n?parseFloat(n.getAttribute("min")):null,{maxLatency:e,maxPlaybackRate:r,minLatency:t,minPlaybackRate:n}}return null}function Qf(e,t,n,r){var i=ni(r,"mediaPresentationDuration",ii),o=[],a=0;r=Yr(r,"Period");for(var s=0;s<r.length;s++){var u=r[s],l=r[s+1],c=ni(u,"start",ii,a),d=u.id,h=ni(u,"duration",ii),f=null;if(l){var p=ni(l,"start",ii);null!=p&&(f=p-c)}else null!=i&&(f=i-c);if(p=X_,f&&h&&Math.abs(f-h)>p&&W("There is a gap/overlap between Periods",u),null==f&&(f=h),null!==e.u&&null!==d&&null!==c&&c<e.u&&!e.K.includes(d)&&s+1!=r.length)q("Skipping Period with ID "+d+" as its start time is smaller than the largest period start time that has been seen, and ID is unseen before");else{if(null!==c&&(null===e.u||c>e.u)&&(e.u=c),a=$f(e,t,n,{start:c,duration:f,node:u,Me:null==f||!l}),o.push(a),t.ta.id&&f&&(e.L[t.ta.id]=f),null==f){l&&W("Skipping Period",s+1,"and any subsequent Periods:","Period",s+1,"does not have a valid start time.",l),a=null;break}a=c+f}}return e.K=o.map(function(e){return e.id}),null!=i?(a!=i&&W("@mediaPresentationDuration does not match the total duration of ","all Periods."),{periods:o,duration:i,Nf:!1}):{periods:o,duration:a,Nf:!0}}function $f(e,t,n,r){t.ta=ip(e,r.node,null,n),t.aa=r,t.ta.Ib=t.Ib,t.ta.id||(K("No Period ID given for Period with start time "+r.start+",  Assigning a default"),t.ta.id="__shaka_period_"+r.start);var i=Yr(r.node,"EventStream");n=t.presentationTimeline.fb(),i=a(i);for(var o=i.next();!o.done;o=i.next())cp(e,r.start,r.duration,o.value,n);if(n=Yr(r.node,"AdaptationSet").map(function(n){return ep(e,t,n)}).filter(lt),t.wb){for(r=[],i=a(n),o=i.next();!o.done;o=i.next()){o=a(o.value.Th);for(var s=o.next();!s.done;s=o.next())r.push(s.value)}if(r.length!=new Set(r).size)throw new Ne(2,4,4018)}for(r=n.filter(function(e){return!e.yf}),n=n.filter(function(e){return e.yf}),n=a(n),i=n.next();!i.done;i=n.next()){i=i.value,o=i.yf.split(" "),s=a(r);for(var u=s.next();!u.done;u=s.next()){var l=u.value;if(o.includes(l.id)){u={},l=a(l.streams);for(var c=l.next();!c.done;u={rd:u.rd},c=l.next())u.rd=c.value,u.rd.trickModeVideo=i.streams.find(function(e){return function(t){return Xe(e.rd.codecs)==Xe(t.codecs)}}(u))}}}if(n=Zf(e.g.disableAudio,r,"audio"),i=Zf(e.g.disableVideo,r,"video"),o=Zf(e.g.disableText,r,G_),r=Zf(e.g.disableThumbnails,r,"image"),0===i.length&&0===n.length)throw new Ne(2,4,4004);return{id:t.ta.id,audioStreams:n,videoStreams:i,textStreams:o,imageStreams:r}}function Zf(e,t,n){return e||!t.length?[]:t.reduce(function(e,t){return t.contentType!=n?e:(e.push.apply(e,s(t.streams)),e)},[])}function ep(e,t,n){function r(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ja=ip(e,n,t.ta,null);var i=!1,o=Yr(n,"Role"),u=o.map(function(e){return e.getAttribute("value")}).filter(lt),l=void 0,c=t.ja.contentType==G_;c&&(l="subtitle"),o=a(o);for(var d=o.next();!d.done;d=o.next()){d=d.value;var h=d.getAttribute("schemeIdUri");if(null==h||"urn:mpeg:dash:role:2011"==h)switch(d=d.getAttribute("value")){case"main":i=!0;break;case"caption":case"subtitle":l=d}}var f;h=Yr(n,"EssentialProperty"),o=null;var p=!1;d=!1,h=a(h);for(var g=h.next();!g.done;g=h.next()){g=g.value;var y=g.getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==y?o=g.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==y?f=r(parseInt(g.getAttribute("value"),10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"!=y&&"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=y&&("urn:mpeg:dash:ssr:2023"==y?p=!0:d=!0)}for(h=Yr(n,"SupplementalProperty"),h=a(h),g=h.next();!g.done;g=h.next())g=g.value,"urn:mpeg:mpegB:cicp:TransferCharacteristics"==g.getAttribute("schemeIdUri")&&(f=r(parseInt(g.getAttribute("value"),10)));h=Yr(n,"Accessibility");var v,m=new Map;for(h=a(h),g=h.next();!g.done;g=h.next())if(y=g.value,g=y.getAttribute("schemeIdUri"),y=y.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==g)if(g=1,null!=y){y=y.split(";");for(var b=a(y),w=b.next();!w.done;w=b.next()){var _=w.value,T=w=void 0;_.includes("=")?(_=_.split("="),w=_[0].startsWith("CC")?_[0]:"CC"+_[0],T=_[1]||"und"):(w="CC"+g,2==y.length?g+=2:g++,T=_),m.set(w,pt(T))}}else m.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==g)if(g=1,null!=y)for(y=a(y.split(";")),w=y.next();!w.done;w=y.next())w=w.value,_=b=void 0,w.includes("=")?(w=w.split("="),b="svc"+w[0],_=w[1].split(",")[0].split(":").pop()):(b="svc"+g,g++,_=w),m.set(b,pt(_));else m.set("svc1","und");else"urn:mpeg:dash:role:2011"==g?null!=y&&(u.push(y),"captions"==y&&(l="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==g&&("1"==y?v="visually impaired":"2"==y&&(v="hard of hearing"));if(d)return null;d=Yr(n,"ContentProtection");var S=dh(d,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),E=pt(t.ja.language||"und"),k=n.getAttribute("label");if((d=Yr(n,"Label"))&&d.length?(d=d[0],d.textContent&&(k=d.textContent)):null!=t.ja.id&&(k=t.ja.id.toString()),d=Yr(n,"Representation"),n=d.map(function(n){return(n=tp(e,t,S,l,E,k,i,u,m,n,v))&&(n.hdr=n.hdr||f,n.fastSwitching=p),n}).filter(function(e){return!!e}),0==n.length){if(o="image"==t.ja.contentType,e.g.dash.ignoreEmptyAdaptationSet||c||o)return null;throw new Ne(2,4,4003)}if(!t.ja.contentType||"application"==t.ja.contentType)for(t.ja.contentType=hp(n[0].mimeType,n[0].codecs),c=a(n),g=c.next();!g.done;g=c.next())g.value.type=t.ja.contentType;for(c=t.ja.id||"__fake__"+e.J++,h=a(n),g=h.next();!g.done;g=h.next()){for(g=g.value,y=a(S.drmInfos),b=y.next();!b.done;b=y.next())b=b.value,b.keyIds=b.keyIds&&g.keyIds?new Set([].concat(s(b.keyIds),s(g.keyIds))):b.keyIds||g.keyIds;e.g.dash.enableAudioGroups&&(g.groupId=c)}return d=d.map(function(e){return e.getAttribute("id")}).filter(lt),{id:c,contentType:t.ja.contentType,language:E,kj:i,streams:n,drmInfos:S.drmInfos,yf:o,Th:d}}function tp(t,n,r,i,o,a,s,u,l,c,d){if(n.I=ip(t,c,n.ja,null),t.A=Math.min(t.A,n.I.Ib),!sp(n.I))return W("Skipping Representation",n.I),null;var p=n.aa.start;n.bandwidth=ni(c,"bandwidth",si)||0;var g=n.I.contentType,y=g==G_||"application"==g;g="image"==g;try{var v=void 0;if(r.le){var m=n.I.cb,b=Ue(m(),[r.le.Dh]),w=ar(b,t.g.retryParameters);v={method:"AES-128",iv:r.le.iv,firstMediaSequenceNumber:0,fetchKey:function(){var n,r,i;return A(function(o){if(1==o.g)return h(o,fp(t,w,6),2);if(3!=o.g){if(n=o.h,!n.data||16!=n.data.byteLength)throw new Ne(2,4,4049);return r={name:"AES-CBC"},i=v,h(o,e.crypto.subtle.importKey("raw",n.data,r,!0,["decrypt"]),3)}i.cryptoKey=o.h,v.fetchKey=void 0,f(o)})}}}if(m=function(e,n,r,i){return dp(t,e,n,r,i)},n.I.gd)var _=Uh(n,m,v);else if(n.I.Bb)_=qh(n,t.m,v);else if(n.I.hd)_=Qh(n,m,t.m,!!t.j,t.g.dash.initialSegmentLimit,t.L,v);else{var T=n.aa.duration||0,S=n.I.cb;_={fc:function(){var e=Ya(p,T,S());return e.dc(function(e){e.mimeType=n.I.mimeType,e.codecs=n.I.codecs}),Promise.resolve(e)}}}}catch(e){if((y||g)&&4002==e.code)return null;throw e}m=Yr(c,"ContentProtection"),m=hh(m,r,t.g.dash.ignoreDrmInfo,t.g.dash.keySystemsByURI),m=new Set(m?[m]:[]),b=!1,Yr(c,"SupplementalProperty").some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")})&&(b=!0);var E=!1;y&&(E=u.includes("forced_subtitle")||u.includes("forced-subtitle"));var k;if(g&&((c=Yr(c,"EssentialProperty").find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))}))&&(k=c.getAttribute("value")),!k))return null;var x;c=n.I.codecs,n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(x="PQ"),y=n.I.id?n.ta.id+","+n.I.id:"";var C=y&&t.m[y]?t.m[y]:{id:t.J++,originalId:n.I.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){C.segmentIndex&&(C.segmentIndex.release(),C.segmentIndex=null)},segmentIndex:null,mimeType:n.I.mimeType,codecs:c,frameRate:n.I.frameRate,pixelAspectRatio:n.I.pixelAspectRatio,bandwidth:n.bandwidth,width:n.I.width,height:n.I.height,kind:i,encrypted:0<r.drmInfos.length,drmInfos:r.drmInfos,keyIds:m,language:o,originalLanguage:n.ja.language,label:a,type:n.ja.contentType,primary:s,trickModeVideo:null,emsgSchemeIdUris:n.I.emsgSchemeIdUris,roles:u,forced:E,channelsCount:n.I.Ud,audioChannelConfig:n.I.audioChannelConfig,audioSamplingRate:n.I.audioSamplingRate,spatialAudio:b,closedCaptions:l,hdr:x,videoLayout:void 0,tilesLayout:k,accessibilityPurpose:d,external:!1,fastSwitching:!1,fullMimeTypes:new Set([We(n.I.mimeType,n.I.codecs)])};return C.createSegmentIndex=function(){var e;return A(function(t){if(1==t.g)return C.segmentIndex?t.B(0):(e=C,h(t,_.fc(),3));e.segmentIndex=t.h,f(t)})},y&&n.wb&&!t.m[y]&&(t.m[y]=C),C}function np(e){var t,n;A(function(r){switch(r.g){case 1:return K("Updating manifest..."),t=0,p(r,2),h(r,zf(e),4);case 4:t=r.h,y(r,3);break;case 2:if(n=v(r),e.i){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),r.return();n.severity=1,e.i.onError(n)}case 3:if(!e.i)return r.return();e.i.onManifestUpdated(),rp(e,t),f(r)}})}function rp(e,t){0>e.F||e.G.U(Math.max(e.F-t,L(e.H)))}function ip(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Ud:null,audioSamplingRate:null,Ib:0,lf:0},r=r||n.cb;var i,o=t.getAttribute("id"),s=Yr(t,"BaseURL"),u=!1;if(e.h)for(var l=a(s),c=l.next();!c.done;c=l.next()){var d=c.value;c=d.getAttribute("serviceLocation"),d=ei(d),c&&d&&(ff(e.h,o,c,d),u=!0)}u&&e.h||(i=s.map(ei)),l=t.getAttribute("contentType")||n.contentType,c=t.getAttribute("mimeType")||n.mimeType,d=t.getAttribute("codecs")||n.codecs;var h=ni(t,"frameRate",di)||n.frameRate,f=t.getAttribute("sar")||n.pixelAspectRatio,p=op(Yr(t,"InbandEventStream"),n.emsgSchemeIdUris),g=Yr(t,"AudioChannelConfiguration"),y=a(ap(g));g=y.next().value,y=y.next().value,g||(g=n.Ud),y||(y=n.audioChannelConfig);var v=ni(t,"audioSamplingRate",ui)||n.audioSamplingRate;l||(l=hp(c,d));var m=zr(t,"SegmentBase"),b=zr(t,"SegmentTemplate"),w=m?ni(m,"availabilityTimeOffset",li)||0:0,_=b?ni(b,"availabilityTimeOffset",li)||0:0,T=s&&s.length?ni(s[0],"availabilityTimeOffset",li)||0:0;return w=n.Ib+T+w+_,_=null,(T=zr(t,"SegmentSequenceProperties"))&&(T=zr(T,"SAP"))&&(_=ni(T,"cadence",ai)),{cb:function(){return Ue(r(),s.length?e.h&&u?pf(e.h,o):i||[]:[])},gd:m||n.gd,Bb:zr(t,"SegmentList")||n.Bb,hd:b||n.hd,width:ni(t,"width",ui)||n.width,height:ni(t,"height",ui)||n.height,contentType:l,mimeType:c,codecs:d,frameRate:h,pixelAspectRatio:f,emsgSchemeIdUris:p,id:o,language:t.getAttribute("lang"),Ud:g,audioChannelConfig:y,audioSamplingRate:v,Ib:w,lf:_||n.lf}}function op(e,t){t=t.slice(),e=a(e);for(var n=e.next();!n.done;n=e.next())n=n.value.getAttribute("schemeIdUri"),t.includes(n)||t.push(n);return t}function ap(e){e=a(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return[n.trim().split(/ +/).length,n];case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var r=parseInt(n,10);if(!r){W("Channel parsing failure! Ignoring scheme and value",t,n);continue}return[r,n];case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(r=parseInt(n,16))){W("Channel parsing failure! Ignoring scheme and value",t,n);continue}for(e=0;r;)1&r&&++e,r>>=1;return[e,n];case"urn:mpeg:mpegB:cicp:ChannelConfiguration":r=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14];var i=parseInt(n,10);if(!i){W("Channel parsing failure! Ignoring scheme and value",t,n);continue}if(0<i&&i<r.length)return[r[i],n];continue;default:W("Unrecognized audio channel scheme:",t,n)}}return[null,null]}function sp(e){var t=e.gd?1:0;return t+=e.Bb?1:0,0==(t+=e.hd?1:0)?e.contentType==G_||"application"==e.contentType||(W("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',e),!1):(1!=t&&(W("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",e),e.gd?(K("Using SegmentBase by default."),e.Bb=null):K("Using SegmentList by default."),e.hd=null),!0)}function up(e,t,n,r){var i,o,a,s,u,l;return A(function(c){if(1==c.g)return i=Ue(t(),[n]),o=ar(i,e.g.retryParameters),o.method=r,a=e.i.networkingEngine.request(4,o),rr(e.C,a),h(c,a.promise,2);if(s=c.h,"HEAD"==r){if(!s.headers||!s.headers.date)return W("UTC timing response is missing","expected date header"),c.return(0);u=s.headers.date}else u=_r(s.data);return l=Date.parse(u),isNaN(l)?(W("Unable to parse date from UTC timing response"),c.return(0)):c.return(l-Date.now())})}function lp(e,t,n){var r,i,o,s,u,l,c,d,f;return A(function(g){switch(g.g){case 1:r=n.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}),i=e.g.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),o=a(r),s=o.next();case 2:if(s.done){g.B(4);break}switch(u=s.value,p(g,5),l=u.scheme,c=u.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return g.B(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return g.B(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(c),g.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":B("NTP UTCTiming scheme is not supported");break;default:B("Unrecognized scheme in UTCTiming element",l)}g.B(9);break;case 7:return h(g,up(e,t,c,"HEAD"),10);case 10:return g.return(g.h);case 8:return h(g,up(e,t,c,"GET"),11);case 11:return g.return(g.h);case 9:y(g,3);break;case 5:f=v(g),W("Error fetching time from UTCTiming elem",f.message);case 3:s=o.next(),g.B(2);break;case 4:return B("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),g.return(0)}})}function cp(e,t,n,r,i){var o=r.getAttribute("schemeIdUri")||"",s=r.getAttribute("value")||"",u=ni(r,"timescale",ui)||1;r=a(Yr(r,"Event"));for(var l=r.next();!l.done;l=r.next()){l=l.value;var c=ni(l,"presentationTime",ui)||0,d=ni(l,"duration",ui)||0;c=c/u+t,d=c+d/u,null!=n&&(c=Math.min(c,t+n),d=Math.min(d,t+n)),d<i||(l={schemeIdUri:o,value:s,startTime:c,endTime:d,id:l.getAttribute("id")||"",eventElement:l},e.i.onTimelineRegionAdded(l))}}function dp(e,t,n,r,i){var o,a,s,u;return A(function(l){return 1==l.g?(o=dT,a=i?0:1,s=vs(t,n,r,e.g.retryParameters),h(l,fp(e,s,o,{type:a}),2)):(u=l.h,l.return(u.data))})}function hp(e,t){return t=We(e,t),tt(t)?G_:e.split("/")[0]}function fp(e,t,n,r){return t=e.i.networkingEngine.request(n,t,r),rr(e.C,t),t.promise}function pp(){}function gp(e,t,n){this.type=e,this.g=t,this.segments=n||null}function yp(e,t,n,r){this.id=e,this.name=t,this.g=n,this.value=void 0===r?null:r}function vp(e){var t=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}function mp(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function bp(e,t){if(!(e=e.getAttribute(t)))throw new Ne(2,4,4023,t);return e.value}function wp(e,t,n){n=void 0===n?[]:n,this.g=t,this.h=e,this.gb=n}function _p(e,t){this.name=e,this.value=t}function Tp(e,t){return e.filter(function(e){return e.name==t})}function Sp(e,t){return e.filter(function(e){return bp(e,"TYPE")==t})}function Ep(e,t){e=a(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function kp(e,t,n){return n=void 0===n?0:n,(e=Ep(e,t))?Number(e.value):n}function Ap(e,t,n){return t?xp(e,[t],n):[]}function xp(e,t,n){if(!t.length)return[];t=Ue(e,t),e=[],t=a(t);for(var r=t.next();!r.done;r=t.next()){var i=e,o=i.push,s=r.value;if((r=n)&&r.size){s=String(s).replace(/%7B/g,"{").replace(/%7D/g,"}");var u=s.match(/{\$\w*}/g);if(u){u=a(u);for(var l=u.next();!l.done;l=u.next()){l=l.value;var c=l.slice(2,l.length-1),d=r.get(c);if(!d)throw H("A variable has been found that is not declared",c),new Ne(2,4,4039,c);s=s.replace(l,d)}}r=s}else r=s;o.call(i,r)}return e}function Cp(e){this.h=e||"",this.g=0}function Ip(e){Mp(e,/[ \t]+/gm)}function Mp(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=null==t?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function Op(e){return e.g==e.h.length?null:(e=Mp(e,/[^ \t\n]*/gm))?e[0]:null}function Pp(){this.g=0}function jp(e,t){t=_r(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new Ne(2,4,4015);t=0;for(var r=!0,i=a(n),o=i.next();!o.done;o=i.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=Dp(e,o),--e.g,mE.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(r=!0)}for(i=[],r=!0,o=0;o<n.length;o++){var s=n[o],u=n[o+1];if(/^#(?!EXT)/m.test(s)||r)r=!1;else{if(s=Dp(e,s),bE.includes(s.name)){if(1!=t)throw new Ne(2,4,4017);s=n.splice(o,n.length-o),n=[],r=[],o=[],u=null,s=a(s);for(var l=s.next();!l.done;l=s.next())l=l.value,/^(#EXT)/.test(l)?(l=Dp(e,l),mE.includes(l.name)?i.push(l):"EXT-X-MAP"==l.name?u=l:"EXT-X-PART"==l.name?o.push(l):"EXT-X-PRELOAD-HINT"==l.name?"PART"==mp(l,"TYPE")?null!=mp(l,"BYTERANGE-START")?null!=mp(l,"BYTERANGE-LENGTH")&&o.push(l):o.push(l):"MAP"==mp(l,"TYPE")&&(l.name="EXT-X-MAP",u=l):r.push(l)):/^#(?!EXT)/m.test(l)||(l=l.trim(),u&&r.push(u),n.push(new wp(l,r,o)),r=[],o=[]);return o.length&&(u&&r.push(u),n.push(new wp("",r,o))),new gp(t,i,n)}i.push(s),"EXT-X-STREAM-INF"==s.name&&(s.g.push(new _p("URI",u)),r=!0)}}return new gp(t,i)}function Dp(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new Ne(2,4,4016,t);t=n[1];var r=n[2];n=[];var i;if(r){r=new Cp(r);var o;(o=Mp(r,/^([^,=]+)(?:,|$)/g))&&(i=o[1]);for(var a=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=Mp(r,a);)n.push(new _p(o[1],o[2]||o[3])),Ip(r)}return new yp(e,t,n,i)}function Rp(){}function Lp(e){try{var t=Np(e);return Yn({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return zn(e)}}function Np(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw H("Bad data URI, failed to parse scheme"),new Ne(2,1,1004,t);if(n=n.slice(1).join(":").split(","),2>n.length)throw H("Bad data URI, failed to extract encoding and MIME type"),new Ne(2,1,1004,t);var r=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=r.split(";"),r=n[0];var i=!1;1<n.length&&"base64"==n[n.length-1]&&(i=!0,n.pop());var o;return o=i?Vr(t):Er(t),{data:o,contentType:r}}function Up(e){var t=Je(e),n=t.split("/")[0];return e=Qe(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map}}function Fp(e,t){function n(e){return r(e.name)}function r(e){switch(e=e.toLowerCase()){case"avc1":case"avc3":i.push(e+".42E01E"),s=!0;break;case"hev1":case"hvc1":i.push(e+".1.6.L93.90"),s=!0;break;case"dvh1":case"dvhe":i.push(e+".05.04"),s=!0;break;case"vp09":i.push(e+".00.10.08"),s=!0;break;case"av01":i.push(e+".0.01M.08"),s=!0;break;case"mp4a":i.push("mp4a.40.2"),o=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":i.push(e),o=!0}}var i=[],o=!1,s=!1,u=null,l=null,c=null,d=null,h=null;if((new Ir).box("moov",Mr).box("trak",Mr).O("tkhd",function(e){e=So(e.reader,e.version),l=String(e.height),c=String(e.width)}).box("mdia",Mr).O("mdhd",function(e){u=_o(e.reader,e.version).language}).box("minf",Mr).box("stbl",Mr).O("stsd",Or).box("mp4a",function(e){var t=e.reader;t.skip(6),t.skip(2),t.skip(8);var r=t.ya();t.skip(2),t.skip(2),t.skip(2),t=t.ya()+t.ya()/65536,d=r,h=t,e.reader.ea()?Mr(e):n(e)}).box("esds",function(e){e=Eo(e.reader),i.push(e.ka),o=!0}).box("ac-3",n).box("ec-3",n).box("opus",n).box("Opus",n).box("fLaC",n).box("avc1",function(e){e=ko(e.reader,e.name),i.push(e.ka),s=!0}).box("avc3",function(e){e=ko(e.reader,e.name),i.push(e.ka),s=!0}).box("hev1",n).box("hvc1",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("enca",jr).box("encv",Pr).box("sinf",Mr).box("frma",function(e){e=Ao(e.reader).ka,r(e)}).parse(e||t,!0),!i.length)return null;var f=o&&!s,p=new Map;if(s){var g=new pe("video/mp4");for(e&&g.init(e),g.i(t),e=a(g.j()),t=e.next();!t.done;t=e.next())t=t.value,p.set(t,t);g.h()}return{type:f?"audio":"video",mimeType:f?"audio/mp4":"video/mp4",codecs:Bp(i).join(", "),language:u,height:l,width:c,channelCount:d,sampleRate:h,closedCaptions:p}}function Bp(e){var t=new Set,n=[];e=a(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var i=Ye(r);t.has(i)?q("Ignoring duplicate codec"):(n.push(r),t.add(i))}return n}function Vp(){var e=this;this.g=this.i=null,this.A=1,this.o=new Map,this.J=new Map,this.K=new Map,this.K.set("video",new Map),this.K.set("audio",new Map),this.K.set(G_,new Map),this.K.set("image",new Map),this.Ba=new Set,this.h=new Map,this.l=null,this.Y="",this.na=new Pp,this.s=-1,this.V=1/0,this.ba=this.kb=!1,this.u=new Tt(function(){Ug(e)}),this.ca=SE,this.F=null,this.Aa=0,this.m=1/0,this.ha=this.ga=this.L=0,this.N=new nr,this.G=new Map,this.H=new Map,this.W=new Map,this.jb=this.C=!1,this.Ha=new R(5),this.j=null}function Hp(e,t){return Fg(e)?e.K.get(t.type):t.Qd}function Wp(e,t){var n,r,i,o,u,l,c,d,p,g,y,v,m,b,w,_,T,S,E,k,x,C,I,M,O,P,j,D,R,L;return A(function(A){if(1==A.g){for(n=[],r=a(t.Z()),i=r.next();!i.done;i=r.next())o=i.value,u=new Ae(o),l=u.g,t.ud&&(0<=t.Xa&&l.add("_HLS_msn",String(t.Xa)),0<=t.Ya&&l.add("_HLS_part",String(t.Ya))),t.vd&&l.add("_HLS_skip","YES"),Le(l)&&Me(u,l),n.push(u.toString());return h(A,Ng(e,n,!0),2)}if(c=A.h,!t.stream.segmentIndex)return A.return();if(d=jp(e.na,c.data),1!=d.type)throw new Ne(2,4,4017);p=c.uri,p==c.originalUri||t.Z().includes(p)||t.ig.push(p),g=Tp(d.g,"EXT-X-DEFINE"),y=Qp(e,g,p),v=t.stream,m=Hp(e,t),b=Eg(d,v.mimeType),w=b.keyIds,_=b.drmInfos,T=function(e,t){return e.size===t.size&&[].concat(s(e)).every(function(e){return t.has(e)})},T(v.keyIds,w)||(v.keyIds=w,v.drmInfos=_,e.i.newDrmInfo(v)),S=Pg(e,d,v,m,y,t.Z),E=S.segments,(k=S.bandwidth)&&(v.bandwidth=k),v.segmentIndex.ad(E,e.l.fb()),E.length&&(x=kp(d.g,"EXT-X-MEDIA-SEQUENCE",0),I=(C=Ep(d.g,"EXT-X-SKIP"))?Number(mp(C,"SKIPPED-SEGMENTS")):0,M=Tg(x,E),O=M.Xa,P=M.Ya,t.Xa=O+I,t.Ya=P,j=m.get(x),v.segmentIndex.bb(j)),D=E[0],t.Tb=D.startTime,R=E[E.length-1],t.pb=R.endTime,(L=Ep(d.g,"EXT-X-ENDLIST"))&&(t.Xc=!0),Ag(e,d),f(A)})}function Kp(e,t){for(var n=-1==e.s,r=a(t),i=r.next();!i.done;i=r.next()){i=i.value;var o=i.stream.segmentIndex,s=Hp(e,i);if(o=o.g[0]||null){s=a(s);for(var u=s.next();!u.done;u=s.next()){u=a(u.value);var l=u.next().value;if(u.next().value==o.startTime){n&&(e.s=Math.max(e.s,l)),i.re=l;break}}}}if(!(0>e.s))for(q("Syncing HLS streams against base sequence number:",e.s),t=a(t),i=t.next();!i.done;i=t.next())n=i.value,(r=n.stream.segmentIndex)&&0<(i=e.s-n.re)&&(r.g.splice(0,i),r=r.g[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),Gp(e,n,r))}function qp(e,t){if(1/0==e.V){t=a(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value.stream.segmentIndex.g[0]||null;null!=r&&null!=r.g&&(e.V=Math.min(e.V,r.g))}}if(t=e.V,1/0!=t)for(q("Syncing HLS streams against base time:",t),r=a(e.h.values()),n=r.next();!n.done;n=r.next()){n=n.value;var i=n.stream.segmentIndex;if(null!=i){var o=i.g[0]||null;if(null==o.g)F("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.Z(),"Expect AV sync issues!");else for(Gp(e,n,o.g-t-o.startTime),n=a(i),i=n.next();!i.done;i=n.next())i.value.vf(t)}}}function Gp(e,t,n){t.Tb+=n,t.pb+=n,e=Hp(e,t);for(var r=a(e),i=r.next();!i.done;i=r.next()){var o=a(i.value);i=o.next().value,o=o.next().value,e.set(i,o+n)}q("Offset",n,"applied to",t.Z())}function zp(e,t,n){var r,i,o,s,u,l,c,d,p,g,y,v,m,b,w,_,T,S,E,k,x,C,I,M,O,P,j,D,R,L;return A(function(A){switch(A.g){case 1:return r=jp(e.na,t),(i=Tp(r.g,"EXT-X-DEFINE"),o=[],s=[],u=[],1==r.type)?(m=function(){return[n]},h(A,Xp(e,r,m),6)):(Jp(e,i),l=Tp(r.g,"EXT-X-MEDIA"),c=Tp(r.g,"EXT-X-STREAM-INF"),d=Tp(r.g,"EXT-X-IMAGE-STREAM-INF"),p=Tp(r.g,"EXT-X-I-FRAME-STREAM-INF"),g=Tp(r.g,"EXT-X-SESSION-KEY"),y=Tp(r.g,"EXT-X-SESSION-DATA"),v=Tp(r.g,"EXT-X-CONTENT-STEERING"),Zp(e,y),h(A,eg(e,v),4));case 4:return $p(e,c),hg(e,l),o=og(e,c,g,l),s=tg(e,l),h(A,rg(e,d,p),5);case 5:u=A.h,A.B(3);break;case 6:return b=A.h,w=b.type,_=b.mimeType,T=b.codecs,S=b.language,E=b.height,k=b.width,x=b.channelCount,C=b.sampleRate,I=b.closedCaptions,h(A,_g(e,e.A++,r,m,n,T,w,S,!0,"Media Playlist",x,I,null,!1,C,!1,_),7);case 7:M=A.h,e.h.set(n,M),"video"==w&&Lg(M.stream,k,E,null,null,null),o.push({id:0,language:pt(S||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==w?M.stream:null,video:"video"==w?M.stream:null,bandwidth:M.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[],label:null});case 3:if(!e.i)throw new Ne(2,7,7001);if(e.l=new xa(null,0),e.l.rc(!0),1==r.type&&(Fg(e)&&(xg(e,r),O=e.m,e.u.U(O)),P=Array.from(e.h.values()),bg(e,P),Yp(e)),e.F={presentationTimeline:e.l,variants:o,textStreams:s,imageStreams:u,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},e.ba||!e.g.hls.disableCodecGuessing){A.B(8);break}for(j=[],D=a(e.F.variants),R=D.next();!R.done;R=D.next())L=R.value,L.audio&&""===L.audio.codecs&&j.push(L.audio.createSegmentIndex()),L.video&&""===L.video.codecs&&j.push(L.video.createSegmentIndex());return h(A,Promise.all(j),8);case 8:e.i.makeTextStreamsForClosedCaptions(e.F),f(A)}})}function Xp(e,t,n){var r,i,o,s,u,l,c,d,f,p,g,y,v,m,b,w,_,T;return A(function(S){switch(S.g){case 1:if(r=Up(e.g.hls.mediaPlaylistFullMimeType),!t.segments.length)return S.return(r);if(i=Math.trunc((t.segments.length-1)/2),o=t.segments[i],s=Ap(n(),t.segments[0].h),u=s[0],l=new Ae(u),c=l.Fa.split(".").pop(),d=wE[c])return S.return(Up(d));if(f=dT,p=null,g=Cg(e,t,o.g,n),e.W.clear(),!g){S.B(2);break}return y=vs(g.Z(),g.jc(),g.ic(),e.g.retryParameters),h(S,Vg(e,y,f,{type:0}),3);case 3:v=S.h,p=v.data;case 2:return m=ar(s,e.g.retryParameters),h(S,Vg(e,m,f,{type:1}),4);case 4:if(b=S.h,(w=b.headers["content-type"])&&(w=w.split(";")[0].toLowerCase()),"ts"==c||"video/mp2t"==w){var E=b.data,k=le(E);k=(new Fo).parse(k);var A=k.Tc();k=k.Ke();var x=[],C=!1,I=!1;switch(A.audio){case"aac":case"aac-loas":x.push("mp4a.40.2"),C=!0;break;case"mp3":x.push("mp4a.40.34"),C=!0;break;case"ac3":x.push("ac-3"),C=!0;break;case"ec3":x.push("ec-3"),C=!0;break;case"opus":x.push("opus"),C=!0}switch(A.video){case"avc":k.ka?x.push(k.ka):x.push("avc1.42E01E"),I=!0;break;case"hvc":k.ka?x.push(k.ka):x.push("hvc1.1.6.L93.90"),I=!0;break;case"av1":x.push("av01.0.01M.08"),I=!0}if(x.length){if(A=C&&!I,C=new Map,I){I=new pe("video/mp2t"),I.i(E),E=a(I.j());for(var M=E.next();!M.done;M=E.next())M=M.value,C.set(M,M);I.h()}k={type:A?"audio":"video",mimeType:"video/mp2t",codecs:x.join(", "),language:null,height:k.height,width:k.width,channelCount:null,sampleRate:null,closedCaptions:C}}else k=null;if(_=k)return S.return(_)}else if(("mp4"==c||"cmfv"==c||"m4s"==c||"video/mp4"==w||"audio/mp4"==w||"video/iso.segment"==w)&&(T=Fp(p,b.data)))return S.return(T);return S.return(r)}})}function Yp(e){if(Fg(e)){if(e.ca==kE){for(var t,n=t=1/0,r=a(e.h.values()),i=r.next();!i.done;i=r.next())i=i.value,i.stream.segmentIndex&&"text"!=i.stream.type&&(t=Math.min(t,i.pb),n=Math.min(n,i.Tb));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.o),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Yd(t)}if(!e.l.m)for(t=a(e.h.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||"audio"!=n.type&&"video"!=n.type||(n=n.stream.segmentIndex.get(0))&&n.g&&e.l.pg(n.g)}else e.l.Oa(vg(e));e.l.Od()}function Jp(e,t){var n=new Ae(e.Y).g;t=a(t);for(var r=t.next();!r.done;r=t.next()){var i=r.value;r=mp(i,"NAME");var o=mp(i,"VALUE");i=mp(i,"QUERYPARAM"),r&&o&&(e.o.has(r)||e.o.set(r,o)),i&&(r=n.get(i)[0])&&!e.o.has(r)&&e.o.set(i,r)}}function Qp(e,t,n){n=new Ae(n).g;var r=new Map;t=a(t);for(var i=t.next();!i.done;i=t.next()){var o=i.value,s=mp(o,"NAME"),u=mp(o,"VALUE");i=mp(o,"QUERYPARAM"),o=mp(o,"IMPORT"),s&&u&&(r.has(s)||r.set(s,u)),i&&(s=n.get(i)[0])&&!r.has(s)&&r.set(i,s),o&&(i=e.o.get(o))&&r.set(o,i)}return r}function $p(e,t){t=a(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,i=mp(r,"AUDIO");n=mp(r,"VIDEO");var o=mp(r,"SUBTITLES");if(r=sg(e,r),o){var s=Ve(G_,r);e.H.set(o,s),ye(r,s)}i&&(o=Ve("audio",r),o||(o=e.g.hls.defaultAudioCodec),e.H.set(i,o)),n&&(i=Ve("video",r),i||(i=e.g.hls.defaultVideoCodec),e.H.set(n,i))}}function Zp(e,t){t=a(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,i=mp(r,"DATA-ID");n=mp(r,"URI");var o=mp(r,"LANGUAGE");r=mp(r,"VALUE"),i=(new Map).set("id",i),n&&i.set("uri",Ap([e.Y],n,e.o)[0]),o&&i.set("language",o),r&&i.set("value",r),n=new Zn("sessiondata",i),e.i&&e.i.onEvent(n)}}function eg(e,t){var n,r,i,o,s,u;return A(function(l){if(!e.i||!e.g)return l.return();for(r=a(t),i=r.next();!i.done;i=r.next())if(o=i.value,s=mp(o,"PATHWAY-ID"),u=mp(o,"SERVER-URI"),s&&u){e.j=new lf(e.i),e.j.configure(e.g),e.j.j=[e.Y],e.j.setManifestType("HLS"),e.j.h=s,n=cf(e.j,u);break}return h(l,n,0)})}function tg(e,t){var n=Sp(t,"SUBTITLES");t=n.map(function(t){if(e.g.disableText)return null;try{return fg(e,[t],new Map).stream}catch(t){if(e.g.hls.ignoreTextStreamFailures)return null;throw t}}),n=a(n);for(var r=n.next();!r.done;r=n.next()){var i=bp(r.value,"GROUP-ID");if((r=e.H.get(i))&&(i=e.J.get(i))){i=a(i);for(var o=i.next();!o.done;o=i.next())o=o.value,o.stream.codecs=r,o.stream.mimeType=jg(G_,r)||Dg(G_),ng(o.stream)}}return t.filter(function(e){return e})}function ng(e){e.fullMimeTypes=new Set([We(e.mimeType,e.codecs)])}function rg(e,t,n){var r,i;return A(function(o){return 1==o.g?(r=t.map(function(t){var n,r,i;return A(function(o){if(1==o.g)return(n=e.g.disableThumbnails)?o.return(null):(p(o,2),h(o,pg(e,t),4));if(2!=o.g)return r=o.h,o.return(r.stream);if(i=v(o),e.g.hls.ignoreImageStreamFailures)return o.return(null);throw i})}).concat(n.map(function(t){if(e.g.disableThumbnails)return null;try{var n=bp(t,"URI"),r=mp(t,"CODECS")||"";if(e.h.has(n))var i=e.h.get(n);else{var o=mp(t,"LANGUAGE"),s=mp(t,"NAME"),u=mp(t,"CHARACTERISTICS"),l=yg(e,e.A++,[n],r,"image",o,!1,s,null,null,u,!1,null,!1),c=mp(t,"RESOLUTION"),d=a(c?c.split("x"):[null,null]),h=d.next().value,f=d.next().value;l.stream.width=Number(h)||void 0,l.stream.height=Number(f)||void 0;var p=mp(t,"BANDWIDTH");p&&(l.stream.bandwidth=Number(p)),e.h.set(n,l),i=l}return t=i,"mjpg"!==t.stream.codecs?null:t.stream}catch(t){if(e.g.hls.ignoreImageStreamFailures)return null;throw t}})),h(o,Promise.all(r),2)):(i=o.h,o.return(i.filter(function(e){return e})))})}function ig(e,t,n){t=t.filter(function(e){var t=mp(e,"URI")||"";return"SUBTITLES"!=mp(e,"TYPE")&&""!=t});var r={};t=a(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;var o=vp(i);r[o]?r[o].push(i):r[o]=[i]}for(var s in r)fg(e,r[s],n)}function og(e,t,n,r){var i=[],o=new Set;if(0<n.length){n=a(n);for(var u=n.next();!u.done;u=n.next()){u=u.value;var l=bp(u,"METHOD");if("NONE"!=l&&"AES-128"!=l){l=mp(u,"KEYFORMAT")||"identity";var c=TE[l];if(u=c?c(u,""):null){if(u.keyIds)for(l=a(u.keyIds),c=l.next();!c.done;c=l.next())o.add(c.value);i.push(u)}else W("Unsupported HLS KEYFORMAT",l)}}}for(n={},t=a(t),u=t.next();!u.done;u=t.next())u=u.value,l=vp(u),n[l]?n[l].push(u):n[l]=[u];t=[];for(var d in n){c=n[d];var h=c[0];u=mp(h,"FRAME-RATE"),l=Number(mp(h,"AVERAGE-BANDWIDTH"))||Number(bp(h,"BANDWIDTH"));var f=mp(h,"RESOLUTION"),p=a(f?f.split("x"):[null,null]);f=p.next().value,p=p.next().value;var g=mp(h,"VIDEO-RANGE");(h=mp(h,"REQ-VIDEO-LAYOUT"))&&h.includes(",")&&(h=h.split(",").filter(function(e){return"CH-STEREO"==e||"CH-MONO"==e})[0]),h=h||"CH-MONO",c=ag(e,c,r,l),t.push.apply(t,s(dg(e,c.audio,c.video,l,f,p,u,g,h,i,o)))}return t.filter(function(e){return null!=e})}function ag(e,t,n,r){for(var i={audio:[],video:[]},o=new Map,u=[],l=!1,c=!1,d=a(t),h=d.next();!h.done;h=d.next()){h=h.value;var f=mp(h,"AUDIO"),p=mp(h,"VIDEO"),g=f||p;if(g){u.includes(g)||u.push(g);var y=mp(h,"PATHWAY-ID");y&&o.set(g,y),f?l=!0:p&&(c=!0),q("Guessing stream type for",h.toString())}}u.length&&n.length&&(d=n.filter(function(e){return u.includes(bp(e,"GROUP-ID"))}),ig(e,d,o)),d=(o=u.sort().join(","))&&e.J.has(o)?e.J.get(o):[],l?i.audio.push.apply(i.audio,s(d)):c&&i.video.push.apply(i.video,s(d)),h=!1;var v=t.map(function(e){return bp(e,"URI")});return c=i.audio.find(function(e){return e&&e.Z().find(function(e){return v.includes(e)})}),l=sg(e,t[0]),f=Ve("video",l),(p=Ve("audio",l))&&!f?(c="audio",q("Guessing audio-only."),h=0<i.audio.length):!i.audio.length&&!i.video.length&&p&&f?(q("Guessing multiplexed audio+video."),c="video",l=[[f,p].join()]):i.audio.length&&c?(q("Guessing audio-only."),c="audio",h=!0):i.video.length&&!i.audio.length?(q("Guessing audio-only."),c="audio"):(q("Guessing video-only."),c="video"),h||(y=g=p=f=h=null,!d.length&&(n=n.find(function(e){var t=mp(e,"URI")||"",n=mp(e,"TYPE");return e=bp(e,"GROUP-ID"),"SUBTITLES"!=n&&""==t&&u.includes(e)}))&&(h=mp(n,"LANGUAGE"),f=mp(n,"NAME"),p=ug(n),cg(n),g=mp(n,"CHARACTERISTICS"),y=lg(n)),e=gg(e,t,l,c,h,f,p,g,y),o&&(e.stream.groupId=o),d.length||(e.stream.bandwidth=r),i[e.stream.type]=[e]),i}function sg(e,t){var n=mp(t,"CODECS")||"";e.ba=0<n.length,e.ba||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),n=t.join(",")),e=new Set,t=[],n=a(n.split(/\s*,\s*/));for(var r=n.next();!r.done;r=n.next()){r=r.value;var i=Ye(r);e.has(i)?q("Ignoring duplicate codec"):(t.push(r),e.add(i))}return t}function ug(e){return(e=mp(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function lg(e){return(e=mp(e,"SAMPLE-RATE"))?parseInt(e,10):null}function cg(e){return!!(e=mp(e,"CHANNELS"))&&e.includes("/JOC")}function dg(e,t,n,r,i,o,s,u,l,c,d){for(var h=a(n),f=h.next();!f.done;f=h.next())Lg(f.value.stream,i,o,s,u,l);for(i=e.g.disableAudio,t.length&&!i||(t=[null]),i=e.g.disableVideo,n.length&&!i||(n=[null]),i=[],t=a(t),o=t.next();!o.done;o=t.next())for(o=o.value,s=a(n),u=s.next();!u.done;u=s.next()){var p=u.value;(u=o?o.stream:null)&&(u.drmInfos=c,u.keyIds=d),(l=p?p.stream:null)&&(l.drmInfos=c,l.keyIds=d),h=o?o.stream.drmInfos:null,f=p?p.stream.drmInfos:null,p=p?p.Z().sort().join(","):"";var g=o?o.Z().sort().join(","):"";p=p+" - "+g,u&&l&&!Hi(h,f)?W("Incompatible DRM info in HLS variant.  Skipping."):e.Ba.has(p)?q("Skipping variant which only differs in text streams."):(u={id:e.A++,language:u?u.language:"und",disabledUntilTime:0,primary:!!u&&u.primary||!!l&&l.primary,audio:u,video:l,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[],label:null},i.push(u),e.Ba.add(p))}return i}function hg(e,t){t=Sp(t,"CLOSED-CAPTIONS"),t=a(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,i=mp(r,"LANGUAGE");n=pt(i||"und"),i||(i=mp(r,"NAME"))&&(n=i),i=bp(r,"GROUP-ID"),r=bp(r,"INSTREAM-ID").replace("SERVICE","svc"),e.G.get(i)||e.G.set(i,new Map),e.G.get(i).set(r,n)}}function fg(e,t,n){for(var r=[],i=[],o=new Map,s=a(t),u=s.next();!u.done;u=s.next()){var l=u.value;u=bp(l,"URI"),l=bp(l,"GROUP-ID"),r.push(u),i.push(l),o.set(l,u)}if(s=i.sort().join(","),u=t[0],t="",l=bp(u,"TYPE").toLowerCase(),"subtitles"==l&&(l=G_),l==G_)t=mp(u,"CODECS")||"";else{i=a(i);for(var c=i.next();!c.done;c=i.next())if(c=c.value,e.H.has(c)){t=e.H.get(c);break}}if(i=r.sort().join(","),e.h.has(i))return e.h.get(i);if(c=e.A++,e.j){o=a(o);for(var d=o.next();!d.done;d=o.next()){var h=a(d.value);d=h.next().value,h=h.next().value,(d=n.get(d))&&ff(e.j,c,d,h)}}n=mp(u,"LANGUAGE"),o=mp(u,"NAME"),d="YES"==mp(u,"DEFAULT"),h="audio"==l?ug(u):null;var f="audio"==l&&cg(u),p=mp(u,"CHARACTERISTICS"),g="YES"==mp(u,"FORCED");return u="audio"==l?lg(u):null,r=yg(e,c,r,t,l,n,d,o,h,null,p,g,u,f),r.stream&&(r.stream.groupId=s),e.J.has(s)?e.J.get(s).push(r):e.J.set(s,[r]),e.h.set(i,r),r}function pg(e,t){var n,r,i,o,a,s,u,l,c,d;return A(function(f){return 1==f.g?(n=bp(t,"URI"),r=mp(t,"CODECS","jpeg")||"",e.h.has(n)?f.return(e.h.get(n)):(i=mp(t,"LANGUAGE"),o=mp(t,"NAME"),a=mp(t,"CHARACTERISTICS"),s=yg(e,e.A++,[n],r,"image",i,!1,o,null,null,a,!1,null,!1),(u=mp(t,"RESOLUTION"))?h(f,s.stream.createSegmentIndex(),3):f.B(2))):(2!=f.g&&(l=s.stream.segmentIndex.get(0),c=l.tilesLayout)&&(s.stream.width=Number(u.split("x")[0])*Number(c.split("x")[0]),s.stream.height=Number(u.split("x")[1])*Number(c.split("x")[1])),(d=mp(t,"BANDWIDTH"))&&(s.stream.bandwidth=Number(d)),e.h.set(n,s),f.return(s))})}function gg(e,t,n,r,i,o,s,u,l){for(var c=e.A++,d=[],h=a(t),f=h.next();!f.done;f=h.next()){var p=f.value;f=bp(p,"URI"),p=mp(p,"PATHWAY-ID"),e.j&&p&&ff(e.j,c,p,f),d.push(f)}if(h=d.sort().join(","),e.h.has(h))return e.h.get(h);e:{if(t=mp(t[0],"CLOSED-CAPTIONS"),"video"==r){if(t&&"NONE"!=t){t=e.G.get(t);break e}if(!t&&e.G.size)for(t=a(e.G.keys()).next();!t.done;){t=e.G.get(t.value);break e}}t=null}return n=Be(r,n),r=yg(e,c,d,n,r,i,!1,o,s,t,u,!1,l,!1),e.h.set(h,r),r}function yg(e,t,n,r,i,o,s,u,l,c,d,p,g,y){function v(t){var n,v,T,S,E,k,x,C,I,M,O,P,j,D,R,L,N;return A(function(A){switch(A.g){case 1:return n=_.Z(),h(A,Ng(e,_.Z(),!0),2);case 2:if(v=A.h,t.aborted)return A.return();if(T=v.uri,T==v.originalUri||n.includes(T)||w.push(T),S=jp(e.na,v.data),E=void 0,e.ba||!e.g.hls.disableCodecGuessing){A.B(3);break}return h(A,Xp(e,S,m),4);case 4:k=A.h,E=k.mimeType,r=k.codecs;case 3:return x=Fg(e),h(A,_g(e,0,S,m,T,r,i,o,s,u,l,c,d,p,g,y,E),5);case 5:if(C=A.h,t.aborted)return A.return();if(I=C.stream,Fg(e)&&!x&&xg(e,S),_.Tb=C.Tb,_.pb=C.pb,_.vd=C.vd,_.ud=C.ud,_.Xc=C.Xc,_.Qd=C.Qd,_.Xa=C.Xa,_.Ya=C.Ya,_.Te=!0,b.segmentIndex=I.segmentIndex,b.encrypted=I.encrypted,b.drmInfos=I.drmInfos,b.keyIds=I.keyIds,b.mimeType=I.mimeType,b.bandwidth=b.bandwidth||I.bandwidth,b.codecs=b.codecs||I.codecs,ng(b),b.drmInfos.length&&e.i.newDrmInfo(b),M=z_,i==M.$||i==M.P)for(O=a(e.h.values()),P=O.next();!P.done;P=O.next())j=P.value,j.Te||j.type!=i||(j.stream.mimeType=I.mimeType,ng(j.stream));i==M.ia&&(D=I.segmentIndex.get(0))&&D.h&&(b.mimeType="application/mp4",ng(b)),wg(e)&&(e.kb?bg(e,[_]):(e.kb=!0,R=Array.from(e.h.values()),L=R.filter(function(e){return e.stream.segmentIndex}),bg(e,L),Yp(e),0<(N=e.m)&&e.u.U(N))),f(A)}})}function m(){return e.j&&1<n.length?pf(e.j,t):w.concat(xp([e.Y],n,e.o))}var b=Sg(e,r,i,o,s,u,l,c,d,p,g,y),w=[],_={stream:b,type:i,ig:w,Z:m,Tb:0,pb:0,Qd:new Map,vd:!1,ud:!1,Xc:!1,re:-1,Xa:-1,Ya:-1,Te:!1},T=null,S=new AbortController;return b.createSegmentIndex=function(){return T||(S=new AbortController,T=new Promise(function(e){e(v(S.signal))}))},b.closeSegmentIndex=function(){T&&!b.segmentIndex&&S.abort(),b.segmentIndex&&(b.segmentIndex.release(),b.segmentIndex=null),T=null},_}function vg(e){var t=1/0;e=a(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&"text"!=n.stream.type&&(t=Math.min(t,n.pb));return t}function mg(e,t){var n=[];t=a(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.dc(function(e){n.push(e)});e.l.bd(n)}function bg(e,t){if(!Fg(e))for(var n=vg(e),r=a(t),i=r.next();!i.done;i=r.next())i.value.stream.segmentIndex.cc(0,n);mg(e,t.map(function(e){return e.stream})),e.g.hls.ignoreManifestProgramDateTime?Kp(e,t):qp(e,t)}function wg(e){if(!e.F)return!1;var t=[],n=[];e=a(e.F.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(e){return e.segmentIndex})||0<n.length&&!n.some(function(e){return e.segmentIndex}))}function _g(e,t,n,r,i,o,a,s,u,l,c,d,f,p,g,y,v){var m,b,w,_,T,S,E,k,x,C,I,M,O,P,j,D,R,L,N,U,F,B,V;return A(function(t){if(1==t.g){if(1!=n.type)throw new Ne(2,4,4017);m=Tp(n.g,"EXT-X-DEFINE"),b=Qp(e,m,i);var A=Ep(n.g,"EXT-X-PLAYLIST-TYPE"),H=Ep(n.g,"EXT-X-ENDLIST");return H=A&&"VOD"==A.value||H,A=A&&"EVENT"==A.value&&!H,A=!H&&!A,H?Bg(e,SE):A?Bg(e,kE):Bg(e,EE),Fg(e)&&Ag(e,n),v?t.B(2):h(t,Rg(e,a,o,n,b,r),3)}if(2!=t.g&&(v=t.h),w=Eg(n,v),_=w.drmInfos,T=w.keyIds,S=w.encrypted,E=w.Gg,S&&!_.length&&!E)throw new Ne(2,4,4026);return k=Sg(e,o,a,s,u,l,c,d,f,p,g,y),k.encrypted=S,k.drmInfos=_,k.keyIds=T,k.mimeType=v,ng(k),x=Fg(e)?e.K.get(a):new Map,C=Pg(e,n,k,x,b,r),I=C.segments,(M=C.bandwidth)&&(k.bandwidth=M),Fg(e)&&Ag(e,n),O=I[0].startTime,P=I[I.length-1],j=P.endTime,D=new Xa(I),k.segmentIndex=D,L=!!(R=Ep(n.g,"EXT-X-SERVER-CONTROL"))&&null!=R.getAttribute("CAN-SKIP-UNTIL"),N=!!R&&null!=R.getAttribute("CAN-BLOCK-RELOAD"),U=kp(n.g,"EXT-X-MEDIA-SEQUENCE",0),F=Tg(U,I),B=F.Xa,V=F.Ya,t.return({stream:k,type:a,ig:[],Z:r,Tb:O,pb:j,vd:L,ud:N,Xc:!1,re:-1,Xa:B,Ya:V,Qd:x,Te:!1})})}function Tg(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Xa:e,Ya:n};t=t[t.length-1];var r=t.i;return t.i.length?(n=r.length-1,r[r.length-1].o||(e++,n=0),{Xa:e,Ya:n}):(e++,t.s&&(n=0),{Xa:e,Ya:n})}function Sg(e,t,n,r,i,o,s,u,l,c,d,h){var f=jg(n,t)||Dg(n),p=[];if(l){l=a(l.split(","));for(var g=l.next();!g.done;g=l.next())p.push(g.value)}return l=void 0,g=null,n==G_?l=p.includes("public.accessibility.transcribes-spoken-dialog")&&p.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":p.includes("public.accessibility.describes-video")&&(g="visually impaired"),p.length||"subtitle"!==l||p.push("subtitle"),e={id:e.A++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:f,codecs:t,kind:n==G_?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:pt(r||"und"),originalLanguage:r,label:o,type:n,primary:i,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:p,forced:c,channelsCount:s,audioChannelConfig:null,audioSamplingRate:d,spatialAudio:h,closedCaptions:u,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:g,external:!1,fastSwitching:!1,fullMimeTypes:new Set},ng(e),e}function Eg(e,t){var n=[];if(e.segments){e=a(e.segments);for(var r=e.next();!r.done;r=e.next())r=Tp(r.value.g,"EXT-X-KEY"),n.push.apply(n,s(r))}r=e=!1;var i=[],o=new Set;n=a(n);for(var u=n.next();!u.done;u=n.next()){u=u.value;var l=bp(u,"METHOD");if("NONE"!=l)if(e=!0,"AES-128"==l)r=!0;else{l=mp(u,"KEYFORMAT")||"identity";var c=TE[l];if(u=c?c(u,t):null){if(u.keyIds)for(l=a(u.keyIds),c=l.next();!c.done;c=l.next())o.add(c.value);i.push(u)}else W("Unsupported HLS KEYFORMAT",l)}}return{drmInfos:i,keyIds:o,encrypted:e,Gg:r}}function kg(t,n,r,i,o){if(!e.crypto||!e.crypto.subtle)throw B("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Ne(2,4,4042);var a=0,s=mp(n,"IV","");if(s){var u=Hr(s.substr(2));if(16!=u.byteLength)throw new Ne(2,4,4048)}else a=kp(r.g,"EXT-X-MEDIA-SEQUENCE",0);var l={method:"AES-128",iv:u,firstMediaSequenceNumber:a,fetchKey:function(){var r,a,s,u,c;return A(function(d){if(1==d.g)return r=Ap(i(),bp(n,"URI"),o),a=ar(r,t.g.retryParameters),h(d,Vg(t,a,6),2);if(3!=d.g){if(s=d.h,!s.data||16!=s.data.byteLength)throw new Ne(2,4,4049);return u={name:"AES-CBC"},c=l,h(d,e.crypto.subtle.importKey("raw",s.data,u,!0,["decrypt"]),3)}c.cryptoKey=d.h,l.fetchKey=void 0,f(d)})}};return l}function Ag(e,t){var n=1/0,r=t.segments;if(r.length)for(var i=r.length-1;0<=i;){var o=Ep(r[i].g,"EXTINF");if(o){n=Number(o.value.split(",")[0]);break}i--}if(!(r=Ep(t.g,"EXT-X-TARGETDURATION")))throw new Ne(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(i=Ep(t.g,"EXT-X-PART-INF"))&&(e.L=Number(bp(i,"PART-TARGET"))),t=Ep(t.g,"EXT-X-SERVER-CONTROL"),e.C&&e.L?(e.m=e.jb?5*e.L<=n?Math.min(e.L,e.m):Math.min(n,e.m):Math.min(e.L,e.m),e.ha=t?Number(bp(t,"PART-HOLD-BACK")):0):(e.m=Math.min(n,e.m),n=t?t.getAttribute("HOLD-BACK"):null,e.ga=n?Number(n.value):0),e.Aa=Math.max(r,e.Aa)}function xg(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.ha)t=e.ha;else if(e.ga)t=e.ga;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.Aa*n}e.l.qg(0),e.l.qf(t),e.l.rc(!1)}function Cg(e,t,n,r,i){var o=Ep(n,"EXT-X-MAP");if(!o)return null;var s=bp(o,"URI"),u=Ap(r(),s,i);if(s=[u.toString(),mp(o,"BYTERANGE","")].join("-"),!e.W.has(s)){var l=void 0,c=null;n=a(n);for(var d=n.next();!d.done;d=n.next())d=d.value,"EXT-X-KEY"==d.name?"AES-128"==bp(d,"METHOD")&&d.id<o.id&&(l=kg(e,d,t,r,i)):"EXT-X-BYTERANGE"==d.name&&d.id<o.id&&(c=d);t=Ig(u,o,c,l),e.W.set(s,t)}return e.W.get(s)}function Ig(e,t,n,r){var i=0,o=null;return t=mp(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(i=t.split("@"),o=Number(i[0]),i=Number(i[1]),o=i+o-1,r&&(n=o+1-i)%16&&(o+=16-n%16)),new no(function(){return e},i,o,null,null,null,r)}function Mg(t,n,r,i,o,s,u,l,c){var d=i.g,h=Ep(d,"EXTINF"),f=0,p=0,g=null;i.gb.length&&!t.C&&B("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var y=null;if(!t.g.hls.ignoreManifestProgramDateTime){var v=Ep(d,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(y=ri(v.value))}var m=AT;if(Ep(d,"EXT-X-GAP")&&(m=2),!h){if(0==i.gb.length)throw new Ne(2,4,4024,"EXTINF");if(!t.C)return null}var b=[];v=!1;var w=null,_=!1,T=!1;if(t.C&&i.gb.length){f=("video/mp4"==u.mimeType||"audio/mp4"==u.mimeType)&&e.ReadableStream&&t.g.hls.allowLowLatencyByteRangeOptimization;for(var S=y,E={},k=0;k<i.gb.length;E={Gc:E.Gc,pd:E.pd},k++){var A=i.gb[k],x=0==k?r:b[b.length-1],C=0==k?o:x.endTime,I=Number(mp(A,"DURATION"))||t.L;if(I){var M=C+I,O=0,P=null;if("EXT-X-PRELOAD-HINT"==A.name?(O=(O=mp(A,"BYTERANGE-START"))?Number(O):0,(x=mp(A,"BYTERANGE-LENGTH"))?P=O+Number(x)-1:O&&(P=Number.MAX_SAFE_INTEGER)):(O=mp(A,"BYTERANGE"),P=a(Og(x,O)),O=P.next().value,P=P.next().value),E.pd=mp(A,"URI"),E.pd){x=AT,"YES"==mp(A,"GAP")&&(x=2,_=!0),E.Gc=null;var j=function(e){return function(){return null==e.Gc&&(e.Gc=Ap(l(),e.pd,s)),e.Gc}}(E);f&&0<=O&&null!=P&&(w=j,v=!0),C=new io(C,M,j,O,P,n,0,0,1/0,[],"",null,S,x,c),"EXT-X-PRELOAD-HINT"==A.name&&(C.Ve(),T=!0),"YES"!=mp(A,"INDEPENDENT")&&0<k&&C.Pd(),b.push(C),S&&(S+=I)}}}}if(h){if(0==(h=Number(h.value.split(",")[0])))return null;f=o+h}else{if(!b.length)return null;f=b[b.length-1].endTime}v&&(_||0!=b[0].Pa?(v=!1,w=null):b=[]),(h=Ep(d,"EXT-X-BYTERANGE"))?(g=a(Og(r,h.value)),p=g.next().value,g=g.next().value):b.length&&(p=b[0].Pa,g=b[b.length-1].wa),r="",h=null,"image"==u.type&&(r="1x1",u=Ep(d,"EXT-X-TILES"))&&(r=bp(u,"LAYOUT"),(u=mp(u,"DURATION"))&&(h=Number(u)));var D=null;return n=new io(o,f,function(){return w?w():(null==D&&(D=Ap(l(),i.h,s)),D||[])},p,g,n,0,0,1/0,b,r,h,y,m,c,0<b.length&&!!i.h),v&&(t.jb=!0,n.ag(),T&&n.Ve()),n}function Og(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.wa+1,r=n+t-1),[n,r]}function Pg(e,t,n,r,i,o){var s=t.segments,u=void 0,l=kp(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),c=kp(t.g,"EXT-X-MEDIA-SEQUENCE",0),d=Ep(t.g,"EXT-X-SKIP"),h=d?Number(mp(d,"SKIPPED-SEGMENTS")):0,f=c+h,p=0;Fg(e)&&r.has(f)&&(p=r.get(f)),0===p&&e.ca==kE&&0<r.size&&!r.has(f)&&(p=e.l.fb());var g=[],y=null;d=[];for(var v=0;v<s.length;v++){var m=s[v],b=0==v?p:y.endTime;f=c+h+v,Ep(m.g,"EXT-X-DISCONTINUITY")&&l++;for(var w=a(m.g),_=w.next();!_.done;_=w.next())_=_.value,"EXT-X-KEY"==_.name&&(u="AES-128"==bp(_,"METHOD")?kg(e,_,t,o,i):void 0);r.set(f,b),w=Cg(e,t,m.g,o,i),!e.C&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.C=e.i.isLowLatencyMode()),(b=Mg(e,w,y,m,b,i,n,o,u))&&((y=kp(m.g,"EXT-X-BITRATE"))?d.push({bitrate:y,duration:b.endTime-b.startTime}):d.length&&(y=d.pop(),y.duration+=b.endTime-b.startTime,d.push(y)),y=b,b.l=l,e.g.hls.ignoreManifestProgramDateTime&&null!=e.s&&f<e.s||g.push(b))}if(t=void 0,d.length&&(t=d.reduce(function(e,t){return e+t.duration},0),t=Math.round(d.reduce(function(e,t){return e+t.bitrate*t.duration},0)/t*1e3)),d=g.some(function(e){return null!=e.g}))for(n={},r=0;r<g.length;n={yc:n.yc,xc:n.xc,ld:n.ld,ub:n.ub,vc:n.vc},r++)if(n.ub=g[r],null==n.ub.g)for(n.xc=0,n.yc=r,i=function(e){return function(){var t=g[e.yc];if(t){if(null!=t.g)return t.g+e.xc;e.xc-=t.endTime-t.startTime,e.yc+=1}return null}}(n),n.vc=0,n.ld=r,o=function(e){return function(){var t=g[e.ld];if(t){if(t!=e.ub&&(e.vc+=t.endTime-t.startTime),null!=t.g)return t.g+e.vc;--e.ld}return null}}(n);null==n.ub.g;)n.ub.g=o(),null==n.ub.g&&(n.ub.g=i());if(d)for(n=a(g),r=n.next();!r.done;r=n.next())for(i=r.value,r=i.g,i=a(i.i),o=i.next();!o.done;o=i.next())o=o.value,o.g=r,r+=o.endTime-o.startTime;if(e=e.V,d&&1/0!=e)for(d=a(g),r=d.next();!r.done;r=d.next())r.value.vf(e);return{segments:g,bandwidth:t}}function jg(e,t){if(e==G_){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":"mjpg"==t?"application/mp4":null:"image/jpeg"}function Dg(e){return e==G_?"text/vtt":_E[e].mp4}function Rg(e,t,n,r,i,o){var a,s,u,l,c,d,f,g,m,b,w,_,T;return A(function(S){switch(S.g){case 1:return a=dT,(s=Math.trunc((r.segments.length-1)/2),u=Ap(o(),r.segments[s].h,i),l=new Ae(u[0]),c=l.Fa.split(".").pop(),d=_E[t],(f=d[c])||(f=wE[c])||(f=jg(t,n)))?S.return(f):(m=1,b=ar(u,e.g.retryParameters),p(S,2),b.method="HEAD",h(S,Vg(e,b,a,{type:m}),4));case 4:w=S.h,g=w.headers["content-type"],y(S,3);break;case 2:if(!(_=v(S))||1002!=_.code&&1001!=_.code){S.B(3);break}return b.method="GET",h(S,Vg(e,b,a,{type:m}),6);case 6:T=S.h,g=T.headers["content-type"];case 3:return g?S.return(g.split(";")[0]):S.return(Dg(t))}})}function Lg(e,t,n,r,i,o){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=i||void 0,e.videoLayout=o||void 0)}function Ng(e,t,n){return Vg(e,ar(t,e.g.retryParameters),0,{type:n?2:3})}function Ug(e){var t,n,r,i,o,a;A(function(s){switch(s.g){case 1:return K("Updating manifest..."),e.i?(p(s,2),t=Date.now(),h(s,e.update(),4)):s.return();case 4:n=Date.now(),Fg(e)&&(r=(n-t)/1e3,e.Ha.sample(1,r),i=e.m,o=Math.max(0,i-L(e.Ha)),e.u.U(o)),y(s,3);break;case 2:if(a=v(s),!e.i)return s.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(a),s.return();a.severity=1,e.i.onError(a),e.u.U(.1);case 3:if(!e.i)return s.return();e.i.onManifestUpdated(),f(s)}})}function Fg(e){return e.ca!=SE}function Bg(e,t){e.ca=t,e.l&&e.l.rc(!Fg(e)),Fg(e)||e.u.stop()}function Vg(e,t,n,r){if(!e.N)throw new Ne(2,7,7001);return t=e.i.networkingEngine.request(n,t,r),rr(e.N,t),t.promise}function Hg(e){var t=0,n=de(e),r=n.getUint32(t,!0);if(t+=4,r!=e.byteLength)return W("PlayReady Object with invalid length encountered."),[];e:{for(e=t+2,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,0!=(1&i)||i+e>n.byteLength){W("Malformed MS PRO object"),n=[];break e}var o=le(n,e,i);t.push({type:r,value:o}),e+=i}n=t}return n}function Wg(e){if(e=Kg(e))e:{e=a(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next())if(t=zr(t.value,"LA_URL")){e=t.textContent;break e}e=""}else e="";return e}function Kg(e){return e=Vr(e.textContent),(e=Hg(e).filter(function(e){return e.type===xE})[0])?(e=Tr(e.value,!0),(e=hi(e,"WRMHEADER"))?e:null):null}function qg(e){if(!IE){IE=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);VE=ty("ftyp",t,r,t,n),t=ty("dref",HE),WE=ty("dinf",t)}this.g=e}function Gg(e){for(var t=[],n=a(e.g),r=n.next();!r.done;r=n.next()){var i=t,o=i.push,u=r.value;r=ty;var l=u.id+1,c=u.stream.width||0,d=u.stream.height||0;"audio"==u.type&&(d=c=0);var h=u.duration*u.timescale,f=Math.floor(h/(ME+1));switch(h=Math.floor(h%(ME+1)),l=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(s(Zg(l,4)),[0,0,0,0],s(Zg(f,4)),s(Zg(h,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],s(Zg(c,2)),[0,0],s(Zg(d,2)),[0,0])),l=ty("tkhd",l),c=ty,f=u.duration*u.timescale,d=Math.floor(f/(ME+1)),f=Math.floor(f%(ME+1)),h=u.stream.language,h=h.charCodeAt(0)-96<<10|h.charCodeAt(1)-96<<5|h.charCodeAt(2)-96,d=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(s(Zg(u.timescale,4)),s(Zg(d,4)),s(Zg(f,4)),s(Zg(h,2)),[0,0])),d=ty("mdhd",d),f=u,h=new Uint8Array([]),f.type){case"video":h=PE;break;case"audio":h=jE}f=ty("hdlr",h);e:{switch(u.type){case"video":u=ty("minf",ty("vmhd",UE),WE,zg(u));break e;case"audio":u=ty("minf",ty("smhd",FE),WE,zg(u));break e}u=new Uint8Array([])}u=c("mdia",d,f,u),r=r("trak",l,u),o.call(i,r)}for(t=Kr.apply(Ur,s(t)),o=e.g[0],n=ty,r=o.duration*o.timescale,i=Math.floor(r/(ME+1)),r=Math.floor(r%(ME+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(s(Zg(o.timescale,4)),s(Zg(i,4)),s(Zg(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),i=ty("mvhd",i),r=[],e=a(e.g),c=e.next();!c.done;c=e.next())u=r,l=u.push,c=new Uint8Array([0,0,0,0].concat(s(Zg(c.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),c=ty("trex",c),l.call(u,c);if(e=Kr.apply(Ur,s(r)),e=ty("mvex",e),r=[],o.encrypted){for(o=a(o.stream.drmInfos),u=o.next();!u.done;u=o.next())if(u=u.value,u.initData)for(u=a(u.initData),l=u.next();!l.done;l=u.next())r.push(l.value.initData);o=Kr.apply(Ur,s(r))}else o=new Uint8Array([]);return e=n("moov",i,t,e,o),t=new Uint8Array(VE.byteLength+e.byteLength),t.set(VE),t.set(e,VE.byteLength),t}function zg(e){var t=ty,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.ma.byteLength)var i=ty("avcC",e.ma);else{i=ty;for(var o=7,a=[],u=[],l=0,c=0,d=0,h=0;h<e.Ra.length;h++){var f=ey(e.Ra[h]);switch(31&f[0]){case 7:a.push(f),o+=f.length+2;break;case 8:u.push(f),o+=f.length+2}}for(0<a.length&&(l=a[0][1],d=a[0][2],c=a[0][3]),o=new Uint8Array(o),h=0,o[h++]=1,o[h++]=l,o[h++]=d,o[h++]=c,o[h++]=255,o[h++]=224|a.length,l=0;l<a.length;l++)o[h++]=(65280&a[l].length)>>8,o[h++]=255&a[l].length,o.set(a[l],h),h+=a[l].length;for(o[h++]=u.length,a=0;a<u.length;a++)o[h++]=(65280&u[a].length)>>8,o[h++]=255&u[a].length,o.set(u[a],h),h+=u[a].length;i=i("avcC",o)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(s(Zg(n,2)),s(Zg(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",u=Xg(e),a=new Uint8Array([]),e.encrypted&&(a=Jg(e),r="encv"),n=ty(r,n,i,u,a)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,i=e.stream.height||0,n=new Uint8Array([]),0<e.ma.byteLength&&(n=ty("hvcC",e.ma)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(s(Zg(r,2)),s(Zg(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="hvc1",u=Xg(e),a=new Uint8Array([]),e.encrypted&&(a=Jg(e),i="encv"),n=ty(i,r,n,u,a));break;case"audio":e.codecs.includes("mp3")?e=ty(".mp3",Yg(e)):e.codecs.includes("ac-3")?(n=ty("dac3",e.da),r="ac-3",i=new Uint8Array([]),e.encrypted&&(i=Jg(e),r="enca"),e=ty(r,Yg(e),n,i)):e.codecs.includes("ec-3")?(n=ty("dec3",e.da),r="ec-3",i=new Uint8Array([]),e.encrypted&&(i=Jg(e),r="enca"),e=ty(r,Yg(e),n,i)):(0<e.da.byteLength?n=ty("esds",e.da):(n=ty,r=e.id+1,i=e.stream.channelsCount||2,a=e.stream.audioSamplingRate||44100,l=Be("audio",e.codecs.split(",")),c={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},u=c[a],"mp4a.40.5"!==l&&"mp4a.40.29"!==l||(u=c[2*a]),a=parseInt(l.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(s(Zg(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,a<<3|u>>>1,u<<7|i<<3,6,1,2])),n=n("esds",r)),r="mp4a",i=new Uint8Array([]),e.encrypted&&(i=Jg(e),r="enca"),e=ty(r,Yg(e),n,i)),n=e}return e=ty("stsd",BE,n),t("stbl",e,ty("stts",DE),ty("stsc",RE),ty("stsz",NE),ty("stco",LE))}function Xg(e){if(!e.ra&&!e.ua)return new Uint8Array([]);var t=e.ua;return e=new Uint8Array([].concat(s(Zg(e.ra,4)),s(Zg(t,4)))),ty("pasp",e)}function Yg(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(s(Zg(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Jg(e){for(var t=ty,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,i=0;i<n.length;i+=1)r|=n.charCodeAt(i)<<8*(n.length-i-1);n=new Uint8Array([].concat(s(Zg(r,4)))),n=ty("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=ty("schm",r),i=ty;var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=a(e.stream.drmInfos);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&u.keyIds&&u.keyIds.size){u=a(u.keyIds);for(var l=u.next();!l.done;l=u.next())o=ey(l.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),o=ty("tenc",e,o),t("sinf",n,r,i("schi",o))}function Qg(e){var t=[];e=a(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,i=r.apply,o=ty,u=new Uint8Array([0,0,0,0].concat(s(Zg(n.data?n.data.hb:0,4))));u=ty("mfhd",u);var l,c=n.data?n.data.Na:[],d=new Uint8Array(4+c.length);for(l=0;l<c.length;l++){var h=c[l].flags;d[l+4]=h.Ja<<4|h.La<<2|h.Ka}c=ty("sdtp",d);var f=c.length+92;d=ty,l=new Uint8Array([0,0,0,58].concat(s(Zg(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),l=ty("tfhd",l),h=n.data?n.data.baseMediaDecodeTime:0;var p=Math.floor(h%(ME+1));h=new Uint8Array([1,0,0,0].concat(s(Zg(Math.floor(h/(ME+1)),4)),s(Zg(p,4)))),h=ty("tfdt",h);var g=f;f=n.data?n.data.Na:[],p=f.length;var y=12+16*p,v=new Uint8Array(y);for(g+=8+y,v.set(["video"===n.type?1:0,0,15,1].concat(s(Zg(p,4)),s(Zg(g,4))),0),g=0;g<p;g++){var m=f[g];y=Zg(m.duration,4);var b=Zg(m.size,4),w=m.flags;m=Zg(m.Ta,4),v.set([].concat(s(y),s(b),[w.Ua<<2|w.Ja,w.La<<6|w.Ka<<4|w.Va,61440&w.Ia,15&w.Ia],s(m)),12+16*g)}f=ty("trun",v),c=d("traf",l,h,f,c),o=o("moof",u,c),i.call(r,t,[o,$g(n)])}return Kr.apply(Ur,s(t))}function $g(e){return e=(e.data?e.data.Na:[]).map(function(e){return e.data}),e=Kr.apply(Ur,s(e)),ty("mdat",e)}function Zg(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function ey(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function ty(e){var t=x.apply(1,arguments),n=OE[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],OE[e]=n);for(var r=8,i=t.length-1;0<=i;i--)r+=t[i].byteLength;for(i=new Uint8Array(r),i[0]=r>>24&255,i[1]=r>>16&255,i[2]=r>>8&255,i[3]=255&r,i.set(n,4),n=0,r=8;n<t.length;n++)i.set(t[n],r),r+=t[n].byteLength;return i}function ny(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.A=new R(5),this.o=new Tt(function(){ry(e)}),this.u=new nr,this.m=new Map}function ry(e){var t;A(function(n){switch(n.g){case 1:return K("Updating manifest..."),p(n,2),h(n,iy(e),4);case 4:y(n,3);break;case 2:t=v(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();f(n)}})}function iy(e){var t,n,r,i,o,u,l;return A(function(c){if(1==c.g)return t=ar(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),i=n.request(0,t,{type:5}),rr(e.u,i),h(c,i.promise,2);if(o=c.h,!e.h)return c.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var d=o.uri,p=fi(o.data,"SmoothStreamingMedia");if(!p)throw new Ne(2,4,4046,d);if((d=e.g.mss.manifestPreprocessor)&&d(p),e.i||(e.i=new xa(null,0)),d=ni(p,"IsLive",ci,!1))throw new Ne(2,4,4047);e.i.rc(!d);var g=ni(p,"TimeScale",ui,1e7),y=ni(p,"DVRWindowLength",ui);d&&(0===y||isNaN(y))&&(y=1/0);var v=ni(p,"CanSeek",ci,!1);0===y&&v&&(y=1/0),v=null,y&&0<y&&(v=y/g),d&&!isNaN(e.g.availabilityWindowOverride)&&(v=e.g.availabilityWindowOverride),null==v&&(v=1/0),e.i.Yd(v),y=ni(p,"Duration",ui,1/0),d||e.i.Oa(y/g),d={variants:[],textStreams:[],timescale:g,duration:y/g},v=Yr(p,"Protection");var m;for(g=e.g.mss.keySystemsBySystemId,y=[],v=a(v),m=v.next();!m.done;m=v.next())y=y.concat(Yr(m.value,"ProtectionHeader"));if(y.length){for(v=[],m=0;m<y.length;m++){var b=y[m],w=b.getAttribute("SystemID").toLowerCase(),_=g[w];if(_){var T=Kg(b);if(T)e:{T=a(T.getElementsByTagName("DATA"));for(var S=T.next();!S.done;S=T.next())if(S=zr(S.value,"KID")){T=Vr(S.textContent),T=new Uint8Array([T[3],T[2],T[1],T[0],T[5],T[4],T[7],T[6]].concat(s(T.slice(8)))),T=Wr(T);break e}T=null}else T=null;S=Vr(b.textContent),w=Hr(w.replace(/-/g,"")),w=[{initData:Gr(S,w,new Set,0),initDataType:"cenc",keyId:T}],w=Fe(_,w),T&&w.keyIds.add(T),(_=CE.get(_))&&(w.licenseServerUri=_(b)),v.push(w)}}g=v}else g=[];for(m=g,v=[],g=[],y=[],p=Yr(p,"StreamIndex"),p=a(p),b=p.next();!b.done;b=p.next()){b=b.value,_=Yr(b,"QualityLevel"),w=d.timescale,T=d.duration,S=Yr(b,"c");for(var E=[],k=0,A=0;A<S.length;++A){var x=S[A],C=S[A+1],I=ni(x,"t",ui),M=ni(x,"d",ui),O=ni(x,"r",ai);if(!M){W('"c" element must have a duration:','ignoring the remaining "c" elements.',x);break}if(I=null!=I?I:k,0>(O=O||0))if(C){if(null==(C=ni(C,"t",ui))){W('An "c" element cannot have a negative repeat','if the next "c" element does not have a valid start time:','ignoring the remaining "c" elements.',x);break}if(I>=C){W('An "c" element cannot have a negative repeatif its start ','time exceeds the next "c" element\'s start time:','ignoring the remaining "c" elements.',x);break}O=Math.ceil((C-I)/M)-1}else{if(1/0==T){W('The last "c" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "c" element.',x);break}if(I/w>=T){W('The last "c" element cannot have a negative repeat',"if its start time exceeds the duration:",'igoring the last "c" element.',x);break}O=Math.ceil((T*w-I)/M)-1}for(x=0;x<=O;++x)k=I+M,E.push({start:I/w,end:k/w,Bf:I}),I=k}for(w=E,_=a(_),T=_.next();!T.done;T=_.next())(T=oy(e,b,T.value,w,m,d))&&("audio"!=T.type||e.g.disableAudio?"video"!=T.type||e.g.disableVideo?T.type!=G_||e.g.disableText||y.push(T):g.push(T):v.push(T))}for(p=[],v=a(0<v.length?v:[null]),m=v.next();!m.done;m=v.next())for(m=m.value,b=a(0<g.length?g:[null]),T=b.next();!T.done;T=b.next())_=p,w=_.push,T=T.value,S=0,m&&m.bandwidth&&0<m.bandwidth&&(S+=m.bandwidth),T&&T.bandwidth&&0<T.bandwidth&&(S+=T.bandwidth),T={id:e.s++,language:m?m.language:"und",disabledUntilTime:0,primary:!!m&&m.primary||!!T&&T.primary,audio:m,video:T,bandwidth:S,label:null,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},w.call(_,T);d.variants=p,d.textStreams=y,e.j?(e.j.variants=d.variants,e.j.textStreams=d.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:d.variants,textStreams:d.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Od()),Promise.resolve(),u=Date.now(),l=(u-r)/1e3,e.A.sample(1,l),f(c)})}function oy(e,t,n,r,i,o){var a=t.getAttribute("Type");if("audio"!==a&&"video"!==a&&"text"!==a)return B("Ignoring unrecognized type:",a),null;var s=t.getAttribute("Language"),u=e.s++,l=ni(n,"Bitrate",si),c=ni(n,"MaxWidth",si),d=ni(n,"MaxHeight",si),h=ni(n,"Channels",si),f=ni(n,"SamplingRate",si),p=o.duration;r.length&&(p=r[r.length-1].end-r[0].start);var g=e.i.getDuration();e.i.Oa(Math.min(p,g));var y={id:u,originalId:t.getAttribute("Name")||String(u),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:c||void 0,height:d||void 0,kind:"",encrypted:0<i.length,drmInfos:i,keyIds:new Set,language:pt(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:h,audioChannelConfig:null,audioSamplingRate:f,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:p,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((i=t.getAttribute("Subtype"))&&((i=qE[i])&&y.roles.push(i),"main"===i&&(y.primary=!0)),i=n.getAttribute("FourCC"),null!==i&&""!==i||(i=t.getAttribute("FourCC")),!i)if("audio"===a)i="AAC";else if("video"===a)return B('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!KE.includes(i.toUpperCase()))return B("Codec not supported:",i),null;switch(n=ay(n,a,i,y),y.mssPrivateData.codecPrivateData=n,a){case"audio":if(!n)return B("Quality unsupported without CodecPrivateData",a),null;y.type="audio",y.mimeType="mss/audio/mp4",y.codecs=sy(i,n);break;case"video":if(!n)return B("Quality unsupported without CodecPrivateData",a),null;y.type="video",y.mimeType="mss/video/mp4",y.codecs=uy(n);break;case"text":y.type=G_,y.mimeType="application/mp4",("TTML"===i||"DFXP"===i)&&(y.codecs="stpp")}return y.fullMimeTypes.add(We(y.mimeType,y.codecs)),y.createSegmentIndex=function(){if(y.segmentIndex)return Promise.resolve();if(e.m.has(y.id))var n=e.m.get(y.id);else n=[],"video"==y.type&&(n=y.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n={id:y.id,type:y.type,codecs:y.codecs,encrypted:y.encrypted,timescale:y.mssPrivateData.timescale,duration:y.mssPrivateData.duration,Ra:n,da:new Uint8Array([]),ma:new Uint8Array([]),ra:0,ua:0,data:null,stream:y},n=Gg(new qg([n])),e.m.set(y.id,n);return n=ly(e,new no(function(){return[]},0,null,null,void 0,n),y,t,r),y.segmentIndex=new Xa(n),Promise.resolve()},y.closeSegmentIndex=function(){y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null)},y}function ay(e,t,n,r){if(e=e.getAttribute("CodecPrivateData"))return e;if("audio"!==t)return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=i[e],"AACH"===n?(n=new Uint8Array(4),e=i[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function sy(e,t){var n=0;return"AACH"===e&&(n=5),t?0===n&&(n=(248&parseInt(t.substr(0,2),16))>>3):(n=2,"AACH"===e&&(n=5)),"mp4a.40."+n}function uy(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function ly(e,t,n,r,i){var o=r.getAttribute("Url").replace("{bitrate}",String(n.bandwidth));r=[];var s={};i=a(i);for(var u=i.next();!u.done;s={Fc:s.Fc},u=i.next())s.Fc=u.value,r.push(new io(s.Fc.start,s.Fc.end,function(t){return function(){return Ue(e.l,[o.replace("{start time}",String(t.Fc.Bf))])}}(s),0,null,t,0,0,n.mssPrivateData.duration));return r}function cy(e,t,n,r,i,o){if(200<=n&&299>=n&&202!=n)return{uri:i||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=Sr(t)}catch(e){}throw q("HTTP error text:",i),new Ne(401==n||403==n?2:1,1,1001,r,n,i,e,o)}function dy(){}function hy(e,t,n,r,i){var o=new YE;mr(t.headers).forEach(function(e,t){o.append(t,e)});var a=new zE,s={Hf:!1,wg:!1};if(e=fy(e,n,{body:t.body||void 0,headers:o,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,r,i,t.streamDataCallback),e=new Gn(e,function(){return s.Hf=!0,a.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var u=new Tt(function(){s.wg=!0,a.abort()});u.U(t/1e3),e.finally(function(){u.stop()})}return e}function fy(e,t,n,r,i,o,a){var s,u,l,c,d,g,m,b,w,_,T,S,E;return A(function(k){switch(k.g){case 1:return s=GE,u=XE,g=d=0,m=Date.now(),p(k,2),h(k,s(e,n),4);case 4:if(l=k.h,o(py(l.headers)),"HEAD"==n.method){k.B(5);break}return b=l.clone().body.getReader(),_=(w=l.headers.get("Content-Length"))?parseInt(w,10):0,T=function(e){function t(){var n,r,o;return A(function(s){switch(s.g){case 1:return p(s,2),h(s,b.read(),4);case 4:n=s.h,y(s,3);break;case 2:return r=v(s),G("error reading from stream",r.message),s.return();case 3:if(n.done){s.B(5);break}if(d+=n.value.byteLength,!a){s.B(5);break}return h(s,a(n.value),5);case 5:o=Date.now(),(100<o-m||n.done)&&(i(o-m,d-g,_-d),g=d,m=o),n.done?e.close():(e.enqueue(n.value),t()),f(s)}})}t()},new u({start:T}),h(k,l.arrayBuffer(),6);case 6:c=k.h;case 5:y(k,3);break;case 2:if(S=v(k),r.Hf)throw new Ne(1,1,7001,e,t);if(r.wg)throw new Ne(1,1,1003,e,t);throw new Ne(1,1,1002,e,S,t);case 3:return E=py(l.headers),k.return(cy(E,c,l.status,e,l.url,t))}})}function py(e){var t={};return e.forEach(function(e,n){t[n.trim()]=e}),t}function gy(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!!e.Response&&(!!new Response("").body&&!(!e.fetch||!e.AbortController))}function yy(){}function vy(e,t,n,r,i){var o=new JE,a=Date.now(),s=0;return new Gn(new Promise(function(u,l){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials,o.onabort=function(){l(new Ne(1,1,7001,e,n))};var c=!1;o.onreadystatechange=function(){if(2==o.readyState&&!c){var e=my(o);i(e),c=!0}},o.onload=function(){var t=my(o),r=o.response;try{var i=cy(t,r,o.status,e,o.responseURL,n);u(i)}catch(e){l(e)}},o.onerror=function(t){l(new Ne(1,1,1002,e,t,n))},o.ontimeout=function(){l(new Ne(1,1,1003,e,n))},o.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(r(t-a,e.loaded-s,e.total-e.loaded),s=e.loaded,a=t)};for(var d in t.headers)o.setRequestHeader(d.toLowerCase(),t.headers[d]);o.send(t.body)}),function(){return o.abort(),Promise.resolve()})}function my(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}function by(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function wy(e){return e.Z().map(function(e){return"{"+encodeURI(e)+"}"}).join("")+":"+e.Pa+":"+e.wa}function _y(e,t){return vs(e.g.Z(),e.g.Pa,e.g.wa,t.streaming.retryParameters)}function Ty(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Sy(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function Ey(e){var t=this;this.o=e,this.j=new Map,this.i=new fr(function(){return Ay(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new Ty}function ky(e,t,n){e.m=t,e.l=n}function Ay(e){var t=e.h.map(function(e){return e()});return e.h=[],Promise.all(t)}function xy(e,t,n,r,i,o){pr(e.i);var a=(e.j.get(t)||Promise.resolve()).then(function(){var t,a,s,u,l,c,d;return A(function(f){if(1==f.g)return h(f,Iy(e,n),2);if(t=f.h,e.i.g)throw new Ne(2,9,7001);if(i)for(u in a=le(t),s=new qr(a),s.data)l=Number(u),c=s.data[l],d=s.g[l],e.l(c,d);e.g.close(r,t.byteLength);var p=e.g;return e.m(0==p.i?0:p.j/p.i,e.g.h),f.return(o(t))})});e.j.set(t,a)}function Cy(e){return A(function(t){return 1==t.g?h(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function Iy(e,t){var n,r,i,o;return A(function(a){return 1==a.g?(n=dT,r=e.o.request(n,t),i=function(){return r.abort()},e.h.push(i),h(a,r.promise,2)):(o=a.h,ye(e.h,i),a.return(o.data))})}function My(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new qn,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function Oy(e,t){return new Promise(function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(){var e;return A(function(r){if(1==r.g)return null==i.result?(n(),r.return()):(e=i.result,h(r,t(e.key,e.value,e),2));e.continue(),f(r)})}})}function Py(e){this.h=e,this.g=[]}function jy(e,t){return Dy(e,t,"readwrite")}function Dy(e,t,n){n=e.h.transaction([t],n);var r=new My(n,t);return e.g.push(r),r.promise().then(function(){ye(e.g,r)},function(){ye(e.g,r)}),r}function Ry(e,t,n){this.h=new Py(e),this.i=t,this.g=n}function Ly(e,t,n){e=jy(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}function Ny(e){return Promise.reject(new Ne(2,9,9011,"Cannot add new value to "+e))}function Uy(e,t,n,r){e=jy(e.h,t),t=e.store();var i={};n=a(n);for(var o=n.next();!o.done;i={od:i.od},o=n.next())i.od=o.value,t.delete(i.od).onsuccess=function(e){return function(){return r(e.od)}}(i);return e.promise()}function Fy(e,t,n){var r,i,o,s,u,l,c;return A(function(d){if(1==d.g){for(r=Dy(e.h,t,"readonly"),i=r.store(),o={},s=[],u={},l=a(n),c=l.next();!c.done;u={Cc:u.Cc,Ac:u.Ac},c=l.next())u.Ac=c.value,u.Cc=i.get(u.Ac),u.Cc.onsuccess=function(e){return function(){void 0==e.Cc.result&&s.push(e.Ac),o[e.Ac]=e.Cc.result}}(u);return h(d,r.promise(),2)}if(s.length)throw new Ne(2,9,9012,"Could not find values for "+s);return d.return(n.map(function(e){return o[e]}))})}function By(e){this.g=new Py(e)}function Vy(){this.g=new Map}function Hy(e){var t=null;if(e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){e.hasFixedKeySpace()||t||(t={path:{Wa:n,va:r},va:e})})}),t)return t;throw new Ne(2,9,9013,"Could not find a cell that supports add-operations")}function Wy(e,t){e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){t({Wa:n,va:r},e)})})}function Ky(e,t,n){if(!(e=e.g.get(t)))throw new Ne(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new Ne(2,9,9013,"Could not find cell with name "+n);return t}function qy(e,t){e.g.forEach(function(e){t(e.getEmeSessionCell())})}function Gy(e){var t=Array.from(e.g.keys());if(!t.length)throw new Ne(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function zy(e){var t,n,r;return A(function(i){return 1==i.g?(t=Array.from(e.g.values()),n=0<t.length,n||(r=QE,r.forEach(function(e){(e=e())&&t.push(e)})),h(i,Promise.all(t.map(function(e){return e.erase()})),2)):n?i.B(0):h(i,Promise.all(t.map(function(e){return e.destroy()})),0)})}function Xy(e,t){QE.set(e,t)}function Yy(){Ry.apply(this,arguments)}function Jy(e,t){Zy(e);for(var n=a(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(n){return Qy(n,e.startTime,t)})}function Qy(e,t,n){var r=e.initSegmentUri?$y(e.initSegmentUri):null,i=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){var n=$y(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:o,timestampOffset:i,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function $y(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Ne(2,9,9004,"Could not parse uri "+e)}function Zy(e){var t=e.streams.filter(function(e){return"audio"==e.contentType});if(e=e.streams.filter(function(e){return"video"==e.contentType}),!t.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){for(var n=a(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=a(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){q("Found video-only content. Creating variants for video.");var i=n++,o=a(e);for(r=o.next();!r.done;r=o.next())r.value.variantIds.push(i)}if(!e.length&&t.length)for(q("Found audio-only content. Creating variants for audio."),i=n++,o=a(t),r=o.next();!r.done;r=o.next())r.value.variantIds.push(i);if(e.length&&t.length)for(q("Found audio-video content. Creating variants."),t=a(t),r=t.next();!r.done;r=t.next())for(r=r.value,i=a(e),o=i.next();!o.done;o=i.next()){o=o.value;var s=n++;r.variantIds.push(s),o.variantIds.push(s)}}}function ev(){Ry.apply(this,arguments)}function tv(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function nv(){Ry.apply(this,arguments)}function rv(){this.m=this.j=this.i=this.h=this.g=this.l=null}function iv(){var t=new qn,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(e){W("Deleting","shaka_offline_db","is being blocked",e)},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Ne(2,9,9001,n.error)),e.preventDefault()},t}function ov(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}function av(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new ov(t,n,r,Number(e[4])):null}function sv(e,t){this.h=e,this.g=t}function uv(e,t){var n=new xa(null,0);n.Oa(t.duration);var r=t.streams.filter(function(e){return"audio"==e.type}),i=t.streams.filter(function(e){return"video"==e.type});r=lv(e,r,i,n),i=t.streams.filter(function(e){return e.type==G_}).map(function(t){return cv(e,t,n)});var o=t.streams.filter(function(e){return"image"==e.type}).map(function(t){return cv(e,t,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=a(r.values()),l=u.next();!l.done;l=u.next())l=l.value,l.audio&&l.audio.encrypted&&(l.audio.drmInfos=s),l.video&&l.video.encrypted&&(l.video.drmInfos=s);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function lv(e,t,n,r){for(var i=new Set,o=a(t),s=o.next();!s.done;s=o.next()){var u=a(s.value.variantIds);for(s=u.next();!s.done;s=u.next())i.add(s.value)}for(o=a(n),s=o.next();!s.done;s=o.next())for(u=a(s.value.variantIds),s=u.next();!s.done;s=u.next())i.add(s.value);for(o=new Map,i=a(i),s=i.next();!s.done;s=i.next())s=s.value,o.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,label:null,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=a(t),i=t.next();!i.done;i=t.next())for(i=i.value,s=cv(e,i,r),u=a(i.variantIds),i=u.next();!i.done;i=u.next())i=o.get(i.value),i.language=s.language,i.primary=i.primary||s.primary,i.audio=s;for(n=a(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=cv(e,i,r),s=a(i.variantIds),i=s.next();!i.done;i=s.next())i=o.get(i.value),i.primary=i.primary||t.primary,i.video=t;return o}function cv(e,t,n){var r=t.segments.map(function(n){return dv(e,n,t)});return n.bd(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Xa(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioChannelConfig:null,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([We(t.mimeType,t.codecs)])}}function dv(e,t,n){var r=new ov("segment",e.h,e.g,t.dataKey);return e=new io(t.startTime,t.endTime,function(){return[r.toString()]},0,null,null!=t.initSegmentKey?hv(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function hv(e,t){var n=new ov("segment",e.h,e.g,t);return new no(function(){return[n.toString()]},0,null)}function fv(){this.g=null}function pv(){}function gv(e){var t=av(e);return t&&"manifest"==t.g?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Yn(e)):e=t&&"segment"==t.g?yv(t.key(),t):zn(new Ne(2,1,9004,e)),e}function yv(e,t){var n=new Vy;return Yn(void 0).oa(function(){return n.init()}).oa(function(){return Ky(n,t.Wa(),t.va())}).oa(function(e){return e.getSegments([t.key()])}).oa(function(e){return{uri:t,data:e[0].data,headers:{}}}).finally(function(){return n.destroy()})}function vv(e,t,n){var r,i,o,s,u,l;return A(function(c){switch(c.g){case 1:r=[];for(var d=[],f=a(n),p=f.next();!p.done;p=f.next()){p=p.value;for(var g=!1,y=a(d),v=y.next();!v.done;v=y.next())if(v=v.value,bv(v.info,p)){v.sessionIds.push(p.sessionId),g=!0;break}g||d.push({info:p,sessionIds:[p.sessionId]})}i=a(d),o=i.next();case 2:if(o.done){c.B(4);break}return s=o.value,u=mv(e,t,s),h(c,u,5);case 5:l=c.h,r=r.concat(l),o=i.next(),c.B(2);break;case 4:return c.return(r)}})}function mv(e,t,n){var r,i,o;return A(function(a){switch(a.g){case 1:return r=new pi({Ub:t,onError:function(){},Vd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),p(a,2),r.configure(e),h(a,mi(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:y(a,3);break;case 2:return i=v(a),W("Error initializing EME",i),h(a,r.destroy(),5);case 5:return a.return([]);case 3:return o=[],h(a,Promise.all(n.sessionIds.map(function(e){var t;return A(function(n){return 1==n.g?(p(n,2),h(n,Si(r,e),4)):2!=n.g?(o.push(e),y(n,0)):(t=v(n),W("Error deleting offline session",t),void f(n))})})),6);case 6:return h(a,r.destroy(),7);case 7:return a.return(o)}})}function bv(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&ve(e.audioCapabilities,t.audioCapabilities,n)&&ve(e.videoCapabilities,t.videoCapabilities,n)}function wv(e,t,n){var r=t.presentationTimeline.getDuration();return t=Tv(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function _v(e,t){var n=uv(new sv(e.Wa(),e.va()),t),r=t.appMetadata||{};return n=Tv(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function Tv(e){var t=[],n=hn(e.variants);n=a(n);for(var r=n.next();!r.done;r=n.next())t.push(rn(r.value));for(e=a(e.textStreams),n=e.next();!n.done;n=e.next())t.push(on(n.value));return t}function Sv(){this.g={}}function Ev(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,o=r.bandwidth||t.bandwidth-i;0>=o&&(W("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),o=t.bandwidth),e.g[n.id]=i,e.g[r.id]=o}}function kv(e,t){e.g[t.id]=t.bandwidth||2048}function Av(e,t){return e=e.g[t],null==e&&(e=0,H("Asking for bitrate of stream not given to the estimator")),0==e&&W("Using bitrate of 0, this stream won't affect progress"),e}function xv(e){var t=this;if(e&&e.constructor!=Ju)throw new Ne(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Nb()):(this.h=Vu(),this.g=new ir),this.i=[],this.j=[];var n=!e;this.l=new fr(function(){var e,r,i,o,s;return A(function(u){switch(u.g){case 1:return h(u,Promise.all(t.j.map(function(e){return Ay(e)})),2);case 2:for(e=function(){},r=[],i=a(t.i),o=i.next();!o.done;o=i.next())s=o.value,r.push(s.then(e,e));return h(u,Promise.all(r),3);case 3:if(!n){u.B(4);break}return h(u,t.g.destroy(),4);case 4:t.h=null,t.g=null,f(u)}})})}function Cv(){if(St())e:{for(var e=a(QE.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Iv(e,t,n,r,i,o){var a,s,u,l,c,d,f,g,y,w,_,T,S,E;return A(function(k){switch(k.g){case 1:return Jv(),s=a=null,u=new Vy,d=c=l=null,p(k,2,3),h(k,r(),5);case 5:return a=k.h,h(k,Kv(e,t,a,i),6);case 6:if(f=k.h,Yv(e),!(g=!f.presentationTimeline.R()&&!f.presentationTimeline.Rb()))throw new Ne(2,9,9005,t);return h(k,qv(e,f,function(e){d=d||e},i),7);case 7:if(s=k.h,Yv(e),d)throw d;return h(k,jv(f,s,i),8);case 8:return h(k,u.init(),9);case 9:return Yv(e),h(k,Hy(u),10);case 10:return l=k.h,Yv(e),y=Dv(s,f,t,n,i,o),w=y.Eh,_=y.xf,h(k,l.va.addManifests([w]),11);case 11:if(T=k.h,Yv(e),c=T[0],Yv(e),d)throw d;return h(k,Mv(e,_,c,w,o,i,l.va,f,s),12);case 12:return Yv(e),Nv(f,w,s,i),h(k,l.va.updateManifest(c,w),13);case 13:return Yv(e),S=new ov("manifest",l.path.Wa,l.path.va,c),k.return(_v(S,w));case 3:return m(k),h(k,u.destroy(),14);case 14:if(!a){k.B(15);break}return h(k,a.stop(),15);case 15:if(!s){k.B(17);break}return h(k,s.destroy(),17);case 17:b(k,0);break;case 2:if(E=v(k),null==c){k.B(19);break}return h(k,Ov(c),19);case 19:throw d||E}})}function Mv(e,t,n,r,i,o,s,u,l){var c,d,g,m,b,w,_,T,S,E;return A(function(k){switch(k.g){case 1:if(c={},d=0,g=function(t,p){var g,y,v,m,b,w,_;return A(function(T){if(1==T.g){for(g={},y=a(t),v=y.next();!v.done;g={Gb:g.Gb},v=y.next())g.Gb=v.value,m=_y(g.Gb,o),b=g.Gb.i,w=g.Gb.h,_=function(t){return function(n){var r,i,o;return A(function(a){if(1==a.g)return h(a,s.addSegments([{data:n}]),2);r=a.h,Yv(e),i=t.Gb.g,o=wy(i),c[o]=r[0],d+=n.byteLength,f(a)})}}(g),xy(i,g.Gb.groupId,m,b,w,_);return h(T,Cy(i),2)}return p?(Yv(e),Nv(u,r,l,o),h(T,s.updateManifest(n,r),0)):T.B(0)})},m=!1,p(k,2),!Rv(u)||!m||Lv(u)){k.B(4);break}return h(k,g(t.filter(function(e){return e.h}),!0),5);case 5:return Yv(e),t=t.filter(function(e){return!e.h}),b=c,w=d,c={},d=0,h(k,Pv(s,n,r,b,w,function(){return Yv(e)}),6);case 6:Yv(e);case 4:if(m){k.B(7);break}return h(k,g(t,!1),8);case 8:return Yv(e),_=c,T=d,c={},d=0,h(k,Pv(s,n,r,_,T,function(){return Yv(e)}),9);case 9:Yv(e);case 7:y(k,0);break;case 2:return S=v(k),E=Object.values(c),h(k,s.removeSegments(E,function(){}),10);case 10:throw S}})}function Ov(e){var t,n,r,i;return A(function(o){switch(o.g){case 1:return t=new Vy,h(o,t.init(),2);case 2:return h(o,Hy(t),3);case 3:return n=o.h,r=new ov("manifest",n.path.Wa,n.path.va,e),h(o,t.destroy(),4);case 4:return i=new xv,h(o,i.remove(r.toString()),0)}})}function Pv(e,t,n,r,i,o){var s,u,l,c,d,f,g,m,b,w,_;return A(function(T){switch(T.g){case 1:for(s=!1,p(T,2),u=!0,l=a(n.streams),c=l.next();!c.done;c=l.next())for(d=c.value,f=a(d.segments),g=f.next();!g.done;g=f.next())m=g.value,b=m.pendingSegmentRefId?r[m.pendingSegmentRefId]:null,null!=b&&(m.dataKey=b,m.pendingSegmentRefId=void 0),b=m.pendingInitSegmentRefId?r[m.pendingInitSegmentRefId]:null,null!=b&&(m.initSegmentKey=b,m.pendingInitSegmentRefId=void 0),m.pendingSegmentRefId&&(u=!1),m.pendingInitSegmentRefId&&(u=!1);return n.size+=i,u&&(n.isIncomplete=!1),h(T,e.updateManifest(t,n),4);case 4:s=!0,o(),y(T,0);break;case 2:return w=v(T),h(T,Ov(t),5);case 5:if(s){T.B(6);break}return _=Object.values(r),h(T,e.removeSegments(_,function(){}),6);case 6:throw w}})}function jv(e,t,n){var r,i,o,s,u,l,c,d,g,m,b,w,_,T,S,E,k,x,C,I,M,O,P,j,D,R,L,N;return A(function(A){switch(A.g){case 1:return r={width:1/0,height:1/0},Vt(e,n.restrictions,r),h(A,qt(t,e,n.offline.usePersistentLicense),2);case 2:for(i=[],o=n.preferredDecodingAttributes,s=n.preferredVideoCodecs,u=n.preferredAudioCodecs,Ft(e,s,u,o),l=a(e.variants),c=l.next();!c.done;c=l.next())d=c.value,i.push(rn(d));for(g=a(e.textStreams),m=g.next();!m.done;m=g.next())b=m.value,i.push(on(b));for(w=a(e.imageStreams),_=w.next();!_.done;_=w.next())T=_.value,i.push(an(T));return h(A,n.offline.trackSelectionCallback(i),3);case 3:for(S=A.h,E=e.presentationTimeline.getDuration(),k=0,x=a(S),C=x.next();!C.done;C=x.next())I=C.value,M=I.bandwidth*E/8,k+=M;return p(A,4),h(A,n.offline.downloadSizeCallback(k),6);case 6:if(!(O=A.h))throw new Ne(2,9,9014);y(A,5);break;case 4:if((P=v(A))instanceof Ne)throw P;throw W("downloadSizeCallback has produced an unexpected error",P),new Ne(2,9,9015);case 5:for(j=new Set,D=new Set,R=new Set,L=a(S),C=L.next();!C.done;C=L.next())N=C.value,"variant"==N.type&&j.add(N.id),"text"==N.type&&D.add(N.id),"image"==N.type&&R.add(N.id);e.variants=e.variants.filter(function(e){return j.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return D.has(e.id)}),e.imageStreams=e.imageStreams.filter(function(e){return R.has(e.id)}),nm(e),f(A)}})}function Dv(e,t,n,r,i,o){var s=wv(n,t,r),u=i.offline.progressCallback;ky(o,function(e,t){s.size=t,u(s,e)},function(t,n){l&&i.offline.usePersistentLicense&&c==n&&ki(e,"cenc",t)});var l=Rv(t)&&!Lv(t),c=null;l&&(c=$E.get(e.g.keySystem));for(var d=new Sv,h=a(t.textStreams),f=h.next();!f.done;f=h.next())d.g[f.value.id]=52;for(h=a(t.imageStreams),f=h.next();!f.done;f=h.next())kv(d,f.value);for(f=a(t.variants),h=f.next();!h.done;h=f.next())Ev(d,h.value);return d=Gv(o,d,t,i),o=d.streams,d=d.xf,f=e.g,h=i.offline.usePersistentLicense,f&&h&&(f.initData=[]),{Eh:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Uc(),streams:o,sessionIds:h?xi(e):[],drmInfo:f,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},xf:d}}function Rv(e){return e.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})}function Lv(e){return e.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})})}function Nv(e,t,n,r){if(t.expiration=n.Uc(),n=xi(n),t.sessionIds=r.offline.usePersistentLicense?n:[],Rv(e)&&r.offline.usePersistentLicense&&!n.length)throw new Ne(2,9,9007)}function Uv(e,t){var n,r,i,o,a,s;return A(function(u){switch(u.g){case 1:if(Jv(),null==(n=av(t))||"manifest"!=n.g)throw new Ne(2,9,9004,t);return r=n,i=new Vy,g(u,2),h(u,i.init(),4);case 4:return h(u,Ky(i,r.Wa(),r.va()),5);case 5:return o=u.h,h(u,o.getManifests([r.key()]),6);case 6:return a=u.h,s=a[0],h(u,Promise.all([Bv(e,s,i),Vv(o,r,s)]),2);case 2:return m(u),h(u,i.destroy(),8);case 8:b(u,0)}})}function Fv(e,t){for(var n=[],r=a(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&"video"==i.type?n.push({contentType:We(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||n.push({contentType:We(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function Bv(e,t,n){return A(function(r){return h(r,em(e.g,e.h.drm,n,t),0)})}function Vv(e,t,n){function r(){}var i=Zv(n);return _v(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}function Hv(e){var t,n,r,i,o,s,u,l,c,d;return A(function(f){switch(f.g){case 1:return Jv(),t=e.g,n=e.h.drm,r=new Vy,i=!1,g(f,2),h(f,r.init(),4);case 4:o=[],qy(r,function(e){return o.push(e)}),s=a(o),u=s.next();case 5:if(u.done){f.B(2);break}return l=u.value,h(f,l.getAll(),8);case 8:return c=f.h,h(f,vv(n,t,c),9);case 9:return d=f.h,h(f,l.remove(d),10);case 10:d.length!=c.length&&(i=!0),u=s.next(),f.B(5);break;case 2:return m(f),h(f,r.destroy(),11);case 11:b(f,3);break;case 3:return f.return(!i)}})}function Wv(){var e,t,n;return A(function(r){switch(r.g){case 1:return Jv(),e=[],t=new Vy,g(r,2),h(r,t.init(),4);case 4:return n=Promise.resolve(),Wy(t,function(t,r){n=n.then(function(){var n;return A(function(i){if(1==i.g)return h(i,r.getAllManifests(),2);n=i.h,n.forEach(function(n,r){n=_v(new ov("manifest",t.Wa,t.va,r),n),e.push(n)}),f(i)})})}),h(r,n,2);case 2:return m(r),h(r,t.destroy(),6);case 6:b(r,3);break;case 3:return r.return(e)}})}function Kv(e,t,n,r){var i,o,a,s,u;return A(function(l){if(1==l.g)return i=null,o=e.g,a={networkingEngine:o,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate}},n.configure(r.manifest),Yv(e),h(l,n.start(t,a),2);if(3!=l.g)return s=l.h,Yv(e),u=tm(s),h(l,Promise.all(gr(u,function(e){return e.createSegmentIndex()})),3);if(Yv(e),i)throw i;return l.return(s)})}function qv(e,t,n,r){var i;return A(function(o){return 1==o.g?(i=new pi({Ub:e.g,onError:n,Vd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),i.configure(r.drm),h(o,yi(i,t.variants,r.offline.usePersistentLicense),2)):3!=o.g?h(o,Ei(i),3):o.return(i)})}function Gv(e,t,n,r){var i=new Map,o=tm(n),s=new Map;o=a(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var l=zv(e,t,n,u,r,i);s.set(u.id,l)}for(e=a(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),xf:Array.from(i.values())}}function zv(e,t,n,r,i,o){var a={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},s=i.offline.numberOfParallelDownloads,u=0;return Xv(r,n.presentationTimeline.fb(),function(n){var i=wy(n),l=void 0;if(!o.has(i)){var c=n.endTime-n.startTime;c=Av(t,r.id)*c,c=Sy(e.g,c),o.set(i,new by(n,c,u,!1))}n.h&&(l=wy(n.h),o.has(l)||(c=.5*Av(t,r.id),c=Sy(e.g,c),o.set(l,new by(n.h,c,u,!0)))),a.segments.push({pendingInitSegmentRefId:l,initSegmentKey:l?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:i,dataKey:0,mimeType:n.mimeType,codecs:n.codecs}),u=(u+1)%s}),a}function Xv(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function Yv(e){if(e.l.g)throw new Ne(2,9,7001)}function Jv(){if(!Cv())throw new Ne(2,9,9e3)}function Qv(e,t){return A(function(n){return 1==n.g?(e.i.push(t),g(n,2),h(n,t,4)):2!=n.g?n.return(n.h):(m(n),ye(e.i,t),b(n,0))})}function $v(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){ye(e.i,n)})}function Zv(e){var t=new Set;e=a(e.streams);for(var n=e.next();!n.done;n=e.next()){n=a(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,null!=r.initSegmentKey&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function em(e,t,n,r){var i,o,a;return A(function(s){return 1==s.g?r.drmInfo?(i=Gy(n),o=r.sessionIds.map(function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Fv(r,!1),videoCapabilities:Fv(r,!0)}}),h(s,vv(t,e,o),2)):s.return():3!=s.g?(a=s.h,h(s,i.remove(a),3)):h(s,i.add(o.filter(function(e){return!a.includes(e.sessionId)})),0)})}function tm(e){for(var t=new Set,n=a(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=a(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=a(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function nm(e){var t=new Set(e.variants.map(function(e){return e.video})),n=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams,1<t.size&&W("Multiple video tracks selected to be stored"),t=a(n);for(var r=t.next();!r.done;r=t.next()){r=r.value;for(var i=a(n),o=i.next();!o.done;o=i.next())o=o.value,r!=o&&r.language==o.language&&W("Similar audio tracks were selected to be stored",r.id,o.id)}for(n=a(e),t=n.next();!t.done;t=n.next())for(t=t.value,r=a(e),i=r.next();!i.done;i=r.next())i=i.value,t!=i&&t.language==i.language&&W("Similar text tracks were selected to be stored",t.id,i.id)}function rm(){}function im(e,t){for(e={priority:t||0,callback:e},t=0;t<ZE.length;t++)if(ZE[t].priority<e.priority)return void ZE.splice(t,0,e);ZE.push(e)}function om(){this.g=new sm}function am(){e.AbortController||(e.AbortController=om,e.AbortSignal=sm)}function sm(){tr.call(this),this.h=!1,this.g=void 0,this.onabort=null}function um(){}function lm(){if(Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))K("Using native ARIAMixin interface.");else{K("ARIAMixin interface not detected. Installing polyfill.");for(var e=a(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())cm(t.value)}}function cm(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||void 0==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function dm(){}function hm(){Qw()}function fm(){}function pm(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",gm),document.addEventListener("webkitfullscreenerror",gm),document.addEventListener("mozfullscreenchange",gm),document.addEventListener("mozfullscreenerror",gm),document.addEventListener("MSFullscreenChange",gm),document.addEventListener("MSFullscreenError",gm)}}function gm(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function ym(){}function vm(){var e=!0;(jt()||Lt("PlayStation 5")||Dt()||Mt()||xt()||Ot()||Lt("PC=EOS")||Lt("Hisense")||Lt("VIDAA"))&&(e=!1),e&&navigator.mediaCapabilities?K("MediaCapabilities: Native mediaCapabilities support found."):(K("MediaCapabilities: install"),navigator.mediaCapabilities||(navigator.mediaCapabilities={}),ek=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=mm)}function mm(t){var n,r,i,o,a,s,u,l,c,d,f,g,m,b,w,_,T,S,E;return A(function(k){switch(k.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},!t)return k.return(n);if(r=t.video,i=t.audio,"media-source"==t.type){if(!St())return k.return(n);if(r){if(Ot())if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var A=r.contentType;if(r.width&&r.height&&(A+="; width="+r.width+"; height="+r.height),r.framerate&&(A+="; framerate="+r.framerate),"pq"===r.transferFunction&&(A+="; eotf=smpte2084"),A in nk)var x=nk[A];else x=cast.__platform__.canDisplayType(A),nk[A]=x;o=x}else W("Expected cast APIs to be available! Falling back to shaka.media.Capabilities.isTypeSupported() for type support."),o=te(r.contentType);else xt()?(a=r.contentType,r.width&&r.height&&(a+="; width="+r.width,a+="; height="+r.height),r.framerate&&(a+="; framerate="+r.framerate),r.bitrate&&(a+="; bitrate="+r.bitrate),o=te(a)):o=te(r.contentType);if(!o)return k.return(n)}if(i&&(Ot()&&i.spatialRendering?(u=i.contentType+"; spatialRendering=true",s=te(u)):s=te(i.contentType),!s))return k.return(n)}else{if("file"!=t.type)return k.return(n);if(r&&(l=r.contentType,!(c=Et(l)))||i&&(d=i.contentType,!(f=Et(d))))return k.return(n)}if(!t.keySystemConfiguration)return n.supported=!0,k.return(Promise.resolve(n));if(g=t.keySystemConfiguration,m=[],b=[],g.audio&&(w={robustness:g.audio.robustness||"",contentType:t.audio.contentType},xt()&&t.audio.contentType.includes('codecs="ac-3"')&&(w={robustness:w.robustness,contentType:'audio/mp4; codecs="ec-3"'}),m.push(w)),g.video&&(_={robustness:g.video.robustness||"",contentType:t.video.contentType},b.push(_)),T={initDataTypes:[g.initDataType],distinctiveIdentifier:g.distinctiveIdentifier,persistentState:g.persistentState,sessionTypes:g.sessionTypes},m.length&&(T.audioCapabilities=m),b.length&&(T.videoCapabilities=b),S=(t.video?t.video.contentType:"")+"#"+(t.audio?t.audio.contentType:"")+"#"+t.keySystemConfiguration.keySystem,p(k,3),S in tk){E=tk[S],k.B(5);break}return h(k,navigator.requestMediaKeySystemAccess(g.keySystem,[T]),6);case 6:E=k.h,tk[S]=E;case 5:y(k,4);break;case 3:v(k),K("navigator.requestMediaKeySystemAccess failed.");case 4:E&&(n.supported=!0,n.keySystemAccess=E);case 2:return k.return(n)}})}function bm(){}function wm(){q("MediaSource.install");var t=Rt();e.MediaSource||e.ManagedMediaSource?t?10>=t?(K("Blacklisting MSE on Safari <= 10."),e.MediaSource=null):12>=t?(K("Patching Safari 11 & 12 MSE bugs."),_m(),Tm()):15>=t&&(K("Patching Safari 13 & 14 & 15 MSE bugs."),_m()):It()||Ct()||Lt("Tizen 4")?(K("Rejecting Opus."),Em()):K("Using native MSE as-is."):K("No MSE implementation available."),(e.MediaSource||e.ManagedMediaSource)&&Sm(),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&(K("Patching vp09 support queries."),km())}function _m(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,x.apply(0,arguments));return t.abort=function(){},t}}function Tm(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function Sm(){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(e){return"mp2t"!=ze(e)&&t(e)},e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"mp2t"!=ze(e)&&n(e)}}}function Em(){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(e){return"opus"!=Ye(e)&&t(e)},e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"opus"!=Ye(e)&&n(e)}}}function km(){var e=MediaSource.isTypeSupported;Mt()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(e){return e.startsWith("codecs=")});if(0>r)return e(t);var i=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=i.findIndex(function(e){return e.startsWith("vp09")});return 0<=o&&(i[o]="vp9",n[r]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}function Am(){}function xm(){screen.orientation&&screen.orientation.unlock?K("Using native screen.orientation"):void 0!=screen.orientation?Cm():void 0!=e.orientation&&Im()}function Cm(){void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return K("screen.orientation.lock is a no-op"),Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){K("screen.orientation.unlock is a no-op")})}function Im(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new Mm;screen.orientation=n,t(),e.addEventListener("orientationchange",function(){t();var e=new Zn("change");n.dispatchEvent(e)})}function Mm(){tr.call(this),this.type="",this.angle=0}function Om(){}function Pm(e,t){q("PatchedMediaKeysApple.requestMediaKeySystemAccess");try{var n=new Rm(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function jm(e){q("PatchedMediaKeysApple.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&Nm(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Nm(e,this):Promise.resolve()}function Dm(e){if(q("PatchedMediaKeysApple.onWebkitNeedKey_",e),e=le(e.initData),de(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Tr(e.subarray(4),!0),e=Er(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=ue(e),this.dispatchEvent(t)}function Rm(e,t){if(q("PatchedMediaKeysApple.MediaKeySystemAccess"),this.keySystem=e,e.startsWith("com.apple.fps"))for(e=a(t),t=e.next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,i=!1;if(n.audioCapabilities)for(var o=a(n.audioCapabilities),s=o.next();!s.done;s=o.next())s=s.value,s.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),i=!0));if(n.videoCapabilities)for(n=a(n.videoCapabilities),s=n.next();!s.done;s=n.next())o=s.value,o.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),i=!0));r||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=i?t:null}if(t)return void(this.g=t)}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Lm(e){q("PatchedMediaKeysApple.MediaKeys"),this.h=new WebKitMediaKeys(e),this.g=new Q}function Nm(e,t){if(e.g.Za(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",Dm);try{return Da(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(e){return Promise.reject(e)}}function Um(e){q("PatchedMediaKeysApple.MediaKeySession"),tr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Q,this.sessionId="",this.expiration=NaN,this.closed=new qn,this.keyStatuses=new Bm}function Fm(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.g=t,t=new Zn("keystatuseschange"),e.dispatchEvent(t)}function Bm(){this.size=0,this.g=void 0}function Vm(){}function Hm(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(K("EME not available."),navigator.requestMediaKeySystemAccess=Wm,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Km,e.MediaKeys=qm,e.MediaKeySystemAccess=Gm,e.shakaMediaKeysPolyfill=!0)}function Wm(){return q("PatchedMediaKeysNop.requestMediaKeySystemAccess"),Promise.reject(Error("The key system specified is not supported."))}function Km(e){return q("PatchedMediaKeysNop.setMediaKeys"),null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function qm(){throw new TypeError("Illegal constructor.")}function Gm(){throw this.keySystem="",new TypeError("Illegal constructor.")}function zm(){}function Xm(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)K("Using webkit-prefixed EME v0.1b"),lk="webkit";else{if(!HTMLMediaElement.prototype.generateKeyRequest)return;K("Using nonprefixed EME v0.1b")}navigator.requestMediaKeySystemAccess=Jm,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Qm,e.MediaKeys=Zm,e.MediaKeySystemAccess=$m,e.shakaMediaKeysPolyfill=!0}}function Ym(e){var t=lk;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function Jm(e,t){q("PatchedMediaKeysWebkit.requestMediaKeySystemAccess");try{var n=new $m(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Qm(e){q("PatchedMediaKeysWebkit.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&eb(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&eb(e,this),Promise.resolve()}function $m(e,t){q("PatchedMediaKeysWebkit.MediaKeySystemAccess"),this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video"),t=a(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var l=a(o.audioCapabilities),c=l.next();!c.done;c=l.next())c=c.value,c.contentType&&(u=!0,i.canPlayType(c.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(c),r=!0));if(o.videoCapabilities)for(l=a(o.videoCapabilities),c=l.next();!c.done;c=l.next())c=c.value,c.contentType&&(u=!0,i.canPlayType(c.contentType,this.g)&&(s.videoCapabilities.push(c),r=!0));if(u||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r)return void(this.h=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Zm(e){q("PatchedMediaKeysWebkit.MediaKeys"),this.l=e,this.h=null,this.g=new Q,this.i=[],this.j=new Map}function eb(e,t){e.h=t,e.g.Za();var n=lk;t&&(e.g.D(t,n+"needkey",function(t){q("PatchedMediaKeysWebkit.onWebkitNeedKey_",t);var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=ue(t.initData),e.h.dispatchEvent(n)}),e.g.D(t,n+"keymessage",function(t){q("PatchedMediaKeysWebkit.onWebkitKeyMessage_",t);var n=tb(e,t.sessionId);n?(t=(new Map).set("messageType",void 0==n.keyStatuses.Pb()?"licenserequest":"licenserenewal").set("message",t.message),t=new Zn("message",t),q("PatchedMediaKeysWebkit.MediaKeySession.generated"),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t)):H("Session not found",t.sessionId)}),e.g.D(t,n+"keyadded",function(t){q("PatchedMediaKeysWebkit.onWebkitKeyAdded_",t),(t=tb(e,t.sessionId))&&(q("PatchedMediaKeysWebkit.MediaKeySession.ready"),ob(t,"usable"),t.g&&t.g.resolve(),t.g=null)}),e.g.D(t,n+"keyerror",function(t){q("PatchedMediaKeysWebkit.onWebkitKeyError_",t);var n=tb(e,t.sessionId);if(n){q("PatchedMediaKeysWebkit.MediaKeySession.handleError",t);var r=Error("EME v0.1b key error"),i=t.errorCode;i.systemCode=t.systemCode,r.errorCode=i,!t.sessionId&&n.h?(45==t.systemCode&&(r.message="Unsupported session type."),n.h.reject(r),n.h=null):t.sessionId&&n.g?(n.g.reject(r),n.g=null):(r=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?ob(n,"output-restricted"):1==r?ob(n,"expired"):ob(n,"internal-error"))}}))}function tb(e,t){var n=e.j.get(t);return n?(q("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):(n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),q("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):null}function nb(e,t,n){q("PatchedMediaKeysWebkit.MediaKeySession"),tr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new qn,this.keyStatuses=new ab}function rb(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var r=le(Er("LOAD_SESSION|"+n));else{var i=Er("PERSISTENT|");r=Kr(i,t)}else r=le(t)}catch(e){return Promise.reject(e)}e.h=new qn;var o=Ym("generateKeyRequest");try{e.j[o](e.i,r)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new Tt(function(){try{e.j[o](e.i,r)}catch(t){e.h.reject(t),e.h=null}}).U(.01)}return e.h}function ib(e,t,n){if(e.g)e.g.then(function(){return ib(e,t,n)}).catch(function(){return ib(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var r=_r(n),i=JSON.parse(r);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Vr(i.keys[0].k),i=Vr(i.keys[0].kid)}else r=le(n),i=null;var o=Ym("addKey");try{e.j[o](e.i,r,i,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function ob(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.g=t,t=new Zn("keystatuseschange"),e.dispatchEvent(t)}function ab(){this.size=0,this.g=void 0}function sb(){}function ub(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(q("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=cb,Object.defineProperty(t,"disablePictureInPicture",{get:hb,set:fb,enumerable:!0,configurable:!0}),document.exitPictureInPicture=db,document.addEventListener("webkitpresentationmodechanged",lb,!0))}}function lb(e){if(e=e.target,"picture-in-picture"==e.webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function cb(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function db(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function hb(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function fb(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function pb(){}function gb(){q("randomUUID.install"),e.crypto?"randomUUID"in e.crypto?q("RandomUUID: Native window.crypto.randomUUID() support found."):e.crypto.randomUUID=yb:q("window.crypto must be available to install randomUUID polyfill.")}function yb(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function vb(){}function mb(){q("Symbol.install");var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:bb})}function bb(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function wb(){}function _b(){if(q("VideoPlayPromise.install"),e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e}}}function Tb(){}function Sb(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||Mt()&&38===Pt())&&(t.getVideoPlaybackQuality=Eb)}}function Eb(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function kb(){}function Ab(){if(e.VTTCue)K("Using native VTTCue.");else if(e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)K("Using VTTCue polyfill from 3 argument TextTrackCue."),t=xb;else if(6==n)K("Using VTTCue polyfill from 6 argument TextTrackCue."),t=Cb;else{try{var r=!!xb(1,2,"")}catch(e){r=!1}r&&(K("Using VTTCue polyfill from 3 argument TextTrackCue."),t=xb)}t?e.VTTCue=function(e,n,r){return t(e,n,r)}:H("No recognized signature for TextTrackCue found!")}else H("VTTCue not available.")}function xb(t,n,r){return new e.TextTrackCue(t,n,r)}function Cb(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function Ib(){}function Mb(){}function Ob(e,t,n,r,i,o,s,u,l,c,d,h){var f=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!d)return null;var p=document.createElement("span");p.textContent=e.textContent}else p=e;for(var g=null,y=a(Ak),v=y.next();!v.done&&!(g=Ub(p,"backgroundImage",r,"#",v.value)[0]);v=y.next());y=null;var m=Zr(p,Ak,"backgroundImage");if(h&&m&&!m.startsWith("#")&&(v=new Ae(h),m=new Ae(m),(v=v.resolve(m).toString())&&(y=v)),("p"==e.nodeName||g||y)&&(d=!0),e=d,v="default"==(p.getAttribute("xml:space")||(u?"default":"preserve")),m=Array.from(p.childNodes).every(function(e){return e.nodeType==Node.TEXT_NODE}),u=[],!m)for(var b=a(p.childNodes),w=b.next();!w.done;w=b.next())(w=Ob(w.value,t,n,r,i,o,s,v,l,p,d,h))&&u.push(w);if(r=null!=c,h=/\S/.test(p.textContent),!((w=p.hasAttribute("begin")||p.hasAttribute("end")||p.hasAttribute("dur"))||h||"br"==p.tagName||0!=u.length||r&&!v))return null;for(b=Bb(p,n),h=b.start,b=b.end;f&&f.nodeType==Node.ELEMENT_NODE&&"tt"!=f.tagName;)b=Fb(f,n,h,b),h=b.start,b=b.end,f=f.parentNode;if(null==h&&(h=0),h+=t.periodStart,b=null==b?1/0:b+t.periodStart,h=Math.max(h,t.segmentStart),b=Math.min(b,t.segmentEnd),!w&&0<u.length)for(h=1/0,b=0,t=a(u),n=t.next();!n.done;n=t.next())n=n.value,h=Math.min(h,n.startTime),b=Math.max(b,n.endTime);if("br"==p.tagName)return i=new be(h,b,""),i.lineBreak=!0,i;if(t="",m&&(t=p.textContent,v&&(t=t.trim(),t=t.replace(/\s+/g," "))),t=new be(h,b,t),t.nestedCues=u,d||(t.isContainer=!0),l&&(t.cellResolution=l),l=Ub(p,"region",o,"")[0],p.hasAttribute("region")&&l&&l.getAttribute("xml:id")){var _=l.getAttribute("xml:id");t.region=s.filter(function(e){return e.id==_})[0]}return s=l,c&&r&&!p.getAttribute("region")&&!p.getAttribute("style")&&(s=Ub(c,"region",o,"")[0]),Pb(t,p,s,g,y,i,e,0==u.length),t}function Pb(e,t,n,r,i,o,a,s){if(a=a||s,"rtl"==Db(t,n,o,"direction",a)&&(e.direction="rtl"),s=Db(t,n,o,"writingMode",a),"tb"==s||"tblr"==s?e.writingMode="vertical-lr":"tbrl"==s?e.writingMode="vertical-rl":"rltb"==s||"rl"==s?e.direction="rtl":s&&(e.direction=w_),(s=Db(t,n,o,"textAlign",!0))?(e.positionAlign=Sk[s],e.lineAlign=Tk[s],e.textAlign=v_[s.toUpperCase()]):e.textAlign=y_,(s=Db(t,n,o,"displayAlign",!0))&&(e.displayAlign=b_[s.toUpperCase()]),(s=Db(t,n,o,"color",a))&&(e.color=s),(s=Db(t,n,o,"backgroundColor",a))&&(e.backgroundColor=s),(s=Db(t,n,o,"border",a))&&(e.border=s),s=Db(t,n,o,"fontFamily",a))switch(s){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=s}switch((s=Db(t,n,o,"fontWeight",a))&&"bold"==s&&(e.fontWeight=700),s=Db(t,n,o,"wrapOption",a),e.wrapLine=!s||"noWrap"!=s,(s=Db(t,n,o,"lineHeight",a))&&s.match(pk)&&(e.lineHeight=s),(s=Db(t,n,o,"fontSize",a))&&(s.match(pk)||s.match(fk))&&(e.fontSize=s),(s=Db(t,n,o,"fontStyle",a))&&(e.fontStyle=I_[s.toUpperCase()]),r?(i=r.getAttribute("imageType")||r.getAttribute("imagetype"),s=r.getAttribute("encoding"),r=r.textContent.trim(),"PNG"==i&&"Base64"==s&&r&&(e.backgroundImage="data:image/png;base64,"+r)):i&&(e.backgroundImage=i),(r=Db(t,n,o,"textOutline",a))&&(r=r.split(" "),r[0].match(pk)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(pk)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=Db(t,n,o,"letterSpacing",a))&&r.match(pk)&&(e.letterSpacing=r),(r=Db(t,n,o,"linePadding",a))&&r.match(pk)&&(e.linePadding=r),(r=Db(t,n,o,"opacity",a))&&(e.opacity=parseFloat(r)),(r=Rb(n,o,"textDecoration"))&&jb(e,r),(r=Lb(t,o,"textDecoration"))&&jb(e,r),(r=Db(t,n,o,"textCombine",a))&&(e.textCombineUpright=r),Db(t,n,o,"ruby",a)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function jb(e,t){t=a(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&ye(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&ye(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&ye(e.textDecoration,"overline")}}function Db(e,t,n,r,i){return i=void 0===i||i,(e=Lb(e,n,r))?e:i?Rb(t,n,r):null}function Rb(e,t,n){if(!e)return null;var r=Zr(e,kk,n);return r||Nb(e,t,n)}function Lb(e,t,n){var r=Zr(e,kk,n);return r||Nb(e,t,n)}function Nb(e,t,n){e=Ub(e,"style",t,"");for(var r=null,i=0;i<e.length;i++){var o=$r(e[i],"urn:ebu:tt:style",n);o||(o=Zr(e[i],kk,n)),o||(o=Lb(e[i],t,n)),o&&(r=o)}return r}function Ub(e,t,n,r,i){var o=[];if(!e||1>n.length)return o;var s=e;for(e=null;s&&!(e=i?$r(s,i,t):s.getAttribute(t))&&(s=s.parentNode)instanceof Element;);if(t=e)for(t=a(t.split(" ")),i=t.next();!i.done;i=t.next())for(i=i.value,e=a(n),s=e.next();!s.done;s=e.next())if(s=s.value,r+s.getAttribute("xml:id")==i){o.push(s);break}return o}function Fb(e,t,n,r){return e=Bb(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==r?r=e.end:null!=e.start&&(r+=e.start),{start:n,end:r}}function Bb(e,t){var n=Vb(e.getAttribute("begin"),t),r=Vb(e.getAttribute("end"),t);return e=Vb(e.getAttribute("dur"),t),null==r&&null!=e&&(r=n+e),{start:n,end:r}}function Vb(e,t){var n=null;if(yk.test(e)){e=yk.exec(e),n=Number(e[1]);var r=Number(e[2]),i=Number(e[3]),o=Number(e[4]);o+=(Number(e[5])||0)/t.h,i+=o/t.frameRate,n=i+60*r+3600*n}else if(vk.test(e))n=Hb(vk,e);else if(mk.test(e))n=Hb(mk,e);else if(bk.test(e))e=bk.exec(e),n=Number(e[1])/t.frameRate;else if(wk.test(e))e=wk.exec(e),n=Number(e[1])/t.g;else if(_k.test(e))n=Hb(_k,e);else if(e)throw new Ne(2,2,2001,"Could not parse cue time range in TTML");return n}function Hb(e,t){return e=e.exec(t),null==e||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function Wb(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function Kb(){this.g=new Mb}function qb(){this.h=!1,this.g="UNKNOWN"}function Gb(e){for(var t=a(Object.entries(k_)),n=t.next();!n.done;n=t.next()){var r=a(n.value);n=r.next().value,r=r.next().value;var i=new be(0,0,"");i.color=r,e.set("."+n,i)}for(t=a(Object.entries(A_)),n=t.next();!n.done;n=t.next())r=a(n.value),n=r.next().value,r=r.next().value,i=new be(0,0,""),i.backgroundColor=r,e.set("."+n,i)}function zb(e,t,n){if(e.includes("<")){0===n.size&&Gb(n);e:{for(var r=[],i=-1,o="",s=0;s<e.length;s++)if("/"===e[s]&&0<s&&"<"===e[s-1]){var u=e.indexOf(">",s);if(u<=s)break e;if((u=e.substring(s+1,u))&&"c"===u){var l=r.pop();l?l===u?(o+="/"+u+">",s+=u.length+1):l.startsWith("c.")?(s+=u.length+1,o+="/"+l+">"):o+=e[s]:o+=e[s]}else o+=e[s]}else"<"===e[s]?(i=s+1,"c"!=e[i]&&(i=-1)):">"===e[s]&&0<i&&(r.push(e.substr(i,s-i)),i=-1),o+=e[s];e=o}for(r=e,e=[],o=-1,i=0;i<r.length;i++)"<"===r[i]?o=i+1:">"===r[i]&&0<o&&(o=r.substr(o,i-o),o.match(xk)&&e.push(o),o=-1);for(e=a(e),i=e.next();!i.done;i=e.next())i=i.value,r=r.replace("<"+i+">",'<div time="'+i+'">'),r+="</div>";e=r;e:{for(i=e,o=[],s=-1,e="",r=!1,u=0;u<i.length;u++)if("/"===i[u]){if(-1===(l=i.indexOf(">",u))){e=i;break e}if((l=i.substring(u+1,l))&&"v"==l){r=!0;var c=null;if(o.length&&(c=o[o.length-1]),c){if(c===l)e+="/"+l+">";else{if(!c.startsWith("v")){e+=i[u];continue}e+="/"+c+">"}u+=l.length+1}else e+=i[u]}else e+=i[u]}else"<"===i[u]?(s=u+1,"v"!=i[s]&&(s=-1)):">"===i[u]&&0<s&&(o.push(i.substr(s,u-s)),s=-1),e+=i[u];for(i=a(o),o=i.next();!o.done;o=i.next())o=o.value,s=o.replace(" ",".voice-"),e=e.replace("<"+o+">","<"+s+">"),e=e.replace("</"+o+">","</"+s+">"),r||(e+="</"+s+">")}if(r=hi("<span>"+e+"</span>","span")){if(r=r.childNodes,1==r.length&&(i=r[0],i.nodeType==Node.TEXT_NODE||i.nodeType==Node.CDATA_SECTION_NODE))return void(t.payload=Zb(e));for(e=a(r),r=e.next();!r.done;r=e.next())Yb(r.value,t,n)}else W("The cue's markup could not be parsed: ",e),t.payload=Zb(e)}else t.payload=Zb(e)}function Xb(e,t){return e&&0<e.length?e:t}function Yb(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Te,r.position=null,r.size=0,e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var i=a(e.nodeName.split(/(?=[ .])+/g)),o=i.next();!o.done;o=i.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]',n.has(s)||(s="v[voice="+u+"]")}switch(n.has(s)&&(s=n.get(s))&&(r.backgroundColor=Xb(s.backgroundColor,r.backgroundColor),r.color=Xb(s.color,r.color),r.fontFamily=Xb(s.fontFamily,r.fontFamily),r.fontSize=Xb(s.fontSize,r.fontSize),r.textShadow=Xb(s.textShadow,r.textShadow),r.fontWeight=s.fontWeight,r.fontStyle=s.fontStyle,r.opacity=s.opacity,r.rubyTag=s.rubyTag,r.textCombineUpright=s.textCombineUpright,r.wrapLine=s.wrapLine),o){case"br":return r=we(r.startTime,r.endTime),void t.nestedCues.push(r);case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(o=e.getAttribute("color"))&&(r.color=o);break;case"div":if(!(o=e.getAttribute("time")))break;(o=$b(new Cp(o)))&&(r.startTime=o);break;case"ruby":case"rp":case"rt":r.rubyTag=o}}if(i=e.childNodes,ti(e)||1==i.length&&ti(i[0]))for(i=!0,n=a(e.textContent.split("\n")),e=n.next();!e.done;e=n.next())e=e.value,i||(i=we(r.startTime,r.endTime),t.nestedCues.push(i)),0<e.length&&(i=r.clone(),i.payload=Zb(e),t.nestedCues.push(i)),i=!1;else for(t.nestedCues.push(r),t=a(i),e=t.next();!e.done;e=t.next())Yb(e.value,r,n)}function Jb(e,t,n){var r;if(r=/^align:(start|middle|center|end|left|right)$/.exec(t))t=r[1],e.textAlign="middle"==t?y_:v_[t.toUpperCase()];else if(r=/^vertical:(lr|rl)$/.exec(t))e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl";else if(r=/^size:([\d.]+)%$/.exec(t))e.size=Number(r[1]);else if(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":g_);else{if(!(r=/^region:(.*)$/.exec(t))){e:{if(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=E_[n[2].toUpperCase()]);else{if(!(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))){e=!1;break e}e.lineInterpretation=T_,e.line=Number(n[1]),n[2]&&(e.lineAlign=E_[n[2].toUpperCase()])}e=!0}return e}(t=Qb(n,r[1]))&&(e.region=t)}return!0}function Qb(e,t){return e=e.filter(function(e){return e.id==t}),e.length?e[0]:(W("VTT parser could not find a region with id: ",t," The region will be ignored."),null)}function $b(e){if(null==(e=Mp(e,xk)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Zb(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(e){return t[e]||"'"}):e||""}function ew(){this.g=null}function tw(e,t,n){var r,i,o;return(new Ir).box("payl",Dr(function(e){r=_r(e)})).box("iden",Dr(function(e){i=_r(e)})).box("sttg",Dr(function(e){o=_r(e)})).parse(e),r?nw(r,i,o,t,n):null}function nw(e,t,n,r,i){if(r=new be(r,i,""),zb(e,r,new Map),t&&(r.id=t),n)for(e=new Cp(n),t=Op(e);t;)Jb(r,t,[])||W("VTT parser encountered an invalid VTT setting: ",t," The setting will be ignored."),Ip(e),t=Op(e);return r}function rw(){}function iw(e){if(null==(e=Mp(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function ow(){this.g=new qb}function aw(e){var t="WEBVTT\n\n";if(""==e)return t;e=e.replace(/\r+/g,""),e=e.trim(),e=a(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}function sw(){}function uw(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=lw(n))&&(e.color=n),(n=t.BackColour)&&(n=lw(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=m_,e.textAlign="start";break;case 2:e.displayAlign=m_,e.textAlign=y_;break;case 3:e.displayAlign=m_,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=y_;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=y_;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function lw(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function cw(e){return e=Ok.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}function dw(e,t){var n=1&e[t+1]?7:9;return t+n<=e.length&&0<(e=((3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5)-n)?{Id:n,S:e}:null}function hw(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(60&e[t+2])>>>2;if(r>n.length-1)return null;var i=1+((192&e[t+2])>>>6),o=(1&e[t+2])<<2;return o|=(192&e[t+3])>>>6,{sampleRate:n[r],channelCount:o,ka:"mp4a.40."+i}}function fw(e,t){if(t+1<e.length&&255===e[t]&&240==(246&e[t+1])){var n=1&e[t+1]?7:9;if(t+n>=e.length)return!1;var r=(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5;return!(r<=n)&&((t+=r)===e.length||t+1<e.length&&255===e[t]&&240==(246&e[t+1]))}return!1}function pw(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function gw(e){this.i=e,this.h=0,this.g=new Map}function yw(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(3<=n)return null;var r=63&e[t+4],i=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+i>e.length)return null;var o=e[t+6]>>5,a=0;2===o?a+=2:(1&o&&1!==o&&(a+=2),4&o&&(a+=2)),a=(e[t+6]<<8|e[t+7])>>12-a&1;var s=7&e[t+5];return e=new Uint8Array([n<<6|e[t+5]>>3<<1|s>>2,(3&s)<<6|o<<3|a<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][o]+a,da:e,S:i}}function vw(e,t){if(11===e[t]&&119===e[t+1]){var n=0,r=5;t+=r;for(var i,o;0<r;){o=e[t];var a=Math.min(r,8),s=8-a;i=4278190080>>>24+s<<s,i=(o&i)>>s,n=n?n<<a|i:i,t+=1,r-=a}if(16>n)return!0}return!1}function mw(e){this.i=e,this.h=0,this.g=new Map}function bw(e,t){if(t+8>e.length||2935!=(e[t]<<8|e[t+1]<<0))return null;var n=new xo(e.subarray(t+2));Io(n,2),Io(n,3);var r=Mo(n,11)+1<<1,i=Mo(n,2);if(3==i){i=Mo(n,2),i=[24e3,22060,16e3][i];var o=3}else i=[48e3,44100,32e3][i],o=Mo(n,2);var a=Mo(n,3),s=Mo(n,1);return n=Mo(n,5),t+r>e.byteLength?null:(e=Math.floor(r*i/(16*[1,2,3,6][o])),e=new Uint8Array([(8160&e)>>5,(31&e)<<3,i<<6|n<<1|0,0|a<<1|s<<0,0]),{sampleRate:i,channelCount:[2,1,2,3,3,4,4,5][a]+s,da:e,S:r})}function ww(e){this.i=e,this.h=0,this.g=new Map}function _w(e){if(!e.length)return null;var t=e.find(function(e){return 7==e.type});if(e=e.find(function(e){return 8==e.type}),!t||!e)return null;var n=new xo(t.data),r=Lo(n);if(Lo(n),Lo(n),Po(n),Pk.includes(r)&&(r=jo(n),3===r&&Io(n,1),Po(n),Po(n),Io(n,1),Ro(n))){r=3!==r?8:12;for(var i=0;i<r;i++)Ro(n)&&(6>i?No(n,16):No(n,64))}if(Po(n),0===(r=jo(n)))jo(n);else if(1===r)for(Io(n,1),Po(n),Po(n),r=jo(n),i=0;i<r;i++)Po(n);Po(n),Io(n,1);var o=jo(n),a=jo(n),u=Mo(n,1);0===u&&Io(n,1),Io(n,1);var l=0,c=0,d=0,h=0;if(Ro(n)&&(l=jo(n),c=jo(n),d=jo(n),h=jo(n)),i=r=1,Ro(n)&&Ro(n)){var f=Lo(n),p=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],g=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<f&&16>=f?(r=p[f-1],i=g[f-1]):255===f&&(r=Mo(n,16),i=Mo(n,16))}return n=(2-u)*(a+1)*16-2*d-2*h,o=16*(o+1)-2*l-2*c,l=[],t=t.fullData,l.push(t.byteLength>>>8&255),l.push(255&t.byteLength),l=l.concat.apply(l,s(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(255&e.byteLength),t=t.concat.apply(t,s(e)),e=new Uint8Array([1,l[3],l[4],l[5],255,225].concat(l,[1],t)),{height:n,width:o,ma:e,ra:r,ua:i}}function Tw(e){var t=!1,n=[],r=e.find(function(e){return 7==e.type}),i=!1;e=a(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var u=!1;switch(o.type){case 1:u=i=!0;var l=o.data;r&&4<l.length&&(2===(l=Uo(new xo(l)))||4===l||7===l||9===l)&&(t=!0);break;case 5:t=u=i=!0;break;case 6:case 7:case 8:u=!0;break;case 9:i=u=!0;break;case 12:u=!0;break;default:u=!1}i&&u&&(u=o.fullData.byteLength,l=new Uint8Array(4),l[0]=u>>24&255,l[1]=u>>16&255,l[2]=u>>8&255,l[3]=255&u,n.push(l),n.push(o.fullData))}return n.length?{data:Kr.apply(Ur,s(n)),$c:t}:null}function Sw(e){if(!e.length)return null;var t=e.find(function(e){return 32==e.type}),n=e.find(function(e){return 33==e.type}),r=e.find(function(e){return 34==e.type});if(!t||!n||!r)return null;var i=Ew(t.fullData);e=kw(n.fullData);var o=Aw(r.fullData);return t=xw(t.fullData,n.fullData,r.fullData,{Ze:i.Ze,wf:i.wf,Ee:e.Ee,Fe:e.Fe,ye:e.ye,De:e.De,ze:e.ze,Ae:e.Ae,Be:e.Be,Ce:e.Ce,se:e.se,te:e.te,ue:e.ue,ve:e.ve,we:e.we,xe:e.xe,pe:e.pe,Sd:e.Sd,oe:e.oe,ne:e.ne,me:e.me,cf:o.cf}),{height:e.height,width:e.width,ma:t,ra:e.Yh,ua:e.Xh}}function Ew(e){var t=new xo(e,!0);return Lo(t),Lo(t),Mo(t,4),Mo(t,2),Mo(t,6),e=Mo(t,3),t=Ro(t),{Ze:e+1,wf:t}}function kw(e){e=new xo(e,!0),Lo(e),Lo(e);var t=0,n=0,r=0,i=0;Mo(e,4);var o=Mo(e,3);Ro(e);for(var a=Mo(e,2),s=Mo(e,1),u=Mo(e,5),l=Lo(e),c=Lo(e),d=Lo(e),h=Lo(e),f=Lo(e),p=Lo(e),g=Lo(e),y=Lo(e),v=Lo(e),m=Lo(e),b=Lo(e),w=[],_=[],T=0;T<o;T++)w.push(Ro(e)),_.push(Ro(e));if(0<o)for(T=o;8>T;T++)Mo(e,2);for(T=0;T<o;T++)w[T]&&Mo(e,88),_[T]&&Lo(e);jo(e),w=jo(e),3==w&&Mo(e,1),_=jo(e),T=jo(e),Ro(e)&&(t+=jo(e),n+=jo(e),r+=jo(e),i+=jo(e));var S=jo(e),E=jo(e),k=jo(e);if(Ro(e))for(var A=0;A<=o;A++)jo(e),jo(e),jo(e);else jo(e),jo(e),jo(e);if(jo(e),jo(e),jo(e),jo(e),jo(e),jo(e),Ro(e)&&Ro(e))for(A=0;4>A;A++)for(var x=0;x<(3===A?2:6);x++)if(Ro(e)){var C=Math.min(64,1<<4+(A<<1));1<A&&Do(e);for(var I=0;I<C;I++)Do(e)}else jo(e);for(Ro(e),Ro(e),Ro(e)&&(Lo(e),jo(e),jo(e),Ro(e)),A=jo(e),C=x=0;C<A;C++)if(I=!1,0!==C&&(I=Ro(e)),I){C===A&&jo(e),Ro(e),jo(e);for(var M=I=0;M<=x;M++){var O=Ro(e),P=!1;O||(P=Ro(e)),(O||P)&&I++}x=I}else{for(M=jo(e),I=jo(e),x=M+I,O=0;O<M;O++)jo(e),Ro(e);for(M=0;M<I;M++)jo(e),Ro(e)}if(Ro(e))for(A=jo(e),x=0;x<A;x++){for(C=0;C<k+4;C++)Mo(e,1);Mo(e,1)}if(A=k=1,x=0,Ro(e),Ro(e),Ro(e)){if(Ro(e)&&(C=Lo(e),I=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],M=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<C&&16>=C?(k=I[C-1],A=M[C-1]):255===C&&(k=Mo(e,16),A=Mo(e,16))),Ro(e)&&Ro(e),Ro(e)&&(Mo(e,3),Ro(e),Ro(e)&&(Lo(e),Lo(e),Lo(e))),Ro(e)&&(jo(e),jo(e)),Ro(e),Ro(e),Ro(e),(C=Ro(e))&&(jo(e),jo(e),jo(e),jo(e)),Ro(e)&&(Mo(e,32),Mo(e,32),Ro(e)&&jo(e),Ro(e)))for(M=!1,C=Ro(e),I=Ro(e),(C||I)&&((M=Ro(e))&&(Lo(e),Mo(e,5),Ro(e),Mo(e,5)),Mo(e,4),Mo(e,4),M&&Mo(e,4),Mo(e,5),Mo(e,5),Mo(e,5)),O=0;O<=o;O++){var j=!0;P=1,Ro(e)||(j=Ro(e));var D=!1;if(j?jo(e):D=Ro(e),D||(P=jo(e)+1),C){for(j=0;j<P;j++)jo(e),jo(e),M&&(jo(e),jo(e));Ro(e)}if(I){for(j=0;j<P;j++)jo(e),jo(e),M&&(jo(e),jo(e));Ro(e)}}Ro(e)&&(Ro(e),Ro(e),Ro(e),x=jo(e),jo(e),jo(e),jo(e),jo(e))}return{ye:b,Ee:a,Fe:s,De:u,ze:l,Ae:c,Be:d,Ce:h,se:f,te:p,ue:g,ve:y,we:v,xe:m,Sd:x,pe:0,oe:w,ne:S,me:E,width:_-(t+n)*(1===w||2===w?2:1),height:T-(r+i)*(1===w?2:1),Yh:k,Xh:A}}function Aw(e){var t=new xo(e,!0);Lo(t),Lo(t),jo(t),jo(t),Ro(t),Ro(t),Mo(t,3),Ro(t),Ro(t),jo(t),jo(t),Do(t),Ro(t),Ro(t),Ro(t)&&jo(t),Do(t),Do(t),Ro(t),Ro(t),Ro(t),Ro(t),e=Ro(t),t=Ro(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{cf:n}}function xw(e,t,n,r){var i=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return i[0]=1,i[1]=(3&r.Ee)<<6|(r.Fe?1:0)<<5|31&r.De,i[2]=r.ze,i[3]=r.Ae,i[4]=r.Be,i[5]=r.Ce,i[6]=r.se,i[7]=r.te,i[8]=r.ue,i[9]=r.ve,i[10]=r.we,i[11]=r.xe,i[12]=r.ye,i[13]=240|(3840&r.Sd)>>8,i[14]=255&r.Sd,i[15]=252|3&r.cf,i[16]=252|3&r.oe,i[17]=248|7&r.ne,i[18]=248|7&r.me,i[19]=0,i[20]=0,i[21]=(3&r.pe)<<6|(7&r.Ze)<<3|(r.wf?1:0)<<2|3,i[22]=3,i[23]=160,i[24]=0,i[25]=1,i[26]=(65280&e.byteLength)>>8,i[27]=(255&e.byteLength)>>0,i.set(e,28),i[23+(5+e.byteLength)]=161,i[e.byteLength+29]=0,i[e.byteLength+30]=1,i[e.byteLength+31]=(65280&t.byteLength)>>8,i[e.byteLength+32]=(255&t.byteLength)>>0,i.set(t,e.byteLength+33),i[23+(e.byteLength+10+t.byteLength)]=162,i[e.byteLength+10+t.byteLength+24]=0,i[e.byteLength+10+t.byteLength+25]=1,i[e.byteLength+10+t.byteLength+26]=(65280&n.byteLength)>>8,i[e.byteLength+10+t.byteLength+27]=(255&n.byteLength)>>0,i.set(n,e.byteLength+10+t.byteLength+28),i}function Cw(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,o=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==o){var a=e[t+3]>>6;i=1e3*jk[14*(3===n?3-r:3===r?3:4)+i-1],o=Dk[3*(3===n?0:2===n?1:2)+o],n=Rk[n][r];var s=Lk[r],u=Math.floor(n*i/o+(e[t+2]>>1&1))*s,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&87>=l&&2===r&&224e3<=i&&0===a&&(e[t+3]|=128),{sampleRate:o,channelCount:3===a?1:2,S:u,Wh:8*n*s}}return null}function Iw(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function Mw(e,t){if(t+1<e.length&&Iw(e,t)){var n=Cw(e,t),r=4;return n&&n.S&&(r=n.S),(t+=r)===e.length||t+1<e.length&&Iw(e,t)}return!1}function Ow(e){this.i=e,this.h=0,this.g=new Map}function Pw(e){this.h=e,this.g=null}/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/
function jw(e){this.h=e,(this.g=vE.get("ISOBoxer")())&&Dw(this)}function Dw(e){function t(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var e=!0,n=0;16>n;n++)this.usertype[n]!==Nk[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))})}function Rw(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}function Lw(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function Nw(){}function Uw(){Bk?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Bk=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Fw):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Fw(e,t){var n,r=this;return A(function(i){return 1==i.g?(navigator,h(i,Bk.call(r,e,t),2)):(n=i.h,Yw(n)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Bk,i.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Bw,i.return(Bw.call(r,e,t))))})}function Bw(e,t){var n,r,i,o,s,u,l,c,d,f,p=this;return A(function(g){if(1==g.g){for(navigator,n=Xw(e),r=[],i=a(t),o=i.next();!o.done;o=i.next())s=o.value,u=Vw(s.videoCapabilities,n),l=Vw(s.audioCapabilities,n),s.videoCapabilities&&s.videoCapabilities.length&&!u.length||s.audioCapabilities&&s.audioCapabilities.length&&!l.length||(c=Object.assign({},s),c.videoCapabilities=u,c.audioCapabilities=l,r.push(c));if(!r.length)throw d=Error("Unsupported keySystem or supportedConfigurations."),d.name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return h(g,Bk.call(p,e,r),2)}return f=g.h,g.return(new zw(f,n))})}function Vw(e,t){return e?e.filter(function(e){return!e.encryptionScheme||e.encryptionScheme==t}):e}function Hw(){}function Ww(){Vk?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Vk=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=Kw):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Kw(e){var t,n,r,i=this;return A(function(o){switch(o.g){case 1:return navigator.mediaCapabilities,h(o,Vk.call(i,e),2);case 2:if(t=o.h,!e.keySystemConfiguration)return o.return(t);if((n=t.keySystemAccess)&&Yw(n))return navigator.mediaCapabilities.decodingInfo=Vk,o.return(t);if(navigator.mediaCapabilities.decodingInfo=qw,n){o.B(3);break}return r=t,h(o,Gw(e),4);case 4:return r.keySystemAccess=o.h,o.return(t);case 3:return o.return(qw.call(i,e))}})}function qw(e){var t,n,r,i,o,a,s,u,l=this;return A(function(c){switch(c.g){case 1:return navigator.mediaCapabilities,t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,r=n.keySystem,i=n.audio&&n.audio.encryptionScheme,o=n.video&&n.video.encryptionScheme,t=Xw(r),a={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},i&&i!=t||o&&o!=t)?c.return(a):h(c,Vk.call(l,e),2);case 2:if(s=c.h,s.keySystemAccess){s.keySystemAccess=new zw(s.keySystemAccess,t),c.B(3);break}if(!e.keySystemConfiguration){c.B(3);break}return u=s,h(c,Gw(e),5);case 5:u.keySystemAccess=c.h;case 3:return c.return(s)}})}function Gw(e){var t,n;return A(function(r){if(1==r.g){var i=e.keySystemConfiguration,o=[],a=[];return i.audio&&o.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType}),i.video&&a.push({robustness:i.video.robustness||"",contentType:e.video.contentType}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},o.length&&(i.audioCapabilities=o),a.length&&(i.videoCapabilities=a),t=i,h(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}function zw(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function Xw(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":e.startsWith("com.tvkey")?"cenc":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Yw(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function Jw(){}function Qw(){Uw(),Ww()}var $w,Zw="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype?e:(e[t]=n.value,e)},e_=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var r=0;r<n.length;++r){var i=n[r];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);i("Symbol",function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(e||"")+"_"+i++,e)}function n(e,t){this.g=e,Zw(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return t}),i("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=e_[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&Zw(i.prototype,e,{configurable:!0,writable:!0,value:function(){return o(r(this))}})}return e});var t_,n_="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)t_=Object.setPrototypeOf;else{var r_;e:{var i_={a:!0},o_={};try{o_.__proto__=i_,r_=o_.a;break e}catch(e){}r_=!1}t_=r_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var a_=t_;l.prototype.s=function(e){this.h=e},l.prototype.return=function(e){this.i={return:e},this.g=this.j},l.prototype.B=function(e){this.g=e},i("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var i=e_.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.C(e):this.m(e)}},t.prototype.C=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.J(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.u()},t.prototype.G=function(){var e=this;i(function(){if(e.A()){var t=e_.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.A=function(){if(this.o)return!1;var e=e_.CustomEvent,t=e_.Event,n=e_.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=e_.document.createEvent("CustomEvent"),e.initCustomEvent("unhandledrejection",!1,!0,e)),e.promise=this,e.reason=this.i,n(e))},t.prototype.u=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.H=function(e){var t=this.j();e.td(t.resolve,t.reject)},t.prototype.J=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t(function(e,t){i=e,o=t});return this.td(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.td=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=a(e),o=i.next();!o.done;o=i.next())r(o.value).td(t,n)})},t.all=function(e){var n=a(e),i=n.next();return i.done?r([]):new t(function(e,t){var o=[],a=0;do{o.push(void 0),a++,r(i.value).td(function(t){return function(n){o[t]=n,0==--a&&e(o)}}(o.length-1),t),i=n.next()}while(!i.done)})},t}),i("WeakMap",function(e){function t(e){if(this.g=(u+=Math.random()+1).toString(),e){e=a(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!C(e,s)){var t=new n;Zw(e,s,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&i(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(i(e),!C(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.g]=t,this},t.prototype.get=function(e){return r(e)&&C(e,s)?e[s][this.g]:void 0},t.prototype.has=function(e){return r(e)&&C(e,s)&&C(e[s],this.g)},t.prototype.delete=function(e){return!!(r(e)&&C(e,s)&&C(e[s],this.g))&&delete e[s][this.g]},t}),i("Map",function(e){function t(){var e={};return e.qb=e.next=e.head=e}function n(e,t){var n=e.g;return o(function(){if(n){for(;n.head!=e.g;)n=n.qb;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?s.has(t)?n=s.get(t):(n=""+ ++u,s.set(t,n)):n="p_"+t;var r=e.h[n];if(r&&C(e.h,n))for(e=0;e<r.length;e++){var i=r[e];if(t!==t&&i.key!==i.key||t===i.key)return{id:n,list:r,index:e,entry:i}}return{id:n,list:r,index:-1,entry:void 0}}function i(e){if(this.h={},this.g=t(),this.size=0,e){e=a(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(a([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&(i=r.next(),!(i.done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done))}catch(e){return!1}}())return e;var s=new WeakMap;i.prototype.set=function(e,t){e=0===e?0:e;var n=r(this,e);return n.list||(n.list=this.h[n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this.g,qb:this.g.qb,head:this.g,key:e,value:t},n.list.push(n.entry),this.g.qb.next=n.entry,this.g.qb=n.entry,this.size++),this},i.prototype.delete=function(e){return e=r(this,e),!(!e.entry||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.entry.qb.next=e.entry.next,e.entry.next.qb=e.entry.qb,e.entry.head=null,this.size--,!0)},i.prototype.clear=function(){this.h={},this.g=this.g.qb=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).entry},i.prototype.get=function(e){return(e=r(this,e).entry)&&e.value},i.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},i.prototype.keys=function(){return n(this,function(e){return e.key})},i.prototype.values=function(){return n(this,function(e){return e.value})},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var u=0;return i}),i("Set",function(e){function t(e){if(this.g=new Map,e){e=a(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(a([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(i=r.next(),!i.done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach(function(r){return e.call(t,r,r,n)})},t)}),i("Array.prototype.keys",function(e){return e||function(){return I(this,function(e){return e})}}),i("Array.prototype.findIndex",function(e){return e||function(e,t){return M(this,e,t).Wf}}),i("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}}),i("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}}),i("String.prototype.includes",function(e){return e||function(e,t){return-1!==O(this,e,"includes").indexOf(e,t||0)}}),i("Array.prototype.find",function(e){return e||function(e,t){return M(this,e,t).v}}),i("String.prototype.startsWith",function(e){return e||function(e,t){var n=O(this,e,"startsWith"),r=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var o=0;o<i&&t<r;)if(n[t++]!=e[o++])return!1;return o>=i}}),i("WeakSet",function(e){function t(e){if(this.g=new WeakMap,e){e=a(e);for(var t;!(t=e.next()).done;)this.add(t.value)}}return function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([t]);return!(!r.has(t)||r.has(n))&&(r.delete(t),r.add(n),!r.has(t)&&r.has(n))}catch(e){return!1}}()?e:(t.prototype.add=function(e){return this.g.set(e,!0),this},t.prototype.has=function(e){return this.g.has(e)},t.prototype.delete=function(e){return this.g.delete(e)},t)}),i("Array.from",function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var o=0;!(i=e.next()).done;)r.push(t.call(n,i.value,o++))}else for(i=e.length,o=0;o<i;o++)r.push(t.call(n,e[o],o));return r}});var s_="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)C(r,i)&&(e[i]=r[i])}return e};i("Object.assign",function(e){return e||s_}),i("Array.prototype.values",function(e){return e||function(){return I(this,function(e,t){return t})}}),i("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),i("Array.prototype.entries",function(e){return e||function(){return I(this,function(e,t){return[e,t]})}}),i("String.prototype.repeat",function(e){return e||function(e){var t=O(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),i("Number.isNaN",function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),i("Number.isFinite",function(e){return e||function(e){return"number"==typeof e&&(!isNaN(e)&&1/0!==e&&-1/0!==e)}}),i("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)C(e,t)&&n.push(e[t]);return n}}),i("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}}),i("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),i("Math.trunc",function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}}),i("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)C(e,t)&&n.push([t,e[t]]);return n}});var u_=this||self;R.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},N.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},N.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},N.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(L(this.h),L(this.j))};var l_;P("shaka.log",U),U.alwaysWarn=B,U.alwaysError=F,U.error=H,U.warning=W,U.info=K,U.debug=q,U.v1=G,U.v2=z,U.Level={NONE:0,ERROR:1,hj:2,Bi:3,pi:4,dj:5,ej:6},U.MAX_LOG_LEVEL=0;var c_=new Set;U.setLevel=X,U.init=Y,Y(),$w=J.prototype,$w.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},$w.get=function(e){return(e=this.g[e])?e.slice():null},$w.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(e){return e!=t}),0==this.g[e].length&&delete this.g[e])},$w.forEach=function(e){for(var t in this.g)e(t,this.g[t])},$w.size=function(){return Object.keys(this.g).length},$w.keys=function(){return Object.keys(this.g)},$w=Q.prototype,$w.release=function(){this.Za(),this.g=null},$w.D=function(e,t,n,r){this.g&&(e=new $(e,t,n,r),this.g.push(t,e))},$w.la=function(e,t,n,r){function i(r){o.Cb(e,t,i),n(r)}var o=this;this.D(e,t,i,r)},$w.Cb=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=a(r);for(var i=r.next();!i.done;i=r.next())i=i.value,i.target!=e||n!=i.listener&&n||(i.Cb(),this.g.remove(t,i))}},$w.Za=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,s(t.g[e]));for(t=a(n),n=t.next();!n.done;n=t.next())n.value.Cb();this.g.g={}}},P("shaka.util.EventManager",Q),Q.prototype.removeAll=Q.prototype.Za,Q.prototype.unlisten=Q.prototype.Cb,Q.prototype.listenOnce=Q.prototype.la,Q.prototype.listen=Q.prototype.D,Q.prototype.release=Q.prototype.release,$.prototype.Cb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var d_=void 0,h_=new Map;re.prototype.extract=function(){},re.prototype.decode=function(){return[]},re.prototype.clear=function(){},re.prototype.getStreams=function(){return[]},ie.prototype.init=function(){},ie.prototype.parse=function(){return[]},P("shaka.util.BufferUtils",oe),oe.toDataView=de,oe.toUint16=ce,oe.toUint8=le,oe.toArrayBuffer=ue,oe.equal=ae,fe.prototype.init=function(){},fe.prototype.i=function(){},fe.prototype.h=function(){},fe.prototype.j=function(){},P("shaka.media.IClosedCaptionParser",fe),pe.prototype.init=function(e){this.l.init(e)},pe.prototype.i=function(e){e=this.l.parse(e),e=a(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=le(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},pe.prototype.h=function(){this.g.clear()},pe.prototype.j=function(){return this.g.getStreams()},P("shaka.media.ClosedCaptionParser",pe),pe.findDecoder=function(){return p_},pe.unregisterDecoder=function(){p_=null},pe.registerDecoder=function(e){p_=e},pe.findParser=function(e){return f_[e]},pe.unregisterParser=function(e){delete f_[e]},pe.registerParser=function(e,t){f_[e]=t};var f_={},p_=null;be.prototype.clone=function(){var e,t=new be(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},P("shaka.text.Cue",be),be.equal=_e,be.prototype.clone=be.prototype.clone;var g_="auto";be.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:g_};var y_="center",v_={LEFT:"left",RIGHT:"right",CENTER:y_,START:"start",END:"end"};be.textAlign=v_;var m_="after",b_={BEFORE:"before",CENTER:"center",AFTER:m_};be.displayAlign=b_;var w_="ltr";be.direction={HORIZONTAL_LEFT_TO_RIGHT:w_,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var __="horizontal-tb";be.writingMode={HORIZONTAL_TOP_TO_BOTTOM:__,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var T_=0;be.lineInterpretation={LINE_NUMBER:T_,PERCENTAGE:1};var S_="start",E_={CENTER:"center",START:S_,END:"end"};be.lineAlign=E_;var k_={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};be.defaultTextColor=k_;var A_={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};be.defaultTextBackgroundColor=A_;var x_=400;be.fontWeight={NORMAL:x_,BOLD:700};var C_="normal",I_={NORMAL:C_,ITALIC:"italic",OBLIQUE:"oblique"};be.fontStyle=I_,be.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},P("shaka.text.CueRegion",Te);var M_=1;Te.units={PX:0,PERCENTAGE:M_,LINES:2};var O_="";Te.scrollMode={NONE:O_,UP:"up"},Se.prototype.destroy=function(){},P("shaka.transmuxer.TransmuxerEngine",Se),Se.findTransmuxer=ke,Se.unregisterTransmuxer=function(e,t){delete P_[e.toLowerCase().split(";")[0]+"-"+t]},Se.registerTransmuxer=Ee,Se.prototype.destroy=Se.prototype.destroy;var P_={},j_=1,D_=2,R_=3,L_=4;Se.PluginPriority={FALLBACK:j_,PREFERRED_SECONDARY:D_,PREFERRED:R_,APPLICATION:L_};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
var N_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");$w=Ae.prototype,$w.ab="",$w.Xb="",$w.mb="",$w.oc=null,$w.Fa="",$w.Kb="",$w.toString=function(){var e=[],t=this.ab;if(t&&e.push(Pe(t,U_,!0),":"),t=this.mb){e.push("//");var n=this.Xb;n&&e.push(Pe(n,U_,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.oc,null!=t&&e.push(":",String(t))}return(t=this.Fa)&&(this.mb&&"/"!=t.charAt(0)&&e.push("/"),e.push(Pe(t,"/"==t.charAt(0)?B_:F_,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Kb)&&e.push("#",Pe(t,H_)),e.join("")},$w.resolve=function(e){var t=this.clone();"data"===t.ab&&(t=new Ae);var n=!!e.ab;n?xe(t,e.ab):n=!!e.Xb,n?t.Xb=e.Xb:n=!!e.mb,n?Ce(t,e.mb):n=null!=e.oc;var r=e.Fa;if(n)Ie(t,e.oc);else if(n=!!e.Fa){if("/"!=r.charAt(0))if(this.mb&&!this.Fa)r="/"+r;else{var i=t.Fa.lastIndexOf("/");-1!=i&&(r=t.Fa.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}r=o.join("/")}}return n?t.Fa=r:n=""!==e.g.toString(),n?Me(t,e.g.clone()):n=!!e.Kb,n&&(t.Kb=e.Kb),t},$w.clone=function(){return new Ae(this)};var U_=/[#\/\?@]/g,F_=/[#\?:]/g,B_=/[#\?]/g,V_=/[#\?@]/g,H_=/#/g;$w=De.prototype,$w.xa=null,$w.Rc=null,$w.add=function(e,t){Re(this),this.g=null;var n=this.xa.hasOwnProperty(e)?this.xa[e]:null;return n||(this.xa[e]=n=[]),n.push(t),this.Rc++,this},$w.set=function(e,t){return Re(this),this.g=null,this.xa.hasOwnProperty(e)?this.xa[e]=[t]:this.add(e,t),this},$w.get=function(e){return Re(this),this.xa[e]||[]},$w.toString=function(){if(this.g)return this.g;if(!this.xa)return"";var e,t=[];for(e in this.xa)for(var n=encodeURIComponent(e),r=this.xa[e],i=0;i<r.length;i++){var o=n;""!==r[i]&&(o+="="+encodeURIComponent(r[i])),t.push(o)}return this.g=t.join("&")},$w.clone=function(){var e=new De;if(e.g=this.g,this.xa){var t,n={};for(t in this.xa)n[t]=this.xa[t].concat();e.xa=n,e.Rc=this.Rc}return e},Ne.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},P("shaka.util.Error",Ne);var W_=!0;Ne.Severity={RECOVERABLE:1,CRITICAL:2};var K_={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10};Ne.Category=K_;var q_={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};Ne.Code=q_;var G_="text",z_={$:"video",P:"audio",ia:G_,ie:"image",ji:"application"},X_=1/15,Y_={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/,/^iamf/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/],text:[/^vtt$/,/^wvtt/,/^stpp/]};P("shaka.util.MimeUtils",He),He.getFullTypeWithAllCodecs=Ke,He.getFullType=We;var J_=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Q_=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];et.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()},et.prototype.remove=function(e,t){var n=this;return A(function(r){if(1==r.g)return h(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),f(r)})},P("shaka.text.TextEngine",et),et.prototype.destroy=et.prototype.destroy,et.findParser=function(e){return $_[e]},et.unregisterParser=function(e){delete $_[e]},et.registerParser=function(e,t){$_[e]=t};var $_={};P("shaka.util.LanguageUtils",ct),ct.findClosestLocale=mt,ct.getLocaleForVariant=vt,ct.getLocaleForText=function(e){return pt(e.language||"und")},ct.getBase=yt,ct.relatedness=gt,ct.areSiblings=function(e,t){var n=yt(e),r=yt(t);return e!=n&&t!=r&&n==r},ct.normalize=pt,ct.isSiblingOf=ft,ct.isParentOf=ht,ct.areLanguageCompatible=dt,ct.areLocaleCompatible=function(e,t){return e=pt(e),t=pt(t),e==t};var Z_=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);_t.prototype.U=function(t){var n=this;this.stop();var r=!0,i=null;return this.g=function(){e.clearTimeout(i),r=!1},i=e.setTimeout(function(){r&&n.h()},1e3*t),this},_t.prototype.stop=function(){this.g&&(this.g(),this.g=null)},Tt.prototype.sc=function(){return this.stop(),this.h(),this},Tt.prototype.U=function(e){var t=this;return this.stop(),this.g=new _t(function(){t.h()}).U(e),this},Tt.prototype.$a=function(e){var t=this;return this.stop(),this.g=new _t(function(){t.g.U(e),t.h()}).U(e),this},Tt.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},P("shaka.util.Timer",Tt),Tt.prototype.stop=Tt.prototype.stop,Tt.prototype.tickEvery=Tt.prototype.$a,Tt.prototype.tickAfter=Tt.prototype.U,Tt.prototype.tickNow=Tt.prototype.sc;var eT=null,tT=null;P("shaka.util.StreamUtils",Ut),Ut.meetsRestrictions=Ht;var nT={},rT=0,iT=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),oT=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");$w=yn.prototype,$w.stop=function(){this.u=null,this.j=!1,this.o=[],this.A=1,this.m=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.l=null},$w.release=function(){this.F.release(),this.C=null},$w.init=function(e){this.u=e},$w.chooseVariant=function(t){t=void 0!==t&&t;var n=1/0,r=1/0;if(this.g.restrictToScreenSize&&(r=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,n=e.screen.height*r,r*=e.screen.width),this.h&&this.g.restrictToElementSize){var i=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio;n=Math.min(n,this.m.clientHeight*i),r=Math.min(r,this.m.clientWidth*i)}var o=this.o.filter(function(e){return!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)});if(o.length||(o=this.o),i=o,t&&o.length!=this.o.length&&(i=this.o.filter(function(e){return!!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})),t=mn(this,this.g.restrictions,i,1/0,1/0),1/0!=n||1/0!=r){for(t=bn(t),t=a(t),o=t.next();!o.done;o=t.next())if(o=o.value,o.height>=n&&o.width>=r){n=o.height,r=o.width;break}t=mn(this,this.g.restrictions,i,n,r)}for(n=this.getBandwidthEstimate(),i.length&&!t.length&&(W("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),t=mn(this,null,i,1/0,1/0),t=[t[0]]),r=t[0]||null,i=0;i<t.length;i++){o=t[i];for(var s=isNaN(this.A)?1:Math.abs(this.A),u=s*o.bandwidth,l=u/this.g.bandwidthDowngradeTarget,c={bandwidth:1/0},d=i+1;d<t.length;d++)if(o.bandwidth!=t[d].bandwidth){c=t[d];break}s=s*c.bandwidth/this.g.bandwidthUpgradeTarget,z("Bandwidth ranges:",(u/1e6).toFixed(3),(l/1e6).toFixed(3),(s/1e6).toFixed(3)),n>=l&&n<=s&&r.bandwidth!=o.bandwidth&&(r=o)}return this.s=Date.now(),r},$w.enable=function(){this.j=!0},$w.disable=function(){this.j=!1},$w.segmentDownloaded=function(e,t,n){z("Segment downloaded:","deltaTimeMs="+e,"numBytes="+t,"lastTimeChosenMs="+this.s,"enabled="+this.j),this.i.sample(e,t),n&&null!=this.s&&this.j&&vn(this)},$w.trySuggestStreams=function(){null!=this.s&&this.j&&vn(this)},$w.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.l?this.l.getBandwidthEstimate(e):e},$w.setVariants=function(e){this.o=e},$w.playbackRateChanged=function(e){this.A=e},$w.setMediaElement=function(t){var n=this;this.m=t,this.h&&(this.h.disconnect(),this.h=null),this.m&&"ResizeObserver"in e&&(this.h=new ResizeObserver(function(){n.C.U(aT)}),this.h.observe(this.m))},$w.setCmsdManager=function(e){this.l=e},$w.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},P("shaka.abr.SimpleAbrManager",yn),yn.prototype.configure=yn.prototype.configure,yn.prototype.setCmsdManager=yn.prototype.setCmsdManager,yn.prototype.setMediaElement=yn.prototype.setMediaElement,yn.prototype.playbackRateChanged=yn.prototype.playbackRateChanged,yn.prototype.setVariants=yn.prototype.setVariants,yn.prototype.getBandwidthEstimate=yn.prototype.getBandwidthEstimate,yn.prototype.trySuggestStreams=yn.prototype.trySuggestStreams,yn.prototype.segmentDownloaded=yn.prototype.segmentDownloaded,yn.prototype.disable=yn.prototype.disable,yn.prototype.enable=yn.prototype.enable,yn.prototype.chooseVariant=yn.prototype.chooseVariant,yn.prototype.init=yn.prototype.init,yn.prototype.release=yn.prototype.release,yn.prototype.stop=yn.prototype.stop;var aT=1;wn.prototype.toString=function(){return"v"+this.g+"."+this.h};var sT=null;P("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),P("shaka.config.CodecSwitchingStrategy",{Ni:"reload",Bg:"smooth"}),En.prototype.add=function(e,t,n){return kn(this.h,e,void 0===t||t,void 0!==n&&n)?(this.g.add(e),!0):(W("Rejecting variant - not compatible with root."),!1)},En.prototype.values=function(){return this.g.values()},Cn.prototype.create=function(e){var t=this,n="smooth"==this.h&&ne(),r=e.filter(function(e){return kn(t.i,e,!n,t.g)});return r.length?new En(r[0],r,!n,this.g):this.j.create(e)},In.prototype.create=function(e){var t=[];t=Mn(e,this.A);var n=e.filter(function(e){return e.primary});return t=t.length?t:n.length?n:e,e=On(t,this.C),e.length?t=e:W("No exact match for variant role could be found."),this.o&&(e=Un(t,this.o),e.length?t=e:W("No exact match for the video layout could be found.")),this.l&&(e=Nn(t,this.l),e.length?t=e:W("No exact match for the hdr level could be found.")),this.j&&(e=Dn(t,this.j),e.length?t=e:W("No exact match for the channel count could be found.")),this.h&&(e=Rn(t,this.h),e.length?t=e:W("No exact match for the channel config could be found.")),this.g&&(e=Ln(t,this.g),e.length?t=e:W("No exact match for the accessibility purpose could be found.")),this.i&&(e=Pn(t,this.i),e.length?t=e:W("No exact match for audio label could be found.")),this.m&&(e=jn(t,this.m),e.length?t=e:W("No exact match for video label could be found.")),e=Fn(t,this.F),e.length?t=e:W("No exact match for spatial audio could be found."),new En(t[0],t,!("smooth"==this.s&&ne()),this.u)};var uT=0,lT=1;qn.prototype.resolve=function(){},qn.prototype.reject=function(){},Gn.prototype.abort=function(){return this.g=!0,this.i()},Gn.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Gn.prototype.oa=function(e,t){function n(n){return function(s){if(i.g&&n)o.reject(a);else{var u=n?e:t;u?r=$n(u,s,o):(n?o.resolve:o.reject)(s)}}}function r(){return o.reject(a),i.abort()}var i=this,o=new qn,a=new Ne(2,7,7001);return this.promise.then(n(!0),n(!1)),new Gn(o,function(){return r()})},P("shaka.util.AbortableOperation",Gn),Gn.prototype.chain=Gn.prototype.oa,Gn.prototype.finally=Gn.prototype.finally,Gn.all=Qn,Gn.prototype.abort=Gn.prototype.abort,Gn.notAbortable=Jn,Gn.completed=Yn,Gn.aborted=Xn,Gn.failed=zn,Zn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Zn.prototype.stopImmediatePropagation=function(){this.g=!0},Zn.prototype.stopPropagation=function(){},P("shaka.util.FakeEvent",Zn);var cT={li:"abrstatuschanged",mi:"adaptation",ni:"buffering",oi:"complete",ri:"downloadfailed",si:"downloadheadersreceived",ti:"drmsessionupdate",vi:"emsg",Mi:"prft",Error:"error",wi:"expirationupdated",xi:"firstquartile",yi:"gapjumped",Ci:"keystatuschanged",Ei:"loaded",Fi:"loading",Hi:"manifestparsed",Ii:"manifestupdated",Ji:"mediaqualitychanged",Metadata:"metadata",Ki:"midpoint",Li:"onstatechange",Oi:"ratechange",Pi:"segmentappended",Qi:"sessiondata",Ri:"stalldetected",Si:"started",Ti:"statechanged",Ui:"streaming",Vi:"textchanged",Wi:"texttrackvisibility",Xi:"thirdquartile",Yi:"timelineregionadded",Zi:"timelineregionenter",$i:"timelineregionexit",aj:"trackschanged",cj:"unloading",gj:"variantchanged"};tr.prototype.addEventListener=function(e,t){this.ha&&this.ha.push(e,t)},tr.prototype.removeEventListener=function(e,t){this.ha&&this.ha.remove(e,t)},tr.prototype.dispatchEvent=function(e){if(!this.ha)return!0;var t=this.ha.get(e.type)||[],n=this.ha.get("All");for(n&&(t=t.concat(n)),t=a(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Cd,e.currentTarget=this.Cd;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){H("Uncaught exception in event handler",e,e?e.message:null,e?e.stack:null)}if(e.g)break}return e.defaultPrevented},tr.prototype.release=function(){this.ha=null},nr.prototype.destroy=function(){for(var e=[],t=a(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},u(ir,tr),$w=ir.prototype,$w.rf=function(e){this.o=e},$w.Nh=function(e){this.g.add(e)},$w.fi=function(e){this.g.delete(e)},$w.Kg=function(){this.g.clear()},$w.Oh=function(e){this.h.add(e)},$w.gi=function(e){this.h.delete(e)},$w.Lg=function(){this.h.clear()},$w.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),tr.prototype.release.call(this),this.m.destroy()},$w.request=function(e,t,n){var r=this,i=new dr;if(this.i){var o=Promise.reject(new Ne(2,7,7001));return o.catch(function(){}),new hr(o,function(){return Promise.resolve()},i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?bt(t.retryParameters):Kn(),t.uris=bt(t.uris),o=sr(this,e,t,n);var a=o.oa(function(){return ur(r,e,t,n,new Hn(t.retryParameters,!1),0,null,i)}),s=a.oa(function(t){return lr(r,e,t,n)}),u=Date.now(),l=0;o.promise.then(function(){l=Date.now()-u},function(){});var c=0;a.promise.then(function(){c=Date.now()},function(){});var d=s.oa(function(i){var o=Date.now()-c,a=i.response;return a.timeMs+=l,a.timeMs+=o,i.uh||!r.l||a.fromCache||"HEAD"==t.method||e!=dT||r.l(a.timeMs,a.data.byteLength,cr(n)),a},function(e){throw e&&(e.severity=2),e});return o=new hr(d.promise,function(){return d.abort()},i),rr(this.m,o),o},P("shaka.net.NetworkingEngine",ir),ir.prototype.request=ir.prototype.request,ir.prototype.destroy=ir.prototype.destroy,ir.makeRequest=ar,ir.defaultRetryParameters=function(){return Kn()},ir.prototype.clearAllResponseFilters=ir.prototype.Lg,ir.prototype.unregisterResponseFilter=ir.prototype.gi,ir.prototype.registerResponseFilter=ir.prototype.Oh,ir.prototype.clearAllRequestFilters=ir.prototype.Kg,ir.prototype.unregisterRequestFilter=ir.prototype.fi,ir.prototype.registerRequestFilter=ir.prototype.Nh,ir.unregisterScheme=function(e){delete fT[e]},ir.registerScheme=or,ir.prototype.setForceHTTPS=ir.prototype.rf,ir.NumBytesRemainingClass=dr,u(hr,Gn),ir.PendingRequest=hr;var dT=1;ir.RequestType={MANIFEST:0,SEGMENT:dT,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},ir.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var hT=3;ir.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:hT};var fT={};fr.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},vr.prototype.value=function(){return void 0==this.g&&(this.g=this.h()),this.g},P("shaka.util.StringUtils",wr),wr.resetFromCharCode=function(){pT.g=void 0},wr.toUTF16=kr,wr.toUTF8=Er,wr.fromBytesAutoDetect=Sr,wr.fromUTF16=Tr,wr.fromUTF8=_r;var pT=new vr(function(){for(var e={vb:65536};0<e.vb;e={vb:e.vb},e.vb/=2)if(function(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}(e.vb))return function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.vb)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.vb));return n}}(e);return null});$w=xr.prototype,$w.ea=function(){return this.g<this.h.byteLength},$w.pa=function(){return this.g},$w.getLength=function(){return this.h.byteLength},$w.fa=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(e){throw Cr()}},$w.ya=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(e){throw Cr()}},$w.M=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(e){throw Cr()}},$w.hg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(e){throw Cr()}},$w.pc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(e){throw Cr()}if(2097151<t)throw new Ne(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},$w.rb=function(e){if(this.g+e>this.h.byteLength)throw Cr();var t=le(this.h,this.g,e);return this.g+=e,t},$w.skip=function(e){if(this.g+e>this.h.byteLength)throw Cr();this.g+=e},$w.Vh=function(e){if(this.g<e)throw Cr();this.g-=e},$w.seek=function(e){if(0>e||e>this.h.byteLength)throw Cr();this.g=e},$w.ed=function(){for(var e=this.g;this.ea()&&0!=this.h.getUint8(this.g);)this.g+=1;return e=le(this.h,e,this.g-e),this.g+=1,_r(e)},P("shaka.util.DataViewReader",xr),xr.prototype.readTerminatedString=xr.prototype.ed,xr.prototype.seek=xr.prototype.seek,xr.prototype.rewind=xr.prototype.Vh,xr.prototype.skip=xr.prototype.skip,xr.prototype.readBytes=xr.prototype.rb,xr.prototype.readUint64=xr.prototype.pc,xr.prototype.readInt32=xr.prototype.hg,xr.prototype.readUint32=xr.prototype.M,xr.prototype.readUint16=xr.prototype.ya,xr.prototype.readUint8=xr.prototype.fa,xr.prototype.getLength=xr.prototype.getLength,xr.prototype.getPosition=xr.prototype.pa,xr.prototype.hasMoreData=xr.prototype.ea;var gT=1;xr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:gT},$w=Ir.prototype,$w.box=function(e,t){return e=Rr(e),this.i[e]=yT,this.h[e]=t,this},$w.O=function(e,t){return e=Rr(e),this.i[e]=vT,this.h[e]=t,this},$w.stop=function(){this.g=!0},$w.parse=function(e,t,n){for(e=new xr(e,0),this.g=!1;e.ea()&&!this.g;)this.nc(0,e,t,n)},$w.nc=function(e,t,n,r){var i=t.pa();if(r&&i+8>t.getLength())this.g=!0;else{var o=t.M(),a=t.M(),s=Lr(a),u=!1;switch(z("Parsing MP4 box",s),o){case 0:o=t.getLength()-i;break;case 1:if(r&&t.pa()+8>t.getLength())return void(this.g=!0);o=t.pc(),u=!0}var l=this.h[a];if(l){var c=null,d=null;if(this.i[a]==vT){if(r&&t.pa()+4>t.getLength())return void(this.g=!0);d=t.M(),c=d>>>24,d&=16777215}a=i+o,n&&a>t.getLength()&&(a=t.getLength()),r&&a>t.getLength()?this.g=!0:(r=a-t.pa(),t=0<r?t.rb(r):new Uint8Array(0),t=new xr(t,0),l({name:s,parser:this,partialOkay:n||!1,version:c,flags:d,reader:t,size:o,start:i+e,has64BitSize:u}))}else t.skip(Math.min(i+o-t.pa(),t.getLength()-t.pa()))}},P("shaka.util.Mp4Parser",Ir),Ir.headerSize=Nr,Ir.typeToString=Lr,Ir.allData=Dr,Ir.audioSampleEntry=jr,Ir.visualSampleEntry=Pr,Ir.sampleDescription=Or,Ir.children=Mr,Ir.prototype.parseNext=Ir.prototype.nc,Ir.prototype.parse=Ir.prototype.parse,Ir.prototype.stop=Ir.prototype.stop,Ir.prototype.fullBox=Ir.prototype.O,Ir.prototype.box=Ir.prototype.box;var yT=0,vT=1;P("shaka.util.Uint8ArrayUtils",Ur),Ur.concat=Kr,Ur.toHex=Wr,Ur.fromHex=Hr,Ur.fromBase64=Vr,Ur.toBase64=Br,Ur.toStandardBase64=Fr;var mT=new vr(function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}});$w=pi.prototype,$w.destroy=function(){return this.l.destroy()},$w.configure=function(e){this.h=e},$w.jd=function(e){this.V=e},$w.Mc=function(e){var t=this;return A(function(n){if(1==n.g)return t.u?(t.m=e,t.A.la(t.m,"play",function(){for(var e=a(t.L),n=e.next();!n.done;n=e.next())Li(t,n.value);t.W=!0,t.L=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.A.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Vi(t)}),t.F=t.g?t.g.initData.find(function(e){return 0<e.initData.length})||null:null,t.F||"com.apple.fps"!==t.g.keySystem||t.o.size?h(n,wi(t),2):n.B(2)):(t.A.la(e,"encrypted",function(){t.s(new Ne(2,6,6010))}),n.return());Ei(t).catch(function(){}),t.F||t.o.size||t.h.parseInbandPsshEnabled||t.A.D(t.m,"encrypted",function(e){return _i(t,e)}),f(n)})},$w.hf=function(){for(var e=this,t=(this.g?this.g.initData:[])||[],n=a(t),r=n.next();!r.done;r=n.next())r=r.value,Ri(this,r.initDataType,r.initData,this.g.sessionType);return this.o.size&&this.o.forEach(function(t,n){Di(e,n,t)}),t.length||this.o.size||this.j.resolve(),this.j},$w.Ge=function(){var e=this,t=this.i.keys();return t=gr(t,function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}}),Array.from(t)},$w.Uc=function(){var e=1/0,t=this.i.keys();t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},$w.Vc=function(){return br(this.ga)};var bT=1,wT=5,_T=.5,TT=new vr(function(){return ue(new Uint8Array([0]))}),ST=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");P("shaka.media.ManifestParser",Qi),Qi.unregisterParserByMime=function(e){delete ET[e]},Qi.registerParserByMime=function(e,t){ET[e]=t},Qi.registerParserByExtension=function(){_n("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Qi.AccessibilityPurpose={fj:"visually impaired",zi:"hard of hearing"};var ET={},kT=new vr(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});no.prototype.jc=function(){return this.Pa},no.prototype.ic=function(){return this.wa},P("shaka.media.InitSegmentReference",no),no.prototype.getEndByte=no.prototype.ic,no.prototype.getStartByte=no.prototype.jc,$w=io.prototype,$w.Z=function(){return this.F()},$w.getStartTime=function(){return this.startTime},$w.Xg=function(){return this.endTime},$w.jc=function(){return this.Pa},$w.ic=function(){return this.wa},$w.ph=function(){return this.tilesLayout},$w.oh=function(){return this.C},$w.Pb=function(){return this.status},$w.Fh=function(){this.status=xT},$w.Ve=function(){this.o=!0},$w.Bh=function(){return this.o},$w.Pd=function(){this.m=!1},$w.yh=function(){return this.m},$w.cg=function(){this.cd=!0},$w.Ah=function(){return this.cd},$w.bg=function(){this.Nd=!0},$w.zh=function(){return this.Nd},$w.ag=function(){this.s=!0},$w.vh=function(){return this.s},$w.sg=function(e){this.A=e},$w.nh=function(){return this.A},$w.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=a(this.i),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},$w.vf=function(e){null==this.g?F("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},P("shaka.media.SegmentReference",io),io.prototype.syncAgainst=io.prototype.vf,io.prototype.offset=io.prototype.offset,io.prototype.getThumbnailSprite=io.prototype.nh,io.prototype.setThumbnailSprite=io.prototype.sg,io.prototype.hasByterangeOptimization=io.prototype.vh,io.prototype.markAsByterangeOptimization=io.prototype.ag,io.prototype.isLastPartial=io.prototype.zh,io.prototype.markAsLastPartial=io.prototype.bg,io.prototype.isPartial=io.prototype.Ah,io.prototype.markAsPartial=io.prototype.cg,io.prototype.isIndependent=io.prototype.yh,io.prototype.markAsNonIndependent=io.prototype.Pd,io.prototype.isPreload=io.prototype.Bh,io.prototype.markAsPreload=io.prototype.Ve,io.prototype.markAsUnavailable=io.prototype.Fh,io.prototype.getStatus=io.prototype.Pb,io.prototype.getTileDuration=io.prototype.oh,io.prototype.getTilesLayout=io.prototype.ph,io.prototype.getEndByte=io.prototype.ic,io.prototype.getStartByte=io.prototype.jc,io.prototype.getEndTime=io.prototype.Xg,io.prototype.getStartTime=io.prototype.getStartTime,io.prototype.getUris=io.prototype.Z;var AT=0,xT=1;io.Status={ki:AT,bj:xT,Gi:2},P("shaka.util.Id3Utils",ho),ho.getID3Data=mo,ho.getID3Frames=vo,P("shaka.util.ExpGolomb",xo),$w=Fo.prototype,$w.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},$w.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,qo(e)),n=e.length-(e.length+t)%188,r=!1,i=t;i<n;i+=188)if(71==e[i]){var o=!!(64&e[i+1]),a=((31&e[i+1])<<8)+e[i+2];if(1<(48&e[i+3])>>4){var s=i+5+e[i+4];if(s==i+188)continue}else s=i+4;switch(a){case 0:o&&(s+=e[s]+1),this.F=(31&e[s+10])<<8|e[s+11];break;case 17:case 8191:break;case this.F:o&&(s+=e[s]+1),o=e,a={audio:-1,video:-1,Kd:-1,audioCodec:"",videoCodec:""};var u=s+3+((15&o[s+1])<<8|o[s+2])-4;for(s+=12+((15&o[s+10])<<8|o[s+11]);s<u;){var l=(31&o[s+1])<<8|o[s+2],c=(15&o[s+3])<<8|o[s+4];switch(o[s]){case 6:if(0<c)for(var d=s+5,h=c;2<h;){var f=o[d+1]+2;switch(o[d]){case 5:var p=Ar(o.subarray(d+2,d+f));-1==a.audio&&"Opus"===p?(a.audio=l,a.audioCodec="opus"):-1==a.video&&"AV01"===p&&(a.video=l,a.videoCodec="av1");break;case 106:-1==a.audio&&(a.audio=l,a.audioCodec="ac3");break;case 122:-1==a.audio&&(a.audio=l,a.audioCodec="ec3");break;case 124:-1==a.audio&&(a.audio=l,a.audioCodec="aac")}d+=f,h-=f}break;case 15:-1==a.audio&&(a.audio=l,a.audioCodec="aac");break;case 17:-1==a.audio&&(a.audio=l,a.audioCodec="aac-loas");break;case 21:-1==a.Kd&&(a.Kd=l);break;case 27:-1==a.video&&(a.video=l,a.videoCodec="avc");break;case 3:case 4:-1==a.audio&&(a.audio=l,a.audioCodec="mp3");break;case 36:-1==a.video&&(a.video=l,a.videoCodec="hvc");break;case 129:-1==a.audio&&(a.audio=l,a.audioCodec="ac3");break;case 132:case 135:-1==a.audio&&(a.audio=l,a.audioCodec="ec3")}s+=c+5}o=a,-1!=o.video&&(this.H=o.video,this.m=o.videoCodec),-1!=o.audio&&(this.A=o.audio,this.u=o.audioCodec),-1!=o.Kd&&(this.C=o.Kd),r&&!this.G&&(q("reparse from beginning"),r=!1,i=t-188),this.G=!0;break;case this.H:s=e.subarray(s,i+188),o?this.j.push([s]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(s);break;case this.A:s=e.subarray(s,i+188),o?this.i.push([s]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(s);break;case this.C:s=e.subarray(s,i+188),o?this.l.push([s]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(s);break;default:r=!0}}else W("Found TS packet that do not start with 0x47");return this},$w.Lh=function(e){return _n("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.df(e)},$w.df=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var i=e.byteLength,o=1;"hvc"==this.m&&(o=2);for(var a,s=n||0,u=[],l=-1,c=0,d=0;d<i;++d){var h=e[d];if(h){if(2<=s&&1==h){if(t&&!u.length&&-1==l&&(h=d-(3<s?3:s),n&&0!=h&&(h=e.subarray(0,h),t.data=Kr(t.data,h),t.fullData=Kr(t.fullData,h))),0<=l?(s=d-((3<s?3:s)+1),u.push({data:e.subarray(l+o,s+1),fullData:e.subarray(l,s+1),type:c,time:r})):t&&!u.length&&0<(l=d-s)&&(l=e.subarray(0,l),t.data=Kr(t.data,l),t.fullData=Kr(t.fullData,l)),d>=i-o)return W("Malformed TS, incomplete NALU, ignoring."),u;d++,l=d,c="hvc"==this.m?e[d]>>1&63:31&e[d]}s=0}else s++;d>=i-1&&0<=l&&0<=s&&(a={data:e.subarray(l+o,i),fullData:e.subarray(l,i),type:c,time:r})}return a&&u.push(a),!u.length&&t&&(t.data=Kr(t.data,e),t.fullData=Kr(t.fullData,e)),u},$w.getMetadata=function(){for(var e=[],t=a(this.l),n=t.next();!n.done;n=t.next())n=Kr.apply(Ur,s(n.value)),(n=Bo(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:vo(n.data),dts:n.dts,pts:n.pts});return e},$w.Lb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=a(this.i),n=t.next();!n.done;n=t.next()){var r=Kr.apply(Ur,s(n.value)),i=Bo(this,r);n=this.h.length?this.h[this.h.length-1]:null,i&&null!=i.pts&&null!=i.dts&&(!n||n.pts!=i.pts&&n.dts!=i.dts)?(this.h.length&&i.dts<(n.dts||0)&&(e=!0),this.h.push(i)):this.h.length&&(r=i?i.data:r)&&(n=this.h.pop(),n.data=Kr(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(e,t){var n=(e.pts||0)-(t.pts||0);return(e.dts||0)-(t.dts||0)||n}))}return this.h},$w.lc=function(e){if(e=void 0===e||e,this.j.length&&!this.g.length){for(var t=!1,n=a(this.j),r=n.next();!r.done;r=n.next()){var i=Kr.apply(Ur,s(r.value)),o=Bo(this,i);r=this.g.length?this.g[this.g.length-1]:null,o&&null!=o.pts&&null!=o.dts&&(!r||r.pts!=o.pts&&r.dts!=o.dts)?(this.g.length&&o.dts<(r.dts||0)&&(t=!0),this.g.push(o)):this.g.length&&(i=o?o.data:i)&&(r=this.g.pop(),r.data=Kr(r.data,i),this.g.push(r))}if(e){var u;for(n=a(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.nalus=this.df(r,u,void 0),r.nalus.length&&(u=r.nalus[r.nalus.length-1]);this.g=this.g.filter(function(e){return e.nalus.length})}t&&(this.g=this.g.sort(function(e,t){var n=(e.pts||0)-(t.pts||0);return(e.dts||0)-(t.dts||0)||n}))}return e?this.g:(e=this.g,this.g=[],e)},$w.getStartTime=function(e){if("audio"==e){e=null;var t=this.Lb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return"video"==e?(e=null,t=this.lc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},$w.Tc=function(){return{audio:this.u,video:this.m}},$w.Gd=function(){for(var e=[],t=a(this.lc()),n=t.next();!n.done;n=t.next())e.push.apply(e,s(n.value.nalus));return e},$w.sh=function(){_n("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Ke();return{height:e.height,width:e.width}},$w.Ke=function(){return"hvc"==this.m?Ho(this):Vo(this)},P("shaka.util.TsParser",Fo),Fo.syncOffset=qo,Fo.probe=Ko,Fo.prototype.getVideoInfo=Fo.prototype.Ke,Fo.prototype.getVideoResolution=Fo.prototype.sh,Fo.prototype.getVideoNalus=Fo.prototype.Gd,Fo.prototype.getCodecs=Fo.prototype.Tc,Fo.prototype.getStartTime=Fo.prototype.getStartTime,Fo.prototype.getVideoData=Fo.prototype.lc,Fo.prototype.getAudioData=Fo.prototype.Lb,Fo.prototype.getMetadata=Fo.prototype.getMetadata,Fo.prototype.parseNalus=Fo.prototype.df,Fo.prototype.parseAvcNalus=Fo.prototype.Lh,Fo.prototype.parse=Fo.prototype.parse,Fo.prototype.clearData=Fo.prototype.clearData,Fo.Timescale=9e4;var CT=[100,110,122,244,44,83,86,118,128,138,139,134];Go.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},P("shaka.lcevc.Dec",Go),Go.prototype.release=Go.prototype.release;var IT=0,MT=1,OT=2,PT=0,jT=1,DT=-1;$w=Yo.prototype,$w.destroy=function(){return this.J.destroy()},$w.init=function(e,t,n,r){t=void 0!==t&&t,n=void 0===n?"UNKNOWN":n,r=void 0!==r&&r;var i,o,s,u,l,c=this;return A(function(d){switch(d.g){case 1:return i=z_,h(d,c.L,2);case 2:c.u=t,c.Y=n,c.Ba=r,c.na=!c.u&&"HLS"==c.Y&&!c.Ba,c.K=null,o=a(e.keys()),s=o.next();case 3:if(s.done){d.B(0);break}return u=s.value,l=e.get(u),h(d,Zo(c,u,l,l.codecs),6);case 6:c.s?(c.j[i.P]=[],c.j[i.$]=[]):c.j[u]=[],s=o.next(),d.B(3)}})},$w.configure=function(e){this.C=e},$w.nb=function(){var e={total:this.A?[]:co(this.i.buffered),audio:this.A?[]:co(oa(this,"audio")),video:this.A?[]:co(oa(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},$w.remove=function(e,t,n){var r,i=this;return A(function(o){return 1==o.g?(r=z_,e==r.ia?h(o,i.h.remove(t,n),0):h(o,va(i,e,function(){return fa(i,e,t,n)}),4)):i.s?h(o,va(i,r.P,function(){return fa(i,r.P,t,n)}),0):o.B(0)})},$w.flush=function(e){var t,n=this;return A(function(r){return 1==r.g?(t=z_,e==t.ia?r.return():h(r,va(n,e,function(){n.i.currentTime-=.001,ya(n,e)}),2)):n.s?h(r,va(n,t.P,function(){var e=t.P;n.i.currentTime-=.001,ya(n,e)}),0):r.B(0)})},$w.endOfStream=function(e){var t=this;return A(function(n){return h(n,ma(t,function(){ta(t)||"closed"===t.l.readyState||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},$w.Oa=function(e){var t=this;return A(function(n){return h(n,ma(t,function(){if(e<t.l.duration)for(var n in t.g){var r={start:function(){},p:new qn};t.j[n].unshift(r)}t.l.duration=e,t.W=e}),0)})},$w.getDuration=function(){return this.l.duration};var RT=e.URL.createObjectURL,LT="sequence";$w=xa.prototype,$w.getDuration=function(){return this.j},$w.eh=function(){return this.g},$w.qg=function(e){this.i=e},$w.Oa=function(e){this.j=e},$w.ih=function(){return this.i},$w.og=function(e){this.s=e},$w.rc=function(e){this.F=e},$w.Yd=function(e){this.u=e},$w.qf=function(e){this.o=e},$w.Wg=function(){return this.o},$w.fg=function(e,t){if(0!=e.length){var n=e[e.length-1].end+t;this.Td(e[0].start+t),this.g=e.reduce(function(e,t){return Math.max(e,t.end-t.start)},this.g),this.h=Math.max(this.h,n),null!=this.i&&this.A&&!this.m&&(this.i=(Date.now()+this.s)/1e3-this.h-this.g),G("notifySegments:","maxSegmentDuration="+this.g)}},$w.bd=function(e){if(0!=e.length){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.s)/1e3;e=a(e);for(var i=e.next();!i.done;i=e.next())i=i.value,r<i.startTime||(t=Math.min(t,i.startTime),n=Math.max(n,i.endTime),this.g=Math.max(this.g,i.endTime-i.startTime));this.Td(t),this.h=Math.max(this.h,n),null!=this.i&&this.A&&!this.m&&(this.i=r-this.h-this.g),G("notifySegments:","maxSegmentDuration="+this.g)}},$w.Od=function(){this.m=!0},$w.Ch=function(){return this.m},$w.pg=function(e){this.C=e},$w.$g=function(){return this.C},$w.Td=function(e){this.l=null==this.l?e:Math.min(this.l,e)},$w.Ye=function(e){this.g=Math.max(this.g,e),G("notifyNewSegmentDuration:","maxSegmentDuration="+this.g)},$w.offset=function(e){null!=this.l&&(this.l+=e),null!=this.h&&(this.h+=e)},$w.R=function(){return 1/0==this.j&&!this.F},$w.Rb=function(){return 1/0!=this.j&&!this.F},$w.fb=function(){return Math.max(this.G,this.xb()-this.u)},$w.tg=function(e){this.G=e},$w.xb=function(){return this.R()||this.Rb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},$w.Wc=function(e){var t=Math.max(this.l,this.G);return 1/0==this.u?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.xb()-this.u+e,this.eb()))},$w.Ob=function(){return this.Wc(0)},$w.eb=function(){return Math.max(0,this.xb()-(this.R()||this.Rb()?this.o:0))},$w.xg=function(){return!(null==this.i||null!=this.h&&this.A)},$w.ng=function(e){this.H=e},P("shaka.media.PresentationTimeline",xa),xa.prototype.setAvailabilityTimeOffset=xa.prototype.ng,xa.prototype.usingPresentationStartTime=xa.prototype.xg,xa.prototype.getSeekRangeEnd=xa.prototype.eb,xa.prototype.getSeekRangeStart=xa.prototype.Ob,xa.prototype.getSafeSeekRangeStart=xa.prototype.Wc,xa.prototype.getSegmentAvailabilityEnd=xa.prototype.xb,xa.prototype.setUserSeekStart=xa.prototype.tg,xa.prototype.getSegmentAvailabilityStart=xa.prototype.fb,xa.prototype.isInProgress=xa.prototype.Rb,xa.prototype.isLive=xa.prototype.R,xa.prototype.offset=xa.prototype.offset,xa.prototype.notifyMaxSegmentDuration=xa.prototype.Ye,xa.prototype.notifyMinSegmentStartTime=xa.prototype.Td,xa.prototype.getInitialProgramDateTime=xa.prototype.$g,xa.prototype.setInitialProgramDateTime=xa.prototype.pg,xa.prototype.isStartTimeLocked=xa.prototype.Ch,xa.prototype.lockStartTime=xa.prototype.Od,xa.prototype.notifySegments=xa.prototype.bd,xa.prototype.notifyTimeRange=xa.prototype.fg,xa.prototype.getDelay=xa.prototype.Wg,xa.prototype.setDelay=xa.prototype.qf,xa.prototype.setSegmentAvailabilityDuration=xa.prototype.Yd,xa.prototype.setStatic=xa.prototype.rc,xa.prototype.setClockOffset=xa.prototype.og,xa.prototype.getPresentationStartTime=xa.prototype.ih,xa.prototype.setDuration=xa.prototype.Oa,xa.prototype.setPresentationStartTime=xa.prototype.qg,xa.prototype.getMaxSegmentDuration=xa.prototype.eh,xa.prototype.getDuration=xa.prototype.getDuration,Ca.prototype.release=function(){this.j=this.l=null,this.i=function(){}},Pa.prototype.release=function(){this.l&&(this.l.release(),this.l=null),null!=this.m&&(this.m.stop(),this.m=null),this.i&&(this.i.release(),this.i=null),this.g=this.A=this.u=null},Pa.prototype.bf=function(){this.o=!0,ja(this)};var NT=new vr(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});Ra.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},Ba.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},$w=Ha.prototype,$w.je=function(){function e(){null==t.h||0==t.h?t.j=!0:(t.i.la(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;Da(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},$w.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},$w.ke=function(e){this.h=this.j?this.h:e},$w.sd=function(){return(this.j?this.g.currentTime:this.h)||0},$w.Df=function(){return 0},$w.Cf=function(){return 0},$w.eg=function(){},$w=Wa.prototype,$w.je=function(){this.m.$a(.25)},$w.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},$w.ke=function(e){this.A=e,Na(this.h,e)},$w.sd=function(){var e=La(this.h);return 0<this.i.readyState&&!this.i.paused?Ga(this,e):e},$w.Df=function(){return this.o?this.o.o:0},$w.Cf=function(){return this.j.C},$w.eg=function(){this.j.bf()},$w=Xa.prototype,$w.ob=function(){return this.g.length},$w.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},$w.Gh=function(){this.o=!0},$w.dc=function(e){for(var t=a(this.g),n=t.next();!n.done;n=t.next())e(n.value)},$w.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],i=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<i)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},$w.get=function(e){return 0==this.g.length?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},$w.offset=function(e){if(!this.o)for(var t=a(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},$w.Rd=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(e){return Math.round(1e3*e.startTime)/1e3<t}),this.g.push.apply(this.g,s(e))}},$w.ad=function(e,t){var n=this;e=e.filter(function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)}),this.Rd(e),this.bb(t)},$w.bb=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(t){return t.endTime>e}),this.j+=t-this.g.length}},$w.cc=function(e,t,n){if(n=void 0!==n&&n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;0!=this.g.length&&(e=this.g[this.g.length-1],t=new io(e.startTime,t,e.F,e.Pa,e.wa,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.C,e.g,e.status,e.aes128Key),t.mimeType=e.mimeType,t.codecs=e.codecs,t.l=e.l,this.g[this.g.length-1]=t)}},$w.Zd=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new Tt(function(){var e=t();e?n.g.push.apply(n.g,s(e)):(n.m.stop(),n.m=null)}),this.m.$a(e))},Xa.prototype[Symbol.iterator]=function(){return this.Mb(0)},Xa.prototype.Mb=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),r=-1;if(n&&0<n.i.length)for(var i=n.i.length-1;0<=i;--i){var o=n.i[i];if(e>=o.startTime&&e<o.endTime){for(;i&&!o.m;)i--,o=n.i[i];if(!o.m)return F("No independent partial segment found!"),null;t++,r=i-1;break}}return new Ja(this,t,r)},P("shaka.media.SegmentIndex",Xa),Xa.forSingleSegment=Ya,Xa.prototype.getIteratorForTime=Xa.prototype.Mb,Xa.prototype.updateEvery=Xa.prototype.Zd,Xa.prototype.fit=Xa.prototype.cc,Xa.prototype.evict=Xa.prototype.bb,Xa.prototype.mergeAndEvict=Xa.prototype.ad,Xa.prototype.offset=Xa.prototype.offset,Xa.prototype.get=Xa.prototype.get,Xa.prototype.find=Xa.prototype.find,Xa.prototype.markImmutable=Xa.prototype.Gh,Xa.prototype.release=Xa.prototype.release,Ja.prototype.Ng=function(){return this.g},Ja.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.i.length&&e.u&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.i.length?e.i[this.h]:e},Ja.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.i.length?(this.h++,e.u&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),e=this.current(),{value:e,done:!e}},P("shaka.media.SegmentIterator",Ja),Ja.prototype.next=Ja.prototype.next,Ja.prototype.current=Ja.prototype.current,Ja.prototype.currentPosition=Ja.prototype.Ng,u(Qa,Xa),$w=Qa.prototype,$w.clone=function(){var e=new Qa;return e.h=this.h.slice(),e},$w.release=function(){for(var e=a(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},$w.dc=function(e){for(var t=a(this.h),n=t.next();!n.done;n=t.next())n.value.dc(e)},$w.find=function(e){for(var t=0,n=a(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.find(e);if(null!=i)return i+t;t+=r.j+r.ob()}return null},$w.get=function(e){for(var t=0,n=a(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.get(e-t);if(i)return i;t+=r.j+r.ob()}return null},$w.offset=function(){},$w.Rd=function(){},$w.bb=function(){},$w.ad=function(){},$w.cc=function(){},$w.Zd=function(){},P("shaka.media.MetaSegmentIndex",Qa),Qa.prototype.updateEvery=Qa.prototype.Zd,Qa.prototype.fit=Qa.prototype.cc,Qa.prototype.mergeAndEvict=Qa.prototype.ad,Qa.prototype.evict=Qa.prototype.bb,Qa.prototype.merge=Qa.prototype.Rd,Qa.prototype.offset=Qa.prototype.offset,Qa.prototype.get=Qa.prototype.get,Qa.prototype.find=Qa.prototype.find,Qa.prototype.forEachTopLevelReference=Qa.prototype.dc,Qa.prototype.release=Qa.prototype.release,$a.prototype.release=function(){this.set(this.hc()),this.i&&(this.i.stop(),this.i=null),this.g=null},$a.prototype.set=function(e){if(this.h!=e)e:{if(this.h=e,this.i.stop(),G("Changing effective playback rate to",this.h),0<=this.h)try{var t=this.h;this.g.Fd()!=t&&this.g.uf(t);break e}catch(e){}this.i.$a(.25),0!=this.g.Fd()&&this.g.uf(0)}},$a.prototype.hc=function(){return this.g.hc()},Za.prototype.release=function(){this.i.stop();for(var e=a(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},u(ts,tr),ts.prototype.release=function(){this.g.clear(),tr.prototype.release.call(this)},ts.prototype.j=function(e){for(var t=a(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var r=n.dd,i=r.length-1;0<=i;i--){var o=r[i];if(o.position<=e){r=o.We;break e}}r=null}if((i=r)&&(i=n.Kf,i=!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width)),i)e:{if(i=e,o=r.contentType,(o=this.h()[o])&&0<o.length){var s=o[o.length-1].end;if(i>=o[0].start&&i<s){i=!0;break e}}i=!1}i&&(n.Kf=r,q("Media quality changed at position "+e+" "+JSON.stringify(r)),n=new Zn("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}},u(os,tr),os.prototype.release=function(){this.g.clear(),this.h.stop(),tr.prototype.release.call(this)},u(as,tr),as.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,tr.prototype.release.call(this)},as.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=a(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.g.get(r),o=e<r.startTime?UT:e>r.endTime?BT:FT;this.g.set(r,o);for(var s=a(this.m),u=s.next();!u.done;u=s.next())u=u.value,u.Zb==i&&u.Yb==o&&u.Qb(r,t)}}};var UT=1,FT=2,BT=3;gs.prototype.abort=function(){this.g&&this.g.abort()},$w=ms.prototype,$w.destroy=function(){return this.l.destroy()},$w.configure=function(e){this.h=e,this.G=new Hn({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0);for(var t=a(this.i.keys()),n=t.next();!n.done;n=t.next())if(n=this.i.get(n.value),n.qa){var r=n.qa,i=e.segmentPrefetchLimit;r.i=i;for(var o=Array.from(r.g.keys());o.length>i;){var s=o.pop();s&&fs(r,s)}0<e.segmentPrefetchLimit||(n.qa=null)}else 0<e.segmentPrefetchLimit&&(n.qa=Ms(this,n.stream))},$w.start=function(){var e=this;return A(function(t){if(1==t.g)return h(t,Cs(e),2);pr(e.l),q("init: completed initial Stream setup"),e.A=!0,f(t)})},$w.fd=function(){if(this.g){for(var e=this.g.Ed(),t=!1,n=a(this.i.keys()),r=n.next();!r.done;r=n.next()){var i=r.value;r=this.i.get(i);var o=Js(r),s=null;r.X&&(s=r.X.current()),(!s||s.startTime>e||s.endTime<e)&&(r.X=null),s=this.g.T,s.A?s=!1:i==G_?(s=s.h,s=null!=s.g&&null!=s.h&&(e>=s.g&&e<s.h)):(s=oa(s,i),s=so(s,e)),s||((null!=ra(this.g.T,i)||r.Ga)&&(xs(this,r),t=!0),r.Ma&&(r.Ma.abort(),q(o,"Aborting operation due to seek"),r.Ma=null),i===G_&&(i=this.g.T,i.H&&i.H.h()),r.fd=!0)}t||q("(all): seeked: buffered seek: presentationTime="+e)}},$w.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.T.Oa(e):this.g.T.Oa(Math.pow(2,32))};var VT={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};$w=tu.prototype,$w.remove=function(e,t){return!!this.g&&(ru(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},$w.append=function(e){var t=eu(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var r={};t=a(t);for(var i=t.next();!i.done;r={ac:r.ac},i=t.next())r.ac=i.value,e.some(function(e){return function(t){return t.startTime==e.ac.startTime&&t.endTime==e.ac.endTime&&t.text==e.ac.payload}}(r))||(i=nu(r.ac))&&n.push(i);e=n.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)}),e=a(e);for(r=e.next();!r.done;r=e.next())this.g.addCue(r.value)},$w.destroy=function(){return this.g&&(ru(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},$w.isTextVisible=function(){return"showing"==this.g.mode},$w.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},P("shaka.text.SimpleTextDisplayer",tu),tu.prototype.setTextVisibility=tu.prototype.setTextVisibility,tu.prototype.isTextVisible=tu.prototype.isTextVisible,tu.prototype.destroy=tu.prototype.destroy,tu.prototype.append=tu.prototype.append,tu.prototype.remove=tu.prototype.remove,$w=iu.prototype,$w.remove=function(){},$w.append=function(){},$w.destroy=function(){},$w.isTextVisible=function(){return!1},$w.setTextVisibility=function(){},P("shaka.text.StubTextDisplayer",iu),iu.prototype.setTextVisibility=iu.prototype.setTextVisibility,iu.prototype.isTextVisible=iu.prototype.isTextVisible,iu.prototype.destroy=iu.prototype.destroy,iu.prototype.append=iu.prototype.append,iu.prototype.remove=iu.prototype.remove,P("shaka.util.Dom",ou),ou.removeAllChildren=au,$w=su.prototype,$w.append=function(e){var t=[].concat(s(this.i)),n={};e=a(e);for(var r=e.next();!r.done;n={md:n.md},r=e.next())n.md=r.value,t.some(function(e){return function(t){return _e(t,e.md)}}(n))||this.i.push(n.md);cu(this)},$w.destroy=function(){return this.g?(this.s.removeChild(this.g),this.g=null,this.m=!1,this.i=[],this.C&&this.C.stop(),this.h.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null),Promise.resolve()):Promise.resolve()},$w.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;return this.i=this.i.filter(function(n){return n.startTime<e||n.endTime>=t}),cu(this,n>this.i.length),!0},$w.isTextVisible=function(){return this.m},$w.setTextVisibility=function(e){this.m=e},P("shaka.text.UITextDisplayer",su),su.prototype.setTextVisibility=su.prototype.setTextVisibility,su.prototype.isTextVisible=su.prototype.isTextVisible,su.prototype.remove=su.prototype.remove,su.prototype.destroy=su.prototype.destroy,su.prototype.append=su.prototype.append,P("shaka.text.WebVttGenerator",function(){}),vu.prototype.configure=function(e){this.g=e};var HT="m",WT="a",KT="v",qT="av",GT="i",zT="c",XT="tt";P("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Bg:"s",OTHER:"o"}),$w=xu.prototype,$w.configure=function(e){this.h=e},$w.Tf=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(JT)?1e3*this.g.get(JT):null},$w.Sf=function(){return this.h.enabled&&this.g&&this.g.has(YT)?1e3*this.g.get(YT):null},$w.jh=function(){return this.h.enabled&&this.g&&this.g.has(QT)?this.g.get(QT):null},$w.kh=function(){return this.h.enabled&&this.g&&this.g.has($T)?this.g.get($T):null},$w.getBandwidthEstimate=function(e){var t=this.Sf();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e},P("shaka.util.CmsdManager",xu),xu.prototype.getBandwidthEstimate=xu.prototype.getBandwidthEstimate,xu.prototype.getRoundTripTime=xu.prototype.kh,xu.prototype.getResponseDelay=xu.prototype.jh,xu.prototype.getEstimatedThroughput=xu.prototype.Sf,xu.prototype.getMaxBitrate=xu.prototype.Tf;var YT="etp",JT="mb",QT="rd",$T="rtt";P("shaka.util.ConfigUtils",Iu),Iu.convertToConfigObject=Ou,Iu.mergeConfigObjects=Mu,ju.prototype.release=function(){z(this.g+" has released mutex"),0<this.h.length?this.h.shift()():this.g=null},P("shaka.util.FairPlayUtils",Ru),Ru.commonFairPlayResponse=function(e,t){if(2===e){try{var n=_r(t.data)}catch(e){return}e=!1,n=n.trim(),"<ckc>"===n.substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(e){}e&&(t.data=ue(Vr(n)))}},Ru.expressplayFairPlayRequest=function(e,t){Fu(e,t)},Ru.conaxFairPlayRequest=function(e,t){Fu(e,t)},Ru.ezdrmFairPlayRequest=function(e,t){Fu(e,t)},Ru.verimatrixFairPlayRequest=function(e,t){2===e&&(e=le(t.body),e=Br(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Er("spc="+e))},Ru.expressplayInitDataTransform=function(e,t,n){return Uu(e,t,n)},Ru.conaxInitDataTransform=function(t,n,r){if("skd"!==n)return t;n=r.serverCertificate,r=Sr(t).split("skd://").pop().split("?").shift(),r=e.atob(r);var i=new ArrayBuffer(2*r.length);i=ce(i);for(var o=0,a=r.length;o<a;o++)i[o]=r.charCodeAt(o);return Nu(t,i,n)},Ru.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,n=Sr(e).split(";").pop(),Nu(e,n,t))},Ru.verimatrixInitDataTransform=function(e,t,n){return Uu(e,t,n)},Ru.initDataTransform=Nu,Ru.defaultGetContentId=Lu,Ru.isFairPlaySupported=function(){var e;return A(function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},p(t,2),h(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(v(t),t.return(!1))})},P("shaka.util.PlayerConfiguration",Bu),Bu.mergeConfigObjects=Hu,Bu.createDefault=Vu,u(Ju,tr),$w=Ju.prototype,$w.destroy=function(){var e,t=this;return A(function(n){switch(n.g){case 1:return t.m==ZT?n.return():(Qu(t),e=t.detach(),t.m=ZT,h(n,e,2));case 2:if(t.Hd&&(t.Hd.release(),t.Hd=null),t.uc&&(t.uc.release(),t.uc=null),t.o&&(t.o.release(),t.o=null),t.Ba&&(t.Ba.release(),t.Ba=null),t.Ue=null,t.g=null,t.u=null,t.zd=null,t.V=null,t.Y=null,!t.H){n.B(3);break}return h(n,t.H.destroy(),4);case 4:t.H=null;case 3:t.s&&(t.s.release(),t.s=null),tr.prototype.release.call(t),f(n)}})},$w.Mc=function(e,t){t=void 0===t||t;var n,r,i=this;return A(function(o){switch(o.g){case 1:if(i.m==ZT)throw new Ne(2,7,7e3);if(!i.h||i.h==e){o.B(2);break}return h(o,i.detach(),2);case 2:return h(o,tl(i,"attach"),4);case 4:if(o.h)return o.return();if(p(o,5,6),el(i,"attach"),n=function(){var e=uc(i);e&&ac(i,e)},i.uc.D(e,"error",n),i.h=e,!t||!St()||i.F){o.B(6);break}return h(o,il(i),6);case 6:m(o),i.W.release(),b(o,0);break;case 5:return r=v(o),h(o,i.detach(),10);case 10:throw r}})},$w.Hg=function(e){this.gg=e},$w.detach=function(e){e=void 0!==e&&e;var t=this;return A(function(n){if(1==n.g){if(t.m==ZT)throw new Ne(2,7,7e3);return h(n,t.tc(!1,e),2)}if(3!=n.g)return h(n,tl(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.uc.Za(),t.h=null),el(t,"detach"),t.A&&!e&&t.A.release()}finally{t.W.release()}f(n)})},$w.tc=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,r,i,o,s,u,l,c,d,f=this;return A(function(p){switch(p.g){case 1:return f.m!=ZT&&(f.m=eS),h(p,tl(f,"unload"),2);case 2:return p.h?p.return():(g(p,3),f.kb=!1,el(f,"unload"),e&&!St()&&(e=!1),Qu(f),n=f.Lc.map(function(e){return e()}),f.Lc=[],h(p,Promise.all(n),5));case 5:if(f.dispatchEvent(Zu("unloading")),f.Aa&&(f.Aa.release(),f.Aa=null),f.h&&(f.o.Za(),f.Ba.Za()),f.Bd.stop(),f.bc&&(f.bc.release(),f.bc=null),!f.G){p.B(6);break}return h(p,f.G.stop(),7);case 7:f.G=null,f.Md=null;case 6:if(!f.s){p.B(8);break}return h(p,f.s.stop(),8);case 8:if(!f.j){p.B(10);break}return h(p,f.j.destroy(),11);case 11:f.j=null;case 10:if(f.J&&(f.J.release(),f.J=null),f.C&&(f.C.release(),f.C=null),!f.F){p.B(12);break}return h(p,f.F.destroy(),13);case 13:f.F=null;case 12:if(f.A&&!t&&f.A.onAssetUnload(),f.Y&&(f.Y.g=null),f.h&&au(f.h),!f.h||!f.h.src){p.B(14);break}return h(p,new Promise(function(e){return new Tt(e).U(.1)}),15);case 15:f.h.removeAttribute("src"),f.h.load();case 14:if(!f.l){p.B(16);break}return h(p,f.l.destroy(),17);case 17:f.l=null;case 16:if(f.ga=null,f.L=null,f.i){for(r=a(f.i.variants),i=r.next();!i.done;i=r.next())for(o=i.value,s=a([o.audio,o.video]),u=s.next();!u.done;u=s.next())(l=u.value)&&l.segmentIndex&&l.segmentIndex.release();for(c=a(f.i.textStreams),u=c.next();!u.done;u=c.next())d=u.value,d.segmentIndex&&d.segmentIndex.release()}f.i=null,f.u=new Yu,f.Xe=null,f.Sc=[],f.N=NaN,Hl(f);case 3:m(p),f.W.release(),b(p,4);break;case 4:if(e&&St()&&!f.F)return h(p,il(f),0);p.B(0)}})},$w.ii=function(e){this.ca=e},$w.load=function(e,t,n){t=void 0===t?null:t;var r,i,o,a,s,u,l=this;return A(function(c){switch(c.g){case 1:if(l.m==ZT)throw new Ne(2,7,7e3);return h(c,Du(l.W,"load"),2);case 2:if(l.W.release(),!l.h)throw new Ne(2,7,7002);if(!l.ga){c.B(3);break}return h(c,l.tc(!1),3);case 3:if(r=++l.Ld,i=function(){if(l.Ld!=r)throw new Ne(2,7,7e3)},o=function(e,t){return A(function(n){switch(n.g){case 1:return g(n,2),h(n,Du(l.W,t),4);case 4:return i(),h(n,e(),5);case 5:i();case 2:m(n),l.W.release(),b(n,0)}})},p(c,5),l.ca=t,l.kb=!1,l.dispatchEvent(Zu("loading")),a=Date.now()/1e3,l.u=new Yu,l.ga=e,n){c.B(7);break}return h(c,o(function(){return A(function(e){if(1==e.g)return h(e,nl(l),2);n=e.h,f(e)})},"guessMimeType_"),7);case 7:if(s=rl(l,n))return h(c,o(function(){return A(function(e){return h(e,ul(l,n),0)})},"initializeSrcEqualsDrmInner_"),16);if(l.F){c.B(11);break}return h(c,o(function(){return A(function(e){return h(e,il(l),0)})},"initializeMediaSourceEngineInner_"),11);case 11:return h(c,o(function(){return A(function(e){return h(e,ol(l,n),0)})},"parseManifestInner_"),13);case 13:return h(c,o(function(){return A(function(e){return h(e,al(l),0)})},"initializeDrmInner_"),14);case 14:return h(c,o(function(){return A(function(e){return h(e,sl(l,a),0)})},"loadInner_"),10);case 16:return h(c,o(function(){return A(function(e){return h(e,ll(l,a,n),0)})},"srcEqualsInner_"),10);case 10:l.dispatchEvent(Zu("loaded")),y(c,0);break;case 5:if(u=v(c),7e3==u.code){c.B(18);break}return h(c,l.tc(!1),18);case 18:throw u}})},$w.Qh=function(){for(var e=this.W;e.g;)e.release()},$w.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ou(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(_n("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(_n("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&e.streaming.lowLatencyMode&&(void 0==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),void 0==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01),void 0==e.streaming.segmentPrefetchLimit&&(e.streaming.segmentPrefetchLimit=2),void 0==e.streaming.retryParameters&&(e.streaming.retryParameters={}),void 0==e.streaming.retryParameters.baseDelay&&(e.streaming.retryParameters.baseDelay=100),void 0==e.manifest&&(e.manifest={}),void 0==e.manifest.retryParameters&&(e.manifest.retryParameters={}),void 0==e.manifest.retryParameters.baseDelay&&(e.manifest.retryParameters.baseDelay=100),void 0==e.drm&&(e.drm={}),void 0==e.drm.retryParameters&&(e.drm.retryParameters={}),void 0==e.drm.retryParameters.baseDelay&&(e.drm.retryParameters.baseDelay=100));var n=Hu(this.g,e,Rl(this));return Al(this),n},$w.getConfiguration=function(){var e=Rl(this);return Hu(e,this.g,Rl(this)),e},$w.Tg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ab().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},$w.Uh=function(){for(var e in this.g)delete this.g[e];Hu(this.g,Rl(this),Rl(this)),Al(this)},$w.ah=function(){return this.m},$w.Ie=function(){return this.i?this.i.type:null},$w.fh=function(){return this.h},$w.Nb=function(){return this.H},$w.He=function(){return this.ga},$w.Qf=function(){return this.A?this.A:null},$w.R=function(){return this.i?this.i.presentationTimeline.R():!(!this.h||!this.h.src)&&1/0==this.h.duration},$w.Rb=function(){return!!this.i&&this.i.presentationTimeline.Rb()},$w.wh=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.h||!this.h.src)&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},$w.Ab=function(){if(this.i){if(!this.kb&&"HLS"==this.i.type)return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Ob(),end:e.eb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},$w.th=function(){this.R()?this.h.currentTime=this.Ab().end:W("goToLive is for live streams!")},$w.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},$w.drmInfo=function(){return this.l?this.l.g:null},$w.Uc=function(){return this.l?this.l.Uc():1/0},$w.Ge=function(){return this.l?this.l.Ge():[]},$w.Vc=function(){return this.l?this.l.Vc():{}},$w.Le=function(){return!!this.L&&this.L.g==uT},$w.Dd=function(){return this.h?this.J?this.J.h:1:0},$w.zf=function(e){var t=this;0==e?B("A trick play rate of 0 is unsupported!"):(this.Ba.Za(),this.h.paused&&this.h.play(),this.J.set(e),this.m==tS&&(this.s.playbackRateChanged(e),Ts(this.j,1<Math.abs(e))),this.R()&&this.Ba.D(this.h,"timeupdate",function(){var n=t.h.currentTime,r=t.Ab(),i=t.g.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.wd():Math.floor(n)<=Math.floor(r.start+i)&&t.wd()}))},$w.wd=function(){var e=this.J.hc();this.m==nS&&this.J.set(e),this.m==tS&&(this.J.set(e),this.s.playbackRateChanged(e),Ts(this.j,!1)),this.Ba.Za()},$w.yb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=a(this.i.variants),i=r.next();!i.done;i=r.next())if(i=i.value,dn(i)){var o=rn(i);o.active=i==e,o.active||1==n||null==e||i.video!=e.video||i.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(e){return ln(e)}):[]},$w.kc=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=a(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var i=on(r);i.active=r==e,t.push(i)}return t}return this.h&&this.h.src&&this.h.textTracks?Cl(this).map(function(e){return un(e)}):[]},$w.Zg=function(){var e=this.Sc;return this.i&&(e=this.i.imageStreams),e.map(function(e){return an(e)})},$w.Qg=function(e){var t,n,r,i,o=this;return A(function(a){return 1==a.g?o.m!=tS&&o.m!=nS?a.return(null):(t=o.Sc,o.i&&(t=o.i.imageStreams),(n=t.find(function(t){return t.id==e}))?n.segmentIndex?a.B(2):h(a,n.createSegmentIndex(),2):a.return(null)):4!=a.g?(r=[],n.segmentIndex.dc(function(t){var i=xl(t.tilesLayout||n.tilesLayout);if(i){i=i.rows*i.Jb;for(var a=t.j-t.startTime,s=0;s<i;s++)r.push(o.Vf(e,t.startTime+a*s/i))}}),h(a,Promise.all(r),4)):(i=a.h,a.return(i.filter(function(e){return e})))})},$w.Vf=function(e,t){var n,r,i,o,a,s,u,l,c,d,f,p,g,y,v,m,b,w,_=this;return A(function(T){return 1==T.g?_.m!=tS&&_.m!=nS?T.return(null):(n=_.Sc,_.i&&(n=_.i.imageStreams),(r=n.find(function(t){return t.id==e}))?r.segmentIndex?T.B(2):h(T,r.createSegmentIndex(),2):T.return(null)):null==(i=r.segmentIndex.find(t))?T.return(null):(o=r.segmentIndex.get(i),(a=xl(o.tilesLayout||r.tilesLayout))?(s=r.width||0,u=r.height||0,l=s/a.Jb,c=u/a.rows,d=a.Jb*a.rows,f=o.j-o.startTime,p=o.C||f/d,g=o.startTime,v=y=0,1<d&&(m=Math.floor((t-o.startTime)/p),g=o.startTime+m*p,y=m%a.Jb*l,v=Math.floor(m/a.Jb)*c),b=!1,(w=o.A)&&(b=!0,c=w.height,y=w.positionX,v=w.positionY,l=w.width),T.return({segment:o,imageHeight:u,imageWidth:s,height:c,positionX:y,positionY:v,startTime:g,duration:p,uris:o.Z(),width:l,sprite:b})):T.return(null))})},$w.mg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(t){return t.id==e.id});t?t==this.j.o?q("Text track already selected."):(Xu(this.u.h,t,!1),Es(this.j,t),nc(this),this.jb=t.language):H("No stream with id",e.id)}else if(this.h&&this.h.src&&this.h.textTracks){t=Cl(this),t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,sn(n)==e.id?n.mode=this.ba?"showing":"hidden":n.mode="disabled";nc(this)}},$w.nf=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){this.g.abr.enabled&&B("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.i.variants.find(function(t){return t.id==e.id});r?dn(r)?(Ql(this,r,!1,t,n),this.Ha=new Cn(r,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),zl(this)):H("Unable to switch to restricted track",e.id):H("No variant with id",e.id)}else if(this.h&&this.h.audioTracks)for(t=Array.from(this.h.audioTracks),t=a(t),n=t.next();!n.done;n=t.next())if(n=n.value,sn(n)==e.id){$l(this,n);break}},$w.Sg=function(){return gc(this.yb())},$w.mh=function(){return gc(this.kc())},$w.Rg=function(){return Array.from(pc(this.yb()))},$w.lh=function(){return Array.from(pc(this.kc()))},$w.lg=function(e,t,n,r,i,o){if(n=void 0===n?0:n,r=void 0===r?"":r,o=void 0===o?0:o,this.i&&this.C){for(this.Ha=new In(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,r,i),e=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},t=this.j.j,r=this.Ha.create(this.i.variants),n=null,r=a(r.values()),i=r.next();!i.done;i=r.next())i=i.value,(!n||e(n,t)>e(i,t))&&(n=i);n?(e=rn(n),this.nf(e,!0,o)):Jl(this)}else this.h&&this.h.audioTracks&&(o=fn(this.yb(),e,t||"",!1)[0])&&this.nf(o)},$w.mf=function(e,t,n){n=void 0!==n&&n,this.i&&this.C?(this.jb=e,this.Oc=t||"",this.Nc=n,(e=fn(this.i.textStreams,this.jb,this.Oc,this.Nc)[0]||null)&&(e==this.j.o?q("Text track already selected."):(Xu(this.u.h,e,!1),(this.g.streaming.alwaysStreamText||this.Ne())&&(Es(this.j,e),nc(this))))):(e=fn(this.kc(),e,t||"",n)[0])&&this.mg(e)},$w.$h=function(e,t,n){if(t=void 0===t||t,n=void 0===n?0:n,this.i&&this.C){for(var r=null,i=a(this.i.variants),o=i.next();!o.done;o=i.next())if(o=o.value,o.audio.label==e){r=o;break}null==r?W("No variants were found with label: "+e+". Ignoring the request to switch."):(this.Ha=new In(r.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Jl(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=a(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&$l(this,t)}},$w.Ne=function(){var e=this.ba;return this.F&&this.m==tS?this.F.F.isTextVisible():this.h&&this.h.src&&this.h.textTracks?Cl(this).some(function(e){return"showing"==e.mode}):e},$w.Rf=function(){return this.h&&this.h.src&&this.h.textTracks?Ml(this).map(function(e){return un(e)}):[]},$w.Ug=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=pt(e),n=Ml(this).filter(function(e){return pt(e.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=a(n);for(var i=n.next();!i.done;i=n.next())if((i=i.value)&&i.cues){i=a(i.cues);for(var o=i.next();!o.done;o=i.next()){var s=o.value;(o=s.id)&&""!=o||(o=s.startTime+"-"+s.endTime+"-"+s.text),s={id:o,title:s.text,startTime:s.startTime,endTime:s.endTime},r.has(o)||(e.push(s),r.add(o))}}return e},$w.rg=function(e){if(e=!!e,this.ba!=e){if(this.ba=e,this.m==tS)this.F.F.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.o||(e=fn(this.i.textStreams,this.jb,this.Oc,this.Nc),0<e.length&&(Es(this.j,e[0]),nc(this))):_s(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=Cl(this);t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,"disabled"!=n.mode&&(n.mode=e?"showing":"hidden")}rc(this)}},$w.hh=function(){if(!this.R())return W("getPlayheadTimeAsDate is for live streams!"),null;if(this.C)var e=this.C.sd();else{if(null==this.ca)return new Date;e=this.ca}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.C||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?(W("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(t.getTime()+1e3*e)):(W("No way to get playhead time as Date!"),null)},$w.Uf=function(){if(!this.R())return W("getPresentationStartTimeAsDate is for live streams!"),null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.h&&this.h.getStartDate){var e=this.h.getStartDate();return isNaN(e.getTime())?(W("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):e}return W("No way to get presentation start time as Date!"),null},$w.nb=function(){if(this.m==tS)return this.F.nb();var e={total:[],audio:[],video:[],text:[]};return this.m==nS&&(e.total=co(this.h.buffered)),e},$w.getStats=function(){if(this.m!=tS&&this.m!=nS)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Kl(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.u;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.u.L=this.C.Cf(),this.u.N=this.C.Df()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.u;var r=Number(n.totalVideoFrames);t.K=Number(n.droppedVideoFrames),t.J=r,this.u.H=Number(n.corruptedVideoFrames)}if(this.l?(n=this.l,n=n.J?n.J:NaN):n=NaN,this.u.s=n,this.m==tS){if(n=this.j.j,t=this.j.o,n){r=this.J?this.J.h:1;var i=r*n.bandwidth;t&&t.bandwidth&&(i+=r*t.bandwidth),this.u.A=i}n&&n.video&&(t=this.u,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.R()&&(n=this.Uf().valueOf()+1e3*e.currentTime,this.u.C=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.u.G=this.i.presentationTimeline.g),n=this.s.getBandwidthEstimate(),this.u.u=n}this.m==nS&&(n=this.u,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var o=this.u;e=o.o,n=o.l,t=o.A,r=o.J,i=o.K;var s=o.H,u=o.N,l=o.L,c=o.u,d=o.i,h=o.m,f=o.F,p=o.j,g=qu(o.g,"playing"),y=qu(o.g,"paused"),v=qu(o.g,"buffering"),m=o.s,b=o.C,w=o.G,_=Gu(o.g),T=[];o=a(o.h.g);for(var S=o.next();!S.done;S=o.next())S=S.value,T.push({timestamp:S.timestamp,id:S.id,type:S.type,fromAdaptation:S.fromAdaptation,bandwidth:S.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:i,corruptedFrames:s,stallsDetected:u,gapsJumped:l,estimatedBandwidth:c,completionPercent:d,loadLatency:h,manifestTimeSeconds:f,drmTimeSeconds:p,playTime:g,pauseTime:y,bufferingTime:v,licenseTime:m,liveLatency:b,maxSegmentDuration:w,stateHistory:_,switchHistory:T}},$w.Eg=function(e,t,n,r,i,o,a){a=void 0!==a&&a;var s,u,l,c,d,f,p,g,y,v,m,b,w=this;return A(function(_){switch(_.g){case 1:if(w.m!=tS&&w.m!=nS)throw H("Must call load() and wait for it to resolve before adding text tracks."),new Ne(1,7,7004);if("subtitles"!=n&&"captions"!=n&&B("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){_.B(2);break}return h(_,Ol(w,e),3);case 3:r=_.h;case 2:if(s=[],w.A&&(s=w.A.getCuePoints()),w.m!=nS){_.B(4);break}return a&&(n="forced"),h(_,Pl(w,e,t,n,r,o||"",s),5);case 5:if(u=pt(t),l=w.kc(),c=l.find(function(e){return pt(e.language)==u&&e.label==(o||"")&&e.kind==n}))return ec(w),_.return(c);throw H("Cannot add this text when loaded with src="),new Ne(1,2,2012);case 4:if(d=z_,f=w.h.duration,w.i&&(f=w.i.presentationTimeline.getDuration()),1/0==f)throw new Ne(1,4,4033);if(!s.length){_.B(6);break}return h(_,jl(w,e,w.H,w.g.streaming.retryParameters),7);case 7:p=_.h,g=Dl(w,p,r,s),y=new Blob([g],{type:"text/vtt"}),e=RT(y),r="text/vtt";case 6:if(v={id:w.$e++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ya(0,f,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:d.ia,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!a,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([We(r||"",i||"")])},m=We(v.mimeType,v.codecs),!(b=tt(m)))throw new Ne(2,2,2014,r);return w.i.textStreams.push(v),ec(w),_.return(on(v))}})},$w.Fg=function(e,t){var n,r,i,o,s,u,l,c,d,f,p,g,y,v,m,b,w=this;return A(function(_){switch(_.g){case 1:if(w.m!=tS&&w.m!=nS)throw H("Must call load() and wait for it to resolve before adding image tracks."),new Ne(1,7,7004);if(t){_.B(2);break}return h(_,Ol(w,e),3);case 3:t=_.h;case 2:if("text/vtt"!=t)throw new Ne(1,2,2017,e);if(n=z_,r=w.h.duration,w.i&&(r=w.i.presentationTimeline.getDuration()),1/0==r)throw new Ne(1,4,4045);return h(_,jl(w,e,w.H,w.g.streaming.retryParameters),4);case 4:if(i=_.h,!(o=$_[t]))throw new Ne(2,2,2014,t);for(s=o(),u={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0},l=le(i),c=s.parseMedia(l,u,e),d=[],f={},p=a(c),g=p.next();!g.done;f={Hc:f.Hc,Fb:f.Fb},g=p.next())f.Fb=g.value,f.Hc=null,y=function(t){return function(){return null==t.Hc&&(t.Hc=Ue([e],[t.Fb.payload])),t.Hc||[]}}(f),v=new io(f.Fb.startTime,f.Fb.endTime,y,0,null,null,0,0,1/0),f.Fb.payload.includes("#xywh")&&(m=f.Fb.payload.split("#xywh=")[1].split(","),4===m.length&&v.sg({height:parseInt(m[3],10),positionX:parseInt(m[0],10),positionY:parseInt(m[1],10),width:parseInt(m[2],10)})),d.push(v);return b={id:w.$e++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Xa(d),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ie,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([We(t||"","")])},w.m==nS?w.Sc.push(b):w.i.imageStreams.push(b),ec(w),_.return(an(b))}})},$w.Dg=function(e,t,n){var r,i,o,a,s=this;return A(function(u){switch(u.g){case 1:if(s.m!=tS&&s.m!=nS)throw H("Must call load() and wait for it to resolve before adding chapters tracks."),new Ne(1,7,7004);if(n){u.B(2);break}return h(u,Ol(s,e),3);case 3:n=u.h;case 2:return r=[],s.A&&(r=s.A.getCuePoints()),h(u,Pl(s,e,t,"chapters",n,"",r),4);case 4:if(i=u.h,o=s.Rf(),!(a=o.find(function(e){return e.language==t}))){u.B(5);break}return h(u,new Promise(function(e,t){s.o.la(i,"load",e),s.o.la(i,"error",function(){t(new Ne(1,2,2015))})}),6);case 6:return ec(s),u.return(a);case 5:throw H("Cannot add this text when loaded with src="),new Ne(1,2,2012)}})},$w.tf=function(e,t){this.Jd.width=e,this.Jd.height=t},$w.jf=function(e){if(this.m==tS){var t=this.j;if(e=void 0===e?.1:e,t.l.g)H("Unable to retry after StreamingEngine is destroyed!"),t=!1;else if(t.s)H("Unable to retry after StreamingEngine encountered a fatal error!"),t=!1;else{for(var n=a(t.i.values()),r=n.next();!r.done;r=n.next()){r=r.value;var i=Js(r);!r.Yc||r.Ga||r.ib||(K(i,"Retrying after failure..."),r.Yc=!1,qs(t,r,e))}t=!0}}else t=!1;return t},$w.bh=function(){return this.i},$w.dh=function(){return this.Md},$w.hf=function(){this.l&&this.l.hf()},$w.jd=function(e){this.Oe=e,this.l&&this.l.jd(e)},$w.ug=function(e){this.zd=e},$w.yd=function(e,t){if(!this.g.abr.enabled||this.m===ZT||this.m!=tS||!navigator.onLine)return!1;if(this.i.variants.some(function(t){return!(!(t=t[e.type])||t.id===e.id)&&("audio"!=e.type||e.language===t.language)})){for(var n=a(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var i=r[e.type];i&&i.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t,z("Disabled stream "+e.type+":"+e.id+" for "+t+" seconds..."))}return this.Bd.$a(1),t=this.nb().video.reduce(function(e,t){return e+t.end-t.start},0),Jl(this,!0,t,!0,!1),!0}return W("No alternate stream found for active "+e.type+" stream. Will ignore request to disable stream..."),!1},P("shaka.Player",Ju),Ju.prototype.setVideoContainer=Ju.prototype.ug,Ju.prototype.setLicenceRequiredCallback=Ju.prototype.jd,Ju.prototype.requestLicence=Ju.prototype.hf,Ju.prototype.getManifestParserFactory=Ju.prototype.dh,Ju.prototype.getManifest=Ju.prototype.bh,Ju.prototype.retryStreaming=Ju.prototype.jf,Ju.prototype.setMaxHardwareResolution=Ju.prototype.tf,Ju.prototype.addChaptersTrack=Ju.prototype.Dg,Ju.prototype.addThumbnailsTrack=Ju.prototype.Fg,Ju.prototype.addTextTrackAsync=Ju.prototype.Eg,Ju.prototype.getStats=Ju.prototype.getStats,Ju.prototype.getBufferedInfo=Ju.prototype.nb,Ju.prototype.getPresentationStartTimeAsDate=Ju.prototype.Uf,Ju.prototype.getPlayheadTimeAsDate=Ju.prototype.hh,Ju.prototype.setTextTrackVisibility=Ju.prototype.rg,Ju.prototype.getChapters=Ju.prototype.Ug,Ju.prototype.getChaptersTracks=Ju.prototype.Rf,Ju.prototype.isTextTrackVisible=Ju.prototype.Ne,Ju.prototype.selectVariantsByLabel=Ju.prototype.$h,Ju.prototype.selectTextLanguage=Ju.prototype.mf,Ju.prototype.selectAudioLanguage=Ju.prototype.lg,Ju.prototype.getTextLanguages=Ju.prototype.lh,Ju.prototype.getAudioLanguages=Ju.prototype.Rg,Ju.prototype.getTextLanguagesAndRoles=Ju.prototype.mh,Ju.prototype.getAudioLanguagesAndRoles=Ju.prototype.Sg,Ju.prototype.selectVariantTrack=Ju.prototype.nf,Ju.prototype.selectTextTrack=Ju.prototype.mg,Ju.prototype.getThumbnails=Ju.prototype.Vf,Ju.prototype.getAllThumbnails=Ju.prototype.Qg,Ju.prototype.getImageTracks=Ju.prototype.Zg,Ju.prototype.getTextTracks=Ju.prototype.kc,Ju.prototype.getVariantTracks=Ju.prototype.yb,Ju.prototype.cancelTrickPlay=Ju.prototype.wd,Ju.prototype.trickPlay=Ju.prototype.zf,Ju.prototype.getPlaybackRate=Ju.prototype.Dd,Ju.prototype.isBuffering=Ju.prototype.Le,Ju.prototype.getKeyStatuses=Ju.prototype.Vc,Ju.prototype.getActiveSessionsMetadata=Ju.prototype.Ge,Ju.prototype.getExpiration=Ju.prototype.Uc,Ju.prototype.drmInfo=Ju.prototype.drmInfo,Ju.prototype.keySystem=Ju.prototype.keySystem,Ju.prototype.goToLive=Ju.prototype.th,Ju.prototype.seekRange=Ju.prototype.Ab,Ju.prototype.isAudioOnly=Ju.prototype.wh,Ju.prototype.isInProgress=Ju.prototype.Rb,Ju.prototype.isLive=Ju.prototype.R,Ju.prototype.getAdManager=Ju.prototype.Qf,Ju.prototype.getAssetUri=Ju.prototype.He,Ju.prototype.getNetworkingEngine=Ju.prototype.Nb,Ju.prototype.getMediaElement=Ju.prototype.fh,Ju.prototype.getManifestType=Ju.prototype.Ie,Ju.prototype.getLoadMode=Ju.prototype.ah,Ju.prototype.resetConfiguration=Ju.prototype.Uh,Ju.prototype.getBufferFullness=Ju.prototype.Tg,Ju.prototype.getConfiguration=Ju.prototype.getConfiguration,Ju.prototype.configure=Ju.prototype.configure,Ju.prototype.releaseAllMutexes=Ju.prototype.Qh,Ju.prototype.load=Ju.prototype.load,Ju.prototype.updateStartTime=Ju.prototype.ii,Ju.prototype.unload=Ju.prototype.tc,Ju.prototype.detach=Ju.prototype.detach,Ju.prototype.attachCanvas=Ju.prototype.Hg,Ju.prototype.attach=Ju.prototype.Mc,Ju.probeSupport=function(e){e=void 0===e||e;var t,n,r,i,o,u;return A(function(l){if(1==l.g)return t={},e?h(l,Fi(),3):l.B(2);2!=l.g&&(t=l.h);var c={};if(St())for(var d in ET)c[d]=!0;d=a(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var f=d.next();!f.done;f=d.next())f=f.value,c[f]=St()?!!ET[f]:Et(f);for(n=c,d='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(s(Q_)),c={},d=a(d),f=d.next();!f.done;f=d.next()){f=f.value,c[f]=St()?!!tt(f)||(te(f)||!!ke(f)):Et(f);var p=f.split(";")[0];c[p]=c[p]||c[f]}r=c,i={manifest:n,media:r,drm:t},o=oS;for(u in o)i[u]=o[u]();return l.return(i)})},Ju.isBrowserSupported=function(){if(e.Promise||B("A Promise implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||Lt("Trident/"))return!1;var t=Rt();return!(t&&9>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!St()||Et("application/x-mpegurl"))},Ju.setAdManagerFactory=function(e){aS=e},Ju.registerSupportPlugin=function(e,t){oS[e]=t},Ju.prototype.destroy=Ju.prototype.destroy;var ZT=0,eS=1,tS=2,nS=3;Ju.LoadMode={DESTROYED:ZT,NOT_LOADED:eS,MEDIA_SOURCE:tS,SRC_EQUALS:nS},Ju.version="4.7.14-nmp-7";var rS=["","7"];sT=new function(e){this.g=e,this.i=Tn,this.h=Sn}(new wn(Number(rS[0]),Number(rS[1])));var iS=["output-restricted","internal-error"],oS={},aS=null;$w=vc.prototype,$w.getDuration=function(){return this.g.getDuration()},$w.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},$w.getRemainingTime=function(){return this.h.getRemainingTime()},$w.isPaused=function(){return this.i},$w.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},$w.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},$w.canSkipNow=function(){return this.h.getAdSkippableState()},$w.skip=function(){return this.h.skip()},$w.pause=function(){return this.h.pause()},$w.play=function(){return this.h.resume()},$w.getVolume=function(){return this.h.getVolume()},$w.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},$w.isMuted=function(){return 0==this.h.getVolume()},$w.isLinear=function(){return this.g.isLinear()},$w.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},$w.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},$w.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},$w.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},$w.getTitle=function(){return this.g.getTitle()},$w.getDescription=function(){return this.g.getDescription()},$w.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},$w.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},$w.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},$w.getAdId=function(){return this.g.getAdId()},$w.getCreativeAdId=function(){return this.g.getCreativeAdId()},$w.getAdvertiserName=function(){return this.g.getAdvertiserName()},$w.getMediaUrl=function(){return this.g.getMediaUrl()},$w.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},$w.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},$w.release=function(){this.h=this.g=null},P("shaka.ads.ClientSideAd",vc),vc.prototype.release=vc.prototype.release,vc.prototype.getPodIndex=vc.prototype.getPodIndex,vc.prototype.getTimeOffset=vc.prototype.getTimeOffset,vc.prototype.getMediaUrl=vc.prototype.getMediaUrl,vc.prototype.getAdvertiserName=vc.prototype.getAdvertiserName,vc.prototype.getCreativeAdId=vc.prototype.getCreativeAdId,vc.prototype.getAdId=vc.prototype.getAdId,vc.prototype.getVastMediaWidth=vc.prototype.getVastMediaWidth,vc.prototype.getVastMediaHeight=vc.prototype.getVastMediaHeight,vc.prototype.getVastMediaBitrate=vc.prototype.getVastMediaBitrate,vc.prototype.getDescription=vc.prototype.getDescription,vc.prototype.getTitle=vc.prototype.getTitle,vc.prototype.getPositionInSequence=vc.prototype.getPositionInSequence,vc.prototype.getSequenceLength=vc.prototype.getSequenceLength,vc.prototype.setMuted=vc.prototype.setMuted,vc.prototype.resize=vc.prototype.resize,vc.prototype.isLinear=vc.prototype.isLinear,vc.prototype.isMuted=vc.prototype.isMuted,vc.prototype.setVolume=vc.prototype.setVolume,vc.prototype.getVolume=vc.prototype.getVolume,vc.prototype.play=vc.prototype.play,vc.prototype.pause=vc.prototype.pause,vc.prototype.skip=vc.prototype.skip,vc.prototype.canSkipNow=vc.prototype.canSkipNow,vc.prototype.getTimeUntilSkippable=vc.prototype.getTimeUntilSkippable,vc.prototype.isSkippable=vc.prototype.isSkippable,vc.prototype.isPaused=vc.prototype.isPaused,vc.prototype.getRemainingTime=vc.prototype.getRemainingTime,vc.prototype.getMinSuggestedDuration=vc.prototype.getMinSuggestedDuration,vc.prototype.getDuration=vc.prototype.getDuration,mc.prototype.configure=function(e){this.s=e},mc.prototype.stop=function(){this.g&&this.g.stop(),this.o&&au(this.o)},mc.prototype.release=function(){this.stop(),this.u&&this.u.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()},$w=kc.prototype,$w.getDuration=function(){return this.h.durationInSeconds},$w.getMinSuggestedDuration=function(){return this.getDuration()},$w.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},$w.isPaused=function(){return this.g.paused},$w.isSkippable=function(){return!!this.h.skipOffset},$w.getTimeUntilSkippable=function(){if(!this.h.skipOffset)return this.getRemainingTime();var e=this.getRemainingTime()-this.h.skipOffset;return Math.max(e,0)},$w.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},$w.skip=function(){this.g.currentTime+=this.getRemainingTime()},$w.pause=function(){return this.g.pause()},$w.play=function(){return this.g.play()},$w.getVolume=function(){return this.g.volume},$w.setVolume=function(e){this.g.volume=e},$w.isMuted=function(){return this.g.muted},$w.isLinear=function(){return this.l},$w.resize=function(){},$w.setMuted=function(e){this.g.muted=e},$w.getSequenceLength=function(){return this.j?this.j:1},$w.getPositionInSequence=function(){return this.i?this.i:1},$w.getTitle=function(){return this.h.adTitle},$w.getDescription=function(){return""},$w.getVastMediaBitrate=function(){return 0},$w.getVastMediaHeight=function(){return 0},$w.getVastMediaWidth=function(){return 0},$w.getAdId=function(){return this.h.adId},$w.getCreativeAdId=function(){return this.h.creativeId},$w.getAdvertiserName=function(){return""},$w.getMediaUrl=function(){return null},$w.getTimeOffset=function(){return 0},$w.getPodIndex=function(){return 0},$w.release=function(){this.j=this.i=this.g=this.h=null},P("shaka.ads.MediaTailorAd",kc),kc.prototype.release=kc.prototype.release,kc.prototype.getPodIndex=kc.prototype.getPodIndex,kc.prototype.getTimeOffset=kc.prototype.getTimeOffset,kc.prototype.getMediaUrl=kc.prototype.getMediaUrl,kc.prototype.getAdvertiserName=kc.prototype.getAdvertiserName,kc.prototype.getCreativeAdId=kc.prototype.getCreativeAdId,kc.prototype.getAdId=kc.prototype.getAdId,kc.prototype.getVastMediaWidth=kc.prototype.getVastMediaWidth,kc.prototype.getVastMediaHeight=kc.prototype.getVastMediaHeight,kc.prototype.getVastMediaBitrate=kc.prototype.getVastMediaBitrate,kc.prototype.getDescription=kc.prototype.getDescription,kc.prototype.getTitle=kc.prototype.getTitle,kc.prototype.getPositionInSequence=kc.prototype.getPositionInSequence,kc.prototype.getSequenceLength=kc.prototype.getSequenceLength,kc.prototype.setMuted=kc.prototype.setMuted,kc.prototype.resize=kc.prototype.resize,kc.prototype.isLinear=kc.prototype.isLinear,kc.prototype.isMuted=kc.prototype.isMuted,kc.prototype.setVolume=kc.prototype.setVolume,kc.prototype.getVolume=kc.prototype.getVolume,kc.prototype.play=kc.prototype.play,kc.prototype.pause=kc.prototype.pause,kc.prototype.skip=kc.prototype.skip,kc.prototype.canSkipNow=kc.prototype.canSkipNow,kc.prototype.getTimeUntilSkippable=kc.prototype.getTimeUntilSkippable,kc.prototype.isSkippable=kc.prototype.isSkippable,kc.prototype.isPaused=kc.prototype.isPaused,kc.prototype.getRemainingTime=kc.prototype.getRemainingTime,kc.prototype.getMinSuggestedDuration=kc.prototype.getMinSuggestedDuration,kc.prototype.getDuration=kc.prototype.getDuration,Ac.prototype.stop=function(){for(var e=a(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Cb(t.target,t.type,t.listener);Dc(this),this.m=[],this.s=[],this.N="",this.V=!0,this.G="",this.u=null,this.j=[],this.L=[],this.F.clear()},Ac.prototype.release=function(){this.stop(),this.o&&this.o.release()},Ac.prototype.onManifestUpdated=function(e){this.H=e,""!=this.N&&(Cc(this,this.N,this.V),this.V=!1)},Ac.prototype.getCuePoints=function(){for(var e=[],t=a(this.j),n=t.next();!n.done;n=t.next()){n=a(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e},$w=Nc.prototype,$w.getDuration=function(){return this.i?this.i.duration:-1},$w.getMinSuggestedDuration=function(){return this.getDuration()},$w.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},$w.isPaused=function(){return this.h.paused},$w.isSkippable=function(){return this.g.isSkippable()},$w.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},$w.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},$w.skip=function(){this.h.currentTime+=this.getRemainingTime()},$w.pause=function(){return this.h.pause()},$w.play=function(){return this.h.play()},$w.getVolume=function(){return this.h.volume},$w.setVolume=function(e){this.h.volume=e},$w.isMuted=function(){return this.h.muted},$w.isLinear=function(){return!0},$w.resize=function(){},$w.setMuted=function(e){this.h.muted=e},$w.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},$w.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},$w.getTitle=function(){return this.g.getTitle()},$w.getDescription=function(){return this.g.getDescription()},$w.getVastMediaBitrate=function(){return 0},$w.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},$w.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},$w.getAdId=function(){return this.g.getAdId()},$w.getCreativeAdId=function(){return this.g.getCreativeAdId()},$w.getAdvertiserName=function(){return this.g.getAdvertiserName()},$w.getMediaUrl=function(){return null},$w.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},$w.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},$w.release=function(){this.h=this.i=this.g=null},P("shaka.ads.ServerSideAd",Nc),Nc.prototype.release=Nc.prototype.release,Nc.prototype.getPodIndex=Nc.prototype.getPodIndex,Nc.prototype.getTimeOffset=Nc.prototype.getTimeOffset,Nc.prototype.getMediaUrl=Nc.prototype.getMediaUrl,Nc.prototype.getAdvertiserName=Nc.prototype.getAdvertiserName,Nc.prototype.getCreativeAdId=Nc.prototype.getCreativeAdId,Nc.prototype.getAdId=Nc.prototype.getAdId,Nc.prototype.getVastMediaWidth=Nc.prototype.getVastMediaWidth,Nc.prototype.getVastMediaHeight=Nc.prototype.getVastMediaHeight,Nc.prototype.getVastMediaBitrate=Nc.prototype.getVastMediaBitrate,Nc.prototype.getDescription=Nc.prototype.getDescription,Nc.prototype.getTitle=Nc.prototype.getTitle,Nc.prototype.getPositionInSequence=Nc.prototype.getPositionInSequence,Nc.prototype.getSequenceLength=Nc.prototype.getSequenceLength,Nc.prototype.setMuted=Nc.prototype.setMuted,Nc.prototype.resize=Nc.prototype.resize,Nc.prototype.isLinear=Nc.prototype.isLinear,Nc.prototype.isMuted=Nc.prototype.isMuted,Nc.prototype.setVolume=Nc.prototype.setVolume,Nc.prototype.getVolume=Nc.prototype.getVolume,Nc.prototype.play=Nc.prototype.play,Nc.prototype.pause=Nc.prototype.pause,Nc.prototype.skip=Nc.prototype.skip,Nc.prototype.canSkipNow=Nc.prototype.canSkipNow,Nc.prototype.getTimeUntilSkippable=Nc.prototype.getTimeUntilSkippable,Nc.prototype.isSkippable=Nc.prototype.isSkippable,Nc.prototype.isPaused=Nc.prototype.isPaused,Nc.prototype.getRemainingTime=Nc.prototype.getRemainingTime,Nc.prototype.getMinSuggestedDuration=Nc.prototype.getMinSuggestedDuration,Nc.prototype.getDuration=Nc.prototype.getDuration,$w=Uc.prototype,$w.configure=function(){},$w.stop=function(){this.A="",this.o=null,this.C=[]},$w.release=function(){this.stop(),this.h&&this.h.release()},$w.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},$w.getCuePoints=function(){return this.C},u(Bc,tr);$w=Bc.prototype,$w.setLocale=function(e){this.m=e},$w.configure=function(e){this.l=e,this.h&&this.h.configure(this.l),this.g&&this.g.configure(this.l)},$w.initClientSide=function(t,n,r){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new Ne(2,10,1e4);this.h&&this.h.release(),this.h=new mc(t,n,this.m,r,function(e){return Vc(i,e)}),this.h.configure(this.l)},$w.release=function(){this.h&&(this.h.release(),this.h=null),this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),tr.prototype.release.call(this)},$w.onAssetUnload=function(){this.h&&this.h.stop(),this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Zn("ad-stopped")),this.j=new yc},$w.requestClientSideAds=function(e){if(!this.h)throw new Ne(1,10,10001);var t=this.h;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.F=Date.now()/1e3,t.l.requestAds(e)},$w.updateClientSideAdsRenderingSettings=function(e){if(!this.h)throw new Ne(1,10,10001);var t=this.h;t.A=e,t.g&&t.g.updateAdsRenderingSettings(t.A)},$w.initMediaTailor=function(e,t,n){var r=this;this.i&&this.i.release(),this.i=new Ac(e,t,n,function(e){return Vc(r,e)})},$w.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new Ne(1,10,10005);var r=this.i;return n=void 0===n?"":n,r.l?e=Promise.reject(new Ne(1,10,10004)):(r.l=new qn,xc(r,e,t),r.G=n||"",r.W=Date.now()/1e3,e=r.l),e},$w.initServerSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.dai)throw new Ne(2,10,10002);this.g&&this.g.release(),this.g=new Uc(t,n,this.m,function(e){return Vc(r,e)}),this.g.configure(this.l)},$w.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new Ne(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&B('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="4.7.14-nmp-7",n=this.g,n.j?e=Promise.reject(new Ne(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new qn,n.g.requestStream(e),n.A=t||"",n.F=Date.now()/1e3,e=n.j),e},$w.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new Ne(1,10,10003);(e.mpt||e.mpv)&&B('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="4.7.14-nmp-7",this.g.g.replaceAdTagParameters(e)},$w.getServerSideCuePoints=function(){return _n("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},$w.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},$w.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},$w.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},$w.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}},$w.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},$w.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},P("shaka.ads.AdManager",Bc),Bc.prototype.onCueMetadataChange=Bc.prototype.onCueMetadataChange,Bc.prototype.onHlsTimedMetadata=Bc.prototype.onHlsTimedMetadata,Bc.prototype.onDashTimedMetadata=Bc.prototype.onDashTimedMetadata,Bc.prototype.onManifestUpdated=Bc.prototype.onManifestUpdated,Bc.prototype.getStats=Bc.prototype.getStats,Bc.prototype.getCuePoints=Bc.prototype.getCuePoints,Bc.prototype.getServerSideCuePoints=Bc.prototype.getServerSideCuePoints,Bc.prototype.replaceServerSideAdTagParameters=Bc.prototype.replaceServerSideAdTagParameters,Bc.prototype.requestServerSideStream=Bc.prototype.requestServerSideStream,Bc.prototype.initServerSide=Bc.prototype.initServerSide,Bc.prototype.requestMediaTailorStream=Bc.prototype.requestMediaTailorStream,Bc.prototype.initMediaTailor=Bc.prototype.initMediaTailor,Bc.prototype.updateClientSideAdsRenderingSettings=Bc.prototype.updateClientSideAdsRenderingSettings,Bc.prototype.requestClientSideAds=Bc.prototype.requestClientSideAds,Bc.prototype.onAssetUnload=Bc.prototype.onAssetUnload,Bc.prototype.release=Bc.prototype.release,Bc.prototype.initClientSide=Bc.prototype.initClientSide,Bc.prototype.configure=Bc.prototype.configure,Bc.prototype.setLocale=Bc.prototype.setLocale,Bc.ADS_LOADED="ads-loaded",Bc.AD_STARTED="ad-started",Bc.AD_FIRST_QUARTILE="ad-first-quartile",Bc.AD_MIDPOINT="ad-midpoint",Bc.AD_THIRD_QUARTILE="ad-third-quartile",Bc.AD_COMPLETE="ad-complete",Bc.AD_STOPPED="ad-stopped",Bc.AD_SKIPPED="ad-skipped",Bc.AD_VOLUME_CHANGED="ad-volume-changed",Bc.AD_MUTED="ad-muted",Bc.AD_PAUSED="ad-paused",Bc.AD_RESUMED="ad-resumed",Bc.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Bc.CUEPOINTS_CHANGED="ad-cue-points-changed",Bc.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Bc.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Bc.AD_CLICKED="ad-clicked",Bc.AD_PROGRESS="ad-progress",Bc.AD_BUFFERING="ad-buffering",Bc.AD_IMPRESSION="ad-impression",Bc.AD_DURATION_CHANGED="ad-duration-changed",Bc.AD_CLOSED="ad-closed",Bc.AD_LOADED="ad-loaded",Bc.ALL_ADS_COMPLETED="all-ads-completed",Bc.AD_LINEAR_CHANGED="ad-linear-changed",Bc.AD_METADATA="ad-metadata",Bc.AD_RECOVERABLE_ERROR="ad-recoverable-error",Bc.AD_ERROR="ad-error",Bc.AD_BREAK_READY="ad-break-ready",Bc.AD_INTERACTION="ad-interaction",aS=function(){return new Bc};var sS="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),uS="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),lS=["loop","playbackRate"],cS=["pause","play"],dS={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},hS={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},fS={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},pS=[["getConfiguration","configure"]],gS=[["isTextTrackVisible","setTextTrackVisibility"]],yS="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),vS=["attach","attachCanvas","detach","load","unload"];$w=qc.prototype,$w.destroy=function(){return TS.delete(this),$c(this),wS&&Jc(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.C=this.A=this.l=this.i=this.g=this.o=null,Promise.resolve()},$w.sa=function(){return this.h},$w.ff=function(){return this.J},$w.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.sc();var t=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);t=new chrome.cast.ApiConfig(t,function(e){for(var t=a(TS),n=t.next();!n.done;n=t.next())Yc(n.value,e)},function(e){for(var t=a(TS),n=t.next();!n.done;n=t.next()){n=n.value;var r=e;q("CastSender: receiver status",r),bS="available"==r,n.j.sc()}},"origin_scoped"),chrome.cast.initialize(t,function(){q("CastSender: init")},function(e){H("CastSender: init error",e)}),bS&&this.j.U(mS),(t=wS)&&t.status!=chrome.cast.SessionStatus.STOPPED?(q("CastSender: re-using existing connection"),Yc(this,t)):wS=null}else e.__onGCastApiAvailable!==ed&&(_S=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=ed)},$w.pf=function(e){this.o=e,this.h&&Zc(this,{type:"appData",appData:this.o})},$w.cast=function(){var e=this;return A(function(t){if(!e.m)throw new Ne(1,8,8e3);if(!bS)throw new Ne(1,8,8001);if(e.h)throw new Ne(1,8,8002);return e.l=new qn,chrome.cast.requestSession(function(t){return zc(e,t)},function(t){return Xc(e,t)}),h(t,e.l,0)})},$w.ec=function(){if(this.h){if($c(this),wS){Jc(this);try{wS.stop(function(){},function(){})}catch(e){}wS=null}Qc(this)}},$w.get=function(e,t){var n=this;if("video"==e){if(cS.includes(t))return function(){return n.jg.apply(n,[e,t].concat(s(x.apply(0,arguments))))}}else if("player"==e){if(fS[t]&&!this.get("player","isLive")())return function(){};if(yS.includes(t))return function(){return n.jg.apply(n,[e,t].concat(s(x.apply(0,arguments))))};if(vS.includes(t))return function(){return n.Rh.apply(n,[e,t].concat(s(x.apply(0,arguments))))};if(dS[t]||hS[t])return function(){return n.g[e][t]}}return this.g[e][t]},$w.set=function(e,t,n){this.g[e][t]=n,Zc(this,{type:"set",targetName:e,property:t,value:n})},$w.jg=function(e,t){Zc(this,{type:"call",targetName:e,methodName:t,args:x.apply(2,arguments)})},$w.Rh=function(e,t){var n=x.apply(2,arguments),r=new qn,i=this.H.toString();this.H++,this.i[i]=r;try{Zc(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i})}catch(e){r.reject(e)}return r};var mS=.02,bS=!1,wS=null,_S=null,TS=new Set;u(td,tr),$w=td.prototype,$w.destroy=function(e){return e&&this.g.ec(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,tr.prototype.release.call(this),Promise.all(e)},$w.rh=function(){return this.l},$w.gh=function(){return this.s},$w.Ig=function(){return this.g.m&&bS},$w.sa=function(){return this.g.sa()},$w.ff=function(){return this.g.ff()},$w.cast=function(){var e=this;return A(function(t){return 1==t.g?h(t,e.g.cast(),2):e.h?h(t,e.h.tc(),0):t.return()})},$w.pf=function(e){this.g.pf(e)},$w.ei=function(){Gc(this.g)},$w.ec=function(){this.g.ec()},$w.Jg=function(e,t){t=void 0!==t&&t;var n=this;return A(function(r){if(1==r.g)return e==n.C&&t==n.A?r.return():(n.C=e,n.A=t,n.g.ec(),h(r,n.g.destroy(),2));n.g=null,n.g=new qc(e,function(){return ad(n)},function(){return sd(n)},function(e,t){return dd(n,e,t)},function(){return ud(n)},function(){return od(n)},t),n.g.init(),f(r)})},P("shaka.cast.CastProxy",td),td.prototype.changeReceiverId=td.prototype.Jg,td.prototype.forceDisconnect=td.prototype.ec,td.prototype.suggestDisconnect=td.prototype.ei,td.prototype.setAppData=td.prototype.pf,td.prototype.cast=td.prototype.cast,td.prototype.receiverName=td.prototype.ff,td.prototype.isCasting=td.prototype.sa,td.prototype.canCast=td.prototype.Ig,td.prototype.getPlayer=td.prototype.gh,td.prototype.getVideo=td.prototype.rh,td.prototype.destroy=td.prototype.destroy,u(hd,tr),$w=hd.prototype,$w.isConnected=function(){return this.F},$w.xh=function(){return this.o},$w.ci=function(e){this.i=e},$w.Mg=function(){this.i=null},$w.di=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},$w.bi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},$w.ai=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},$w.destroy=function(){var e,t,n=this;return A(function(r){if(1==r.g)return n.j&&(n.j.release(),n.j=null),e=[],n.h&&(e.push(n.h.destroy()),n.h=null),n.G&&(n.G.stop(),n.G=null),n.g=null,n.H=null,n.C=null,n.F=!1,n.o=!0,n.l=null,n.s=null,tr.prototype.release.call(n),h(r,Promise.all(e),2);t=cast.receiver.CastReceiverManager.getInstance(),t.stop(),f(r)})},P("shaka.cast.CastReceiver",hd),hd.prototype.destroy=hd.prototype.destroy,hd.prototype.setContentArtist=hd.prototype.ai,hd.prototype.setContentImage=hd.prototype.bi,hd.prototype.setContentTitle=hd.prototype.di,hd.prototype.clearContentMetadata=hd.prototype.Mg,hd.prototype.setContentMetadata=hd.prototype.ci,hd.prototype.isIdle=hd.prototype.xh,hd.prototype.isConnected=hd.prototype.isConnected;var SS=.5,ES=5,kS="IDLE",AS="PLAYING",xS="BUFFERING",CS="PAUSED",IS=0,MS=1,OS=2,PS=3,jS=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),DS=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),RS=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),LS=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),NS=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]),US=0,FS=1,BS=3,VS=4,HS="black green blue cyan red yellow magenta black".split(" "),WS="white green blue cyan red yellow magenta white_italics".split(" ");Bd.prototype.isVisible=function(){return this.l};var KS=0,qS=1,GS=2,zS=0,XS=1,YS=2,JS=3,QS=4,$S=5,ZS=6,eE=7,tE=8;Xd.prototype.ea=function(){return this.g<this.h.length},Xd.prototype.pa=function(){return this.g},Xd.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Ne(2,2,3e3);this.g+=e};var nE=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),rE="black blue green cyan red magenta yellow white".split(" ");nh.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,rh(this),e=a(this.j.values());for(var t=e.next();!t.done;t=e.next())eh(t.value)},nh.prototype.extract=function(e,t){if(this.A){for(var n=a(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.A=!1}if(e=new xr(e,0),!(8>e.getLength())&&181===e.fa()&&49===e.ya()&&1195456820===e.M()&&3===e.fa()&&0!=(64&(n=e.fa())))for(n&=31,e.skip(1),r=0;r<n;r++){var i=e.fa(),o=(4&i)>>2,s=e.fa(),u=e.fa();o&&(i&=3,0===i||1===i?this.h.push({pts:t,type:i,Sa:s,lb:u,order:this.h.length}):(this.g.push({pts:t,type:i,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:u,order:this.g.length})))}},nh.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=a(this.h),r=n.next();!r.done;r=n.next())(r=ih(this,r.value))&&t.push(r);for(n=a(this.g),r=n.next();!r.done;r=n.next())zd(this.i,r.value);for(n=a(this.i.i),r=n.next();!r.done;r=n.next())r=oh(this,r.value),t.push.apply(t,s(r));return this.i.i=[],this.h=[],this.g=[],t},nh.prototype.getStreams=function(){return Array.from(this.u)},P("shaka.cea.CeaDecoder",nh),p_=function(){return new nh},uh.prototype.init=function(e){function t(e){(e=e.name)in sE&&(n.g=sE[e])}var n=this,r=[],i=[];if((new Ir).box("moov",Mr).box("mvex",Mr).O("trex",function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.M(),t=t.M(),n.h=e,n.i=t}).box("trak",Mr).O("tkhd",function(e){e=So(e.reader,e.version),r.push(e.trackId)}).box("mdia",Mr).O("mdhd",function(e){e=_o(e.reader,e.version),i.push(e.timescale)}).box("minf",Mr).box("stbl",Mr).O("stsd",Or).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",Pr).box("sinf",Mr).box("frma",function(e){(e=Ao(e.reader).ka)in sE&&(n.g=sE[e])}).parse(e,!0),!r.length||!i.length||r.length!=i.length)throw new Ne(2,2,2010);this.g==iE&&B("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(e,t){n.j.set(e,i[t])})},uh.prototype.parse=function(e){var t=this;if(this.g==iE)return[];var n=[],r=this.h,i=this.i,o=0,a=[],s=null,u=9e4;return(new Ir).box("moof",function(e){o=e.start,a=[],Mr(e)}).box("traf",Mr).O("trun",function(e){e=To(e.reader,e.version,e.flags),a.push(e)}).O("tfhd",function(e){e=bo(e.reader,e.flags),r=e.Mf||t.h,i=e.Pg||t.i,e=e.trackId,t.j.has(e)&&(u=t.j.get(e))}).O("tfdt",function(e){s=wo(e.reader,e.version).baseMediaDecodeTime}).box("mdat",function(e){if(null===s)throw B("Unable to find base media decode time for CEA captions!"),new Ne(2,2,2010);lh(t,e.reader,s,u,r,i,o-e.start-8,a,n)}).parse(e,!1),n},P("shaka.cea.Mp4CeaParser",uh);var iE=0,oE=1,aE=2,sE={avc1:oE,avc3:oE,hev1:aE,hvc1:aE,dvh1:aE,dvhe:aE};f_["video/mp4"]=function(){return new uh},ch.prototype.init=function(){},ch.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Fo;var t=[];if(e=le(e),!Ko(e))return t;e=this.g.parse(e);var n=e.Tc(),r=e.Gd();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=a(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&null!=r.time)for(var i=a(sh(r.data)),o=i.next();!o.done;o=i.next())t.push({packet:o.value,pts:r.time});return t},P("shaka.cea.TsCeaParser",ch),f_["video/mp2t"]=function(){return new ch};var uE=1,lE=(new Map).set("com.widevine.alpha",function(e){var t=Xr(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=Xr(e.node,"urn:microsoft","laurl"))?e.getAttribute("licenseUrl")||"":""}).set("com.microsoft.playready",gh).set("com.microsoft.playready.recommendation",gh).set("com.microsoft.playready.software",gh).set("com.microsoft.playready.hardware",gh).set("org.w3.clearkey",function(e){var t=Xr(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=Xr(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""});Mh.prototype.ea=function(){return this.g.ea()};var cE=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];u(rf,Xa),$w=rf.prototype,$w.ob=function(){return this.h?this.h.timeline.length:0},$w.release=function(){Xa.prototype.release.call(this),this.h=null},$w.bb=function(e){if(this.h){q(this.u+" Evicting at "+e);for(var t=0,n=this.h.timeline,r=0;r<n.length;r+=1){var i=n[r],o=i.end+this.i;if(i=i.start+this.i,!(o<=e))break;q("Evicting "+i+" - "+o),t+=1}0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,0===this.ob()&&this.release())}},$w.find=function(e){if(q("Find "+e),this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var i=t[r],o=i.start+this.i;if(i=r<n?t[r+1].start+this.i:1/0===this.l?i.end+this.i:this.l,e>=o&&e<i)return r+this.j}return null},$w.get=function(e){var t=this;if(0>(e-=this.j)||e>=this.ob()||!this.h)return null;var n=this.g[e];if(!n){var r=this.h.mc,i=this.h.timeline[e],o=i.Zh,a=this.h.Af+i.Bf;n=this.i-this.h.sb;var s=this.i+i.end,u=s;e===this.ob()-1&&1/0!==this.l&&(u=this.l);for(var l=this.h.codecs,c=this.h.mimeType,d=[],h=(i.end-i.start)/i.gb,f={},p=0;p<i.gb;f={Jc:f.Jc,ge:f.ge},p++){var g=i.start+h*p,y=g+h;f.ge=p+1,f.Jc=null,g=new io(this.i+g,this.i+y,function(e){return function(){return t.h?(null==e.Jc&&(e.Jc=uf(t.h.mc,t.u,o,t.C,a,e.ge,t.F)),e.Jc):[]}}(f),0,null,this.s,n,this.i,this.l,[],"",null,null,AT,this.A),g.codecs=l,g.mimeType=c,0==this.G?0<p&&g.Pd():0!=p%this.G&&g.Pd(),d.push(g)}n=new io(this.i+i.start,u,function(){return 0<i.gb?[]:uf(r,t.u,o,t.C,a,null,t.F)},0,null,this.s,n,this.i,this.l,d,"",null,null,AT,this.A,0<i.gb),n.codecs=l,n.mimeType=c,n.j=s,this.g[e]=n}return n},lf.prototype.configure=function(e){this.o=e},lf.prototype.destroy=function(){return this.u=this.o=null,this.j=[],this.h=null,this.m=[],this.F=[],this.l.clear(),null!=this.g&&(this.g.stop(),this.g=null),this.G.destroy()},lf.prototype.setManifestType=function(e){this.s=e},$w=gf.prototype,$w.release=function(){for(var e=a(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},$w.qh=function(){return this.j},$w.Je=function(){return this.l.slice()},$w.Yg=function(){return this.i},$w.If=function(e,t){var n,r,i,o,s,u,l,c,d,p,g,y,v,m,b,w,_,T,S,E,k,x,C,I,M,O,P,j,D,R=this;return A(function(A){if(1==A.g){if(n=z_,!t&&1==e.length)return r=yf(e,!1),i=r.Ff,o=r.yg,s=r.vg,u=r.Xf,R.h=Array.from(i[0].values()),R.g=Array.from(o[0].values()),R.l=Array.from(s[0].values()),R.i=Array.from(u[0].values()),A.B(2);for(l=-1,c=0;c<e.length;c++)d=e[c],R.o.has(d.id)||(R.o.add(d.id),-1==l&&(l=c));return-1==l?A.return():(p=yf(e,!0),g=p.Ff,y=p.yg,v=p.vg,m=p.Xf,h(A,Promise.all([mf(R,R.h,g,l,Sf,kf),mf(R,R.g,y,l,Sf,kf),mf(R,R.l,v,l,Sf,kf),mf(R,R.i,m,l,Sf,kf)]),2))}if(b=0,w=[],R.g.length&&R.h.length)for(x=a(R.h),C=x.next();!C.done;C=x.next())for(I=C.value,M=a(R.g),O=M.next();!O.done;O=M.next())P=O.value,j=Wi(I.drmInfos,P.drmInfos),I.drmInfos.length&&P.drmInfos.length&&!j.length?W("Incompatible DRM in audio & video, skipping variant creation.",I,P):(D=b++,w.push({id:D,language:I.language,disabledUntilTime:0,primary:I.primary,audio:I,video:P,label:P.label,bandwidth:(I.bandwidth||0)+(P.bandwidth||0),drmInfos:j,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(_=R.g.length?R.g:R.h,T=a(_),S=T.next();!S.done;S=T.next())E=S.value,k=b++,w.push({id:k,language:E.language,disabledUntilTime:0,primary:E.primary,audio:E.type==n.P?E:null,video:E.type==n.$?E:null,bandwidth:E.bandwidth||0,drmInfos:E.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});R.j=w,f(A)})},P("shaka.util.PeriodCombiner",gf),gf.prototype.combinePeriods=gf.prototype.If,gf.prototype.getImageStreams=gf.prototype.Yg,gf.prototype.getTextStreams=gf.prototype.Je,gf.prototype.getVariants=gf.prototype.qh;var dE=1,hE=0,fE=-1,pE=new Map;$w=Gf.prototype,$w.configure=function(e){this.g=e,this.h&&this.h.configure(this.g),this.l&&(this.l.m=this.g.dash.multiTypeVariantsAllowed&&ne())},$w.start=function(e,t){var n,r=this;return A(function(i){if(1==i.g)return r.s=t.isLowLatencyMode(),r.o=[e],r.i=t,h(i,zf(r),2);if(n=i.h,r.i&&rp(r,n),!r.i)throw new Ne(2,7,7001);return i.return(r.j)})},$w.stop=function(){for(var e=a(Object.values(this.m)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.l&&this.l.release(),this.g=this.i=null,this.o=[],this.j=null,this.m={},this.l=null,null!=this.G&&(this.G.stop(),this.G=null),this.h&&this.h.destroy(),this.C.destroy()},$w.update=function(){var e,t=this;return A(function(n){return 1==n.g?(p(n,2),h(n,zf(t),4)):2!=n.g?y(n,0):(e=v(n),t.i&&e?(t.i.onError(e),void f(n)):n.return())})},$w.onExpirationUpdated=function(){},$w.onInitialVariantChosen=function(e){if(this.j&&this.j.presentationTimeline.R()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.j.presentationTimeline.xb();var n=t.segmentIndex.find(e);null!=n&&(t=t.segmentIndex.get(n))&&(this.F=t.endTime-e,rp(this,0))}}},$w.banLocation=function(e){this.h&&this.h.i.set(e,Date.now()+6e4)},P("shaka.dash.DashParser",Gf),ET["application/dash+xml"]=function(){return new Gf},ET["video/vnd.mpeg.dash.mpd"]=function(){return new Gf},P("shaka.dependencies",pp),pp.has=function(e){return vE.has(e)},pp.add=function(e,t){if(!yE[e])throw Error(e+" is not supported");e==gE?_n("mux.js","mux.js is no longer used in Shaka Player."):vE.set(e,function(){return t})};var gE="muxjs",yE={lj:gE,ISOBoxer:"ISOBoxer"};pp.Allowed=yE;var vE=new Map([["ISOBoxer",function(){return e.ISOBoxer}]]);yp.prototype.toString=function(e){function t(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}var n="#"+this.name,r=this.g?this.g.filter(function(t){return!e||!e.has(t.name)}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n},yp.prototype.getAttribute=function(e){var t=this.g.filter(function(t){return t.name==e});return t.length?t[0]:null};var mE="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),bE="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");P("shaka.net.DataUriPlugin",Rp),Rp.parse=Lp,or("data",Lp),$w=Vp.prototype,$w.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},$w.start=function(e,t){var n,r=this;return A(function(i){return 1==i.g?(r.i=t,r.C=t.isLowLatencyMode(),h(i,Ng(r,[e]),2)):3!=i.g?(n=i.h,r.Y=n.uri,h(i,zp(r,n.data,e),3)):i.return(r.F)})},$w.stop=function(){this.u&&(this.u.stop(),this.u=null);var e=[];return this.N&&(e.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.Ba.clear(),this.F=null,this.h.clear(),this.J.clear(),this.H.clear(),this.o.clear(),this.W.clear(),this.j&&this.j.destroy(),Promise.all(e)},$w.update=function(){var e,t,n,r,i,o,u,l,c,d=this;return A(function(p){if(1==p.g){if(!Fg(d))return p.return();for(e=[],t=Array.from(d.h.values()),d.m=1/0,n=t.filter(function(e){return e.stream.segmentIndex}),r=a(n),i=r.next();!i.done;i=r.next())o=i.value,e.push(Wp(d,o));return h(p,Promise.all(e),2)}mg(d,n.map(function(e){return e.stream})),u=n.some(function(e){return 0==e.Xc}),n.length&&!u&&(l=AE,Bg(d,l.Cg),c=n.map(function(e){return e.pb}),d.l.Oa(Math.min.apply(Math,s(c))),d.i.updateDuration()),u&&Yp(d),f(p)})},$w.onExpirationUpdated=function(){},$w.onInitialVariantChosen=function(){},$w.banLocation=function(e){this.j&&this.j.i.set(e,Date.now()+6e4)},P("shaka.hls.HlsParser",Vp);var wE={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},_E={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},TE={"com.apple.streamingkeydelivery":function(t,n){if("video/mp2t"==n)throw new Ne(2,4,4040);if(e.shakaMediaKeysPolyfill)throw new Ne(2,4,4041);return Fe("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=bp(e,"METHOD"),n=["SAMPLE-AES","SAMPLE-AES-CTR"];return n.includes(t)?(t=bp(e,"URI"),t=Np(t),t=le(t.data),t=Fe("com.widevine.alpha",[{initDataType:"cenc",initData:t}]),(e=mp(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):(H("Widevine in HLS is only supported with [",n.join(", "),"], not",t),null)},"com.microsoft.playready":function(e){var t=bp(e,"METHOD"),n=["SAMPLE-AES","SAMPLE-AES-CTR"];return n.includes(t)?(e=bp(e,"URI"),e=Np(e),e=le(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Gr(e,t,new Set,0),Fe("com.microsoft.playready",[{initDataType:"cenc",initData:e}])):(H("PlayReady in HLS is only supported with [",n.join(", "),"], not",t),null)},identity:function(t,n){if("video/mp2t"==n)throw new Ne(2,4,4040);if(e.shakaMediaKeysPolyfill)throw new Ne(2,4,4041);return t=bp(t,"METHOD"),n=["SAMPLE-AES","SAMPLE-AES-CTR"],n.includes(t)?Fe("org.w3.clearkey",null):(H("Identity (ClearKey) in HLS is only supported with [",n.join(", "),"], not",t),null)}},SE="VOD",EE="EVENT",kE="LIVE",AE={Cg:SE,ui:EE,Di:kE};ET["application/x-mpegurl"]=function(){return new Vp},ET["application/vnd.apple.mpegurl"]=function(){return new Vp};var xE=1,CE=(new Map).set("com.microsoft.playready",Wg).set("com.microsoft.playready.recommendation",Wg).set("com.microsoft.playready.software",Wg).set("com.microsoft.playready.hardware",Wg),IE=!1,ME=Math.pow(2,32)-1,OE={},PE=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),jE=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),DE=new Uint8Array([0,0,0,0,0,0,0,0]),RE=new Uint8Array([0,0,0,0,0,0,0,0]),LE=new Uint8Array([0,0,0,0,0,0,0,0]),NE=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),UE=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),FE=new Uint8Array([0,0,0,0,0,0,0,0]),BE=new Uint8Array([0,0,0,0,0,0,0,1]),VE=new Uint8Array([]),HE=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),WE=new Uint8Array([]);$w=ny.prototype,$w.configure=function(e){this.g=e},$w.start=function(e,t){var n=this;return A(function(r){if(1==r.g)return n.l=[e],n.h=t,h(r,iy(n),2);if(!n.h)throw new Ne(2,7,7001);return r.return(n.j)})},$w.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.o&&(this.o.stop(),this.o=null),this.m.clear(),this.u.destroy()},$w.update=function(){var e,t=this;return A(function(n){return 1==n.g?(p(n,2),h(n,iy(t),4)):2!=n.g?y(n,0):(e=v(n),t.h&&e?(t.h.onError(e),void f(n)):n.return())})},$w.onExpirationUpdated=function(){},$w.onInitialVariantChosen=function(){},$w.banLocation=function(){},P("shaka.mss.MssParser",ny);var KE="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),qE={CAPT:"main",SUBT:"alternate",DESC:"main"};ET["application/vnd.ms-sstr+xml"]=function(){return new ny},P("shaka.net.HttpFetchPlugin",dy),dy.isSupported=gy,dy.parse=hy;var GE=e.fetch,zE=e.AbortController,XE=e.ReadableStream,YE=e.Headers;gy()&&(or("http",hy,2,!0),or("https",hy,2,!0),or("blob",hy,2,!0)),P("shaka.net.HttpXHRPlugin",yy),yy.parse=vy;var JE=e.XMLHttpRequest;or("http",vy,1,!0),or("https",vy,1,!0),or("blob",vy,1,!0),Ty.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},Ey.prototype.destroy=function(){return this.i.destroy()},My.prototype.abort=function(){var e=this;return A(function(t){if(1==t.g){try{e.i.abort()}catch(e){}return p(t,2),h(t,e.g,4)}if(2!=t.g)return y(t,0);v(t),f(t)})},My.prototype.store=function(){return this.h},My.prototype.promise=function(){return this.g},Py.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},$w=Ry.prototype,$w.destroy=function(){return this.h.destroy()},$w.hasFixedKeySpace=function(){return!0},$w.addSegments=function(){return Ny(this.i)},$w.removeSegments=function(e,t){return Uy(this,this.i,e,t)},$w.getSegments=function(e){var t,n=this;return A(function(r){return 1==r.g?h(r,Fy(n,n.i,e),2):(t=r.h,r.return(t.map(function(e){return n.Jf(e)})))})},$w.addManifests=function(){return Ny(this.g)},$w.updateManifest=function(){return Promise.reject(new Ne(2,9,9016,"Cannot modify values in "+this.g))},$w.updateManifestExpiration=function(e,t){var n=jy(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},$w.removeManifests=function(e,t){return Uy(this,this.g,e,t)},$w.getManifests=function(e){var t,n=this;return A(function(r){return 1==r.g?h(r,Fy(n,n.g,e),2):(t=r.h,r.return(Promise.all(t.map(function(e){return n.Qc(e)}))))})},$w.getAllManifests=function(){var e,t,n=this;return A(function(r){return 1==r.g?(e=Dy(n.h,n.g,"readonly"),t=new Map,h(r,Oy(e,function(e,r){var i;return A(function(o){if(1==o.g)return h(o,n.Qc(r),2);i=o.h,t.set(e,i),f(o)})}),2)):3!=r.g?h(r,e.promise(),3):r.return(t)})},$w.Jf=function(e){return e},$w.Qc=function(e){return Promise.resolve(e)},$w.add=function(e,t){var n,r,i,o,s,u,l,c=this;return A(function(d){if(1==d.g){for(n=jy(c.h,e),r=n.store(),i=[],o={},s=a(t),u=s.next();!u.done;o={qd:o.qd},u=s.next())l=u.value,o.qd=r.add(l),o.qd.onsuccess=function(e){return function(){i.push(e.qd.result)}}(o);return h(d,n.promise(),2)}return d.return(i)})},By.prototype.destroy=function(){return this.g.destroy()},By.prototype.getAll=function(){var e,t,n=this;return A(function(r){return 1==r.g?(e=Dy(n.g,"session-ids","readonly"),t=[],h(r,Oy(e,function(e,n){t.push(n)}),2)):3!=r.g?h(r,e.promise(),3):r.return(t)})},By.prototype.add=function(e){var t=jy(this.g,"session-ids"),n=t.store();e=a(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},By.prototype.remove=function(e){var t,n=this;return A(function(r){return 1==r.g?(t=jy(n.g,"session-ids"),h(r,Oy(t,function(t,n,r){e.includes(n.sessionId)&&r.delete()}),2)):h(r,t.promise(),0)})},Vy.prototype.destroy=function(){for(var e=[],t=a(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Vy.prototype.init=function(){var e=this;QE.forEach(function(t,n){(t=t())?e.g.set(n,t):K("Skipping "+n+" as it is not supported on this platform")});for(var t=[],n=a(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},P("shaka.offline.StorageMuxer",Vy),Vy.unregister=function(e){QE.delete(e)},Vy.register=Xy,Vy.prototype.destroy=Vy.prototype.destroy;var QE=new Map;u(Yy,Ry),Yy.prototype.updateManifestExpiration=function(e,t){var n,r,i,o=this;return A(function(a){return n=jy(o.h,o.g),r=n.store(),i=new qn,r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new Ne(2,9,9012,"Could not find values for "+e))},h(a,Promise.all([n.promise(),i]),0)})},Yy.prototype.Qc=function(e){var t,n,r,i,o,a;return A(function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime,o=Jy(e.periods[n],i),t.push(o);return h(s,vf(t),2)}return a=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:a,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})},Yy.prototype.Jf=function(e){return{data:e.data}},u(ev,Ry),ev.prototype.Qc=function(e){var t,n,r,i,o,s;return A(function(u){if(1==u.g){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime;for(var l=e.periods[n],c=[],d=a(l.streams),f=d.next();!f.done;f=d.next())f=f.value,0!=f.variantIds.length&&c.push(tv(f,l.startTime,l.startTime+i));o=c,t.push(o)}return h(u,vf(t),2)}return s=u.h,u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})},u(nv,Ry),$w=nv.prototype,$w.hasFixedKeySpace=function(){return!1},$w.addSegments=function(e){return this.add(this.i,e)},$w.addManifests=function(e){return this.add(this.g,e)},$w.updateManifest=function(e,t){return Ly(this,e,t)},$w.Qc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},$w=rv.prototype,$w.init=function(){var t=this,n=new qn,r=!1,i=new Tt(function(){r=!0,n.reject(new Ne(2,9,9017))});i.U(5);var o=e.indexedDB.open("shaka_offline_db",5);return o.onsuccess=function(){if(!r){var e=o.result;t.l=e;var a=e.objectStoreNames;a.contains("manifest")&&a.contains("segment")?(q("Mounting v1 idb storage cell"),a=new Yy(e,"segment","manifest")):a=null,t.g=a,a=e.objectStoreNames,a.contains("manifest-v2")&&a.contains("segment-v2")?(q("Mounting v2 idb storage cell"),a=new ev(e,"segment-v2","manifest-v2")):a=null,t.h=a,a=e.objectStoreNames,a.contains("manifest-v3")&&a.contains("segment-v3")?(q("Mounting v3 idb storage cell"),a=new ev(e,"segment-v3","manifest-v3")):a=null,t.i=a,a=e.objectStoreNames,a.contains("manifest-v5")&&a.contains("segment-v5")?(q("Mounting v5 idb storage cell"),a=new nv(e,"segment-v5","manifest-v5")):a=null,t.j=a,e.objectStoreNames.contains("session-ids")?(q("Mounting session ID idb storage cell"),e=new By(e)):e=null,t.m=e,i.stop(),n.resolve()}},o.onupgradeneeded=function(){for(var e=o.result,t=a(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},o.onerror=function(e){r||(n.reject(new Ne(2,9,9001,o.error)),i.stop(),e.preventDefault())},n},$w.destroy=function(){var e=this;return A(function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return h(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return h(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return h(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return h(t,e.j.destroy(),8);case 8:if(!e.m){t.B(10);break}return h(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),f(t)}})},$w.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},$w.getEmeSessionCell=function(){return this.m},$w.erase=function(){var e=this;return A(function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return h(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return h(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return h(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return h(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),h(t,iv(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,h(t,e.init(),0)}})},Xy("idb",function(){return Ot()||At()||!e.indexedDB?null:new rv}),ov.prototype.Wa=function(){return this.i},ov.prototype.va=function(){return this.h},ov.prototype.key=function(){return this.l},ov.prototype.toString=function(){return this.j},$w=fv.prototype,$w.configure=function(){},$w.start=function(e,t){var n,r,i,o,a,s,u,l=this;return A(function(c){switch(c.g){case 1:if(n=av(e),l.g=n,null==n||"manifest"!=n.g)throw new Ne(2,1,9004,e);return r=new Vy,g(c,2),h(c,r.init(),4);case 4:return h(c,Ky(r,n.Wa(),n.va()),5);case 5:return i=c.h,h(c,i.getManifests([n.key()]),6);case 6:return o=c.h,a=o[0],s=new sv(n.Wa(),n.va()),u=uv(s,a),t.makeTextStreamsForClosedCaptions(u),c.return(u);case 2:return m(c),h(c,r.destroy(),7);case 7:b(c,0)}})},$w.stop=function(){return Promise.resolve()},$w.update=function(){},$w.onExpirationUpdated=function(e,t){var n,r,i,o,a,s,u,l,c=this;return A(function(d){switch(d.g){case 1:return n=c.g,r=new Vy,p(d,2,3),h(d,r.init(),5);case 5:return h(d,Ky(r,n.Wa(),n.va()),6);case 6:return i=d.h,h(d,i.getManifests([n.key()]),7);case 7:if(o=d.h,a=o[0],s=a.sessionIds.includes(e),u=void 0==a.expiration||a.expiration>t,!s||!u){d.B(3);break}return q("Updating expiration for stored content"),h(d,i.updateManifestExpiration(n.key(),t),3);case 3:return m(d),h(d,r.destroy(),10);case 10:b(d,0);break;case 2:l=v(d),H("There was an error updating",n,l),d.B(3)}})},$w.onInitialVariantChosen=function(){},$w.banLocation=function(){},ET["application/x-offline-manifest"]=function(){return new fv},P("shaka.offline.OfflineScheme",pv),pv.plugin=gv,or("offline",gv),$w=xv.prototype,$w.destroy=function(){return this.l.destroy()},$w.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Ou(e,t)),Hu(this.h,e)},$w.getConfiguration=function(){var e=Vu();return Hu(e,this.h,Vu()),e},$w.Nb=function(){return this.g},$w.store=function(e,t,n){var r=this,i=this.getConfiguration(),o=new Ey(this.g);return this.j.push(o),t=Iv(this,e,t||{},function(){var t;return A(function(o){return 1==o.g?n?o.B(2):h(o,Qs(e,r.g,i.manifest.retryParameters),3):(2!=o.g&&(n=o.h),t=$i(e,n||null),o.return(t()))})},i,o),t=new Gn(t,function(){return Ay(o)}),t.finally(function(){ye(r.j,o)}),$v(this,t)},$w.remove=function(e){return Qv(this,Uv(this,e))},$w.Sh=function(){return Qv(this,Hv(this))},$w.list=function(){return Qv(this,Wv())},P("shaka.offline.Storage",xv),xv.deleteAll=function(){var e;return A(function(t){return 1==t.g?(e=new Vy,g(t,2),h(t,zy(e),2)):5!=t.g?(m(t),h(t,e.destroy(),5)):b(t,0)})},xv.prototype.list=xv.prototype.list,xv.prototype.removeEmeSessions=xv.prototype.Sh,xv.prototype.remove=xv.prototype.remove,xv.prototype.store=xv.prototype.store,xv.prototype.getNetworkingEngine=xv.prototype.Nb,xv.prototype.getConfiguration=xv.prototype.getConfiguration,xv.prototype.configure=xv.prototype.configure,xv.prototype.destroy=xv.prototype.destroy,xv.support=Cv;var $E=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");oS.offline=Cv,P("shaka.polyfill",rm),rm.register=im,rm.installAll=function(){for(var e=a(ZE),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(e){B("Error installing polyfill!",e)}}};var ZE=[];om.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Zn("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},e_.Object.defineProperties(om.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),rm.AbortController=om,om.install=am,u(sm,tr),e_.Object.defineProperties(sm.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),im(am),rm.Aria=um,um.install=lm,im(lm),rm.EncryptionScheme=dm,dm.install=hm,im(hm,-2),rm.Fullscreen=fm,fm.install=pm,im(pm),rm.MediaCapabilities=ym,ym.install=vm;var ek=null;ym.originalMcap=ek;var tk={};ym.memoizedMediaKeySystemAccessRequests_=tk;var nk={};ym.memoizedCanDisplayTypeRequests_=nk,im(vm,-1),rm.MediaSource=bm,bm.install=wm,im(wm),rm.Orientation=Am,Am.install=xm,u(Mm,tr),Mm.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Mm.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},im(xm);var rk,ik,ok,ak,sk,uk;rm.PatchedMediaKeysApple=Om,Om.uninstall=function(){rk&&(K("Un-installing Apple-prefixed EME"),rk=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",ik),HTMLMediaElement.prototype.setMediaKeys=ok,e.MediaKeys=ak,e.MediaKeySystemAccess=sk,navigator.requestMediaKeySystemAccess=uk,ik=uk=ok=sk=ak=null,e.shakaMediaKeysPolyfill=!1)},Om.install=function(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&((void 0===t?0:t)&&(rk=!0,ik=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),ok=HTMLMediaElement.prototype.setMediaKeys,ak=e.MediaKeys,sk=e.MediaKeySystemAccess,uk=navigator.requestMediaKeySystemAccess),K("Using Apple-prefixed EME"),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=jm,e.MediaKeys=Lm,e.MediaKeySystemAccess=Rm,navigator.requestMediaKeySystemAccess=Pm,e.shakaMediaKeysPolyfill=!0)},Rm.prototype.createMediaKeys=function(){q("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var e=new Lm(this.keySystem);return Promise.resolve(e)},Rm.prototype.getConfiguration=function(){return q("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration"),this.g},Lm.prototype.createSession=function(e){if(q("PatchedMediaKeysApple.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Um(this.h,e)},Lm.prototype.setServerCertificate=function(){return q("PatchedMediaKeysApple.MediaKeys.setServerCertificate"),Promise.resolve(!1)},Lm.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},u(Um,tr),$w=Um.prototype,$w.generateRequest=function(e,t){var n=this;q("PatchedMediaKeysApple.MediaKeySession.generateRequest"),this.h=new qn;try{var r=this.l.createSession("video/mp4",le(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(e){q("PatchedMediaKeysApple.onWebkitKeyMessage_",e),n.h&&(n.h.resolve(),n.h=null),e=(new Map).set("messageType",void 0==n.keyStatuses.Pb()?"license-request":"license-renewal").set("message",ue(e.message)),e=new Zn("message",e),n.dispatchEvent(e)}),this.j.D(r,"webkitkeyadded",function(e){q("PatchedMediaKeysApple.onWebkitKeyAdded_",e),n.g&&(Fm(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(e){if(q("PatchedMediaKeysApple.onWebkitKeyError_",e),e=Error("EME PatchedMediaKeysApple key error"),e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Fm(n,"output-not-allowed");break;default:Fm(n,"internal-error")}}),Fm(this,"status-pending")}catch(e){this.h.reject(e)}return this.h},$w.load=function(){return q("PatchedMediaKeysApple.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},$w.update=function(e){q("PatchedMediaKeysApple.MediaKeySession.update"),this.g=new qn;try{this.i.update(le(e))}catch(e){this.g.reject(e)}return this.g},$w.close=function(){q("PatchedMediaKeysApple.MediaKeySession.close");try{this.i.close(),this.closed.resolve(),this.j.Za()}catch(e){this.closed.reject(e)}return this.closed},$w.remove=function(){return q("PatchedMediaKeysApple.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},$w=Bm.prototype,$w.Pb=function(){return this.g},$w.forEach=function(e){this.g&&e(this.g,TT.value())},$w.get=function(e){if(this.has(e))return this.g},$w.has=function(e){var t=TT.value();return!(!this.g||!ae(e,t))},$w.entries=function(){},$w.keys=function(){},$w.values=function(){},rm.PatchedMediaKeysNop=Vm,Vm.install=Hm,qm.prototype.createSession=function(){},qm.prototype.setServerCertificate=function(){},qm.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},Gm.prototype.getConfiguration=function(){},Gm.prototype.createMediaKeys=function(){},im(Hm,-10),rm.PatchedMediaKeysWebkit=zm,zm.install=Xm,$m.prototype.createMediaKeys=function(){q("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var e=new Zm(this.g);return Promise.resolve(e)},$m.prototype.getConfiguration=function(){return q("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration"),this.h},Zm.prototype.createSession=function(e){if(q("PatchedMediaKeysWebkit.MediaKeys.createSession"),"temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new nb(t,this.l,e),this.i.push(e),e},Zm.prototype.setServerCertificate=function(){return q("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate"),Promise.resolve(!1)},Zm.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},u(nb,tr),$w=nb.prototype,$w.generateRequest=function(e,t){return q("PatchedMediaKeysWebkit.MediaKeySession.generateRequest"),rb(this,t,null)},$w.load=function(e){return q("PatchedMediaKeysWebkit.MediaKeySession.load"),"persistent-license"==this.l?rb(this,null,e):Promise.reject(Error("Not a persistent session."))},$w.update=function(e){q("PatchedMediaKeysWebkit.MediaKeySession.update",e);var t=new qn;return ib(this,t,e),t},$w.close=function(){if(q("PatchedMediaKeysWebkit.MediaKeySession.close"),"persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Ym("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},$w.remove=function(){return q("PatchedMediaKeysWebkit.MediaKeySession.remove"),"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},$w=ab.prototype,$w.Pb=function(){return this.g},$w.forEach=function(e){this.g&&e(this.g,TT.value())},$w.get=function(e){if(this.has(e))return this.g},$w.has=function(e){var t=TT.value();return!(!this.g||!ae(e,t))},$w.entries=function(){},$w.keys=function(){},$w.values=function(){};var lk="";im(Xm),rm.PiPWebkit=sb,sb.install=ub,im(ub),rm.RandomUUID=pb,pb.install=gb,im(gb),rm.Symbol=vb,vb.install=mb,im(mb),rm.VideoPlayPromise=wb,wb.install=_b,im(_b),rm.VideoPlaybackQuality=Tb,Tb.install=Sb,im(Sb),rm.VTTCue=kb,kb.install=Ab,im(Ab),Ib.prototype.parseInit=function(){},Ib.prototype.setSequenceMode=function(){},Ib.prototype.setManifestType=function(){},Ib.prototype.parseMedia=function(e,t){var n=null,r=[];e=_r(e).split(/\r?\n/),e=a(e);for(var i=e.next();!i.done;i=e.next()){var o=i.value;o&&!/^\s+$/.test(o)&&((i=ck.exec(o))?(o=dk.exec(i[1]),o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",",".")),i=new be(o,t.segmentEnd?t.segmentEnd:o+2,i[2]),n&&(n.endTime=o,r.push(n)),n=i):W("LrcTextParser encountered an unknown line.",o))}return n&&r.push(n),r},P("shaka.text.LrcTextParser",Ib),Ib.prototype.parseMedia=Ib.prototype.parseMedia,Ib.prototype.setManifestType=Ib.prototype.setManifestType,Ib.prototype.setSequenceMode=Ib.prototype.setSequenceMode,Ib.prototype.parseInit=Ib.prototype.parseInit;var ck=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,dk=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;$_["application/x-subtitle-lrc"]=function(){return new Ib},Mb.prototype.parseInit=function(){},Mb.prototype.setSequenceMode=function(){},Mb.prototype.setManifestType=function(){},Mb.prototype.parseMedia=function(e,t,n){var r=_r(e);if(e=[],""==r)return e;var i=hi(r,"tt");if(!i)throw new Ne(2,2,2005,"Failed to parse TTML.");if(!(r=i.getElementsByTagName("body")[0]))return[];var o=Zr(i,Ek,"frameRate"),s=Zr(i,Ek,"subFrameRate"),u=Zr(i,Ek,"frameRateMultiplier"),l=Zr(i,Ek,"tickRate"),c=Zr(i,Ek,"cellResolution"),d=i.getAttribute("xml:space")||"default",h=Zr(i,kk,"extent");if("default"!=d&&"preserve"!=d)throw new Ne(2,2,2005,"Invalid xml:space value: "+d);d="default"==d,o=new Wb(o,s,u,l),c=c&&(c=/^(\d+) (\d+)$/.exec(c))?{Jb:parseInt(c[1],10),rows:parseInt(c[2],10)}:null,s=(s=i.getElementsByTagName("metadata")[0])?Jr(s):[],u=Array.from(i.getElementsByTagName("style")),i=Array.from(i.getElementsByTagName("region")),l=[];for(var f=a(i),p=f.next();!p.done;p=f.next()){var g=p.value;p=new Te;var y=g.getAttribute("xml:id");if(y){p.id=y;var v=null;h&&(v=hk.exec(h)||gk.exec(h)),y=v?Number(v[1]):null,v=v?Number(v[2]):null;var m,b=Rb(g,u,"extent");if(b){var w=(m=hk.exec(b))||gk.exec(b);null!=w&&(p.width=Number(w[1]),p.height=Number(w[2]),m||(null!=y&&(p.width=100*p.width/y),null!=v&&(p.height=100*p.height/v)),p.widthUnits=m||null!=y?M_:0,p.heightUnits=m||null!=v?M_:0)}(g=Rb(g,u,"origin"))&&null!=(w=(m=hk.exec(g))||gk.exec(g))&&(p.viewportAnchorX=Number(w[1]),p.viewportAnchorY=Number(w[2]),m?b||(p.width=100-p.viewportAnchorX,p.widthUnits=M_,p.height=100-p.viewportAnchorY,p.heightUnits=M_):(null!=v&&(p.viewportAnchorY=100*p.viewportAnchorY/v),null!=y&&(p.viewportAnchorX=100*p.viewportAnchorX/y)),p.viewportAnchorUnits=m||null!=y?M_:0)}else W("TtmlTextParser parser encountered a region with no id. Region will be ignored."),p=null;p&&l.push(p)}if(Yr(r,"p").length)throw new Ne(2,2,2001,"<p> can only be inside <div> in TTML");for(h=a(Yr(r,"div")),f=h.next();!f.done;f=h.next())if(Yr(f.value,"span").length)throw new Ne(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Ob(r,t,o,s,u,i,l,d,c,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},P("shaka.text.TtmlTextParser",Mb),Mb.prototype.parseMedia=Mb.prototype.parseMedia,Mb.prototype.setManifestType=Mb.prototype.setManifestType,Mb.prototype.setSequenceMode=Mb.prototype.setSequenceMode,Mb.prototype.parseInit=Mb.prototype.parseInit;var hk=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,fk=/^(\d{1,2}(?:\.\d+)?|100)%$/,pk=/^(\d+px|\d+em|\d*\.?\d+c)$/,gk=/^(\d+)px (\d+)px$/,yk=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,vk=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,mk=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,bk=/^(\d*(?:\.\d*)?)f$/,wk=/^(\d*(?:\.\d*)?)t$/,_k=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),Tk={left:S_,center:"center",right:"end",start:S_,end:"end"},Sk={left:"line-left",center:"center",right:"line-right"},Ek=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],kk=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],Ak=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];$_["application/ttml+xml"]=function(){return new Mb},Kb.prototype.parseInit=function(e){var t=!1;if((new Ir).box("moov",Mr).box("trak",Mr).box("mdia",Mr).box("minf",Mr).box("stbl",Mr).O("stsd",Or).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new Ne(2,2,2007)},Kb.prototype.setSequenceMode=function(){},Kb.prototype.setManifestType=function(){},Kb.prototype.parseMedia=function(e,t,n){var r=this,i=!1,o=[];if((new Ir).box("mdat",Dr(function(e){i=!0,o=o.concat(r.g.parseMedia(e,t,n))})).parse(e,!1),!i)throw new Ne(2,2,2007);return o},P("shaka.text.Mp4TtmlParser",Kb),Kb.prototype.parseMedia=Kb.prototype.parseMedia,Kb.prototype.setManifestType=Kb.prototype.setManifestType,Kb.prototype.setSequenceMode=Kb.prototype.setSequenceMode,Kb.prototype.parseInit=Kb.prototype.parseInit,$_['application/mp4; codecs="stpp"']=function(){return new Kb},$_['application/mp4; codecs="stpp.ttml"']=function(){return new Kb},$_['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Kb},$_['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Kb},qb.prototype.parseInit=function(){},qb.prototype.setSequenceMode=function(e){this.h=e},qb.prototype.setManifestType=function(e){this.g=e},qb.prototype.parseMedia=function(e,t){e=_r(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Ne(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&"HLS"==this.g)if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new Ne(2,2,2e3);if(null==(e=$b(new Cp(e[1]))))throw new Ne(2,2,2e3);e=t.periodStart+Number(r[1])/9e4-e}else e=t.segmentStart;t=[],r=a(n[0].split("\n"));for(var i=r.next();!i.done;i=r.next())if(i=i.value,/^Region:/.test(i)){i=new Cp(i);var o=new Te;Op(i),Ip(i);for(var s=Op(i);s;){var u;e:{var l=o,c=s;if(u=/^id=(.*)$/.exec(c))l.id=u[1];else if(u=/^width=(\d{1,2}|100)%$/.exec(c))l.width=Number(u[1]);else if(u=/^lines=(\d+)$/.exec(c))l.height=Number(u[1]),l.heightUnits=2;else if(u=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(c))l.regionAnchorX=Number(u[1]),l.regionAnchorY=Number(u[2]);else if(u=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(c))l.viewportAnchorX=Number(u[1]),l.viewportAnchorY=Number(u[2]);else{if(!/^scroll=up$/.exec(c)){u=!1;break e}l.scroll="up"}u=!0}u||W("VTT parser encountered an invalid VTTRegion setting: ",s," The setting will be ignored."),Ip(i),s=Op(i)}t.push(o)}for(r=new Map,Gb(r),i=[],n=a(n.slice(1)),o=n.next();!o.done;o=n.next()){if(o=o.value.split("\n"),(1!=o.length||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&"STYLE"==o[0]){for(s=[],u=-1,l=1;l<o.length;l++)o[l].includes("::cue")&&(s.push([]),u=s.length-1),-1!=u&&(s[u].push(o[l]),o[l].includes("}")&&(u=-1));for(s=a(s),u=s.next();!u.done;u=s.next()){c=u.value,u="global",(l=c[0].match(/\((.*)\)/))&&(u=l.pop()),l=c.slice(1,-1),c[0].includes("}")&&(c=/\{(.*?)\}/.exec(c[0]))&&(l=c[1].split(";")),(c=r.get(u))||(c=new be(0,0,""));for(var d=!1,h=0;h<l.length;h++){var f=/^\s*([^:]+):\s*(.*)/.exec(l[h]);if(f){var p=f[2].trim().replace(";","");switch(f[1].trim()){case"background-color":case"background":d=!0,c.backgroundColor=p;break;case"color":d=!0,c.color=p;break;case"font-family":d=!0,c.fontFamily=p;break;case"font-size":d=!0,c.fontSize=p;break;case"font-weight":(700<=parseInt(p,10)||"bold"==p)&&(d=!0,c.fontWeight=700);break;case"font-style":switch(p){case"normal":d=!0,c.fontStyle=C_;break;case"italic":d=!0,c.fontStyle="italic";break;case"oblique":d=!0,c.fontStyle="oblique"}break;case"opacity":d=!0,c.opacity=parseFloat(p);break;case"text-combine-upright":d=!0,c.textCombineUpright=p;break;case"text-shadow":d=!0,c.textShadow=p;break;case"white-space":d=!0,c.wrapLine="noWrap"!=p;break;default:W("VTT parser encountered an unsupported style: ",f)}}}d&&r.set(u,c)}}if(d=e,1==o.length&&!o[0]||/^NOTE($|[ \t])/.test(o[0])||"STYLE"==o[0]||"REGION"==o[0])o=null;else if(s=null,o[0].includes("--\x3e")||(s=o[0],o.splice(0,1)),u=new Cp(o[0]),l=$b(u),h=Mp(u,/[ \t]+--\x3e[ \t]+/g),c=$b(u),null==l||null==h||null==c)B("Failed to parse VTT time code. Cue skipped:",s,o),o=null;else{for(l+=d,c+=d,o=o.slice(1).join("\n").trim(),r.has("global")?(d=r.get("global").clone(),d.startTime=l,d.endTime=c,d.payload=""):d=new be(l,c,""),Ip(u),l=Op(u);l;)Jb(d,l,t)||W("VTT parser encountered an invalid VTT setting: ",l," The setting will be ignored."),Ip(u),l=Op(u);zb(o,d,r),null!=s&&(d.id=s),o=d}o&&i.push(o)}return i},P("shaka.text.VttTextParser",qb),qb.prototype.parseMedia=qb.prototype.parseMedia,qb.prototype.setManifestType=qb.prototype.setManifestType,qb.prototype.setSequenceMode=qb.prototype.setSequenceMode,qb.prototype.parseInit=qb.prototype.parseInit;var xk=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;$_["text/vtt"]=function(){return new qb},$_['text/vtt; codecs="vtt"']=function(){return new qb},$_['text/vtt; codecs="wvtt"']=function(){return new qb},ew.prototype.parseInit=function(e){var t=this,n=!1;if((new Ir).box("moov",Mr).box("trak",Mr).box("mdia",Mr).O("mdhd",function(e){e=_o(e.reader,e.version),t.g=e.timescale}).box("minf",Mr).box("stbl",Mr).O("stsd",Or).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new Ne(2,2,2008);if(!n)throw new Ne(2,2,2008)},ew.prototype.setSequenceMode=function(){},ew.prototype.setManifestType=function(){},ew.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw H("No init segment for MP4+VTT!"),new Ne(2,2,2008);var n,r=0,i=[],o=[],s=!1,u=!1,l=!1,c=null;if((new Ir).box("moof",Mr).box("traf",Mr).O("tfdt",function(e){s=!0,r=wo(e.reader,e.version).baseMediaDecodeTime}).O("tfhd",function(e){c=bo(e.reader,e.flags).Mf}).O("trun",function(e){u=!0,i=To(e.reader,e.version,e.flags).kg}).box("mdat",Dr(function(e){l=!0,n=e})).parse(e,!1),!l&&!s&&!u)throw new Ne(2,2,2008);e=r;for(var d=new xr(n,0),h=a(i),f=h.next();!f.done;f=h.next()){f=f.value;var p=f.kf||c,g=f.Xd?r+f.Xd:e;e=g+(p||0);var y=0;do{var v=d.M();y+=v;var m=d.M();m=Lr(m);var b=null;"vttc"==m?8<v&&(b=d.rb(v-8)):("vtte"!=m&&H("Unknown box "+m+"! Skipping!"),d.skip(v-8)),p?b&&(v=tw(b,t.periodStart+g/this.g,t.periodStart+e/this.g),o.push(v)):H("WVTT sample duration unknown, and no default found!")}while(f.sampleSize&&y<f.sampleSize)}return o.filter(lt)},P("shaka.text.Mp4VttParser",ew),ew.prototype.parseMedia=ew.prototype.parseMedia,ew.prototype.setManifestType=ew.prototype.setManifestType,ew.prototype.setSequenceMode=ew.prototype.setSequenceMode,ew.prototype.parseInit=ew.prototype.parseInit,$_['application/mp4; codecs="wvtt"']=function(){return new ew},rw.prototype.parseInit=function(){},rw.prototype.setSequenceMode=function(){},rw.prototype.setManifestType=function(){},rw.prototype.parseMedia=function(e){var t=_r(e).replace(/\r+/g,"");if(t=t.trim(),e=[],""==t)return e;t=a(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var r=new Cp(n[0]),i=iw(r),o=Mp(r,/,/g);if(r=iw(r),null==i||null==o||null==r)throw new Ne(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new be(i,r,n.slice(1).join("\n").trim()))}return e},P("shaka.text.SbvTextParser",rw),rw.prototype.parseMedia=rw.prototype.parseMedia,rw.prototype.setManifestType=rw.prototype.setManifestType,rw.prototype.setSequenceMode=rw.prototype.setSequenceMode,rw.prototype.parseInit=rw.prototype.parseInit,$_["text/x-subviewer"]=function(){return new rw},ow.prototype.parseInit=function(){},ow.prototype.setSequenceMode=function(){},ow.prototype.setManifestType=function(){},ow.prototype.parseMedia=function(e,t,n){return e=_r(e),e=aw(e),e=le(Er(e)),this.g.parseMedia(e,t,n)},P("shaka.text.SrtTextParser",ow),ow.srt2webvtt=aw,ow.prototype.parseMedia=ow.prototype.parseMedia,ow.prototype.setManifestType=ow.prototype.setManifestType,ow.prototype.setSequenceMode=ow.prototype.setSequenceMode,ow.prototype.parseInit=ow.prototype.parseInit,$_["text/srt"]=function(){return new ow},sw.prototype.parseInit=function(){},sw.prototype.setSequenceMode=function(){},sw.prototype.setManifestType=function(){},sw.prototype.parseMedia=function(e){var t="",n="";e=_r(e).split(/\r?\n\s*\r?\n/),e=a(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var i=Ck.exec(r);if(i){var o=i[1];if(i=i[2],"V4 Styles"==o||"V4+ Styles"==o){t=i;continue}if("Events"==o){n=i;continue}}W("SsaTextParser parser encountered an unknown part.",r)}for(e=[],r=null,t=a(t.split(/\r?\n/)),i=t.next();!i.done;i=t.next())if(o=i.value,!/^\s*;/.test(o)&&(i=Ik.exec(o)))if(o=i[1].trim(),i=i[2].trim(),"Format"==o)r=i.split(Mk);else if("Style"==o){o=i.split(Mk),i={};for(var s=0;s<r.length&&s<o.length;s++)i[r[s]]=o[s];e.push(i)}for(r=[],t=null,o={},n=a(n.split(/\r?\n/)),i=n.next();!i.done;o={fe:o.fe},i=n.next())if(i=i.value,!/^\s*;/.test(i)&&(s=Ik.exec(i)))if(i=s[1].trim(),s=s[2].trim(),"Format"==i)t=s.split(Mk);else if("Dialogue"==i){s=s.split(Mk),i={};for(var u=0;u<t.length&&u<s.length;u++)i[t[u]]=s[u];u=cw(i.Start);var l=cw(i.End);s=new be(u,l,s.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),o.fe=i.Style,(i=e.find(function(e){return function(t){return t.Name==e.fe}}(o)))&&uw(s,i),r.push(s)}return r},P("shaka.text.SsaTextParser",sw),sw.prototype.parseMedia=sw.prototype.parseMedia,sw.prototype.setManifestType=sw.prototype.setManifestType,sw.prototype.setSequenceMode=sw.prototype.setSequenceMode,sw.prototype.parseInit=sw.prototype.parseInit;var Ck=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Ik=/^\s*([^:]+):\s*(.*)/,Mk=/\s*,\s*/,Ok=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;$_["text/x-ssa"]=function(){return new sw},$w=gw.prototype,$w.destroy=function(){this.g.clear()},$w.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]&&te(this.convertCodecs("audio",e))},$w.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(Qe(t)||"mp4a.40.2")+'"':t},$w.getOriginalMimeType=function(){return this.i},$w.transmux=function(e,t,n,r){for(var i=le(e),o=mo(i),a=o.length;a<i.length&&!fw(i,a);a++);if(e=1e3*n.endTime,o=vo(o),o.length&&n&&(n=o.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(e=n.data),!(n=hw(i,a)))return Promise.reject(new Ne(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,o=[];a<i.length;){var s=dw(i,a);if(!s)return Promise.reject(new Ne(2,3,3018));var u=s.Id+s.S;a+u<=i.length&&o.push({data:i.subarray(a+s.Id,a+u),size:s.S,duration:1024,Ta:0,flags:{Ua:0,La:0,Ka:0,Ia:0,Ja:2,Va:0}}),a+=u}return i=n.sampleRate,e=Math.floor(e*i/1e3),r={id:t.id,type:"audio",codecs:n.ka,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:i,duration:r,Ra:[],da:new Uint8Array([]),ma:new Uint8Array([]),ra:0,ua:0,data:{hb:this.h,baseMediaDecodeTime:e,Na:o},stream:t},e=new qg([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Gg(e),this.g.set(t.id,r)),t=Qg(e),this.h++,t=Kr(r,t),Promise.resolve(t)},P("shaka.transmuxer.AacTransmuxer",gw),gw.prototype.transmux=gw.prototype.transmux,gw.prototype.getOriginalMimeType=gw.prototype.getOriginalMimeType,gw.prototype.convertCodecs=gw.prototype.convertCodecs,gw.prototype.isSupported=gw.prototype.isSupported,gw.prototype.destroy=gw.prototype.destroy,Ee("audio/aac",function(){return new gw("audio/aac")},j_),$w=mw.prototype,$w.destroy=function(){this.g.clear()},$w.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]&&te(this.convertCodecs("audio",e))},$w.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':t},$w.getOriginalMimeType=function(){return this.i},$w.transmux=function(e,t,n,r){e=le(e);for(var i=mo(e),o=i.length;o<e.length&&!vw(e,o);o++);var a=1e3*n.endTime;i=vo(i),i.length&&n&&(n=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(a=n.data),n=0,i=new Uint8Array([]);for(var s=[];o<e.length;){var u=yw(e,o);if(!u)return Promise.reject(new Ne(2,3,3018));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,n=u.sampleRate,i=u.da,s.push({data:e.subarray(o,o+u.S),size:u.S,duration:1536,Ta:0,flags:{Ua:0,La:0,Ka:0,Ia:0,Ja:2,Va:0}}),o+=u.S}return e=Math.floor(a*n/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Ra:[],da:i,ma:new Uint8Array([]),ra:0,ua:0,data:{hb:this.h,baseMediaDecodeTime:e,Na:s},stream:t},e=new qg([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Gg(e),this.g.set(t.id,r)),t=Qg(e),this.h++,t=Kr(r,t),Promise.resolve(t)},P("shaka.transmuxer.Ac3Transmuxer",mw),mw.prototype.transmux=mw.prototype.transmux,mw.prototype.getOriginalMimeType=mw.prototype.getOriginalMimeType,mw.prototype.convertCodecs=mw.prototype.convertCodecs,mw.prototype.isSupported=mw.prototype.isSupported,mw.prototype.destroy=mw.prototype.destroy,Ee("audio/ac3",function(){return new mw("audio/ac3")},j_),$w=ww.prototype,$w.destroy=function(){this.g.clear()},$w.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]&&te(this.convertCodecs("audio",e))},$w.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t},$w.getOriginalMimeType=function(){return this.i},$w.transmux=function(e,t,n,r){e=le(e);for(var i=mo(e),o=i.length;o<e.length&&2935!=(e[o]<<8|e[o+1]<<0);o++);var a=1e3*n.endTime;i=vo(i),i.length&&n&&(n=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(a=n.data),n=0,i=new Uint8Array([]);for(var s=[];o<e.length;){var u=bw(e,o);if(!u)return Promise.reject(new Ne(2,3,3018));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,n=u.sampleRate,i=u.da,s.push({data:e.subarray(o,o+u.S),size:u.S,duration:1536,Ta:0,flags:{Ua:0,La:0,Ka:0,Ia:0,Ja:2,Va:0}}),o+=u.S}return e=Math.floor(a*n/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Ra:[],da:i,ma:new Uint8Array([]),ra:0,ua:0,data:{hb:this.h,baseMediaDecodeTime:e,Na:s},stream:t},e=new qg([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Gg(e),this.g.set(t.id,r)),t=Qg(e),this.h++,t=Kr(r,t),Promise.resolve(t)},P("shaka.transmuxer.Ec3Transmuxer",ww),ww.prototype.transmux=ww.prototype.transmux,ww.prototype.getOriginalMimeType=ww.prototype.getOriginalMimeType,ww.prototype.convertCodecs=ww.prototype.convertCodecs,ww.prototype.isSupported=ww.prototype.isSupported,ww.prototype.destroy=ww.prototype.destroy,Ee("audio/ec3",function(){return new ww("audio/ec3")},j_);var Pk=[100,110,122,244,44,83,86,118,128,138,139,134],jk=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Dk=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Rk=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Lk=[0,1,1,4];$w=Ow.prototype,$w.destroy=function(){this.g.clear()},$w.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]&&te(this.convertCodecs("audio",e))},$w.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t},$w.getOriginalMimeType=function(){return this.i},$w.transmux=function(e,t,n,r){n=le(e);for(var i=mo(n).length;i<n.length&&!Mw(n,i);i++);var o;for(e=[];i<n.length;){var a=Cw(n,i);if(!a)return Promise.reject(new Ne(2,3,3018));o||(o=a),i+a.S<=n.length&&e.push({data:n.subarray(i,i+a.S),size:a.S,duration:1152,Ta:0,flags:{Ua:0,La:0,Ka:0,Ia:0,Ja:2,Va:0}}),i+=a.S}return o?(n=9e4*o.Wh/o.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:o.sampleRate,duration:r,Ra:[],da:new Uint8Array([]),ma:new Uint8Array([]),ra:0,ua:0,data:{hb:this.h,baseMediaDecodeTime:n,Na:e},stream:t},o=new qg([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Gg(o),this.g.set(t.id,r)),t=Qg(o),this.h++,t=Kr(r,t),Promise.resolve(t)):Promise.reject(new Ne(2,3,3018))},P("shaka.transmuxer.Mp3Transmuxer",Ow),Ow.prototype.transmux=Ow.prototype.transmux,Ow.prototype.getOriginalMimeType=Ow.prototype.getOriginalMimeType,Ow.prototype.convertCodecs=Ow.prototype.convertCodecs,Ow.prototype.isSupported=Ow.prototype.isSupported,Ow.prototype.destroy=Ow.prototype.destroy,Ee("audio/mpeg",function(){return new Ow("audio/mpeg")},j_),$w=Pw.prototype,$w.destroy=function(){},$w.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=Qe(e).split(","),n=Ve("audio",t);return t=Ve("video",t),!(!n||t||"mp3"!=Xe(n))&&te(this.convertCodecs("audio",e))},$w.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t},$w.getOriginalMimeType=function(){return this.h},$w.transmux=function(e,t,n,r,i){if(this.g?this.g.clearData():this.g=new Fo,e=le(e),e=this.g.parse(e),"mp3"!=e.Tc().audio||"audio"!=i)return Promise.reject(new Ne(2,3,3018));for(i=new Uint8Array([]),e=a(e.Lb()),t=e.next();!t.done;t=e.next())if(t=t.value.data)for(n=0;n<t.length;)(r=Cw(t,n))?(n+r.S<=t.length&&(i=Kr(i,t.subarray(n,n+r.S))),n+=r.S):n++;return Promise.resolve(i)},P("shaka.transmuxer.MpegTsTransmuxer",Pw),Pw.prototype.transmux=Pw.prototype.transmux,Pw.prototype.getOriginalMimeType=Pw.prototype.getOriginalMimeType,Pw.prototype.convertCodecs=Pw.prototype.convertCodecs,Pw.prototype.isSupported=Pw.prototype.isSupported,Pw.prototype.destroy=Pw.prototype.destroy,Ee("video/mp2t",function(){return new Pw("video/mp2t")},D_),$w=jw.prototype,$w.destroy=function(){},$w.isSupported=function(e,t){var n=e.startsWith("mss/");return!(!this.g||!n)&&(t?te(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),te(t)||te(e)))},$w.convertCodecs=function(e,t){return t.replace("mss/","")},$w.getOriginalMimeType=function(){return this.h},$w.transmux=function(e,t,n){if(!n)return Promise.resolve(le(e));if(!t.mssPrivateData)return Promise.reject(new Ne(2,3,3020));try{var r,i=this.g.parseBuffer(e),o=i.fetch("tfhd");o.track_ID=t.id+1;var a=i.fetch("tfdt"),s=i.fetch("traf");null===a&&(a=this.g.createFullBox("tfdt",s,o),a.version=1,a.flags=0,a.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var u=i.fetch("trun"),l=i.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=i.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var d=i.fetch("sepiff");if(null!==d){d.type="senc",d.usertype=void 0;var h=i.fetch("saio");if(null===h){h=this.g.createFullBox("saio",s),h.version=0,h.flags=0,h.entry_count=1,h.offset=[0];var f=this.g.createFullBox("saiz",s);if(f.version=0,f.flags=0,f.sample_count=d.sample_count,f.default_sample_info_size=0,f.sample_info_size=[],2&d.flags)for(r=0;r<d.sample_count;r+=1)f.sample_info_size[r]=10+6*d.entry[r].NumberOfEntries;else f.default_sample_info_size=8}}o.flags&=16777214,o.flags|=131072,u.flags|=1;var p=i.fetch("moof");u.data_offset=p.getLength()+8;var g=i.fetch("saio");null!==g&&(g.offset[0]=Rw(p,"traf")+Rw(s,"senc")+16);var y=le(i.write());return Promise.resolve(y)}catch(e){return e instanceof Ne?Promise.reject(e):Promise.reject(new Ne(2,3,3022))}},P("shaka.transmuxer.MssTransmuxer",jw),jw.prototype.transmux=jw.prototype.transmux,jw.prototype.getOriginalMimeType=jw.prototype.getOriginalMimeType,jw.prototype.convertCodecs=jw.prototype.convertCodecs,jw.prototype.isSupported=jw.prototype.isSupported,jw.prototype.destroy=jw.prototype.destroy;var Nk=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ee("mss/audio/mp4",function(){return new jw("mss/audio/mp4")},j_),Ee("mss/video/mp4",function(){return new jw("mss/video/mp4")},j_),$w=Lw.prototype,$w.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},$w.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Qe(n).split(",");return n=Ve("audio",r),r=Ve("video",r),!(n&&(n=Xe(n),!Uk.includes(n))||r&&(n=Xe(r),!Fk.includes(n)))&&(t?te(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),te(t)||te(e)))},$w.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=Qe(t).replace("mp4a.40.34","mp3").split(",").map(this.Vg).join(","),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},$w.Vg=function(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}return e},$w.getOriginalMimeType=function(){return this.l},$w.transmux=function(e,t,n,r,i){var o=le(e);if("audio"==i&&!Ko(o)){for(var u=mo(o),l=u.length;l<o.length;l++)if(Mw(o,l))return Promise.reject(new Ne(2,3,3018));for(l=u.length;l<o.length;l++)if(fw(o,l))return this.h||(this.h=new gw("audio/aac")),this.h.transmux(e,t,n,r,i);return Promise.reject(new Ne(2,3,3018))}this.j?this.j.clearData():this.j=new Fo,u=this.j.parse(o),e=[];var c=u.Tc();try{if(o=null,"video"==i){switch(c.video){case"avc":var d=[],h=null,f=[],p=u.lc();if(!p.length)throw new Ne(2,3,3023);for(var g=0;g<p.length;g++){var y=p[g],v=y.nalus;f.push.apply(f,s(v));var m=Tw(v);if(m){null==h&&(h=y.dts);var b=void 0;b=g+1<p.length?(p[g+1].dts||0)-(y.dts||0):1<p.length?(y.dts||0)-(p[g-1].dts||0):9e4*(n.endTime-n.startTime),d.push({data:m.data,size:m.data.byteLength,duration:b,Ta:Math.round((y.pts||0)-(y.dts||0)),flags:{Ua:0,La:0,Ka:0,Ia:0,Ja:m.$c?2:1,Va:m.$c?0:1}})}}var w=_w(f);if(!w||null==h)throw new Ne(2,3,3018);t.height=w.height,t.width=w.width,o={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Ra:[],da:new Uint8Array([]),ma:w.ma,ra:w.ra,ua:w.ua,data:{hb:this.g,baseMediaDecodeTime:h,Na:d},stream:t};break;case"hvc":if(p=[],y=null,v=[],d=u.lc(),!d.length)throw new Ne(2,3,3023);for(m=0;m<d.length;m++){h=d[m],f=h.nalus,v.push.apply(v,s(f)),w=!1;var _=[],T=!1;for(g=a(f),b=g.next();!b.done;b=g.next()){var S=b.value;switch(S.type){case 1:case 0:var E=T=!0;break;case 19:case 20:case 21:w=E=T=!0;break;case 32:case 33:case 34:E=!0;break;case 35:T=E=!0;break;case 39:case 40:E=!0;break;default:E=!1}if(T&&E){var k=S.fullData.byteLength,A=new Uint8Array(4);A[0]=k>>24&255,A[1]=k>>16&255,A[2]=k>>8&255,A[3]=255&k,_.push(A),_.push(S.fullData)}}var x=_.length?{data:Kr.apply(Ur,s(_)),$c:w}:null;x&&(null==y&&null!=h.dts&&(y=h.dts),w=void 0,w=m+1<d.length?(d[m+1].dts||0)-(h.dts||0):1<d.length?(h.dts||0)-(d[m-1].dts||0):9e4*(n.endTime-n.startTime),p.push({data:x.data,size:x.data.byteLength,duration:w,Ta:Math.round((h.pts||0)-(h.dts||0)),flags:{Ua:0,La:0,Ka:0,Ia:0,Ja:x.$c?2:1,Va:x.$c?0:1}}))}var C=Sw(v);if(!C||null==y)throw new Ne(2,3,3018);t.height=C.height,t.width=C.width,o={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Ra:[],da:new Uint8Array([]),ma:C.ma,ra:C.ra,ua:C.ua,data:{hb:this.g,baseMediaDecodeTime:y,Na:p},stream:t}}o&&(e.push(o),o=null)}if("audio"==i){switch(c.audio){case"aac":for(var I=[],M=null,O=a(u.Lb()),P=O.next();!P.done;P=O.next()){var j=P.value,D=j.data;if(D){var R=0;if(!(l=hw(D,R)))throw new Ne(2,3,3018);for(t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,null==M&&null!==j.pts&&(M=j.pts);R<D.length;){var L=dw(D,R);if(L){var N=L.Id+L.S;R+N<=D.length&&I.push({data:D.subarray(R+L.Id,R+N),size:L.S,duration:1024,Ta:0,flags:{Ua:0,La:0,Ka:0,Ia:0,Ja:2,Va:0}}),R+=N}else R++}}}if(!l||null==M){if(!u.lc().length)throw new Ne(2,3,3018);M=9e4*n.startTime;var U=Ve("audio",t.codecs.split(","));if(!U||!t.channelsCount||!t.audioSamplingRate)throw new Ne(2,3,3018);l={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,ka:U};var F=pw(U,t.channelsCount);if(!F)throw new Ne(2,3,3018);var B=M+9e4*(n.endTime-n.startTime);for(u=M;u<B;)I.push({data:F,size:F.byteLength,duration:1024,Ta:0,flags:{Ua:0,La:0,Ka:0,Ia:0,Ja:2,Va:0}}),u+=1024/l.sampleRate*9e4}var V=l.sampleRate;u=M/9e4*V,o={id:t.id,type:"audio",codecs:l.ka,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:V,duration:r,Ra:[],da:new Uint8Array([]),ma:new Uint8Array([]),ra:0,ua:0,data:{hb:this.g,baseMediaDecodeTime:u,Na:I},stream:t};break;case"ac3":n=[],l=0,I=new Uint8Array([]),V=null,R=a(u.Lb());for(var H=R.next();!H.done;H=R.next()){var W=H.value,K=W.data;for(null==V&&null!==W.pts&&(V=W.pts),u=0;u<K.length;){var q=yw(K,u);q?(t.audioSamplingRate=q.sampleRate,t.channelsCount=q.channelCount,l=q.sampleRate,I=q.da,n.push({data:K.subarray(u,u+q.S),size:q.S,duration:1536,Ta:0,flags:{Ua:0,La:0,Ka:0,Ia:0,Ja:2,Va:0}}),u+=q.S):u++}}if(0==l||0==I.byteLength||null==V)throw new Ne(2,3,3018);u=V/9e4*l,o={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:l,duration:r,Ra:[],da:I,ma:new Uint8Array([]),ra:0,ua:0,data:{hb:this.g,baseMediaDecodeTime:u,Na:n},stream:t};break;case"ec3":n=[],l=0,M=new Uint8Array([]),V=null;for(var G=a(u.Lb()),z=G.next();!z.done;z=G.next()){var X=z.value,Y=X.data;for(null==V&&null!==X.pts&&(V=X.pts),u=0;u<Y.length;){var J=bw(Y,u);J?(t.audioSamplingRate=J.sampleRate,t.channelsCount=J.channelCount,l=J.sampleRate,M=J.da,n.push({data:Y.subarray(u,u+J.S),size:J.S,duration:1536,Ta:0,flags:{Ua:0,La:0,Ka:0,Ia:0,Ja:2,Va:0}}),u+=J.S):u++}}if(0==l||0==M.byteLength||null==V)throw new Ne(2,3,3018);u=V/9e4*l,o={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:l,duration:r,Ra:[],da:M,ma:new Uint8Array([]),ra:0,ua:0,data:{hb:this.g,baseMediaDecodeTime:u,Na:n},stream:t};break;case"mp3":n=[];var Q;l=null;for(var $=a(u.Lb()),Z=$.next();!Z.done;Z=$.next()){var ee=Z.value,te=ee.data;if(te)for(null==l&&null!==ee.pts&&(l=ee.pts),u=0;u<te.length;){var ne=Cw(te,u);ne?(Q||(Q=ne),u+ne.S<=te.length&&n.push({data:te.subarray(u,u+ne.S),size:ne.S,duration:1152,Ta:0,flags:{Ua:0,La:0,Ka:0,Ia:0,Ja:2,Va:0}}),u+=ne.S):u++}}if(!Q||null==l)throw new Ne(2,3,3018);var re=Q.sampleRate;u=l/9e4*re,o={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:re,duration:r,Ra:[],da:new Uint8Array([]),ma:new Uint8Array([]),ra:0,ua:0,data:{hb:this.g,baseMediaDecodeTime:u,Na:n},stream:t}}o&&e.push(o)}}catch(e){return e&&3023==e.code?Promise.resolve(new Uint8Array([])):Promise.reject(e)}return e.length?(e=new qg(e),this.i.has(t.id)?r=this.i.get(t.id):(r=Gg(e),this.i.set(t.id,r)),t=Qg(e),this.g++,t=Kr(r,t),Promise.resolve(t)):Promise.reject(new Ne(2,3,3018))},P("shaka.transmuxer.TsTransmuxer",Lw),Lw.prototype.transmux=Lw.prototype.transmux,Lw.prototype.getOriginalMimeType=Lw.prototype.getOriginalMimeType,Lw.prototype.convertCodecs=Lw.prototype.convertCodecs,Lw.prototype.isSupported=Lw.prototype.isSupported,Lw.prototype.destroy=Lw.prototype.destroy;var Uk=["aac","ac-3","ec-3","mp3"],Fk=["avc","hevc"];Ee("video/mp2t",function(){return new Lw("video/mp2t")},R_);var Bk;P("EmeEncryptionSchemePolyfill",Nw),Nw.install=Uw;var Vk;P("McEncryptionSchemePolyfill",Hw),Hw.install=Ww,zw.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=a(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=a(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},zw.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},P("EncryptionSchemePolyfills",Jw),Jw.install=Qw,void 0!==n&&n.exports&&(n.exports=Jw)}).call(r,n,n,void 0);for(var i in r.shaka)t[i]=r.shaka[i]}()}).call(t,n(18))},function(e,t,n){"use strict";"function"==typeof Symbol&&Symbol.iterator;!function(){var e=function(e,t){return function(n){return window.getComputedStyle?window.getComputedStyle(e,t)[n]:e.currentStyle[n]}},t=function t(n){return"HTML"!==n.nodeName&&"static"===e(n)("position")?t(n.offsetParent):n},n=function(){return window.pageXOffset?{x:window.pageXOffset,y:window.pageYOffset}:{x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}},r=function(e){if(-1!==navigator.userAgent.toLowerCase().indexOf("android")){var t=e.controlBar.progressControl,n=function(){t.addClass("fake-active")},r=function(){t.removeClass("fake-active")};t.on("touchstart",n),t.on("touchend",r),t.on("touchcancel",r)}},i=function(e,t){var n=document.createElement("base");n.href=e;var r=document.getElementsByTagName("head")[0];r.insertBefore(n,r.firstChild);var i=document.createElement("a");i.href=t;var o=i.href;return r.removeChild(n),o},o=function(e,t){for(var n={},r=e.cues,o=0;o<r.length;o++){var a=r[o],s=n[a.startTime]={src:i(t,a.text.split("#")[0])},u=a.text.split("#")[1];if(u&&"xywh="===u.substring(0,5)){var l=u.substring(5).split(",");s.width=l[2],s.height=l[3],s.style={left:"-"+l[0]+"px",top:"-"+l[1]+"px"}}}return n},a=function(){return window.navigator.userAgent.toLowerCase().includes("smart")},s=function(){return!a()&&-1!==window.navigator.userAgent.indexOf("Safari")&&-1===window.navigator.userAgent.indexOf("Chrome")},u=function(){return s()?"chapters":"metadata"},l=function(e,i){if(e._thumbs)return void(e._thumbs.settings=i);e._thumbs={settings:i},r(e);var o=e.el_.querySelector(".vjs-thumbnail-holder"),a=e.el_.querySelector(".vjs-thumbnail"),s=e.controlBar.progressControl,u=s.seekBar,l=s.el();o||(o=document.createElement("div"),o.className="vjs-thumbnail-holder",a=document.createElement("div"),o.appendChild(a),a.className="vjs-thumbnail",l.firstChild?l.insertBefore(o,l.firstChild):l.appendChild(o));var c=e.duration();e.on("durationchange",function(t){c=e.duration()}),e.on("loadedmetadata",function(t){c=e.duration()});var d=function(r){var i=window.getComputedStyle(o),l=parseInt(i.getPropertyValue("--thumbnails-height"),10);if(isNaN(l)&&(l=0),r.target!==o&&r.target!==a){var d=n().x,h=t(s.el()).getBoundingClientRect(),f=(h.width||h.right)+d,p=r.pageX;r.changedTouches&&(p=r.changedTouches[0].pageX);var g=p||r.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;g-=t(s.el()).getBoundingClientRect().left+d;var y=Math.floor(u.calculateDistance(r)*c),v=0,m=e._thumbs.settings;for(var b in m)y>b&&(v=Math.max(v,b));var w=m[v];if(w){var _=/^https?:\/\//i;w.src&&a.style.background.replace(_,"//")!=w.src.replace(_,"//")&&(a.style.background="url("+w.src+") no-repeat");var T=e.currentDimensions(),S=T.width/1920,E=parseFloat(w.width||m[0].width),k=parseFloat(w.height||m[0].height);a.style.width=E+"px",a.style.height=k+"px",w.style&&(a.style.backgroundPosition=w.style.left+" "+w.style.top),a.style.transform="scale("+S+","+S+")";var A=E*S,x=k*S,C=A/2;g+C>f?g=f-A:g<C?g=0:g-=C,o.style.width=A+"px",o.style.height=x+"px",o.style.left=g+"px",o.style.top="-"+(x+l)+"px",o.style.display="block"}}};s.on("mousemove",d),s.on("touchmove",d);var h=function(e){o.style.display="none"};s.on("touchcancel",h),s.on("touchend",h),e.on("userinactive",h)},c=function(e){l(e,{vtt:""});var t=e.$(".vjs-thumbnail-holder");t&&t.style&&(t.style.display="none");var n=e.remoteTextTracks().tracks_.find(function(e){return e.kind===u()&&"thumbnails"===e.id&&e.label===h.toString()});n&&e.removeRemoteTextTrack(n)},d=!1,h=0;videojs.registerPlugin("thumbnails",function(e){var t=this;if(!e)return void c(t);var n=u();if(d||(t.textTracks().on("removetrack",function(e){e.track.kind===n&&"thumbnails"===e.track.id&&e.track.label===h.toString()&&c(t)}),d=!0),!e.vtt)return void l(t,e);c(t),h++;var r=t.addRemoteTextTrack({id:"thumbnails",kind:n,label:h.toString(),src:e.vtt},!1);e.vtt&&r.addEventListener("load",function n(){r.removeEventListener("load",n);var i=t.textTracks().getTrackById("thumbnails");l(t,o(i,e.vtt))})})}()},function(e,t){window.webOS=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"deviceInfo",function(){return k}),n.d(t,"fetchAppId",function(){return u}),n.d(t,"fetchAppInfo",function(){return c}),n.d(t,"fetchAppRootPath",function(){return d}),n.d(t,"keyboard",function(){return A}),n.d(t,"libVersion",function(){return C}),n.d(t,"platformBack",function(){return h}),n.d(t,"platform",function(){return S}),n.d(t,"service",function(){return g}),n.d(t,"systemInfo",function(){return x});var u=function(){return window.PalmSystem&&window.PalmSystem.identifier?window.PalmSystem.identifier.split(" ")[0]:""},l={},c=function(e,t){if(0===Object.keys(l).length){var n=function(t,n){if(!t&&n)try{l=JSON.parse(n),e&&e(l)}catch(t){console.error("Unable to parse appinfo.json file for",u()),e&&e()}else e&&e()},r=new window.XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300||0===r.status?n(null,r.responseText):n({status:404}))};try{r.open("GET",t||"appinfo.json",!0),r.send(null)}catch(e){n({status:404})}}else e&&e(l)},d=function(){var e=window.location.href;if("baseURI"in window.document)e=window.document.baseURI;else{var t=window.document.getElementsByTagName("base");t.length>0&&(e=t[0].href)}var n=e.match(new RegExp(".*://[^#]*/"));return n?n[0]:""},h=function(){if(window.PalmSystem&&window.PalmSystem.platformBack)return window.PalmSystem.platformBack()},f={},p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bridge=null,this.cancelled=!1,this.subscribe=!1}var t,n;return t=e,(n=[{key:"send",value:function(e){var t=e.service,n=void 0===t?"":t,r=e.method,o=void 0===r?"":r,a=e.parameters,s=void 0===a?{}:a,u=e.onSuccess,l=void 0===u?function(){}:u,c=e.onFailure,d=void 0===c?function(){}:c,h=e.onComplete,p=void 0===h?function(){}:h,g=e.subscribe,y=void 0!==g&&g;if(!window.PalmServiceBridge){var v={errorCode:-1,errorText:"PalmServiceBridge is not found.",returnValue:!1};return d(v),p(v),console.error("PalmServiceBridge is not found."),this}this.ts&&f[this.ts]&&delete f[this.ts];var m,b=i({},s);return this.subscribe=y,this.subscribe&&(b.subscribe=this.subscribe),b.subscribe&&(this.subscribe=b.subscribe),this.ts=Date.now(),f[this.ts]=this,this.bridge=new PalmServiceBridge,this.bridge.onservicecallback=this.callback.bind(this,l,d,p),this.bridge.call(("/"!==(m=n).slice(-1)&&(m+="/"),m+o),JSON.stringify(b)),this}},{key:"callback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!this.cancelled){var i={};try{i=JSON.parse(r)}catch(e){i={errorCode:-1,errorText:r,returnValue:!1}}var o=i,a=o.errorCode,s=o.returnValue;a||!1===s?(i.returnValue=!1,t(i)):(i.returnValue=!0,e(i)),n(i),this.subscribe||this.cancel()}}},{key:"cancel",value:function(){this.cancelled=!0,null!==this.bridge&&(this.bridge.cancel(),this.bridge=null),this.ts&&f[this.ts]&&delete f[this.ts]}}])&&a(t.prototype,n),e}(),g={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i({service:e},t);return(new p).send(n)}},y={};if("object"===("undefined"==typeof window?"undefined":s(window))&&window.PalmSystem){if(window.navigator.userAgent.indexOf("SmartWatch")>-1)y.watch=!0;else if(window.navigator.userAgent.indexOf("SmartTV")>-1||window.navigator.userAgent.indexOf("Large Screen")>-1)y.tv=!0;else{try{var v=JSON.parse(window.PalmSystem.deviceInfo||"{}");if(v.platformVersionMajor&&v.platformVersionMinor){var m=Number(v.platformVersionMajor),b=Number(v.platformVersionMinor);m<3||3===m&&b<=0?y.legacy=!0:y.open=!0}}catch(e){y.open=!0}window.Mojo=window.Mojo||{relaunch:function(){}},window.PalmSystem.stageReady&&window.PalmSystem.stageReady()}if(window.navigator.userAgent.indexOf("Chr0me")>-1||window.navigator.userAgent.indexOf("Chrome")>-1){var w=window.navigator.userAgent.indexOf("Chr0me")>-1?window.navigator.userAgent.indexOf("Chr0me"):window.navigator.userAgent.indexOf("Chrome"),_=window.navigator.userAgent.slice(w).indexOf(" "),T=window.navigator.userAgent.slice(w+7,w+_).split(".");y.chrome=Number(T[0])}else y.chrome=0}else y.unknown=!0;var S=y,E={},k=function(e){if(0===Object.keys(E).length){try{var t=JSON.parse(window.PalmSystem.deviceInfo);E.modelName=t.modelName,E.version=t.platformVersion,E.versionMajor=t.platformVersionMajor,E.versionMinor=t.platformVersionMinor,E.versionDot=t.platformVersionDot,E.sdkVersion=t.platformVersion,E.screenWidth=t.screenWidth,E.screenHeight=t.screenHeight}catch(e){E.modelName="webOS Device"}E.screenHeight=E.screenHeight||window.screen.height,E.screenWidth=E.screenWidth||window.screen.width,S.tv&&(S.chrome>=68?(new p).send({service:"luna://com.webos.service.config",method:"getConfigs",parameters:{configNames:["tv.model.modelname","tv.nyx.platformVersion","tv.nyx.firmwareVersion","tv.hw.panelResolution","tv.hw.displayType","tv.hw.ddrSize","tv.model.supportHDR","tv.config.supportDolbyHDRContents","tv.config.supportDolbyTVATMOS"]},onSuccess:function(t){if(E.modelName=t.configs["tv.model.modelname"]||E.modelName,E.sdkVersion=t.configs["tv.nyx.platformVersion"]||E.sdkVersion,E.uhd="UD"===t.configs["tv.hw.panelResolution"]||"8K"===t.configs["tv.hw.panelResolution"],E.uhd8K="8K"===t.configs["tv.hw.panelResolution"],E.oled="OLED"===t.configs["tv.hw.displayType"],E.ddrSize=t.configs["tv.hw.ddrSize"],E.hdr10=!0===t.configs["tv.model.supportHDR"],E.dolbyVision=!0===t.configs["tv.config.supportDolbyHDRContents"],E.dolbyAtmos=!0===t.configs["tv.config.supportDolbyTVATMOS"],t.configs["tv.nyx.firmwareVersion"]&&"0.0.0"!==t.configs["tv.nyx.firmwareVersion"]||(t.configs["tv.nyx.firmwareVersion"]=t.configs["tv.nyx.platformVersion"]),t.configs["tv.nyx.firmwareVersion"]){E.version=t.configs["tv.nyx.firmwareVersion"];for(var n=E.version.split("."),r=["versionMajor","versionMinor","versionDot"],i=0;i<r.length;i+=1)try{E[r[i]]=parseInt(n[i],10)}catch(e){E[r[i]]=n[i]}}e(E)},onFailure:function(){e(E)}}):(new p).send({service:"luna://com.webos.service.tv.systemproperty",method:"getSystemInfo",parameters:{keys:["firmwareVersion","modelName","sdkVersion","UHD","OLED","ddrSize"]},onSuccess:function(t){if(E.modelName=t.modelName||E.modelName,E.sdkVersion=t.sdkVersion||E.sdkVersion,E.uhd=t.UHD?"true"===t.UHD:void 0,E.oled=t.OLED?"true"===t.OLED:void 0,E.ddrSize=t.ddrSize,t.firmwareVersion&&"0.0.0"!==t.firmwareVersion||(t.firmwareVersion=t.sdkVersion),t.firmwareVersion){E.version=t.firmwareVersion;for(var n=E.version.split("."),r=["versionMajor","versionMinor","versionDot"],i=0;i<r.length;i+=1)try{E[r[i]]=parseInt(n[i],10)}catch(e){E[r[i]]=n[i]}}(new p).send({service:"luna://com.webos.service.config",method:"getConfigs",parameters:{configNames:["tv.model.supportTemp8K","tv.model.supportHDR","tv.config.supportDolbyHDRContents","tv.config.supportDolbyTVATMOS"]},onSuccess:function(t){t.configs&&(E.uhd8K=!0===t.configs["tv.model.supportTemp8K"],E.hdr10=!0===t.configs["tv.model.supportHDR"],E.dolbyVision=!0===t.configs["tv.config.supportDolbyHDRContents"],E.dolbyAtmos=!0===t.configs["tv.config.supportDolbyTVATMOS"]),e(E)},onFailure:function(){E.uhd8K=!1,E.hdr10=!1,E.dolbyVision=!1,E.dolbyAtmos=!1,e(E)}})},onFailure:function(t){if(E.modelName=t.modelName||E.modelName,E.sdkVersion=t.sdkVersion||E.sdkVersion,t.firmwareVersion&&"0.0.0"!==t.firmwareVersion||(t.firmwareVersion=t.sdkVersion),t.firmwareVersion){E.version=t.firmwareVersion;for(var n=E.version.split("."),r=["versionMajor","versionMinor","versionDot"],i=0;i<r.length;i+=1)try{E[r[i]]=parseInt(n[i],10)}catch(e){E[r[i]]=n[i]}}E.uhd=t.UHD?"true"===t.UHD:void 0,E.uhd8K=!1,E.oled=t.OLED?"true"===t.OLED:void 0,E.ddrSize=t.ddrSize,E.hdr10=!1,E.dolbyVision=!1,E.dolbyAtmos=!1,e(E)}}))}else e(E)},A={isShowing:function(){return PalmSystem&&PalmSystem.isKeyboardVisible}},x=function(){var e={};if(window.PalmSystem){if(window.PalmSystem.country){var t=JSON.parse(window.PalmSystem.country);e.country=t.country,e.smartServiceCountry=t.smartServiceCountry}window.PalmSystem.timeZone&&(e.timezone=window.PalmSystem.timeZone)}return e},C="1.2.3"}])}])});