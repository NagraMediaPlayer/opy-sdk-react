!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OTV=t():e.OTV=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=152)}([function(e,t,n){var r=n(1),i=n(7),o=n(15),a=n(12),s=n(19),u=function(e,t,n){var c,l,d,f,h=e&u.F,p=e&u.G,g=e&u.S,y=e&u.P,v=e&u.B,m=p?r:g?r[t]||(r[t]={}):(r[t]||{}).prototype,b=p?i:i[t]||(i[t]={}),_=b.prototype||(b.prototype={});p&&(n=t);for(c in n)l=!h&&m&&void 0!==m[c],d=(l?m:n)[c],f=v&&l?s(d,r):y&&"function"==typeof d?s(Function.call,d):d,m&&a(m,c,d,e&u.U),b[c]!=d&&o(b,c,f),y&&_[c]!=d&&(_[c]=d)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(58)("wks"),i=n(32),o=n(1).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(21),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(2)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(3),i=n(104),o=n(28),a=Object.defineProperty;t.f=n(8)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(26);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"eventTimeline",get:function(){return"EVENT_TIMELINE"}},{key:"playback",get:function(){return"PLAYBACK"}},{key:"sessionManagement",get:function(){return"SESSION_MANAGEMENT"}},{key:"manifestDl",get:function(){return"MANIFEST_DL"}},{key:"segmentDl",get:function(){return"SEGMENT_DL"}},{key:"licenseRequest",get:function(){return"LICENCE_REQUEST"}}]),e}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"setURL",get:function(){return"seturl"}},{key:"seeking",get:function(){return"seeking"}},{key:"seeked",get:function(){return"seeked"}},{key:"prepared",get:function(){return"prepared"}},{key:"firstFrame",get:function(){return"firstframe"}},{key:"start",get:function(){return"start"}},{key:"stop",get:function(){return"stop"}}]),e}(),s=function(){function e(){r(this,e)}return i(e,null,[{key:"networkStart",get:function(){return"network_start"}},{key:"networkComplete",get:function(){return"network_complete"}},{key:"networkCancel",get:function(){return"network_cancel"}},{key:"networkError",get:function(){return"network_error"}}]),e}(),u=function(){function e(){r(this,e)}return i(e,null,[{key:"setupStart",get:function(){return"ssm_setup_start"}},{key:"setupSuccessful",get:function(){return"ssm_setup_success"}},{key:"setupFailure",get:function(){return"ssm_setup_failure"}},{key:"teardownStart",get:function(){return"ssm_teardown_start"}},{key:"teardownSuccessful",get:function(){return"ssm_teardown_success"}},{key:"teardownFailure",get:function(){return"ssm_teardown_failure"}},{key:"renewalStart",get:function(){return"ssm_renewal_start"}},{key:"renewalSuccessful",get:function(){return"ssm_renewal_success"}},{key:"renewalFailure",get:function(){return"ssm_renewal_failure"}},{key:"heartbeatStart",get:function(){return"ssm_heartbeat_start"}},{key:"heartbeatSuccessful",get:function(){return"ssm_heartbeat_success"}},{key:"heartbeatFailure",get:function(){return"ssm_heartbeat_failure"}}]),e}(),c=function(){function e(){r(this,e)}return i(e,null,[{key:"provisionRequestStart",get:function(){return"provision_request_start"}},{key:"provisionRequestSuccessful",get:function(){return"provision_request_success"}},{key:"provisionRequestFailed",get:function(){return"provision_request_failure"}},{key:"keyRequestStart",get:function(){return"key_request_start"}},{key:"keyRequestSuccessful",get:function(){return"key_request_success"}},{key:"keyRequestFailed",get:function(){return"key_request_failure"}}]),e}(),l=function(){function e(){r(this,e)}return i(e,null,[{key:"url",get:function(){return"url"}},{key:"error",get:function(){return"error"}},{key:"contentToken",get:function(){return"contentToken"}},{key:"sessionToken",get:function(){return"sessionToken"}}]),e}(),d=function e(t,n,i,o){r(this,e),this.time=t,this.eventType=n,this.command=i,this.extra=o},f=function(){function e(){r(this,e),this.timelines=[],this.enabled=!1}return i(e,[{key:"enableTimeline",value:function(e){e?this.enabled||(this.enabled=!0,this.addToTimeline(o.eventTimeline,"logging_started")):(this.addToTimeline(o.eventTimeline,"logging_stopped"),this.enabled=!1)}},{key:"isEnabled",value:function(){return this.enabled}},{key:"addToTimeline",value:function(e,t,n){var r=this;if(this.enabled){var i=new Date;setTimeout(function(){r._doAddEvent(i,e,t,n)},0)}}},{key:"removeTimeline",value:function(e){this.timelines=this.timelines.filter(function(t){return t.time>=e})}},{key:"getTimelineList",value:function(e){return e?e.xNumber?this._getTimelineListByNumber(e.xNumber):e.xType?this._getTimelineListByType(e.xType):e.xFrom&&e.xTo?this._getTimelineListByDate(e.xFrom,e.xTo):[]:this.timelines.slice()}},{key:"_getTimelineListByNumber",value:function(e){return this.timelines.slice(-e)}},{key:"_getTimelineListByDate",value:function(e,t){return this.timelines.filter(function(n){return n.time>=e&&n.time<=t})}},{key:"_getTimelineListByType",value:function(e){return this.timelines.filter(function(t){return t.eventType===e})}},{key:"_doAddEvent",value:function(e,t,n,r){var i=new d(e,t,n,r);this.timelines.push(i)}}]),e}();t.OtvEventTimeline=f,t.OtvEventType=o,t.OtvEventCommandPlayback=a,t.OtvEventCommandNetwork=s,t.OtvEventCommandSessionManagement=u,t.OtvEventCommandLicenseRequest=c,t.OtvEventExtraKey=l},function(e,t,n){var r=n(1),i=n(15),o=n(14),a=n(32)("src"),s=n(157),u=(""+s).split("toString");n(7).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t,n){var r=n(0),i=n(2),o=n(26),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(9),i=n(31);e.exports=n(8)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(51),i=n(26);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(20);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(52),i=n(31),o=n(16),a=n(28),s=n(14),u=n(104),c=Object.getOwnPropertyDescriptor;t.f=n(8)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(0),i=n(7),o=n(2);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){var r=n(19),i=n(51),o=n(10),a=n(6),s=n(120);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,d=6==e,f=5==e||d,h=t||s;return function(t,s,p){for(var g,y,v=o(t),m=i(v),b=r(s,p,3),_=a(m.length),w=0,T=n?h(t,_):u?h(t,0):void 0;_>w;w++)if((f||w in m)&&(g=m[w],y=b(g,w,v),e))if(n)T[w]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return w;case 2:T.push(g)}else if(l)return!1;return d?-1:c||l?l:T}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";if(n(8)){var r=n(33),i=n(1),o=n(2),a=n(0),s=n(69),u=n(96),c=n(19),l=n(47),d=n(31),f=n(15),h=n(48),p=n(21),g=n(6),y=n(131),v=n(35),m=n(28),b=n(14),_=n(53),w=n(4),T=n(10),S=n(88),E=n(36),k=n(38),A=n(37).f,x=n(90),C=n(32),O=n(5),P=n(24),M=n(59),I=n(54),j=n(92),D=n(45),R=n(62),L=n(46),N=n(91),F=n(122),U=n(9),B=n(22),V=U.f,H=B.f,W=i.RangeError,K=i.TypeError,q=i.Uint8Array,G=Array.prototype,z=u.ArrayBuffer,Y=u.DataView,X=P(0),J=P(2),$=P(3),Q=P(4),Z=P(5),ee=P(6),te=M(!0),ne=M(!1),re=j.values,ie=j.keys,oe=j.entries,ae=G.lastIndexOf,se=G.reduce,ue=G.reduceRight,ce=G.join,le=G.sort,de=G.slice,fe=G.toString,he=G.toLocaleString,pe=O("iterator"),ge=O("toStringTag"),ye=C("typed_constructor"),ve=C("def_constructor"),me=s.CONSTR,be=s.TYPED,_e=s.VIEW,we=P(1,function(e,t){return Ae(I(e,e[ve]),t)}),Te=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Se=!!q&&!!q.prototype.set&&o(function(){new q(1).set({})}),Ee=function(e,t){var n=p(e);if(n<0||n%t)throw W("Wrong offset!");return n},ke=function(e){if(w(e)&&be in e)return e;throw K(e+" is not a typed array!")},Ae=function(e,t){if(!(w(e)&&ye in e))throw K("It is not a typed array constructor!");return new e(t)},xe=function(e,t){return Ce(I(e,e[ve]),t)},Ce=function(e,t){for(var n=0,r=t.length,i=Ae(e,r);r>n;)i[n]=t[n++];return i},Oe=function(e,t,n){V(e,t,{get:function(){return this._d[n]}})},Pe=function(e){var t,n,r,i,o,a,s=T(e),u=arguments.length,l=u>1?arguments[1]:void 0,d=void 0!==l,f=x(s);if(void 0!=f&&!S(f)){for(a=f.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(d&&u>2&&(l=c(l,arguments[2],2)),t=0,n=g(s.length),i=Ae(this,n);n>t;t++)i[t]=d?l(s[t],t):s[t];return i},Me=function(){for(var e=0,t=arguments.length,n=Ae(this,t);t>e;)n[e]=arguments[e++];return n},Ie=!!q&&o(function(){he.call(new q(1))}),je=function(){return he.apply(Ie?de.call(ke(this)):ke(this),arguments)},De={copyWithin:function(e,t){return F.call(ke(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Q(ke(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return N.apply(ke(this),arguments)},filter:function(e){return xe(this,J(ke(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(ke(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(ke(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){X(ke(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(ke(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(ke(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(ke(this),arguments)},lastIndexOf:function(e){return ae.apply(ke(this),arguments)},map:function(e){return we(ke(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(ke(this),arguments)},reduceRight:function(e){return ue.apply(ke(this),arguments)},reverse:function(){for(var e,t=this,n=ke(t).length,r=Math.floor(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t},some:function(e){return $(ke(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return le.call(ke(this),e)},subarray:function(e,t){var n=ke(this),r=n.length,i=v(e,r);return new(I(n,n[ve]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,g((void 0===t?r:v(t,r))-i))}},Re=function(e,t){return xe(this,de.call(ke(this),e,t))},Le=function(e){ke(this);var t=Ee(arguments[1],1),n=this.length,r=T(e),i=g(r.length),o=0;if(i+t>n)throw W("Wrong length!");for(;o<i;)this[t+o]=r[o++]},Ne={entries:function(){return oe.call(ke(this))},keys:function(){return ie.call(ke(this))},values:function(){return re.call(ke(this))}},Fe=function(e,t){return w(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ue=function(e,t){return Fe(e,t=m(t,!0))?d(2,e[t]):H(e,t)},Be=function(e,t,n){return!(Fe(e,t=m(t,!0))&&w(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?V(e,t,n):(e[t]=n.value,e)};me||(B.f=Ue,U.f=Be),a(a.S+a.F*!me,"Object",{getOwnPropertyDescriptor:Ue,defineProperty:Be}),o(function(){fe.call({})})&&(fe=he=function(){return ce.call(this)});var Ve=h({},De);h(Ve,Ne),f(Ve,pe,Ne.values),h(Ve,{slice:Re,set:Le,constructor:function(){},toString:fe,toLocaleString:je}),Oe(Ve,"buffer","b"),Oe(Ve,"byteOffset","o"),Oe(Ve,"byteLength","l"),Oe(Ve,"length","e"),V(Ve,ge,{get:function(){return this[be]}}),e.exports=function(e,t,n,u){u=!!u;var c=e+(u?"Clamped":"")+"Array",d="get"+e,h="set"+e,p=i[c],v=p||{},m=p&&k(p),b=!p||!s.ABV,T={},S=p&&p.prototype,x=function(e,n){var r=e._d;return r.v[d](n*t+r.o,Te)},C=function(e,n,r){var i=e._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[h](n*t+i.o,r,Te)},O=function(e,t){V(e,t,{get:function(){return x(this,t)},set:function(e){return C(this,t,e)},enumerable:!0})};b?(p=n(function(e,n,r,i){l(e,p,c,"_d");var o,a,s,u,d=0,h=0;if(w(n)){if(!(n instanceof z||"ArrayBuffer"==(u=_(n))||"SharedArrayBuffer"==u))return be in n?Ce(p,n):Pe.call(p,n);o=n,h=Ee(r,t);var v=n.byteLength;if(void 0===i){if(v%t)throw W("Wrong length!");if((a=v-h)<0)throw W("Wrong length!")}else if((a=g(i)*t)+h>v)throw W("Wrong length!");s=a/t}else s=y(n),a=s*t,o=new z(a);for(f(e,"_d",{b:o,o:h,l:a,e:s,v:new Y(o)});d<s;)O(e,d++)}),S=p.prototype=E(Ve),f(S,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&R(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=n(function(e,n,r,i){l(e,p,c);var o;return w(n)?n instanceof z||"ArrayBuffer"==(o=_(n))||"SharedArrayBuffer"==o?void 0!==i?new v(n,Ee(r,t),i):void 0!==r?new v(n,Ee(r,t)):new v(n):be in n?Ce(p,n):Pe.call(p,n):new v(y(n))}),X(m!==Function.prototype?A(v).concat(A(m)):A(v),function(e){e in p||f(p,e,v[e])}),p.prototype=S,r||(S.constructor=p));var P=S[pe],M=!!P&&("values"==P.name||void 0==P.name),I=Ne.values;f(p,ye,!0),f(S,be,c),f(S,_e,!0),f(S,ve,p),(u?new p(1)[ge]==c:ge in S)||V(S,ge,{get:function(){return c}}),T[c]=p,a(a.G+a.W+a.F*(p!=v),T),a(a.S,c,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o(function(){v.of.call(p,1)}),c,{from:Pe,of:Me}),"BYTES_PER_ELEMENT"in S||f(S,"BYTES_PER_ELEMENT",t),a(a.P,c,De),L(c),a(a.P+a.F*Se,c,{set:Le}),a(a.P+a.F*!M,c,Ne),r||S.toString==fe||(S.toString=fe),a(a.P+a.F*o(function(){new p(1).slice()}),c,{slice:Re}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){S.toLocaleString.call([1,2])})),c,{toLocaleString:je}),D[c]=M?P:I,r||M||f(S,pe,I)}}else e.exports=function(){}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(32)("meta"),i=n(4),o=n(14),a=n(9).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(2)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},f=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return c&&p.NEED&&u(e)&&!o(e,r)&&l(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:f,onFreeze:h}},function(e,t,n){"use strict";function r(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}function i(e){var t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)}function o(e){var t=new Uint8Array(e);return String.fromCharCode.apply(null,t)}function a(e){for(var t=new ArrayBuffer(e.length*u),n=new Uint16Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}function s(e){return btoa(new Uint8Array(e).reduce(function(e,t){return e+String.fromCharCode(t)},""))}Object.defineProperty(t,"__esModule",{value:!0});var u=2;t.default={base64DecodeUint8Array:r,arrayToString:i,arrayBufferToString:o,stringToArray:a,toBase64:s}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(106),i=n(75);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(21),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(3),i=n(107),o=n(75),a=n(74)("IE_PROTO"),s=function(){},u=function(){var e,t=n(72)("iframe"),r=o.length;for(t.style.display="none",n(76).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(106),i=n(75).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(14),i=n(10),o=n(74)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(5)("unscopables"),i=Array.prototype;void 0==i[r]&&n(15)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"ready",value:function(){}},{key:"updateSourceData",value:function(e){return e}},{key:"tearDown",value:function(){}},{key:"renewLicence",value:function(){}}]),e}();t.default=o},function(e,t,n){"use strict";function r(){return!u()&&-1!==window.navigator.userAgent.indexOf("Safari")&&-1===window.navigator.userAgent.indexOf("Chrome")}function i(){var e=window.chrome,t=window.navigator,n=t.vendor,r=void 0!==window.opr,i=t.userAgent.indexOf("Edge")>-1;return!!t.userAgent.match("CriOS")||null!==e&&void 0!==e&&"Google Inc."===n&&!1===r&&!1===i}function o(){return window.navigator.userAgent.toLowerCase().includes("web0s")}function a(){return window.navigator.userAgent.toLowerCase().includes("samsung")&&window.navigator.userAgent.toLowerCase().includes("hbbtv")}function s(){return window.navigator.userAgent.toLowerCase().includes("vestel")}function u(){return window.navigator.userAgent.toLowerCase().includes("smart")}function c(){return window.navigator.userAgent.toLowerCase().includes("xbox")}function l(){return window.navigator.userAgent.toLowerCase().includes("hbbtv")}function d(){var e=/tizen\W[\d|.]+/g,t=window.navigator.userAgent.toLocaleLowerCase().match(e);if(t){var n=t[0].slice("tizen ".length);return Number(n)}return NaN}function f(){var e=d();return!isNaN(e)&&e>=5.5}Object.defineProperty(t,"__esModule",{value:!0}),t.default={isSafari:r,isChrome:i,isSmartTV:u,isXbox:c,isHbbtv:l,isVestel:s,isTVKeyCapable:a,getTizenVersion:d,isLateTizen:f,isWebOS:o}},function(e,t,n){var r=n(9).f,i=n(14),o=n(5)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(0),i=n(26),o=n(2),a=n(78),s="["+a+"]",u="​",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),d=function(e,t,n){var i={},s=o(function(){return!!a[e]()||u[e]()!=u}),c=i[e]=s?t(f):a[e];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},f=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=d},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(1),i=n(9),o=n(8),a=n(5)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(12);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.DrmDashTimeline=t.DrmDashController=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=n(41),f=r(d),h=n(11),p=n(42),g=r(p),y=n(361),v=r(y),m=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.log=n,i.vjsPlayer=r,i.drmDetails=e,i._persistentState=new v.default(g.default.isSmartTV()),i.timeline=i._makeTimelineLogger(),i}return s(t,e),c(t,[{key:"ready",value:function(e){this.vjsPlayer.tech_.shaka_&&(this._setWidevineAdvancedDrm(),this._configureDrm(),this.vjsPlayer&&this.vjsPlayer.tech_&&this.timeline._registerShakaFilters(this.vjsPlayer.tech_.shaka_),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this,e))}},{key:"tearDown",value:function(){return this.vjsPlayer&&this.vjsPlayer.tech_,this.token="",this.source=void 0,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this)}},{key:"updateSourceData",value:function(e){this.token=e.token,this.vjsPlayer&&this.vjsPlayer.tech_.shaka_&&this._configureDrm();var n=/\.mpd/i;return void 0===e.type&&n.test(e.src)&&(e.type="application/dash+xml"),this.timeline.setSource(e),this.source=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e),this.source}},{key:"renewLicence",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renewLicence",this).call(this),this.vjsPlayer.tech_.shaka_&&this.vjsPlayer.tech_.shaka_.requestLicence?this.vjsPlayer.tech_.shaka_.requestLicence():this.log("Unable to request new licence. No tech capability")}},{key:"_makeTimelineLogger",value:function(){return new _}},{key:"_setWidevineAdvancedDrm",value:function(){var e={},t=this._getWidevineServerCertificate(),n=this._getPersistentState();t&&(!g.default.isSmartTV()||!g.default.isTVKeyCapable()&&g.default.isLateTizen())&&(e.serverCertificate=t),n&&(e.persistentStateRequired="required"===n),this.vjsPlayer.tech_.shaka_&&e!=={}&&this.vjsPlayer.tech_.shaka_.configure({drm:{advanced:{"com.widevine.alpha":e}}})}},{key:"_getPersistentState",value:function(){var e="optional";return this.drmDetails&&this.drmDetails.config["com.widevine.alpha"]&&this.drmDetails.config["com.widevine.alpha"].persistentState&&(e=this._persistentState.adjustDefault(this.drmDetails.config["com.widevine.alpha"].persistentState)),this.log("PersistentState is "+e),e}},{key:"_configureDrm",value:function(){}},{key:"_getWidevineServerCertificate",value:function(){var e=void 0;return this.drmDetails&&this.drmDetails.config&&this.drmDetails.config.widevineServerCertificate&&(e=u(this.drmDetails.config.widevineServerCertificate)),e}},{key:"_configureSingleSession",value:function(){this.singleSessionController=new b(this.vjsPlayer,this.vjsPlayer.tech_.shaka_)}}]),t}(f.default),b=function(){function e(t,n){o(this,e),this.requestedLicence=!1,this._onLoadstartHandle=this._onLoadstart.bind(this),this._licenceRequiredHandle=this._licenceRequiredCallback.bind(this),n.setLicenceRequiredCallback&&(n.setLicenceRequiredCallback(this._licenceRequiredHandle),t.off("loadstart",this._onLoadstartHandle),t.on("loadstart",this._onLoadstartHandle))}return c(e,[{key:"_onLoadstart",value:function(){this.requestedLicence=!1}},{key:"_licenceRequiredCallback",value:function(){return this.requestedLicence?[!0,!1]:(this.requestedLicence=!0,[!1,!1])}}]),e}(),_=function(){function e(){o(this,e),this.url="",this.provision=!1,this.requestFilterHandle=this._shakaRequestFilter.bind(this),this.responseFilterHandle=this._shakaResponseFilter.bind(this)}return c(e,[{key:"setSource",value:function(e){this.url=e.src||e}},{key:"tearDown",value:function(){this.provision=!1}},{key:"_registerShakaFilters",value:function(e){e&&(this._unregisterShakaFilters(e),e.addEventListener("error",this._onErrorEvent.bind(this)),e.getNetworkingEngine().registerRequestFilter(this.requestFilterHandle),e.getNetworkingEngine().registerResponseFilter(this.responseFilterHandle))}},{key:"_unregisterShakaFilters",value:function(e){e&&(e.getNetworkingEngine().unregisterRequestFilter(this.requestFilterHandle),e.getNetworkingEngine().unregisterResponseFilter(this.responseFilterHandle))}},{key:"_onErrorEvent",value:function(e){if(6007===e.detail.code){var t=h.OtvEventType.licenseRequest,n=i({},h.OtvEventExtraKey.url,this.url),r=void 0;n[h.OtvEventExtraKey.error]=e.detail.message,r=this.provision?h.OtvEventCommandLicenseRequest.provisionRequestFailed:h.OtvEventCommandLicenseRequest.keyRequestFailed;var o=JSON.stringify(n);OTV.eventTimeline.addToTimeline(t,r,o)}}},{key:"_shakaRequestFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE){var n=h.OtvEventType.licenseRequest,r=JSON.stringify(i({},h.OtvEventExtraKey.url,this.url));this.provision=t.body.byteLength<100;var o=this.provision?h.OtvEventCommandLicenseRequest.provisionRequestStart:h.OtvEventCommandLicenseRequest.keyRequestStart;OTV.eventTimeline.addToTimeline(n,o,r)}}},{key:"_shakaResponseFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE){var n=this.url?this.url:t.url,r=h.OtvEventType.licenseRequest,o=i({},h.OtvEventExtraKey.url,n),a=void 0;a=this.provision?h.OtvEventCommandLicenseRequest.provisionRequestSuccessful:h.OtvEventCommandLicenseRequest.keyRequestSuccessful;var s=JSON.stringify(o);OTV.eventTimeline.addToTimeline(r,a,s)}}}]),e}();t.DrmDashController=m,t.DrmDashTimeline=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(103),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){r(this,e),this.videojs=t,this.eventListeners=new a.default.ListenerList}return i(e,[{key:"_getShakaPlayerInstance",value:function(){var e=void 0;return this.videojs&&this.videojs.tech_&&(e=this.videojs.tech_.shaka_),e}},{key:"addListener",value:function(e){this.eventListeners.add(e)}},{key:"removeListener",value:function(e){this.eventListeners.remove(e)}},{key:"setListener",value:function(e){this.listener=e}},{key:"dispose",value:function(){this.eventListeners.clear(),this.eventListeners=null,this.videojs=null}}]),e}();t.default={Statistics:s}},function(e,t,n){var r=n(25);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(25),i=n(5)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r=n(3),i=n(20),o=n(5)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){(function(t){e.exports=t.otvplayer=n(352)}).call(t,n(18))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.logger=t,this.type=n,this.string=""}return i(e,[{key:"addType",value:function(){return this.string+=this.type,this}},{key:"log",value:function(){return this.logger(this.string),this}},{key:"warn",value:function(){return this.logger.warn(this.string),this}},{key:"error",value:function(){return this.logger.error(this.string),this}},{key:"debug",value:function(){return this.logger.debug(this.string),this}},{key:"message",value:function(e){return this.string+=e,this}},{key:"throw",value:function(){throw new Error(this.string)}}]),e}(),a=function(){function e(t,n){r(this,e),this.logger=t,this.type=n}return i(e,[{key:"addType",value:function(){return new o(this.logger,this.type).addType()}},{key:"message",value:function(e){return new o(this.logger,this.type).message(e)}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=["otv","customer"],s=function(){function e(){r(this,e),this.configs={};var t=!0,n=!1,i=void 0;try{for(var o,s=a[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var u=o.value;this.configs[u]={}}}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}this.tech=void 0}return o(e,[{key:"setTech",value:function(e){this.tech=e,e&&this._applyConfig()}},{key:"getConfiguration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a[0];return this.tech?this.tech.getConfiguration():JSON.parse(JSON.stringify(this.configs[e]))}},{key:"configure",value:function(e,t,n){var r=t;return 3===arguments.length&&"string"==typeof t&&(r=shaka.util.ConfigUtils.convertToConfigObject(t,n)),"object"===(void 0===r?"undefined":i(r))&&(!!a.includes(e)&&(this._mergeConfigObjects(this.configs[e],r),!this.tech||this._applyConfig()))}},{key:"_applyConfig",value:function(){var e={},t=!0,n=!1,r=void 0;try{for(var i,o=a[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;this._mergeConfigObjects(e,this.configs[s])}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return this.tech.configure(e)}},{key:"_mergeConfigObjects",value:function(e,t){for(var n in t)t[n]&&t[n].constructor===Object?(e[n]||(e[n]={}),this._mergeConfigObjects(e[n],t[n])):e[n]=t[n]}}]),e}();t.TechConfiguration=s,t.CONFIG_TYPE_CUSTOMER="customer",t.CONFIG_TYPE_OTV="otv"},function(e,t,n){var r=n(7),i=n(1),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(33)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(16),i=n(6),o=n(35);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(25);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(5)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(3);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(53),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(124);var r=n(12),i=n(15),o=n(2),a=n(26),s=n(5),u=n(93),c=s("species"),l=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=s(e),h=!o(function(){var t={};return t[f]=function(){return 7},7!=""[e](t)}),p=h?!o(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[f](""),!t}):void 0;if(!h||!p||"replace"===e&&!l||"split"===e&&!d){var g=/./[f],y=n(a,f,""[e],function(e,t,n,r,i){return t.exec===u?h&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),v=y[0],m=y[1];r(String.prototype,e,v),i(RegExp.prototype,f,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})}}},function(e,t,n){var r=n(19),i=n(119),o=n(88),a=n(3),s=n(6),u=n(90),c={},l={},t=e.exports=function(e,t,n,d,f){var h,p,g,y,v=f?function(){return e}:u(e),m=r(n,d,t?2:1),b=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(h=s(e.length);h>b;b++)if((y=t?m(a(p=e[b])[0],p[1]):m(e[b]))===c||y===l)return y}else for(g=v.call(e);!(p=g.next()).done;)if((y=i(g,m,p.value,t))===c||y===l)return y};t.BREAK=c,t.RETURN=l},function(e,t,n){var r=n(1),i=r.navigator;e.exports=i&&i.userAgent||""},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(12),a=n(48),s=n(29),u=n(66),c=n(47),l=n(4),d=n(2),f=n(62),h=n(43),p=n(79);e.exports=function(e,t,n,g,y,v){var m=r[e],b=m,_=y?"set":"add",w=b&&b.prototype,T={},S=function(e){var t=w[e];o(w,e,"delete"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(v||w.forEach&&!d(function(){(new b).entries().next()}))){var E=new b,k=E[_](v?{}:-0,1)!=E,A=d(function(){E.has(1)}),x=f(function(e){new b(e)}),C=!v&&d(function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)});x||(b=t(function(t,n){c(t,b,e);var r=p(new m,t,b);return void 0!=n&&u(n,y,r[_],r),r}),b.prototype=w,w.constructor=b),(A||C)&&(S("delete"),S("has"),y&&S("get")),(C||k)&&S(_),v&&w.clear&&delete w.clear}else b=g.getConstructor(t,e,y,_),a(b.prototype,n),s.NEED=!0;return h(b,e),T[e]=b,i(i.G+i.W+i.F*(b!=m),T),v||g.setStrong(b,e,y),b}},function(e,t,n){for(var r,i=n(1),o=n(15),a=n(32),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,d=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(r=i[f[d++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(e,t,n){"use strict";function r(e,t,n,r){var a=e;return a+="/"+t,a+=i(n),a+="/contentlicenseservice/v1",a+=o(r)}function i(e){var t=null;return"FairPlay"===e?t="fpls":"PlayReady"===e?t="prls":"Widevine"===e?t="wvls":"Tvkey"===e&&(t="tkls"),"/"+t}function o(e){var t=null;return"License"===e?t="licenses":"Cert"===e&&(t="certificates"),"/"+t}Object.defineProperty(t,"__esModule",{value:!0}),t.default={buildUrlWith:r,drmSpecificSeparatorFor:i,requestSpecificSuffixFor:o}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=e.trim().toLowerCase(),n=null,r=!0,i=!1,o=void 0;try{for(var a,s=Object.keys(h)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(t.includes(u)){n=h[u];break}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}function o(e){var t=null;return p.includes(e)?t=f:e===d&&(t=d),t}function a(e){var t=null;return e.headers.hasOwnProperty("content-type")&&(t=o(e.headers["content-type"])),t}function s(e){var t=null;return e.startsWith("#EXTM3U")?t=f:e.includes("MPD")&&(t=d),t}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(381),l=function(e){return e&&e.__esModule?e:{default:e}}(c),d="application/dash+xml",f="application/x-mpegURL",h={};h[".m3u8"]=f,h[".mpd"]=d,h["manifest(format=m3u8-aapl)"]=f,h["manifest(format=mpd-time-csf)"]=d;var p=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default;r(this,e),this.XMLHttpRequester=t}return u(e,[{key:"build",value:function(e,t){var n=this;return t?Promise.resolve({src:e,type:t}):new Promise(function(t,r){var o=i(e);o?t({src:e,type:o}):n._getMimeTypeFromManifest(e,t,r)})}},{key:"_getMimeTypeFromManifest",value:function(e,t,n){var r=this;(new this.XMLHttpRequester).send({method:"HEAD",url:e}).then(function(i){if(200!==i.status)throw new Error("Invalid URL given");var o=a(i);o?t({src:e,type:o}):r._parseManifestForMimeType(e,t,n)}).catch(function(){r._parseManifestForMimeType(e,t,n)})}},{key:"_parseManifestForMimeType",value:function(e,t,n){(new this.XMLHttpRequester).send({method:"GET",url:e}).then(function(n){if(200!==n.status)throw new Error("Invalid URL given");var r=s(n.responseText);if(!r)throw new Error("Cannot play given manifest");t({src:e,type:r})}).catch(function(){n("XHR Error")})}}]),e}();t.default={SourceBuilder:g}},function(e,t,n){var r=n(4),i=n(1).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){t.f=n(5)},function(e,t,n){var r=n(58)("keys"),i=n(32);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(1).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(4),i=n(3),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(19)(Function.call,n(22).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(4),i=n(77).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(21),i=n(26);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(21),i=n(26);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(33),i=n(0),o=n(12),a=n(15),s=n(45),u=n(118),c=n(43),l=n(38),d=n(5)("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,p,g,y,v){u(n,t,p);var m,b,_,w=function(e){if(!f&&e in k)return k[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",S="values"==g,E=!1,k=e.prototype,A=k[d]||k["@@iterator"]||g&&k[g],x=A||w(g),C=g?S?w("entries"):x:void 0,O="Array"==t?k.entries||A:A;if(O&&(_=l(O.call(new e)))!==Object.prototype&&_.next&&(c(_,T,!0),r||"function"==typeof _[d]||a(_,d,h)),S&&A&&"values"!==A.name&&(E=!0,x=function(){return A.call(this)}),r&&!v||!f&&!E&&k[d]||a(k,d,x),s[t]=x,s[T]=h,g)if(m={values:S?x:w("values"),keys:y?x:w("keys"),entries:C},v)for(b in m)b in k||o(k,b,m[b]);else i(i.P+i.F*(f||E),t,m);return m}},function(e,t,n){var r=n(86),i=n(26);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(4),i=n(25),o=n(5)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(5)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(45),i=n(5)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(9),i=n(31);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(53),i=n(5)("iterator"),o=n(45);e.exports=n(7).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";var r=n(10),i=n(35),o=n(6);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(39),i=n(123),o=n(45),a=n(16);e.exports=n(84)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r=n(63),i=RegExp.prototype.exec,o=String.prototype.replace,a=i,s=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=void 0!==/()??/.exec("")[1];(s||u)&&(a=function(e){var t,n,a,c,l=this;return u&&(n=new RegExp("^"+l.source+"$(?!\\s)",r.call(l))),s&&(t=l.lastIndex),a=i.call(l,e),s&&a&&(l.lastIndex=l.global?a.index+a[0].length:t),u&&a&&a.length>1&&o.call(a[0],n,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)}),a}),e.exports=a},function(e,t,n){"use strict";var r=n(83)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r,i,o,a=n(19),s=n(112),u=n(76),c=n(72),l=n(1),d=l.process,f=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,g=l.Dispatch,y=0,v={},m=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},b=function(e){m.call(e.data)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++y]=function(){s("function"==typeof e?e:Function(e),t)},r(y),y},h=function(e){delete v[e]},"process"==n(25)(d)?r=function(e){d.nextTick(a(m,e,1))}:g&&g.now?r=function(e){g.now(a(m,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(e)}}:function(e){setTimeout(a(m,e,1),0)}),e.exports={set:f,clear:h}},function(e,t,n){"use strict";function r(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?F(2,-24)-F(2,-77):0,d=0,f=e<0||0===e&&1/e<0?1:0;for(e=N(e),e!=e||e===R?(i=e!=e?1:0,r=u):(r=U(B(e)/V),e*(o=F(2,-r))<1&&(r--,o*=2),e+=r+c>=1?l/o:l*F(2,1-c),e*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(e*o-1)*F(2,t),r+=c):(i=e*F(2,c-1)*F(2,t),r=0));t>=8;a[d++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[d++]=255&r,r/=256,s-=8);return a[--d]|=128*f,a}function i(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=t;s>0;r=256*r+e[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-R:R;r+=F(2,t),l-=a}return(c?-1:1)*r*F(2,l-t)}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function a(e){return[255&e]}function s(e){return[255&e,e>>8&255]}function u(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function c(e){return r(e,52,8)}function l(e){return r(e,23,4)}function d(e,t,n){A(e[O],t,{get:function(){return this[n]}})}function f(e,t,n,r){var i=+n,o=E(i);if(o+t>e[W])throw D(P);var a=e[H]._b,s=o+e[K],u=a.slice(s,s+t);return r?u:u.reverse()}function h(e,t,n,r,i,o){var a=+n,s=E(a);if(s+t>e[W])throw D(P);for(var u=e[H]._b,c=s+e[K],l=r(+i),d=0;d<t;d++)u[c+d]=l[o?d:t-d-1]}var p=n(1),g=n(8),y=n(33),v=n(69),m=n(15),b=n(48),_=n(2),w=n(47),T=n(21),S=n(6),E=n(131),k=n(37).f,A=n(9).f,x=n(91),C=n(43),O="prototype",P="Wrong index!",M=p.ArrayBuffer,I=p.DataView,j=p.Math,D=p.RangeError,R=p.Infinity,L=M,N=j.abs,F=j.pow,U=j.floor,B=j.log,V=j.LN2,H=g?"_b":"buffer",W=g?"_l":"byteLength",K=g?"_o":"byteOffset";if(v.ABV){if(!_(function(){M(1)})||!_(function(){new M(-1)})||_(function(){return new M,new M(1.5),new M(NaN),"ArrayBuffer"!=M.name})){M=function(e){return w(this,M),new L(E(e))};for(var q,G=M[O]=L[O],z=k(L),Y=0;z.length>Y;)(q=z[Y++])in M||m(M,q,L[q]);y||(G.constructor=M)}var X=new I(new M(2)),J=I[O].setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),!X.getInt8(0)&&X.getInt8(1)||b(I[O],{setInt8:function(e,t){J.call(this,e,t<<24>>24)},setUint8:function(e,t){J.call(this,e,t<<24>>24)}},!0)}else M=function(e){w(this,M,"ArrayBuffer");var t=E(e);this._b=x.call(new Array(t),0),this[W]=t},I=function(e,t,n){w(this,I,"DataView"),w(e,M,"DataView");var r=e[W],i=T(t);if(i<0||i>r)throw D("Wrong offset!");if(n=void 0===n?r-i:S(n),i+n>r)throw D("Wrong length!");this[H]=e,this[K]=i,this[W]=n},g&&(d(M,"byteLength","_l"),d(I,"buffer","_b"),d(I,"byteLength","_l"),d(I,"byteOffset","_o")),b(I[O],{getInt8:function(e){return f(this,1,e)[0]<<24>>24},getUint8:function(e){return f(this,1,e)[0]},getInt16:function(e){var t=f(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=f(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return o(f(this,4,e,arguments[1]))},getUint32:function(e){return o(f(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return i(f(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return i(f(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){h(this,1,e,a,t)},setUint8:function(e,t){h(this,1,e,a,t)},setInt16:function(e,t){h(this,2,e,s,t,arguments[2])},setUint16:function(e,t){h(this,2,e,s,t,arguments[2])},setInt32:function(e,t){h(this,4,e,u,t,arguments[2])},setUint32:function(e,t){h(this,4,e,u,t,arguments[2])},setFloat32:function(e,t){h(this,4,e,l,t,arguments[2])},setFloat64:function(e,t){h(this,8,e,c,t,arguments[2])}});C(M,"ArrayBuffer"),C(I,"DataView"),m(I[O],v.VIEW,!0),t.ArrayBuffer=M,t.DataView=I},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(136)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),u=n(30),c=r(u),l=n(139),d=r(l),f=function(){function e(t){o(this,e),this.drmOptions=t.drmOptions,this.logger=t.logger,this.drmOptions.licenceServer||this.logger.addType().message(" FairPlay licenceServer not configured!").warn(),this.drmImplementer=d.default.getDrmImplementation(this.drmOptions.system)}return a(e,[{key:"setToken",value:function(e){this.token=e}},{key:"request",value:function(e,t){var n=this;this.logger.message("Function: FairPlayLicenceRequester.request()").log();var r=this._getLicenceUri(t),i={method:"POST",mode:"cors",redirect:"follow",headers:{Accept:"application/json","Content-Type":"application/octet-stream","nv-authorizations":this._getTokenString(t)},body:e};return this._logKeyRequestStatTimelineEvent(t,r),new Promise(function(e,o){var a=n;fetch(r,i).then(function(i){if(i.ok){a._logKeyStatSuccessTimelineEvent(t,r);var s=i.clone();i.json().then(function(t){n.logger.message("CkcMessage (JSON): "+t.CkcMessage).debug(),e(c.default.base64DecodeUint8Array(t.CkcMessage))}).catch(function(){n.logger.message("CkcMessage (Binary) received").debug(),s.arrayBuffer().then(function(t){e(t)})})}else{var u="licence request failed";a.logger.message(u).warn(),a._logKeyRequestStatFailureTimelineEvent(t,r,u),o(u)}}).catch(function(e){o("Error on licence request: "+JSON.stringify(e))})})}},{key:"_getLicenceUri",value:function(){return this.drmOptions.licenceServer}},{key:"_getTokenString",value:function(){return this.token}},{key:"_logKeyRequestStatTimelineEvent",value:function(e,t){this._logTimelineEvent(s.OtvEventCommandLicenseRequest.keyRequestStart,t)}},{key:"_logKeyStatSuccessTimelineEvent",value:function(e,t){this._logTimelineEvent(s.OtvEventCommandLicenseRequest.keyRequestSuccessful,t)}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e,t,n){this._logTimelineEvent(s.OtvEventCommandLicenseRequest.keyRequestFailed,t,n)}},{key:"_logTimelineEvent",value:function(e,t,n){var r="";if(n){var o;r=JSON.stringify((o={},i(o,s.OtvEventExtraKey.url,t),i(o,s.OtvEventExtraKey.error,n),o))}else r=JSON.stringify(i({},s.OtvEventExtraKey.url,t));OTV.eventTimeline.addToTimeline(s.OtvEventType.licenseRequest,e,r)}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.drmOptions["com.apple.fps"],n=Boolean(navigator.requestMediaKeySystemAccess);if(t&&t.useLegacyEME||!n){var r=n?"Legacy EME selected by configuration":"Legacy EME selected. MediaKey not available";return e.logger.message(r).log(),new a.default(e)}return e.logger.message("MediaKey EME selected").log(),new u.default(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.makeDecryptionInterface=i;var o=n(358),a=r(o),s=n(359),u=r(s)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.logger=t.logger,this.certificateRequester=t.certificateRequester,this.drmOptions=t.drmOptions,this.licenceRequester=t.licenceRequester}return i(e,[{key:"setVideoElement",value:function(e){this._supportKeySystem()&&(this.videoElement=e,this.onVideoEncryptedHandle=this._onVideoEncrypted.bind(this),this.onVideoErrorHandle=this._onVideoError.bind(this),this._setEncryptedListener(e,this.onVideoEncryptedHandle),e.addEventListener("error",this.onVideoErrorHandle,!1))}},{key:"dispose",value:function(){this.videoElement&&(this._removeEncryptedListener(this.videoElement,this.onVideoEncryptedHandle),this.videoElement.removeEventListener("error",this.onVideoErrorHandle,!1),this.videoElement=void 0)}},{key:"tearDown",value:function(){}},{key:"renewLicence",value:function(){throw new Error("DecryptionInterface.renewLicence() not supported for this decryption type")}},{key:"_setEncryptedListener",value:function(e,t){throw new Error("DecryptionInterface._setEncryptedListener() must be overridden by derived class")}},{key:"_removeEncryptedListener",value:function(e,t){throw new Error("DecryptionInterface._removeEncryptedListener() must be overridden by derived class")}},{key:"_supportKeySystems",value:function(){throw new Error("DecryptionInterface._supportKeySystems() must be overridden by derived class")}},{key:"_onVideoEncrypted",value:function(){throw new Error("DecryptionInterface._onVideoEncrypted() must be overridden by derived class")}},{key:"_onVideoError",value:function(e){var t="A video playback error occurred";throw e.target&&e.target.error&&(t=t+" - Event error code: "+e.target.error.code+" - Event error message: "+e.target.error.message),new Error(t)}}]),e}();t.DecryptionInterface=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.listenerArray=[]}return i(e,[{key:"add",value:function(e){this.contain(e)||this.listenerArray.push(e)}},{key:"remove",value:function(e){var t=this.listenerArray.indexOf(e);t>=0&&this.listenerArray.splice(t,1)}},{key:"contain",value:function(e){return this.listenerArray.indexOf(e)>=0}},{key:"length",value:function(){return this.listenerArray.length}},{key:"get",value:function(e){return this.listenerArray[e]}},{key:"clear",value:function(){this.listenerArray=[]}}]),e}();t.default={ListenerList:o}},function(e,t,n){e.exports=!n(8)&&!n(2)(function(){return 7!=Object.defineProperty(n(72)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(1),i=n(7),o=n(33),a=n(73),s=n(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(14),i=n(16),o=n(59)(!1),a=n(74)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(9),i=n(3),o=n(34);e.exports=n(8)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(16),i=n(37).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){"use strict";var r=n(8),i=n(34),o=n(60),a=n(52),s=n(10),u=n(51),c=Object.assign;e.exports=!c||n(2)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=s(e),c=arguments.length,l=1,d=o.f,f=a.f;c>l;)for(var h,p=u(arguments[l++]),g=d?i(p).concat(d(p)):i(p),y=g.length,v=0;y>v;)h=g[v++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:c},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(20),i=n(4),o=n(112),a=[].slice,s={},u=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(1).parseInt,i=n(44).trim,o=n(78),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(1).parseFloat,i=n(44).trim;e.exports=1/r(n(78)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(25);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(4),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";var r=n(36),i=n(31),o=n(43),a={};n(15)(a,n(5)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(3);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(247);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(20),i=n(10),o=n(51),a=n(6);e.exports=function(e,t,n,s,u){r(t);var c=i(e),l=o(c),d=a(c.length),f=u?d-1:0,h=u?-1:1;if(n<2)for(;;){if(f in l){s=l[f],f+=h;break}if(f+=h,u?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:d>f;f+=h)f in l&&(s=t(s,l[f],f,c));return s}},function(e,t,n){"use strict";var r=n(10),i=n(35),o=n(6);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),u=i(t,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),d=1;for(u<s&&s<u+l&&(d=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=d,u+=d;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(93);n(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(8)&&"g"!=/./g.flags&&n(9).f(RegExp.prototype,"flags",{configurable:!0,get:n(63)})},function(e,t,n){"use strict";var r,i,o,a,s=n(33),u=n(1),c=n(19),l=n(53),d=n(0),f=n(4),h=n(20),p=n(47),g=n(66),y=n(54),v=n(95).set,m=n(267)(),b=n(127),_=n(268),w=n(67),T=n(128),S=u.TypeError,E=u.process,k=E&&E.versions,A=k&&k.v8||"",x=u.Promise,C="process"==l(E),O=function(){},P=i=b.f,M=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[n(5)("species")]=function(e){e(O,O)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t&&0!==A.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(i||(2==e._h&&L(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?c(S("Promise-chain cycle")):(o=I(n))?o.call(n,u,c):u(n)):c(r)}catch(e){l&&!a&&l.exit(),c(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&D(e)})}},D=function(e){v.call(u,function(){var t,n,r,i=e._v,o=R(e);if(o&&(t=_(function(){C?E.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=C||R(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},L=function(e){v.call(u,function(){var t;C?E.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},F=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw S("Promise can't be resolved itself");(t=I(e))?m(function(){var r={_w:n,_d:!1};try{t.call(e,c(F,r,1),c(N,r,1))}catch(e){N.call(r,e)}}):(n._v=e,n._s=1,j(n,!1))}catch(e){N.call({_w:n,_d:!1},e)}}};M||(x=function(e){p(this,x,"Promise","_h"),h(e),r.call(this);try{e(c(F,this,1),c(N,this,1))}catch(e){N.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(48)(x.prototype,{then:function(e,t){var n=P(y(this,x));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=C?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(F,e,1),this.reject=c(N,e,1)},b.f=P=function(e){return e===x||e===a?new o(e):i(e)}),d(d.G+d.W+d.F*!M,{Promise:x}),n(43)(x,"Promise"),n(46)("Promise"),a=n(7).Promise,d(d.S+d.F*!M,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!M),"Promise",{resolve:function(e){return T(s&&this===a?x:this,e)}}),d(d.S+d.F*!(M&&n(62)(function(e){x.all(e).catch(O)})),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,a=1;g(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=_(function(){g(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(20);e.exports.f=function(e){return new r(e)}},function(e,t,n){var r=n(3),i=n(4),o=n(127);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(9).f,i=n(36),o=n(48),a=n(19),s=n(47),u=n(66),c=n(84),l=n(123),d=n(46),f=n(8),h=n(29).fastKey,p=n(40),g=f?"_s":"size",y=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=p(this,t),r=y(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[g]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!y(p(this,t),e)}}),f&&r(l.prototype,"size",{get:function(){return p(this,t)[g]}}),l},def:function(e,t,n){var r,i,o=y(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[g]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var r=n(48),i=n(29).getWeak,o=n(3),a=n(4),s=n(47),u=n(66),c=n(24),l=n(14),d=n(40),f=c(5),h=c(6),p=0,g=function(e){return e._l||(e._l=new y)},y=function(){this.a=[]},v=function(e,t){return f(e.a,function(e){return e[0]===t})};y.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var c=e(function(e,r){s(e,c,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=r&&u(r,n,e[o],e)});return r(c.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?g(d(this,t)).delete(e):n&&l(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?g(d(this,t)).has(e):n&&l(n,this._i)}}),c},def:function(e,t,n){var r=i(o(t),!0);return!0===r?g(e).set(t,n):r[e._i]=n,e},ufstore:g}},function(e,t,n){var r=n(21),i=n(6);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(37),i=n(60),o=n(3),a=n(1).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(6),i=n(80),o=n(26);e.exports=function(e,t,n,a){var s=String(o(e)),u=s.length,c=void 0===n?" ":String(n),l=r(t);if(l<=u||""==c)return s;var d=l-u,f=i.call(c,Math.ceil(d/c.length));return f.length>d&&(f=f.slice(0,d)),a?f+s:s+f}},function(e,t,n){var r=n(8),i=n(34),o=n(16),a=n(52).f;e.exports=function(e){return function(t){for(var n,s=o(t),u=i(s),c=u.length,l=0,d=[];c>l;)n=u[l++],r&&!a.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(138),s=r(a),u=n(56),c=r(u),l=n(100),d=r(l),f=n(101),h=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:OTV.conax;i(this,e),n.system=t,this.logger=new c.default(r,t),this.token=void 0,this.videoDecryption=null,this.conaxApi=o,this.drmOptions=n}return o(e,[{key:"initialise",value:function(){this._getFpId(),this._addFpDevice(),this._getFpToken(),this.certificateRequester=new s.default(this.drmOptions,this.logger),this.certificateRequester.requestCertificate();var e={drmOptions:this.drmOptions,logger:this.logger};this.licenceRequester=this._makeLicenceRequester(e),this.licenceRequester.setToken(this.token);var t={drmOptions:this.drmOptions,certificateRequester:this.certificateRequester,logger:this.logger,licenceRequester:this.licenceRequester};this.videoDecryption=this._makeVideoDecryptionHandler(t)}},{key:"setVideoElement",value:function(e){this.videoDecryption.setVideoElement(e)}},{key:"tearDown",value:function(){this.videoDecryption.tearDown()}},{key:"_getFpToken",value:function(){var e=this.conaxApi.getOperator(),t=this.conaxApi.getOttAccount(),n={};"upfronttoken"===this.drmOptions.mode?this.token=this.drmOptions.token:(n=this.conaxApi.getToken(this.drmOptions.portalURL+"/authtoken/"+e,t,this.cxDeviceID))&&(this.token='{"Version":"1.0.0","CxAuthenticationDataToken":"'+n+'","CxClientInfo":{"DeviceType":"Browser","DrmClientType":"FairPlay-HTML5","DrmClientVersion":"1.0.0","CxDeviceId":"'+this.cxDeviceID+'"}}')}},{key:"_addFpDevice",value:function(){var e=this.conaxApi.getOperator(),t=this.conaxApi.getOttAccount();this.conaxApi.addDevice(this.drmOptions.portalURL+"/ottAccount/device/"+e,t,this.cxDeviceID,"BrowserFP","FP Browser")}},{key:"_getFpId",value:function(){this.cxDeviceID=this.conaxApi.getOrCreateCxDeviceId("FairPlay")}},{key:"_resetFpId",value:function(){this.conaxApi.resetCxDeviceId("FairPlay"),this._getFpId()}},{key:"setSourceToken",value:function(e){this.token=e,this.licenceRequester.setToken(e)}},{key:"_makeLicenceRequester",value:function(e){return new d.default(e)}},{key:"_makeVideoDecryptionHandler",value:function(e){return(0,f.makeDecryptionInterface)(e)}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),s=function(){function e(t,n){i(this,e),this.certificate={},this.certificatesURL=t.certificatesURL,this.logger=n,this.certErrorHandler=t.certErrorHandler,this.certificatesURL||this.logger.addType().message(" FairPlay certificatesURL not configured!").warn()}return o(e,[{key:"requestCertificate",value:function(){var e=this;this.certificatePromise=new Promise(function(t,n){e.logger.message("Request FairPlay server certificate from ").addType().log(),e._logProvisionRequestStatTimelineEvent(e.certificatesURL);var r=new XMLHttpRequest;r.responseType="arraybuffer",r.addEventListener("load",function(n){return e.onCertificateLoaded(n,t)},!1),r.addEventListener("error",function(){return e.onCertificateError(n)},!1),r.addEventListener("timeout",function(){return e.onCertificateTimeout(n)},!1),r.open("GET",e.certificatesURL,!0),r.timeout=2e3,r.send()})}},{key:"getCertificate",value:function(){return this.certificatePromise}},{key:"onCertificateTimeout",value:function(e){this.certErrorHandler&&this.certErrorHandler("Timeout during retrieval of certificate from "+this.certificatesURL),e("timeout")}},{key:"onCertificateLoaded",value:function(e,t){this.logger.message("Retrieved the server certificate from ").addType().log();var n=e.target;this.certificate.array=new Uint8Array(n.response),this._logProvisionRequestStatSuccessTimelineEvent(this.certificatesURL),t(this.certificate.array)}},{key:"onCertificateError",value:function(e){this.certErrorHandler&&this.certErrorHandler("Failure during retrieval of certificate from "+this.certificatesURL),this.logger.message("Failed to retrieve the server certificate from ").addType().error(),this._logProvisionRequestStatFailureTimelineEvent(this.certificatesURL,this.certErrorHandler?this.certErrorHandler.error:void 0),e("error")}},{key:"_logProvisionRequestStatTimelineEvent",value:function(e){this._logTimelineEvent(a.OtvEventCommandLicenseRequest.provisionRequestStart,e)}},{key:"_logProvisionRequestStatSuccessTimelineEvent",value:function(e){this._logTimelineEvent(a.OtvEventCommandLicenseRequest.provisionRequestSuccessful,e)}},{key:"_logProvisionRequestStatFailureTimelineEvent",value:function(e,t){this._logTimelineEvent(a.OtvEventCommandLicenseRequest.provisionRequestFailed,e,t)}},{key:"_logTimelineEvent",value:function(e,t,n){var i="";if(n){var o;i=JSON.stringify((o={},r(o,a.OtvEventExtraKey.url,t),r(o,a.OtvEventExtraKey.error,n),o))}else i=JSON.stringify(r({},a.OtvEventExtraKey.url,t));OTV.eventTimeline.addToTimeline(a.OtvEventType.licenseRequest,e,i)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return new(c[e]||u)(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return o(e,[{key:"setRequestHeaders",value:function(e,t,n){var r="upfronttoken"===n?"PreAuthorization":"Conax-Custom-Data";e.setRequestHeader(r,t)}}]),e}(),s=function(){function e(){r(this,e)}return o(e,[{key:"setRequestHeaders",value:function(e,t){e.setRequestHeader("Accept","application/json"),e.setRequestHeader("nv-authorizations",t)}}]),e}(),u=function e(t){throw r(this,e),new Error("Invalid security type: "+t+" defined")},c={"nagra-conax-upfront-fps":a,"nagra-conax-fps":a,"nagra-ssp-fps":s,"nagra-ssp-tvkey":s,"nagra-ssp":s};t.default={getDrmImplementation:i}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return e+"/"+t+"/wvls/contentlicenseservice/v1/certificates"}function o(){}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(30),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=o;c.warn=o;var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{config:{}},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;r(this,e),this.drmDetails=t,this.log=n,this.updateDetailsWithCertificate(t)}return a(e,[{key:"updateDetailsWithCertificate",value:function(e){var t=this;if(!e.config.widevineServerCertificate&&e.config.licenceServer&&e.config.tenantId){this.log("VMP certificate unknown, so looking for it");var n=this;this.certUrl=i(e.config.licenceServer,e.config.tenantId),this.certificatePromise=new Promise(function(e,r){t.xhr=new XMLHttpRequest,t.xhr.open("GET",t.certUrl,!0),t.xhr.responseType="arraybuffer",t.xhr.onload=t._onCertLoad.bind(t,e,r),t.xhr.onerror=function(){n.log.warn("Failed to acquire VMP certificate from "+t.certUrl),r()},t.xhr.send()})}}},{key:"waitCertificate",value:function(){return this.certificatePromise||Promise.reject()}},{key:"_onCertLoad",value:function(e,t){if(this.log("_onCertLoad"),200===this.xhr.status){this.log("HTTP_OK");var n=btoa(u.default.arrayBufferToString(this.xhr.response));this.log("Acquired VMP certificate: "+n),this.drmDetails.config.widevineServerCertificate=n,e()}else this.log.warn("Error acquiring VMP certificate from "+this.certUrl+".  Status: "+this.xhr.status),t()}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(142),l=r(c),d=n(41),f=r(d),h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.sspFairPlay=r._makeFairPlaySystem(e.system,e.config,n),r.sspFairPlay.initialise(),r}return a(t,e),s(t,[{key:"ready",value:function(e){this.sspFairPlay.setVideoElement(e)}},{key:"tearDown",value:function(){this.sspFairPlay.tearDown()}},{key:"updateSourceData",value:function(e){return e&&e.token&&this.sspFairPlay.setSourceToken(e.token),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}},{key:"_makeFairPlaySystem",value:function(e,t,n){return new l.default.SSPFairPlaySystem(e,t,n)}}]),t}(f.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(138),s=r(a),u=n(56),c=r(u),l=n(100),d=r(l),f=n(101),h=n(70),p=r(h),g=function(){function e(t,n,r){i(this,e),n.system=t,this.logger=new c.default(r,t),this.token=void 0,n.certificatesURL=p.default.buildUrlWith(n.licenceServer,n.tenantId,"FairPlay","Cert"),n.licenceServer=p.default.buildUrlWith(n.licenceServer,n.tenantId,"FairPlay","License"),this.drmOptions=n}return o(e,[{key:"initialise",value:function(){this.certificateRequester=this._makeCertificateRequester(this.drmOptions),this.certificateRequester.requestCertificate();var e={drmOptions:this.drmOptions,logger:this.logger};this.licenceRequester=this._makeLicenceRequester(e);var t={drmOptions:this.drmOptions,certificateRequester:this.certificateRequester,logger:this.logger,licenceRequester:this.licenceRequester};this.videoDecryption=this._makeVideoDecryptionHandler(t)}},{key:"setVideoElement",value:function(e){this.videoDecryption.setVideoElement(e)}},{key:"setSourceToken",value:function(e){this.token=e,this.licenceRequester.setToken(e)}},{key:"tearDown",value:function(){this.videoDecryption.tearDown()}},{key:"_makeLicenceRequester",value:function(e){return new d.default(e)}},{key:"_makeVideoDecryptionHandler",value:function(e){return(0,f.makeDecryptionInterface)(e)}},{key:"_makeCertificateRequester",value:function(e){return new s.default(e,this.logger)}}]),e}();t.default={SSPFairPlaySystem:g}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(30),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){r(this,e),this.serverResponse=t,this.customData={},this.proactive=!1,this.licence="",this._parse()}return i(e,[{key:"_parse",value:function(){var e=a.default.arrayBufferToString(this.serverResponse),t=new window.DOMParser,n=t.parseFromString(e,"text/xml"),r=this.licence=n.getElementsByTagName("License")[0];if(void 0!==r&&(this.licence=r.childNodes[0].nodeValue),this.customDataXML=n.getElementsByTagName("CustomData")[0],void 0!==this.customDataXML){try{this.customData=JSON.parse(this.customDataXML.childNodes[0].nodeValue)}catch(e){this.customData={}}this.customData&&this.customData.sessionToken&&(this.proactive=!0)}}}]),e}();t.default={PlayReadyServerResponseParser:s}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(368),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t,n,i){r(this,e),this.ssmUri=t,this.log=n,this.renewalCallback=i||this._defaultRenewalCallback.bind(this),this.ssmInterface=new a.default.SsmInterface(this.ssmUri+"/sessions",n),this.renewalInterval=0,this.sessionToken=null,this.teardownPromise=Promise.resolve()}return i(e,[{key:"setup",value:function(e){var t=this;return new Promise(function(n,r){t.teardown().catch(function(){return null}),t.teardownPromise.finally(function(){t.ssmInterface.doSetup(e).then(function(e){t.sessionToken=e.sessionToken,t.renewalInterval=setInterval(t.renewalCallback,1e3*e.heartbeatPeriod),n(t.sessionToken)}).catch(function(e){return r(e)})})})}},{key:"teardown",value:function(){var e=this;return new Promise(function(t,n){e.renewalInterval&&(clearInterval(e.renewalInterval),e.renewalInterval=0),e.sessionToken?(e.teardownPromise=e.ssmInterface.tearDown(e.sessionToken).then(function(){return t()}).catch(function(t){e.teardownPromise=Promise.resolve(),n(t)}),e.sessionToken=null):t()})}},{key:"heartbeat",value:function(){var e=this;return new Promise(function(t,n){e.ssmInterface.heartbeat(e.sessionToken).then(function(n){e.sessionToken=n,t(n)}).catch(function(e){return n(e)})})}},{key:"updateSessionToken",value:function(e){this.sessionToken=e}},{key:"_defaultRenewalCallback",value:function(){var e=this;this.heartbeat().catch(function(t){e.log.warn("Default heartbeat failed: "+t)})}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(49),l=n(11),d=n(57),f={drm:{servers:{"com.microsoft.playready":"http:callback-uri","com.widevine.alpha":"http:callback-uri","com.tvkey.drm":"http:callback-uri"}}},h=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return a.requestFilterHandle=a._shakaRequestFilter.bind(a),a.responseFilterHandle=a._shakaResponseFilter.bind(a),a}return a(t,e),s(t,[{key:"ready",value:function(e){this.vjsPlayer.tech_.shaka_&&(this.drmDetails.config.multiSession||this._configureSingleSession(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this,e))}},{key:"renewLicence",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renewLicence",this).call(this),this.timeline.setRenewal()}},{key:"_configureDrm",value:function(){this.vjsPlayer.otvtoolkit().techConfig.configure(d.CONFIG_TYPE_OTV,f);var e=this.vjsPlayer.tech_.shaka_,t=e.getNetworkingEngine();t.unregisterRequestFilter(this.requestFilterHandle),t.unregisterResponseFilter(this.responseFilterHandle),t.registerRequestFilter(this.requestFilterHandle),t.registerResponseFilter(this.responseFilterHandle)}},{key:"_getHttpCallback",value:function(){return this.drmDetails.config.requestLicenceCallback}},{key:"_makeTimelineLogger",value:function(e){return new p(e)}},{key:"_shakaRequestFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE){var n=this.vjsPlayer.tech_.shaka_;if(t.xSourceObject=this.source,t.xKeySystem=n.keySystem(),t.xCallback=this._getHttpCallback(),"com.tvkey.drm"===n.keySystem()){var r=shaka.util.StringUtils,i=JSON.parse(r.fromUTF8(t.body)),o={OttLicenseRequestMessage:i},a=JSON.stringify(o);this.log("tvkey license request payload: "+a),t.body=r.toUTF8(a)}}}},{key:"_shakaResponseFilter",value:function(e,t){var n=this.vjsPlayer.tech_.shaka_;if(e===shaka.net.NetworkingEngine.RequestType.LICENSE&&"com.tvkey.drm"===n.keySystem()){var r=shaka.util.StringUtils.fromUTF8(t.data);this.log("tvkey license reponse payload: "+r)}}}]),t}(c.DrmDashController);t.default=h;var p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.token="",n.renewal=!1,n}return a(t,e),s(t,[{key:"tearDown",value:function(){this.renewal=!1,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this)}},{key:"setSource",value:function(e){this.token=e.token||"",u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setSource",this).call(this,e)}},{key:"setRenewal",value:function(){this.renewal=!0}},{key:"_shakaRequestFilter",value:function(e,n){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if("license-renewal"===n.licenseRequestType||this.renewal){this.renewal=!0,this.provision=!1;var i=JSON.stringify(r({},l.OtvEventExtraKey.contentToken,this.token)),o=l.OtvEventType.sessionManagement,a=l.OtvEventCommandSessionManagement.renewalStart;OTV.eventTimeline.addToTimeline(o,a,i)}else this.renewal=!1,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_shakaRequestFilter",this).call(this,e,n)}},{key:"_shakaResponseFilter",value:function(e,n){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if(this.renewal){var i=void 0,o=r({},l.OtvEventExtraKey.contentToken,this.token);i=l.OtvEventCommandSessionManagement.renewalSuccessful;var a=l.OtvEventType.sessionManagement,s=JSON.stringify(o);OTV.eventTimeline.addToTimeline(a,i,s)}else u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_shakaResponseFilter",this).call(this,e,n)}},{key:"_onErrorEvent",value:function(e){if(6007===e.detail.code)if(this.renewal){var n=void 0,i=r({},l.OtvEventExtraKey.contentToken,this.token);i[l.OtvEventExtraKey.error]=e.detail.message,n=l.OtvEventCommandSessionManagement.renewalFailure;var o=l.OtvEventType.sessionManagement,a=JSON.stringify(i);OTV.eventTimeline.addToTimeline(o,n,a)}else u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onErrorEvent",this).call(this,e)}}]),t}(c.DrmDashTimeline)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(41),l=r(c),d=n(56),f=r(d),h=n(101),p=n(147),g=r(p),y=n(371),v=r(y),m="com.apple.fps.1_0",b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.config=e.config,r.logger=new f.default(n,e.system),r.licenceRequester=r._makeLicenceRequester(r.config.requestLicenceCallback,m),r.certificateRequester=r._makeCertificateRequester(r.config.fairplayServerCertificate);var a={drmOptions:r.config,certificateRequester:r.certificateRequester,logger:r.logger,licenceRequester:r.licenceRequester};return r.videoDecryption=r._makeVideoDecryptionHandler(a),r}return a(t,e),s(t,[{key:"ready",value:function(e){this.videoDecryption.setVideoElement(e)}},{key:"tearDown",value:function(){this.videoDecryption.tearDown()}},{key:"updateSourceData",value:function(e){return this.src=e,this.licenceRequester.setSource(e),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}},{key:"renewLicence",value:function(){this.videoDecryption.renewLicence()}},{key:"_makeLicenceRequester",value:function(e,t){return new g.default(e,t)}},{key:"_makeCertificateRequester",value:function(e){return new v.default(e)}},{key:"_makeVideoDecryptionHandler",value:function(e){return(0,h.makeDecryptionInterface)(e)}}]),t}(l.default);t.default=b},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),s=function(){function e(t,n){i(this,e),this.callback=t,this.keysystem=n,this.source=void 0}return o(e,[{key:"setSource",value:function(e){this.source=e}},{key:"request",value:function(e,t){var n=this;return new Promise(function(r,i){n._logKeyRequestStatTimelineEvent(t),n.callback(n.keysystem,n.source,e,t).then(function(e){n._logKeyStatSuccessTimelineEvent(t),r(e)}).catch(function(e){n._logKeyRequestStatFailureTimelineEvent(e,t),i(e)})})}},{key:"_logKeyRequestStatTimelineEvent",value:function(e){var t=void 0,n=void 0;"license-renewal"===e?(t=a.OtvEventType.sessionManagement,n=a.OtvEventCommandSessionManagement.renewalStart):(t=a.OtvEventType.licenseRequest,n=a.OtvEventCommandLicenseRequest.keyRequestStart),OTV.eventTimeline.addToTimeline(t,n)}},{key:"_logKeyStatSuccessTimelineEvent",value:function(e){var t=void 0,n=void 0;"license-renewal"===e?(t=a.OtvEventType.sessionManagement,n=a.OtvEventCommandSessionManagement.renewalSuccessful):(t=a.OtvEventType.licenseRequest,n=a.OtvEventCommandLicenseRequest.keyRequestSuccessful),OTV.eventTimeline.addToTimeline(t,n)}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e,t){var n=void 0,i=void 0;"license-renewal"===t?(n=a.OtvEventType.sessionManagement,i=a.OtvEventCommandSessionManagement.renewalFailure):(n=a.OtvEventType.licenseRequest,i=a.OtvEventCommandLicenseRequest.keyRequestFailed);var o=JSON.stringify(r({},a.OtvEventExtraKey.error,e));OTV.eventTimeline.addToTimeline(n,i,o)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(102),c=n(30),l=r(c),d=n(377),f=r(d),h=[{initDataTypes:["keyids","cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.640028"'}]}],p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mediaKeySession=null,n}return a(t,e),s(t,[{key:"renewLicence",value:function(){this.logger.addType().message(" Renew licence is not supported.").warn()}},{key:"tearDown",value:function(){if(this.mediaKeySession){var e=this;this.mediaKeySession.close().finally(function(){e.mediaKeySession=null,e.videoElement.setMediaKeys(null),e._setEncryptedListener(e.videoElement,e.onVideoEncryptedHandle)})}}},{key:"_setEncryptedListener",value:function(e,t){e.addEventListener("encrypted",t,!1)}},{key:"_removeEncryptedListener",value:function(e,t){e.removeEventListener("encrypted",t,!1)}},{key:"_supportKeySystem",value:function(){var e=Boolean(navigator.requestMediaKeySystemAccess);return e||this.logger.addType().message(" TVKey System not supported by browser.").log(),e}},{key:"_onVideoEncrypted",value:function(e){this.logger.message("Function: _onVideoEncrypted for ").addType().log();var t=e.initDataType,n=e.initData,r=this;if(!this._isPrmPsshInitData(n))return void this.logger.message("This is not a PRM init data. Skip").log();this._removeEncryptedListener(this.videoElement,this.onVideoEncryptedHandle),navigator.requestMediaKeySystemAccess("com.tvkey.drm",h).then(function(e){r.logger.message("Access to mediakeysystem granted").log(),e.createMediaKeys().then(function(e){r.logger.message("Keys created").log(),r.videoElement.setMediaKeys(e),r.mediaKeySession=e.createSession(),r.logger.message("MediaKey session Created.").log(),r._configureSessionListeners(r.mediaKeySession),r.logger.message("Generating MediaKey session request").log(),r.mediaKeySession.generateRequest(t,n).catch(function(e){var t=e.errorCode,n=e.message,i=t.systemCode;r.logger.message("Error: "+n+", system: "+i+"\n"+JSON.stringify(e)).error()})})})}},{key:"_isPrmPsshInitData",value:function(e){var t=new Uint8Array(e);this.logger.message("init Data length : "+t.length).log(),this.logger.message("init Data (base64) : "+l.default.toBase64(e)).log();var n=new f.default(t);return!(!n.systemId||(this.logger.message("Pssh system id: "+n.systemId).log(),"adb41c242dbf4a6d958b4457c0d27b95"!==n.systemId))}},{key:"_configureSessionListeners",value:function(e){var t=this;e.addEventListener("message",function(e){t.logger.message("MediaKey message received.  Requesting licence").log(),t.licenceRequester.request(e.message,e.messageType).then(function(n){t.logger.message("Licence Key received").log(),e.target.update(n).catch(function(e){t.logger.message("Error: "+e.message).error()})}).catch(function(e){var t="Failed to retrieve licence.  Error: "+e;throw new Error(t)})},!1)}}]),t}(u.DecryptionInterface);t.default=p},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){g&&h&&(g=!1,h.length?p=h.concat(p):y=-1,p.length&&s())}function s(){if(!g){var e=i(a);g=!0;for(var t=p.length;t;){for(h=p,p=[];++y<t;)h&&h[y].run();y=-1,t=p.length}h=null,g=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,d,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,p=[],g=!1,y=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||g||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.preference=t,this.sourcePreference=void 0}return i(e,[{key:"getPreference",value:function(){return this.sourcePreference||this.preference}},{key:"setPreference",value:function(e){this.preference=e}},{key:"setSourcePreference",value:function(e){this.sourcePreference=e}}]),e}(),a=new o;t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.videojs=t,this.onErrorHandle=this._onErrorEvent.bind(this)}return i(e,[{key:"dispose",value:function(){var e=this._getPlayerInstance();e&&this._removePlayerListeners(e),this.videojs=void 0}},{key:"setErrorListener",value:function(e){this.listener=e}},{key:"ready",value:function(){var e=this._getPlayerInstance();e&&(this._removePlayerListeners(e),this._setupPlayerListeners(e))}},{key:"_setupPlayerListeners",value:function(e){e.addEventListener("error",this.onErrorHandle)}},{key:"_removePlayerListeners",value:function(e){e.removeEventListener("error",this.onErrorHandle)}},{key:"_getPlayerInstance",value:function(){}},{key:"_onErrorEvent",value:function(e){this.listener&&this.listener.errorChanged&&this.listener.errorChanged(e.detail.severity,e.detail.category,e.detail.code,e.detail.message)}}]),e}();t.default={ErrorReporting:o}},function(e,t,n){n(153),n(339),e.exports=n(340)},function(e,t,n){"use strict";n(154);var r=function(e){return e&&e.__esModule?e:{default:e}}(n(326));r.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),r.default._babelPolyfill=!0},function(e,t,n){"use strict";n(155),n(298),n(300),n(303),n(305),n(307),n(309),n(311),n(313),n(315),n(317),n(319),n(321),n(325)},function(e,t,n){n(156),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(237),n(238),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(92),n(261),n(124),n(262),n(125),n(263),n(264),n(265),n(266),n(126),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),e.exports=n(7)},function(e,t,n){"use strict";var r=n(1),i=n(14),o=n(8),a=n(0),s=n(12),u=n(29).KEY,c=n(2),l=n(58),d=n(43),f=n(32),h=n(5),p=n(73),g=n(105),y=n(158),v=n(61),m=n(3),b=n(4),_=n(10),w=n(16),T=n(28),S=n(31),E=n(36),k=n(108),A=n(22),x=n(60),C=n(9),O=n(34),P=A.f,M=C.f,I=k.f,j=r.Symbol,D=r.JSON,R=D&&D.stringify,L=h("_hidden"),N=h("toPrimitive"),F={}.propertyIsEnumerable,U=l("symbol-registry"),B=l("symbols"),V=l("op-symbols"),H=Object.prototype,W="function"==typeof j&&!!x.f,K=r.QObject,q=!K||!K.prototype||!K.prototype.findChild,G=o&&c(function(){return 7!=E(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=P(H,t);r&&delete H[t],M(e,t,n),r&&e!==H&&M(H,t,r)}:M,z=function(e){var t=B[e]=E(j.prototype);return t._k=e,t},Y=W&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},X=function(e,t,n){return e===H&&X(V,t,n),m(e),t=T(t,!0),m(n),i(B,t)?(n.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),n=E(n,{enumerable:S(0,!1)})):(i(e,L)||M(e,L,S(1,{})),e[L][t]=!0),G(e,t,n)):M(e,t,n)},J=function(e,t){m(e);for(var n,r=y(t=w(t)),i=0,o=r.length;o>i;)X(e,n=r[i++],t[n]);return e},$=function(e,t){return void 0===t?E(e):J(E(e),t)},Q=function(e){var t=F.call(this,e=T(e,!0));return!(this===H&&i(B,e)&&!i(V,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,L)&&this[L][e])||t)},Z=function(e,t){if(e=w(e),t=T(t,!0),e!==H||!i(B,t)||i(V,t)){var n=P(e,t);return!n||!i(B,t)||i(e,L)&&e[L][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=I(w(e)),r=[],o=0;n.length>o;)i(B,t=n[o++])||t==L||t==u||r.push(t);return r},te=function(e){for(var t,n=e===H,r=I(n?V:w(e)),o=[],a=0;r.length>a;)!i(B,t=r[a++])||n&&!i(H,t)||o.push(B[t]);return o};W||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(V,n),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),G(this,e,S(1,n))};return o&&q&&G(H,e,{configurable:!0,set:t}),z(e)},s(j.prototype,"toString",function(){return this._k}),A.f=Z,C.f=X,n(37).f=k.f=ee,n(52).f=Q,x.f=te,o&&!n(33)&&s(H,"propertyIsEnumerable",Q,!0),p.f=function(e){return z(h(e))}),a(a.G+a.W+a.F*!W,{Symbol:j});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)h(ne[re++]);for(var ie=O(h.store),oe=0;ie.length>oe;)g(ie[oe++]);a(a.S+a.F*!W,"Symbol",{for:function(e){return i(U,e+="")?U[e]:U[e]=j(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!W,"Object",{create:$,defineProperty:X,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=c(function(){x.f(1)});a(a.S+a.F*ae,"Object",{getOwnPropertySymbols:function(e){return x.f(_(e))}}),D&&a(a.S+a.F*(!W||c(function(){var e=j();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!Y(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,R.apply(D,r)}}),j.prototype[N]||n(15)(j.prototype,N,j.prototype.valueOf),d(j,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){e.exports=n(58)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(34),i=n(60),o=n(52);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(36)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperty:n(9).f})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperties:n(107)})},function(e,t,n){var r=n(16),i=n(22).f;n(23)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){var r=n(10),i=n(38);n(23)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(10),i=n(34);n(23)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){n(23)("getOwnPropertyNames",function(){return n(108).f})},function(e,t,n){var r=n(4),i=n(29).onFreeze;n(23)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(4),i=n(29).onFreeze;n(23)("seal",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(4),i=n(29).onFreeze;n(23)("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(4);n(23)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(4);n(23)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(4);n(23)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(109)})},function(e,t,n){var r=n(0);r(r.S,"Object",{is:n(110)})},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(77).set})},function(e,t,n){"use strict";var r=n(53),i={};i[n(5)("toStringTag")]="z",i+""!="[object z]"&&n(12)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(111)})},function(e,t,n){var r=n(9).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(8)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(4),i=n(38),o=n(5)("hasInstance"),a=Function.prototype;o in a||n(9).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(0),i=n(113);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(0),i=n(114);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(1),i=n(14),o=n(25),a=n(79),s=n(28),u=n(2),c=n(37).f,l=n(22).f,d=n(9).f,f=n(44).trim,h=r.Number,p=h,g=h.prototype,y="Number"==o(n(36)(g)),v="trim"in String.prototype,m=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():f(t,3);var n,r,i,o=t.charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,u=t.slice(2),c=0,l=u.length;c<l;c++)if((a=u.charCodeAt(c))<48||a>i)return NaN;return parseInt(u,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(y?u(function(){g.valueOf.call(n)}):"Number"!=o(n))?a(new p(m(t)),n,h):m(t)};for(var b,_=n(8)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;_.length>w;w++)i(p,b=_[w])&&!i(h,b)&&d(h,b,l(p,b));h.prototype=g,g.constructor=h,n(12)(r,"Number",h)}},function(e,t,n){"use strict";var r=n(0),i=n(21),o=n(115),a=n(80),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",d=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*c[n],c[n]=r%1e7,r=u(r/1e7)},f=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=u(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},p=function(e,t,n){return 0===t?n:t%2==1?p(e,t-1,n*e):p(e*e,t/2,n)},g=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(2)(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,r,s,u=o(this,l),c=i(e),y="",v="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(y="-",u=-u),u>1e-21)if(t=g(u*p(2,69,1))-69,n=t<0?u*p(2,-t,1):u/p(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),r=c;r>=7;)d(1e7,0),r-=7;for(d(p(10,r,1),0),r=t-1;r>=23;)f(1<<23),r-=23;f(1<<r),d(1,1),f(2),v=h()}else d(0,n),d(1<<-t,0),v=h()+a.call("0",c);return c>0?(s=v.length,v=y+(s<=c?"0."+a.call("0",c-s)+v:v.slice(0,s-c)+"."+v.slice(s-c))):v=y+v,v}})},function(e,t,n){"use strict";var r=n(0),i=n(2),o=n(115),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(0),i=n(1).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isInteger:n(116)})},function(e,t,n){var r=n(0);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(0),i=n(116),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(0),i=n(114);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(0),i=n(113);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(0),i=n(117),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=n(0),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(e,t,n){var r=n(0),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(0),i=n(81);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(0),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(0),i=n(82);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(0);r(r.S,"Math",{fround:n(201)})},function(e,t,n){var r=n(81),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126),c=function(e){return e+1/o-1/o};e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),l=r(e);return i<u?l*c(i/u/a)*u*a:(t=(1+a/o)*i,n=t-(t-i),n>s||n!=n?l*(1/0):l*n)}},function(e,t,n){var r=n(0),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)n=i(arguments[a++]),u<n?(r=u/n,o=o*r*r+1,u=n):n>0?(r=n/u,o+=r*r):o+=n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(e,t,n){var r=n(0),i=Math.imul;r(r.S+r.F*n(2)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log1p:n(117)})},function(e,t,n){var r=n(0);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(0);r(r.S,"Math",{sign:n(81)})},function(e,t,n){var r=n(0),i=n(82),o=Math.exp;r(r.S+r.F*n(2)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(0),i=n(82),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(0),i=n(35),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(0),i=n(16),o=n(6);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(44)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var r=n(83)(!0);n(84)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(0),i=n(83)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(85),a="".endsWith;r(r.P+r.F*n(87)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),u=String(e);return a?a.call(t,u,s):t.slice(s-u.length,s)===u}})},function(e,t,n){"use strict";var r=n(0),i=n(85);r(r.P+r.F*n(87)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(0);r(r.P,"String",{repeat:n(80)})},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(85),a="".startsWith;r(r.P+r.F*n(87)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(13)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){"use strict";n(13)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(13)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(13)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(13)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(13)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(13)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(13)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(13)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(13)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(13)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(13)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(13)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n(28);r(r.P+r.F*n(2)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(0),i=n(236);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(2),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(12)(r,"toString",function(){var e=o.call(this);return e===e?i.call(this):"Invalid Date"})},function(e,t,n){var r=n(5)("toPrimitive"),i=Date.prototype;r in i||n(15)(i,r,n(239))},function(e,t,n){"use strict";var r=n(3),i=n(28);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(61)})},function(e,t,n){"use strict";var r=n(19),i=n(0),o=n(10),a=n(119),s=n(88),u=n(6),c=n(89),l=n(90);i(i.S+i.F*!n(62)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,d,f=o(e),h="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,y=void 0!==g,v=0,m=l(f);if(y&&(g=r(g,p>2?arguments[2]:void 0,2)),void 0==m||h==Array&&s(m))for(t=u(f.length),n=new h(t);t>v;v++)c(n,v,y?g(f[v],v):f[v]);else for(d=m.call(f),n=new h;!(i=d.next()).done;v++)c(n,v,y?a(d,g,[i.value,v],!0):i.value);return n.length=v,n}})},function(e,t,n){"use strict";var r=n(0),i=n(89);r(r.S+r.F*n(2)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(0),i=n(16),o=[].join;r(r.P+r.F*(n(51)!=Object||!n(17)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(0),i=n(76),o=n(25),a=n(35),s=n(6),u=[].slice;r(r.P+r.F*n(2)(function(){i&&u.call(i)}),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return u.call(this,e,t);for(var i=a(e,n),c=a(t,n),l=s(c-i),d=new Array(l),f=0;f<l;f++)d[f]="String"==r?this.charAt(i+f):this[i+f];return d}})},function(e,t,n){"use strict";var r=n(0),i=n(20),o=n(10),a=n(2),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n(17)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(0),i=n(24)(0),o=n(17)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(4),i=n(61),o=n(5)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(0),i=n(24)(1);r(r.P+r.F*!n(17)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(24)(2);r(r.P+r.F*!n(17)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(24)(3);r(r.P+r.F*!n(17)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(24)(4);r(r.P+r.F*!n(17)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(121);r(r.P+r.F*!n(17)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(0),i=n(121);r(r.P+r.F*!n(17)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(0),i=n(59)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(17)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(16),o=n(21),a=n(6),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(17)(s)),"Array",{lastIndexOf:function(e){if(u)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(0);r(r.P,"Array",{copyWithin:n(122)}),n(39)("copyWithin")},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(91)}),n(39)("fill")},function(e,t,n){"use strict";var r=n(0),i=n(24)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(39)("find")},function(e,t,n){"use strict";var r=n(0),i=n(24)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(39)(o)},function(e,t,n){n(46)("Array")},function(e,t,n){var r=n(1),i=n(79),o=n(9).f,a=n(37).f,s=n(86),u=n(63),c=r.RegExp,l=c,d=c.prototype,f=/a/g,h=/a/g,p=new c(f)!==f;if(n(8)&&(!p||n(2)(function(){return h[n(5)("match")]=!1,c(f)!=f||c(h)==h||"/a/i"!=c(f,"i")}))){c=function(e,t){var n=this instanceof c,r=s(e),o=void 0===t;return!n&&r&&e.constructor===c&&o?e:i(p?new l(r&&!o?e.source:e,t):l((r=e instanceof c)?e.source:e,r&&o?u.call(e):t),n?this:d,c)};for(var g=a(l),y=0;g.length>y;)!function(e){e in c||o(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})}(g[y++]);d.constructor=c,c.prototype=d,n(12)(r,"RegExp",c)}n(46)("RegExp")},function(e,t,n){"use strict";n(125);var r=n(3),i=n(63),o=n(8),a=/./.toString,s=function(e){n(12)(RegExp.prototype,"toString",e,!0)};n(2)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(e,t,n){"use strict";var r=n(3),i=n(6),o=n(94),a=n(64);n(65)("match",1,function(e,t,n,s){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var u=r(e),c=String(this);if(!u.global)return a(u,c);var l=u.unicode;u.lastIndex=0;for(var d,f=[],h=0;null!==(d=a(u,c));){var p=String(d[0]);f[h]=p,""===p&&(u.lastIndex=o(c,i(u.lastIndex),l)),h++}return 0===h?null:f}]})},function(e,t,n){"use strict";var r=n(3),i=n(10),o=n(6),a=n(21),s=n(94),u=n(64),c=Math.max,l=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,p=function(e){return void 0===e?e:String(e)};n(65)("replace",2,function(e,t,n,g){function y(e,t,r,o,a,s){var u=r+e.length,c=o.length,l=h;return void 0!==a&&(a=i(a),l=f),n.call(s,l,function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>c){var f=d(l/10);return 0===f?n:f<=c?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):n}s=o[l-1]}return void 0===s?"":s})}return[function(r,i){var o=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=g(n,e,this,t);if(i.done)return i.value;var d=r(e),f=String(this),h="function"==typeof t;h||(t=String(t));var v=d.global;if(v){var m=d.unicode;d.lastIndex=0}for(var b=[];;){var _=u(d,f);if(null===_)break;if(b.push(_),!v)break;""===String(_[0])&&(d.lastIndex=s(f,o(d.lastIndex),m))}for(var w="",T=0,S=0;S<b.length;S++){_=b[S];for(var E=String(_[0]),k=c(l(a(_.index),f.length),0),A=[],x=1;x<_.length;x++)A.push(p(_[x]));var C=_.groups;if(h){var O=[E].concat(A,k,f);void 0!==C&&O.push(C);var P=String(t.apply(void 0,O))}else P=y(E,f,k,A,C,t);k>=T&&(w+=f.slice(T,k)+P,T=k+E.length)}return w+f.slice(T)}]})},function(e,t,n){"use strict";var r=n(3),i=n(110),o=n(64);n(65)("search",1,function(e,t,n,a){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),u=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var l=o(s,u);return i(s.lastIndex,c)||(s.lastIndex=c),null===l?-1:l.index}]})},function(e,t,n){"use strict";var r=n(86),i=n(3),o=n(54),a=n(94),s=n(6),u=n(64),c=n(93),l=n(2),d=Math.min,f=[].push,h="length",p=!l(function(){RegExp(4294967295,"y")});n(65)("split",2,function(e,t,n,l){var g;return g="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[h]||2!="ab".split(/(?:ab)*/)[h]||4!=".".split(/(.?)(.?)/)[h]||".".split(/()()/)[h]>1||"".split(/.?/)[h]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,a,s,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=void 0===t?4294967295:t>>>0,g=new RegExp(e.source,l+"g");(o=c.call(g,i))&&!((a=g.lastIndex)>d&&(u.push(i.slice(d,o.index)),o[h]>1&&o.index<i[h]&&f.apply(u,o.slice(1)),s=o[0][h],d=a,u[h]>=p));)g.lastIndex===o.index&&g.lastIndex++;return d===i[h]?!s&&g.test("")||u.push(""):u.push(i.slice(d)),u[h]>p?u.slice(0,p):u}:"0".split(void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,r):g.call(String(i),n,r)},function(e,t){var r=l(g,e,this,t,g!==n);if(r.done)return r.value;var c=i(e),f=String(this),h=o(c,RegExp),y=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(p?"y":"g"),m=new h(p?c:"^(?:"+c.source+")",v),b=void 0===t?4294967295:t>>>0;if(0===b)return[];if(0===f.length)return null===u(m,f)?[f]:[];for(var _=0,w=0,T=[];w<f.length;){m.lastIndex=p?w:0;var S,E=u(m,p?f:f.slice(w));if(null===E||(S=d(s(m.lastIndex+(p?0:w)),f.length))===_)w=a(f,w,y);else{if(T.push(f.slice(_,w)),T.length===b)return T;for(var k=1;k<=E.length-1;k++)if(T.push(E[k]),T.length===b)return T;w=_=S}}return T.push(f.slice(_)),T}]})},function(e,t,n){var r=n(1),i=n(95).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(25)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var d=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var r=n(129),i=n(40);e.exports=n(68)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(129),i=n(40);e.exports=n(68)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(1),o=n(24)(0),a=n(12),s=n(29),u=n(109),c=n(130),l=n(4),d=n(40),f=n(40),h=!i.ActiveXObject&&"ActiveXObject"in i,p=s.getWeak,g=Object.isExtensible,y=c.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(e){if(l(e)){var t=p(e);return!0===t?y(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(d(this,"WeakMap"),e,t)}},b=e.exports=n(68)("WeakMap",v,m,c,!0,!0);f&&h&&(r=c.getConstructor(v,"WeakMap"),u(r.prototype,m),s.NEED=!0,o(["delete","has","get","set"],function(e){var t=b.prototype,n=t[e];a(t,e,function(t,i){if(l(t)&&!g(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)})}))},function(e,t,n){"use strict";var r=n(130),i=n(40);n(68)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(0),i=n(69),o=n(96),a=n(3),s=n(35),u=n(6),c=n(4),l=n(1).ArrayBuffer,d=n(54),f=o.ArrayBuffer,h=o.DataView,p=i.ABV&&l.isView,g=f.prototype.slice,y=i.VIEW;r(r.G+r.W+r.F*(l!==f),{ArrayBuffer:f}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||c(e)&&y in e}}),r(r.P+r.U+r.F*n(2)(function(){return!new f(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==g&&void 0===t)return g.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(d(this,f))(u(i-r)),c=new h(this),l=new h(o),p=0;r<i;)l.setUint8(p++,c.getUint8(r++));return o}}),n(46)("ArrayBuffer")},function(e,t,n){var r=n(0);r(r.G+r.W+r.F*!n(69).ABV,{DataView:n(96).DataView})},function(e,t,n){n(27)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(e,t,n){n(27)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){var r=n(0),i=n(20),o=n(3),a=(n(1).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(2)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var r=i(e),u=o(n);return a?a(r,t,u):s.call(r,t,u)}})},function(e,t,n){var r=n(0),i=n(36),o=n(20),a=n(3),s=n(4),u=n(2),c=n(111),l=(n(1).Reflect||{}).construct,d=u(function(){function e(){}return!(l(function(){},[],e)instanceof e)}),f=!u(function(){l(function(){})});r(r.S+r.F*(d||f),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(f&&!d)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var u=n.prototype,h=i(s(u)?u:Object.prototype),p=Function.apply.call(e,h,t);return s(p)?p:h}})},function(e,t,n){var r=n(9),i=n(0),o=n(3),a=n(28);i(i.S+i.F*n(2)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(0),i=n(22).f,o=n(3);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(0),i=n(3),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(118)(o,"Object",function(){var e,t=this,n=t._k;do{if(t._i>=n.length)return{value:void 0,done:!0}}while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){function r(e,t){var n,s,l=arguments.length<3?e:arguments[2];return c(e)===l?e[t]:(n=i.f(e,t))?a(n,"value")?n.value:void 0!==n.get?n.get.call(l):void 0:u(s=o(e))?r(s,t,l):void 0}var i=n(22),o=n(38),a=n(14),s=n(0),u=n(4),c=n(3);s(s.S,"Reflect",{get:r})},function(e,t,n){var r=n(22),i=n(0),o=n(3);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(0),i=n(38),o=n(3);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(0),i=n(3),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(132)})},function(e,t,n){var r=n(0),i=n(3),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){function r(e,t,n){var u,f,h=arguments.length<4?e:arguments[3],p=o.f(l(e),t);if(!p){if(d(f=a(e)))return r(f,t,n,h);p=c(0)}if(s(p,"value")){if(!1===p.writable||!d(h))return!1;if(u=o.f(h,t)){if(u.get||u.set||!1===u.writable)return!1;u.value=n,i.f(h,t,u)}else i.f(h,t,c(0,n));return!0}return void 0!==p.set&&(p.set.call(h,n),!0)}var i=n(9),o=n(22),a=n(38),s=n(14),u=n(0),c=n(31),l=n(3),d=n(4);u(u.S,"Reflect",{set:r})},function(e,t,n){var r=n(0),i=n(77);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){n(299),e.exports=n(7).Array.includes},function(e,t,n){"use strict";var r=n(0),i=n(59)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(39)("includes")},function(e,t,n){n(301),e.exports=n(7).Array.flatMap},function(e,t,n){"use strict";var r=n(0),i=n(302),o=n(10),a=n(6),s=n(20),u=n(120);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=u(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(39)("flatMap")},function(e,t,n){"use strict";function r(e,t,n,c,l,d,f,h){for(var p,g,y=l,v=0,m=!!f&&s(f,h,3);v<c;){if(v in n){if(p=m?m(n[v],v,t):n[v],g=!1,o(p)&&(g=p[u],g=void 0!==g?!!g:i(p)),g&&d>0)y=r(e,t,p,a(p.length),y,d-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=p}y++}v++}return y}var i=n(61),o=n(4),a=n(6),s=n(19),u=n(5)("isConcatSpreadable");e.exports=r},function(e,t,n){n(304),e.exports=n(7).String.padStart},function(e,t,n){"use strict";var r=n(0),i=n(133),o=n(67),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){n(306),e.exports=n(7).String.padEnd},function(e,t,n){"use strict";var r=n(0),i=n(133),o=n(67),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){n(308),e.exports=n(7).String.trimLeft},function(e,t,n){"use strict";n(44)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){n(310),e.exports=n(7).String.trimRight},function(e,t,n){"use strict";n(44)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){n(312),e.exports=n(73).f("asyncIterator")},function(e,t,n){n(105)("asyncIterator")},function(e,t,n){n(314),e.exports=n(7).Object.getOwnPropertyDescriptors},function(e,t,n){var r=n(0),i=n(132),o=n(16),a=n(22),s=n(89);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),u=a.f,c=i(r),l={},d=0;c.length>d;)void 0!==(n=u(r,t=c[d++]))&&s(l,t,n);return l}})},function(e,t,n){n(316),e.exports=n(7).Object.values},function(e,t,n){var r=n(0),i=n(134)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){n(318),e.exports=n(7).Object.entries},function(e,t,n){var r=n(0),i=n(134)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";n(126),n(320),e.exports=n(7).Promise.finally},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(1),a=n(54),s=n(128);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){n(322),n(323),n(324),e.exports=n(7)},function(e,t,n){var r=n(1),i=n(0),o=n(67),a=[].slice,s=/MSIE .\./.test(o),u=function(e){return function(t,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(e,t,n){var r=n(0),i=n(95);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var r=n(92),i=n(34),o=n(12),a=n(1),s=n(15),u=n(45),c=n(5),l=c("iterator"),d=c("toStringTag"),f=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),g=0;g<p.length;g++){var y,v=p[g],m=h[v],b=a[v],_=b&&b.prototype;if(_&&(_[l]||s(_,l,f),_[d]||s(_,d,v),u[v]=f,m))for(y in r)_[y]||o(_,y,r[y],!0)}},function(e,t,n){var r=function(e){"use strict";function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,r){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),s=new h(r||[]);return b(a,"_invoke",{value:c(e,n,s)}),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach(function(n){t(e,n,function(e){return this._invoke(n,e)})})}function u(e,t){function n(i,o,a,s){var u=r(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&m.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(l).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(u.arg)}function i(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return o=o?o.then(i,i):i()}var o;b(this,"_invoke",{value:i})}function c(e,t,n){var i=E;return function(o,a){if(i===A)throw new Error("Generator is already running");if(i===x){if("throw"===o)throw a;return g()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=l(s,n);if(u){if(u===C)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===E)throw i=x,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=A;var c=r(e,t,n);if("normal"===c.type){if(i=n.done?x:k,c.arg===C)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=x,n.method="throw",n.arg=c.arg)}}}function l(e,t){var n=t.method,i=e.iterator[n];if(i===y)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=y,l(e,t),"throw"===t.method)?C:("return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),C);var o=r(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,C;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=y),t.delegate=null,C):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,C)}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function p(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=y,t.done=!0,t};return r.next=r}}return{next:g}}function g(){return{value:y,done:!0}}var y,v=Object.prototype,m=v.hasOwnProperty,b=Object.defineProperty||function(e,t,n){e[t]=n.value},_="function"==typeof Symbol?Symbol:{},w=_.iterator||"@@iterator",T=_.asyncIterator||"@@asyncIterator",S=_.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,n){return e[t]=n}}e.wrap=n;var E="suspendedStart",k="suspendedYield",A="executing",x="completed",C={},O={};t(O,w,function(){return this});var P=Object.getPrototypeOf,M=P&&P(P(p([])));M&&M!==v&&m.call(M,w)&&(O=M);var I=a.prototype=i.prototype=Object.create(O);return o.prototype=a,b(I,"constructor",{value:a,configurable:!0}),b(a,"constructor",{value:o,configurable:!0}),o.displayName=t(a,S,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,S,"GeneratorFunction")),e.prototype=Object.create(I),e},e.awrap=function(e){return{__await:e}},s(u.prototype),t(u.prototype,T,function(){return this}),e.AsyncIterator=u,e.async=function(t,r,i,o,a){void 0===a&&(a=Promise);var s=new u(n(t,r,i,o),a);return e.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},s(I),t(I,S,"Generator"),t(I,w,function(){return this}),t(I,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=p,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=y)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=y),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,C):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),C},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),C}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=y),C}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){n(327),e.exports=n(135).global},function(e,t,n){var r=n(328);r(r.G,{global:n(97)})},function(e,t,n){var r=n(97),i=n(135),o=n(329),a=n(331),s=n(338),u=function(e,t,n){var c,l,d,f=e&u.F,h=e&u.G,p=e&u.S,g=e&u.P,y=e&u.B,v=e&u.W,m=h?i:i[t]||(i[t]={}),b=m.prototype,_=h?r:p?r[t]:(r[t]||{}).prototype;h&&(n=t);for(c in n)(l=!f&&_&&void 0!==_[c])&&s(m,c)||(d=l?_[c]:n[c],m[c]=h&&"function"!=typeof _[c]?n[c]:y&&l?o(d,r):v&&_[c]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):g&&"function"==typeof d?o(Function.call,d):d,g&&((m.virtual||(m.virtual={}))[c]=d,e&u.R&&b&&!b[c]&&a(b,c,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(330);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(332),i=n(337);e.exports=n(99)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(333),i=n(334),o=n(336),a=Object.defineProperty;t.f=n(99)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(98);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(99)&&!n(136)(function(){return 7!=Object.defineProperty(n(335)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(98),i=n(97).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(98);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r,i;/**
 * @file Web Cryptography API shim
 * @author Artem S Vybornov <vybornov@gmail.com>
 * @license MIT
 */
!function(n,o){r=[],void 0!==(i=function(){return o(n)}.apply(t,r))&&(e.exports=i)}("undefined"!=typeof self?self:this,function(e){"use strict";function t(e){return btoa(e).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function n(e){return e+="===",e=e.slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function r(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function i(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function o(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=o(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=o(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function a(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function s(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(i(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach(function(n){n in e&&(t[n]=e[n])});break;default:throw new TypeError("Unsupported key type")}return t}function u(e){var t=s(e);return w&&(t.extractable=t.ext,delete t.ext),r(unescape(encodeURIComponent(JSON.stringify(t)))).buffer}function c(e){var n=d(e),r=!1;n.length>2&&(r=!0,n.shift());var o={ext:!0};switch(n[0][0]){case"1.2.840.113549.1.1.1":var a=["n","e","d","p","q","dp","dq","qi"],s=d(n[1]);r&&s.shift();for(var u=0;u<s.length;u++)s[u][0]||(s[u]=s[u].subarray(1)),o[a[u]]=t(i(s[u]));o.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return o}function l(e){var t,i=[["",null]],o=!1;switch(e.kty){case"RSA":for(var a=["n","e","d","p","q","dp","dq","qi"],s=[],u=0;u<a.length&&a[u]in e;u++){var c=s[u]=r(n(e[a[u]]));128&c[0]&&(s[u]=new Uint8Array(c.length+1),s[u].set(c,1))}s.length>2&&(o=!0,s.unshift(new Uint8Array([0]))),i[0][0]="1.2.840.113549.1.1.1",t=s;break;default:throw new TypeError("Unsupported key type")}return i.push(new Uint8Array(f(t)).buffer),o?i.unshift(new Uint8Array([0])):i[1]={tag:3,value:i[1]},new Uint8Array(f(i)).buffer}function d(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),t.end-t.pos<2||t.end>e.length)throw new RangeError("Malformed DER");var n=e[t.pos++],r=e[t.pos++];if(r>=128){if(r&=127,t.end-t.pos<r)throw new RangeError("Malformed DER");for(var o=0;r--;)o<<=8,o|=e[t.pos++];r=o}if(t.end-t.pos<r)throw new RangeError("Malformed DER");var a;switch(n){case 2:a=e.subarray(t.pos,t.pos+=r);break;case 3:if(e[t.pos++])throw new Error("Unsupported bit string");r--;case 4:a=new Uint8Array(e.subarray(t.pos,t.pos+=r)).buffer;break;case 5:a=null;break;case 6:var s=btoa(i(e.subarray(t.pos,t.pos+=r)));if(!(s in S))throw new Error("Unsupported OBJECT ID "+s);a=S[s];break;case 48:a=[];for(var u=t.pos+r;t.pos<u;)a.push(d(e,t));break;default:throw new Error("Unsupported DER tag 0x"+n.toString(16))}return a}function f(e,t){t||(t=[]);var n=0,i=0,o=t.length+2;if(t.push(0,0),e instanceof Uint8Array){n=2,i=e.length;for(var a=0;a<i;a++)t.push(e[a])}else if(e instanceof ArrayBuffer){n=4,i=e.byteLength,e=new Uint8Array(e);for(var a=0;a<i;a++)t.push(e[a])}else if(null===e)n=5,i=0;else if("string"==typeof e&&e in E){var s=r(atob(E[e]));n=6,i=s.length;for(var a=0;a<i;a++)t.push(s[a])}else if(e instanceof Array){for(var a=0;a<e.length;a++)f(e[a],t);n=48,i=t.length-o}else{if(!("object"==typeof e&&3===e.tag&&e.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+e);e=new Uint8Array(e.value),n=3,i=e.byteLength,t.push(0);for(var a=0;a<i;a++)t.push(e[a]);i++}if(i>=128){var u=i,i=4;for(t.splice(o,0,u>>24&255,u>>16&255,u>>8&255,255&u);i>1&&!(u>>24);)u<<=8,i--;i<4&&t.splice(o,4-i),i|=128}return t.splice(o-2,2,n,i),t}function h(e,t,n,r){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===n?e.extractable:n,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===r?e.usages:r,enumerable:!0}})}function p(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function g(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}if("function"!=typeof Promise)throw"Promise support required";var y=e.crypto||e.msCrypto;if(y){var v=y.subtle||y.webkitSubtle;if(v){var m=e.Crypto||y.constructor||Object,b=e.SubtleCrypto||v.constructor||Object,_=(e.CryptoKey||e.Key||Object,e.navigator.userAgent.indexOf("Edge/")>-1),w=!!e.msCrypto&&!_,T=!y.subtle&&!!y.webkitSubtle;if(w||T){var S={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},E={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach(function(e){var t=v[e];v[e]=function(i,l,d){var f,m,b,_=[].slice.call(arguments);switch(e){case"generateKey":f=o(i),m=l,b=d;break;case"importKey":f=o(d),m=_[3],b=_[4],"jwk"===i&&(l=s(l),l.alg||(l.alg=a(f)),l.key_ops||(l.key_ops="oct"!==l.kty?"d"in l?b.filter(g):b.filter(p):b.slice()),_[1]=u(l));break;case"unwrapKey":f=_[4],m=_[5],b=_[6],_[2]=d._key}if("generateKey"===e&&"HMAC"===f.name&&f.hash)return f.length=f.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[f.hash.name],v.importKey("raw",y.getRandomValues(new Uint8Array(f.length+7>>3)),f,m,b);if(T&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===f.name&&(!f.modulusLength||f.modulusLength>=2048))return i=o(i),i.name="RSAES-PKCS1-v1_5",delete i.hash,v.generateKey(i,!0,["encrypt","decrypt"]).then(function(e){return Promise.all([v.exportKey("jwk",e.publicKey),v.exportKey("jwk",e.privateKey)])}).then(function(e){return e[0].alg=e[1].alg=a(f),e[0].key_ops=b.filter(p),e[1].key_ops=b.filter(g),Promise.all([v.importKey("jwk",e[0],f,!0,e[0].key_ops),v.importKey("jwk",e[1],f,m,e[1].key_ops)])}).then(function(e){return{publicKey:e[0],privateKey:e[1]}});if((T||w&&"SHA-1"===(f.hash||{}).name)&&"importKey"===e&&"jwk"===i&&"HMAC"===f.name&&"oct"===l.kty)return v.importKey("raw",r(n(l.k)),d,_[3],_[4]);if(T&&"importKey"===e&&("spki"===i||"pkcs8"===i))return v.importKey("jwk",c(l),d,_[3],_[4]);if(w&&"unwrapKey"===e)return v.decrypt(_[3],d,l).then(function(e){return v.importKey(i,e,_[4],_[5],_[6])});var S;try{S=t.apply(v,_)}catch(e){return Promise.reject(e)}return w&&(S=new Promise(function(e,t){S.onabort=S.onerror=function(e){t(e)},S.oncomplete=function(t){e(t.target.result)}})),S=S.then(function(e){return"HMAC"===f.name&&(f.length||(f.length=8*e.algorithm.length)),0==f.name.search("RSA")&&(f.modulusLength||(f.modulusLength=(e.publicKey||e).algorithm.modulusLength),f.publicExponent||(f.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e=e.publicKey&&e.privateKey?{publicKey:new h(e.publicKey,f,m,b.filter(p)),privateKey:new h(e.privateKey,f,m,b.filter(g))}:new h(e,f,m,b)})}}),["exportKey","wrapKey"].forEach(function(e){var n=v[e];v[e]=function(o,u,c){var d=[].slice.call(arguments);switch(e){case"exportKey":d[1]=u._key;break;case"wrapKey":d[1]=u._key,d[2]=c._key}if((T||w&&"SHA-1"===(u.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===o&&"HMAC"===u.algorithm.name&&(d[0]="raw"),!T||"exportKey"!==e||"spki"!==o&&"pkcs8"!==o||(d[0]="jwk"),w&&"wrapKey"===e)return v.exportKey(o,u).then(function(e){return"jwk"===o&&(e=r(unescape(encodeURIComponent(JSON.stringify(s(e)))))),v.encrypt(d[3],c,e)});var f;try{f=n.apply(v,d)}catch(e){return Promise.reject(e)}return w&&(f=new Promise(function(e,t){f.onabort=f.onerror=function(e){t(e)},f.oncomplete=function(t){e(t.target.result)}})),"exportKey"===e&&"jwk"===o&&(f=f.then(function(e){return(T||w&&"SHA-1"===(u.algorithm.hash||{}).name)&&"HMAC"===u.algorithm.name?{kty:"oct",alg:a(u.algorithm),key_ops:u.usages.slice(),ext:!0,k:t(i(e))}:(e=s(e),e.alg||(e.alg=a(u.algorithm)),e.key_ops||(e.key_ops="public"===u.type?u.usages.filter(p):"private"===u.type?u.usages.filter(g):u.usages.slice()),e)})),!T||"exportKey"!==e||"spki"!==o&&"pkcs8"!==o||(f=f.then(function(e){return e=l(s(e))})),f}}),["encrypt","decrypt","sign","verify"].forEach(function(e){var t=v[e];v[e]=function(n,r,i,a){if(w&&(!i.byteLength||a&&!a.byteLength))throw new Error("Empy input is not allowed");var s=[].slice.call(arguments),u=o(n);if(w&&"decrypt"===e&&"AES-GCM"===u.name){var c=n.tagLength>>3;s[2]=(i.buffer||i).slice(0,i.byteLength-c),n.tag=(i.buffer||i).slice(i.byteLength-c)}s[1]=r._key;var l;try{l=t.apply(v,s)}catch(e){return Promise.reject(e)}return w&&(l=new Promise(function(t,n){l.onabort=l.onerror=function(e){n(e)},l.oncomplete=function(n){var n=n.target.result;if("encrypt"===e&&n instanceof AesGcmEncryptResult){var r=n.ciphertext,i=n.tag;n=new Uint8Array(r.byteLength+i.byteLength),n.set(new Uint8Array(r),0),n.set(new Uint8Array(i),r.byteLength),n=n.buffer}t(n)}})),l}}),w){var k=v.digest;v.digest=function(e,t){if(!t.byteLength)throw new Error("Empy input is not allowed");var n;try{n=k.call(v,e,t)}catch(e){return Promise.reject(e)}return n=new Promise(function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}})},e.crypto=Object.create(y,{getRandomValues:{value:function(e){return y.getRandomValues(e)}},subtle:{value:v}}),e.CryptoKey=h}T&&(y.subtle=v,e.Crypto=m,e.SubtleCrypto=b,e.CryptoKey=h)}}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(341);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}),n(351),n(414),n(420),n(421),n(423),n(424)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.OtvInsightAgent=t.eventTimelineAnalyzer=t.eventTimeline=t.conax=t.versions=t.ssp=t.player=t.utils=void 0;var i=n(342),o=n(346),a=r(o),s=n(347),u=r(s),c=n(348),l=n(11),d=n(349),f=n(350),h=function(e){return e&&e.__esModule?e:{default:e}}(f),p={product:u.product,buildNumber:u.number,buildType:"production",revision:u.revision,cmit:u.cmit},g={},y={SSPLicenseFormatter:a},v={getOrCreateCxDeviceId:i.getOrCreateCxDeviceId,resetCxDeviceId:i.resetCxDeviceId,getOperator:i.getOperator,getOttAccount:i.getOttAccount,generateUUID:i.generateUUID,addDevice:i.addDevice,getToken:i.getToken},m=new l.OtvEventTimeline,b=new d.OtvEventTimelineAnalyzer,_=new c.BrowserDetector(window),w={browser:_};t.utils=w,t.player=g,t.ssp=y,t.versions=p,t.conax=v,t.eventTimeline=m,t.eventTimelineAnalyzer=b,t.OtvInsightAgent=h.default},function(e,t,n){"use strict";function r(e){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function i(){var e=r("operator");return e||(e="default"),e}function o(){var e=r("ottaccount");return e||(e="a000002342"),e}function a(e,t,n){var r=new XMLHttpRequest;if(r.open("GET",e+"?accountid="+t+"&deviceid="+n,!1),r.send(),r.status===h){var i=JSON.parse(r.responseText);return window.console.log("Token: "+i.authtoken+" for "+t+":"+n),i.authtoken}window.console.error("Error getting token for "+t+":"+n+" - "+r.status)}function s(e,t,n,r,i){var o=new XMLHttpRequest;o.open("PUT",e+"?accountid="+t+"&deviceid="+n+"&devicetype="+r+"&friendlyname="+i,!1),o.send(),o.status===h?window.console.log("Added device: "+n+" to "+t):window.console.error("Error adding device: "+n+" to "+t+" - "+o.status)}function u(){return(0,f.default)()}function c(e){if("undefined"!=typeof Storage){var t=localStorage.getItem("cxDeviceId."+e);return null===t&&(t=u(),localStorage.setItem("cxDeviceId."+e,t),window.console.log("Created new CxDeviceId "+t+" for "+e)),t}return window.console.error("No web storage support, can not store CxDeviceId"),u()}function l(e){"undefined"!=typeof Storage?(localStorage.removeItem("cxDeviceId."+e),window.console.log("Removed CxDeviceId for "+e)):window.console.error("No web storage support, a new id is generated every time")}Object.defineProperty(t,"__esModule",{value:!0}),t.getToken=t.addDevice=t.generateUUID=t.getOttAccount=t.getOperator=t.resetCxDeviceId=t.getOrCreateCxDeviceId=void 0;var d=n(343),f=function(e){return e&&e.__esModule?e:{default:e}}(d),h=200;t.getOrCreateCxDeviceId=c,t.resetCxDeviceId=l,t.getOperator=i,t.getOttAccount=o,t.generateUUID=u,t.addDevice=s,t.getToken=a},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[r+s]=a[s];return t||o(a)}var i=n(344),o=n(345);e.exports=r},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){var t=e;try{var n=String.fromCharCode.apply(String,r(new Uint8Array(e))),i=JSON.parse(n);t=Uint8Array.from(atob(i.license[0]),function(e){return e.charCodeAt(0)})}catch(e){}return t}function o(e){return'{"challenge":"'+btoa(String.fromCharCode.apply(String,r(new Uint8Array(e))))+'"}'}Object.defineProperty(t,"__esModule",{value:!0}),t.unpackageLicense=i,t.packagePayload=o},function(e,t){e.exports={product:"5.19.0",number:3,revision:1700033754,cmit:"73d20e1ae7bb4194481e10dd97f41bdc8a857c78"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this._window=t,this._userAgent=t.navigator.userAgent,this._smartTV=!1,this._chrome=!1,this._safari=!1,this._isLowLatencyCapable=!1,this._parseUserAgent()}return i(e,[{key:"_parseUserAgent",value:function(){this._smartTV=this._userAgent.toLowerCase().includes("smart");var e=this._window.chrome,t=this._window.navigator,n=t.vendor,r=void 0!==this._window.opr,i=t.userAgent.indexOf("Edge")>-1;t.userAgent.match("CriOS")?this._chrome=!0:null!==e&&void 0!==e&&"Google Inc."===n&&!1===r&&!1===i&&(this._chrome=!0),this._safari=-1!==this._userAgent.indexOf("Safari")&&-1===this._userAgent.indexOf("Chrome")}},{key:"isChrome",value:function(){return this._chrome}},{key:"isSmartTV",value:function(){return this._smartTV}},{key:"isSafari",value:function(){return!this._smartTV&&this._safari}},{key:"_getSmartTVOS",value:function(){var e="Browser",t=/Tizen|VIDAA|Web0S/gi,n=this._userAgent.match(t);return n&&(e=n[0]),e}},{key:"_handleTizenVersion",value:function(){var e=!1,t=/Tizen\W([\d|.]+)/g,n=this._userAgent.match(t);if(n){var r=n[0].slice("tizen ".length);e=Number(r)>=5.5}return e}},{key:"_handleChromium4DigitVersion",value:function(){var e=!1,t=/chrome\W([\d|.]+)/g,n=this._userAgent.toLocaleLowerCase().match(t);if(n){var r=n[0].slice("chrome ".length),i=r.split(".");e=Number(i[0])>=68}return e}},{key:"_handleVidaaVersion",value:function(){var e=!1;if(-1!==this._userAgent.toLocaleLowerCase().indexOf("vidaa")){var t=/VIDAA\W([\d|.]+)/g,n=this._userAgent.match(t);if(n){var r=n[0].slice("vidaa ".length);e=Number(r)>=5}}return e}},{key:"isLowLatencyCapable",value:function(){return this._isLowLatencyCapable=this._handleTizenVersion()||this._handleChromium4DigitVersion()||this._handleVidaaVersion(),this._isLowLatencyCapable}}]),e}();t.BrowserDetector=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OtvEventTimelineAnalyzer=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(11),a=function(){function e(){r(this,e)}return i(e,[{key:"getStartDuration",value:function(e){var t=[];return this._enumerateStartDurations(e,function(n,r){t.push({url:e?void 0:n,duration:r})}),t}},{key:"getSeekDuration",value:function(e){var t=[];return this._enumerateSeekDurations(e,function(n,r){t.push({url:e?void 0:n,duration:r})}),t}},{key:"getStartDurationDetails",value:function(e){if(e){for(var t=[],n=OTV.eventTimeline.getTimelineList(),r=-1,i=0;i<n.length;i++){var a=n[i];if(a.eventType===o.OtvEventType.playback){var s=JSON.parse(a.extra)[o.OtvEventExtraKey.url];if(r>=0&&a.command===o.OtvEventCommandPlayback.firstFrame){if(s===e){var u=n.slice(r,i+1);t=t.concat(u)}r=-1}a.command===o.OtvEventCommandPlayback.setURL&&s===e&&(r=i)}}return t}return[]}},{key:"getSeekDurationDetails",value:function(e){if(e){for(var t=[],n=OTV.eventTimeline.getTimelineList(),r=-1,i=0;i<n.length;i++){var a=n[i];if(a.eventType===o.OtvEventType.playback){var s=JSON.parse(a.extra)[o.OtvEventExtraKey.url];if(r>=0&&a.command===o.OtvEventCommandPlayback.seeked){if(s===e){var u=n.slice(r,i+1);t=t.concat(u)}r=-1}a.command===o.OtvEventCommandPlayback.seeking&&s===e&&(r=i)}}return t}return[]}},{key:"getZapDuration",value:function(e,t){if(e&&t){for(var n=OTV.eventTimeline.getTimelineList(),r=void 0,i=n.length-1;i>=0;i--){var a=n[i];if(a.eventType===o.OtvEventType.playback){var s=JSON.parse(a.extra)[o.OtvEventExtraKey.url];if(r&&a.command===o.OtvEventCommandPlayback.stop){if(s===e)return r.time-a.time;r=void 0}a.command===o.OtvEventCommandPlayback.firstFrame&&s===t&&(r=a)}}return-1}return-1}},{key:"_enumerateStartDurations",value:function(e,t){var n=OTV.eventTimeline.getTimelineList(),r=void 0,i=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value;if(l.eventType===o.OtvEventType.playback){var d=JSON.parse(l.extra)[o.OtvEventExtraKey.url],f=!e||d===e;if(r&&l.command===o.OtvEventCommandPlayback.firstFrame){if(f){t(d,l.time-r.time)}r=void 0}l.command===o.OtvEventCommandPlayback.setURL&&f&&(r=l)}}}catch(e){a=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}}},{key:"_enumerateSeekDurations",value:function(e,t){var n=OTV.eventTimeline.getTimelineList(),r=void 0,i=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value;if(l.eventType===o.OtvEventType.playback){var d=JSON.parse(l.extra)[o.OtvEventExtraKey.url],f=!e||d===e;if(r&&l.command===o.OtvEventCommandPlayback.seeked){if(f){t(d,l.time-r.time)}r=void 0}l.command===o.OtvEventCommandPlayback.seeking&&f&&(r=l)}}}catch(e){a=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}}}]),e}();t.OtvEventTimelineAnalyzer=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){if(r(this,e),"undefined"==typeof ni||void 0===ni.initialize)throw new Error("Nagra Insight module not loaded");ni.initialize(t),this.timeUpdateHandle=this._onTimeUpdate.bind(this),this.loadStartHandle=this._onLoadStart.bind(this),this.loadedMetadataHandle=this._onLoadedMetadata.bind(this),this.pauseHandle=this._onPause.bind(this),this.playingHandle=this._onPlaying.bind(this),this.seekingHandle=this._onSeeking.bind(this),this.bufferingHandle=this._onBuffering.bind(this),this.errorHandle=this._onError.bind(this),this.availableBitratesChangedHandle=this._onAvailableBitratesChanged.bind(this),this.networkErrorHandle=this._onNetworkError.bind(this),this.bitrateChangedHandle=this._onBitrateChanged.bind(this),this.networkStatisticsListeners={availableBitratesChanged:this.availableBitratesChangedHandle,errorChanged:this.networkErrorHandle},this.playbackStatisticsListeners={streamBitrateChanged:this.bitrateChangedHandle}}return i(e,[{key:"startSession",value:function(e,t,n){if(this.player)throw new Error("Only one insight session is possible at a time");this.player=e,this.content=t,this.liveOffset=0,n&&ni.setUserInfo(n),this.player.one("loadstart",this.loadStartHandle),this.audioLanguage=this._getAudioLanguage()}},{key:"stopSession",value:function(){this._cancelEvents(),ni.stop(),this.player=void 0}},{key:"terminate",value:function(){ni.terminate(),this._invalidate()}},{key:"_invalidate",value:function(){var e=function(){throw new Error("This OtvInsightAgent object is invalid after termination.")};this.startSession=e,this.stopSession=e,this.terminate=e}},{key:"_initialiseEvents",value:function(){this.player.on("pause",this.pauseHandle),this.player.on("playing",this.playingHandle),this.player.on("seeking",this.seekingHandle),this.player.on("waiting",this.bufferingHandle),this.player.on("error",this.errorHandle),this.player.on("timeupdate",this.timeUpdateHandle),this.player.one("loadedmetadata",this.loadedMetadataHandle),this.player.otvtoolkit().networkStatistics.addNetworkListener(this.networkStatisticsListeners),this.player.otvtoolkit().playbackStatistics.addPlaybackListener(this.playbackStatisticsListeners)}},{key:"_cancelEvents",value:function(){clearInterval(this.interval),this.interval=0,this.player.off("timeupdate",this.timeUpdateHandle),this.player.off("loadstart",this.loadStartHandle),this.player.off("loadedmetadata",this.loadedMetadataHandle),this.player.off("pause",this.pauseHandle),this.player.off("playing",this.playingHandle),this.player.off("seeking",this.seekingHandle),this.player.off("waiting",this.bufferingHandle),this.player.off("error",this.errorHandle),this.player.otvtoolkit().networkStatistics.removeNetworkListener(this.networkStatisticsListeners),this.player.otvtoolkit().playbackStatistics.removePlaybackListener(this.playbackStatisticsListeners)}},{key:"_onLoadStart",value:function(){ni.play(),this._initialiseEvents(),this.frameDrops=this.player.otvtoolkit().renderingStatistics.getFrameDrops()||0}},{key:"_onPause",value:function(){this.player.paused()&&ni.pause()}},{key:"_onPlaying",value:function(){ni.playing()}},{key:"_onSeeking",value:function(){ni.seekTo(this.player.currentTime())}},{key:"_onBuffering",value:function(){ni.buffering()}},{key:"_onError",value:function(){ni.addErrorEvent(this.player.error().code.toString(),this.player.error().message)}},{key:"_onLoadedMetadata",value:function(){var e=Object.assign({},this.content),t=this.player.duration(),n=this.player.otvtoolkit().networkStatistics.getAdaptiveStreaming();e.uri=this.player.currentSrc();var r=n.availableBitrates;r.length&&(e.bitrates=r),t===1/0?ni.setLiveContent(e):(e.duration=t,ni.setVodContent(e)),this.interval=setInterval(this._pollTask.bind(this),1e3)}},{key:"_onTimeUpdate",value:function(){if(this.player.duration()===1/0){var e=this._getLiveOffset();e!==this.liveOffset&&(ni.setOffsetFromLive(e),this.liveOffset=e)}else{var t=this.player.currentTime();ni.setPosition(t)}}},{key:"_getLiveOffset",value:function(){var e=this.player.currentTime(),t=this.player.seekable(),n=t.end(t.length-1)-e;return Math.round(10*(n+Number.EPSILON))/10}},{key:"_onAvailableBitratesChanged",value:function(e){ni.setAvailableBitrates(e)}},{key:"_onNetworkError",value:function(e,t){ni.addErrorEvent(e,t)}},{key:"_onBitrateChanged",value:function(e){ni.setBitrate(e)}},{key:"_pollTask",value:function(){var e=this.player.otvtoolkit().renderingStatistics.getFrameDrops();if(e&&e!==this.frameDrops){var t=e-this.frameDrops;ni.setFrameDrops(t),this.frameDrops=e}var n=this._getAudioLanguage();n!==this.audioLanguage&&(ni.setAudioLanguage(n),this.audioLanguage=n)}},{key:"_getAudioLanguage",value:function(){var e=this.player.audioTracks().tracks_,t=e.find(function(e){return e.enabled});return t?t.language:void 0}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(55),l=r(c),d=n(354),f=n(355),h=r(f),p=n(356),g=r(p),y=n(380),v=r(y),m=n(71),b=r(m),_=n(389),w=r(_),T=n(392),S=r(T),E=n(395),k=r(E),A=n(398),x=r(A),C=n(399),O=r(C),P=n(42),M=r(P),I=n(400),j=n(150),D=r(j),R=n(402),L=n(404),N=r(L),F=n(405),U=r(F),B=n(30),V=r(B),H=n(406),W=r(H),K=n(407),q=r(K),G=n(408),z=r(G),Y=n(409),X=r(Y),J=n(410),$=r(J),Q=n(411),Z=r(Q),ee=n(412),te=r(ee),ne=n(57),re=n(413),ie=r(re),oe={drm:{system:"none",config:{"com.widevine.alpha":{persistentState:"optional"}}}},ae=l.default.getPlugin("plugin"),se={streaming:{retryParameters:{maxAttempts:4}},manifest:{retryParameters:{maxAttempts:4,timeout:5e3}}},ue=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._initComponents(n.components),r.otvVideoTracksButton&&r.otvVideoTracksButton(),r.techConfig=new ne.TechConfiguration,r._init(e,n),r}return a(t,e),s(t,[{key:"dispose",value:function(){this.otvResolutionController&&this.otvResolutionController.dispose(),this.drmSecurityLevel&&this.drmSecurityLevel.dispose(),this.networkStatistics&&this.networkStatistics.dispose(),this.playbackStatistics&&this.playbackStatistics.dispose(),this.renderingStatistics&&this.renderingStatistics.dispose(),this.timeline&&this.timeline.dispose(),this.errorReporting&&this.errorReporting.dispose(),this.reset(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this);for(var e=document.getElementsByClassName("opy-videowindow"),n=0;n<e.length;n++)e[n].remove()}},{key:"addEventListener",value:function(e,t,n){return this.eventTarget.addEventListener(e,t,n)}},{key:"removeEventListener",value:function(e,t,n){return this.eventTarget.removeEventListener(e,t,n)}},{key:"dispatchEvent",value:function(e){var t=void 0;return"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event"),t.initEvent(e,!0,!0)),this.eventTarget.dispatchEvent(t)}},{key:"addThumbnailPreview",value:function(e){var t=this;(0,ie.default)()&&setTimeout(function(){return t.player.thumbnails({vtt:e})},100)}},{key:"addChapters",value:function(e){var t=this;!(0,ie.default)()||this.chapterManager&&this.chapterManager.uri===e||(this.chapterManager&&(this.chapterManager.reset(),this.chapterManager=void 0),e&&setTimeout(function(){t.chapterManager=new chapters.ChapterManager(t.player,e)},0))}},{key:"getThumbnail",value:function(e,t){var n=this.player.tech_.shaka_;if(n){var r=n.getImageTracks();r.length?n.getThumbnails(r[0].id,e).then(function(e){var n={url:e.uris[0],x:Math.floor(e.positionX),y:Math.floor(e.positionY),width:Math.floor(e.width),height:Math.floor(e.height)};t(n)}).catch(function(){t(null)}):t(null)}else t(null)}},{key:"startThumbnailPresenter",value:function(){(0,ie.default)()&&!this.thumbnailPresenter&&(this.thumbnailPresenter=new thumbnailPresenter.ThumbnailPresenter(this.player,this.getThumbnail))}},{key:"createSourceObjectFromURL",value:function(e,t){return(new b.default.SourceBuilder).build(e,t)}},{key:"getResolution",value:function(){return this.playbackStatistics.getResolution()}},{key:"getBandwidth",value:function(){return this.playbackStatistics.getStreamBitrate()}},{key:"getMaxBandwidth",value:function(){return this.otvResolutionController.getMaxBandwidth()}},{key:"getMaxResolution",value:function(){return this.otvResolutionController.getMaxResolution()}},{key:"getVideoJS",value:function(){return l.default}},{key:"setMaxBandwidth",value:function(e){this.otvResolutionController.setMaxBandwidth(e)}},{key:"setMaxResolution",value:function(e,t){this.otvResolutionController.setMaxResolution(e,t)}},{key:"enablePiP",value:function(){(0,ie.default)()&&null===this.pipManager&&(this.pipManager=new pip.PiPManager(this.player,this.videoWindowDiv))}},{key:"enableAutoPiPInitiationOnScroll",value:function(e){(0,ie.default)()&&null!==this.pipManager&&this.pipManager.enableAutoPiPInitiationOnScroll(e)}},{key:"reset",value:function(){clearTimeout(this._zappingTimerId),this.timeline.onStop(),this.player.removeClass("vjs-has-started"),this._disableAllSubtitleTracks(),(0,ie.default)()&&this.addChapters(),(0,ie.default)()&&this.player.thumbnails&&this.player.thumbnails(),this.drmController.tearDown()}},{key:"getConfiguration",value:function(){return this.techConfig.getConfiguration(ne.CONFIG_TYPE_CUSTOMER)}},{key:"configure",value:function(e,t){return this.techConfig.configure(ne.CONFIG_TYPE_CUSTOMER,e,t)}},{key:"_init",value:function(e,t){var n=this;this._zappingTimerId=null,(0,ie.default)()&&(this.pipManager=null),e.addClass("vjs-otvtoolkit"),this.timeline=new W.default(e),this.segmentTimeoutController=new N.default.SegmentTimeoutController(e),this.eventTarget=document.createDocumentFragment(),this._log=(0,X.default)(!1),this._initSource(e),this._initReset(e),this.pluginOptions=l.default.mergeOptions(oe,t),this.otvResolutionController=new O.default(e,this._log),this._initUIElement();e.$("video");this._initDrm(e),this._initPlayerEvents(e,this.drmController),this._checkForEdge(),this.on(e,"durationchange",function(){e.duration()===1/0?n._updateFormatTime():n._resetFormatTime()}),this._initDiagnostics(e),this.pluginOptions.quickmark&&this._initQuickmark(e),this._initCheckForSeekable(),M.default.isSmartTV()&&console.log("Executing on SmartTV"),this._initPlayerWaiting(e),this._initVideoSizeMonitor(e)}},{key:"_initVideoSizeMonitor",value:function(e){this.sizeMonitor=new U.default(e,this)}},{key:"_initQuickmark",value:function(e){var t=this.pluginOptions.quickmark.quickmarkConfig,n={};this.pluginOptions.quickmark.message&&(n.message=this.pluginOptions.quickmark.message),this.pluginOptions.quickmark.error&&(n.error=this.pluginOptions.quickmark.error),this.pluginOptions.quickmark.tlValidation&&(n.tlValidation=this.pluginOptions.quickmark.tlValidation);try{this.quickmarkInterface=new R.QuickmarkInterface({player:e,toolkit:this,url:t.url,service:t.service,token:t.token,tenant:t.tenant,apikey:t.apikey,secret:t.secret,callbacks:n}),this._log("jswbw version: "+this.quickmarkInterface.getVersion())}catch(e){this._log("Failed to create quickmark interface: "+e.message)}}},{key:"_initUIElement",value:function(){var e=document.getElementsByClassName("opy-videowindow");e.length>0?this.videoWindowDiv=e[0]:(this.videoWindowDiv=document.createElement("div"),this.videoWindowDiv.className="opy-videowindow"),document.body.contains(this.player.el())&&(this.player.el().parentNode.insertBefore(this.videoWindowDiv,this.player.el()),this.videoWindowDiv.appendChild(this.player.el()))}},{key:"_initDrm",value:function(e){var t=void 0,n=void 0;this.pluginOptions.drm&&this.pluginOptions.drm.config&&(t=this.pluginOptions.drm.config.preferredDRM,n=this.pluginOptions.drm.config.tvkeyOperatorUUID),D.default.setPreference(this._updatePreferenceForTVKey(t));var r=Z.default.homogeniseSsmUri(this.pluginOptions.drm);this.drmController=g.default.createDRMController(r,this._log,this.player,this.pluginOptions.preferredPlayer),this.drmSecurityLevel=new I.DrmSecurityLevel(e,this._log),this.wvhw=new te.default(this.pluginOptions.drm,this.drmSecurityLevel,this.techConfig,ne.CONFIG_TYPE_OTV,this._log),M.default.isTVKeyCapable()&&n&&this.drmSecurityLevel.activateTVKey(this.pluginOptions.drm.config)}},{key:"_updatePreferenceForTVKey",value:function(e){if(!e||"com.tvkey.drm"!==e.toLowerCase()||M.default.isTVKeyCapable())return e}},{key:"_initDiagnostics",value:function(e){this.networkStatistics=new w.default.NetworkStatistics(e),this.playbackStatistics=new S.default.PlaybackStatistics(e),this.renderingStatistics=new k.default.RenderingStatistics(e),this.errorReporting=M.default.isSafari()?new q.default.NativePlayerErrorReporting(e):new z.default.ShakaPlayerErrorReporting(e),this.logProvider=new $.default.LogProvider(e)}},{key:"_disableAllSubtitleTracks",value:function(){for(var e=this.player.textTracks(),t=0;t<e.length;t++){var n=e[t];try{switch(n.kind.toLowerCase()){case"subtitles":case"captions":case"descriptions":n.mode="disabled"}}catch(e){this._log("Invalid track kind detected.")}}}},{key:"_resetFormatTime",value:function(){l.default.resetFormatTime&&this.updatedFormatTime&&(this._log("Resetting formatTime"),l.default.resetFormatTime(),delete this.updatedFormatTime)}},{key:"_updateFormatTime",value:function(){l.default.setFormatTime&&!this.updatedFormatTime&&(this._log("Setting formatTime to live"),l.default.setFormatTime(v.default.liveFormatTime.bind(this.player)),this.updatedFormatTime=!0)}},{key:"_createError",value:function(e,t){var n=new Error(t);return n.name=e,n}},{key:"_enableIntegrationLogo",value:function(e){var t=document.getElementById("logo"),n=document.getElementById("logo-img");t?(t.removeChild(n),t.parentNode.removeChild(t)):t=document.createElement("div"),n=document.createElement("div"),n.id="logo-img",n.style.backgroundImage="url('"+h.default+"')",n.style.width="100%",n.style.height="100%",n.style.backgroundSize="100%",n.style.backgroundRepeat="round",t.id="logo",t.style.pointerEvents="none",t.style.right="0",t.style.top="0",t.style.position="absolute",t.style.padding="5px",t.style.width="144px",t.style.height="72px",t.appendChild(n);var r=!1;return e&&(e.parentNode.appendChild(t),r=!0),r}},{key:"_makeSeekable",value:function(e){var t=this.player.el();e!==t.classList.contains("opy-seekable")&&(e?t.classList.add("opy-seekable"):t.classList.remove("opy-seekable"))}},{key:"_initSource",value:function(e){e.origSrc=e.src,e.src=function(t){var n=this.otvtoolkit();if(t){if(D.default.setSourcePreference(n._updatePreferenceForTVKey(t.preferredDRM)),D.default.getPreference()&&n.techConfig.configure(ne.CONFIG_TYPE_OTV,"drm.preferredKeySystems",[D.default.getPreference()]),n.segmentTimeoutController.setVodTimeoutMultiplier(t.vodSegmentTimeout||N.default.USE_DEFAULT),n.segmentTimeoutController.setLiveTimeoutMultiplier(t.liveSegmentTimeout||N.default.USE_DEFAULT),e.addClass("opy-zapping"),n._isConfigTimerDrivenNudgeable(e)){var r=function t(){n._isNudgeNeeded(e,!0)&&(n._doNudge(e)&&(e._zappingTimerId=setTimeout(function(){t()},5e3)))};clearTimeout(e._zappingTimerId),e._zappingTimerId=setTimeout(function(){r()},5e3)}this.one(e,["canplay","contentcanplay"],function(){e.removeClass("opy-zapping")}),n.reset();var i=n.drmController.updateSourceData(t);return e.tech_.shaka_&&e.tech_.shaka_.configure({streaming:{lowLatencyMode:void 0,rebufferingGoal:void 0,inaccurateManifestTolerance:void 0}}),n.otvResolutionController&&(t.startAtLowestBitrate?n.otvResolutionController.setShakaPlayToStartAtLowestBitrate():n.otvResolutionController.resetShakaPlayToStartAtLowestBitrate()),n.techConfig.configure(ne.CONFIG_TYPE_OTV,{streaming:{autoLowLatencyMode:i.lowLatencyEnabled}}),void 0!==n.pluginOptions.preferredPlayer&&(i.preferredPlayer=n.pluginOptions.preferredPlayer),n.timeline.onSetUrl(i),n.networkStatistics.setSource(t),n.playbackStatistics.setSource(t),n.renderingStatistics.setSource(t),void this.origSrc(i)}return this.origSrc(t)}}},{key:"_initReset",value:function(e){var t=this,n=e.reset.bind(e);e.reset=function(){t.techConfig.setTech(null),t._saveSettings(),t.reset(),n()}}},{key:"_saveSettings",value:function(){this.player&&(this._muted=this.player.muted(),this._volume=this.player.volume())}},{key:"_reinstateSettings",value:function(e){e&&(void 0!==this._muted&&(e.muted=this._muted,e.defaultMuted=this._muted),void 0!==this._volume&&(e.volume=this._volume),e.disablePictureInPicture=!0,e.addEventListener("contextmenu",function(e){e.preventDefault()},!1))}},{key:"_initReadyEvent",value:function(e,t){var n=this;this.on(e,"ready",function(){n.errorReporting.ready(),t.ready(e.tech_.el_);var r=e.$("video");if(n._reinstateSettings(r),n.startThumbnailPresenter(),n.techConfig.setTech(e.tech_.shaka_),n.otvResolutionController.ready(),e.tech_.shaka_){if(void 0===n.defaultInitDataTransform){var i=n.getConfiguration();n.defaultInitDataTransform=i.drm.initDataTransform}n._applyPlatformSpecificConfig(),n.techConfig.configure(ne.CONFIG_TYPE_OTV,se),n.techConfig.configure(ne.CONFIG_TYPE_OTV,"drm.initDataTransform",function(e,t,r){return n._log("initDataTransform: current Drm system: "+r.keySystem),"com.tvkey.drm"!==r.keySystem?n.defaultInitDataTransform(e,t,r):(n._log("initDataTransform is called for tvkey."),n._log("init type: "+t),n._log("init Data: "+V.default.toBase64(e)),e)}),n.wvhw.setHwDecryption(n.pluginOptions.drm,n.drmSecurityLevel,n.techConfig,ne.CONFIG_TYPE_OTV)}})}},{key:"_applyPlatformSpecificConfig",value:function(){var e=M.default.getTizenVersion();isNaN(e)||5.5!==e||(this._log("Tizen 5.5 detected. Applying stallSkip configuration"),this.techConfig.configure(ne.CONFIG_TYPE_OTV,{streaming:{stallSkip:.2}}))}},{key:"_isConfigTimerDrivenNudgeable",value:function(){return M.default.isSmartTV()}},{key:"_isConfigPlayingEvtNudgeable",value:function(e){var t=!!e.otvtoolkit().pluginOptions.drm.config.ssmServer,n=!!e.otvtoolkit().pluginOptions.drm.system.includes("customer"),r=!!e.otvtoolkit().pluginOptions.drm.config.requestLicenceCallback;return!M.default.isSafari()&&(t||n||r)}},{key:"_isNudgeNeeded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.paused(),r=e.autoplay(),i=e.el_.classList.contains("opy-zapping"),o=r&&i;return o=t?o&&n:o&&this._isConfigPlayingEvtNudgeable(e)}},{key:"_doNudge",value:function(e){var t=!1,n=e.tech_.shaka_&&e.tech_.shaka_.isLive(),r=e.seekable().length;if(n)e.play(),t=!0;else if(r>0){var i=e.currentTime(),o=Math.min(5,2*(e.seekable().end(r-1)-e.seekable().start(r-1))/1e3);e.log("NUDGING currentTime is "+i+" <= "+o+" ?"),i<=o&&e.currentTime(o),t=!0}return t}},{key:"_initPlayingEvent",value:function(e){var t=this;this.one(e,"playing",function(){t._isNudgeNeeded(e)&&t._doNudge(e)})}},{key:"_initSeekEvent",value:function(e){this.on(e,"seeked",function(){e.paused()||e.play()})}},{key:"_initLoadStartEvent",value:function(e){var t=this;this.on(e,"loadstart",function(){t._configureTextDisplayFactory(),t._log("Current Tech name is:"+t.player.techName_)})}},{key:"_initPlayerEvents",value:function(e,t){this._initReadyEvent(e,t),this._initSeekEvent(e),this._initLoadStartEvent(e),this._initPlayingEvent(e)}},{key:"_initComponents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x.default.initialiseToolkit(this);for(var t in e)e.hasOwnProperty(t)&&(this.hasOwnProperty(t)?this[t](e[t]):l.default.log.warn('Component "'+t+'", does not exist it will not be added.'))}},{key:"_initPlayerWaiting",value:function(e){var t=function(){e.addClass("vjs-waiting");var t=e.currentTime(),n=function n(){e.currentTime()-t>.04&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))};e.on("timeupdate",n)};e.on("waiting",t)}},{key:"_initCheckForSeekable",value:function(){var e=this,t=function(){var t=e.player.seekable(),n=e.player.hasClass("vjs-liveui");0===t.length&&n&&e.player.removeClass("vjs-liveui")};this.on(this.player,"canplaythrough",t)}},{key:"_checkForEdge",value:function(){-1!==window.navigator.userAgent.toLowerCase().indexOf("edge")?this.player.hasClass("opy-edge")||this.player.addClass("opy-edge"):this.player.hasClass("opy-edge")&&this.player.removeClass("opy-edge")}},{key:"_enableConsoleLogging",value:function(e){this.on(e,"loadstart",this._printEvent),this.on(e,"sourceset",this._printEvent),this.on(e,"waiting",this._printEvent),this.on(e,"canplay",this._printEvent),this.on(e,"canplaythrough",this._printEvent),this.on(e,"playing",this._printEvent),this.on(e,"ended",this._printEvent),this.on(e,"seeking",this._printEvent),this.on(e,"seeked",this._printEvent),this.on(e,"play",this._printEvent),this.on(e,"firstplay",this._printEvent),this.on(e,"pause",this._printEvent),this.on(e,"durationchange",this._printEvent),this.on(e,"fullscreenchange",this._printEvent),this.on(e,"error",this._printEvent),this.on(e,"loadedmetadata",this._printEvent),this.on(e,"posterchange",this._printEvent),this.on(e,"textdata",this._printEvent),this.on(e,"ready",this._printEvent)}},{key:"_printEvent",value:function(e){this._log("Event: "+e.type+" called")}},{key:"_configureTextDisplayFactory",value:function(){var e=this,t=void 0,n=e.player.el_.getElementsByTagName("video")[0],r=n.parentElement;this.player.tech_.shaka_&&this.player.tech_.shaka_.setVideoContainer(r),t=function(){return new shaka.text.UITextDisplayer(n,r)},this.techConfig.configure(ne.CONFIG_TYPE_OTV,"textDisplayFactory",t)}}]),t}(ae);ue.VERSION=d.version,l.default.registerPlugin("otvtoolkit",ue),t.default=ue},function(e,t,n){(function(t){e.exports=t.videojs=n(353)}).call(t,n(18))},function(e,t,n){(function(t){/**
 * @license
 * Video.js 7.21.5-nmp-1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}function n(e,t){St(e).forEach(function(n){return t(e[n],n)})}function r(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return Object.assign?wt.apply(void 0,[e].concat(r)):(r.forEach(function(t){t&&n(t,function(t,n){e[n]=t})}),e)}function i(e){return!!e&&"object"==typeof e}function o(e){return i(e)&&"[object Object]"===Tt.call(e)&&e.constructor===Object}function a(e,t){if(!e||!t)return"";if("function"!=typeof window.getComputedStyle)return"";var n;try{n=window.getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}function s(e){return"string"==typeof e&&Boolean(e.trim())}function u(e){if(0<=e.indexOf(" "))throw new Error("class has illegal whitespace characters")}function c(){return document===window.document}function l(e){return i(e)&&1===e.nodeType}function d(e){return function(t,n){return s(t)?(n=l(n=s(n)?document.querySelector(n):n)?n:document,n[e]&&n[e](t)):document[e](null)}}function f(e,t,n,r){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={});var i=document.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(mt.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+n+"."),i.setAttribute(e,n)):"textContent"===e?h(i,n):i[e]===n&&"tabIndex"!==e||(i[e]=n)}),Object.getOwnPropertyNames(n).forEach(function(e){i.setAttribute(e,n[e])}),r&&C(i,r),i}function h(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function p(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function g(e,t){return u(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function y(e,t){return e.classList?e.classList.add(t):g(e,t)||(e.className=(e.className+" "+t).trim()),e}function v(e,t){return e?(e.classList?e.classList.remove(t):(u(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e):(mt.warn("removeClass was called with an element that doesn't exist"),null)}function m(e,t,n){var r=g(e,t);if((n="boolean"!=typeof(n="function"==typeof n?n(e,t):n)?!r:n)!==r)return(n?y:v)(e,t),e}function b(e,t){Object.getOwnPropertyNames(t).forEach(function(n){var r=t[n];null===r||void 0===r||!1===r?e.removeAttribute(n):e.setAttribute(n,!0===r?"":r)})}function _(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var n=e.attributes,r=n.length-1;0<=r;r--){var i=n[r].name,o=n[r].value;"boolean"!=typeof e[i]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+",")||(o=null!==o),t[i]=o}return t}function w(e,t){return e.getAttribute(t)}function T(e,t,n){e.setAttribute(t,n)}function S(e,t){e.removeAttribute(t)}function E(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,r=0,i=0;e.offsetParent&&e!==document[lt.fullscreenElement];)r+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{left:r,top:i,width:t,height:n}}function k(e){return i(e)&&3===e.nodeType}function A(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function x(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return l(e="function"==typeof e?e():e)||k(e)?e:"string"==typeof e&&/\S/.test(e)?document.createTextNode(e):void 0}).filter(function(e){return e})}function C(e,t){return x(t).forEach(function(t){return e.appendChild(t)}),e}function O(e,t){return C(A(e),t)}function P(e,t){c()&&(t&&(gt=t),window.setTimeout(tn,e))}function M(){en=!0,window.removeEventListener("load",M)}function I(e){var t=document.createElement("style");return t.className=e,t}function j(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}function D(e,t){var n;an.has(e)&&(0===(n=an.get(e)).handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&an.delete(e))}function R(e,t,n,r){n.forEach(function(n){e(t,n,r)})}function L(e){function t(){return!0}function n(){return!1}if(e.fixed_)return e;if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var r,i,o,a=e||window.event;for(r in e={},a)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&"path"!==r&&("returnValue"===r&&a.preventDefault||(e[r]=a[r]));e.target||(e.target=e.srcElement||document),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){a.preventDefault&&a.preventDefault(),e.returnValue=!1,a.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),e.cancelBubble=!0,a.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX&&(i=document.documentElement,o=document.body,e.pageX=e.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}function N(e,t,n){if(Array.isArray(t))return R(N,e,t,n);an.has(e)||an.set(e,{});var r=an.get(e);r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=nn++),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(!r.disabled){t=L(t);var i=r.handlers[t.type];if(i)for(var o=i.slice(0),a=0,s=o.length;a<s&&!t.isImmediatePropagationStopped();a++)try{o[a].call(e,t,n)}catch(t){mt.error(t)}}}),1===r.handlers[t].length&&(e.addEventListener?(n=!1,sn()&&-1<un.indexOf(t)&&(n={passive:!0}),e.addEventListener(t,r.dispatcher,n)):e.attachEvent&&e.attachEvent("on"+t,r.dispatcher))}function F(e,t,n){if(an.has(e)){var r=an.get(e);if(r.handlers){if(Array.isArray(t))return R(F,e,t,n);var i=function(e,t){r.handlers[t]=[],D(e,t)};if(void 0!==t){var o=r.handlers[t];if(o)if(n){if(n.guid)for(var a=0;a<o.length;a++)o[a].guid===n.guid&&o.splice(a--,1);D(e,t)}else i(e,t)}else for(var s in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},s)&&i(e,s)}}}function U(e,t,n){var r=an.has(e)?an.get(e):{},i=e.parentNode||e.ownerDocument;return"string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=L(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles?U.call(null,i,t,n):!i&&!t.defaultPrevented&&t.target&&t.target[t.type]&&(an.has(t.target)||an.set(t.target,{}),i=an.get(t.target),t.target[t.type]&&(i.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),i.disabled=!1)),!t.defaultPrevented}function B(e,t,n){function r(){F(e,t,r),n.apply(this,arguments)}if(Array.isArray(t))return R(B,e,t,n);r.guid=n.guid=n.guid||nn++,N(e,t,r)}function V(e,t,n){function r(){F(e,t,r),n.apply(this,arguments)}r.guid=n.guid=n.guid||nn++,N(e,t,r)}function H(e,t,n){return t.guid||(t.guid=nn++),(e=t.bind(e)).guid=n?n+"_"+t.guid:t.guid,e}function W(){}function K(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_||(e.constructor&&e.constructor.name?e.constructor.name:typeof e)}function q(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length}function G(e,t,n){if(!e||!e.nodeName&&!ln(e))throw new Error("Invalid target for "+K(t)+"#"+n+"; must be a DOM node or evented object.")}function z(e,t,n){if(!q(e))throw new Error("Invalid event type for "+K(t)+"#"+n+"; must be a non-empty string or array.")}function Y(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for "+K(t)+"#"+n+"; must be a function.")}function X(e,t,n){var r,i,o=t.length<3||t[0]===e||t[0]===e.eventBusEl_,t=o?(r=e.eventBusEl_,3<=t.length&&t.shift(),i=t[0],t[1]):(r=t[0],i=t[1],t[2]);return G(r,e,n),z(i,e,n),Y(t,e,n),{isTargetingSelf:o,target:r,type:i,listener:t=H(e,t)}}function J(e,t,n,r){G(e,e,t),e.nodeName?cn[t](e,n,r):e[t](n,r)}function $(e,t){if(t=(t=void 0===t?{}:t).eventBusKey){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=f("span",{className:"vjs-event-bus"});return r(e,dn),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),[e,e.el_,e.eventBusEl_].forEach(function(e){e&&an.has(e)&&an.delete(e)}),window.setTimeout(function(){e.eventBusEl_=null},0)}),e}function Q(e,t){return r(e,fn),e.state=r({},e.state,t),"function"==typeof e.handleStateChanged&&ln(e)&&e.on("statechanged",e.handleStateChanged),e}function Z(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})}function ee(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function te(){for(var e={},t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return r.forEach(function(t){t&&n(t,function(t,n){o(t)?(o(e[n])||(e[n]={}),e[n]=te(e[n],t)):e[n]=t})}),e}function ne(e,t,n,r){return function(e,t,n){if("number"!=typeof t||t<0||n<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,r,n.length-1),n[r][t]}function re(e){var t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:ne.bind(null,"start",0,e),end:ne.bind(null,"end",1,e)};return window.Symbol&&window.Symbol.iterator&&(t[window.Symbol.iterator]=function(){return(e||[]).values()}),t}function ie(e,t){return Array.isArray(e)?re(e):void 0===e||void 0===t?re():re([[e,t]])}function oe(e,t){var n,r,i=0;if(!t)return 0;e&&e.length||(e=ie(0,0));for(var o=0;o<e.length;o++)n=e.start(o),i+=(r=t<(r=e.end(o))?t:r)-n;return i/t}function ae(e){if(e instanceof ae)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:i(e)&&("number"==typeof e.code&&(this.code=e.code),r(this,e)),this.message||(this.message=ae.defaultMessages[this.code]||"")}function se(e){return null!=e&&"function"==typeof e.then}function ue(e){se(e)&&e.then(null,function(e){})}function ce(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,n,r){return e[n]&&(t[n]=e[n]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}function le(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)}function de(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)}function fe(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=document.createElement("a");n.href=e;for(var r={},i=0;i<t.length;i++)r[t[i]]=n[t[i]];return"http:"===r.protocol&&(r.host=r.host.replace(/:80$/,"")),"https:"===r.protocol&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=window.location.protocol),r.host||(r.host=window.location.host),r}function he(e){var t;return e.match(/^https?:\/\//)||((t=document.createElement("a")).href=e,e=t.href),e}function pe(e){return"string"==typeof e&&(e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e))?e.pop().toLowerCase():""}function ge(e,t){return void 0===t&&(t=window.location),(":"===(e=fe(e)).protocol?t:e).protocol+e.host!==t.protocol+t.host}function ye(e,t,n){var r=e;return Dn(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=wt({},t,{uri:e}),r.callback=n,r}function ve(e,t,n){return me(t=ye(e,t,n))}function me(e){function t(){var e=void 0,e=c.response||c.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(c);if(g)try{e=JSON.parse(e)}catch(e){}return e}function n(e){return clearTimeout(a),(e=e instanceof Error?e:new Error(""+(e||"Unknown XMLHttpRequest Error"))).statusCode=0,u(e,y)}function r(){if(!o){clearTimeout(a);var n=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status,r=y,i=null;return 0!==n?(r={body:t(),statusCode:n,method:d,headers:{},url:l,rawRequest:c},c.getAllResponseHeaders&&(r.headers=Ln(c.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),u(i,r,r.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var i,o,a,s=!1,u=function(t,n,r){s||(s=!0,e.callback(t,n,r))},c=e.xhr||null,l=(c=c||new(e.cors||e.useXDR?ve.XDomainRequest:ve.XMLHttpRequest)).url=e.uri||e.url,d=c.method=e.method||"GET",f=e.body||e.data,h=c.headers=e.headers||{},p=!!e.sync,g=!1,y={body:void 0,headers:{},statusCode:0,method:d,url:l,rawRequest:c};if("json"in e&&!1!==e.json&&(g=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),f=JSON.stringify(!0===e.json?f:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(r,0)},c.onload=r,c.onerror=n,c.onprogress=function(){},c.onabort=function(){o=!0},c.ontimeout=n,c.open(d,l,!p,e.username,e.password),p||(c.withCredentials=!!e.withCredentials),!p&&0<e.timeout&&(a=setTimeout(function(){var e;o||(o=!0,c.abort("timeout"),(e=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",n(e))},e.timeout)),c.setRequestHeader)for(i in h)h.hasOwnProperty(i)&&c.setRequestHeader(i,h[i]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(f||null),c}function be(e,t){var n=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<r.length&&(window.console&&window.console.groupCollapsed&&window.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach(function(e){return mt.error(e)}),window.console&&window.console.groupEnd&&window.console.groupEnd()),n.flush()}function _e(e,t){var n={uri:e};(e=ge(e))&&(n.cors=e),(e="use-credentials"===t.tech_.crossOrigin())&&(n.withCredentials=e),Nn(n,H(this,function(e,n,r){return e?mt.error(e,n):(t.loaded_=!0,void("function"!=typeof window.WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(e){return"vttjserror"!==e.type?be(r,t):void mt.error("vttjs failed to load, stopping trying to process "+t.src)}):be(r,t)))}))}function we(){}function Te(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Se(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}return e=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/),e?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function Ee(){this.values=Kn(null)}function ke(e,t,n,r){var i,o,a=r?e.split(r):[e];for(i in a)"string"==typeof a[i]&&2===(o=a[i].split(n)).length&&t(o[0].trim(),o[1].trim())}function Ae(e,t,n){function r(){var t=Se(e);if(null===t)throw new Te(Te.Errors.BadTimeStamp,"Malformed timestamp: "+o);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(){e=e.replace(/^\s+/,"")}var o=e;if(i(),t.startTime=r(),i(),"--\x3e"!==e.substr(0,3))throw new Te(Te.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);e=e.substr(3),i(),t.endTime=r(),i(),function(e,t){var r=new Ee;ke(e,function(e,t){switch(e){case"region":for(var i=n.length-1;0<=i;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];r.integer(e,a),r.percent(e,a)&&r.set("snapToLines",!1),r.alt(e,a,["auto"]),2===o.length&&r.alt("lineAlign",o[1],["start","center","end"]);break;case"position":o=t.split(","),r.percent(e,o[0]),2===o.length&&r.alt("positionAlign",o[1],["start","center","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");try{t.line=r.get("line","auto")}catch(e){}t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100);try{t.align=r.get("align","center")}catch(e){t.align=r.get("align","middle")}try{t.position=r.get("position","auto")}catch(e){t.position=r.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=r.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}function xe(e,t){for(var n,r,i,o,a,s,u,c,l,d,f=e.document.createElement("div"),h=f,p=[];null!==(n=function(){if(!t)return null;var e=t.match(/^([^<]*)(<[^>]*>?)?/);return e=e[1]||e[2],t=t.substr(e.length),e}());)"<"!==n[0]?h.appendChild(e.document.createTextNode((a=n,qn.innerHTML=a,a=qn.textContent,qn.textContent="",a))):"/"!==n[1]?(o=Se(n.substr(1,n.length-2)))?(r=e.document.createProcessingInstruction("timestamp",o),h.appendChild(r)):(i=n.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(c=i[1],l=i[3],d=void 0,d=Gn[c],(r=d?(d=e.document.createElement(d),(c=Yn[c])&&l&&(d[c]=l.trim()),d):null)&&(s=h,Xn[(u=r).localName]&&Xn[u.localName]!==s.localName||(i[2]&&((o=i[2].split(".")).forEach(function(e){var t=/^bg_/.test(e),e=t?e.slice(3):e;zn.hasOwnProperty(e)&&(e=zn[e],r.style[t?"background-color":"color"]=e)}),r.className=o.join(" ")),p.push(i[1]),h.appendChild(r),h=r))):p.length&&p[p.length-1]===n.substr(2).replace(">","")&&(p.pop(),h=h.parentNode);return f}function Ce(e){function t(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}var n=[],r="";if(!e||!e.childNodes)return"ltr";for(t(n,e);r=function e(n){if(!n||!n.length)return null;var r=n.pop(),i=r.textContent||r.innerText;if(i){var o=i.match(/^.*(\n|\r)/);return o?o[n.length=0]:i}return"ruby"===r.tagName?e(n):r.childNodes?(t(n,r),e(n)):void 0}(n);)for(var i=0;i<r.length;i++)if(function(e){for(var t=0;t<Jn.length;t++){var n=Jn[t];if(e>=n[0]&&e<=n[1])return 1}}(r.charCodeAt(i)))return"rtl";return"ltr"}function Oe(){}function Pe(e,t,n){Oe.call(this),this.cue=t,this.cueDiv=xe(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:Ce(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":case"line-left":i=t.position;break;case"center":i=t.position-t.size/2;break;case"end":case"line-right":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Me(e){var t,n,r,i;e.div&&(t=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop,i=(i=e.div.childNodes)&&(i=i[0])&&i.getClientRects&&i.getClientRects(),e=e.div.getBoundingClientRect(),i=i?Math.max(i[0]&&i[0].height||0,e.height/i.length):0),this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||t,this.bottom=e.bottom||r+(e.height||t),this.width=e.width||n,this.lineHeight=void 0!==i?i:e.lineHeight}function Ie(e,t,n,r){var i,o=new Me(t),a=t.cue,s=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(a),u=[];if(a.snapToLines){switch(a.vertical){case"":u=["+y","-y"],i="height";break;case"rl":u=["+x","-x"],i="width";break;case"lr":u=["-x","+x"],i="width"}var c=o.lineHeight,l=c*Math.round(s),d=n[i]+c,f=u[0];Math.abs(l)>d&&(l=l<0?-1:1,l*=Math.ceil(d/c)*c),s<0&&(l+=""===a.vertical?n.height:n.width,u=u.reverse()),o.move(f,l)}else{var h=o.lineHeight/n.height*100;switch(a.lineAlign){case"center":s-=h/2;break;case"end":s-=h}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}u=["+y","-x","+x","-y"],o=new Me(t)}o=function(e,t){for(var i,o=new Me(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var u=e.intersectPercentage(n);u<a&&(i=new Me(e),a=u),e=new Me(o)}return i||o}(o,u),t.move(o.toCSSCompatValues(n))}function je(){}function De(e){return"string"==typeof e&&!!Zn[e.toLowerCase()]&&e.toLowerCase()}function Re(e,t,n){this.hasBeenReset=!1;var r="",i=!1,o=e,a=t,s=n,u=null,c="",l=!0,d="auto",f="start",h="auto",p="auto",g=100,y="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(e){r=""+e}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(e){i=!!e}},startTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");o=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");a=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return s},set:function(e){s=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(e){if(!1===(e="string"==typeof(e=e)&&!!Qn[e.toLowerCase()]&&e.toLowerCase()))throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");c=e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return l},set:function(e){l=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(e){(e=De(e))&&(f=e,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return h},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");h=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(e){(e=De(e))&&(p=e,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return y},set:function(e){if(!(e=De(e)))throw new SyntaxError("align: an invalid or illegal alignment string was specified.");y=e,this.hasBeenReset=!0}}}),this.displayState=void 0}function Le(e){return"number"==typeof e&&0<=e&&e<=100}function Ne(){var e=100,t=3,n=0,r=100,i=0,o=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Le(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!Le(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!Le(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!Le(e))throw new Error("ViewportAnchorY must be between 0 and 100.");o=e}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!Le(e))throw new Error("ViewportAnchorX must be between 0 and 100.");i=e}},scroll:{enumerable:!0,get:function(){return a},set:function(e){!1===(e="string"==typeof(e=e)&&!!tr[e.toLowerCase()]&&e.toLowerCase())||(a=e)}}})}function Fe(e,t,n){e.setTimeout(function(){return function e(t,n,i,o,a,s){void 0===t&&(t={}),void 0===n&&(n=[]),void 0===a&&(a=[]),void 0===s&&(s=!1);var u=n,n=u[0],c=u.slice(1);if("string"==typeof n)e(t,ir[n],i,o,a,s);else if(n){var l=Ve(o,n);if(!l.setSource)return a.push(l),e(t,c,i,o,a,s);l.setSource(r({},t),function(n,r){return n?e(t,c,i,o,a,s):(a.push(l),void e(r,t.type===r.type?c:ir[r.type],i,o,a,s))})}else c.length?e(t,c,i,o,a,s):s?i(t,a):e(t,ir["*"],i,o,a,!0)}(t,ir[t.type],n,e)},1)}function Ue(e,t,n,r){void 0===r&&(r=null);var i="call"+ee(n),i=e.reduce(Be(i),r),r=i===ar,i=r?null:t[n](i);return function(e,t,n,r){for(var i=e.length-1;0<=i;i--){var o=e[i];o[t]&&o[t](r,n)}}(e,n,i,r),i}function Be(e){return function(t,n){return t===ar?ar:n[e]?n[e](t):t}}function Ve(e,t){var n=or[e.id()],r=null;if(null==n)return r=t(e),or[e.id()]=[[t,r]],r;for(var i=0;i<n.length;i++){var o=n[i],a=o[0],o=o[1];a===t&&(r=o)}return null===r&&(r=t(e),n.push([t,r])),r}function He(e){return e=pe(e=void 0===e?"":e),lr[e.toLowerCase()]||""}function We(e){var t;return e=Array.isArray(e)?(t=[],e.forEach(function(e){e=We(e),Array.isArray(e)?t=t.concat(e):i(e)&&t.push(e)}),t):"string"==typeof e&&e.trim()?[Ke({src:e})]:i(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Ke(e)]:[]}function Ke(e){var t;return e.type||(t=He(e.src))&&(e.type=t),e}function qe(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Ge(e,t,n){try{e.style[t]=n}catch(e){return}}function ze(e){if((r=e.el()).hasAttribute("src"))return e.triggerSourceset(r.src),1;var t=e.$$("source"),n=[],r="";if(t.length){for(var i=0;i<t.length;i++){var o=t[i].src;o&&-1===n.indexOf(o)&&n.push(o)}return!!n.length&&(1===n.length&&(r=n[0]),e.triggerSourceset(r),!0)}}function Ye(e,t){for(var n={},r=0;r<e.length&&!((n=Object.getOwnPropertyDescriptor(e[r],t))&&n.set&&n.get);r++);return n.enumerable=!0,n.configurable=!0,n}function Xe(e){var t,n,r,i=e.el();i.resetSourceWatch_||(t={},n=Ye([e.el(),window.HTMLMediaElement.prototype,window.Element.prototype,pr],"innerHTML"),r=function(t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=t.apply(i,r);return ze(e),a}},["append","appendChild","insertAdjacentHTML"].forEach(function(e){i[e]&&(t[e]=i[e],i[e]=r(t[e]))}),Object.defineProperty(i,"innerHTML",te(n,{set:r(n.set)})),i.resetSourceWatch_=function(){i.resetSourceWatch_=null,Object.keys(t).forEach(function(e){i[e]=t[e]}),Object.defineProperty(i,"innerHTML",n)},e.one("sourceset",i.resetSourceWatch_))}function Je(e){var t,n,r,i;e.featuresSourceset&&((t=e.el()).resetSourceset_||(n=Ye([e.el(),window.HTMLMediaElement.prototype,gr],"src"),r=t.setAttribute,i=t.load,Object.defineProperty(t,"src",te(n,{set:function(r){return r=n.set.call(t,r),e.triggerSourceset(t.src),r}})),t.setAttribute=function(n,i){return i=r.call(t,n,i),/src/i.test(n)&&e.triggerSourceset(t.src),i},t.load=function(){var n=i.call(t);return ze(e)||(e.triggerSourceset(""),Xe(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):ze(e)||Xe(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=i,t.setAttribute=r,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}))}function $e(e,t,n,r){function i(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})}var o={configurable:!0,enumerable:!0,get:function(){var e=n();return i(e),e}};return(r=void 0===r||r)&&(o.set=i),Object.defineProperty(e,t,o)}function Qe(e){return Cr.hasOwnProperty(e)}function Ze(e){return Qe(e)?Cr[e]:void 0}function et(e,t,n){n=(n?"before":"")+"pluginsetup",e.trigger(n,t),e.trigger(n+":"+t.name,t)}function tt(e,t){function n(){et(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return Or(this,e),et(this,{name:e,plugin:t,instance:n}),n}return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function nt(e,t){return t.prototype.name=e,function(){et(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=kr(t,[this].concat(r));return this[e]=function(){return o},et(this,o.getEventHash()),o}}function rt(e,t){e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),o=Math.floor(t/60%60),t=Math.floor(t/3600);return(i=0<(i=isNaN(e)||e===1/0?r=n="-":i)||0<t?i+":":"")+(r=((i||10<=o)&&r<10?"0"+r:r)+":")+(n=n<10?"0"+n:n)}function it(e,t,n){if(o=it.getPlayer(e))return t&&mt.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&o.ready(n),o;var r="string"==typeof e?$t("#"+Dr(e)):e;if(!l(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||mt.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),ut("beforesetup").forEach(function(e){e=e(r,te(t)),i(e)&&!Array.isArray(e)?t=te(t,e):mt.error("please return an object in beforesetup hooks")});var o=new(yn.getComponent("Player"))(r,t,n);return ut("setup").forEach(function(e){return e(o)}),o}for(var ot,at="7.21.5-nmp-1",st={},ut=function(e,t){return st[e]=st[e]||[],t&&(st[e]=st[e].concat(t)),st[e]},ct=function(e,t){return!((t=ut(e).indexOf(t))<=-1||(st[e]=st[e].slice(),st[e].splice(t,1),0))},lt={prefixed:!0},dt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],ft=dt[0],ht=0;ht<dt.length;ht++)if(dt[ht][1]in document){ot=dt[ht];break}if(ot){for(var pt=0;pt<ot.length;pt++)lt[ft[pt]]=ot[pt];lt.prefixed=ot[0]!==ft[0]}var gt,yt=[],vt=function(e,t){return function(n,r,i){var o,a=t.levels[r],r=new RegExp("^("+a+")$");"log"!==n&&i.unshift(n.toUpperCase()+":"),i.unshift(e+":"),yt&&(yt.push([].concat(i)),o=yt.length-1e3,yt.splice(0,0<o?o:0)),!window.console||(o=(o=window.console[n])||"debug"!==n?o:window.console.info||window.console.log)&&a&&r.test(n)&&o[Array.isArray(i)?"apply":"call"](window.console,i)}},mt=function e(t){function n(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i("log",r,t)}var r="info",i=vt(t,n);return n.createLogger=function(n){return e(t+": "+n)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},n.level=function(e){if("string"==typeof e){if(!n.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');r=e}return r},(n.history=function(){return yt?[].concat(yt):[]}).filter=function(e){return(yt||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},n.history.clear=function(){yt&&(yt.length=0)},n.history.disable=function(){null!==yt&&(yt.length=0,yt=null)},n.history.enable=function(){null===yt&&(yt=[])},n.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("error",r,t)},n.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("warn",r,t)},n.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("debug",r,t)},n}("VIDEOJS"),bt=mt.createLogger,_t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},wt=e(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.apply(this,arguments)}e.exports=t}),Tt=Object.prototype.toString,St=function(e){return i(e)?Object.keys(e):[]},Et=window.navigator&&window.navigator.userAgent||"",kt=/AppleWebKit\/([\d.]+)/i.exec(Et),At=kt?parseFloat(kt.pop()):null,xt=/iPod/i.test(Et),Ct=(qt=Et.match(/OS (\d+)_/i))&&qt[1]?qt[1]:null,Ot=/Android/i.test(Et),Pt=function(){var e=Et.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),Mt=Ot&&Pt<5&&At<537,It=/Firefox/i.test(Et),jt=/Edg/i.test(Et),Dt=!jt&&(/Chrome/i.test(Et)||/CriOS/i.test(Et)),Rt=(Jt=Et.match(/(Chrome|CriOS)\/(\d+)/))&&Jt[2]?parseFloat(Jt[2]):null,Lt=xn=!(xn=(xn=/MSIE\s(\d+)\.\d/.exec(Et))&&parseFloat(xn[1]))&&/Trident\/7.0/i.test(Et)&&/rv:11.0/.test(Et)?11:xn,kt=/Safari/i.test(Et)&&!Dt&&!Ot&&!jt,Nt=/Tizen/i.test(Et),Ft=/Smart/i.test(Et),Ut=/Xbox/i.test(Et),Bt=/VIDAA/i.test(Et),Vt=/Vestel/i.test(Et),Ht=/WebView\/3.0/i.test(Et),Wt=/Windows/i.test(Et),Kt=Boolean(c()&&("ontouchstart"in window||window.navigator.maxTouchPoints||window.DocumentTouch&&window.document instanceof window.DocumentTouch)),qt=/iPad/i.test(Et)||kt&&Kt&&!/iPhone/i.test(Et),Gt=/iPhone/i.test(Et)&&!qt,zt=Gt||qt||xt,Yt=(kt||zt)&&!Dt,At=/Hbbtv/i.test(Et),Xt=Nt&&At,Jt=Object.freeze({__proto__:null,IS_IPOD:xt,IOS_VERSION:Ct,IS_ANDROID:Ot,ANDROID_VERSION:Pt,IS_NATIVE_ANDROID:Mt,IS_FIREFOX:It,IS_EDGE:jt,IS_CHROME:Dt,CHROME_VERSION:Rt,IE_VERSION:Lt,IS_SAFARI:kt,IS_TIZEN:Nt,IS_SMARTTV:Ft,IS_XBOX:Ut,IS_VIDAA:Bt,IS_VESTEL:Vt,IS_WEBVIEW:Ht,IS_WINDOWS:Wt,TOUCH_ENABLED:Kt,IS_IPAD:qt,IS_IPHONE:Gt,IS_IOS:zt,IS_ANY_SAFARI:Yt,IS_HBBTV:At,IS_TVKEY_CAPABLE:Xt}),$t=d("querySelector"),Qt=d("querySelectorAll"),Zt=Object.freeze({__proto__:null,isReal:c,isEl:l,isInFrame:function(){try{return window.parent!==window.self}catch(e){return!0}},createEl:f,textContent:h,prependTo:p,hasClass:g,addClass:y,removeClass:v,toggleClass:m,setAttributes:b,getAttributes:_,getAttribute:w,setAttribute:T,removeAttribute:S,blockTextSelection:function(){document.body.focus(),document.onselectstart=function(){return!1}},unblockTextSelection:function(){document.onselectstart=function(){return!0}},getBoundingClientRect:function(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),n.height||(n.height=parseFloat(a(e,"height"))),n.width||(n.width=parseFloat(a(e,"width"))),n}},findPosition:E,getPointerPosition:function(e,t){var n={x:0,y:0};if(zt)for(var r=e;r&&"html"!==r.nodeName.toLowerCase();){var i,o=a(r,"transform");/^matrix/.test(o)?(i=o.slice(7,-1).split(/,\s/).map(Number),n.x+=i[4],n.y+=i[5]):/^matrix3d/.test(o)&&(o=o.slice(9,-1).split(/,\s/).map(Number),n.x+=o[12],n.y+=o[13]),r=r.parentNode}var s={},u=E(t.target),c=E(e),l=c.width,d=c.height,e=t.offsetY-(c.top-u.top),u=t.offsetX-(c.left-u.left);return t.changedTouches&&(u=t.changedTouches[0].pageX-c.left,e=t.changedTouches[0].pageY+c.top,zt&&(u-=n.x,e-=n.y)),s.y=1-Math.max(0,Math.min(1,e/d)),s.x=Math.max(0,Math.min(1,u/l)),s},isTextNode:k,emptyEl:A,normalizeContent:x,appendContent:C,insertContent:O,isSingleLeftClick:function(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons},$:$t,$$:Qt}),en=!1,tn=function(){if(!1!==gt.options.autoSetup){var e=Array.prototype.slice.call(document.getElementsByTagName("video")),t=Array.prototype.slice.call(document.getElementsByTagName("audio")),n=Array.prototype.slice.call(document.getElementsByTagName("video-js")),r=e.concat(t,n);if(r&&0<r.length)for(var i=0,o=r.length;i<o;i++){var a=r[i];if(!a||!a.getAttribute){P(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&gt(a)}else en||P(1)}};c()&&("complete"===document.readyState?M():window.addEventListener("load",M));var nn=3;window.WeakMap||(Fn=function(){function e(){this.vdata="vdata"+Math.floor(window.performance&&window.performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||nn++;return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];mt("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var rn,on,an=new(window.WeakMap?WeakMap:Fn),sn=function(){if("boolean"!=typeof rn){rn=!1;try{var e=Object.defineProperty({},"passive",{get:function(){rn=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}return rn},un=["touchstart","touchmove"],cn=Object.freeze({__proto__:null,fixEvent:L,on:N,off:F,trigger:U,one:B,any:V});W.prototype.allowedEvents_={},W.prototype.addEventListener=W.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},N(this,e,t),this.addEventListener=n},W.prototype.removeEventListener=W.prototype.off=function(e,t){F(this,e,t)},W.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},B(this,e,t),this.addEventListener=n},W.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},V(this,e,t),this.addEventListener=n},W.prototype.dispatchEvent=W.prototype.trigger=function(e){var t=e.type||e;e=L(e="string"==typeof e?{type:t}:e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),U(this,e)},W.prototype.queueTrigger=function(e){var t=this;on=on||new Map;var n=e.type||e,r=on.get(this);r||(r=new Map,on.set(this,r));var i=r.get(n);r.delete(n),window.clearTimeout(i),i=window.setTimeout(function(){r.delete(n),0===r.size&&(r=null,on.delete(t)),t.trigger(e)},0),r.set(n,i)};var ln=function(e){return e instanceof W||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},dn={on:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,o=X(this,n,"on"),a=o.isTargetingSelf,s=o.target,u=o.type,c=o.listener;J(s,"on",u,c),a||((i=function(){return e.off(s,u,c)}).guid=c.guid,(a=function(){return e.off("dispose",i)}).guid=c.guid,J(this,"on","dispose",i),J(s,"on","dispose",a))},one:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=X(this,n,"one"),o=i.isTargetingSelf,a=i.target,s=i.type,u=i.listener;o?J(a,"one",s,u):((o=function t(){e.off(a,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];u.apply(null,r)}).guid=u.guid,J(a,"one",s,o))},any:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=X(this,n,"any"),o=i.isTargetingSelf,a=i.target,s=i.type,u=i.listener;o?J(a,"any",s,u):((o=function t(){e.off(a,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];u.apply(null,r)}).guid=u.guid,J(a,"any",s,o))},off:function(e,t,n){!e||q(e)?F(this.eventBusEl_,e,t):(t=t,G(e=e,this,"off"),z(t,this,"off"),Y(n,this,"off"),n=H(this,n),this.off("dispose",n),e.nodeName?(F(e,t,n),F(e,"dispose",n)):ln(e)&&(e.off(t,n),e.off("dispose",n)))},trigger:function(e,t){G(this.eventBusEl_,this,"trigger");var n=e&&"string"!=typeof e?e.type:e;if(!q(n)){if(n="Invalid event type for "+K(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.",!e)throw new Error(n);(this.log||mt).error(n)}return U(this.eventBusEl_,e,t)}},fn={state:{},setState:function(e){var t,r=this;return n(e="function"==typeof e?e():e,function(e,n){r.state[n]!==e&&((t=t||{})[n]={from:r.state[n],to:e}),r.state[n]=e}),t&&ln(this)&&this.trigger({changes:t,type:"statechanged"}),t}},hn=window.Map||function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var n in this.map_)e.call(t,this.map_[n],n,this)},e}(),pn=window.Set||function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}(),gn=e(function(e,t){function n(e){if(!e||"object"!=typeof e||(t=e.which||e.keyCode||e.charCode)&&(e=t),"number"==typeof e)return s[e];var t=String(e),e=r[t.toLowerCase()];return e||((e=i[t.toLowerCase()])?e:1===t.length?t.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){if(e=r[t.toLowerCase()])return e===n;if(e=i[t.toLowerCase()])return e===n}else if("number"==typeof t)return t===n;return!1}};for(var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91},o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var a,s=t.names=t.title={};for(o in r)s[r[o]]=o;for(a in i)r[a]=i[a]});gn.code,gn.codes,gn.aliases,gn.names,gn.title;var yn=function(){function e(e,t,n){var r=this;!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=te({},this.options_),t=this.options_=te(this.options_,t),this.id_=t.id||t.el&&t.el.id,this.id_||(e=e&&e.id&&e.id()||"no_player",this.id_=e+"_component_"+nn++),this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(function(e){return r.addClass(e)}),!1!==t.evented&&($(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Q(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new pn,this.setIntervalIds_=new pn,this.rafIds_=new pn,this.namedRafs_=new hn,(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(e){if(void 0===e&&(e={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;0<=t;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e&&(this.options_=te(this.options_,e)),this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return f(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),o=i&&i[r],r=r&&r.split("-")[0],r=i&&i[r],n=n;return o&&o[e]?n=o[e]:r&&r[e]&&(n=r[e]),n=t?n.replace(/\{(\d+)\}/g,function(e,n){return n=t[n-1],void 0===n?e:n}):n},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var t=t.reduce(function(e,t){return e.concat(t)},[]),r=this,i=0;i<t.length;i++)if(!(r=r.getChild(t[i]))||!r.getChild)return;return r},t.addChild=function(t,n,r){if(void 0===n&&(n={}),void 0===r&&(r=this.children_.length),"string"==typeof t){var i=ee(t),o=n.componentClass||i;n.name=i;var a=e.getComponent(o);if(!a)throw new Error("Component "+o+" does not exist");if("function"!=typeof a)return null;a=new a(this.player_||this,n)}else a=t;return a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(r,0,a),a.parentComponent_=this,"function"==typeof a.id&&(this.childIndex_[a.id()]=a),(i=i||a.name&&ee(a.name()))&&(this.childNameIndex_[i]=a,this.childNameIndex_[Z(i)]=a),"function"==typeof a.el&&a.el()&&(i=null,this.children_[r+1]&&(this.children_[r+1].el_?i=this.children_[r+1].el_:l(this.children_[r+1])&&(i=this.children_[r+1])),this.contentEl().insertBefore(a.el(),i)),a},t.removeChild=function(e){if((e="string"==typeof e?this.getChild(e):e)&&this.children_){for(var t,n=!1,r=this.children_.length-1;0<=r;r--)if(this.children_[r]===e){n=!0,this.children_.splice(r,1);break}n&&(e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[ee(e.name())]=null,this.childNameIndex_[Z(e.name())]=null,(t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el()))}},t.initChildren=function(){var t,n,r,i=this,o=this.options_.children;o&&(t=this.options_,n=e.getComponent("Tech"),(r=Array.isArray(o)?o:Object.keys(o)).concat(Object.keys(this.options_).filter(function(e){return!r.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var t,e="string"==typeof e?o[t=e]||i.options_[t]||{}:(t=e.name,e);return{name:t,opts:e}}).filter(function(t){return(t=e.getComponent(t.opts.componentClass||ee(t.name)))&&!n.isTech(t)}).forEach(function(e){var n=e.name,e=e.opts;!1!==(e=void 0!==t[n]?t[n]:e)&&((e=!0===e?{}:e).playerOptions=i.options_.playerOptions,(e=i.addChild(n,e))&&(i[n]=e))}))},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},t.$=function(e,t){return $t(e,t||this.contentEl())},t.$$=function(e,t){return Qt(e,t||this.contentEl())},t.hasClass=function(e){return g(this.el_,e)},t.addClass=function(e){y(this.el_,e)},t.removeClass=function(e){v(this.el_,e)},t.toggleClass=function(e,t){m(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return w(this.el_,e)},t.setAttribute=function(e,t){T(this.el_,e,t)},t.removeAttribute=function(e){S(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){return void 0!==t?(-1!==(""+(t=null===t||t!=t?0:t)).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"))):this.el_?(t=this.el_.style[e],n=t.indexOf("px"),-1!==n?parseInt(t.slice(0,n),10):parseInt(this.el_["offset"+ee(e)],10)):0},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");return t=a(this.el_,e),0!==(t=parseFloat(t))&&!isNaN(t)||(e="offset"+ee(e),t=this.el_[e]),t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(gn.isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){function e(){t=!1}var t,n=0,r=null;this.on("touchstart",function(e){1===e.touches.length&&(r={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},n=window.performance.now(),t=!0)}),this.on("touchmove",function(e){var n;1<e.touches.length?t=!1:r&&(n=e.touches[0].pageX-r.pageX,e=e.touches[0].pageY-r.pageY,10<Math.sqrt(n*n+e*e)&&(t=!1))}),this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(r=null)===t&&window.performance.now()-n<200&&(e.preventDefault(),this.trigger("tap"))})},t.enableTouchActivity=function(){var e,t,n;this.player()&&this.player().reportUserActivity&&(e=H(this.player(),this.player().reportUserActivity),this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}),n=function(n){e(),this.clearInterval(t)},this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n))},t.setTimeout=function(e,t){var n,r=this;return e=H(this,e),this.clearTimersOnDispose_(),n=window.setTimeout(function(){r.setTimeoutIds_.has(n)&&r.setTimeoutIds_.delete(n),e()},t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),window.clearTimeout(e)),e},t.setInterval=function(e,t){return e=H(this,e),this.clearTimersOnDispose_(),t=window.setInterval(e,t),this.setIntervalIds_.add(t),t},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),window.clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=H(this,e),t=window.requestAnimationFrame(function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()}),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var n=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=H(this,t);var r=this.requestAnimationFrame(function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)});return this.namedRafs_.set(e,r),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),window.cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var n=t[0],r=t[1];e[n].forEach(function(t,n){return e[r](n)})}),e.clearingTimersOnDispose_=!1}))},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var r=e.getComponent("Tech"),i=r&&r.isTech(n),r=e===n||e.prototype.isPrototypeOf(n.prototype);if(i||!r){var o=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass";throw new Error('Illegal component, "'+t+'"; '+o+".")}if(t=ee(t),e.components_||(e.components_={}),o=e.getComponent("Player"),"Player"===t&&o&&o.players){var a=o.players,o=Object.keys(a);if(a&&0<o.length&&o.map(function(e){return a[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[Z(t)]=n},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();yn.prototype.supportsRaf_="function"==typeof window.requestAnimationFrame&&"function"==typeof window.cancelAnimationFrame,yn.registerComponent("Component",yn);var vn=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},mn=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t};ae.prototype.code=0,ae.prototype.message="",ae.prototype.status=null,ae.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ae.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var bn=0;bn<ae.errorTypes.length;bn++)ae[ae.errorTypes[bn]]=bn,ae.prototype[ae.errorTypes[bn]]=bn;var _n=function(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(e){r=e}return[r,n]},wn=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=ce(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(ce))},Tn=function(e,t){return e.forEach(function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return n.addCue(e)})}),t.textTracks()},Sn="vjs-modal-dialog",En=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleKeyDown_=function(e){return r.handleKeyDown(e)},r.close_=function(e){return r.close(e)},r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=f("div",{className:Sn+"-content"},{role:"document"}),r.descEl_=f("p",{className:Sn+"-description vjs-control-text",id:r.el().getAttribute("aria-describedby")}),h(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}mn(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return Sn+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){var e;this.opened_||(e=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){var e;this.opened_&&(e=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose())},n.closeable=function(e){var t,n;return"boolean"==typeof e&&(t=this.closeable_=!!e,n=this.getChild("closeButton"),t&&!n&&(e=this.contentEl_,this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(n,"close",this.close_)),!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())),this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),O(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t),(t=this.getChild("closeButton"))&&n.appendChild(t.el_)},n.empty=function(){this.trigger("beforemodalempty"),A(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=document.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),gn.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(gn.isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),r=this.el_.querySelector(":focus"),i=0;i<n.length;i++)if(r===n[i]){t=i;break}document.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof window.HTMLAnchorElement||e instanceof window.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof window.HTMLInputElement||e instanceof window.HTMLSelectElement||e instanceof window.HTMLTextAreaElement||e instanceof window.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof window.HTMLIFrameElement||e instanceof window.HTMLObjectElement||e instanceof window.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},t}(yn);En.prototype.options_={pauseOnOpen:!0,temporary:!0},yn.registerComponent("ModalDialog",En);var kn,An=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(vn(n),"length",{get:function(){return this.tracks_.length}});for(var r=0;r<t.length;r++)n.addTrack(t[r]);return n}mn(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},ln(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,n=0,r=this.length;n<r;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(W);for(kn in An.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},An.prototype.allowedEvents_)An.prototype["on"+kn]=null;var xn=function(e){function t(t){for(var n,r=(t=void 0===t?[]:t).length-1;0<=r;r--)if(t[r].enabled){le(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,n}mn(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&le(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,le(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(An),xt=function(e){function t(t){for(var n,r=(t=void 0===t?[]:t).length-1;0<=r;r--)if(t[r].selected){de(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(vn(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}mn(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&de(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,de(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(An),Ct=function(e){function t(){return e.apply(this,arguments)||this}mn(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(An),jt=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),Cn=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){function t(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}var n=this.length||0,r=0,i=e.length;if(this.cues_=e,this.length_=e.length,n<i)for(r=n;r<i;r++)t.call(this,r)},t.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}(),On={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Pn={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Mn={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},In={disabled:"disabled",hidden:"hidden",showing:"showing"},kt=function(e){function t(t){void 0===t&&(t={});var n,r=e.call(this)||this,i={id:t.id||"vjs_track_"+nn++,kind:t.kind||"",language:t.language||""},o=t.label||"";for(n in i)!function(e){Object.defineProperty(vn(r),e,{get:function(){return i[e]},set:function(){}})}(n);return Object.defineProperty(vn(r),"label",{get:function(){return o},set:function(e){e!==o&&(o=e,this.trigger("labelchange"))}}),r}return mn(t,e),t}(W),qt=Object.freeze({__proto__:null,parseUrl:fe,getAbsoluteURL:he,getFileExtension:pe,isCrossOrigin:ge}),At="undefined"!=typeof window?window:void 0!==_t?_t:"undefined"!=typeof self?self:{},jn=At,Dn=function(e){if(!e)return!1;var t=Rn.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},Rn=Object.prototype.toString;ve.httpHandler=function(e,t){return void 0===t&&(t=!1),function(n,r,i){if(n)e(n);else if(400<=r.statusCode&&r.statusCode<=599){if(n=i,t)if(jn.TextDecoder){r=function(e){return void 0===e&&(e=""),e.toLowerCase().split(";").reduce(function(e,t){var n=t.split("="),t=n[0],n=n[1];return"charset"===t.trim()?n.trim():e},"utf-8")}(r.headers&&r.headers["content-type"]);try{n=new TextDecoder(r).decode(i)}catch(n){}}else n=String.fromCharCode.apply(null,new Uint8Array(i));e({cause:n})}else e(null,i)}};/**
     * @license
     * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
     * Copyright (c) 2014 David Björklund
     * Available under the MIT license
     * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
     */
var Ln=function(e){var t={};return e&&e.trim().split("\n").forEach(function(e){var n=e.indexOf(":"),r=e.slice(0,n).trim().toLowerCase(),n=e.slice(n+1).trim();void 0===t[r]?t[r]=n:Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]}),t},Nn=ve,Fn=ve;ve.XMLHttpRequest=jn.XMLHttpRequest||function(){},ve.XDomainRequest="withCredentials"in new ve.XMLHttpRequest?ve.XMLHttpRequest:jn.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)!function(e){ve["delete"===e?"del":e]=function(t,n,r){return(n=ye(t,n,r)).method=e.toUpperCase(),me(n)}}(e[n])}(["get","put","post","patch","head","delete"]),Nn.default=Fn;var Un=function(e){function t(t){var n;if(!(t=void 0===t?{}:t).tech)throw new Error("A tech was not provided.");var t=te(t,{kind:Mn[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=In[t.mode]||"disabled",i=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(r="hidden"),(n=e.call(this,t)||this).tech_=t.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var o=new Cn(n.cues_),a=new Cn(n.activeCues_),s=!1;return n.timeupdateHandler=H(vn(n),function(e){void 0===e&&(e={}),this.tech_.isDisposed()||(this.tech_.isReady_&&(this.activeCues=this.activeCues,s&&(this.trigger("cuechange"),s=!1)),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}),n.tech_.one("dispose",function(){n.stopTracking()}),"disabled"!==r&&n.startTracking(),Object.defineProperties(vn(n),{default:{get:function(){return i},set:function(){}},mode:{get:function(){return r},set:function(e){In[e]&&r!==e&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||_e(this.src,this),this.stopTracking(),"disabled"!==r&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return a;for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];(i.startTime<=e&&i.endTime>=e||i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e)&&t.push(i)}if(s=!1,t.length!==this.activeCues_.length)s=!0;else for(var o=0;o<t.length;o++)-1===this.activeCues_.indexOf(t[o])&&(s=!0);return this.activeCues_=t,a.setCues_(this.activeCues_),a},set:function(){}}}),t.src?(n.src=t.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&_e(n.src,vn(n))):n.loaded_=!0,n}mn(t,e);var n=t.prototype;return n.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},n.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},n.addCue=function(e){var t=e;if(t.constructor&&"VTTCue"!==t.constructor.name){for(var n in t=new window.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var r=this.tech_.textTracks(),i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(kt);Un.prototype.allowedEvents_={cuechange:"cuechange"},At=function(e){function t(t){var n=te(t=void 0===t?{}:t,{kind:Pn[t.kind]||""}),t=e.call(this,n)||this,r=!1;return Object.defineProperty(vn(t),"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),n.enabled&&(t.enabled=n.enabled),t.loaded_=!0,t}return mn(t,e),t}(kt),Fn=function(e){function t(t){var n=te(t=void 0===t?{}:t,{kind:On[t.kind]||""}),t=e.call(this,n)||this,r=!1;return Object.defineProperty(vn(t),"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),n.selected&&(t.selected=n.selected),t}return mn(t,e),t}(kt),kt=function(e){function t(t){var n;void 0===t&&(t={});var r=e.call(this)||this,i=new Un(t);return r.kind=i.kind,r.src=i.src,r.srclang=i.language,r.label=i.label,r.default=i.default,Object.defineProperties(vn(r),{readyState:{get:function(){return n}},track:{get:function(){return i}}}),n=0,i.addEventListener("loadeddata",function(){n=2,r.trigger({type:"load",target:vn(r)})}),r}return mn(t,e),t}(W),kt.prototype.allowedEvents_={load:"load"},kt.NONE=0,kt.LOADING=1,kt.LOADED=2,kt.ERROR=3;var Bn={audio:{ListClass:xn,TrackClass:At,capitalName:"Audio"},video:{ListClass:xt,TrackClass:Fn,capitalName:"Video"},text:{ListClass:Ct,TrackClass:Un,capitalName:"Text"}};Object.keys(Bn).forEach(function(e){Bn[e].getterName=e+"Tracks",Bn[e].privateName=e+"Tracks_"});var Vn={remoteText:{ListClass:Ct,TrackClass:Un,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:jt,TrackClass:kt,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Hn=wt({},Bn,Vn);Vn.names=Object.keys(Vn),Bn.names=Object.keys(Bn),Hn.names=[].concat(Vn.names).concat(Bn.names);var _t=void 0!==_t?_t:"undefined"!=typeof window?window:{},Wn="undefined"!=typeof document?document:(Wn=_t["__GLOBAL_DOCUMENT_CACHE@4"])||(_t["__GLOBAL_DOCUMENT_CACHE@4"]={}),_t=Wn,Kn=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return we.prototype=e,new we};((Te.prototype=Kn(Error.prototype)).constructor=Te).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Ee.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var qn=_t.createElement&&_t.createElement("textarea"),Gn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},zn={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Yn={v:"title",lang:"lang"},Xn={rt:"ruby"},Jn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Oe.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},Oe.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(Pe.prototype=Kn(Oe.prototype)).constructor=Pe,Me.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Me.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Me.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Me.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Me.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Me.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Me.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Me.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},je.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},je.convertCueToDOMTree=function(e,t){return e&&t?xe(e,t):null},je.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1}(t)){var i=[],o=Me.getSimpleBoxPosition(r),a={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var n,s,u=0;u<t.length;u++)s=t[u],n=new Pe(e,s,a),r.appendChild(n.div),Ie(0,n,o,i),s.displayState=n.div,i.push(Me.getSimpleBoxPosition(n))}()}else for(var s=0;s<t.length;s++)r.appendChild(t[s].displayState)},(je.Parser=function(e,t,n){n||(n=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof Te))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function t(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var r,i=(r=t()).match(/^WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Te(Te.Errors.BadSignature);n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:r=t(),n.state){case"HEADER":/:/.test(r)?function(e){e.match(/X-TIMESTAMP-MAP/)?ke(e,function(e,t){var r;"X-TIMESTAMP-MAP"===e&&(t=t,r=new Ee,ke(t,function(e,t){switch(e){case"MPEGT":r.integer(e+"S",t);break;case"LOCA":r.set(e+"L",Se(t))}},/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:r.get("MPEGTS"),LOCAL:r.get("LOCAL")}))},/=/):ke(e,function(e,t){var r;"Region"===e&&(t=t,r=new Ee,ke(t,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var i=new Ee;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;r.set(e+"X",i.get("x")),r.set(e+"Y",i.get("y"));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id")&&((t=new(n.vttjs.VTTRegion||n.window.VTTRegion)).width=r.get("width",100),t.lines=r.get("lines",3),t.regionAnchorX=r.get("regionanchorX",0),t.regionAnchorY=r.get("regionanchorY",100),t.viewportAnchorX=r.get("viewportanchorX",0),t.viewportAnchorY=r.get("viewportanchorY",100),t.scroll=r.get("scroll",""),n.onregion&&n.onregion(t),n.regionList.push({id:r.get("id"),region:t})))},/:/)}(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{Ae(r,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var a=-1!==r.indexOf("--\x3e");if(!r||a&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Te(Te.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var $n=je,Qn={"":1,lr:1,rl:1},Zn={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};Re.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var er=Re,tr={"":!0,up:!0},nr=e(function(e){e=e.exports={WebVTT:$n,VTTCue:er,VTTRegion:Ne},jn.vttjs=e,jn.WebVTT=e.WebVTT;var t=e.VTTCue,n=e.VTTRegion,r=jn.VTTCue,i=jn.VTTRegion;e.shim=function(){jn.VTTCue=t,jn.VTTRegion=n},e.restore=function(){jn.VTTCue=r,jn.VTTRegion=i},jn.VTTCue||e.shim()});nr.WebVTT,nr.VTTCue,nr.VTTRegion;var rr=function(e){function t(t,n){var r;return void 0===n&&(n=function(){}),(t=void 0===t?{}:t).reportTouchActivity=!1,(r=e.call(this,null,t,n)||this).onDurationChange_=function(e){return r.onDurationChange(e)},r.trackProgress_=function(e){return r.trackProgress(e)},r.trackCurrentTime_=function(e){return r.trackCurrentTime(e)},r.stopTrackingCurrentTime_=function(e){return r.stopTrackingCurrentTime(e)},r.disposeSourceHandler_=function(e){return r.disposeSourceHandler(e)},r.queuedHanders_=new Set,r.hasStarted_=!1,r.on("playing",function(){this.hasStarted_=!0}),r.on("loadstart",function(){this.hasStarted_=!1}),Hn.names.forEach(function(e){e=Hn[e],t&&t[e.getterName]&&(r[e.privateName]=t[e.getterName])}),r.featuresProgressEvents||r.manualProgressOn(),r.featuresTimeupdateEvents||r.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(r["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?r.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(r.featuresNativeTextTracks=!0),r.featuresNativeTextTracks||r.emulateTextTracks(),r.preloadTextTracks=!1!==t.preloadTextTracks,r.autoRemoteTextTracks_=new Hn.text.ListClass,r.initTrackListeners(),t.nativeControlsForTouch||r.emitTapEvents(),r.constructor&&(r.name_=r.constructor.name||"Unknown Tech"),r}mn(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(H(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return ie(0,0)},n.bufferedPercent=function(){return oe(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(Bn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(e){for(var n=t[e+"Tracks"]()||[],r=n.length;r--;){var i=n[r];"text"===e&&t.removeRemoteTextTrack(i),n.removeTrack(i)}})},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return void 0!==e&&(this.error_=new ae(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?ie(0,0):ie()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;Bn.names.forEach(function(t){function n(){e.trigger(t+"trackchange")}var r=Bn[t],i=e[r.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),e.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})},n.addWebVttScript_=function(){var e,t=this;window.WebVTT||(document.body.contains(this.el())?!this.options_["vtt.js"]&&o(nr)&&0<Object.keys(nr).length?this.trigger("vttjsloaded"):((e=document.createElement("script")).src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),window.WebVTT=!0,this.el().parentNode.appendChild(e)):this.ready(this.addWebVttScript_))},n.emulateTextTracks=function(){function e(e){return o.addTrack(e.track)}function t(e){return o.removeTrack(e.track)}function n(){return i.trigger("texttrackchange")}function r(){n();for(var e=0;e<o.length;e++){var t=o[e];t.removeEventListener("cuechange",n),"showing"===t.mode&&t.addEventListener("cuechange",n)}}var i=this,o=this.textTracks(),a=this.remoteTextTracks();a.on("addtrack",e),a.on("removetrack",t),this.addWebVttScript_(),r(),o.addEventListener("change",r),o.addEventListener("addtrack",r),o.addEventListener("removetrack",r),this.on("dispose",function(){a.off("addtrack",e),a.off("removetrack",t),o.removeEventListener("change",r),o.removeEventListener("addtrack",r),o.removeEventListener("removetrack",r);for(var i=0;i<o.length;i++)o[i].removeEventListener("cuechange",n)})},n.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,r,i){void 0===i&&(i={});var o=e.textTracks();return i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e,i=new Hn.text.TrackClass(i),o.addTrack(i),i}(this,e,t,n)},n.createRemoteTextTrack=function(e){return e=te(e,{tech:this}),new Vn.remoteTextEl.TrackClass(e)},n.addRemoteTextTrack=function(e,t){var n=this,r=this.createRemoteTextTrack(e=void 0===e?{}:e);return!0!==t&&!1!==t&&(mt.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!0!==t&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(r.track)}),r},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||window.Promise;if(e)return e.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.requestVideoFrameCallback=function(e){var t=this,n=nn++;return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",function(){t.queuedHanders_.has(n)&&(t.queuedHanders_.delete(n),e())})):this.requestNamedAnimationFrame(n,e),n},n.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ee(e),t.techs_[e]=n,t.techs_[Z(e)]=n,"Tech"!==e&&(Yt?t.defaultTechOrder_.push(e):t.defaultTechOrder_.unshift(e)),n},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=ee(e),window&&window.videojs&&window.videojs[e]?(mt.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),window.videojs[e]):void 0)},t}(yn);Hn.names.forEach(function(e){var t=Hn[e];rr.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),rr.prototype.featuresVolumeControl=!0,rr.prototype.featuresMuteControl=!0,rr.prototype.featuresFullscreenResize=!1,rr.prototype.featuresPlaybackRate=!1,rr.prototype.featuresProgressEvents=!1,rr.prototype.featuresSourceset=!1,rr.prototype.featuresTimeupdateEvents=!1,rr.prototype.featuresNativeTextTracks=!1,rr.prototype.featuresVideoFrameCallback=!1,rr.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var r=(r=e.sourceHandlers)||(e.sourceHandlers=[]);void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){for(var n,r=e.sourceHandlers||[],i=0;i<r.length;i++)if(n=r[i].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var r=e.sourceHandlers||[],i=0;i<r.length;i++)if(r[i].canHandleSource(t,n))return r[i];return null},e.canPlaySource=function(t,n){var r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""},["seekable","seeking","duration","currentTime","setCurrentTime"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:mt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},yn.registerComponent("Tech",rr),rr.registerTech("Tech",rr),rr.defaultTechOrder_=[];var ir={},or={},ar={},sr={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},ur={setCurrentTime:1,setMuted:1,setVolume:1},cr={play:1,pause:1},lr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};Wn=function(e){function t(t,n,r){var i=te({createEl:!1},n),r=e.call(this,t,i,r)||this;if(n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var o=0,a=n.playerOptions.techOrder;o<a.length;o++){var s=ee(a[o]),u=rr.getTech(s);if((u=s?u:yn.getComponent(s))&&u.isSupported()){t.loadTech_(s);break}}return r}return mn(t,e),t}(yn),yn.registerComponent("MediaLoader",Wn);var dr="#222",fr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};yn.registerComponent("TextTrackDisplay",function(e){function t(t,n,r){function i(e){return o.updateDisplay(e)}var o=e.call(this,t,n,r)||this;return t.on("loadstart",function(e){return o.toggleDisplay(e)}),t.on("texttrackchange",i),t.on("loadedmetadata",function(e){return o.preselectTrack(e)}),t.ready(H(vn(o),function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",i),t.on("playerresize",i),window.addEventListener("orientationchange",i),t.on("dispose",function(){return window.removeEventListener("orientationchange",i)});for(var e=this.options_.playerOptions.tracks||[],n=0;n<e.length;n++)this.player_.addRemoteTextTrack(e[n],!0);this.preselectTrack()}})),o}mn(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,r={captions:1,subtitles:1},i=this.player_.textTracks(),o=this.player_.cache_.selectedLanguage,a=0;a<i.length;a++){var s=i[a];o&&o.enabled&&o.language&&o.language===s.language&&s.kind in r?n=s.kind!==o.kind&&n||s:o&&!o.enabled?t=e=n=null:s.default&&("descriptions"!==s.kind||e?s.kind in r&&!t&&(t=s):e=s)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof window.WebVTT&&window.WebVTT.processCues(window,[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],r=0;r<e.length;++r){var i=e[r];"showing"===i.mode&&n.push(i)}this.updateForTrack(n)}else{for(var o=null,a=null,s=e.length;s--;){var u=e[s];"showing"===u.mode&&("descriptions"===u.kind?o=u:a=u)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):o&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(o))}},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,r=n.length;r--;){var i,o=n[r];o&&(i=o.displayState,t.color&&(i.firstChild.style.color=t.color),t.textOpacity&&Ge(i.firstChild,"color",qe(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(i.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Ge(i.firstChild,"backgroundColor",qe(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Ge(i,"backgroundColor",qe(t.windowColor,t.windowOpacity)):i.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?i.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+dr:"raised"===t.edgeStyle?i.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+dr:"depressed"===t.edgeStyle?i.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+dr:"uniform"===t.edgeStyle&&(i.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+dr)),t.fontPercent&&1!==t.fontPercent&&(o=window.parseFloat(i.style.fontSize),i.style.fontSize=o*t.fontPercent+"px",i.style.height="auto",i.style.top="auto"),t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?i.firstChild.style.fontVariant="small-caps":i.firstChild.style.fontFamily=fr[t.fontFamily]))}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof window.WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],i=0;i<r.activeCues.length;++i)t.push(r.activeCues[i]);window.WebVTT.processCues(window,t,this.el_);for(var o=0;o<e.length;++o){for(var a=e[o],s=0;s<a.activeCues.length;++s){var u=a.activeCues[s].displayState;y(u,"vjs-text-track-cue"),y(u,"vjs-text-track-cue-"+(a.language||o)),a.language&&T(u,"lang",a.language)}this.player_.textTrackSettings&&this.updateDisplayState(a)}}},t}(yn));var hr,pr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=document.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=document.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",window.Element.prototype.appendChild.call(this,n),this.innerHTML}}),gr=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?he(window.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return window.Element.prototype.setAttribute.call(this,"src",e),e}}),yr=function(e){function t(t,n){var r=e.call(this,t,n)||this,n=t.source,i=!1;if(r.featuresVideoFrameCallback=r.featuresVideoFrameCallback&&"VIDEO"===r.el_.tagName,n&&(r.el_.currentSrc!==n.src||t.tag&&3===t.tag.initNetworkState_)?r.setSource(n):r.handleLateInit_(r.el_),t.enableSourceset&&r.setupSourcesetHandling_(),r.isScrubbing_=!1,r.el_.hasChildNodes()){for(var o=r.el_.childNodes,a=o.length,s=[];a--;){var u=o[a];"track"===u.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(u),r.remoteTextTracks().addTrack(u.track),r.textTracks().addTrack(u.track),i||r.el_.hasAttribute("crossorigin")||!ge(u.src)||(i=!0)):s.push(u))}for(var c=0;c<s.length;c++)r.el_.removeChild(s[c])}return r.proxyNativeTracks_(),r.featuresNativeTextTracks&&i&&mt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),r.restoreMetadataTracksInIOSNativePlayer_(),(Kt||Gt||Mt)&&!0===t.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}mn(t,e);var n=t.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){Je(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){n=[];for(var e=0;e<r.length;e++){var t=r[e];"metadata"===t.kind&&n.push({track:t,storedMode:t.mode})}}function t(){for(var e=0;e<n.length;e++){var i=n[e];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}r.removeEventListener("change",t)}var n,r=this.textTracks();e(),r.addEventListener("change",e),this.on("dispose",function(){return r.removeEventListener("change",e)}),this.on("webkitbeginfullscreen",function(){r.removeEventListener("change",e),r.removeEventListener("change",t),r.addEventListener("change",t)}),this.on("webkitendfullscreen",function(){r.removeEventListener("change",e),r.addEventListener("change",e),r.removeEventListener("change",t)})},n.overrideNative_=function(e,t){var n,r=this;t===this["featuresNative"+e+"Tracks"]&&(this[(n=e.toLowerCase())+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){r.el()[n+"Tracks"].removeEventListener(e,r[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n))},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t,n,r=this,i=Bn[e],o=this.el()[i.getterName],a=this[i.getterName]();this["featuresNative"+i.capitalName+"Tracks"]&&o&&o.addEventListener&&(n=function(){for(var e=[],t=0;t<a.length;t++){for(var n=!1,r=0;r<o.length;r++)if(o[r]===a[t]){n=!0;break}n||e.push(a[t])}for(;e.length;)a.removeTrack(e.shift())},this[i.getterName+"Listeners_"]=t={change:function(t){var n={type:"change",target:a,currentTarget:a,srcElement:a};a.trigger(n),"text"===e&&r[Vn.remoteText.getterName]().trigger(n)},addtrack:function(e){a.addTrack(e.track)},removetrack:function(e){a.removeTrack(e.track)}},Object.keys(t).forEach(function(e){var n=t[e];o.addEventListener(e,n),r.on("dispose",function(t){return o.removeEventListener(e,n)})}),this.on("loadstart",n),this.on("dispose",function(e){return r.off("loadstart",n)}))},n.proxyNativeTracks_=function(){var e=this;Bn.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},n.createEl=function(){var e,n=this.options_.tag;n&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(n?(e=n.cloneNode(!0),n.parentNode&&n.parentNode.insertBefore(e,n),t.disposeMediaElement(n),n=e):(n=document.createElement("video"),e=te({},this.options_.tag&&_(this.options_.tag)),Kt&&!0===this.options_.nativeControlsForTouch||delete e.controls,b(n,r(e,{id:this.options_.techId,class:"vjs-tech"}))),n.playerId=this.options_.playerId),void 0!==this.options_.preload&&T(n,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(n.disablePictureInPicture=this.options_.disablePictureInPicture);for(var i=["loop","muted","playsinline","autoplay"],o=0;o<i.length;o++){var a=i[o],s=this.options_[a];void 0!==s&&(s?T(n,a,a):S(n,a),n[a]=s)}return n},n.handleLateInit_=function(e){if(void 0!==e.networkState&&0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var r=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),t||this.trigger("loadstart")})}var i=["loadstart"];i.push("loadedmetadata"),2<=e.readyState&&i.push("loadeddata"),3<=e.readyState&&i.push("canplay"),4<=e.readyState&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(e){this.trigger(e)},this)})}},n.setScrubbing=function(e){this.isScrubbing_=e},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&Yt?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){mt(e,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;return this.el_.duration===1/0&&Ot&&Dt&&0===this.el_.currentTime?(this.on("timeupdate",function t(){0<e.el_.currentTime&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN):this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e,t,n=this;"webkitDisplayingFullscreen"in this.el_&&(e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))},this.on("webkitbeginfullscreen",t),this.on("dispose",function(){n.off("webkitbeginfullscreen",t),n.off("webkitendfullscreen",e)}))},n.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=window.navigator&&window.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)ue(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):e.prototype.requestVideoFrameCallback.call(this,t)},n.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):e.prototype.cancelVideoFrameCallback.call(this,t)},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){t.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):e.prototype.addTextTrack.call(this,t,n,r)},n.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=document.createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},n.addRemoteTextTrack=function(t,n){return n=e.prototype.addRemoteTextTrack.call(this,t,n),this.featuresNativeTextTracks&&this.el().appendChild(n),n},n.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),r=n.length;r--;)t!==n[r]&&t!==n[r].track||this.el().removeChild(n[r])},n.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),window.performance&&"function"==typeof window.performance.now?e.creationTime=window.performance.now():window.performance&&window.performance.timing&&"number"==typeof window.performance.timing.navigationStart&&(e.creationTime=window.Date.now()-window.performance.timing.navigationStart),e},t}(rr);$e(yr,"TEST_VID",function(){if(c()){var e=document.createElement("video"),t=document.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}}),yr.isSupported=function(){try{yr.TEST_VID.volume=.5}catch(e){return!1}return!(!yr.TEST_VID||!yr.TEST_VID.canPlayType)},yr.canPlayType=function(e){return yr.TEST_VID.canPlayType(e)},yr.canPlaySource=function(e,t){return yr.canPlayType(e.type)},yr.canControlVolume=function(){try{var e=yr.TEST_VID.volume;yr.TEST_VID.volume=e/2+.1;var t=e!==yr.TEST_VID.volume;return t&&zt?(window.setTimeout(function(){yr&&yr.prototype&&(yr.prototype.featuresVolumeControl=e!==yr.TEST_VID.volume)}),!1):t}catch(e){return!1}},yr.canMuteVolume=function(){try{var e=yr.TEST_VID.muted;return yr.TEST_VID.muted=!e,yr.TEST_VID.muted?T(yr.TEST_VID,"muted","muted"):S(yr.TEST_VID,"muted"),e!==yr.TEST_VID.muted}catch(e){return!1}},yr.canControlPlaybackRate=function(){if(Ot&&Dt&&Rt<58)return!1;try{var e=yr.TEST_VID.playbackRate;return yr.TEST_VID.playbackRate=e/2+.1,e!==yr.TEST_VID.playbackRate}catch(e){return!1}},yr.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(document.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(document.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(document.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(document.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},yr.supportsNativeTextTracks=function(){return Yt&&!Bt&&!Nt&&!Ut&&!Ht||zt&&Dt},yr.supportsNativeVideoTracks=function(){return!(!yr.TEST_VID||!yr.TEST_VID.videoTracks)},yr.supportsNativeAudioTracks=function(){return!(!yr.TEST_VID||!yr.TEST_VID.audioTracks)},yr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[0],n=e[1];$e(yr.prototype,t,function(){return yr[n]()},!0)}),yr.prototype.featuresVolumeControl=yr.canControlVolume(),yr.prototype.movingMediaElementInDOM=!zt,yr.prototype.featuresFullscreenResize=!0,yr.prototype.featuresProgressEvents=!0,yr.prototype.featuresTimeupdateEvents=!0,yr.prototype.featuresVideoFrameCallback=!(!yr.TEST_VID||!yr.TEST_VID.requestVideoFrameCallback),yr.patchCanPlayType=function(){4<=Pt&&!It&&!Dt&&(hr=yr.TEST_VID&&yr.TEST_VID.constructor.prototype.canPlayType,yr.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":hr.call(this,e)})},yr.unpatchCanPlayType=function(){var e=yr.TEST_VID.constructor.prototype.canPlayType;return hr&&(yr.TEST_VID.constructor.prototype.canPlayType=hr),e},yr.patchCanPlayType(),yr.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},yr.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){yr.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){yr.prototype["set"+ee(e)]=function(t){(this.el_[e]=t)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){yr.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(e){yr.prototype["set"+ee(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){yr.prototype[e]=function(){return this.el_[e]()}}),rr.withSourceHandlers(yr),yr.nativeSourceHandler={},yr.nativeSourceHandler.canPlayType=function(e){try{var t=window.navigator&&window.navigator.userAgent||"";return Ft&&!Xt||t.toLowerCase().includes("jsdom")||Ut||Bt||Vt||Ht?"":yr.TEST_VID.canPlayType(e)}catch(e){return""}},yr.nativeSourceHandler.canHandleSource=function(e,t){return Ft&&!Xt||Ut||Bt||Vt||Ht?"":!Xt||e.preferredPlayer&&"html5"===e.preferredPlayer.toLowerCase()?e.type?yr.nativeSourceHandler.canPlayType(e.type):e.src?(e=pe(e.src),yr.nativeSourceHandler.canPlayType("video/"+e)):"":""},yr.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},yr.nativeSourceHandler.dispose=function(){},yr.registerSourceHandler(yr.nativeSourceHandler),rr.registerTech("Html5",yr);var vr=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],mr={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},br=["tiny","xsmall","small","medium","large","xlarge","huge"],_r={};br.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;_r[e]="vjs-layout-"+t});var wr={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Tr=function(e){function t(n,i,o){var a,s;if(n.id=n.id||i.id||"vjs_video_"+nn++,(i=r(t.getTagSettings(n),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof n.closest){var u=n.closest("[lang]");u&&u.getAttribute&&(i.language=u.getAttribute("lang"))}else for(var c=n;c&&1===c.nodeType;){if(_(c).hasOwnProperty("lang")){i.language=c.getAttribute("lang");break}c=c.parentNode}if((a=e.call(this,null,i,o)||this).boundDocumentFullscreenChange_=function(e){return a.documentFullscreenChange_(e)},a.boundFullWindowOnEscKey_=function(e){return a.fullWindowOnEscKey(e)},a.boundUpdateStyleEl_=function(e){return a.updateStyleEl_(e)},a.boundApplyInitTime_=function(e){return a.applyInitTime_(e)},a.boundUpdateCurrentBreakpoint_=function(e){return a.updateCurrentBreakpoint_(e)},a.boundHandleTechClick_=function(e){return a.handleTechClick_(e)},a.boundHandleTechDoubleClick_=function(e){return a.handleTechDoubleClick_(e)},a.boundHandleTechTouchStart_=function(e){return a.handleTechTouchStart_(e)},a.boundHandleTechTouchMove_=function(e){return a.handleTechTouchMove_(e)},a.boundHandleTechTouchEnd_=function(e){return a.handleTechTouchEnd_(e)},a.boundHandleTechTap_=function(e){return a.handleTechTap_(e)},a.isFullscreen_=!1,a.log=bt(a.id_),a.fsApi_=lt,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");return a.tag=n,a.tagAttributes=n&&_(n),a.language(a.options_.language),i.languages?(s={},Object.getOwnPropertyNames(i.languages).forEach(function(e){s[e.toLowerCase()]=i.languages[e]}),a.languages_=s):a.languages_=t.prototype.options_.languages,a.resetCache_(),a.poster_=i.poster||"",a.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],n.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(function(e){if("function"!=typeof a[e])throw new Error('plugin "'+e+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),$(vn(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(N(document,a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_),o=te(a.options_),i.plugins&&Object.keys(i.plugins).forEach(function(e){a[e](i.plugins[e])}),i.debug&&a.debug(!0),a.options_.playerOptions=o,a.middleware_=[],a.playbackRates(i.playbackRates),a.initChildren(),a.isAudio("audio"===n.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),Kt&&a.addClass("vjs-touch-enabled"),zt||a.addClass("vjs-workinghover"),t.players[a.id_]=vn(a),n=at.split(".")[0],a.addClass("vjs-v"+n),a.userActive(!0),a.reportUserActivity(),a.one("play",function(e){return a.listenForUserActivity_(e)}),a.on("stageclick",function(e){return a.handleStageClick_(e)}),a.on("keydown",function(e){return a.handleKeyDown(e)}),a.on("languagechange",function(e){return a.handleLanguagechange(e)}),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)}),a}mn(t,e);var n=t.prototype;return n.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),F(document,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),F(document,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),or[this.id()]=null,Hn.names.forEach(function(e){e=Hn[e],e=n[e.getterName](),e&&e.off&&e.off()}),e.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},n.createEl=function(){var t,n=this.tag,r=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),i="video-js"===this.tag.tagName.toLowerCase();r?t=this.el_=n.parentNode:i||(t=this.el_=e.prototype.createEl.call(this,"div"));var o,a,s=_(n);if(i){for(t=this.el_=n,n=this.tag=document.createElement("video");t.children.length;)n.appendChild(t.firstChild);g(t,"video-js")||y(t,"video-js"),t.appendChild(n),r=this.playerElIngest_=t,Object.keys(t).forEach(function(e){try{n[e]=t[e]}catch(e){}})}n.setAttribute("tabindex","-1"),s.tabindex="-1",(Lt||Dt&&Wt)&&(n.setAttribute("role","application"),s.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(e){i&&"class"===e||t.setAttribute(e,s[e]),i&&n.setAttribute(e,s[e])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",(n.player=t.player=this).addClass("vjs-paused"),!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=I("vjs-styles-dimensions"),o=$t(".vjs-styles-defaults"),(a=$t("head")).insertBefore(this.styleEl_,o?o.nextSibling:a.firstChild)),this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var u=n.getElementsByTagName("a"),c=0;c<u.length;c++){var l=u.item(c);y(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!r&&n.parentNode.insertBefore(t,n),p(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t},n.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):mt.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var r=parseFloat(t);isNaN(r)?mt.error('Improper value "'+t+'" supplied for for '+e):(this[n]=r,this.updateStyleEl_())},n.fluid=function(e){var t,n=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,ln(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),t=function(){n.on(["playerreset","resize"],n.boundUpdateStyleEl_)},ln(e=this)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){var e,t,n,r;!0!==window.VIDEOJS_NO_DYNAMIC_STYLE?(r=(n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/n[0],e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),j(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*r+"%;\n      }\n    ")):(t="number"==typeof this.width_?this.width_:this.options_.width,n="number"==typeof this.height_?this.height_:this.options_.height,(r=this.tech_&&this.tech_.el())&&(0<=t&&(r.width=t),0<=n&&(r.height=n)))},n.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=ee(e),o=e.charAt(0).toLowerCase()+e.slice(1);this.tag&&(rr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a=this.autoplay(),s={source:t,autoplay:a=!("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+o+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};if(Hn.names.forEach(function(e){e=Hn[e],s[e.getterName]=n[e.privateName]}),r(s,this.options_[i]),r(s,this.options_[o]),r(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(s.startTime=this.cache_.currentTime),!(e=rr.getTech(e)))throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new e(s),this.tech_.ready(H(this,this.handleTechReady_),!0),Tn(this.textTracksJson_||[],this.tech_),vr.forEach(function(e){n.on(n.tech_,e,function(t){return n["handleTech"+ee(e)+"_"](t)})}),Object.keys(mr).forEach(function(e){n.on(n.tech_,e,function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+mr[e]+"_"].bind(n),event:t}):n["handleTech"+mr[e]+"_"](t)})}),this.on(this.tech_,"loadstart",function(e){return n.handleTechLoadStart_(e)}),this.on(this.tech_,"sourceset",function(e){return n.handleTechSourceset_(e)}),this.on(this.tech_,"waiting",function(e){return n.handleTechWaiting_(e)}),this.on(this.tech_,"ended",function(e){return n.handleTechEnded_(e)}),this.on(this.tech_,"seeking",function(e){return n.handleTechSeeking_(e)}),this.on(this.tech_,"play",function(e){return n.handleTechPlay_(e)}),this.on(this.tech_,"firstplay",function(e){return n.handleTechFirstPlay_(e)}),this.on(this.tech_,"pause",function(e){return n.handleTechPause_(e)}),this.on(this.tech_,"durationchange",function(e){return n.handleTechDurationChange_(e)}),this.on(this.tech_,"fullscreenchange",function(e,t){return n.handleTechFullscreenChange_(e,t)}),this.on(this.tech_,"fullscreenerror",function(e,t){return n.handleTechFullscreenError_(e,t)}),this.on(this.tech_,"enterpictureinpicture",function(e){return n.handleTechEnterPictureInPicture_(e)}),this.on(this.tech_,"leavepictureinpicture",function(e){return n.handleTechLeavePictureInPicture_(e)}),this.on(this.tech_,"error",function(e){return n.handleTechError_(e)}),this.on(this.tech_,"posterchange",function(e){return n.handleTechPosterChange_(e)}),this.on(this.tech_,"textdata",function(e){return n.handleTechTextData_(e)}),this.on(this.tech_,"ratechange",function(e){return n.handleTechRateChange_(e)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||p(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e=this;Hn.names.forEach(function(t){t=Hn[t],e[t.privateName]=e[t.getterName]()}),this.textTracksJson_=wn(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&mt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,r=function(){function e(){t.muted(n)}var n=t.muted();t.muted(!0),t.playTerminatedQueue_.push(e);var r=t.play();if(se(r))return r.catch(function(t){throw e(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(t||""))})};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():r():se(n=this.play())&&(n=n.catch(r)),se(n))return n.then(function(){t.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){t.trigger({type:"autoplay-failure",autoplay:e})})}},n.updateSourceCaches_=function(e){var t=e=void 0===e?"":e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(e){return e.src===t});if(n.length)return n[0].type;for(var r=e.$$("source"),i=0;i<r.length;i++){var o=r[i];if(o.type&&o.src&&o.src===t)return o.type}return He(t)}(this,t)),this.cache_.source=te({},e,{src:t,type:n});for(var n=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),r=[],i=this.$$("source"),o=[],a=0;a<i.length;a++){var s=_(i[a]);r.push(s),s.src&&s.src===t&&o.push(s.src)}o.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t,n,r,i=this;this.changingSrc_||(t=function(e){return i.updateSourceCaches_(e)},n=this.currentSource().src,r=e.src,n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(this.lastSource_&&(this.lastSource_.tech===r||this.lastSource_.player===n)||(t=function(){})),t(r),e.src||this.tech_.any(["sourceset","loadstart"],function(e){"sourceset"!==e.type&&(e=i.techGet("currentSrc"),i.lastSource_.tech=e,i.updateSourceCaches_(e))})),this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))})},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(mt.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?ue(this.play()):this.pause()))},n.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t=e.target.player;t&&t!==this||(e=this.el(),!(t=document[this.fsApi_.fullscreenElement]===e)&&e.matches?t=e.matches(":"+this.fsApi_.fullscreen):!t&&e.msMatchesSelector&&(t=e.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(t))},n.handleTechFullscreenChange_=function(e,t){var n=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){n.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))},n.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){this.trigger("textdata",1<arguments.length?arguments[1]:null)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(e,t){this.ready(function(){if(e in ur)return n=this.middleware_,r=this.tech_,i=t,r[r=e](n.reduce(Be(r),i));if(e in cr)return Ue(this.middleware_,this.tech_,e,t);var n,r,i;try{this.tech_&&this.tech_[e](t)}catch(n){throw mt(n),n}},!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in sr)return t=this.middleware_,n=this.tech_,r=e,t.reduceRight(Be(r),n[r]());if(e in cr)return Ue(this.middleware_,this.tech_,e);var t,n,r;try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw mt("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw mt("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw mt(t),t}}},n.play=function(){var e=this,t=this.options_.Promise||window.Promise;return t?new t(function(t){e.play_(t)}):this.play_()},n.play_=function(e){var t=this;this.playCallbacks_.push(e=void 0===e?ue:e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),e=Boolean(Yt||zt);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!n&&e&&this.load());n=this.techGet_("play"),e&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||ie(0,0)},n.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=(e=parseFloat(e))<0?1/0:e)!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e;return e=(e=this.techGet_("buffered"))&&e.length?e:ie(0,0)},n.bufferedPercent=function(){return oe(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),e=e.end(e.length-1);return e=t<e?t:e},n.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){if(void 0===e)return this.isFullscreen_;var t=this.isFullscreen_;this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_()},n.requestFullscreen=function(e){var t=this.options_.Promise||window.Promise;if(t){var n=this;return new t(function(t,r){function i(){n.off("fullscreenerror",a),n.off("fullscreenchange",o)}function o(){i(),t()}function a(e,t){i(),r(t)}n.one("fullscreenchange",o),n.one("fullscreenerror",a);var s=n.requestFullscreenHelper_(e);s&&(s.then(i,i),s.then(t,r))})}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(e){var t=this;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(n=e)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](n);return n&&n.then(function(){return t.isFullscreen(!0)},function(){return t.isFullscreen(!1)}),n}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var e=this.options_.Promise||window.Promise;if(e){var t=this;return new e(function(e,n){function r(){t.off("fullscreenerror",o),t.off("fullscreenchange",i)}function i(){r(),e()}function o(e,t){r(),n(t)}t.one("fullscreenchange",i),t.one("fullscreenerror",o);var a=t.exitFullscreenHelper_();a&&(a.then(r,r),a.then(e,n))})}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=document[this.fsApi_.exitFullscreen]();return t&&ue(t.then(function(){return e.isFullscreen(!1)})),t}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,N(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow="hidden",y(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){gn.isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,F(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow=this.docOrigOverflow,v(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in document&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in document)return document.exitPictureInPicture()},n.handleKeyDown=function(e){var t=this.options_.userActions;t&&t.hotkeys&&(function(e){var t=e.tagName.toLowerCase();return!!e.isContentEditable||("input"===t?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type):-1!==["textarea"].indexOf(t))}(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e)))},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,r=t.muteKey,r=void 0===r?function(e){return gn.isEventKey(e,"m")}:r,t=t.playPauseKey,t=void 0===t?function(e){return gn.isEventKey(e,"k")||gn.isEventKey(e,"Space")}:t;(void 0===n?function(e){return gn.isEventKey(e,"f")}:n).call(this,e)?(e.preventDefault(),e.stopPropagation(),n=yn.getComponent("FullscreenToggle"),!1!==document[this.fsApi_.fullscreenEnabled]&&n.prototype.handleClick.call(this,e)):r.call(this,e)?(e.preventDefault(),e.stopPropagation(),yn.getComponent("MuteToggle").prototype.handleClick.call(this,e)):t.call(this,e)&&(e.preventDefault(),e.stopPropagation(),yn.getComponent("PlayToggle").prototype.handleClick.call(this,e))},n.canPlayType=function(e){for(var t,n=0,r=this.options_.techOrder;n<r.length;n++){var i=r[n],o=rr.getTech(i);if(o=o||yn.getComponent(i)){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else mt.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){function t(e,t,n){var r;return e.some(function(e){return t.some(function(t){if(r=n(e,t))return!0})}),r}var n,r=this,i=this.options_.techOrder.map(function(e){return[e,rr.getTech(e)]}).filter(function(e){var t=e[0],e=e[1];return e?e.isSupported():(mt.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(e,t){var n=e[0];if(e[1].canPlaySource(t,r.options_[n.toLowerCase()]))return{source:t,tech:n}},o=this.options_.sourceOrder?t(e,i,(n=o,function(e,t){return n(t,e)})):t(i,e,o);return o||!1},n.handleSrc_=function(e,t){var n=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var r,i,o=We(e);o.length?(this.changingSrc_=!0,t||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),Fe(this,o[0],function(e,r){var i;return n.middleware_=r,t||(n.cache_.sources=o),n.updateSourceCaches_(e),n.src_(e)?1<o.length?n.handleSrc_(o.slice(1)):(n.changingSrc_=!1,n.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void n.triggerReady()):(r=r,i=n.tech_,void r.forEach(function(e){return e.setTech&&e.setTech(i)}))}),this.options_.retryOnError&&1<o.length&&(i=function(){n.off("error",r)},this.one("error",r=function(){n.error(null),n.handleSrc_(o.slice(1),!0)}),this.one("playing",i),this.resetRetryOnError_=function(){n.off("error",r),n.off("playing",i)})):this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},n.src=function(e){return this.handleSrc_(e,!1)},n.src_=function(e){var t,n,r=this,i=this.selectSource([e]);return!i||(t=i.tech,n=this.techName_,ee(t)!==ee(n)?(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(function(){r.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1)},n.load=function(){this.techCall_("load")},n.reset=function(){var e=this,t=this.options_.Promise||window.Promise;this.paused()||!t?this.doReset_():ue(this.play().then(function(){return e.doReset_()}))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),ln(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){var e;this.poster_&&!this.options_.techCanOverridePoster||!this.tech_||!this.tech_.poster||(e=this.tech_.poster()||"")!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))},n.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(ut("beforeerror").forEach(function(n){n=n(t,e),i(n)&&!Array.isArray(n)||"string"==typeof n||"number"==typeof n||null===n?e=n:t.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){var n=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",function(){this.off(["click","touchstart"],n)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new ae(e),this.addClass("vjs-error"),mt.error("(CODE:"+this.error_.code+" "+ae.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),ut("error").forEach(function(e){return e(t,t.error_)})},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,n,r=H(this,this.reportUserActivity),i=function(t){r(),this.clearInterval(e)};this.on("mousedown",function(){r(),this.clearInterval(e),e=this.setInterval(r,250)}),this.on("mousemove",function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())}),this.on("mouseup",i),this.on("mouseleave",i);var o,i=this.getChild("controlBar");!i||zt||Ot||(i.on("mouseenter",function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),i.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){var e;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o),(e=this.options_.inactivityTimeout)<=0||(o=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e)))},250)},n.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),n=this.getChild("ControlBar"),r=n&&n.currentHeight();t.forEach(function(t){t!==n&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(r),this.trigger("audioonlymodechange")},n.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(e){return e.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},n.audioOnlyMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var n=this.options_.Promise||window.Promise;if(n){if(e){var r=[];return this.isInPictureInPicture()&&r.push(this.exitPictureInPicture()),this.isFullscreen()&&r.push(this.exitFullscreen()),this.audioPosterMode()&&r.push(this.audioPosterMode(!1)),n.all(r).then(function(){return t.enableAudioOnlyUI_()})}return n.resolve().then(function(){return t.disableAudioOnlyUI_()})}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},n.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.audioPosterMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var n=this.options_.Promise||window.Promise;return n?e?(this.audioOnlyMode()?this.audioOnlyMode(!1):n.resolve()).then(function(){t.enablePosterModeUI_()}):n.resolve().then(function(){t.disablePosterModeUI_()}):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},n.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){var t=(t=(e=void 0===e?{}:e).track)||e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),ln(this)&&this.trigger("languagechange"))},n.languages=function(){return te(t.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=te(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];(r=te(r)).player=void 0,e.tracks[n]=r}return e},n.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var r=new En(this,t);return this.addChild(r),r.on("dispose",function(){n.removeChild(r)}),r.open(),r},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<br.length;n++){var r=br[n];if(t<=this.breakpoints_[r]){if(e===r)return;e&&this.removeClass(_r[e]),this.addClass(_r[r]),this.breakpoint_=r;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=r({},wr,e),this.updateCurrentBreakpoint_()),r(this.breakpoints_)},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return _r[this.breakpoint_]||""},n.loadMedia=function(e,t){var n,r,i,o=this;e&&"object"==typeof e&&(this.reset(),this.cache_.media=te(e),n=(i=this.cache_.media).artwork,r=i.poster,e=i.src,i=i.textTracks,!n&&r&&(this.cache_.media.artwork=[{src:r,type:He(r)}]),e&&this.src(e),r&&this.poster(r),Array.isArray(i)&&i.forEach(function(e){return o.addRemoteTextTrack(e,!1)}),this.ready(t))},n.getMedia=function(){if(this.cache_.media)return te(this.cache_.media);var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:He(t.poster)}]),t},t.getTagSettings=function(e){var t,n={sources:[],tracks:[]},i=_(e),o=i["data-setup"];if(g(e,"vjs-fill")&&(i.fill=!0),g(e,"vjs-fluid")&&(i.fluid=!0),null!==o&&(o=(t=_n(o||"{}"))[0],t=t[1],o&&mt.error(o),r(i,t)),r(n,i),e.hasChildNodes())for(var a=e.childNodes,s=0,u=a.length;s<u;s++){var c=a[s],l=c.nodeName.toLowerCase();"source"===l?n.sources.push(_(c)):"track"===l&&n.tracks.push(_(c))}return n},n.flexNotSupported_=function(){var e=document.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},n.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(function(e){return"number"==typeof e})&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(yn);Hn.names.forEach(function(e){var t=Hn[e];Tr.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Tr.prototype.crossorigin=Tr.prototype.crossOrigin,Tr.players={},_t=window.navigator,Tr.prototype.options_={techOrder:rr.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","textTrackDisplay"],language:_t&&(_t.languages&&_t.languages[0]||_t.userLanguage||_t.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Tr.prototype[e]=function(){return this.techGet_(e)}}),vr.forEach(function(e){Tr.prototype["handleTech"+ee(e)+"_"]=function(){return this.trigger(e)}}),yn.registerComponent("Player",Tr);var Sr=e(function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t}),Er=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}},kr=e(function(e){function t(n,r,i){return Er()?e.exports=t=Reflect.construct:e.exports=t=function(e,t,n){var r=[null];return r.push.apply(r,t),r=new(Function.bind.apply(e,r)),n&&Sr(r,n.prototype),r},t.apply(null,arguments)}e.exports=t}),Ar="plugin",xr="activePlugins_",Cr={},Or=function(e,t){e[xr]=e[xr]||{},e[xr][t]=!0},Pr=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),$(this),delete this.trigger,Q(this,this.constructor.defaultState),Or(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return(e=void 0===e?{}:e).name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return U(this.eventBusEl_,e,this.getEventHash(t=void 0===t?{}:t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[xr][e]=!1,this.player=this.state=null,t[e]=nt(e,Cr[e])},e.isBasic=function(t){return"function"==typeof(t="string"==typeof t?Ze(t):t)&&!e.prototype.isPrototypeOf(t.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(Qe(t))mt.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Tr.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return Cr[t]=n,t!==Ar&&(e.isBasic(n)?Tr.prototype[t]=tt(t,n):Tr.prototype[t]=nt(t,n)),n},e.deregisterPlugin=function(e){if(e===Ar)throw new Error("Cannot de-register base plugin.");Qe(e)&&(delete Cr[e],delete Tr.prototype[e])},e.getPlugins=function(e){var t;return(e=void 0===e?Object.keys(Cr):e).forEach(function(e){var n=Ze(e);n&&((t=t||{})[e]=n)}),t},e.getPluginVersion=function(e){return(e=Ze(e))&&e.VERSION||""},e}();Pr.getPlugin=Ze,Pr.BASE_PLUGIN_NAME=Ar,Pr.registerPlugin(Ar,Pr),Tr.prototype.usingPlugin=function(e){return!!this[xr]&&!0===this[xr][e]},Tr.prototype.hasPlugin=function(e){return!!Qe(e)};var Mr=rt,Ir=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sr(e,t)},jr=!1,Dr=function(e){return 0===e.indexOf("#")?e.slice(1):e};return it.hooks_=st,it.hooks=ut,it.hook=function(e,t){ut(e,t)},it.hookOnce=function(e,t){ut(e,[].concat(t).map(function(t){return function n(){return ct(e,n),t.apply(void 0,arguments)}}))},it.removeHook=ct,!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&c()&&((Wn=$t(".vjs-styles-defaults"))||(Wn=I("vjs-styles-defaults"),(_t=$t("head"))&&_t.insertBefore(Wn,_t.firstChild),j(Wn,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    "))),P(1,it),it.VERSION=at,it.options=Tr.prototype.options_,it.getPlayers=function(){return Tr.players},it.getPlayer=function(e){var t=Tr.players;if("string"==typeof e){var n=Dr(e),r=t[n];if(r)return r;n=$t("#"+n)}else n=e;if(l(n)&&(e=n.player,n=n.playerId,e||t[n]))return e||t[n]},it.getAllPlayers=function(){return Object.keys(Tr.players).map(function(e){return Tr.players[e]}).filter(Boolean)},it.players=Tr.players,it.getComponent=yn.getComponent,it.registerComponent=function(e,t){rr.isTech(t)&&mt.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),yn.registerComponent.call(yn,e,t)},it.getTech=rr.getTech,it.registerTech=rr.registerTech,it.use=function(e,t){ir[e]=ir[e]||[],ir[e].push(t)},Object.defineProperty(it,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(it.middleware,"TERMINATOR",{value:ar,writeable:!1,enumerable:!0}),it.browser=Jt,it.TOUCH_ENABLED=Kt,it.extend=function(e,t){void 0===t&&(t={}),jr||(mt.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),jr=!0);var n,r=function(){e.apply(this,arguments)},i={};for(n in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(r=t.constructor),i=t):"function"==typeof t&&(r=t),Ir(r,e),e&&(r.super_=e),i)i.hasOwnProperty(n)&&(r.prototype[n]=i[n]);return r},it.mergeOptions=te,it.bind=H,it.registerPlugin=Pr.registerPlugin,it.deregisterPlugin=Pr.deregisterPlugin,it.plugin=function(e,t){return mt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Pr.registerPlugin(e,t)},it.getPlugins=Pr.getPlugins,it.getPlugin=Pr.getPlugin,it.getPluginVersion=Pr.getPluginVersion,it.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),it.options.languages=te(it.options.languages,((n={})[e]=t,n)),it.options.languages[e]},it.log=mt,it.createLogger=bt,it.createTimeRange=it.createTimeRanges=ie,it.formatTime=function(e,t){return Mr(e,t=void 0===t?e:t)},it.setFormatTime=function(e){Mr=e},it.resetFormatTime=function(){Mr=rt},it.parseUrl=fe,it.isCrossOrigin=ge,it.EventTarget=W,it.on=N,it.one=B,it.off=F,it.trigger=U,it.xhr=Nn,it.TextTrack=Un,it.AudioTrack=At,it.VideoTrack=Fn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){it[e]=function(){return mt.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Zt[e].apply(null,arguments)}}),it.computedStyle=a,it.dom=Zt,it.url=qt,it.defineLazyProperty=$e,it.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"}),it})}).call(t,n(18))},function(e,t){e.exports={name:"@nagra/videojs-otvtoolkit",version:"0.0.0",description:"OpenTV Player plugin",main:"dist/videojs-otvtoolkit.cjs.js",module:"dist/videojs-otvtoolkit.es.js","generator-videojs-plugin":{version:"5.0.4"},"otv-resolution-capper-plugin":{version:"0.0.0"},scripts:{prebuild:"npm run clean",build:"npm-run-all -p build:*","build:css":"npm-run-all build:css:scss","build:css:scss":"sass src/controlbar.scss dist/videojs-otvtoolkit.css","build:test":"node scripts/buildUnitTests.js","build:lint":"npm run lint",devbuild:"npm-run-all build:css lint",clean:"rimraf dist test/dist",postclean:"mkdirp dist test/dist",docs:"npm-run-all docs:*","docs:api":"jsdoc src -r -c jsdoc.json -d docs/api","docs:toc":"doctoc README.md",lint:"eslint src",pretest:"npm run build:test",test:"karma start test/karma.conf.js",debugUnittest:"karma start test/karma.conf.js --browsers Chrome --single-run=false",version:"node scripts/version.js",prepublish:"npm run build"},keywords:["videojs","videojs-plugin"],author:"Nagra",license:"UNLICENSED",vjsstandard:{ignore:["dist","docs","test/dist","test/karma.conf.js"]},peerDependencies:{},dependencies:{ajv:"5.5.2",global:"4.4.0"},devDependencies:{"@nagra/video.js":"7.21.5-nmp-1","@nagra/videojs-shaka":"0.5.0-nmp-14","@procot/webostv":"1.2.3","babel-eslint":"10.0.1","babel-plugin-external-helpers":"6.22.0","babel-plugin-transform-object-assign":"6.22.0","babel-preset-es2015":"6.24.0",bannerize:"1.1.4","conventional-changelog-cli":"1.3.22","conventional-changelog-videojs":"3.0.0","coverage-istanbul-loader":"3.0.5",doctoc:"1.4.0",eslint:"4.19.0","fs-extra":"4.0.3",glob:"7.1.6","google-protobuf":"3.9.1",husky:"0.13.4",jquery:"3.3.1",jsdoc:"3.6.3",jssha:"2.4.2",karma:"3.1.4","karma-chrome-launcher":"2.2.0","karma-coverage":"1.1.2","karma-coverage-istanbul-reporter":"3.0.3","karma-detect-browsers":"2.3.3","karma-edge-launcher":"0.4.2","karma-firefox-launcher":"1.0.1","karma-junit-reporter":"1.2.0","karma-qunit":"2.0.1","karma-safari-launcher":"1.0.0",lodash:"4.17.11",mkdirp:"0.5.1","node-static":"0.7.11","npm-run-all":"4.1.5",qunit:"2.11.0",rimraf:"2.7.1",sass:"1.54.9",semver:"5.7.1",sinon:"2.4.1","uglify-js":"3.6.2",webpack:"3.12.0","xhr-promise":"2.0.0"},repository:{type:"git",url:"https://gitlab.hq.k.grp/rndopy/product/browser/opy-sdk-browser-shaka.git"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAAA+CAYAAADu4GOJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVBNEYxM0I3MDVDRDExRTQ5MkUwOUNGNjM0MkM4QUZEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVBNEYxM0I4MDVDRDExRTQ5MkUwOUNGNjM0MkM4QUZEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUE0RjEzQjUwNUNEMTFFNDkyRTA5Q0Y2MzQyQzhBRkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUE0RjEzQjYwNUNEMTFFNDkyRTA5Q0Y2MzQyQzhBRkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4ISt+NAAAJwUlEQVR42uxdCWwWVRDeUpBTgQJyiwXECxAQvNECgtGInAoaSBCPxqKCR4wheKCiiIGAiajBIBrESkIiEImIgAciQTnkEBURDBFEEFtboVz+fuM/qy/bPebt8ffXvi/5sv2Xt7NvZ2fnzZt3kJNKpSwDAydyjGEYGMMwMIZhYAzDwBiGgTEMA2MYBsYwDIxhGBjDMKgWhmEspZragjEMg1CG0c3oqFpis69h5OTk/O81gGeui0Mf8AqwE5gHngAPgzvBz8FPoIuj1cUqKtmBi8cY43P9N1DWOg/BN7GC/fA1rl/vU7l+OLQVPstyyNqv+fBn4fAoOAo8PaB4KbgAnIb77HGR1RGHqyK+jxJwN7gF90gJn+EaHPKF8ldA7k9hDOPvEw76oQRs4SF4cyoYM30qVp/lSzFTwyBywYng0ZQ+6JqnwJoOmWNS8eFH8G6qZ8Bz1AZ/0ZD7ko7HUKlrGIRFCRnGXZrK/B08Q/DAZ4DLY3h5q8FmCRmGjXe5mfN6llGa8srBxmEMo0YI9zcUFw5NoJkr0ixPTcHYgIeth8MH4IAY6lcAroLMPCs5DAJf9fn3cZry6oN3hqlIjZAPMBsKahRj4HN5yN7QfbjW7xneBC+N8cV1BotxzyQj9NGQ38dFR6Sfy0LIG+dsBpM0jObg9Cr0FjbagwM9jI2C6GEJvLj+Ib5cXTwYg7ew0Q4cnCnDIIzlXkRUb0Ht9i0RREzw6I5OS/DFPQk2SFB+P/UrZ+98W5w6CkLNiA8wB5XujC7RkSgGBp4Wpe1HHbqiDlscMpsJrqWu82vgViud8T2PmzRJU/EnOCtEfanLPCSgDBn2meA+JYVQL4KOroSOekJHX2olNjR7JU5MD9srofgA3B1DND/XIfcLwTUTEo4V/HS+WlC/9lyWck3fxaCj+Ul3V504BfYKaRg3xtTNqwDPtJsmQfnJVZhhbALuEui0PpfvH5OOjoOtpIZRM4ZnpThlbsh45R5BmVOcrq7jU6Y2WAg+DfYIkEfZ0ucUhRSHjPbDoqWg6dwEt/+HRmBOzWAFN0FeqMWyJmUixlC7cbpfDrnK6wVFyQUeERhREWQ+j2OHgHJLoPQK5XcLjtyzCa+zjtp69bocWAj+DI4PKFcImVMkY0A1qvDhCwVBHn0JU8EX2HP4gV7wCEGQ9oOV3fiWA2JbR7kCHT3F6YMTAWWbSns3VWIYsFpqFu6QfAmwbhq4o4GmYkF5+mKCvoYGWWwUh6jHguc9Bh1Rc3OXUEc0OLmXvWssXdewhvF9RAVQ3qKJ8EuwMVUg92Lw/IAyVzt+kwv+0YNx4KSw3A7wKrzgHfx7GHdZdXQ0zQqeaNVZlH8K2Su5J2RkPJPvuU5QttilrksF120XlOkp0Mu1MfUGnhGW2089FuX+aySDbi71XiS4bmlS3dV8cGsYwwC7C8t2d6n85cLucxB2gs19jKItuDdAxp8aulopLLuQ7981go56Ca6jup/jZxhhm5JUhJSzJOe/GC51k/Mkzv09syqG5pEm2VASbIg6B4LS0CAFZ1+AbQJkrNLQ1Z2C2IdwM9+/KIKOqO4rA66loP9+3wIhJwPnc7p2l0CBKt7g+KJuQLmN4F6fl3phzAHfdn7ui8DGwpd9qzAgzqcZYNDzA/h7hqB8Cecc6kfQEaUCugRcT3mS1qhbqe0x4ogxzuZrH9ZsSspS/w/Mp2FwTV3lCmOrTOIhLzsI7TH4KzidrbZhFnb9Sjn3EffEmoOc0KP08iaprlj5dN0GK9qgYZygnlcH1O+U0w4i5TEgsMzyn3FUlSBjnSNI+uiAZI3Ac/8SUl/bcHg2i3REGd9BSSW4ZsWs/DjRjWOaihhkHQeH4+WujiiHDGNbFuloQiKGAUXtE2bcqgLXceKoX8SEFTWXBXjWJTHoiz6i2630fI5sQG80Iz2SSolPt7IX9+JlrMWxK/cKdLxHBT9bZ+4qxwKeMDMjm72GW/BZIBC0zjFCSYEVDV3XyULDOKIucuLE1khOOVMKvZ5LN24N+D64wCuegBwac+kZRld8Pd13QEAqvTxDOqJmcq2vYVSHJYrKy8nlPEwTfhHU4zgIHZy0qhkkSxTNavfqCbMNgkGwYbjN4OpjdGTg5jHsFWblalvLwZZtSGWULfNpr8j6GgbIOSaZYsbZ1VxHHFQSog2lYM8v41geFFtAxj9jGGHq4JBFYz4d2UN/67aiPiA2slfrl6or5Xk9bw1JHXkyUD2uQ2mloMNjrKRAKdOfZxkTlrBAvxs2cpPD//aRzmp1j9nnNMPpM7CvhjLnBYwbFAhkDLYLRzCINlx3J5api6YDZKjjNI2U84XK+akCOWOUXQz0ht15XeliKz3iRxM8KPt3vAq822+cpNrPHoc2PVkRYjXcCf46nMxUT+Qtrjv1gCgxuIjzJTQxel4Eg6PR3tn8cybe0aORuyleHgO8CCyVeoqEPcYE5VxL8Cs+v0HTY0RRfiSPwVsy2OionO+rnM/T9Ri8Psf26C9LF1KF9Rg0w+dDkNqsZVXoKSoHRumddB7jnz14mv1/AeqHdaUySYjGX7ozdbd3os7CQvbor4BF0t15/OBnGLQbC003pyCzMFuMQsFG5e98jeuG44XscXBZhgyaJgXZW1WR5zqMe1OG9RHSM/59c4h9v6hpoolPNGZ1fxxGEWQYtfhIVv1iFn59x5S/czWuo15FOwdbZbDeg61/F1GRN6aBPgoUt8BIFtN2Spry7Nlw9AyPx1VJP8NYr7hrmhtZlGWGoU4pPKBx3dtWevqeyt4ZbAYPgKOV+5KO7VXotMHdaE2RC6x/R7cnum26ErdhUFQ7hSJ//j0DN+0S4mt2fo15LmXCwN4U5VcrvXpLiuPUv3ewLBNGQTOzeaY8raw7gfuuAZ/B35coTUwnTbH3WukJ1rv5fdK0w6ZR6+q3djVF7RVAcwe2soUX8z4LRwO+Ctrpjl7WudTu0bJ/K72HJu0LYa9z3aJZ19a83VAOf2mP8Pk5fsk2F7TwyFns0UwyucnYxnGE3wdjry89QEbCSbULrPS+GQTdJZT0nmijOtqi8lP+EKkHNjBSvCFMcI1Qzr8qlDvSJ5m0g5cphk1w2Vjrt8udZoLrSZ3uqgcGC2S85ti+oVT5vVuyt5lPgmuycn68QI5nd9XNY3zMxxLFA7zDq7d6kRfgXXS2BXgN8i5l3CRdysHsAU6STXKbo+CBL9W6MGhZIa3rmKfRW/pGeTY3SLzFoQAZhwQyCtkDj2FPQQEobdL6HviEMNVertRDTczRNhCUH2kN3gD903ySgz5yfmY5leZ9mP+WwsD9wzaGYWAMw8AYhoExDIME8JcAAwBHloxfTog8lAAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=!1;return e&&(t="html5"===e.toLowerCase()),t}function o(e,t,n,r){var o="none";if(e&&e.system&&(o=e.system),o.includes("nagra-ssp")&&e.config.ssmServer){return new(F[o]||L.DrmDashController)(e,t,n)}if(x.default.isSafari()&&("customer"!==o&&"customer-ssm"!==o&&"nagra-ssp"!==o&&"nagra-conax"!==o&&"nagra-conax-upfront"!==o||(o+="-fps")),x.default.isTVKeyCapable()){!i(r)||"customer"!==o&&"nagra-ssp"!==o||(o+="-tvkey")}return new(N[o]||L.DrmDashController)(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(357),s=r(a),u=n(360),c=r(u),l=n(141),d=r(l),f=n(363),h=r(f),p=n(364),g=r(p),y=n(365),v=r(y),m=n(366),b=r(m),_=n(369),w=r(_),T=n(145),S=r(T),E=n(146),k=r(E),A=n(42),x=r(A),C=n(372),O=r(C),P=n(373),M=r(P),I=n(374),j=r(I),D=n(378),R=r(D),L=n(49),N={};N["nagra-conax"]=h.default,N["nagra-conax-fps"]=s.default,N["nagra-conax-upfront"]=g.default,N["nagra-conax-upfront-fps"]=v.default,N["nagra-ssp"]=c.default,N["nagra-ssp-fps"]=d.default,N["nagra-ssp-tvkey"]=j.default,N["microsoft-azure"]=L.DrmDashController,N.customer=S.default,N["customer-fps"]=k.default,N["customer-tvkey"]=R.default,N["customer-ssm"]=O.default,N["customer-ssm-fps"]=M.default;var F={};F["nagra-ssp"]=b.default,F["nagra-ssp-fps"]=w.default,t.default={createDRMController:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(137),c=r(u),l=n(41),d=r(l),f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.conaxFairPlay=new c.default(e.system,e.config,n),r.conaxFairPlay.initialise(),r}return a(t,e),s(t,[{key:"ready",value:function(e){this.conaxFairPlay.setVideoElement(e)}},{key:"tearDown",value:function(){this.conaxFairPlay.tearDown()}}]),t}(d.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){var r=0,i=new ArrayBuffer(e.byteLength+d+t.byteLength+d+n.byteLength),o=new DataView(i);new Uint8Array(i,r,e.byteLength).set(e),r+=e.byteLength,o.setUint32(r,t.byteLength,!0),r+=d;var a=new Uint16Array(i,r,t.length);return a.set(t),r+=a.byteLength,o.setUint32(r,n.byteLength,!0),r+=d,new Uint8Array(i,r,n.byteLength).set(n),new Uint8Array(i,0,i.byteLength)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(30),c=function(e){return e&&e.__esModule?e:{default:e}}(u),l=n(102),d=4,f=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.keySystem="com.apple.fps.1_0",n.firstKey=!1,n.sessions=[],n}return o(t,e),s(t,[{key:"tearDown",value:function(){if(this.sessions.length){var e=!0,t=!1,n=void 0;try{for(var r,i=this.sessions[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.close()}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}this.sessions=[],this.videoElement.webkitSetMediaKeys(null)}}},{key:"_setEncryptedListener",value:function(e,t){e.addEventListener("webkitneedkey",t,!1)}},{key:"_removeEncryptedListener",value:function(e,t){e.removeEventListener("webkitneedkey",t,!1)}},{key:"_onVideoEncrypted",value:function(e){var t=this;this.logger.message("Function: onneedkey for ").addType().log();var n=e.initData;this._setWebkitKeys(),this.certificateRequester.getCertificate().then(function(e){var r=t._createFairPlayInitData(n,e),i=t._createKeySession(r);t.sessions.push(i),t._configureSessionListeners(i)})}},{key:"_supportKeySystem",value:function(){var e=window.WebKitMediaKeys&&window.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4");return e||this.logger.addType().message(" FairPlay Key System not supported by browser.").log(),e}},{key:"_setWebkitKeys",value:function(){if(this.videoElement.webkitKeys||this.videoElement.webkitSetMediaKeys(new WebKitMediaKeys(this.keySystem)),this.logger.message("Key system selected").log(),!this.videoElement.webkitKeys)throw new Error("Could not create MediaKeys.");this.logger.message("Media keys created").log()}},{key:"_createFairPlayInitData",value:function(e,t){var n=this._extractAssetId(e);return a(e,c.default.stringToArray(n),t)}},{key:"_createKeySession",value:function(e){var t=this.videoElement.webkitKeys.createSession("video/mp4",e);if(!t)throw new Error("Could not create key session.");return this.logger.message("Key session created").log(),t}},{key:"_extractAssetId",value:function(e){var t=c.default.arrayToString(e);this.logger.message("initData: "+t).debug();var n=window.atob(t.split("skd://")[1].split("?")[0]);return this.logger.message("Base64decoded: "+n),n}},{key:"_configureSessionListeners",value:function(e){var t=this;e.addEventListener("webkitkeymessage",function(e){t.firstKey=!0,t.licenceRequester.request(e.message,"license-request").then(function(t){e.target.update(t)}).catch(function(e){var t="Failed to retrieve licence.  Error: "+e;throw new Error(t)})},!1),e.addEventListener("webkitkeyadded",function(){return t._onKeyAdded()},!1),e.addEventListener("webkitkeyerror",function(e){return t._onKeyError(e)},!1)}},{key:"_onKeyAdded",value:function(){this.logger.message("Decryption key was added to session.").log()}},{key:"_onKeyError",value:function(e){var t="A decryption key error was encountered";if(e.target&&e.target.error&&(t=t+" - Event error code: "+e.target.error.code+" - Event error message: "+e.target.error.message),this.drmOptions.keyErrorHandler&&this.drmOptions.keyErrorHandler[e.target.error.code]&&this.drmOptions.keyErrorHandler[e.target.error.code](),this.firstKey)throw new Error(t);this.firstKey=!0}}]),t}(l.DecryptionInterface);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(102),u=[{initDataTypes:["skd"],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}],c=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}("renew"),l=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mediaKeySession=null,n}return o(t,e),a(t,[{key:"renewLicence",value:function(){this.mediaKeySession&&this.mediaKeySession.update(c)}},{key:"tearDown",value:function(){if(this.mediaKeySession){var e=this;this.mediaKeySession.close().finally(function(){e.mediaKeySession=void 0,e.videoElement.setMediaKeys(null),e._setEncryptedListener(e.videoElement,e.onVideoEncryptedHandle)})}}},{key:"_setEncryptedListener",value:function(e,t){e.addEventListener("encrypted",t,{once:!0})}},{key:"_removeEncryptedListener",value:function(e,t){e.removeEventListener("encrypted",t,{once:!0})}},{key:"_supportKeySystem",value:function(){var e=Boolean(navigator.requestMediaKeySystemAccess);return e||this.logger.addType().message(" FairPlay Key System not supported by browser.").log(),e}},{key:"_onVideoEncrypted",value:function(e){this.logger.message("Function: _onVideoEncrypted for ").addType().log();var t=e.initData,n=this;navigator.requestMediaKeySystemAccess("com.apple.fps",u).then(function(e){n.logger.message("Access to mediakeysystem granted").log(),e.createMediaKeys().then(function(e){n.logger.message("Keys created").log(),n.videoElement.setMediaKeys(e),n.certificateRequester.getCertificate().then(function(r){e.setServerCertificate(r).then(function(){n.logger.message("Server Certificate is set").log(),n.mediaKeySession=e.createSession(),n.logger.message("MediaKey session Created.").log(),n._configureSessionListeners(n.mediaKeySession),n.logger.message("Generating MediaKey session request").log(),n.mediaKeySession.generateRequest("skd",t).catch(function(e){var t=e.errorCode,r=e.message,i=t.systemCode;n.logger.message("Error: "+r+", system: "+i+"\n"+JSON.stringify(e))})}).catch(function(e){console.log("Error setting server certificate: "+JSON.stringify(e))})})})})}},{key:"_configureSessionListeners",value:function(e){var t=this;e.addEventListener("message",function(e){t.logger.message("MediaKey message received.  Requesting licence").log(),t.licenceRequester.request(e.message,e.messageType).then(function(n){t.logger.message("Licence Key received").log(),e.target.update(n)}).catch(function(e){var t="Failed to retrieve licence.  Error: "+e;throw new Error(t)})},!1)}}]),t}(s.DecryptionInterface);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(49),l=n(70),d=r(l),f=n(140),h=r(f),p=n(362),g=r(p),y=n(57),v=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return a.vmp=a._makeVmp(e,n),a.requestFilterHandle=a._shakaRequestFilter.bind(a),a.responseFilterHandle=a._shakaResponseFilter.bind(a),a}return a(t,e),s(t,[{key:"ready",value:function(e){this.vjsPlayer.tech_.shaka_&&(this.drmDetails.config.multiSession?this.configureMultiSession_():this._configureSingleSession(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this,e))}},{key:"configureMultiSession_",value:function(){var e=this,t=this.vjsPlayer.tech_.shaka_;this.temporalPredelivery_=this._makeTemporalPreDelivery(t);var n=function(t,n){return e.temporalPredelivery_.licenceRequired(t,n)?[!1,!1]:[!0,!1]};t.setLicenceRequiredCallback(n)}},{key:"_configureDrm",value:function(){var e=void 0,t=this.vjsPlayer.tech_.shaka_,n=t.getNetworkingEngine();if(n.unregisterRequestFilter(this.requestFilterHandle),n.unregisterResponseFilter(this.responseFilterHandle),this.token){var r=this.drmDetails.config.tenantId,i=this.drmDetails.config.licenceServer,o=d.default.buildUrlWith(i,r,"Widevine","License");e={"com.microsoft.playready":d.default.buildUrlWith(i,r,"PlayReady","License"),"com.widevine.alpha":o,"com.tvkey.drm":d.default.buildUrlWith(i,r,"Tvkey","License")},n.registerRequestFilter(this.requestFilterHandle),n.registerResponseFilter(this.responseFilterHandle)}var a={drm:{servers:e}};this.vjsPlayer.otvtoolkit().techConfig.configure(y.CONFIG_TYPE_OTV,a)}},{key:"_makeVmp",value:function(e,t){return new h.default(e,t)}},{key:"_makeTemporalPreDelivery",value:function(e){return new g.default(e,this.log)}},{key:"_shakaRequestFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if(this.log("request url: "+t.uris[0]),t.headers["nv-authorizations"]=this.token,t.uris[0].includes("wvls"))t.headers["Content-Type"]="application/octet-stream";else if(t.uris[0].includes("prls"))t.headers["Content-Type"]="text/xml; charset=utf-8";else if(t.uris[0].includes("tkls")){var n=shaka.util.StringUtils;t.headers["Content-Type"]="application/json";var r=JSON.parse(n.fromUTF8(t.body)),i={OttLicenseRequestMessage:r},o=JSON.stringify(i);this.log("tvkey license request payload: "+o),t.body=n.toUTF8(o)}}},{key:"_shakaResponseFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE&&(this.log("response url: "+t.uri),t.uri.includes("tkls"))){var n=shaka.util.StringUtils.fromUTF8(t.data);this.log("tvkey license reponse payload: "+n);var r=JSON.stringify(n);r&&r.errorCode&&this.log.error("tvkey request license failure, error code :"+r.errorCode)}}}]),t}(c.DrmDashController);t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i;a.warn=i;var s=["49UM7340PVA"],u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;r(this,e),this._isSmartTV=t,this.log=n,this.discover()}return o(e,[{key:"getLGModelAndIdIfPossible",value:function(){var e=this;return new Promise(function(t){e._queryWebOSModelName().then(function(e){t(e)}).catch(function(){t(void 0)})})}},{key:"discover",value:function(){if(this._isSmartTV){var e=this;this.getLGModelAndIdIfPossible().then(function(t){e._modelName=t})}}},{key:"_queryWebOSModelName",value:function(){return new Promise(function(e,t){try{var n=setTimeout(function(){t(new Error("getSystemInfo timeout"))},1e3);webOS.service.request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["modelName","firmwareVersion","UHD","sdkVersion"]},onComplete:function(r){r.returnValue?(clearTimeout(n),e(r.modelName)):(clearTimeout(n),t(new Error("getSystemInfo error - "+r.errorCode+": "+r.errorText)))}})}catch(e){t(e)}})}},{key:"adjustDefault",value:function(e){var t=e;return s.includes(this._modelName)&&(console.warn("WVPersistentState: LG Model "+this._modelName+' setting to "required"'),t="required"),t}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){for(var t=atob(e),n="",r=0;r<t.length;r++){var i=t.charCodeAt(r).toString(16);n+=2===i.length?i:"0"+i}return n}function o(e){for(var t=atob(e),n=t.length,r=new ArrayBuffer(n),i=new Uint8Array(r),o=0;o<n;o++)i[o]=t.charCodeAt(o);var a=new DataView(r),s=a.getUint32(0,!0),u=a.getUint16(4,!0),c=a.getUint16(6,!0);a.setUint32(0,s,!1),a.setUint16(4,u,!1),a.setUint16(6,c,!1);var l="",d=!0,f=!1,h=void 0;try{for(var p,g=i[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){var y=p.value;y=y.toString(16),1===y.length&&(y="0"+y),l+=y}}catch(e){f=!0,h=e}finally{try{!d&&g.return&&g.return()}finally{if(f)throw h}}return l}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){},u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;r(this,e),this.player=t,this.log=n}return a(e,[{key:"licenceRequired",value:function(e,t){var n=this._findKeyId(e),r="com.microsoft.playready"===this.player.keySystem()?o:i;return!n.every(function(e){var n=r(e);return"usable"===t[n]})}},{key:"_findKeyId",value:function(e){var t=this.player.keySystem(),n=void 0;return"com.widevine.alpha"===t?n=this._parseKeyIdFromWidevineInitData(e):"com.microsoft.playready"===t&&(n=this._parseKeyIdFromPlayreadyInitData(e)),n}},{key:"_getPSSHData",value:function(e){var t=e.buffer,n=e.byteOffset,r=n+e.byteLength,i=new DataView(t);n+=8;var o=i.getUint8(n);return n+=20,o>0&&(n+=4+16*i.getUint32(n)),n+=4,t.slice(n,r)}},{key:"_parseKeyIdFromWidevineInitData",value:function(e){var t=this._getPSSHData(e);return proto.WidevinePsshData.deserializeBinary(t).getKeyIdsList_asB64()}},{key:"_parseKeyIdFromPlayreadyInitData",value:function(e){var t=this._getPSSHData(e),n=this._getPlayreadyHeaderData(t);return this._getPlayreadyKidList(n)}},{key:"_getPlayreadyHeaderData",value:function(e){var t=4,n=new DataView(e),r=n.getUint16(t,!0);t+=2;for(var i=[],o=0;o<r;o++){t+=2;var a=n.getUint16(t,!0);t+=2;var s=e.slice(t,t+a),u=new TextDecoder("utf-16le").decode(s);i.push(u),t+=a}return i}},{key:"_getPlayreadyKidList",value:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.push(this._getKidFromRecord(s))}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}},{key:"_getKidFromRecord",value:function(e){return this._fetchFromXML(e,"KID")}},{key:"_fetchFromXML",value:function(e,t){var n=new window.DOMParser,r="";try{r=n.parseFromString(e,"text/xml").getElementsByTagName(t)[0].childNodes[0].nodeValue}catch(e){return!1}return r}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){var r=e.config.licenceServer,i={Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:"Widevine-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}},o={serverURL:r,httpRequestHeaders:{"Conax-Custom-Data":JSON.stringify(i)}};return e.config.widevineServerCertificate&&!l.default.isSmartTV()&&(o.serverCertificate=e.config.widevineServerCertificate),[{name:"com.widevine.alpha",options:o}]}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(42),l=function(e){return e&&e.__esModule?e:{default:e}}(c),d=n(49),f=function(e){function t(e,n,o){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));a.conaxApi=OTV.conax,a.drmDetails.config.system=e.system,a.cxDeviceId=a.conaxApi.getOrCreateCxDeviceId("HTML5.Widevine");var s=a.conaxApi.getOperator(),u=a.conaxApi.getOttAccount();return a.conaxApi.addDevice(e.config.portalURL+"/ottAccount/device/"+s,u,a.cxDeviceId,"HTML5.Widevine","HTML5.Widevine"),a.cxAuthToken=a.conaxApi.getToken(e.config.portalURL+"/authtoken/"+s,u,a.cxDeviceId),a}return o(t,e),s(t,[{key:"updateSourceData",value:function(e){return e.keySystemOptions=a(this.drmDetails,this.cxAuthToken,this.cxDeviceId),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}}]),t}(d.DrmDashController);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=e.config.licenceServer;return[{name:"com.microsoft.playready",options:{serverURL:n,httpRequestHeaders:{PreAuthorization:t,"Content-Type":"text/xml; charset=utf-8"}}},{name:"com.widevine.alpha",options:{serverURL:n,httpRequestHeaders:{Accept:"application/octet-stream","Content-Type":"application/octet-stream",PreAuthorization:t}}}]}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(49),l=function(e){function t(e,n,o){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));return a.drmDetails.config.system=e.system,a}return o(t,e),s(t,[{key:"updateSourceData",value:function(e){return e.keySystemOptions=a(this.drmDetails,e.token),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}}]),t}(c.DrmDashController);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(41),l=r(c),d=n(137),f=r(d),h=n(42),p=r(h),g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.drmDetails=e,r.drmDetails.config.system=e.system,p.default.isSafari()&&(r.conaxFairPlay=new f.default(e.system,e.config,n),r.conaxFairPlay.initialise()),r}return a(t,e),s(t,[{key:"tearDown",value:function(){this.conaxFairPlay.tearDown()}},{key:"ready",value:function(e){this.conaxFairPlay.setVideoElement(e)}},{key:"updateSourceData",value:function(e){return e&&e.token&&this.conaxFairPlay.setSourceToken(e.token),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}}]),t}(l.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return e.split(",")[0]}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=n(143),f=r(d),h=n(140),p=r(h),g=n(367),y=r(g),v=n(144),m=r(v),b=n(30),_=r(b),w=n(57),T=n(70),S=r(T),E={drm:{servers:{"com.microsoft.playready":"http:callback-uri","com.widevine.alpha":"http:callback-uri","com.tvkey.drm":"http:callback-uri"}}},k=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return i.vmp=i._makeVmp(e,n),i.sessionToken=null,i.isRenewal=!1,i.secureSession=i._makeSecureSessionMgr(e,n),i.setupPromise=Promise.resolve(),i}return s(t,e),c(t,[{key:"ready",value:function(e){this.vjsPlayer.tech_.shaka_&&(this.drmDetails.config.multiSession||this._configureSingleSession(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this,e))}},{key:"updateSourceData",value:function(e){var n=this,r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e);if(this.secureSession.teardown().catch(function(e){return n._tearDownError(e)}).finally(function(){return n._setSessionToken(null)}),r.token){var i=u(r.token);this.setupPromise=this.secureSession.setup(i),this.setupPromise.then(function(e){return n._setSessionToken(e)}).catch(function(e){n.log("SSM session open failed: "+e),n._error("ssmsetuperror",e)})}return r}},{key:"tearDown",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this),this.sessionToken&&(this.secureSession.teardown().catch(function(t){return e._tearDownError(t)}),this._setSessionToken(null)),this.isRenewal=!1}},{key:"_configureDrm",value:function(){this.vjsPlayer.otvtoolkit().techConfig.configure(w.CONFIG_TYPE_OTV,E);var e=this.vjsPlayer.tech_.shaka_,t=this._requestLicence.bind(this),n=this;e.getNetworkingEngine().registerRequestFilter(function(r,i){r===shaka.net.NetworkingEngine.RequestType.LICENSE&&(i.xSourceObject=n.source,i.xKeySystem=e.keySystem(),i.xCallback=t)})}},{key:"_makeSecureSessionMgr",value:function(e,t){return new m.default(e.config.ssmServer,t,this._heartbeatCallback.bind(this))}},{key:"_makeVmp",value:function(e,t){return new p.default(e,t)}},{key:"_setSessionToken",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSessionToken",this).call(this,e),this.sessionToken=e}},{key:"_heartbeatCallback",value:function(){var e=this;(this.isPlayReady||this.isTVKey)&&(this.isRenewal?this.renewLicence():this.secureSession.heartbeat().then(function(t){return e._setSessionToken(t)}).catch(function(t){return e._heartbeatError(t)}))}},{key:"_tearDownError",value:function(e){this._error("ssmteardownerror",e)}},{key:"_heartbeatError",value:function(e){this._error("ssmheartbeaterror",e)}},{key:"_error",value:function(e,t){this.vjsPlayer.trigger({type:e,reason:t})}},{key:"_requestLicence",value:function(e,t,n,r){var i=this;return new Promise(function(o,a){i.log("Need licence");var s={keySystem:e,source:t,requestPayload:n,requestType:r,resolve:o,reject:a};i.setupPromise.then(function(){return i._doRequestNow(s)}).catch(function(){i.log("Failed to setup"),a("Can't get licence as setup failed")})})}},{key:"_doRequestNow",value:function(e){"license-renewal"===e.requestType?(this.log("Renewing licence"),this._doLicenceRenew(e)):(this.log("Requesting licence"),this._doLicenceRequest(e))}},{key:"_isPlayready",value:function(e){return"com.microsoft.playready"===e}},{key:"_isTVKey",value:function(e){return"com.tvkey.drm"===e}},{key:"_makeLicenseServerUrl",value:function(){var e=this.drmDetails.config.licenceServer,t=this.drmDetails.config.tenantId,n="Widevine";this.isPlayReady?n="PlayReady":this.isTVKey&&(n="Tvkey");var r=S.default.buildUrlWith(e,t,n,"License");return this.isRenewal&&(r+="?renew=true"),r}},{key:"_makeHeaders",value:function(e){var t="application/octet-stream";this.isPlayReady?t="text/xml; charset=utf-8":this.isTVKey&&(t="application/json");var n=this.isRenewal?this.sessionToken:e.source.token+","+this.sessionToken;return this.log("nv-authorizations: "+n),{"Content-Type":t,"nv-authorizations":n}}},{key:"_doLicenceRequest",value:function(e){var t=this;this.isPlayReady=this._isPlayready(e.keySystem),this.isTVKey=this._isTVKey(e.keySystem);var n=this._makeLicenseServerUrl(),r=this._makeHeaders(e),i=new XMLHttpRequest;i.open("POST",n,!0),i.responseType="arraybuffer";for(var o in r)r.hasOwnProperty(o)&&i.setRequestHeader(o,r[o]);i.onload=function(){var n=!!t.isPlayReady&&t._getParsedPlayreadyResponse(i.response);if(200===i.status){if(n){var r=Boolean(n.proactive);if(r){var o=n.customData.sessionToken;t._setSessionToken(o),t.secureSession.updateSessionToken(o)}t.isRenewal=r}else if(t.isTVKey){var a=t._parseTVKeyResponse(new Uint8Array(i.response));t.log("Session token is : "+a),a?(t.isRenewal=!0,t._setSessionToken(a),t.secureSession.updateSessionToken(a)):t.log("SSM renewal is not supported.")}e.resolve(new Uint8Array(i.response))}else{if(t.isRenewal){var s=n?JSON.stringify(n.customData):_.default.arrayBufferToString(i.response),u=new Error(s);t._error("ssmrenewalerror",u)}t.isTVKey&&t.log.error("Server return error: "+shaka.util.StringUtils.fromUTF8(i.response)),t.log("HTTP "+i.status+" received"),e.reject("Failed to receive licence, HTTP status:"+i.status)}},i.onerror=function(){t.log("xhr error"),e.reject("Error on licence request")};var a=this.isTVKey?this._updateTVKeyRequestPayload(e.requestPayload):e.requestPayload;i.send(a)}},{key:"_parseTVKeyResponse",value:function(e){var t=shaka.util.StringUtils.fromUTF8(e);this.log("tvkey SSM license reponse payload: "+t);var n=JSON.stringify(t);if(n&&n.errorCode)this.log.error("tvkey ssm request license failure, error code :"+n.errorCode);else{var r=n.OttLicenseResponseMessage;r&&r.Application6}return""}},{key:"_updateTVKeyRequestPayload",value:function(e){var t=shaka.util.StringUtils,n=JSON.parse(t.fromUTF8(new Uint8Array(e)));if(!n.OttLicenseRequestMessage){var r={OttLicenseRequestMessage:n},i=JSON.stringify(r);return this.log("tvkey SSM license request payload: "+i),t.toUTF8(i)}return e}},{key:"_getParsedPlayreadyResponse",value:function(e){return new f.default.PlayReadyServerResponseParser(e)}},{key:"_doLicenceRenew",value:function(e){var t=this,n=this.drmDetails.config.ssmServer+"/renewal-license-wv",r={Accept:"application/json","Content-Type":"application/json","nv-authorizations":this.sessionToken},i=this._makeJsonPayload(e.requestPayload),o=new XMLHttpRequest;o.open("POST",n,!0),o.responseType="text";for(var a in r)r.hasOwnProperty(a)&&o.setRequestHeader(a,r[a]);o.onload=function(){if(200===o.status)try{var n=JSON.parse(o.response),r=n.sessionToken;t._setSessionToken(r),t.secureSession.updateSessionToken(r),t.log("Received new SSM session token from license renewal: "+r);for(var i=atob(n.license),a=new ArrayBuffer(i.length),s=new Uint8Array(a),u=0,c=i.length;u<c;u++)s[u]=i.charCodeAt(u);e.resolve(s)}catch(t){var l="Failed JSON response parse: "+t;e.reject(l)}else{var d=void 0;try{d=JSON.parse(o.response)}catch(e){d={}}d.code=o.status;var f=JSON.stringify(d),h=new Error(f);t._error("ssmrenewalerror",h);var p="Failed to receive licence, HTTP status:"+f;e.reject(p)}},o.onerror=function(){e.reject("Error on licence request")},o.send(i)}},{key:"_makeJsonPayload",value:function(e){return JSON.stringify({challenge:btoa(String.fromCharCode.apply(String,i(new Uint8Array(e))))})}}]),t}(y.default);t.default=k},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(49),l=n(11),d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"_makeTimelineLogger",value:function(){return new f}},{key:"_setSessionToken",value:function(e){this.timeline.setSessionToken(e)}}]),t}(c.DrmDashController);t.default=d;var f=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.token="",e.sessionToken="",e.renewal=!1,e}return a(t,e),u(t,[{key:"tearDown",value:function(){this.renewal=!1,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this)}},{key:"setSource",value:function(e){this.token=e.token||"",s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setSource",this).call(this,e)}},{key:"setSessionToken",value:function(e){this.sessionToken=e}},{key:"_shakaRequestFilter",value:function(e,n){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if("license-renewal"===n.licenseRequestType){var i;this.renewal=!0,this.provision=!1;var o=JSON.stringify((i={},r(i,l.OtvEventExtraKey.contentToken,this.token),r(i,l.OtvEventExtraKey.sessionToken,this.sessionToken),i)),a=l.OtvEventType.sessionManagement,u=l.OtvEventCommandSessionManagement.renewalStart;OTV.eventTimeline.addToTimeline(a,u,o)}else this.renewal=!1,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_shakaRequestFilter",this).call(this,e,n)}},{key:"_shakaResponseFilter",value:function(e,n){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if(this.renewal){var i,o=void 0,a=(i={},r(i,l.OtvEventExtraKey.contentToken,this.token),r(i,l.OtvEventExtraKey.sessionToken,this.sessionToken),i);o=l.OtvEventCommandSessionManagement.renewalSuccessful;var u=l.OtvEventType.sessionManagement,c=JSON.stringify(a);OTV.eventTimeline.addToTimeline(u,o,c)}else s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_shakaResponseFilter",this).call(this,e,n)}},{key:"_onErrorEvent",value:function(e){if(6007===e.detail.code)if(this.renewal){var n,i=void 0,o=(n={},r(n,l.OtvEventExtraKey.contentToken,this.token),r(n,l.OtvEventExtraKey.sessionToken,this.sessionToken),n);o[l.OtvEventExtraKey.error]=e.detail.message,i=l.OtvEventCommandSessionManagement.renewalFailure;var a=l.OtvEventType.sessionManagement,u=JSON.stringify(o);OTV.eventTimeline.addToTimeline(a,i,u)}else s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onErrorEvent",this).call(this,e)}}]),t}(c.DrmDashTimeline)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(42),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=n(11),c=function(){},l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;i(this,e),this.ssmEndpointUrl=t,this.log=n,this.timeline=new d}return o(e,[{key:"doSetup",value:function(e){var t=this;return this.log("doSetup - authToken: "+e),this.timeline.logSetupStart(e),new Promise(function(n,r){t._requestSessionToken(t.ssmEndpointUrl+"/setup",e).then(function(e){var i=e.heartbeat,o=e.sessionToken;t.log("doSetup - received session token from ssm mgr:"),t.log("   heartbeat "+i),t.log("   sessionToken "+o),(!i||i<=0)&&r("doSetup - Invalid heartbeat period"),t.timeline.logSetupSuccessful(o),n({sessionToken:o,heartbeatPeriod:i})}).catch(function(e){t.timeline.logSetupFailure(e),r(e)})})}},{key:"tearDown",value:function(e){var t=this;return new Promise(function(n,r){t.log("tearDown - performing teardown for session token: "+e+" via "+t.ssmEndpointUrl+"/teardown"),t.timeline.logTeardownStart(e),t._ssmApiCall(t.ssmEndpointUrl+"/teardown",e,!0).then(function(){t.log("tearDown - teared down session for sessionToken "+e),t.timeline.logTeardownSuccessful(e),n()}).catch(function(n){t.log("tearDown - tear down has failed session for sessionToken "+e),t.timeline.logTeardownFailure(e,n),r(n)})})}},{key:"heartbeat",value:function(e){var t=this,n=new Date;return this.log("Making heartbeat - "+n.toISOString()+" current session token = "+e),this.timeline.logHeartbeatStart(e),new Promise(function(n,r){t._requestSessionToken(t.ssmEndpointUrl+"/heartbeat",e).then(function(r){var i=r.sessionToken;t.log("Heartbeat - Refreshed sessionToken "+e+", is now "+i),t.timeline.logHeartbeatSuccessful(i),n(i)}).catch(function(n){t.log("Heartbeat - error while making heartbeat call, reason="+n),t.timeline.logHeartbeatFailure(e,n),r(n)})})}},{key:"_ssmApiCall",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={method:"POST",mode:"cors",redirect:"follow",headers:{"nv-authorizations":t,"content-type":"application/json; charset=utf-8"},body:"{}"};return r&&!s.default.isChrome()&&(i.keepalive=!0),new Promise(function(t,r){fetch(e,i).then(function(e){if(e.ok)t(e.json());else{var i=e.status;n.log(JSON.stringify(e)),e.text().then(function(e){var t=void 0;try{t=JSON.parse(e)}catch(e){t={}}t.code=i,r(Error(JSON.stringify(t)))})}}).catch(function(t){n.log("Error making request to "+e),r(t)})})}},{key:"_requestSessionToken",value:function(e,t){var n=this;return this.log("_requestSessionToken - trying to get sessionToken from "+e),new Promise(function(r,i){n._ssmApiCall(e,t).then(function(t){n.log("_requestSessionToken - got response from "+e),r(t)}).catch(function(e){n.log("_requestSessionToken - error API call, reason="+e),i(e)})})}}]),e}(),d=function(){function e(){i(this,e),this.contentToken=""}return o(e,[{key:"logSetupStart",value:function(e){this.contentToken=e;var t=JSON.stringify(r({},u.OtvEventExtraKey.contentToken,e));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.setupStart,t)}},{key:"logSetupSuccessful",value:function(e){var t,n=JSON.stringify((t={},r(t,u.OtvEventExtraKey.sessionToken,e),r(t,u.OtvEventExtraKey.contentToken,this.contentToken),t));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.setupSuccessful,n)}},{key:"logSetupFailure",value:function(e){var t,n=JSON.stringify((t={},r(t,u.OtvEventExtraKey.error,e),r(t,u.OtvEventExtraKey.contentToken,this.contentToken),t));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.setupFailure,n)}},{key:"logTeardownStart",value:function(e){var t,n=JSON.stringify((t={},r(t,u.OtvEventExtraKey.sessionToken,e),r(t,u.OtvEventExtraKey.contentToken,this.contentToken),t));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.teardownStart,n)}},{key:"logTeardownSuccessful",value:function(e){var t,n=JSON.stringify((t={},r(t,u.OtvEventExtraKey.sessionToken,e),r(t,u.OtvEventExtraKey.contentToken,this.contentToken),t));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.teardownSuccessful,n)}},{key:"logTeardownFailure",value:function(e,t){var n,i=JSON.stringify((n={},r(n,u.OtvEventExtraKey.sessionToken,e),r(n,u.OtvEventExtraKey.contentToken,this.contentToken),r(n,u.OtvEventExtraKey.error,t),n));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.teardownFailure,i)}},{key:"logHeartbeatStart",value:function(e){var t,n=JSON.stringify((t={},r(t,u.OtvEventExtraKey.sessionToken,e),r(t,u.OtvEventExtraKey.contentToken,this.contentToken),t));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.heartbeatStart,n)}},{key:"logHeartbeatSuccessful",value:function(e){var t,n=JSON.stringify((t={},r(t,u.OtvEventExtraKey.sessionToken,e),r(t,u.OtvEventExtraKey.contentToken,this.contentToken),t));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.heartbeatSuccessful,n)}},{key:"logHeartbeatFailure",value:function(e,t){var n,i=JSON.stringify((n={},r(n,u.OtvEventExtraKey.sessionToken,e),r(n,u.OtvEventExtraKey.contentToken,this.contentToken),r(n,u.OtvEventExtraKey.error,t),n));OTV.eventTimeline.addToTimeline(u.OtvEventType.sessionManagement,u.OtvEventCommandSessionManagement.heartbeatFailure,i)}}]),e}();t.default={SsmInterface:l}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(370),l=r(c),d=n(144),f=r(d),h=n(141),p=r(h),g=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.log=n,a.vjsPlayer=r,a.drmDetails=e,a.heartbeatMode=!0,a.secureSession=new f.default(e.config.ssmServer,n,a._heartbeatCallback.bind(a)),a}return a(t,e),s(t,[{key:"updateSourceData",value:function(e){var n=this,r=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e);return this.heartbeatMode=!0,this.secureSession.teardown().catch(function(e){return n._tearDownError(e)}).finally(function(){return n._setSessionToken(null)}),r.token&&this.secureSession.setup(r.token).then(function(e){return n._setSessionToken(e)}).catch(function(e){n.log("SSM session open failed: "+e),n._error("ssmsetuperror",e)}),r}},{key:"tearDown",value:function(){var e=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this),this.sessionToken&&(this.secureSession.teardown().catch(function(t){return e._tearDownError(t)}),this._setSessionToken(null))}},{key:"renewLicence",value:function(){this.sspFairPlay.renewLicence()}},{key:"_makeFairPlaySystem",value:function(e,t,n){return new l.default(e,t,this._sessionUpdateCb.bind(this),n,this._error.bind(this))}},{key:"_heartbeatCallback",value:function(){var e=this;this.heartbeatMode?this.secureSession.heartbeat().then(function(t){return e._setSessionToken(t)}).catch(function(t){return e._heartbeatError(t)}):this.renewLicence()}},{key:"_setSessionToken",value:function(e){this.sessionToken=e,this.sspFairPlay.setSessionToken(e)}},{key:"_sessionUpdateCb",value:function(e){this.heartbeatMode=!1,this._setSessionToken(e),this.secureSession.updateSessionToken(e)}},{key:"_tearDownError",value:function(e){this._error("ssmteardownerror",e)}},{key:"_heartbeatError",value:function(e){this._error("ssmheartbeaterror",e)}},{key:"_error",value:function(e,t){this.vjsPlayer.trigger({type:e,reason:t})}}]),t}(p.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(142),d=r(l),f=n(100),h=r(f),p=n(30),g=r(p),y=n(11),v=function(e){function t(e,n,r,i,s){o(this,t);var u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));return u.sessionToken=null,u.sessionCallback=r,u.errorCallback=s,u}return s(t,e),c(t,[{key:"setSessionToken",value:function(e){this.sessionToken=e,this.licenceRequester.setSessionToken(e)}},{key:"renewLicence",value:function(){this.videoDecryption.renewLicence()}},{key:"_makeLicenceRequester",value:function(e){return e.sessionCallback=this.sessionCallback,e.errorCallback=this.errorCallback,new m(e)}}]),t}(d.default.SSPFairPlaySystem);t.default=v;var m=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sessionToken=null,n.sessionCallback=e.sessionCallback,n.errorCallback=e.errorCallback,n._makeSetupPromise(),n}return s(t,e),c(t,[{key:"setSessionToken",value:function(e){this.sessionToken=e,e?this.setupResolve():this._makeSetupPromise()}},{key:"request",value:function(e,n){var r=this;return new Promise(function(i,o){var a=r;r.setupPromise.then(function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"request",r).call(r,e,n).then(function(e){return i(e)}).catch(function(e){"license-renewal"===n&&a.errorCallback&&a.errorCallback("ssmrenewalerror",e),o(e)})})})}},{key:"_makeSetupPromise",value:function(){var e=this;this.setupPromise=new Promise(function(t){e.setupResolve=t})}},{key:"_getTokenString",value:function(e){return this.sessionToken?"license-request"===e?u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTokenString",this).call(this)+","+this.sessionToken:this.sessionToken:u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTokenString",this).call(this)}},{key:"_getLicenceUri",value:function(e){var n=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getLicenceUri",this).call(this);return"license-request"!==e&&(n+="?renew=true"),n}},{key:"_getCkc",value:function(e){var t=JSON.parse(e);return t.sessionToken&&this.sessionCallback(t.sessionToken),this.logger.message("CkcMessage: "+t.CkcMessage).debug(),g.default.base64DecodeUint8Array(t.CkcMessage)}},{key:"_logKeyRequestStatTimelineEvent",value:function(e,n){if("license-request"===e)u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_logKeyRequestStatTimelineEvent",this).call(this,e,n);else{var r,o=JSON.stringify((r={},i(r,y.OtvEventExtraKey.contentToken,this.token),i(r,y.OtvEventExtraKey.sessionToken,this.sessionToken),r)),a=y.OtvEventType.sessionManagement,s=y.OtvEventCommandSessionManagement.renewalStart;OTV.eventTimeline.addToTimeline(a,s,o)}}},{key:"_logKeyStatSuccessTimelineEvent",value:function(e,n){if("license-request"===e)u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_logKeyStatSuccessTimelineEvent",this).call(this,e,n);else{var r,o=(r={},i(r,y.OtvEventExtraKey.contentToken,this.token),i(r,y.OtvEventExtraKey.sessionToken,this.sessionToken),r),a=y.OtvEventCommandSessionManagement.renewalSuccessful,s=y.OtvEventType.sessionManagement,c=JSON.stringify(o);OTV.eventTimeline.addToTimeline(s,a,c)}}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e,n,r){if("license-request"===e)u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_logKeyRequestStatFailureTimelineEvent",this).call(this,e,n,r);else{var o,a=(o={},i(o,y.OtvEventExtraKey.contentToken,this.token),i(o,y.OtvEventExtraKey.sessionToken,this.sessionToken),i(o,y.OtvEventExtraKey.error,r),o),s=y.OtvEventCommandSessionManagement.renewalFailure,c=y.OtvEventType.sessionManagement,l=JSON.stringify(a);OTV.eventTimeline.addToTimeline(c,s,l)}}}]),t}(h.default)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.certificate=t}return i(e,[{key:"getCertificate",value:function(){return"function"==typeof this.certificate?this.certificate():Promise.resolve(this.certificate)}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var u,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=n(145),f=r(d),h=n(143),p=r(h),g=(u={},s(u,"com.widevine.alpha","edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"),s(u,"com.microsoft.playready","9a04f079-9840-4286-ab92-e65be0885f95"),s(u,"com.tvkey.drm","adb41c24-2dbf-4a6d-958b-4457c0d27b95"),u),y=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return a.heartbeatTimer=0,a.isRenewal=!1,a}return a(t,e),c(t,[{key:"tearDown",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this),this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=0),this.isRenewal=!1}},{key:"_getHttpCallback",value:function(){return this._onNeedLicence.bind(this)}},{key:"_onNeedLicence",value:function(e,t,n,r){var i=this,o=this,a=this._getRequestType(e,r),s=this._getContentProtectionScheme(e);return new Promise(function(t,r){s?i.drmDetails.config.customerSsmCallback.getLicence(s,n,a).then(function(n){o._gotLicence(e,a,n.licence,n.heartbeat);var r="com.widevine.alpha"===e?n.licence:new Uint8Array(n.licence);t(r)}).catch(function(e){r(e)}):r("Key system "+e+" not supported in this DRM mode")})}},{key:"_getRequestType",value:function(e,t){return"com.microsoft.playready"!==e&&"com.tvkey.drm"!==e||!this.isRenewal?t:"license-renewal"}},{key:"_heartbeat",value:function(){this.drmDetails.config.customerSsmCallback.heartbeat()}},{key:"_renewTimerTask",value:function(){this.isRenewal=!0,this.renewLicence()}},{key:"_gotLicence",value:function(e,t,n,r){var i="com.microsoft.playready"===e,o="com.tvkey.drm"===e;if((i||o)&&"license-request"===t&&!this.heartbeatTimer){var a=!1;if(i){a=this._parseLicence(n).proactive}else{this._parseTVKeyResponse(new Uint8Array(n))&&(a=!0)}var s=a?this._renewTimerTask.bind(this):this._heartbeat.bind(this);this.heartbeatTimer=this._makeTimer(r,s)}}},{key:"_parseTVKeyResponse",value:function(e){var t=shaka.util.StringUtils.fromUTF8(e);this.log("tvkey license response payload: "+t);var n=JSON.stringify(t);if(n&&n.errorCode)this.log.error("tvkey request license failure, error code :"+n.errorCode);else{var r=n.OttLicenseResponseMessage;r&&r.Application6}return""}},{key:"_parseLicence",value:function(e){return new p.default.PlayReadyServerResponseParser(e)}},{key:"_makeTimer",value:function(e,t){return setInterval(t,1e3*e)}},{key:"_getContentProtectionScheme",value:function(e){return g[e]}}]),t}(f.default);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(146),l=r(c),d=n(147),f=r(d),h=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"com.apple.fps.1_0","94CE86FB-07FF-4F43-ADB8-93D2FA968CA2"),p=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ssmHeartbeatInterval=null,r.enforcement=!0,r}return a(t,e),s(t,[{key:"setEnforcement",value:function(e){this.enforcement=Boolean(e)}},{key:"_heartbeat",value:function(){this.enforcement?this.renewLicence():this.config.customerSsmCallback.heartbeat()}},{key:"_licenceRequestWrapper",value:function(e,t,n,r){var i=this,o=this,a=this._getContentProtectionScheme(e);return new Promise(function(t,s){a?i.config.customerSsmCallback.getLicence(a,n,r).then(function(n){o._gotLicence(e,r,n.licence,n.heartbeat),t(n.licence)}).catch(function(e){s(e)}):s("Key system "+e+" not supported in this DRM mode")})}},{key:"_gotLicence",value:function(e,t,n,r){if("com.apple.fps.1_0"===e&&!this.ssmHeartbeatInterval){var i=this._heartbeat.bind(this);this.ssmHeartbeatInterval=setInterval(i,1e3*r)}}},{key:"tearDown",value:function(){this.ssmHeartbeatInterval&&(clearInterval(this.ssmHeartbeatInterval),this.ssmHeartbeatInterval=null),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this)}},{key:"_makeLicenceRequester",value:function(e,t,n){return new f.default(this._licenceRequestWrapper.bind(this),t,n)}},{key:"_getContentProtectionScheme",value:function(e){return h[e]}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(375),l=r(c),d=n(41),f=r(d),h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.logger=n,r.tvkeyNative=r._makeTVKeyNative(e.system,e.config,n),r.readyEventCalled=!1,r}return a(t,e),s(t,[{key:"ready",value:function(e){if(this.logger("SSPTVKeyNativeController.ready() called."),this.readyEventCalled)return void this.logger("SSPTVKeyNativeController.ready() has been called. Skip.");this.tvkeyNative.setVideoElement(e),this.readyEventCalled=!0}},{key:"updateSourceData",value:function(e){return e&&e.token&&this.tvkeyNative.setSourceToken(e.token),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}},{key:"tearDown",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this),this.readyEventCalled=!1}},{key:"_makeTVKeyNative",value:function(e,t,n){return new l.default.SSPTVKeyNative(e,t,n)}}]),t}(f.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(56),s=r(a),u=n(376),c=r(u),l=n(148),d=r(l),f=n(70),h=r(f),p=function(){function e(t,n,r){i(this,e),n.system=t,this.logger=new s.default(r,t),this.token=void 0,this.videoDecryption=null,n.licenceServer=h.default.buildUrlWith(n.licenceServer,n.tenantId,"Tvkey","License"),this.drmOptions=n}return o(e,[{key:"initialise",value:function(){var e={drmOptions:this.drmOptions,logger:this.logger};this.licenceRequester=this._makeLicenceRequester(e);var t={drmOptions:this.drmOptions,logger:this.logger,licenceRequester:this.licenceRequester};this.videoDecryption=this._makeVideoDecryptionHandler(t)}},{key:"setVideoElement",value:function(e){this.videoDecryption.setVideoElement(e)}},{key:"setSourceToken",value:function(e){this.token=e,this.licenceRequester.setToken(e)}},{key:"_makeLicenceRequester",value:function(e){return new c.default(e)}},{key:"_makeVideoDecryptionHandler",value:function(e){return new d.default(e)}}]),e}();t.default={SSPTVKeyNative:p}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),s=n(139),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(){function e(t){i(this,e),this.drmOptions=t.drmOptions,this.logger=t.logger,this.drmOptions.licenceServer||this.logger.addType().message(" TVKey licenceServer not configured!").warn(),this.drmImplementer=u.default.getDrmImplementation(this.drmOptions.system)}return o(e,[{key:"setToken",value:function(e){this.token=e}},{key:"request",value:function(e,t){var n=this;this.logger.message("Function: TVKeyLicenceRequester.request()").log();var r=this._getLicenceUri(t);return this._logKeyRequestStatTimelineEvent(t,r),new Promise(function(i,o){var a=new XMLHttpRequest;a.responseType="text";var s=n;a.addEventListener("load",function(e){s.logger.message("licence request loaded").log();var n=e.target;if(200===n.status){s.logger.message("Response: "+n.responseText).debug();var a=s._getLicence(n.responseText);s.logger.message("licence request loaded - updating key").log(),s._logKeyStatSuccessTimelineEvent(t,r),i(a)}else{var u="licence request failed: "+n.status+": "+n.responseText;s.logger.message(u).warn(),s.logger.message("licence response headers: "+n.getAllResponseHeaders()).log(),s._logKeyRequestStatFailureTimelineEvent(t,r,u),o(u)}},!1),a.addEventListener("error",function(e){var t="The licence request failed";e.target&&e.target.error&&(t=t+" - Event error code: "+e.target.error.code+" - Event error message: "+e.target.error.message),n._logKeyRequestStatFailureTimelineEvent(r,e.target.error.message),o(t)},!1),a.open("POST",r,!0),a.setRequestHeader("Content-type","application/json"),n.drmImplementer.setRequestHeaders(a,n._getTokenString(t),n.drmOptions.mode),n.logger.message("Sending licence request to: "+r).log(),a.send(n._getTVKeyRequestPayload(e))})}},{key:"_getTVKeyRequestPayload",value:function(e){var t=shaka.util.StringUtils,n=t.fromUTF8(e),r=JSON.parse(n);if(!r.OttLicenseRequestMessage){var i={OttLicenseRequestMessage:r},o=JSON.stringify(i);return this.logger.message("tvkey license request payload: "+o).log(),o}return n}},{key:"_getLicence",value:function(e){return this.logger.message("tvkey licence : "+e).log(),shaka.util.StringUtils.toUTF8(e)}},{key:"_getLicenceUri",value:function(){return this.drmOptions.licenceServer}},{key:"_getTokenString",value:function(){return this.token}},{key:"_logKeyRequestStatTimelineEvent",value:function(e,t){this._logTimelineEvent(a.OtvEventCommandLicenseRequest.keyRequestStart,t)}},{key:"_logKeyStatSuccessTimelineEvent",value:function(e,t){this._logTimelineEvent(a.OtvEventCommandLicenseRequest.keyRequestSuccessful,t)}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e,t,n){this._logTimelineEvent(a.OtvEventCommandLicenseRequest.keyRequestFailed,t,n)}},{key:"_logTimelineEvent",value:function(e,t,n){var i="";if(n){var o;i=JSON.stringify((o={},r(o,a.OtvEventExtraKey.url,t),r(o,a.OtvEventExtraKey.error,n),o))}else i=JSON.stringify(r({},a.OtvEventExtraKey.url,t));OTV.eventTimeline.addToTimeline(a.OtvEventType.licenseRequest,e,i)}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.psshBox=t,this.version=null,this.systemId=null,this.data=null,this._parse()}return i(e,[{key:"_parse",value:function(){if(this.psshBox&&!(this.psshBox.length<32)){var e=new DataView(this.psshBox.buffer),t=0;if(t+=4,1886614376===e.getUint32(t)&&(t+=4,this.version=e.getUint8(t),0===this.version||1===this.version)){t+=4,this.systemId="";for(var n=0;n<16;n++){var r=e.getUint8(t+n).toString(16);this.systemId+=1===r.length?"0"+r:r}this.systemId=this.systemId.toLowerCase(),t+=16,e.getUint32(t)>0&&(t+=4,this.data=e.buffer.slice(t))}}}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(41),l=r(c),d=n(56),f=r(d),h=n(148),p=r(h),g=n(379),y=r(g),v="com.tvkey.drm",m=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.config=e.config,r.logger=new f.default(n,e.system),r.videoDecryption=null,r.readyEventCalled=!1,r.licenceRequester=r._makeLicenceRequester(r.config.requestLicenceCallback,v,r.logger);var a={drmOptions:r.config,logger:r.logger,licenceRequester:r.licenceRequester};return r.videoDecryption=r._makeVideoDecryptionHandler(a),r}return a(t,e),s(t,[{key:"ready",value:function(e){if(this.logger.message("DrmCustomerTVKeyNativeController.ready()").log(),this.readyEventCalled)return void this.logger.message("DrmCustomerTVKeyNativeController.ready() has been called. Skip.").log();this.videoDecryption.setVideoElement(e),this.readyEventCalled=!0}},{key:"updateSourceData",value:function(e){return this.src=e,this.licenceRequester.setSource(e),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSourceData",this).call(this,e)}},{key:"tearDown",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"tearDown",this).call(this),this.videoDecryption.tearDown(),this.readyEventCalled=!1}},{key:"_makeLicenceRequester",value:function(e,t,n){return new y.default(e,t,n)}},{key:"_makeVideoDecryptionHandler",value:function(e){return new p.default(e)}}]),t}(l.default);t.default=m},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),s=function(){function e(t,n,r){i(this,e),this.callback=t,this.keysystem=n,this.logger=r}return o(e,[{key:"setSource",value:function(e){this.source=e}},{key:"request",value:function(e,t){var n=this;return new Promise(function(r,i){n._logKeyRequestStatTimelineEvent(),n.callback(n.keysystem,n.source,n._getTVKeyRequestPayload(e),t).then(function(e){n._logKeyStatSuccessTimelineEvent(),r(n._getLicence(e))}).catch(function(e){n._logKeyRequestStatFailureTimelineEvent(e),i(e)})})}},{key:"_getTVKeyRequestPayload",value:function(e){var t=shaka.util.StringUtils,n=t.fromUTF8(e),r=JSON.parse(n);if(!r.OttLicenseRequestMessage){var i={OttLicenseRequestMessage:r},o=JSON.stringify(i);return this.logger.message("tvkey license request payload: "+o).log(),o}return n}},{key:"_getLicence",value:function(e){return this.logger.message("tvkey licence : "+e).log(),shaka.util.StringUtils.toUTF8(e)}},{key:"_logKeyRequestStatTimelineEvent",value:function(){var e=a.OtvEventType.licenseRequest,t=a.OtvEventCommandLicenseRequest.keyRequestStart;OTV.eventTimeline.addToTimeline(e,t)}},{key:"_logKeyStatSuccessTimelineEvent",value:function(){var e=a.OtvEventType.licenseRequest,t=a.OtvEventCommandLicenseRequest.keyRequestSuccessful;OTV.eventTimeline.addToTimeline(e,t)}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e){var t=a.OtvEventType.licenseRequest,n=a.OtvEventCommandLicenseRequest.keyRequestFailed,i=JSON.stringify(r({},a.OtvEventExtraKey.error,e));OTV.eventTimeline.addToTimeline(t,n,i)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){var n=e<0?0:e,r=Math.floor(n%a),i=Math.floor(n/a%a),o=Math.floor(n/(a*s)),c=Math.floor(t/a%a),l=Math.floor(t/(a*s));return(isNaN(n)||n===1/0)&&(o=i=r="0"),o=o>0||l>0?o+":":"",i=((o||c>=u)&&i<u?"0"+i:i)+":",r=r<u?"0"+r:r,o+i+r}function i(e){var t="-";return(e===1/0||e<1)&&(t=""),t}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=void 0;if(t===1/0&&this.liveTracker&&this.liveTracker.isLive()){var o=this.liveTracker.liveWindow(),a=0;this.liveTracker.behindLiveEdge()&&(a=this.liveTracker.seekableEnd()-e+this.liveTracker.pastSeekEnd()),n=i(a)+r(a,o)}else n=r(e,t);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=60,s=60,u=10;t.default={liveFormatTime:o}},function(e,t,n){e.exports=n(382)},function(e,t,n){(function(t){null==t.Promise&&(t.Promise=n(383)),null==Object.assign&&Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n(386)}),e.exports=n(387)}).call(t,n(18))},function(e,t,n){(function(t,n,r){!function(t){"use strict";function i(e){if(!(this instanceof i))throw new TypeError("Zousan must be created with the new keyword");if("function"==typeof e){var t=this;try{e(function(e){t.resolve(e)},function(e){t.reject(e)})}catch(e){t.reject(e)}}else if(0<arguments.length)throw new TypeError("Zousan resolver "+e+" is not a function")}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(u,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function a(e,t){if("function"==typeof e.n)try{var n=e.n.call(u,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}var s,u,c="fulfilled",l="undefined",d=function(){function e(){for(;i.length-o;){try{i[o]()}catch(e){t.console&&t.console.error(e)}i[o++]=u,1024==o&&(i.splice(0,1024),o=0)}}var i=[],o=0,a=function(){if(typeof MutationObserver===l)return typeof n!==l&&"function"==typeof n.nextTick?function(){n.nextTick(e)}:typeof r!==l?function(){r(e)}:function(){setTimeout(e,0)};var t=document.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.setAttribute("a",0)}}();return function(e){i.push(e),i.length-o==1&&a()}}();i.prototype={resolve:function(e){if(this.state===s){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"==typeof e))try{var n=!0,r=e.then;if("function"==typeof r)return void r.call(e,function(e){n&&(n=!1,t.resolve(e))},function(e){n&&(n=!1,t.reject(e))})}catch(r){return void(n&&this.reject(r))}this.state=c,this.v=e,t.c&&d(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(this.state===s){var n=this;this.state="rejected",this.v=e;var r=this.c;d(r?function(){for(var t=0,n=r.length;t<n;t++)a(r[t],e)}:function(){n.handled||!i.suppressUncaughtRejectionError&&t.console&&i.warn("You upset Zousan. Please catch rejections: ",e,e?e.stack:null)})}},then:function(e,t){var n=new i,r={y:e,n:t,p:n};if(this.state===s)this.c?this.c.push(r):this.c=[r];else{var u=this.state,l=this.v;this.handled=!0,d(function(){u===c?o(r,l):a(r,l)})}return n},catch:function(e){return this.then(null,e)},finally:function(e){return this.then(e,e)},timeout:function(e,t){t=t||"Timeout";var n=this;return new i(function(r,i){setTimeout(function(){i(Error(t))},e),n.then(function(e){r(e)},function(e){i(e)})})}},i.resolve=function(e){var t=new i;return t.resolve(e),t},i.reject=function(e){var t=new i;return t.c=[],t.reject(e),t},i.all=function(e){for(var t=[],n=0,r=new i,o=0;o<e.length;o++)!function(o,a){o&&"function"==typeof o.then||(o=i.resolve(o)),o.then(function(i){t[a]=i,++n==e.length&&r.resolve(t)},function(e){r.reject(e)})}(e[o],o);return e.length||r.resolve(t),r},i.warn=console.warn,typeof e!=l&&e.exports&&(e.exports=i),t.define&&t.define.amd&&t.define([],function(){return i}),(t.Zousan=i).soon=d}(void 0!==t?t:this)}).call(t,n(18),n(149),n(384).setImmediate)},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(385),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(18))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[u]=r,s(u),u++}function i(e){delete c[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(l)setTimeout(a,0,e);else{var t=c[e];if(t){l=!0;try{o(t)}finally{i(e),l=!1}}}}if(!e.setImmediate){var s,u=1,c={},l=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;s=function(t){var n=d.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(a,0,e)}}(),f.setImmediate=r,f.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(18),n(149))},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)o.call(n,l)&&(u[l]=n[l]);if(i){s=i(n);for(var d=0;d<s.length;d++)a.call(n,s[d])&&(u[s[d]]=n[s[d]])}}return u}},function(e,t,n){var r;r=n(388),e.exports=function(){function e(){}return e.DEFAULT_CONTENT_TYPE="application/x-www-form-urlencoded; charset=UTF-8",e.prototype.send=function(e){var t;return null==e&&(e={}),t={method:"GET",data:null,headers:{},async:!0,username:null,password:null,withCredentials:!1},e=Object.assign({},t,e),new Promise(function(t){return function(n,r){var i,o,a,s,u;if(!XMLHttpRequest)return void t._handleError("browser",r,null,"browser doesn't support XMLHttpRequest");if("string"!=typeof e.url||0===e.url.length)return void t._handleError("url",r,null,"URL is a required parameter");t._xhr=u=new XMLHttpRequest,u.onload=function(){var e;t._detachWindowUnload();try{e=t._getResponseText()}catch(e){return void t._handleError("parse",r,null,"invalid JSON response")}return n({url:t._getResponseUrl(),status:u.status,statusText:u.statusText,responseText:e,headers:t._getHeaders(),xhr:u})},u.onerror=function(){return t._handleError("error",r)},u.ontimeout=function(){return t._handleError("timeout",r)},u.onabort=function(){return t._handleError("abort",r)},t._attachWindowUnload(),u.open(e.method,e.url,e.async,e.username,e.password),e.withCredentials&&(u.withCredentials=!0),null==e.data||e.headers["Content-Type"]||(e.headers["Content-Type"]=t.constructor.DEFAULT_CONTENT_TYPE),a=e.headers;for(o in a)s=a[o],u.setRequestHeader(o,s);try{return u.send(e.data)}catch(e){return i=e,t._handleError("send",r,null,i.toString())}}}(this))},e.prototype.getXHR=function(){return this._xhr},e.prototype._attachWindowUnload=function(){if(this._unloadHandler=this._handleWindowUnload.bind(this),window.attachEvent)return window.attachEvent("onunload",this._unloadHandler)},e.prototype._detachWindowUnload=function(){if(window.detachEvent)return window.detachEvent("onunload",this._unloadHandler)},e.prototype._getHeaders=function(){return r(this._xhr.getAllResponseHeaders())},e.prototype._getResponseText=function(){var e;switch(e="string"==typeof this._xhr.responseText?this._xhr.responseText:"",(this._xhr.getResponseHeader("Content-Type")||"").split(";")[0]){case"application/json":case"text/javascript":e=JSON.parse(e+"")}return e},e.prototype._getResponseUrl=function(){return null!=this._xhr.responseURL?this._xhr.responseURL:/^X-Request-URL:/m.test(this._xhr.getAllResponseHeaders())?this._xhr.getResponseHeader("X-Request-URL"):""},e.prototype._handleError=function(e,t,n,r){return this._detachWindowUnload(),t({reason:e,status:n||this._xhr.status,statusText:r||this._xhr.statusText,xhr:this._xhr})},e.prototype._handleWindowUnload=function(){return this._xhr.abort()},e}()},function(e,t){var n=function(e){return e.replace(/^\s+|\s+$/g,"")},r=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};for(var t={},i=n(e).split("\n"),o=0;o<i.length;o++){var a=i[o],s=a.indexOf(":"),u=n(a.slice(0,s)).toLowerCase(),c=n(a.slice(s+1));void 0===t[u]?t[u]=c:r(t[u])?t[u].push(c):t[u]=[t[u],c]}return t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return"application/dash+xml"===t?new u.default.DashNetworkStatistics(e):new l.default.HlsNetworkStatistics(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(390),u=r(s),c=n(391),l=r(c),d=n(71),f=r(d),h=n(103),p=r(h),g=function(){function e(t){i(this,e),this.player=t,this.networkListenerList=new p.default.ListenerList}return a(e,[{key:"setSource",value:function(e){var t=this;if(this._resetImp(),e.type)this.impl=o(this.player,e.type),this._setupImpListeners();else{var n=new f.default.SourceBuilder,r=e.src?e.src:e,i=this;n.build(r).then(function(e){i.player&&(t.impl=o(t.player,e.type),t._setupImpListeners())})}}},{key:"getAdaptiveStreaming",value:function(){return this.impl?this.impl.getAdaptiveStreaming():null}},{key:"getContentServer",value:function(){return this.impl?this.impl.getContentServer():null}},{key:"getNetworkUsage",value:function(){return this.impl?this.impl.getNetworkUsage():null}},{key:"setNetworkListener",value:function(e){this.listener=e,this.impl&&this.impl.setListener(e)}},{key:"addNetworkListener",value:function(e){this.impl&&this.impl.addListener(e),this.networkListenerList.add(e)}},{key:"removeNetworkListener",value:function(e){this.impl&&this.impl.removeListener(e),this.networkListenerList.remove(e)}},{key:"dispose",value:function(){this._resetImp(),this.networkListenerList.clear(),this.networkListenerList=void 0,this.player=void 0}},{key:"_resetImp",value:function(){this.impl&&(this.impl.dispose(),this.impl=null)}},{key:"_setupImpListeners",value:function(){this.impl.setListener(this.listener);for(var e=0;e<this.networkListenerList.length();e++)this.impl.addListener(this.networkListenerList.get(e))}}]),e}();t.default={NetworkStatistics:g}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(50),l=function(e){return e&&e.__esModule?e:{default:e}}(c),d=n(11),f=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setupShakaPlayerListenersHandle=n._setupShakaPlayerListeners.bind(n),n.videojs.on("loadstart",n.setupShakaPlayerListenersHandle),n.requestFilterHandle=n._shakaRequestFilter.bind(n),n.responseFilterHandle=n._shakaResponseFilter.bind(n),n.tracksChangedHandle=n._onTracksChangedEvent.bind(n),n.adaptationHandle=n._onAdaptationEvent.bind(n),n.variantHandle=n._onVariantChangedEvent.bind(n),n.errorHandle=n._onErrorEvent.bind(n),n}return a(t,e),s(t,[{key:"dispose",value:function(){this._clearShakaPlayerListeners(),this.videojs.off("loadstart",this.setupShakaPlayerListenersHandle),this.listener=void 0,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"getAdaptiveStreaming",value:function(){var e=this._getShakaPlayerInstance();if(!e||0===e.getVariantTracks().length)return{selectedBitrate:NaN,availableBitrates:[]};for(var t=[],n=NaN,r=e.getVariantTracks(),i=0;i<r.length;i++){var o=r[i].videoBandwidth+r[i].audioBandwidth;-1===t.indexOf(o)&&t.push(o),r[i].active&&(n=o)}return t.sort(function(e,t){return e-t}),{selectedBitrate:n,availableBitrates:t}}},{key:"getContentServer",value:function(){return{url:this.videojs.currentSrc(),finalUrl:"",finalIpAddress:""}}},{key:"getNetworkUsage",value:function(){var e=this._getShakaPlayerInstance();if(!e)return{bytesDownloaded:NaN,downloadBitrate:NaN,downloadBitrateAverage:NaN};for(var t=NaN,n=e.getStats(),r=n.estimatedBandwidth,i=n.switchHistory,o=i.length-1;o>=0;o--)if("variant"===i[o].type){t=this._getBandWidthById(e,i[o].id);break}return{bytesDownloaded:NaN,downloadBitrate:t,downloadBitrateAverage:r}}},{key:"_getBandWidthById",value:function(e,t){for(var n=NaN,r=e.getVariantTracks(),i=0;i<r.length;i++)if(r[i].id===t){n=r[i].videoBandwidth+r[i].audioBandwidth;break}return n}},{key:"_setupShakaPlayerListeners",value:function(){this._clearShakaPlayerListeners();var e=this._getShakaPlayerInstance();e&&(e.addEventListener("trackschanged",this.tracksChangedHandle),e.addEventListener("adaptation",this.adaptationHandle),e.addEventListener("variantchanged",this.variantHandle),e.addEventListener("error",this.errorHandle),e.getNetworkingEngine().registerRequestFilter(this.requestFilterHandle),e.getNetworkingEngine().registerResponseFilter(this.responseFilterHandle))}},{key:"_clearShakaPlayerListeners",value:function(){var e=this._getShakaPlayerInstance();e&&(e.removeEventListener("trackschanged",this.tracksChangedHandle),e.removeEventListener("adaptation",this.adaptationHandle),e.removeEventListener("variantchanged",this.variantHandle),e.removeEventListener("error",this.errorHandle),e.getNetworkingEngine().unregisterRequestFilter(this.requestFilterHandle),e.getNetworkingEngine().unregisterResponseFilter(this.responseFilterHandle))}},{key:"_shakaRequestFilter",value:function(e,t){var n=t.uris;if(Array.isArray(n)&&1===n.length&&(n=n[0]),e===shaka.net.NetworkingEngine.RequestType.MANIFEST){var i=JSON.stringify(r({},d.OtvEventExtraKey.url,n));this._sendtoEventTimeline(d.OtvEventType.manifestDl,d.OtvEventCommandNetwork.networkStart,i)}else if(e===shaka.net.NetworkingEngine.RequestType.SEGMENT){var o=JSON.stringify(r({},d.OtvEventExtraKey.url,n));this._sendtoEventTimeline(d.OtvEventType.segmentDl,d.OtvEventCommandNetwork.networkStart,o)}}},{key:"_shakaResponseFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.MANIFEST){var n=t.uri,i=JSON.stringify(r({},d.OtvEventExtraKey.url,n));this._sendtoEventTimeline(d.OtvEventType.manifestDl,d.OtvEventCommandNetwork.networkComplete,i)}else if(e===shaka.net.NetworkingEngine.RequestType.SEGMENT){var o=JSON.stringify(r({},d.OtvEventExtraKey.url,t.uri));this._sendtoEventTimeline(d.OtvEventType.segmentDl,d.OtvEventCommandNetwork.networkComplete,o)}}},{key:"_onTracksChangedEvent",value:function(){var e=this.getAdaptiveStreaming();this.listener&&this.listener.availableBitratesChanged&&this.listener.availableBitratesChanged(e.availableBitrates);for(var t=0;t<this.eventListeners.length();t++){var n=this.eventListeners.get(t);n&&n.availableBitratesChanged&&n.availableBitratesChanged(e.availableBitrates)}}},{key:"_onAdaptationEvent",value:function(){this._fireSelectedBitrateChangedEvent()}},{key:"_onVariantChangedEvent",value:function(){this._fireSelectedBitrateChangedEvent()}},{key:"_fireSelectedBitrateChangedEvent",value:function(){var e=this.getAdaptiveStreaming();this.listener&&this.listener.selectedBitrateChanged&&this.listener.selectedBitrateChanged(e.selectedBitrate);for(var t=0;t<this.eventListeners.length();t++){var n=this.eventListeners.get(t);n&&n.selectedBitrateChanged&&n.selectedBitrateChanged(e.selectedBitrate)}}},{key:"_onErrorEvent",value:function(e){var t=NaN,n="";if(1001===e.detail.code){t=e.detail.data[1],n=e.detail.data[2]}else if(1002===e.detail.code){if(n=e.detail.data[1],e.detail.data[2]===shaka.net.NetworkingEngine.RequestType.MANIFEST){var i=JSON.stringify(r({},d.OtvEventExtraKey.url,e.detail.data[0]));this._sendtoEventTimeline(d.OtvEventType.manifestDl,d.OtvEventCommandNetwork.networkError,i)}else if(e.detail.data[2]===shaka.net.NetworkingEngine.RequestType.SEGMENT){var o=JSON.stringify(r({},d.OtvEventExtraKey.url,e.detail.data[0]));this._sendtoEventTimeline(d.OtvEventType.segmentDl,d.OtvEventCommandNetwork.networkError,o)}}this.listener&&this.listener.errorChanged&&this.listener.errorChanged(t,n);for(var a=0;a<this.eventListeners.length();a++){var s=this.eventListeners.get(a);s&&s.errorChanged&&s.errorChanged(t,n)}}},{key:"_sendtoEventTimeline",value:function(e,t,n){OTV.eventTimeline.addToTimeline(e,t,n)}}]),t}(l.default.Statistics);t.default={DashNetworkStatistics:f}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(50),c=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"dispose",value:function(){this.listener=void 0,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"getAdaptiveStreaming",value:function(){return{selectedBitrate:0,availableBitrates:[]}}},{key:"getContentServer",value:function(){return{url:this.videojs.currentSrc()}}},{key:"getNetworkUsage",value:function(){return{bytesDownloaded:0,downloadBitrate:0,downloadBitrateAverage:0}}}]),t}(c.default.Statistics);t.default={HlsNetworkStatistics:l}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return"application/dash+xml"===t?new u.default.DashPlaybackStatistics(e):new l.default.HlsPlaybackStatistics(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(393),u=r(s),c=n(394),l=r(c),d=n(71),f=r(d),h=n(103),p=r(h),g=function(){function e(t){i(this,e),this.player=t,this.playbackListenerList=new p.default.ListenerList}return a(e,[{key:"setSource",value:function(e){var t=this;if(this._resetImp(),e.type)this.impl=o(this.player,e.type),this._setupImpListeners(this.listener);else{var n=new f.default.SourceBuilder,r=e.src?e.src:e,i=this;n.build(r).then(function(e){i.player&&(t.impl=o(t.player,e.type),t._setupImpListeners(t.listener))})}}},{key:"getBufferedDuration",value:function(){return this.impl?this.impl.getBufferedDuration():null}},{key:"getStreamBitrate",value:function(){return this.impl?this.impl.getStreamBitrate():null}},{key:"getResolution",value:function(){return this.impl?this.impl.getResolution():{width:0,height:0}}},{key:"setPlaybackListener",value:function(e){this.listener=e,this.impl&&this.impl.setListener(e)}},{key:"addPlaybackListener",value:function(e){this.impl&&this.impl.addListener(e),this.playbackListenerList.add(e)}},{key:"removePlaybackListener",value:function(e){this.impl&&this.impl.removeListener(e),this.playbackListenerList.remove(e)}},{key:"dispose",value:function(){this._resetImp(),this.playbackListenerList.clear(),this.playbackListenerList=void 0,this.listener=void 0}},{key:"_resetImp",value:function(){this.impl&&(this.impl.dispose(),this.impl=null)}},{key:"_setupImpListeners",value:function(){this.impl.setListener(this.listener);for(var e=0;e<this.playbackListenerList.length();e++)this.impl.addListener(this.playbackListenerList.get(e))}}]),e}();t.default={PlaybackStatistics:g}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(50),c=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.previousBitrate=0,n.videoWidth=0,n.videoHeight=0,n.addShakaPlayerListenerHandle=n._addShakaPlayerListener.bind(n),n.onStreamBitrateChangedHandle=n._onStreamBitrateChanged.bind(n),n.videojs.on("loadstart",n.addShakaPlayerListenerHandle),n}return o(t,e),a(t,[{key:"dispose",value:function(){this._removeShakaPlayerListener(),this.videojs.off("loadstart",this.addShakaPlayerListenerHandle),this.listener=void 0,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_removeShakaPlayerListener",value:function(){var e=this._getShakaPlayerInstance();e&&(e.removeEventListener("adaptation",this.onStreamBitrateChangedHandle),e.removeEventListener("variantchanged",this.onStreamBitrateChangedHandle))}},{key:"getResolution",value:function(){var e=this._getShakaPlayerInstance();if(!e)return{width:0,height:0};var t=e.getStats();return{width:t.width,height:t.height}}},{key:"getBufferedDuration",value:function(){var e=this._getShakaPlayerInstance();if(!e)return 0;var t=e.getBufferedInfo();if(!t.total||!t.total.length)return 0;var n=this.videojs.currentTime();return t.total[0].end-n}},{key:"getStreamBitrate",value:function(){var e=0,t=this._getShakaPlayerInstance();if(t)for(var n=t.getVariantTracks(),r=0;r<n.length;r++)if(n[r].active){isNaN(n[r].videoBandwidth&&!isNaN(n[r].audioBandwidth))||(e=n[r].videoBandwidth+n[r].audioBandwidth);break}return e}},{key:"_addShakaPlayerListener",value:function(){this._removeShakaPlayerListener();var e=this._getShakaPlayerInstance();e&&(e.addEventListener("adaptation",this.onStreamBitrateChangedHandle),e.addEventListener("variantchanged",this.onStreamBitrateChangedHandle))}},{key:"_onStreamBitrateChanged",value:function(){this._checkResolutionChanged();var e=this.getStreamBitrate();this.previousBitrate!==e&&(this.previousBitrate=e,this._fireStreamBitrateChanged(e))}},{key:"_checkResolutionChanged",value:function(){var e=this.getResolution();e.width===this.videoWidth&&e.height===this.videoHeight||(this._fireResolutionChanged(e.width,e.height),this.videoWidth=e.width,this.videoHeight=e.height)}},{key:"_fireResolutionChanged",value:function(e,t){this.listener&&this.listener.resolutionChanged&&this.listener.resolutionChanged(e,t);for(var n=0;n<this.eventListeners.length();n++){var r=this.eventListeners.get(n);r&&r.resolutionChanged&&r.resolutionChanged(e,t)}}},{key:"_fireStreamBitrateChanged",value:function(e){this.listener&&this.listener.streamBitrateChanged&&this.listener.streamBitrateChanged(e);for(var t=0;t<this.eventListeners.length();t++){var n=this.eventListeners.get(t);n&&n.streamBitrateChanged&&n.streamBitrateChanged(e)}}}]),t}(c.default.Statistics);t.default={DashPlaybackStatistics:l}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(50),c=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"dispose",value:function(){this.listener=void 0,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"getResolution",value:function(){return{width:this.videojs.videoWidth(),height:this.videojs.videoHeight()}}},{key:"getBufferedDuration",value:function(){return 0}},{key:"getStreamBitrate",value:function(){return NaN}}]),t}(c.default.Statistics);t.default={HlsPlaybackStatistics:l}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return"application/dash+xml"===t?new u.default.DashRenderingStatistics(e):new l.default.HlsRenderingStatistics(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(396),u=r(s),c=n(397),l=r(c),d=n(71),f=r(d),h=function(){function e(t){i(this,e),this.player=t}return a(e,[{key:"setSource",value:function(e){var t=this;if(this._resetImp(),e.type)this.impl=o(this.player,e.type);else{var n=new f.default.SourceBuilder,r=e.src?e.src:e,i=this;n.build(r).then(function(e){i.player&&(t.impl=o(t.player,e.type))})}}},{key:"getFramesPerSecondNominal",value:function(){return this.impl?this.impl.getFramesPerSecondNominal():null}},{key:"getFramesPerSecond",value:function(){return this.impl?this.impl.getFramesPerSecond():null}},{key:"getFrameDrops",value:function(){return this.impl?this.impl.getFrameDrops():null}},{key:"getFrameDropsPerSecond",value:function(){return this.impl?this.impl.getFrameDropsPerSecond():null}},{key:"dispose",value:function(){this._resetImp(),this.player=void 0}},{key:"_resetImp",value:function(){this.impl&&(this.impl.dispose(),this.impl=null)}}]),e}();t.default={RenderingStatistics:h}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(50),c=function(e){return e&&e.__esModule?e:{default:e}}(u),l=1e3,d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.intervalID=setInterval(n._intervalTask.bind(n),l),n.lastFrameDropCount=0,n.lastDecodedFramesCount=0,n.frameDropsPerSecond=0,n.framesPerSecond=0,n}return o(t,e),a(t,[{key:"dispose",value:function(){clearInterval(this.intervalID),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"getFramesPerSecondNominal",value:function(){var e=this._getShakaPlayerInstance(),t=0;if(e)for(var n=e.getVariantTracks(),r=0;r<n.length;r++)if(n[r].active){isNaN(n[r].frameRate)||(t=n[r].frameRate);break}return t}},{key:"getFramesPerSecond",value:function(){return this.framesPerSecond}},{key:"getFrameDrops",value:function(){var e=this._getShakaPlayerInstance(),t=0;if(e){t=e.getStats().droppedFrames}return t}},{key:"getFrameDropsPerSecond",value:function(){return this.frameDropsPerSecond}},{key:"_intervalTask",value:function(){var e=this._getShakaPlayerInstance();if(e){var t=e.getStats(),n=t.droppedFrames;this.frameDropsPerSecond=n-this.lastFrameDropCount,this.lastFrameDropCount=n;var r=t.decodedFrames;this.framesPerSecond=r-this.lastDecodedFramesCount-this.frameDropsPerSecond,this.lastDecodedFramesCount=r}}}]),t}(c.default.Statistics);t.default={DashRenderingStatistics:d}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(50),c=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"dispose",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"getFramesPerSecondNominal",value:function(){return 0}},{key:"getFramesPerSecond",value:function(){return 0}},{key:"getFrameDrops",value:function(){return 0}},{key:"getFrameDropsPerSecond",value:function(){return 0}}]),t}(c.default.Statistics);t.default={HlsRenderingStatistics:l}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(55),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c={},l=function(){function e(){i(this,e)}return a(e,null,[{key:"register",value:function(e,t){if("string"!=typeof e)throw new Error('Illegal component name, "'+e+'", must be a string, was '+(void 0===e?"undefined":o(e))+".");if(this.componentExists(e)&&u.default.log.warn('A component named "'+e+'" already exists. You may want to avoid re-registering components!'),"function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+(void 0===t?"undefined":o(t))+".");c[e]=t}},{key:"componentExists",value:function(e){return void 0!==c[e]}},{key:"deregister",value:function(e){this.componentExists(e)&&delete c[e]}},{key:"clearToolkit",value:function(e){for(var t in c)c.hasOwnProperty(t)&&this.clearComponent(e,t)}},{key:"clearComponent",value:function(e,t){e.hasOwnProperty(t)&&delete e[t]}},{key:"initialiseToolkit",value:function(e){for(var t in c)c.hasOwnProperty(t)&&this._addComponent(e,t)}},{key:"_addComponent",value:function(e,t){if(e.hasOwnProperty(t))throw new Error('Illegal components name, "'+t+'", cannot share a name with an existing otvtoolkit method!');e[t]=function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=c[t],s=new(Function.prototype.bind.apply(a,[null].concat([e],r(0===i.length?{}:i))));return e[t]=function(){return s},s}}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(57),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;r(this,e),this.player=t,this._log=n,this.selectedBandwidth=1/0,this.selectedResolution=[1/0,1/0],this.isInvalidMaxHeightSet=!1,this.isPendingSetMaxResolution=!1,this.userMaxHeight=1/0,this.userMaxWidth=1/0,this.setListenerOnShakaReady=!1,this.shakaOnStateChangeHandler=this._shakaOnStateChangeListener.bind(this),this.resetMaxHeightHandler=this._resetToUserMaxHeight.bind(this)}return o(e,[{key:"getMaxBandwidth",value:function(){return this.selectedBandwidth}},{key:"getMaxResolution",value:function(){return this.selectedResolution}},{key:"setMaxBandwidth",value:function(e){this.selectedBandwidth=e,this.player.otvtoolkit().techConfig.configure(a.CONFIG_TYPE_OTV,"abr.restrictions.maxBandwidth",e),this.player.trigger("otvmaxbandwidthchange")}},{key:"setMaxResolution",value:function(e,t){if(this.selectedResolution=[Number(e),Number(t)],!1===this.isInvalidMaxHeightSet){var n={abr:{restrictions:{maxWidth:Number(e),maxHeight:Number(t)}}};this.player.otvtoolkit().techConfig.configure(a.CONFIG_TYPE_OTV,n),this.isPendingSetMaxResolution=!1,this.player.trigger("otvmaxresolutionchange")}else this.isPendingSetMaxResolution=!0}},{key:"_resetToUserMaxHeight",value:function(){var e=this.player.otvtoolkit().getConfiguration().abr.restrictions.maxHeight;if(this._log("_resetToUserMaxHeight(): userMaxHeight:"+this.userMaxHeight+" currentMaxHeight:"+e),!0===this.isInvalidMaxHeightSet)if(this.isInvalidMaxHeightSet=!1,this.isPendingSetMaxResolution&&this.selectedResolution)this.setMaxResolution(this.selectedResolution[0],this.selectedResolution[1]);else if(e!==this.userMaxHeight){var t={abr:{restrictions:{maxWidth:Number(this.userMaxWidth),maxHeight:Number(this.userMaxHeight)}}};this.player.otvtoolkit().techConfig.configure(a.CONFIG_TYPE_OTV,t)}}},{key:"_shakaOnStateChangeListener",value:function(e){if("load"===e.state&&!1===this.isInvalidMaxHeightSet){this.userMaxWidth=this.player.otvtoolkit().getConfiguration().abr.restrictions.maxWidth,this.userMaxHeight=this.player.otvtoolkit().getConfiguration().abr.restrictions.maxHeight;var t={abr:{restrictions:{maxWidth:Number(this.userMaxWidth),maxHeight:Number(1)}}};this.player.otvtoolkit().techConfig.configure(a.CONFIG_TYPE_OTV,t),this.player.off("playing",this.resetMaxHeightHandler),this.player.one("playing",this.resetMaxHeightHandler),this.isInvalidMaxHeightSet=!0,this.isPendingSetMaxResolution=!1,this.player.tech_.shaka_.removeEventListener("onstatechange",this.shakaOnStateChangeHandler)}}},{key:"setShakaPlayToStartAtLowestBitrate",value:function(){this.player.tech_&&this.player.tech_.shaka_&&(this.player.tech_.shaka_.addEventListener("onstatechange",this.shakaOnStateChangeHandler),this.setListenerOnShakaReady=!0)}},{key:"resetShakaPlayToStartAtLowestBitrate",value:function(){this.player.tech_&&this.player.tech_.shaka_&&this.player.tech_.shaka_.removeEventListener("onstatechange",this.shakaOnStateChangeHandler),this.setListenerOnShakaReady=!1}},{key:"ready",value:function(){this.setListenerOnShakaReady&&this.setShakaPlayToStartAtLowestBitrate()}},{key:"dispose",value:function(){}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,r){return new Promise(function(i){var o=[{initDataTypes:I}];o[0][t]=n,void 0!==navigator.requestMediaKeySystemAccess?navigator.requestMediaKeySystemAccess(e,o).then(function(){r&&r(),i(!0)}).catch(function(){i(!1)}):i(!1)})}function a(e,t,n,r){var i=e.find(function(e){return e.name===t&&e.contentType===n});if(i)i.securityLevel=Math.max(i.securityLevel,r);else{var o={name:t,contentType:n,securityLevel:r};e.push(o)}}function s(e){return e.reduce(function(e,t){return e.concat(t)},[])}function u(e,t){return new Promise(function(n){var r=e+"Capabilities",i=[],s=[],u=!0,c=!1,l=void 0;try{for(var d,f=j[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=p(d.value,2),g=h[0],y=h[1],v=[{contentType:t,robustness:g}],m=a.bind(null,s,k,t,y),b=o(k,r,v,m);i.push(b)}}catch(e){c=!0,l=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw l}}Promise.all(i).then(function(){n(s)})})}function c(e,t){return new Promise(function(n){var r=e+"Capabilities",i=[],s=[],u=[{contentType:t}],c=!0,l=!1,d=void 0;try{for(var f,h=D[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var g=p(f.value,2),y=g[0],v=g[1],m=A+y,b=a.bind(null,s,A,t,v),_=o(m,r,u,b);i.push(_)}}catch(e){l=!0,d=e}finally{try{!c&&h.return&&h.return()}finally{if(l)throw d}}Promise.all(i).then(function(){n(s)})})}function l(){return new Promise(function(e){var t=[];y.default.isSafari()&&t.push({name:x,contentType:"",securityLevel:w}),e(t)})}function d(e,t){return new Promise(function(n){var r=e+"Capabilities",i=[{contentType:t}],s=[],u=a.bind(null,s,C,t,E);o(C,r,i,u).then(function(){n(s)})})}function f(){}Object.defineProperty(t,"__esModule",{value:!0}),t.DrmSecurityLevel=t.OTVDRMSL_HW_DECODE=t.OTVDRMSL_HW_CRYPT=t.OTVDRMSL_SW=t.OTVDRMSL_UNKNOWN=void 0;var h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=n(42),y=r(g),v=n(150),m=r(v),b=n(401),_=r(b),w=t.OTVDRMSL_UNKNOWN=0,T=t.OTVDRMSL_SW=1,S=t.OTVDRMSL_HW_CRYPT=2,E=t.OTVDRMSL_HW_DECODE=3,k="com.widevine.alpha",A="com.microsoft.playready",x="com.apple.fps.1_0",C="com.tvkey.drm",O='video/mp4;codecs="avc1.640015"',P='video/mp4;codecs="avc1.640015"',M='video/mp4;codecs="avc1.640028"',I=["keyids","cenc"],j=new Map([["SW_SECURE_CRYPTO",T],["HW_SECURE_CRYPTO",S],["HW_SECURE_DECODE",E]]),D=new Map([["",T],[".hardware",E]]);t.DrmSecurityLevel=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;i(this,e),this.videojsPlayer=t,this.log=r,this.widevinePromise=u("video",P),this.playreadyPromise=c("video",O),this.fairplayPromise=l(),this.tvkeyPromise=d("video",M),this.promises=[this.widevinePromise,this.playreadyPromise,this.fairplayPromise,this.tvkeyPromise],this.getDrmInfo().then(function(e){if(n.log(JSON.stringify(e)),n.getPreferredDrm())n.log("Preferred DRM set to customer choice: "+n.getPreferredDrm());else if(y.default.isSmartTV())n.setPreferredDrm(k),n.log("For smartTV preferred DRM set to "+k);else if(0===e.length)n.setPreferredDrm(k),n.log("DRM security unknown, setting preferred to: "+k);else{var t=e.reduce(function(e,t){return Math.max(e,t.securityLevel)},0),r=e.filter(function(e){return e.securityLevel===t}),i=r.find(function(e){return e.name===x})||r.find(function(e){return e.name===k})||r[0];n.setPreferredDrm(i.name),n.log("Preferred DRM set to most secure: "+i.name)}})}return h(e,[{key:"getDrmInfo",value:function(e,t,n){var r=this;return e===k?t&&n?u(t,n):this.widevinePromise:e===A?t&&n?c(t,n):this.playreadyPromise:e===x?this.fairplayPromise:e===C?t&&n?d(t,n):this.tvkeyPromise:e?Promise.resolve([]):new Promise(function(e){Promise.all(r.promises).then(function(t){return e(s(t))})})}},{key:"setPreferredDrm",value:function(e){m.default.setPreference(e)}},{key:"getPreferredDrm",value:function(){return m.default.getPreference()}},{key:"dispose",value:function(){this.videojsPlayer=null,this.log=null}},{key:"getCurrentSelectedDrm",value:function(){if(y.default.isSafari())return x;var e=void 0;return this.videojsPlayer.tech_&&this.videojsPlayer.tech_.shaka_&&(e=this.videojsPlayer.tech_.shaka_.keySystem()),e||this.getPreferredDrm()}},{key:"activateTVKey",value:function(e){var t=this;this.getDrmInfo(C).then(function(n){if(0===n.length)t.log.warn("The device can not support tvkey in HBBTV.");else try{new _.default(e,t.log).processActivation()}catch(e){t.log.error("Got exception: "+e.message)}})}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.operatorUUID=t.tvkeyOperatorUUID,this.serverURL=t.licenceServer+"/"+t.tenantId+"/tkap/v1/tvkey/activateDevice",this.log=n,this.oipfDrmAgent=this._createOipfDrmAgent()}return i(e,[{key:"_createOipfDrmAgent",value:function(){try{return window.oipfObjectFactory.createDrmAgentObject()}catch(e){return this.log.error("oipfDrmAgent object could not be created. error message: "+e.message),null}}},{key:"processActivation",value:function(){var e=this;this.checkActivationStatus().then(function(t){t?e.log("tvkey has been activated on this device."):(e.log("Start to activate tvkey on this device."),e.activateDevice().then(function(t){t?e.log("Activate tvkey successfully."):e.log.error("Activate tvkey failed.")}))}).catch(function(){e.log.error("check device activation failure.")})}},{key:"checkActivationStatus",value:function(){var e=this,t={type:"RequestLicenseStatus",OperatorUUID:this.operatorUUID};if(null===this.oipfDrmAgent)throw new Error("The OIPF Drm Agent is invalid.");return this._sendTvkeyMsg(t,"ProvideLicenseStatus").then(function(t){return new Promise(function(n,r){try{var i=JSON.parse(t);n(new Date(i.LicenseStatuses.ActivationRenewalDate).getTime()-6e4<Date.now()?!1:!0)}catch(t){r(t),e.log.error("Got error: "+t.message)}})}).catch(function(t){return e.log.error("get activation status failure: "+t),Promise.resolve(!1)})}},{key:"activateDevice",value:function(){var e=this;if(null===this.oipfDrmAgent)throw new Error("The OIPF Drm Agent is invalid.");return this._getActivationResquest().then(function(t){return e._postActivationPayload(t)}).then(function(t){return e._provideActivationResponse(t)}).catch(function(t){return e.log.error("Activation failure: "+t),Promise.resolve(!1)})}},{key:"_getActivationResquest",value:function(){var e={type:"RequestActivationRequestMessage",OperatorUUID:this.operatorUUID};return this._sendTvkeyMsg(e,"ProvideActivationRequestMessage").then(function(e){var t=JSON.parse(e);return Promise.resolve(JSON.stringify(t.Message))})}},{key:"_provideActivationResponse",value:function(e){var t=JSON.parse(e),n={type:"ProvideActivationResponseMessage",OperatorUUID:this.operatorUUID,Message:t.ActivationResponseMessage};return this._sendTvkeyMsg(n,"ActivationResponseParseResult").then(function(){return Promise.resolve(!0)})}},{key:"_sendTvkeyMsg",value:function(e,t){var n,r=this;return new Promise(function(i,o){function a(e){for(var t=e.toString(),n="",r=0;r<t.length&&"00"!==t.substr(r,u);r+=u)n+=String.fromCharCode(parseInt(t.substr(r,u),s));return n}var s=16,u=2;r.oipfDrmAgent.onDRMMessageResult=function(e,s,u){if(e===n)if(0===u)try{var c=a(s),l=JSON.parse(c);if(l.type===t)if(l.Success){var d=JSON.stringify(l.Result);i(d)}else r.log.error("Get error response: "+JSON.stringify(l.Result)),o(JSON.stringify(l.Result));else"ErrorResponse"===l.type&&(r.log.error("Get error response: "+c),o(c))}catch(e){r.log.error("Parse JSon object failed: "+e.message),o(e)}else r.log.error("Get Drm error code: "+u),o("resultCode: "+u)},n=r.oipfDrmAgent.sendDRMMessage("application/vnd.tvkey.cloud-json",function(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(Number(e.charCodeAt(n)).toString(s));return t.join("")}(JSON.stringify(e)),"urn:dvb:casystemid:19300")})}},{key:"_postActivationPayload",value:function(e){var t="",n=new XMLHttpRequest;if(n.open("POST",this.serverURL,!1),n.setRequestHeader("Accept","application/json"),n.send(e),200===n.status){t=n.responseText;return JSON.parse(t).ErrorCode?Promise.reject(t):Promise.resolve(t)}return Promise.reject(t)}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.QuickmarkInterface=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(55),s=(r(a),n(403)),u=r(s),c="invalidconf",l=-1,d=1,f=2,h=7;t.QuickmarkInterface=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.config=n,n.callbacks||(this.config.callbacks={});var r={tlValidation:this._tlValidationCb.bind(this),image:this._imageCb.bind(this),message:this._messageCb.bind(this),error:this._errorCb.bind(this)},o={callback:r};if("undefined"==typeof jswbwVersion||void 0===jswbwVersion.version)throw this._changeState(c),this._errorCb(l,"Quickmark module not loaded"),new Error("Quickmark module not loaded");if(this.cssClassName="dynamic-size",!n.player)throw this._changeState(c),this._errorCb(h,"no player provided"),new Error("QuickmarkInterface configuration is invalid, no player provided");if(this.player=n.player,!n.tlValidation&&!n.secret)throw this._changeState(c),this._errorCb(h,"Need a secret or a tlValidation"),new Error("QuickmarkInterface configuration is invalid.  Need a secret or a tlValidation");if(o.url=this._getUrl(n.url,n.service,n.tenant),o.token=n.token,o.apikey=n.apikey,o.url&&!n.token)throw this._changeState(c),this._errorCb(d,"Missing token"),new Error("QuickmarkInterface configuration is invalid.  Need token for pull mode");if(n.token&&!o.url){this._changeState(c);var a=n.service?"Missing tenant":"Missing service URL";throw this._errorCb(f,a),new Error("QuickmarkInterface configuration is invalid.  Need URL (or service and tenant) for pull mode")}this.waitingForPlaying=!1,this.player.on(this.player,"loadedmetadata",this._onPlay.bind(this)),this.fullscreenChangeHandler=function(){setTimeout(function(){t.resize()},0)},this.player.on("fullscreenchange",this.fullscreenChangeHandler),this.jswbw=new jswbw2(o),n.toolkit.addEventListener("pipon",function(){t.resize()}),n.toolkit.addEventListener("pipoff",function(){t.resize()}),window.addEventListener("resize",function(){t.resize()})}return o(e,[{key:"_changeState",value:function(e){this.state!==e&&("stopped"===e&&this.jswbw&&this.jswbw.pause(),"started"===e&&this.jswbw&&(this.jswbw.isStarted()?this.jswbw.resume():this.jswbw.start()),this.state=e,this._messageCb("Changing state to "+e))}},{key:"_getUrl",value:function(e,t,n){return e||(t&&n?t+"/"+n+"/qm/v2/surfaces":void 0)}},{key:"_onPlay",value:function(){this._log("QuickmarkInterface::_onPlay() loadedmetadata"),this.waitingForPlaying||(this.player.one("playing",this._onPlaying.bind(this)),this.waitingForPlaying=!0)}},{key:"_onPlaying",value:function(){this._log("QuickmarkInterface::_onPlaying() playing"),this.waitingForPlaying=!1,this.resize();var e=this.player.el_.getElementsByTagName("video")[0];e.removeEventListener("resize",this.resize.bind(this)),e.addEventListener("resize",this.resize.bind(this))}},{key:"_imageCb",value:function(e){this._log("A new marker is ready to display"),this.resize(),this.player.trigger("jswbwUpdate");var t=!0,n=document.getElementsByClassName("vjs-control-bar");n&&0!==n.length||(t=!1,n=document.getElementsByClassName("vjs-shaka"));var r=document.getElementById("ng"),i=document.getElementById("ng-img");r?(r.removeChild(i),r.parentNode.removeChild(r)):r=document.createElement("div"),i=document.createElement("div"),i.id="ng-img",i.style.backgroundImage="url('"+e+"')",i.style.width="100%",i.style.height="100%",i.style.backgroundSize="100%",i.style.backgroundRepeat="round",r.id="ng",r.style.pointerEvents="none",r.classList.add("vjs-overlay"),r.classList.add("dynamic-size"),r.classList.add("vjs-overlay-background"),r.appendChild(i);var o=n[0];t||(o=n[0].nextSibling),n[0].parentNode.insertBefore(r,o),this.player.trigger("jswbwStart")}},{key:"_messageCb",value:function(e){this._log("QuickmarkInterface Message received: '"+e+"'"),this.config.callbacks.message&&this.config.callbacks.message(e)}},{key:"_errorCb",value:function(e,t){this._log("QuickmarkInterface Error "+e+" received: '"+t+"'"),this.config.callbacks.error&&this.config.callbacks.error(e,t)}},{key:"_tlValidationCb",value:function(e){if(this.config.tlValidation)return this._log("Calling customer tlvalidation"),this.config.tlValidation(e);if(this.config.secret){var t=this._makeShaObj();t.setHMACKey(this.config.secret,"BYTES"),t.update(e);return t.getHMAC("UINT8ARRAY")}return this._log("QuickmarkInterface tlValidation unable to calculate signature"),new Uint8Array}},{key:"_makeShaObj",value:function(){return new u.default("SHA-1","ARRAYBUFFER")}},{key:"resize",value:function(){var e=this.player.$("video"),t=this.videoDimensions(e),n="\n\t\t.dynamic-size {\n\t\t\theight: "+t.height+";\n\t\t\tleft: "+t.left+";\n\t\t\twidth: "+t.width+";\n\t\t\ttop: "+t.top+";\n\t\t\ttransform: translateY("+t.translateY+");\n\t\t\t}\n\t\t",r=null;document.getElementById(this.cssClassName)?(r=document.getElementById(this.cssClassName),r.innerHTML=n):(r=document.createElement("style"),r.id=this.cssClassName,r.type="text/css",r.innerHTML=n,document.head.appendChild(r)),this.player.isFullscreen_||0===e.offsetHeight||(this.preFullScreenSize=e.offsetHeight)}},{key:"_pixelPerfectRounding",value:function(e,t){var n=Math.ceil(e);return n===t-1&&(n=t),n}},{key:"videoDimensions",value:function(e){var t=0===e.offsetHeight?this.preFullScreenSize:e.offsetHeight,n={width:e.offsetWidth,height:t,ratio:this.player.videoWidth()/this.player.videoHeight(),elementOffsetWidth:e.offsetWidth,elementOffsetHeight:t,elementRatio:e.offsetWidth/t};n.elementRatio>n.ratio?n.width=this._pixelPerfectRounding(n.height*n.ratio,n.width):n.height=this._pixelPerfectRounding(n.width/n.ratio,n.height);var r=Math.ceil((n.elementOffsetWidth-n.width)/2),i=2*Math.round(n.height/2),o=Math.ceil(n.height/2),a=Math.ceil((n.elementOffsetHeight-n.height)/2);return{height:i+"px!important",left:r+"px",width:n.width+"px!important",top:o+a+"px",translateY:"-"+o+"px"}}},{key:"getVersion",value:function(){return jswbwVersion.version}},{key:"update",value:function(e,t){return this._log("QuickmarkInterface::update()"),this.jswbw.update(e,t)}},{key:"setApiKey",value:function(e){this.jswbw&&this.jswbw.cnxHandler&&e&&(this._log("QuickmarkInterface: setting apiKey: "+e),this.config.apiKey=e,this.jswbw.cnxHandler.setApiKey(e))}},{key:"setToken",value:function(e){this.jswbw&&e&&(this._log("QuickmarkInterface: setting token: "+e),this.config.token=e,this.jswbw.setToken(e))}},{key:"setTenant",value:function(e){if(this.jswbw&&this.jswbw.cnxHandler&&e&&this.config.service&&!this.config.url){this._log("QuickmarkInterface: setting tenant: "+e),this.config.tenant=e;var t=this._getUrl(null,this.config.service,this.config.tenant);this.jswbw.cnxHandler.setUrl(t)}}},{key:"setURL",value:function(e){this.jswbw&&this.jswbw.cnxHandler&&e&&(this._log("QuickmarkInterface: setting url:"+e),this.config.url=e,this.jswbw.cnxHandler.setUrl(e))}},{key:"setMessageCallback",value:function(e){e&&(this.config.callbacks.message=e)}},{key:"setErrorCallback",value:function(e){e&&(this.config.callbacks.error=e)}},{key:"setTlValidationCallback",value:function(e){e&&(this.config.callbacks.tlValidation=e)}},{key:"setCallbacks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.setMessageCallback(e),this.setErrorCallback(t),this.setTlValidationCallback(n)}},{key:"start",value:function(){this._log("QuickmarkInterface: starting quickmark"),this._changeState("started")}},{key:"stop",value:function(){this._log("QuickmarkInterface: stopping quickmark"),this._changeState("stopped")}},{key:"_log",value:function(e){}}]),e}()},function(e,t,n){"use strict";var r;!function(i){function o(e,t,n){var r,i,o,a,s,g,y,v,m,b=0,_=[],w=0,T=!1,S=[],E=[],k=!1,A=!1,x=-1;if(n=n||{},r=n.encoding||"UTF8",(m=n.numRounds||1)!==parseInt(m,10)||1>m)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)s=512,g=B,y=V,a=160,v=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(g=function(t,n){return H(t,n,e)},y=function(t,n,r,i){var o,a;if("SHA-224"===e||"SHA-256"===e)o=15+(n+65>>>9<<4),a=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");o=31+(n+129>>>10<<5),a=32}for(;t.length<=o;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=r,t[o]=4294967295&n,t[o-1]=n/4294967296|0,r=t.length,n=0;n<r;n+=a)i=H(t.slice(n,n+a),i,e);if("SHA-224"===e)t=[i[0],i[1],i[2],i[3],i[4],i[5],i[6]];else if("SHA-256"===e)t=i;else if("SHA-384"===e)t=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");t=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b,i[6].a,i[6].b,i[7].a,i[7].b]}return t},v=function(e){return e.slice()},"SHA-224"===e)s=512,a=224;else if("SHA-256"===e)s=512,a=256;else if("SHA-384"===e)s=1024,a=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");s=1024,a=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var C=6;if(g=W,v=function(e){var t,n=[];for(t=0;5>t;t+=1)n[t]=e[t].slice();return n},x=1,"SHA3-224"===e)s=1152,a=224;else if("SHA3-256"===e)s=1088,a=256;else if("SHA3-384"===e)s=832,a=384;else if("SHA3-512"===e)s=576,a=512;else if("SHAKE128"===e)s=1344,a=-1,C=31,A=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");s=1088,a=-1,C=31,A=!0}y=function(e,t,n,r,i){n=s;var o,a=C,u=[],c=n>>>5,l=0,d=t>>>5;for(o=0;o<d&&t>=n;o+=c)r=W(e.slice(o,o+c),r),t-=n;for(e=e.slice(o),t%=n;e.length<c;)e.push(0);for(o=t>>>3,e[o>>2]^=a<<o%4*8,e[c-1]^=2147483648,r=W(e,r);32*u.length<i&&(e=r[l%5][l/5|0],u.push(e.b),!(32*u.length>=i));)u.push(e.a),0==64*(l+=1)%n&&(W(null,r),l=0);return u}}o=p(t,r,x),i=U(e),this.setHMACKey=function(t,n,o){var u;if(!0===T)throw Error("HMAC key already set");if(!0===k)throw Error("Cannot set HMAC key after calling update");if(!0===A)throw Error("SHAKE is not supported for HMAC");for(r=(o||{}).encoding||"UTF8",n=p(n,r,x)(t),t=n.binLen,n=n.value,u=s>>>3,o=u/4-1,u<t/8&&(n=y(n,t,0,U(e),a));n.length<=o;)n.push(0);for(t=0;t<=o;t+=1)S[t]=909522486^n[t],E[t]=1549556828^n[t];i=g(S,i),b=s,T=!0},this.update=function(e){var t,n,r,a=0,u=s>>>5;for(t=o(e,_,w),e=t.binLen,n=t.value,t=e>>>5,r=0;r<t;r+=u)a+s<=e&&(i=g(n.slice(r,r+u),i),a+=s);b+=a,_=n.slice(a>>>5),w=e%s,k=!0},this.getHash=function(t,n){var r,o,s,p;if(!0===T)throw Error("Cannot call getHash after setting HMAC key");if(s=h(n),!0===A){if(-1===s.shakeLen)throw Error("shakeLen must be specified in options");a=s.shakeLen}switch(t){case"HEX":r=function(e){return u(e,a,x,s)};break;case"B64":r=function(e){return c(e,a,x,s)};break;case"BYTES":r=function(e){return l(e,a,x)};break;case"ARRAYBUFFER":try{o=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}r=function(e){return d(e,a,x)};break;case"UINT8ARRAY":try{o=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}r=function(e){return f(e,a,x)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(p=y(_.slice(),w,b,v(i),a),o=1;o<m;o+=1)!0===A&&0!=a%32&&(p[p.length-1]&=16777215>>>24-a%32),p=y(p,a,0,U(e),a);return r(p)},this.getHMAC=function(t,n){var r,o,p,m;if(!1===T)throw Error("Cannot call getHMAC without first setting HMAC key");switch(p=h(n),t){case"HEX":r=function(e){return u(e,a,x,p)};break;case"B64":r=function(e){return c(e,a,x,p)};break;case"BYTES":r=function(e){return l(e,a,x)};break;case"ARRAYBUFFER":try{r=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}r=function(e){return d(e,a,x)};break;case"UINT8ARRAY":try{r=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}r=function(e){return f(e,a,x)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return o=y(_.slice(),w,b,v(i),a),m=g(E,U(e)),m=y(o,a,s,m,a),r(m)}}function a(e,t){this.a=e,this.b=t}function s(e,t,n,r){var i,o,a,s,u;for(t=t||[0],n=n||0,o=n>>>3,u=-1===r?3:0,i=0;i<e.length;i+=1)s=i+o,a=s>>>2,t.length<=a&&t.push(0),t[a]|=e[i]<<8*(u+s%4*r);return{value:t,binLen:8*e.length+n}}function u(e,t,n,r){var i="";t/=8;var o,a,s;for(s=-1===n?3:0,o=0;o<t;o+=1)a=e[o>>>2]>>>8*(s+o%4*n),i+="0123456789abcdef".charAt(a>>>4&15)+"0123456789abcdef".charAt(15&a);return r.outputUpper?i.toUpperCase():i}function c(e,t,n,r){var i,o,a,s,u="",c=t/8;for(s=-1===n?3:0,i=0;i<c;i+=3)for(o=i+1<c?e[i+1>>>2]:0,a=i+2<c?e[i+2>>>2]:0,a=(e[i>>>2]>>>8*(s+i%4*n)&255)<<16|(o>>>8*(s+(i+1)%4*n)&255)<<8|a>>>8*(s+(i+2)%4*n)&255,o=0;4>o;o+=1)u+=8*i+6*o<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6*(3-o)&63):r.b64Pad;return u}function l(e,t,n){var r="";t/=8;var i,o,a;for(a=-1===n?3:0,i=0;i<t;i+=1)o=e[i>>>2]>>>8*(a+i%4*n)&255,r+=String.fromCharCode(o);return r}function d(e,t,n){t/=8;var r,i,o,a=new ArrayBuffer(t);for(o=new Uint8Array(a),i=-1===n?3:0,r=0;r<t;r+=1)o[r]=e[r>>>2]>>>8*(i+r%4*n)&255;return a}function f(e,t,n){t/=8;var r,i,o=new Uint8Array(t);for(i=-1===n?3:0,r=0;r<t;r+=1)o[r]=e[r>>>2]>>>8*(i+r%4*n)&255;return o}function h(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function p(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,t,r){var i,o,a,s,u,c,l=e.length;if(0!=l%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],r=r||0,u=r>>>3,c=-1===n?3:0,i=0;i<l;i+=2){if(o=parseInt(e.substr(i,2),16),isNaN(o))throw Error("String of HEX type contains invalid characters");for(s=(i>>>1)+u,a=s>>>2;t.length<=a;)t.push(0);t[a]|=o<<8*(c+s%4*n)}return{value:t,binLen:4*l+r}};break;case"TEXT":e=function(e,r,i){var o,a,s,u,c,l,d,f,h=0;if(r=r||[0],i=i||0,c=i>>>3,"UTF8"===t)for(f=-1===n?3:0,s=0;s<e.length;s+=1)for(o=e.charCodeAt(s),a=[],128>o?a.push(o):2048>o?(a.push(192|o>>>6),a.push(128|63&o)):55296>o||57344<=o?a.push(224|o>>>12,128|o>>>6&63,128|63&o):(s+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(s)),a.push(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)),u=0;u<a.length;u+=1){for(d=h+c,l=d>>>2;r.length<=l;)r.push(0);r[l]|=a[u]<<8*(f+d%4*n),h+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(f=-1===n?2:0,a="UTF16LE"===t&&1!==n||"UTF16LE"!==t&&1===n,s=0;s<e.length;s+=1){for(o=e.charCodeAt(s),!0===a&&(u=255&o,o=u<<8|o>>>8),d=h+c,l=d>>>2;r.length<=l;)r.push(0);r[l]|=o<<8*(f+d%4*n),h+=2}return{value:r,binLen:8*h+i}};break;case"B64":e=function(e,t,r){var i,o,a,s,u,c,l,d,f=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(o=e.indexOf("="),e=e.replace(/\=/g,""),-1!==o&&o<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],r=r||0,c=r>>>3,d=-1===n?3:0,o=0;o<e.length;o+=4){for(u=e.substr(o,4),a=s=0;a<u.length;a+=1)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(u.charAt(a)),s|=i<<18-6*a;for(a=0;a<u.length-1;a+=1){for(l=f+c,i=l>>>2;t.length<=i;)t.push(0);t[i]|=(s>>>16-8*a&255)<<8*(d+l%4*n),f+=1}}return{value:t,binLen:8*f+r}};break;case"BYTES":e=function(e,t,r){var i,o,a,s,u,c;for(t=t||[0],r=r||0,a=r>>>3,c=-1===n?3:0,o=0;o<e.length;o+=1)i=e.charCodeAt(o),u=o+a,s=u>>>2,t.length<=s&&t.push(0),t[s]|=i<<8*(c+u%4*n);return{value:t,binLen:8*e.length+r}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,t,r){return s(new Uint8Array(e),t,r,n)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}e=function(e,t,r){return s(e,t,r,n)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function g(e,t){return e<<t|e>>>32-t}function y(e,t){return 32<t?(t-=32,new a(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0!==t?new a(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function v(e,t){return e>>>t|e<<32-t}function m(e,t){var n=null,n=new a(e.a,e.b);return n=32>=t?new a(n.a>>>t|n.b<<32-t&4294967295,n.b>>>t|n.a<<32-t&4294967295):new a(n.b>>>t-32|n.a<<64-t&4294967295,n.a>>>t-32|n.b<<64-t&4294967295)}function b(e,t){return 32>=t?new a(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new a(0,e.a>>>t-32)}function _(e,t,n){return e&t^~e&n}function w(e,t,n){return new a(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function T(e,t,n){return e&t^e&n^t&n}function S(e,t,n){return new a(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function E(e){return v(e,2)^v(e,13)^v(e,22)}function k(e){var t=m(e,28),n=m(e,34);return e=m(e,39),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function A(e){return v(e,6)^v(e,11)^v(e,25)}function x(e){var t=m(e,14),n=m(e,18);return e=m(e,41),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function C(e){return v(e,7)^v(e,18)^e>>>3}function O(e){var t=m(e,1),n=m(e,8);return e=b(e,7),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function P(e){return v(e,17)^v(e,19)^e>>>10}function M(e){var t=m(e,19),n=m(e,61);return e=b(e,6),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function I(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function j(e,t,n,r){var i=(65535&e)+(65535&t)+(65535&n)+(65535&r);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)&65535)<<16|65535&i}function D(e,t,n,r,i){var o=(65535&e)+(65535&t)+(65535&n)+(65535&r)+(65535&i);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)+(o>>>16)&65535)<<16|65535&o}function R(e,t){var n,r,i;return n=(65535&e.b)+(65535&t.b),r=(e.b>>>16)+(t.b>>>16)+(n>>>16),i=(65535&r)<<16|65535&n,n=(65535&e.a)+(65535&t.a)+(r>>>16),r=(e.a>>>16)+(t.a>>>16)+(n>>>16),new a((65535&r)<<16|65535&n,i)}function L(e,t,n,r){var i,o,s;return i=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&r.b),o=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(r.b>>>16)+(i>>>16),s=(65535&o)<<16|65535&i,i=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&r.a)+(o>>>16),o=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(r.a>>>16)+(i>>>16),new a((65535&o)<<16|65535&i,s)}function N(e,t,n,r,i){var o,s,u;return o=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&r.b)+(65535&i.b),s=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(r.b>>>16)+(i.b>>>16)+(o>>>16),u=(65535&s)<<16|65535&o,o=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&r.a)+(65535&i.a)+(s>>>16),s=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(r.a>>>16)+(i.a>>>16)+(o>>>16),new a((65535&s)<<16|65535&o,u)}function F(e,t){return new a(e.a^t.a,e.b^t.b)}function U(e){var t,n=[];if("SHA-1"===e)n=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":n=t;break;case"SHA-384":n=[new a(3418070365,n[0]),new a(1654270250,n[1]),new a(2438529370,n[2]),new a(355462360,n[3]),new a(1731405415,n[4]),new a(41048885895,n[5]),new a(3675008525,n[6]),new a(1203062813,n[7])];break;case"SHA-512":n=[new a(t[0],4089235720),new a(t[1],2227873595),new a(t[2],4271175723),new a(t[3],1595750129),new a(t[4],2917565137),new a(t[5],725511199),new a(t[6],4215389547),new a(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)n[e]=[new a(0,0),new a(0,0),new a(0,0),new a(0,0),new a(0,0)]}return n}function B(e,t){var n,r,i,o,a,s,u,c=[];for(n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=0;80>u;u+=1)c[u]=16>u?e[u]:g(c[u-3]^c[u-8]^c[u-14]^c[u-16],1),s=20>u?D(g(n,5),r&i^~r&o,a,1518500249,c[u]):40>u?D(g(n,5),r^i^o,a,1859775393,c[u]):60>u?D(g(n,5),T(r,i,o),a,2400959708,c[u]):D(g(n,5),r^i^o,a,3395469782,c[u]),a=o,o=i,i=g(r,30),r=n,n=s;return t[0]=I(n,t[0]),t[1]=I(r,t[1]),t[2]=I(i,t[2]),t[3]=I(o,t[3]),t[4]=I(a,t[4]),t}function V(e,t,n,r){var i;for(i=15+(t+65>>>9<<4);e.length<=i;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=n,e[i]=4294967295&t,e[i-1]=t/4294967296|0,t=e.length,i=0;i<t;i+=16)r=B(e.slice(i,i+16),r);return r}function H(e,t,n){var r,i,o,s,u,c,l,d,f,h,p,g,y,v,m,b,F,U,B,V,H,W,G,z=[];if("SHA-224"===n||"SHA-256"===n)h=64,g=1,W=Number,y=I,v=j,m=D,b=C,F=P,U=E,B=A,H=T,V=_,G=K;else{if("SHA-384"!==n&&"SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");h=80,g=2,W=a,y=R,v=L,m=N,b=O,F=M,U=k,B=x,H=S,V=w,G=q}for(n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],p=0;p<h;p+=1)16>p?(f=p*g,d=e.length<=f?0:e[f],f=e.length<=f+1?0:e[f+1],z[p]=new W(d,f)):z[p]=v(F(z[p-2]),z[p-7],b(z[p-15]),z[p-16]),d=m(l,B(s),V(s,u,c),G[p],z[p]),f=y(U(n),H(n,r,i)),l=c,c=u,u=s,s=y(o,d),o=i,i=r,r=n,n=y(d,f);return t[0]=y(n,t[0]),t[1]=y(r,t[1]),t[2]=y(i,t[2]),t[3]=y(o,t[3]),t[4]=y(s,t[4]),t[5]=y(u,t[5]),t[6]=y(c,t[6]),t[7]=y(l,t[7]),t}function W(e,t){var n,r,i,o,s=[],u=[];if(null!==e)for(r=0;r<e.length;r+=2)t[(r>>>1)%5][(r>>>1)/5|0]=F(t[(r>>>1)%5][(r>>>1)/5|0],new a(e[r+1],e[r]));for(n=0;24>n;n+=1){for(o=U("SHA3-"),r=0;5>r;r+=1){i=t[r][0];var c=t[r][1],l=t[r][2],d=t[r][3],f=t[r][4];s[r]=new a(i.a^c.a^l.a^d.a^f.a,i.b^c.b^l.b^d.b^f.b)}for(r=0;5>r;r+=1)u[r]=F(s[(r+4)%5],y(s[(r+1)%5],1));for(r=0;5>r;r+=1)for(i=0;5>i;i+=1)t[r][i]=F(t[r][i],u[r]);for(r=0;5>r;r+=1)for(i=0;5>i;i+=1)o[i][(2*r+3*i)%5]=y(t[r][i],G[r][i]);for(r=0;5>r;r+=1)for(i=0;5>i;i+=1)t[r][i]=F(o[r][i],new a(~o[(r+1)%5][i].a&o[(r+2)%5][i].a,~o[(r+1)%5][i].b&o[(r+2)%5][i].b));t[0][0]=F(t[0][0],z[n])}return t}var K,q,G,z;K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],q=[new a(K[0],3609767458),new a(K[1],602891725),new a(K[2],3964484399),new a(K[3],2173295548),new a(K[4],4081628472),new a(K[5],3053834265),new a(K[6],2937671579),new a(K[7],3664609560),new a(K[8],2734883394),new a(K[9],1164996542),new a(K[10],1323610764),new a(K[11],3590304994),new a(K[12],4068182383),new a(K[13],991336113),new a(K[14],633803317),new a(K[15],3479774868),new a(K[16],2666613458),new a(K[17],944711139),new a(K[18],2341262773),new a(K[19],2007800933),new a(K[20],1495990901),new a(K[21],1856431235),new a(K[22],3175218132),new a(K[23],2198950837),new a(K[24],3999719339),new a(K[25],766784016),new a(K[26],2566594879),new a(K[27],3203337956),new a(K[28],1034457026),new a(K[29],2466948901),new a(K[30],3758326383),new a(K[31],168717936),new a(K[32],1188179964),new a(K[33],1546045734),new a(K[34],1522805485),new a(K[35],2643833823),new a(K[36],2343527390),new a(K[37],1014477480),new a(K[38],1206759142),new a(K[39],344077627),new a(K[40],1290863460),new a(K[41],3158454273),new a(K[42],3505952657),new a(K[43],106217008),new a(K[44],3606008344),new a(K[45],1432725776),new a(K[46],1467031594),new a(K[47],851169720),new a(K[48],3100823752),new a(K[49],1363258195),new a(K[50],3750685593),new a(K[51],3785050280),new a(K[52],3318307427),new a(K[53],3812723403),new a(K[54],2003034995),new a(K[55],3602036899),new a(K[56],1575990012),new a(K[57],1125592928),new a(K[58],2716904306),new a(K[59],442776044),new a(K[60],593698344),new a(K[61],3733110249),new a(K[62],2999351573),new a(K[63],3815920427),new a(3391569614,3928383900),new a(3515267271,566280711),new a(3940187606,3454069534),new a(4118630271,4000239992),new a(116418474,1914138554),new a(174292421,2731055270),new a(289380356,3203993006),new a(460393269,320620315),new a(685471733,587496836),new a(852142971,1086792851),new a(1017036298,365543100),new a(1126000580,2618297676),new a(1288033470,3409855158),new a(1501505948,4234509866),new a(1607167915,987167468),new a(1816402316,1246189591)],z=[new a(0,1),new a(0,32898),new a(2147483648,32906),new a(2147483648,2147516416),new a(0,32907),new a(0,2147483649),new a(2147483648,2147516545),new a(2147483648,32777),new a(0,138),new a(0,136),new a(0,2147516425),new a(0,2147483658),new a(0,2147516555),new a(2147483648,139),new a(2147483648,32905),new a(2147483648,32771),new a(2147483648,32770),new a(2147483648,128),new a(0,32778),new a(2147483648,2147483658),new a(2147483648,2147516545),new a(2147483648,32896),new a(0,2147483649),new a(2147483648,2147516424)],G=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0!==(r=function(){return o}.call(t,n,t,e))&&(e.exports=r)}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.player=t,this._initReadyEvent()}return i(e,[{key:"_onStreamingEvent",value:function(){var e=this.player.tech_.shaka_.getStats(),t=e.maxSegmentDuration,n=-1===this.vodTimeoutMultiplier&&-1===this.liveTimeoutMultiplier,r=0;r=this.player.tech_.shaka_.isLive()?-1===this.liveTimeoutMultiplier?1.5:this.liveTimeoutMultiplier:-1===this.vodTimeoutMultiplier?5:this.vodTimeoutMultiplier;var i=t*r*1e3;n&&(i=Math.max(6e3,Math.min(15e3,i))),this.player.tech_.shaka_.configure("streaming.retryParameters.timeout",i)}},{key:"_initReadyEvent",value:function(){var e=this;this.player.on("ready",function(){e.player.tech_.shaka_&&e.player.tech_.shaka_.addEventListener("streaming",function(){return e._onStreamingEvent()})})}},{key:"setVodTimeoutMultiplier",value:function(e){this.vodTimeoutMultiplier=e}},{key:"setLiveTimeoutMultiplier",value:function(e){this.liveTimeoutMultiplier=e}}]),e}();t.default={SegmentTimeoutController:o,USE_DEFAULT:-1}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=[{width:350,name:"opy-tiny"},{width:550,name:"opy-xsmall"},{width:800,name:"opy-small"}],a=function(){function e(t,n){var i=this;r(this,e),this.player_=t,this.toolkit_=n,this.currentBreakpoint_=void 0,this.setBreakpoint_(),this.screenConfigChangeHandler=function(){setTimeout(function(){i.setBreakpoint_()},0)},this.toolkit_.addEventListener("pipon",this.screenConfigChangeHandler),this.toolkit_.addEventListener("pipoff",this.screenConfigChangeHandler),this.player_.on("fullscreenchange",this.screenConfigChangeHandler),this.player_.on("loadstart",function(){i.setBreakpoint_()}),window.addEventListener("resize",function(){i.setBreakpoint_()})}return i(e,[{key:"assignBreakpoint_",value:function(e){this.currentBreakpoint_=e,this.currentBreakpoint_&&this.addBp_(this.currentBreakpoint_)}},{key:"setBreakpoint_",value:function(){if(this.player_.el()){var e=this.player_.el().getElementsByTagName("video")[0];if(e&&e.parentElement){var t=e.parentElement.clientWidth,n=o.find(function(e){return t<e.width}),r=n?n.name:void 0;this.currentBreakpoint_?this.currentBreakpoint_!==r&&(this.removeBp_(this.currentBreakpoint_),this.assignBreakpoint_(r)):this.assignBreakpoint_(r)}}}},{key:"addBp_",value:function(e){this.player_.el().classList.add(e)}},{key:"removeBp_",value:function(e){this.player_.el().classList.remove(e)}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),s=function(){function e(t){i(this,e),this.extra="",this.player=t,this.onCanPlayHandle=this._onCanPlay.bind(this),this.onPlayHandle=this._onPlay.bind(this),this.onTimeUpdateHandle=this._onTimeUpdate.bind(this),this.onSeekingHandle=this._onSeeking.bind(this),this.onSeekedHandle=this._onSeeked.bind(this)}return o(e,[{key:"dispose",value:function(){this._removeListeners(),this.player=void 0}},{key:"onSetUrl",value:function(e){var t=e.src||e;this.extra=JSON.stringify(r({},a.OtvEventExtraKey.url,t)),OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.setURL,this.extra),this._removeListeners(),this.player.one("canplay",this.onCanPlayHandle),this.player.one("play",this.onPlayHandle),this.player.on("seeking",this.onSeekingHandle),this.player.on("seeked",this.onSeekedHandle)}},{key:"onStop",value:function(){this.extra&&(OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.stop,this.extra),this.extra="",this._removeListeners())}},{key:"_removeListeners",value:function(){this.player&&(this.player.off("canplay",this.onCanPlayHandle),this.player.off("play",this.onPlayHandle),this.player.off("timeupdate",this.onTimeUpdateHandle),this.player.off("seeking",this.onSeekingHandle),this.player.off("seeked",this.onSeekedHandle))}},{key:"_onSeeking",value:function(){OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.seeking,this.extra)}},{key:"_onSeeked",value:function(){OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.seeked,this.extra)}},{key:"_onCanPlay",value:function(){OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.prepared,this.extra),this.player.one("timeupdate",this.onTimeUpdateHandle)}},{key:"_onPlay",value:function(){OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.start,this.extra)}},{key:"_onTimeUpdate",value:function(){OTV.eventTimeline.addToTimeline(a.OtvEventType.playback,a.OtvEventCommandPlayback.firstFrame,this.extra)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(151),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},l=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"_getPlayerInstance",value:function(){var e=void 0;if(this.videojs&&this.videojs.el_){e=this.videojs.el_.getElementsByClassName("vjs-tech")[0]}return e}},{key:"_onErrorEvent",value:function(e){var t=shaka.util.Error.Category.PLAYER,n=shaka.util.Error.Code.BAD_HTTP_STATUS;switch(console.log(""+JSON.stringify(e.target.error)),e.target.error.code){case c.MEDIA_ERR_ABORTED:t=shaka.util.Error.Category.STREAMING,n=shaka.util.Error.Code.BAD_HTTP_STATUS;break;case c.MEDIA_ERR_NETWORK:t=shaka.util.Error.Category.NETWORK,n=shaka.util.Error.Code.BAD_HTTP_STATUS;break;case c.MEDIA_ERR_DECODE:t=shaka.util.Error.Category.MEDIA,n=shaka.util.Error.Code.BAD_ENCODING;break;case c.MEDIA_ERR_SRC_NOT_SUPPORTED:t=shaka.util.Error.Category.MEDIA,n=shaka.util.Error.Code.DASH_UNSUPPORTED_CONTAINER}this.listener&&this.listener.errorChanged&&this.listener.errorChanged(shaka.util.Error.Severity.CRITICAL,t,n,e.target.error.message)}}]),t}(u.default.ErrorReporting);t.default={NativePlayerErrorReporting:l}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(151),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"_getPlayerInstance",value:function(){var e=void 0;return this.videojs&&this.videojs.tech_&&(e=this.videojs.tech_.shaka_),e}}]),t}(u.default.ErrorReporting);t.default={ShakaPlayerErrorReporting:c}},function(e,t,n){"use strict";function r(e){var t=function(t){e&&o.default.log(t)};return t.error=function(e){return o.default.log.error(e)},t.warn=function(e){return o.default.log.warn(e)},t.debug=function(t){e&&"function"==typeof o.default.debug&&o.default.debug(t)},t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(55),o=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.videojs=t}return i(e,[{key:"setDebugLevel",value:function(e){shaka.log.setLevel(e)}},{key:"setLogProvider",value:function(e){this.listener=e,e&&this._captureConsoleLogs()}},{key:"reset",value:function(){this.listener=void 0}},{key:"_captureConsoleLogs",value:function(){var e=this;void 0===console.everything&&(console.everything="",console.visible="",console.defaultInfo=console.info.bind(console),console.info=function(){var t="Info: "+Array.from(arguments)+"\n";console.defaultInfo.apply(console,arguments),e._onLogEvent(t)},console.defaultLog=console.log.bind(console),console.log=function(){var t="Log: "+Array.from(arguments)+"\n";console.defaultLog.apply(console,arguments),e._onLogEvent(t)},console.defaultError=console.error.bind(console),console.error=function(){var t="Error: "+Array.from(arguments)+"\n";console.defaultError.apply(console,arguments),e._onLogEvent(t)},console.defaultWarn=console.warn.bind(console),console.warn=function(){var t="Warning: "+Array.from(arguments)+"\n";console.defaultWarn.apply(console,arguments),e._onLogEvent(t)},console.defaultDebug=console.debug.bind(console),console.debug=function(){var t="Debug: "+Array.from(arguments)+"\n";console.defaultDebug.apply(console,arguments),e._onLogEvent(t)})}},{key:"_onLogEvent",value:function(e){if(this.listener&&this.listener.logProvider){var t=new Date;this.listener.logProvider(t+": "+e)}}}]),e}();t.default={LogProvider:o}},function(e,t,n){"use strict";function r(e){var t=e;if(t&&t.config&&t.config.ssmServer){var n=t.config.ssmServer.match(/^(http(s)?):(\/\/.*?)(\/v1)?(\/)?$/);n&&(t.config.ssmServer=n[1]+":"+n[3]+"/v1")}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default={homogeniseSsmUri:r}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i,o){r(this,e),this._drmSecurityLevel=n,this._pluginDrmConfig=t,this._configUtil=i,this._configType=o}return i(e,[{key:"setHwDecryption",value:function(){var e=this;this._pluginDrmConfig&&this._pluginDrmConfig.config.useHW&&this._drmSecurityLevel.getDrmInfo("com.widevine.alpha").then(function(t){if(t.find(function(e){return 3===e.securityLevel})){var n={drm:{advanced:{"com.widevine.alpha":{videoRobustness:"HW_SECURE_DECODE",audioRobustness:"HW_SECURE_CRYPTO"}}}};e._configUtil.configure(e._configType,n)}else{var r={drm:{advanced:{"com.widevine.alpha":{videoRobustness:"HW_SECURE_CRYPTO",audioRobustness:"HW_SECURE_CRYPTO"}}}};e._configUtil.configure(e._configType,r)}})}}]),e}();t.default=o},function(e,t,n){"use strict";function r(){var e=videojs.getComponent("MenuItem");return Boolean(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var r=n(415),i=r,o=Function("return this")();i.exportSymbol("proto.WidevinePsshData",null,o),i.exportSymbol("proto.WidevinePsshData.Algorithm",null,o),i.exportSymbol("proto.WidevinePsshData.EntitledKey",null,o),i.exportSymbol("proto.WidevinePsshData.Type",null,o),proto.WidevinePsshData=function(e){r.Message.initialize(this,e,0,-1,proto.WidevinePsshData.repeatedFields_,null)},i.inherits(proto.WidevinePsshData,r.Message),i.DEBUG&&!COMPILED&&(proto.WidevinePsshData.displayName="proto.WidevinePsshData"),proto.WidevinePsshData.EntitledKey=function(e){r.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.WidevinePsshData.EntitledKey,r.Message),i.DEBUG&&!COMPILED&&(proto.WidevinePsshData.EntitledKey.displayName="proto.WidevinePsshData.EntitledKey"),proto.WidevinePsshData.repeatedFields_=[2,13,14],r.Message.GENERATE_TO_OBJECT&&(proto.WidevinePsshData.prototype.toObject=function(e){return proto.WidevinePsshData.toObject(e,this)},proto.WidevinePsshData.toObject=function(e,t){var n,i={keyIdsList:t.getKeyIdsList_asB64(),contentId:t.getContentId_asB64(),cryptoPeriodIndex:null==(n=r.Message.getField(t,7))?void 0:n,protectionScheme:null==(n=r.Message.getField(t,9))?void 0:n,cryptoPeriodSeconds:null==(n=r.Message.getField(t,10))?void 0:n,type:r.Message.getFieldWithDefault(t,11,0),keySequence:null==(n=r.Message.getField(t,12))?void 0:n,groupIdsList:t.getGroupIdsList_asB64(),entitledKeysList:r.Message.toObjectList(t.getEntitledKeysList(),proto.WidevinePsshData.EntitledKey.toObject,e),algorithm:null==(n=r.Message.getField(t,1))?void 0:n,provider:null==(n=r.Message.getField(t,3))?void 0:n,trackType:null==(n=r.Message.getField(t,5))?void 0:n,policy:null==(n=r.Message.getField(t,6))?void 0:n,groupedLicense:t.getGroupedLicense_asB64()};return e&&(i.$jspbMessageInstance=t),i}),proto.WidevinePsshData.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.WidevinePsshData;return proto.WidevinePsshData.deserializeBinaryFromReader(n,t)},proto.WidevinePsshData.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var n=t.readBytes();e.addKeyIds(n);break;case 4:var n=t.readBytes();e.setContentId(n);break;case 7:var n=t.readUint32();e.setCryptoPeriodIndex(n);break;case 9:var n=t.readUint32();e.setProtectionScheme(n);break;case 10:var n=t.readUint32();e.setCryptoPeriodSeconds(n);break;case 11:var n=t.readEnum();e.setType(n);break;case 12:var n=t.readUint32();e.setKeySequence(n);break;case 13:var n=t.readBytes();e.addGroupIds(n);break;case 14:var n=new proto.WidevinePsshData.EntitledKey;t.readMessage(n,proto.WidevinePsshData.EntitledKey.deserializeBinaryFromReader),e.addEntitledKeys(n);break;case 1:var n=t.readEnum();e.setAlgorithm(n);break;case 3:var n=t.readString();e.setProvider(n);break;case 5:var n=t.readString();e.setTrackType(n);break;case 6:var n=t.readString();e.setPolicy(n);break;case 8:var n=t.readBytes();e.setGroupedLicense(n);break;default:t.skipField()}}return e},proto.WidevinePsshData.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.WidevinePsshData.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.WidevinePsshData.serializeBinaryToWriter=function(e,t){var n=void 0;n=e.getKeyIdsList_asU8(),n.length>0&&t.writeRepeatedBytes(2,n),n=r.Message.getField(e,4),null!=n&&t.writeBytes(4,n),n=r.Message.getField(e,7),null!=n&&t.writeUint32(7,n),n=r.Message.getField(e,9),null!=n&&t.writeUint32(9,n),n=r.Message.getField(e,10),null!=n&&t.writeUint32(10,n),n=r.Message.getField(e,11),null!=n&&t.writeEnum(11,n),n=r.Message.getField(e,12),null!=n&&t.writeUint32(12,n),n=e.getGroupIdsList_asU8(),n.length>0&&t.writeRepeatedBytes(13,n),n=e.getEntitledKeysList(),n.length>0&&t.writeRepeatedMessage(14,n,proto.WidevinePsshData.EntitledKey.serializeBinaryToWriter),n=r.Message.getField(e,1),null!=n&&t.writeEnum(1,n),n=r.Message.getField(e,3),null!=n&&t.writeString(3,n),n=r.Message.getField(e,5),null!=n&&t.writeString(5,n),n=r.Message.getField(e,6),null!=n&&t.writeString(6,n),null!=(n=r.Message.getField(e,8))&&t.writeBytes(8,n)},proto.WidevinePsshData.Type={SINGLE:0,ENTITLEMENT:1,ENTITLED_KEY:2},proto.WidevinePsshData.Algorithm={UNENCRYPTED:0,AESCTR:1},r.Message.GENERATE_TO_OBJECT&&(proto.WidevinePsshData.EntitledKey.prototype.toObject=function(e){return proto.WidevinePsshData.EntitledKey.toObject(e,this)},proto.WidevinePsshData.EntitledKey.toObject=function(e,t){var n={entitlementKeyId:t.getEntitlementKeyId_asB64(),keyId:t.getKeyId_asB64(),key:t.getKey_asB64(),iv:t.getIv_asB64(),entitlementKeySizeBytes:r.Message.getFieldWithDefault(t,5,32)};return e&&(n.$jspbMessageInstance=t),n}),proto.WidevinePsshData.EntitledKey.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.WidevinePsshData.EntitledKey;return proto.WidevinePsshData.EntitledKey.deserializeBinaryFromReader(n,t)},proto.WidevinePsshData.EntitledKey.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var n=t.readBytes();e.setEntitlementKeyId(n);break;case 2:var n=t.readBytes();e.setKeyId(n);break;case 3:var n=t.readBytes();e.setKey(n);break;case 4:var n=t.readBytes();e.setIv(n);break;case 5:var n=t.readUint32();e.setEntitlementKeySizeBytes(n);break;default:t.skipField()}}return e},proto.WidevinePsshData.EntitledKey.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.WidevinePsshData.EntitledKey.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.WidevinePsshData.EntitledKey.serializeBinaryToWriter=function(e,t){var n=void 0;n=r.Message.getField(e,1),null!=n&&t.writeBytes(1,n),n=r.Message.getField(e,2),null!=n&&t.writeBytes(2,n),n=r.Message.getField(e,3),null!=n&&t.writeBytes(3,n),n=r.Message.getField(e,4),null!=n&&t.writeBytes(4,n),null!=(n=r.Message.getField(e,5))&&t.writeUint32(5,n)},proto.WidevinePsshData.EntitledKey.prototype.getEntitlementKeyId=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.WidevinePsshData.EntitledKey.prototype.getEntitlementKeyId_asB64=function(){return r.Message.bytesAsB64(this.getEntitlementKeyId())},proto.WidevinePsshData.EntitledKey.prototype.getEntitlementKeyId_asU8=function(){return r.Message.bytesAsU8(this.getEntitlementKeyId())},proto.WidevinePsshData.EntitledKey.prototype.setEntitlementKeyId=function(e){r.Message.setField(this,1,e)},proto.WidevinePsshData.EntitledKey.prototype.clearEntitlementKeyId=function(){r.Message.setField(this,1,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasEntitlementKeyId=function(){return null!=r.Message.getField(this,1)},proto.WidevinePsshData.EntitledKey.prototype.getKeyId=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.WidevinePsshData.EntitledKey.prototype.getKeyId_asB64=function(){return r.Message.bytesAsB64(this.getKeyId())},proto.WidevinePsshData.EntitledKey.prototype.getKeyId_asU8=function(){return r.Message.bytesAsU8(this.getKeyId())},proto.WidevinePsshData.EntitledKey.prototype.setKeyId=function(e){r.Message.setField(this,2,e)},proto.WidevinePsshData.EntitledKey.prototype.clearKeyId=function(){r.Message.setField(this,2,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasKeyId=function(){return null!=r.Message.getField(this,2)},proto.WidevinePsshData.EntitledKey.prototype.getKey=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.WidevinePsshData.EntitledKey.prototype.getKey_asB64=function(){return r.Message.bytesAsB64(this.getKey())},proto.WidevinePsshData.EntitledKey.prototype.getKey_asU8=function(){return r.Message.bytesAsU8(this.getKey())},proto.WidevinePsshData.EntitledKey.prototype.setKey=function(e){r.Message.setField(this,3,e)},proto.WidevinePsshData.EntitledKey.prototype.clearKey=function(){r.Message.setField(this,3,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasKey=function(){return null!=r.Message.getField(this,3)},proto.WidevinePsshData.EntitledKey.prototype.getIv=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.WidevinePsshData.EntitledKey.prototype.getIv_asB64=function(){return r.Message.bytesAsB64(this.getIv())},proto.WidevinePsshData.EntitledKey.prototype.getIv_asU8=function(){return r.Message.bytesAsU8(this.getIv())},proto.WidevinePsshData.EntitledKey.prototype.setIv=function(e){r.Message.setField(this,4,e)},proto.WidevinePsshData.EntitledKey.prototype.clearIv=function(){r.Message.setField(this,4,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasIv=function(){return null!=r.Message.getField(this,4)},proto.WidevinePsshData.EntitledKey.prototype.getEntitlementKeySizeBytes=function(){return r.Message.getFieldWithDefault(this,5,32)},proto.WidevinePsshData.EntitledKey.prototype.setEntitlementKeySizeBytes=function(e){r.Message.setField(this,5,e)},proto.WidevinePsshData.EntitledKey.prototype.clearEntitlementKeySizeBytes=function(){r.Message.setField(this,5,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasEntitlementKeySizeBytes=function(){return null!=r.Message.getField(this,5)},proto.WidevinePsshData.prototype.getKeyIdsList=function(){return r.Message.getRepeatedField(this,2)},proto.WidevinePsshData.prototype.getKeyIdsList_asB64=function(){return r.Message.bytesListAsB64(this.getKeyIdsList())},proto.WidevinePsshData.prototype.getKeyIdsList_asU8=function(){return r.Message.bytesListAsU8(this.getKeyIdsList())},proto.WidevinePsshData.prototype.setKeyIdsList=function(e){r.Message.setField(this,2,e||[])},proto.WidevinePsshData.prototype.addKeyIds=function(e,t){r.Message.addToRepeatedField(this,2,e,t)},proto.WidevinePsshData.prototype.clearKeyIdsList=function(){this.setKeyIdsList([])},proto.WidevinePsshData.prototype.getContentId=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.WidevinePsshData.prototype.getContentId_asB64=function(){return r.Message.bytesAsB64(this.getContentId())},proto.WidevinePsshData.prototype.getContentId_asU8=function(){return r.Message.bytesAsU8(this.getContentId())},proto.WidevinePsshData.prototype.setContentId=function(e){r.Message.setField(this,4,e)},proto.WidevinePsshData.prototype.clearContentId=function(){r.Message.setField(this,4,void 0)},proto.WidevinePsshData.prototype.hasContentId=function(){return null!=r.Message.getField(this,4)},proto.WidevinePsshData.prototype.getCryptoPeriodIndex=function(){return r.Message.getFieldWithDefault(this,7,0)},proto.WidevinePsshData.prototype.setCryptoPeriodIndex=function(e){r.Message.setField(this,7,e)},proto.WidevinePsshData.prototype.clearCryptoPeriodIndex=function(){r.Message.setField(this,7,void 0)},proto.WidevinePsshData.prototype.hasCryptoPeriodIndex=function(){return null!=r.Message.getField(this,7)},proto.WidevinePsshData.prototype.getProtectionScheme=function(){return r.Message.getFieldWithDefault(this,9,0)},proto.WidevinePsshData.prototype.setProtectionScheme=function(e){r.Message.setField(this,9,e)},proto.WidevinePsshData.prototype.clearProtectionScheme=function(){r.Message.setField(this,9,void 0)},proto.WidevinePsshData.prototype.hasProtectionScheme=function(){return null!=r.Message.getField(this,9)},proto.WidevinePsshData.prototype.getCryptoPeriodSeconds=function(){return r.Message.getFieldWithDefault(this,10,0)},proto.WidevinePsshData.prototype.setCryptoPeriodSeconds=function(e){r.Message.setField(this,10,e)},proto.WidevinePsshData.prototype.clearCryptoPeriodSeconds=function(){r.Message.setField(this,10,void 0)},proto.WidevinePsshData.prototype.hasCryptoPeriodSeconds=function(){return null!=r.Message.getField(this,10)},proto.WidevinePsshData.prototype.getType=function(){return r.Message.getFieldWithDefault(this,11,0)},proto.WidevinePsshData.prototype.setType=function(e){r.Message.setField(this,11,e)},proto.WidevinePsshData.prototype.clearType=function(){r.Message.setField(this,11,void 0)},proto.WidevinePsshData.prototype.hasType=function(){return null!=r.Message.getField(this,11)},proto.WidevinePsshData.prototype.getKeySequence=function(){return r.Message.getFieldWithDefault(this,12,0)},proto.WidevinePsshData.prototype.setKeySequence=function(e){r.Message.setField(this,12,e)},proto.WidevinePsshData.prototype.clearKeySequence=function(){r.Message.setField(this,12,void 0)},proto.WidevinePsshData.prototype.hasKeySequence=function(){return null!=r.Message.getField(this,12)},proto.WidevinePsshData.prototype.getGroupIdsList=function(){return r.Message.getRepeatedField(this,13)},proto.WidevinePsshData.prototype.getGroupIdsList_asB64=function(){return r.Message.bytesListAsB64(this.getGroupIdsList())},proto.WidevinePsshData.prototype.getGroupIdsList_asU8=function(){return r.Message.bytesListAsU8(this.getGroupIdsList())},proto.WidevinePsshData.prototype.setGroupIdsList=function(e){r.Message.setField(this,13,e||[])},proto.WidevinePsshData.prototype.addGroupIds=function(e,t){r.Message.addToRepeatedField(this,13,e,t)},proto.WidevinePsshData.prototype.clearGroupIdsList=function(){this.setGroupIdsList([])},proto.WidevinePsshData.prototype.getEntitledKeysList=function(){return r.Message.getRepeatedWrapperField(this,proto.WidevinePsshData.EntitledKey,14)},proto.WidevinePsshData.prototype.setEntitledKeysList=function(e){r.Message.setRepeatedWrapperField(this,14,e)},proto.WidevinePsshData.prototype.addEntitledKeys=function(e,t){return r.Message.addToRepeatedWrapperField(this,14,e,proto.WidevinePsshData.EntitledKey,t)},proto.WidevinePsshData.prototype.clearEntitledKeysList=function(){this.setEntitledKeysList([])},proto.WidevinePsshData.prototype.getAlgorithm=function(){return r.Message.getFieldWithDefault(this,1,0)},proto.WidevinePsshData.prototype.setAlgorithm=function(e){r.Message.setField(this,1,e)},proto.WidevinePsshData.prototype.clearAlgorithm=function(){r.Message.setField(this,1,void 0)},proto.WidevinePsshData.prototype.hasAlgorithm=function(){return null!=r.Message.getField(this,1)},proto.WidevinePsshData.prototype.getProvider=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.WidevinePsshData.prototype.setProvider=function(e){r.Message.setField(this,3,e)},proto.WidevinePsshData.prototype.clearProvider=function(){r.Message.setField(this,3,void 0)},proto.WidevinePsshData.prototype.hasProvider=function(){return null!=r.Message.getField(this,3)},proto.WidevinePsshData.prototype.getTrackType=function(){return r.Message.getFieldWithDefault(this,5,"")},proto.WidevinePsshData.prototype.setTrackType=function(e){r.Message.setField(this,5,e)},proto.WidevinePsshData.prototype.clearTrackType=function(){r.Message.setField(this,5,void 0)},proto.WidevinePsshData.prototype.hasTrackType=function(){return null!=r.Message.getField(this,5)},proto.WidevinePsshData.prototype.getPolicy=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.WidevinePsshData.prototype.setPolicy=function(e){r.Message.setField(this,6,e)},proto.WidevinePsshData.prototype.clearPolicy=function(){r.Message.setField(this,6,void 0)},proto.WidevinePsshData.prototype.hasPolicy=function(){return null!=r.Message.getField(this,6)},proto.WidevinePsshData.prototype.getGroupedLicense=function(){return r.Message.getFieldWithDefault(this,8,"")},proto.WidevinePsshData.prototype.getGroupedLicense_asB64=function(){return r.Message.bytesAsB64(this.getGroupedLicense())},proto.WidevinePsshData.prototype.getGroupedLicense_asU8=function(){return r.Message.bytesAsU8(this.getGroupedLicense())},proto.WidevinePsshData.prototype.setGroupedLicense=function(e){r.Message.setField(this,8,e)},proto.WidevinePsshData.prototype.clearGroupedLicense=function(){r.Message.setField(this,8,void 0)},proto.WidevinePsshData.prototype.hasGroupedLicense=function(){return null!=r.Message.getField(this,8)},i.object.extend(t,proto)},function(module,exports,__webpack_require__){(function(global,Buffer){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{i:i,v:o}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,n,r){if(t){for(n=$jscomp.global,e=e.split("."),r=0;r<e.length-1;r++){var i=e[r];i in n||(n[i]={}),n=n[i]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.findIndex",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).i}},"es6","es3"),$jscomp.checkStringArgs=function(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.startsWith",function(e){return e||function(e,t){var n=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var r=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var o=0;o<i&&t<r;)if(n[t++]!=e[o++])return!1;return o>=i}},"es6","es3"),$jscomp.polyfill("String.prototype.endsWith",function(e){return e||function(e,t){var n=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var r=e.length;0<r&&0<t;)if(n[--t]!=e[--r])return!1;return 0>=r}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(e){return e||function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(e){return void 0!==e},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.exportPath_=function(e,t,n){e=e.split("."),n=n||goog.global,e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)!e.length&&goog.isDef(t)?n[r]=t:n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}},goog.define=function(e,t){if(!COMPILED){var n=goog.global.CLOSURE_UNCOMPILED_DEFINES,r=goog.global.CLOSURE_DEFINES;n&&void 0===n.nodeType&&Object.prototype.hasOwnProperty.call(n,e)?t=n[e]:r&&void 0===r.nodeType&&Object.prototype.hasOwnProperty.call(r,e)&&(t=r[e])}return goog.exportPath_(e,t),t},goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var n=e;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(e,t)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e].exports;if(!goog.implicitNamespaces_[e])return e=goog.getObjectByName(e),null!=e?e:null}return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&("function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath())},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(e in goog.loadedModules_)throw Error('Module with namespace "'+e+'" already exists.')}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.module.declareNamespace=goog.declareModuleId,goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var n=0;n<e.length;n++)if(t=t[e[n]],!goog.isDefAndNotNull(t))return null;return t},goog.globalize=function(e,t){t=t||goog.global;for(var n in e)t[n]=e[n]},goog.addDependency=function(e,t,n,r){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(e,t,n,r)},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(e),goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(e)}finally{goog.moduleLoaderState_=t}}return null}},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(e))var n=e.call(void 0,{});else{if(!goog.isString(e))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),n=goog.loadModuleFromSource_.call(void 0,e)}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof n&&null!=n&&Object.seal(n),goog.loadedModules_[r]={exports:n,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(a,b,c){var d=goog.global.$jscomp;d||(goog.global.$jscomp=d={});var e=d.transpile;if(!e){var f=goog.basePath+goog.TRANSPILER,g=goog.loadFileSync_(f);if(g){if(function(){eval(g+"\n//# sourceURL="+f)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,d=goog.global.$jscomp,e=d.transpile}}return e||(e=d.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}),e(a,b,c)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();t="array"==t?[]:{};for(var n in e)t[n]=goog.cloneObject(e[n]);return t}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,n=t.createElement("SCRIPT");n.type="text/javascript",n.defer=!1,n.appendChild(t.createTextNode(e)),t.head.appendChild(n),t.head.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var n=function(e){return goog.cssNameMapping_[e]||e},r=function(e){e=e.split("-");for(var t=[],r=0;r<e.length;r++)t.push(n(e[r]));return t.join("-")};return r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:r:function(e){return e},e=t?e+"-"+r(t):r(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}},goog.base=function(e,t,n){var r=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(void 0!==r.superClass_){for(var i=Array(arguments.length-1),o=1;o<arguments.length;o++)i[o-1]=arguments[o];return r.superClass_.constructor.apply(e,i)}if("string"!=typeof t&&"symbol"!=typeof t)throw Error("method names provided to goog.base must be a string or a symbol");for(i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];o=!1;for(var a=e.constructor;a;a=a.superClass_&&a.superClass_.constructor)if(a.prototype[t]===r)o=!0;else if(o)return a.prototype[t].apply(e,i);if(e[t]===r)return e.constructor.prototype[t].apply(e,i);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var n=t.constructor,r=t.statics;return n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),n=goog.defineClass.createSealingConstructor_(n,e),e&&goog.inherits(n,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(n.prototype,t),null!=r&&(r instanceof Function?r(n):goog.defineClass.applyProperties_(n,r)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var n=!goog.defineClass.isUnsealable_(t),r=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===r&&n&&Object.seal instanceof Function&&Object.seal(t),t};return r},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.isDocumentLoading_=function(){var e=goog.global.document;return e.attachEvent?"complete"!=e.readyState:"loading"==e.readyState},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)&&goog.isString(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var e=goog.global.document,t=e.currentScript;for(e=t?[t]:e.getElementsByTagName("SCRIPT"),t=e.length-1;0<=t;--t){var n=e[t].src,r=n.lastIndexOf("?");if(r=-1==r?n.length:r,"base.js"==n.substr(r-7,7)){goog.basePath=n.substr(0,r-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null,this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(t,n){e?d[t]=!0:n()?(c=t,d[t]=!1):e=d[t]=!0}function b(a){try{return!!eval(a)}catch(e){return!1}}var c="es3",d={es3:!1},e=!1,f=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",function(){return b("[1,].length==1")}),a("es6",function(){return!f.match(/Edge\/(\d+)(\.\d)*/i)&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')}),a("es6-impl",function(){return!0}),a("es7",function(){return b("2 ** 2 == 4")}),a("es8",function(){return b("async () => 1, true")}),a("es9",function(){return b("({...rest} = {}), true")}),a("es_next",function(){return!1}),{target:c,map:d}},goog.Transpiler.prototype.needsTranspile=function(e,t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!this.requiresTranspilation_){var n=this.createRequiresTranspilation_();this.requiresTranspilation_=n.map,this.transpilationTarget_=this.transpilationTarget_||n.target}if(e in this.requiresTranspilation_)return!!this.requiresTranspilation_[e]||!(!goog.inHtmlDocument_()||"es6"!=t||"noModule"in goog.global.document.createElement("script"));throw Error("Unknown language mode: "+e)},goog.Transpiler.prototype.transpile=function(e,t){return goog.transpile_(e,t,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={},this.idToPath_={},this.written_={},this.loadingDeps_=[],this.depsToLoad_=[],this.paused_=!1,this.factory_=new goog.DependencyFactory(goog.transpiler_),this.deferredCallbacks_={},this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(e,t){function n(){r&&(goog.global.setTimeout(r,0),r=null)}var r=t;if(e.length){t=[];for(var i=0;i<e.length;i++){var o=this.getPathFromDeps_(e[i]);if(!o)throw Error("Unregonized namespace: "+e[i]);t.push(this.dependencies_[o])}o=goog.require;var a=0;for(i=0;i<e.length;i++)o(e[i]),t[i].onLoad(function(){++a==e.length&&n()})}else n()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1)),this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(e,t){(e=this.getPathFromDeps_(e))&&(t||this.areDepsLoaded_(this.dependencies_[e].requires))&&(t=this.deferredCallbacks_[e])&&(delete this.deferredCallbacks_[e],t())},goog.DebugLoader_.prototype.setDependencyFactory=function(e){this.factory_=e},goog.DebugLoader_.prototype.load_=function(e){if(!this.getPathFromDeps_(e))throw e="goog.require could not find: "+e,goog.logToConsole_(e),Error(e);var t=this,n=[],r=function(e){var i=t.getPathFromDeps_(e);if(!i)throw Error("Bad dependency path or symbol: "+e);if(!t.written_[i]){for(t.written_[i]=!0,e=t.dependencies_[i],i=0;i<e.requires.length;i++)goog.isProvided_(e.requires[i])||r(e.requires[i]);n.push(e)}};r(e),e=!!this.depsToLoad_.length,this.depsToLoad_=this.depsToLoad_.concat(n),this.paused_||e||this.loadDeps_()},goog.DebugLoader_.prototype.loadDeps_=function(){for(var e=this,t=this.paused_;this.depsToLoad_.length&&!t;)!function(){var n=!1,r=e.depsToLoad_.shift(),i=!1;e.loading_(r);var o={pause:function(){if(n)throw Error("Cannot call pause after the call to load.");t=!0},resume:function(){n?e.resume_():t=!1},loaded:function(){if(i)throw Error("Double call to loaded.");i=!0,e.loaded_(r)},pending:function(){for(var t=[],n=0;n<e.loadingDeps_.length;n++)t.push(e.loadingDeps_[n]);return t},setModuleState:function(e){goog.moduleLoaderState_={type:e,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(e,t,n){n&&(goog.loadedModules_[n]={exports:t,type:goog.ModuleType.ES6,moduleId:n||""})},registerGoogModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.GOOG,moduleId:e}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(t){if(n)throw Error("Cannot register with defer after the call to load.");e.defer_(r,t)},areDepsLoaded:function(){return e.areDepsLoaded_(r.requires)}};try{r.load(o)}finally{n=!0}}();t&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(e){this.loadingDeps_.push(e)},goog.DebugLoader_.prototype.loaded_=function(e){for(var t=0;t<this.loadingDeps_.length;t++)if(this.loadingDeps_[t]==e){this.loadingDeps_.splice(t,1);break}for(t=0;t<this.deferredQueue_.length;t++)if(this.deferredQueue_[t]==e.path){this.deferredQueue_.splice(t,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);e.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(e){for(var t=0;t<e.length;t++){var n=this.getPathFromDeps_(e[t]);if(!n||!(n in this.deferredCallbacks_||goog.isProvided_(e[t])))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=function(e){return e in this.idToPath_?this.idToPath_[e]:e in this.dependencies_?e:null},goog.DebugLoader_.prototype.defer_=function(e,t){this.deferredCallbacks_[e.path]=t,this.deferredQueue_.push(e.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(e,t,n){},goog.LoadController.prototype.setModuleState=function(e){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(e){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(e,t,n,r,i){this.path=e,this.relativePath=t,this.provides=n,this.requires=r,this.loadFlags=i,this.loaded_=!1,this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var e=this.path,t=e.indexOf("://");return 0<=t&&(e=e.substring(t+3),0<=(t=e.indexOf("/"))&&(e=e.substring(t+1))),e},goog.Dependency.prototype.onLoad=function(e){this.loaded_?e():this.loadCallbacks_.push(e)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var e=this.loadCallbacks_;this.loadCallbacks_=[];for(var t=0;t<e.length;t++)e[t]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(e){var t=Math.random().toString(32);return goog.Dependency.callbackMap_[t]=e,t},goog.Dependency.unregisterCallback_=function(e){delete goog.Dependency.callbackMap_[e]},goog.Dependency.callback_=function(e,t){if(!(e in goog.Dependency.callbackMap_))throw Error("Callback key "+e+" does not exist (was base.js loaded more than once?).");for(var n=goog.Dependency.callbackMap_[e],r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);n.apply(void 0,r)},goog.Dependency.prototype.load=function(e){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document;if("complete"==t.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path))return void e.loaded();throw Error('Cannot write "'+this.path+'" after document load')}if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var n=goog.Dependency.registerCallback_(function(t){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=t.readyState||(goog.Dependency.unregisterCallback_(n),e.loaded())}),r=!goog.DebugLoader_.IS_OLD_IE_&&goog.getScriptNonce()?' nonce="'+goog.getScriptNonce()+'"':"";t.write('<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+n+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+r+"><\/script>")}else{var i=t.createElement("script");i.defer=goog.Dependency.defer_,i.async=!1,i.type="text/javascript",(r=goog.getScriptNonce())&&i.setAttribute("nonce",r),goog.DebugLoader_.IS_OLD_IE_?(e.pause(),i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(e.loaded(),e.resume())}):i.onload=function(){i.onload=null,e.loaded()},i.src=this.path,t.head.appendChild(i)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),e.loaded()):e.pause()},goog.Es6ModuleDependency=function(e,t,n,r,i){goog.Dependency.call(this,e,t,n,r,i)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(e){function t(e,t){t?r.write('<script type="module" crossorigin>'+t+"<\/script>"):r.write('<script type="module" crossorigin src="'+e+'"><\/script>')}function n(e,t){var n=r.createElement("script");n.defer=!0,n.async=!1,n.type="module",n.setAttribute("crossorigin",!0);var i=goog.getScriptNonce();i&&n.setAttribute("nonce",i),t?n.textContent=t:n.src=e,r.head.appendChild(n)}if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var r=goog.global.document,i=this;if(goog.isDocumentLoading_()){var o=t;goog.Dependency.defer_=!0}else o=n;var a=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(a),e.setModuleState(goog.ModuleType.ES6)});o(void 0,'goog.Dependency.callback_("'+a+'")'),o(this.path,void 0);var s=goog.Dependency.registerCallback_(function(t){goog.Dependency.unregisterCallback_(s),e.registerEs6ModuleExports(i.path,t,goog.moduleLoaderState_.moduleName)});o(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+s+'", m)');var u=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(u),e.clearModuleState(),e.loaded()});o(void 0,'goog.Dependency.callback_("'+u+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),e.pause()},goog.TransformedDependency=function(e,t,n,r,i){goog.Dependency.call(this,e,t,n,r,i),this.contents_=null,this.lazyFetch_=!(goog.inHtmlDocument_()&&"noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(e){function t(){r.contents_=goog.loadFileSync_(r.path),r.contents_&&(r.contents_=r.transform(r.contents_),r.contents_&&(r.contents_+="\n//# sourceURL="+r.path))}function n(){if(r.lazyFetch_&&t(),r.contents_){i&&e.setModuleState(goog.ModuleType.ES6);try{var n=r.contents_;if(r.contents_=null,goog.globalEval(n),i)var o=goog.moduleLoaderState_.moduleName}finally{i&&e.clearModuleState()}i&&goog.global.$jscomp.require.ensure([r.getPathName()],function(){e.registerEs6ModuleExports(r.path,goog.global.$jscomp.require(r.getPathName()),o)}),e.loaded()}}var r=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)t(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,e.loaded()):e.pause();else{var i=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||t();var o=1<e.pending().length,a=o&&goog.DebugLoader_.IS_OLD_IE_;if(o=goog.Dependency.defer_&&(o||goog.isDocumentLoading_()),a||o)e.defer(function(){n()});else{var s=goog.global.document;if(a=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global,i&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!a){goog.Dependency.defer_=!0,e.pause();var u=s.onreadystatechange;s.onreadystatechange=function(){"interactive"==s.readyState&&(s.onreadystatechange=u,n(),e.resume()),goog.isFunction(u)&&u.apply(void 0,arguments)}}else!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?function(){var e=goog.global.document,t=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(t),n()});e.write('<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+t+'");')+"<\/script>")}():n()}}},goog.TransformedDependency.prototype.transform=function(e){},goog.TranspiledDependency=function(e,t,n,r,i,o){goog.TransformedDependency.call(this,e,t,n,r,i),this.transpiler=o},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(e){return this.transpiler.transpile(e,this.getPathName())},goog.PreTranspiledEs6ModuleDependency=function(e,t,n,r,i){goog.TransformedDependency.call(this,e,t,n,r,i)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(e){return e},goog.GoogModuleDependency=function(e,t,n,r,i,o,a){goog.TransformedDependency.call(this,e,t,n,r,i),this.needsTranspile_=o,this.transpiler_=a},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(e){return this.needsTranspile_&&(e=this.transpiler_.transpile(e,this.getPathName())),goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(e,t,n,r){t=t||[],e=e.replace(/\\/g,"/");var i=goog.normalizePath_(goog.basePath+e);for(r&&"boolean"!=typeof r||(r=r?{module:goog.ModuleType.GOOG}:{}),n=this.factory_.createDependency(i,e,t,n,r,goog.transpiler_.needsTranspile(r.lang||"es3",r.module)),this.dependencies_[i]=n,n=0;n<t.length;n++)this.idToPath_[t[n]]=i;this.idToPath_[e]=i},goog.DependencyFactory=function(e){this.transpiler=e},goog.DependencyFactory.prototype.createDependency=function(e,t,n,r,i,o){return i.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(e,t,n,r,i,o,this.transpiler):o?new goog.TranspiledDependency(e,t,n,r,i,this.transpiler):i.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(e,t,n,r,i):new goog.Es6ModuleDependency(e,t,n,r,i):new goog.Dependency(e,t,n,r,i)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(e){goog.debugLoader_.setDependencyFactory(e)},goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(e,t){goog.debugLoader_.bootstrap(e,t)});var jspb={BinaryConstants:{},ConstBinaryMessage:function(){},BinaryMessage:function(){}};jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,n=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return n.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return n.FIXED64;case t.STRING:case t.MESSAGE:case t.BYTES:return n.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return n.FIXED32;default:return n.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1.401298464324817e-45,jspb.BinaryConstants.FLOAT32_MIN=1.1754943508222875e-38,jspb.BinaryConstants.FLOAT32_MAX=3.4028234663852886e38,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=2.2250738585072014e-308,jspb.BinaryConstants.FLOAT64_MAX=1.7976931348623157e308,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=0x8000000000000000,jspb.BinaryConstants.TWO_TO_64=0x10000000000000000,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){e=e.split("%s");for(var n="",r=e.length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");return n+e[r]},goog.asserts.doAssertFailure_=function(e,t,n,r){var i="Assertion failed";if(n){i+=": "+n;var o=r}else e&&(i+=": "+e,o=t);e=new goog.asserts.AssertionError(""+i,o||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,r){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=!1,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==n?e.length-1:n)}:function(e,t,n){if(n=null==n?e.length-1:n,0>n&&(n=Math.max(0,e.length+n)),goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,n):-1;for(;0<=n;n--)if(n in e&&e[n]===t)return n;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,n){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},goog.array.forEachRight=function(e,t,n){var r=e.length,i=goog.isString(e)?e.split(""):e;for(--r;0<=r;--r)r in i&&t.call(n,i[r],r,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=[],o=0,a=goog.isString(e)?e.split(""):e,s=0;s<r;s++)if(s in a){var u=a[s];t.call(n,u,s,e)&&(i[o++]=u)}return i},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=Array(r),o=goog.isString(e)?e.split(""):e,a=0;a<r;a++)a in o&&(i[a]=t.call(n,o[a],a,e));return i},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,n,r){return goog.asserts.assert(null!=e.length),r&&(t=goog.bind(t,r)),Array.prototype.reduce.call(e,t,n)}:function(e,t,n,r){var i=n;return goog.array.forEach(e,function(n,o){i=t.call(r,i,n,o,e)}),i},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,n,r){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),r&&(t=goog.bind(t,r)),Array.prototype.reduceRight.call(e,t,n)}:function(e,t,n,r){var i=n;return goog.array.forEachRight(e,function(n,o){i=t.call(r,i,n,o,e)}),i},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&t.call(n,i[o],o,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&!t.call(n,i[o],o,e))return!1;return!0},goog.array.count=function(e,t,n){var r=0;return goog.array.forEach(e,function(e,i,o){t.call(n,e,i,o)&&++r},n),r},goog.array.find=function(e,t,n){return t=goog.array.findIndex(e,t,n),0>t?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,n){for(var r=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&t.call(n,i[o],o,e))return o;return-1},goog.array.findRight=function(e,t,n){return t=goog.array.findIndexRight(e,t,n),0>t?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,n){var r=e.length,i=goog.isString(e)?e.split(""):e;for(--r;0<=r;r--)if(r in i&&t.call(n,i[r],r,e))return r;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,n){goog.array.splice(e,n,0,t)},goog.array.insertArrayAt=function(e,t,n){goog.partial(goog.array.splice,e,n,0).apply(null,t)},goog.array.insertBefore=function(e,t,n){var r;2==arguments.length||0>(r=goog.array.indexOf(e,n))?e.push(t):goog.array.insertAt(e,t,r)},goog.array.remove=function(e,t){t=goog.array.indexOf(e,t);var n;return(n=0<=t)&&goog.array.removeAt(e,t),n},goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,n){return 0<=(t=goog.array.findIndex(e,t,n))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(e,t,n){var r=0;return goog.array.forEachRight(e,function(i,o){t.call(n,i,o,e)&&goog.array.removeAt(e,o)&&r++}),r},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(goog.isArrayLike(r)){var i=e.length||0,o=r.length||0;e.length=i+o;for(var a=0;a<o;a++)e[i+a]=r[a]}else e.push(r)}},goog.array.splice=function(e,t,n,r){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,n){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)},goog.array.removeDuplicates=function(e,t,n){t=t||e;var r=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};n=n||r,r={};for(var i=0,o=0;o<e.length;){var a=e[o++],s=n(a);Object.prototype.hasOwnProperty.call(r,s)||(r[s]=!0,t[i++]=a)}t.length=i},goog.array.binarySearch=function(e,t,n){return goog.array.binarySearch_(e,n||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,n){return goog.array.binarySearch_(e,t,!0,void 0,n)},goog.array.binarySearch_=function(e,t,n,r,i){for(var o,a=0,s=e.length;a<s;){var u=a+s>>1,c=n?t.call(i,e[u],u,e):t(r,e[u]);0<c?a=u+1:(s=u,o=!c)}return o?a:~a},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]={index:r,value:e[r]};var i=t||goog.array.defaultCompare;for(goog.array.sort(n,function(e,t){return i(e.value,t.value)||e.index-t.index}),r=0;r<e.length;r++)e[r]=n[r].value},goog.array.sortByKey=function(e,t,n){var r=n||goog.array.defaultCompare;goog.array.sort(e,function(e,n){return r(t(e),t(n))})},goog.array.sortObjectsByKey=function(e,t,n){goog.array.sortByKey(e,function(e){return e[t]},n)},goog.array.isSorted=function(e,t,n){t=t||goog.array.defaultCompare;for(var r=1;r<e.length;r++){var i=t(e[r-1],e[r]);if(0<i||0==i&&n)return!1}return!0},goog.array.equals=function(e,t,n){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var r=e.length;n=n||goog.array.defaultCompareEquality;for(var i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0},goog.array.compare3=function(e,t,n){n=n||goog.array.defaultCompare;for(var r=Math.min(e.length,t.length),i=0;i<r;i++){var o=n(e[i],t[i]);if(0!=o)return o}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,n){return 0>(n=goog.array.binarySearch(e,t,n))&&(goog.array.insertAt(e,t,-(n+1)),!0)},goog.array.binaryRemove=function(e,t,n){return 0<=(t=goog.array.binarySearch(e,t,n))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,n){for(var r={},i=0;i<e.length;i++){var o=e[i],a=t.call(n,o,i,e);goog.isDef(a)&&(r[a]||(r[a]=[])).push(o)}return r},goog.array.toObject=function(e,t,n){var r={};return goog.array.forEach(e,function(i,o){r[t.call(n,i,o,e)]=i}),r},goog.array.range=function(e,t,n){var r=[],i=0,o=e;if(n=n||1,void 0!==t&&(i=e,o=t),0>n*(o-i))return[];if(0<n)for(e=i;e<o;e+=n)r.push(e);else for(e=i;e>o;e+=n)r.push(e);return r},goog.array.repeat=function(e,t){for(var n=[],r=0;r<t;r++)n[r]=e;return n},goog.array.flatten=function(e){for(var t=[],n=0;n<arguments.length;n++){var r=arguments[n];if(goog.isArray(r))for(var i=0;i<r.length;i+=8192){var o=goog.array.slice(r,i,i+8192);o=goog.array.flatten.apply(null,o);for(var a=0;a<o.length;a++)t.push(o[a])}else t.push(r)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(t%=e.length,0<t?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,n){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=n&&n<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,n,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],n=arguments[0].length,r=1;r<arguments.length;r++)arguments[r].length<n&&(n=arguments[r].length);for(r=0;r<n;r++){for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o][r]);t.push(i)}return t},goog.array.shuffle=function(e,t){t=t||Math.random;for(var n=e.length-1;0<n;n--){var r=Math.floor(t()*(n+1)),i=e[n];e[n]=e[r],e[r]=i}},goog.array.copyByIndex=function(e,t){var n=[];return goog.array.forEach(t,function(t){n.push(e[t])}),n},goog.array.concatMap=function(e,t,n){return goog.array.concat.apply([],goog.array.map(e,t,n))},goog.crypt={},goog.crypt.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);255<i&&(t[n++]=255&i,i>>=8),t[n++]=i}return t},goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",n=0;n<e.length;n+=8192){var r=goog.array.slice(e,n,n+8192);t+=String.fromCharCode.apply(null,r)}return t},goog.crypt.byteArrayToHex=function(e,t){return goog.array.map(e,function(e){return e=e.toString(16),1<e.length?e:"0"+e}).join(t||"")},goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substring(n,n+2),16));return t},goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);128>i?t[n++]=i:(2048>i?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(128>i)t[r++]=String.fromCharCode(i);else if(191<i&&224>i){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=e[n++];var a=e[n++],s=e[n++];i=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536,t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else o=e[n++],a=e[n++],t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return t.join("")},goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var n=[],r=0;r<e.length;r++)n.push(e[r]^t[r]);return n},goog.string={},goog.string.internal={},goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.internal.endsWith=function(e,t){var n=e.length-t.length;return 0<=n&&e.indexOf(t,n)==n},goog.string.internal.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.internal.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.internal.caseInsensitiveCompare=function(e,t){return e=String(e).toLowerCase(),t=String(t).toLowerCase(),e<t?-1:e==t?0:1},goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.internal.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.internal.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.internal.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.internal.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.internal.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())},goog.string.internal.compareVersions=function(e,t){var n=0;e=goog.string.internal.trim(String(e)).split("."),t=goog.string.internal.trim(String(t)).split(".");for(var r=Math.max(e.length,t.length),i=0;0==n&&i<r;i++){var o=e[i]||"",a=t[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;n=0==o[1].length?0:parseInt(o[1],10);var s=0==a[1].length?0:parseInt(a[1],10);n=goog.string.internal.compareElements_(n,s)||goog.string.internal.compareElements_(0==o[2].length,0==a[2].length)||goog.string.internal.compareElements_(o[2],a[2]),o=o[3],a=a[3]}while(0==n)}return n},goog.string.internal.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"�">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(e,t,n){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var r=e.toLowerCase().match(n),i=t.toLowerCase().match(n),o=Math.min(r.length,i.length),a=0;a<o;a++){n=r[a];var s=i[a];if(n!=s)return e=parseInt(n,10),!isNaN(e)&&(t=parseInt(s,10),!isNaN(t)&&e-t)?e-t:n<s?-1:1}return r.length!=i.length?r.length-i.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(e,t){return e=goog.string.internal.htmlEscape(e,t),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},r=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var i=n[e];return i||("#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(i=String.fromCharCode(t))),i||(r.innerHTML=e+" ",i=r.firstChild.nodeValue.slice(0,-1)),n[e]=i)})},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var n=t.length,r=0;r<n;r++){var i=1==n?t:t.charAt(r);if(e.charAt(0)==i&&e.charAt(e.length-1)==i)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,n){return n&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),n&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,n,r){if(n&&(e=goog.string.unescapeEntities(e)),r&&e.length>t){r>t&&(r=t);var i=e.length-r;e=e.substring(0,t-r)+"..."+e.substring(i)}else e.length>t&&(r=Math.floor(t/2),i=e.length-r,e=e.substring(0,r+t%2)+"..."+e.substring(i));return n&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],n=0;n<e.length;n++){var r=e.charAt(n),i=r.charCodeAt(0);t[n+1]=goog.string.specialEscapeChars_[r]||(31<i&&127>i?r:goog.string.escapeChar(r))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=goog.string.escapeChar(e.charAt(n));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e.charCodeAt(0);if(31<t&&127>t)var n=e;else 256>t?(n="\\x",(16>t||256<t)&&(n+="0")):(n="\\u",4096>t&&(n+="0")),n+=t.toString(16).toUpperCase();return goog.string.jsEscapeCache_[e]=n},goog.string.contains=goog.string.internal.contains;goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,n){var r=e;return 0<=t&&t<e.length&&0<n&&(r=e.substr(0,t)+e.substr(t+n,e.length-t-n)),r},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,"")},goog.string.replaceAll=function(e,t,n){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,n.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,n){return e=goog.isDef(n)?e.toFixed(n):String(e),n=e.indexOf("."),-1==n&&(n=e.length),goog.string.repeat("0",Math.max(0,t-n))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(e){for(var t=0,n=0;n<e.length;++n)t=31*t+e.charCodeAt(n)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){return t=goog.isString(t)?goog.string.regExpEscape(t):"\\s",e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),function(e,t,n){return t+n.toUpperCase()})},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),goog.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,n){e=e.split(t);for(var r=[];0<n&&e.length;)r.push(e.shift()),n--;return e.length&&r.push(e.join(t)),r},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var n=-1,r=0;r<t.length;r++)if(""!=t[r]){var i=e.lastIndexOf(t[r]);i>n&&(n=i)}return-1==n?e:e.slice(n+1)},goog.string.editDistance=function(e,t){var n=[],r=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var i=0;i<t.length+1;i++)n[i]=i;for(i=0;i<e.length;i++){r[0]=i+1;for(var o=0;o<t.length;o++)r[o+1]=Math.min(r[o]+1,n[o+1]+1,n[o]+Number(e[i]!=t[o]));for(o=0;o<n.length;o++)n[o]=r[o]}return r[t.length]},goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,n=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,r=[];t=n.exec(e);)r.push([t[1],t[2],t[3]||void 0]);return r},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.isGo2Phone=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?(t=/Windows (?:NT|Phone) ([0-9.]+)/,t=(e=t.exec(e))?e[1]:"0.0"):goog.labs.userAgent.platform.isIos()?(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,t=(e=t.exec(e))&&e[1].replace(/_/g,".")):goog.labs.userAgent.platform.isMacintosh()?(t=/Mac OS X ([0-9_.]+)/,t=(e=t.exec(e))?e[1].replace(/_/g,"."):"10"):goog.labs.userAgent.platform.isAndroid()?(t=/Android\s+([^\);]+)(\)|;)/,t=(e=t.exec(e))&&e[1]):goog.labs.userAgent.platform.isChromeOS()&&(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,t=(e=t.exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t},goog.object.forEach=function(e,t,n){for(var r in e)t.call(n,e[r],r,e)},goog.object.filter=function(e,t,n){var r,i={};for(r in e)t.call(n,e[r],r,e)&&(i[r]=e[r]);return i},goog.object.map=function(e,t,n){var r,i={};for(r in e)i[r]=t.call(n,e[r],r,e);return i},goog.object.some=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return!0;return!1},goog.object.every=function(e,t,n){for(var r in e)if(!t.call(n,e[r],r,e))return!1;return!0},goog.object.getCount=function(e){var t,n=0;for(t in e)n++;return n},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,n=[],r=0;for(t in e)n[r++]=e[t];return n},goog.object.getKeys=function(e){var t,n=[],r=0;for(t in e)n[r++]=t;return n},goog.object.getValueByKeys=function(e,t){var n=goog.isArrayLike(t),r=n?t:arguments;for(n=n?0:1;n<r.length;n++){if(null==e)return;e=e[r[n]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},goog.object.findKey=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},goog.object.findValue=function(e,t,n){return(t=goog.object.findKey(e,t,n))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var n;return(n=t in e)&&delete e[t],n},goog.object.add=function(e,t,n){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,n)},goog.object.get=function(e,t,n){return null!==e&&t in e?e[t]:n},goog.object.set=function(e,t,n){e[t]=n},goog.object.setIfUndefined=function(e,t,n){return t in e?e[t]:e[t]=n},goog.object.setWithReturnValueIfNotSet=function(e,t,n){return t in e?e[t]:(n=n(),e[t]=n)},goog.object.equals=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(n in t)if(!(n in e))return!1;return!0},goog.object.clone=function(e){var t,n={};for(t in e)n[t]=e[t];return n},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();t="array"==t?[]:{};for(var n in e)t[n]=goog.object.unsafeClone(e[n]);return t}return e},goog.object.transpose=function(e){var t,n={};for(t in e)n[e[t]]=t;return n},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var o=0;o<goog.object.PROTOTYPE_FIELDS_.length;o++)n=goog.object.PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var n={},r=0;r<t;r+=2)n[arguments[r]]=arguments[r+1];return n},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var n={},r=0;r<t;r++)n[arguments[r]]=!0;return n},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,n){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var r={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||n);){for(var i=Object.getOwnPropertyNames(e),o=0;o<i.length;o++)r[i[o]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(r)},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdge_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,r),n[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var n={};goog.array.forEach(t,function(e){n[e[0]]=e[1]});var r=goog.partial(goog.object.containsKey,n);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var n=/MSIE +([\d\.]+)/.exec(e);if(n&&n[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==n[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=n[1];return t},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,n,r){return r=r?r(t):t,Object.prototype.hasOwnProperty.call(e,r)?e[r]:e[r]=n(t)},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e);var t=goog.labs.userAgent.engine.getEngineTuple_(e);if(t)return"Gecko"==t[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):t[1];e=e[0];var n;if(e&&(n=e[2])&&(n=/Trident\/([^\s;]+)/.exec(n)))return n[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var n=e[t];if("Edge"==n[0])return n}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,function(e){return t==e[0]}))&&e[1]||""},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.ASSUME_GO2PHONE=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.GO2PHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_GO2PHONE:goog.labs.userAgent.platform.isGo2Phone(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e)?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){var e=goog.global.document,t=goog.userAgent.getDocumentMode_();if(e&&goog.userAgent.IE)return t||("CSS1Compat"==e.compatMode?parseInt(goog.userAgent.VERSION,10):5)}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox();goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.byteToCharMap_=null,goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.byteToCharMapWebSafe_=null,goog.crypt.base64.ENCODED_VALS_BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.ENCODED_VALS_BASE+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.ENCODED_VALS_BASE+"-_.",goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa,goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob,goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter"),goog.crypt.base64.init_(),t=t?goog.crypt.base64.byteToCharMapWebSafe_:goog.crypt.base64.byteToCharMap_;for(var n=[],r=0;r<e.length;r+=3){var i=e[r],o=r+1<e.length,a=o?e[r+1]:0,s=r+2<e.length,u=s?e[r+2]:0,c=i>>2;i=(3&i)<<4|a>>4,a=(15&a)<<2|u>>6,u&=63,s||(u=64,o||(a=64)),n.push(t[c],t[i],t[a],t[u])}return n.join("")},goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)},goog.crypt.base64.decodeString=function(e,t){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var n="";return goog.crypt.base64.decodeStringInternal_(e,function(e){n+=String.fromCharCode(e)}),n},goog.crypt.base64.decodeStringToByteArray=function(e,t){var n=[];return goog.crypt.base64.decodeStringInternal_(e,function(e){n.push(e)}),n},goog.crypt.base64.decodeStringToUint8Array=function(e){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=e.length,n=0;"="===e[t-2]?n=2:"="===e[t-1]&&(n=1);var r=new Uint8Array(Math.ceil(3*t/4)-n),i=0;return goog.crypt.base64.decodeStringInternal_(e,function(e){r[i++]=e}),r.subarray(0,i)},goog.crypt.base64.decodeStringInternal_=function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=goog.crypt.base64.charToByteMap_[n];if(null!=i)return i;if(!goog.string.isEmptyOrWhitespace(n))throw Error("Unknown base64 encoding at char: "+n)}return t}goog.crypt.base64.init_();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.byteToCharMap_){goog.crypt.base64.byteToCharMap_={},goog.crypt.base64.charToByteMap_={},goog.crypt.base64.byteToCharMapWebSafe_={};for(var e=0;e<goog.crypt.base64.ENCODED_VALS.length;e++)goog.crypt.base64.byteToCharMap_[e]=goog.crypt.base64.ENCODED_VALS.charAt(e),goog.crypt.base64.charToByteMap_[goog.crypt.base64.byteToCharMap_[e]]=e,goog.crypt.base64.byteToCharMapWebSafe_[e]=goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e),e>=goog.crypt.base64.ENCODED_VALS_BASE.length&&(goog.crypt.base64.charToByteMap_[goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e)]=e)}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=t,jspb.utils.split64High=e},jspb.utils.splitInt64=function(e){var t=0>e;e=Math.abs(e);var n=e>>>0;e=Math.floor((e-n)/jspb.BinaryConstants.TWO_TO_32),e>>>=0,t&&(e=~e>>>0,4294967295<(n=1+(~n>>>0))&&(n=0,4294967295<++e&&(e=0))),jspb.utils.split64Low=n,jspb.utils.split64High=e},jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e),jspb.utils.splitUint64(e),e=jspb.utils.split64Low;var n=jspb.utils.split64High;t&&(0==e?0==n?n=e=4294967295:(n--,e=4294967295):e--),jspb.utils.split64Low=e,jspb.utils.split64High=n},jspb.utils.splitFloat32=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(e))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(e>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|2139095040)>>>0;else if(e<jspb.BinaryConstants.FLOAT32_MIN)e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|e)>>>0;else{var n=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-n),e=8388607&Math.round(e*jspb.BinaryConstants.TWO_TO_23),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|n+127<<23|e)>>>0}},jspb.utils.splitFloat64=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){var n=e/Math.pow(2,-1074);e=n/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(t<<31|e)>>>0,jspb.utils.split64Low=n>>>0}else{var r=Math.floor(Math.log(e)/Math.LN2);1024==r&&(r=1023),n=e*Math.pow(2,-r),e=n*jspb.BinaryConstants.TWO_TO_20&1048575,n=n*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(t<<31|r+1023<<20|e)>>>0,jspb.utils.split64Low=n}},jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=e.charCodeAt(4),a=e.charCodeAt(5),s=e.charCodeAt(6);e=e.charCodeAt(7),jspb.utils.split64Low=t+(n<<8)+(r<<16)+(i<<24)>>>0,jspb.utils.split64High=o+(a<<8)+(s<<16)+(e<<24)>>>0},jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+e},jspb.utils.joinInt64=function(e,t){var n=2147483648&t;return n&&(e=1+~e>>>0,t=~t>>>0,0==e&&(t=t+1>>>0)),e=jspb.utils.joinUint64(e,t),n?-e:e},jspb.utils.joinZigzag64=function(e,t){var n=1&e;return e=(e>>>1|t<<31)>>>0,t>>>=1,n&&0==(e=e+1>>>0)&&(t=t+1>>>0),e=jspb.utils.joinUint64(e,t),n?-e:e},jspb.utils.joinFloat32=function(e,t){t=2*(e>>31)+1;var n=e>>>23&255;return e&=8388607,255==n?e?NaN:1/0*t:0==n?t*Math.pow(2,-149)*e:t*Math.pow(2,n-150)*(e+Math.pow(2,23))},jspb.utils.joinFloat64=function(e,t){var n=2*(t>>31)+1,r=t>>>20&2047;return e=jspb.BinaryConstants.TWO_TO_32*(1048575&t)+e,2047==r?e?NaN:1/0*n:0==r?n*Math.pow(2,-1074)*e:n*Math.pow(2,r-1075)*(e+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.joinUnsignedDecimalString=function(e,t){function n(e){for(var t=1e7,n=0;7>n;n++){t/=10;var r=e/t%10>>>0;(0!=r||o)&&(o=!0,a+=i[r])}}if(2097151>=t)return""+(jspb.BinaryConstants.TWO_TO_32*t+e);var r=(e>>>24|t<<8)>>>0&16777215;t=t>>16&65535,e=(16777215&e)+6777216*r+6710656*t,r+=8147497*t,t*=2,1e7<=e&&(r+=Math.floor(e/1e7),e%=1e7),1e7<=r&&(t+=Math.floor(r/1e7),r%=1e7);var i=jspb.utils.DIGITS,o=!1,a="";return(t||o)&&n(t),(r||o)&&n(r),(e||o)&&n(e),a},jspb.utils.joinSignedDecimalString=function(e,t){var n=2147483648&t;return n&&(e=1+~e>>>0,t=~t+(0==e?1:0)>>>0),e=jspb.utils.joinUnsignedDecimalString(e,t),n?"-"+e:e},jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var n=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(e,n):jspb.utils.joinUnsignedDecimalString(e,n)},jspb.utils.hash64ArrayToDecimalStrings=function(e,t){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]=jspb.utils.hash64ToDecimalString(e[r],t);return n},jspb.utils.decimalStringToHash64=function(e){function t(e,t){for(var n=0;8>n&&(1!==e||0<t);n++)t=e*r[n]+t,r[n]=255&t,t>>>=8}goog.asserts.assert(0<e.length);var n=!1;"-"===e[0]&&(n=!0,e=e.slice(1));for(var r=[0,0,0,0,0,0,0,0],i=0;i<e.length;i++)t(10,jspb.utils.DIGITS.indexOf(e[i]));return n&&(function(){for(var e=0;8>e;e++)r[e]=255&~r[e]}(),t(1,1)),goog.crypt.byteArrayToString(r)},jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))},jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0",t[1]="x";for(var n=0;8>n;n++){var r=e.charCodeAt(7-n);t[2*n+2]=jspb.utils.DIGITS[r>>4],t[2*n+3]=jspb.utils.DIGITS[15&r]}return t.join("")},jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase(),goog.asserts.assert(18==e.length),goog.asserts.assert("0"==e[0]),goog.asserts.assert("x"==e[1]);for(var t="",n=0;8>n;n++){var r=jspb.utils.DIGITS.indexOf(e[2*n+2]),i=jspb.utils.DIGITS.indexOf(e[2*n+3]);t=String.fromCharCode(16*r+i)+t}return t},jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var n=jspb.utils.split64High;return t?jspb.utils.joinInt64(e,n):jspb.utils.joinUint64(e,n)},jspb.utils.numberToHash64=function(e){return jspb.utils.splitInt64(e),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(e,t,n){for(var r=0,i=t;i<n;i++)r+=e[i]>>7;return n-t-r},jspb.utils.countVarintFields=function(e,t,n,r){var i=0;if(128>(r=8*r+jspb.BinaryConstants.WireType.VARINT))for(;t<n&&e[t++]==r;)for(i++;;){var o=e[t++];if(0==(128&o))break}else for(;t<n;){for(o=r;128<o;){if(e[t]!=(127&o|128))return i;t++,o>>=7}if(e[t++]!=o)break;for(i++;0!=(128&(o=e[t++])););}return i},jspb.utils.countFixedFields_=function(e,t,n,r,i){var o=0;if(128>r)for(;t<n&&e[t++]==r;)o++,t+=i;else for(;t<n;){for(var a=r;128<a;){if(e[t++]!=(127&a|128))return o;a>>=7}if(e[t++]!=a)break;o++,t+=i}return o},jspb.utils.countFixed32Fields=function(e,t,n,r){return jspb.utils.countFixedFields_(e,t,n,8*r+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(e,t,n,r){return jspb.utils.countFixedFields_(e,t,n,8*r+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(e,t,n,r){var i=0;for(r=8*r+jspb.BinaryConstants.WireType.DELIMITED;t<n;){for(var o=r;128<o;){if(e[t++]!=(127&o|128))return i;o>>=7}if(e[t++]!=o)break;i++;for(var a=0,s=1;o=e[t++],a+=(127&o)*s,s*=128,0!=(128&o););t+=a}return i},jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var n=0;n<e.length;n++)t+="\\x",16>e[n]&&(t+="0"),t+=e[n].toString(16)}return t+'"'},jspb.utils.debugScalarToTextFormat=function(e){return goog.isString(e)?goog.string.quote(e):e.toString()},jspb.utils.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++){var r=e.charCodeAt(n);if(255<r)throw Error("Conversion error: string contains codepoint outside of byte range");t[n]=r}return t},jspb.utils.byteSourceToUint8Array=function(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||void 0!==Buffer&&e.constructor===Buffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?goog.crypt.base64.decodeStringToUint8Array(e):(goog.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryIterator=function(e,t,n){this.elements_=this.nextMethod_=this.decoder_=null,this.cursor_=0,this.nextValue_=null,this.atEnd_=!0,this.init_(e,t,n)},jspb.BinaryIterator.prototype.init_=function(e,t,n){e&&t&&(this.decoder_=e,this.nextMethod_=t),this.elements_=n||null,this.cursor_=0,this.nextValue_=null,this.atEnd_=!this.decoder_&&!this.elements_,this.next()},jspb.BinaryIterator.instanceCache_=[],jspb.BinaryIterator.alloc=function(e,t,n){if(jspb.BinaryIterator.instanceCache_.length){var r=jspb.BinaryIterator.instanceCache_.pop();return r.init_(e,t,n),r}return new jspb.BinaryIterator(e,t,n)},jspb.BinaryIterator.prototype.free=function(){this.clear(),100>jspb.BinaryIterator.instanceCache_.length&&jspb.BinaryIterator.instanceCache_.push(this)},jspb.BinaryIterator.prototype.clear=function(){this.decoder_&&this.decoder_.free(),this.elements_=this.nextMethod_=this.decoder_=null,this.cursor_=0,this.nextValue_=null,this.atEnd_=!0},jspb.BinaryIterator.prototype.get=function(){return this.nextValue_},jspb.BinaryIterator.prototype.atEnd=function(){return this.atEnd_},jspb.BinaryIterator.prototype.next=function(){var e=this.nextValue_;return this.decoder_?this.decoder_.atEnd()?(this.nextValue_=null,this.atEnd_=!0):this.nextValue_=this.nextMethod_.call(this.decoder_):this.elements_&&(this.cursor_==this.elements_.length?(this.nextValue_=null,this.atEnd_=!0):this.nextValue_=this.elements_[this.cursor_++]),e},jspb.BinaryDecoder=function(e,t,n){this.bytes_=null,this.tempHigh_=this.tempLow_=this.cursor_=this.end_=this.start_=0,this.error_=!1,e&&this.setBlock(e,t,n)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(e,t,n){if(jspb.BinaryDecoder.instanceCache_.length){var r=jspb.BinaryDecoder.instanceCache_.pop();return e&&r.setBlock(e,t,n),r}return new jspb.BinaryDecoder(e,t,n)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(e,t,n){this.bytes_=jspb.utils.byteSourceToUint8Array(e),this.start_=goog.isDef(t)?t:0,this.end_=goog.isDef(n)?this.start_+n:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e},jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e,goog.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64_=function(){for(var e,t,n=0,r=0;4>r;r++)if(e=this.bytes_[this.cursor_++],n|=(127&e)<<7*r,128>e)return this.tempLow_=n>>>0,void(this.tempHigh_=0);if(e=this.bytes_[this.cursor_++],n|=(127&e)<<28,t=0|(127&e)>>4,128>e)this.tempLow_=n>>>0,this.tempHigh_=t>>>0;else{for(r=0;5>r;r++)if(e=this.bytes_[this.cursor_++],t|=(127&e)<<7*r+3,128>e)return this.tempLow_=n>>>0,void(this.tempHigh_=t>>>0);goog.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0}},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var e=this.bytes_,t=e[this.cursor_+0],n=127&t;return 128>t?(this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),n):(t=e[this.cursor_+1],n|=(127&t)<<7,128>t?(this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),n):(t=e[this.cursor_+2],n|=(127&t)<<14,128>t?(this.cursor_+=3,goog.asserts.assert(this.cursor_<=this.end_),n):(t=e[this.cursor_+3],n|=(127&t)<<21,128>t?(this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),n):(t=e[this.cursor_+4],n|=(15&t)<<28,128>t?(this.cursor_+=5,goog.asserts.assert(this.cursor_<=this.end_),n>>>0):(this.cursor_+=5,128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&goog.asserts.assert(!1),goog.asserts.assert(this.cursor_<=this.end_),n)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=jspb.BinaryDecoder.prototype.readUnsignedVarint32,jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(1&e)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64_(),jspb.utils.joinUint64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64_(),jspb.utils.joinUnsignedDecimalString(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64_(),jspb.utils.joinInt64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64_(),jspb.utils.joinSignedDecimalString(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64_(),jspb.utils.joinZigzag64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readZigzagVarint64().toString()},jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],n=this.bytes_[this.cursor_+2],r=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8|n<<16|r<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)},jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),e<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],n=this.bytes_[this.cursor_+2],r=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8|n<<16|r<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)},jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readFloat=function(){var e=this.readUint32();return jspb.utils.joinFloat32(e,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,n=this.cursor_;e=n+e;for(var r=[],i="";n<e;){var o=t[n++];if(128>o)r.push(o);else{if(192>o)continue;if(224>o){var a=t[n++];r.push((31&o)<<6|63&a)}else if(240>o){a=t[n++];var s=t[n++];r.push((15&o)<<12|(63&a)<<6|63&s)}else if(248>o){a=t[n++],s=t[n++];var u=t[n++];o=(7&o)<<18|(63&a)<<12|(63&s)<<6|63&u,o-=65536,r.push(55296+(o>>10&1023),56320+(1023&o))}}8192<=r.length&&(i+=String.fromCharCode.apply(null,r),r.length=0)}return i+=goog.crypt.byteArrayToString(r),this.cursor_=n,i},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)},jspb.BinaryDecoder.prototype.readBytes=function(e){if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,goog.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);return this.cursor_+=e,goog.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64_(),jspb.utils.joinHash64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3],a=e[t+4],s=e[t+5],u=e[t+6];return e=e[t+7],this.cursor_+=8,String.fromCharCode(n,r,i,o,a,s,u,e)},jspb.BinaryReader=function(e,t,n){this.decoder_=jspb.BinaryDecoder.alloc(e,t,n),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(e,t,n){if(jspb.BinaryReader.instanceCache_.length){var r=jspb.BinaryReader.instanceCache_.pop();return e&&r.decoder_.setBlock(e,t,n),r}return new jspb.BinaryReader(e,t,n)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(e,t,n){this.decoder_.setBlock(e,t,n),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return goog.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e=this.decoder_.readUnsignedVarint32(),t=e>>>3;return(e&=7)!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP?(goog.asserts.fail("Invalid wire type: %s (at position %s)",e,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=t,this.nextWireType_=e,!0)},jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(goog.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)goog.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(goog.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(goog.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var e=this.nextField_;;){if(!this.nextField()){goog.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=e&&(goog.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:goog.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(e,t){goog.isNull(this.readCallbacks_)&&(this.readCallbacks_={}),goog.asserts.assert(!this.readCallbacks_[e]),this.readCallbacks_[e]=t},jspb.BinaryReader.prototype.runReadCallback=function(e){return goog.asserts.assert(!goog.isNull(this.readCallbacks_)),e=this.readCallbacks_[e],goog.asserts.assert(e),e(this)},jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e);var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64();case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString();case t.GROUP:goog.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:goog.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes();case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32();case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:goog.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(e,t){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var n=this.decoder_.getEnd(),r=this.decoder_.readUnsignedVarint32();r=this.decoder_.getCursor()+r,this.decoder_.setEnd(r),t(e,this),this.decoder_.setCursor(r),this.decoder_.setEnd(n)},jspb.BinaryReader.prototype.readGroup=function(e,t,n){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),goog.asserts.assert(this.nextField_==e),n(t,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(goog.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},jspb.BinaryReader.prototype.getFieldDecoder=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),n=t+e;return e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e),this.decoder_.setCursor(n),e},jspb.BinaryReader.prototype.readInt32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},jspb.BinaryReader.prototype.readInt32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readInt64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readUint32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},jspb.BinaryReader.prototype.readUint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},jspb.BinaryReader.prototype.readSint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},jspb.BinaryReader.prototype.readSint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},jspb.BinaryReader.prototype.readFixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},jspb.BinaryReader.prototype.readFixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},jspb.BinaryReader.prototype.readSfixed32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},jspb.BinaryReader.prototype.readSfixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},jspb.BinaryReader.prototype.readDouble=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},jspb.BinaryReader.prototype.readBool=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readEnum=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readString=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)},jspb.BinaryReader.prototype.readBytes=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)},jspb.BinaryReader.prototype.readVarintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readFixedHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readPackedField_=function(e){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();t=this.decoder_.getCursor()+t;for(var n=[];this.decoder_.getCursor()<t;)n.push(e.call(this.decoder_));return n},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.Map=function(e,t){this.arr_=e,this.valueCtor_=t,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()};jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],n=t[0];this.map_[n.toString()]=new jspb.Map.Entry_(n,t[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e,t=this.map_;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e].valueWrapper;n&&n.toArray()}}}else{for(this.arr_.length=0,t=this.stringKeys_(),t.sort(),e=0;e<t.length;e++){var r=this.map_[t[e]];(n=r.valueWrapper)&&n.toArray(),this.arr_.push([r.key,r.value])}this.arrClean=!0}return this.arr_},jspb.Map.prototype.toObject=function(e,t){for(var n=this.toArray(),r=[],i=0;i<n.length;i++){var o=this.map_[n[i][0].toString()];this.wrapEntry_(o);var a=o.valueWrapper;a?(goog.asserts.assert(t),r.push([o.key,t(e,a)])):r.push([o.key,o.value])}return r},jspb.Map.fromObject=function(e,t,n){t=new jspb.Map([],t);for(var r=0;r<e.length;r++){var i=e[r][0],o=n(e[r][1]);t.set(i,o)}return t},jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0,this.arr_=e},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},"undefined"!=typeof Symbol&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);return delete this.map_[e],this.arrClean=!1,t},jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++){var r=this.map_[t[n]];e.push([r.key,r.value])}return e},jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++){var r=this.map_[t[n]];e.push([r.key,this.wrapEntry_(r)])}return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++)e.push(this.map_[t[n]].key);return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++)e.push(this.wrapEntry_(this.map_[t[n]]));return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.forEach=function(e,t){var n=this.stringKeys_();n.sort();for(var r=0;r<n.length;r++){var i=this.map_[n[r]];e.call(t,this.wrapEntry_(i),i.key,this)}},jspb.Map.prototype.set=function(e,t){var n=new jspb.Map.Entry_(e);return this.valueCtor_?(n.valueWrapper=t,n.value=t.toArray()):n.value=t,this.map_[e.toString()]=n,this.arrClean=!1,this},jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value},jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)},jspb.Map.prototype.has=function(e){return e.toString()in this.map_},jspb.Map.prototype.serializeBinary=function(e,t,n,r,i){var o=this.stringKeys_();o.sort();for(var a=0;a<o.length;a++){var s=this.map_[o[a]];t.beginSubMessage(e),n.call(t,1,s.key),this.valueCtor_?r.call(t,2,this.wrapEntry_(s),i):r.call(t,2,s.value),t.endSubMessage()}},jspb.Map.deserializeBinary=function(e,t,n,r,i,o){for(var a=void 0;t.nextField()&&!t.isEndGroup();){var s=t.getFieldNumber();1==s?o=n.call(t):2==s&&(e.valueCtor_?(goog.asserts.assert(i),a=new e.valueCtor_,r.call(t,a,i)):a=r.call(t))}goog.asserts.assert(void 0!=o),goog.asserts.assert(void 0!=a),e.set(o,a)},jspb.Map.prototype.stringKeys_=function(){var e,t=this.map_,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n},jspb.Map.Entry_=function(e,t){this.key=e,this.value=t,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(e,t,n,r,i){this.fieldIndex=e,this.fieldName=t,this.ctor=n,this.toObjectFn=r,this.isRepeated=i},jspb.ExtensionFieldBinaryInfo=function(e,t,n,r,i,o){this.fieldInfo=e,this.binaryReaderFn=t,this.binaryWriterFn=n,this.binaryMessageSerializeFn=r,this.binaryMessageDeserializeFn=i,this.isPacked=o},jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},jspb.Message=function(){},jspb.Message.GENERATE_TO_OBJECT=!0,jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array,jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},jspb.Message.getIndex_=function(e,t){return t+e.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(e,t){return t-e.arrayIndexOffset_},jspb.Message.initialize=function(e,t,n,r,i,o){if(e.wrappers_=null,t||(t=n?[n]:[]),e.messageId_=n?String(n):void 0,e.arrayIndexOffset_=0===n?-1:0,e.array=t,jspb.Message.initPivotAndExtensionObject_(e,r),e.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(e.repeatedFields=i),i)for(t=0;t<i.length;t++)n=i[t],n<e.pivot_?(n=jspb.Message.getIndex_(e,n),e.array[n]=e.array[n]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[n]=e.extensionObject_[n]||jspb.Message.EMPTY_LIST_SENTINEL_);if(o&&o.length)for(t=0;t<o.length;t++)jspb.Message.computeOneofCase(e,o[t])},jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(e){return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:goog.isArray(e)},jspb.Message.isExtensionObject_=function(e){return!(null===e||"object"!=typeof e||jspb.Message.isArray_(e)||jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(e,t){var n=e.array.length,r=-1;if(n&&(r=n-1,n=e.array[r],jspb.Message.isExtensionObject_(n)))return e.pivot_=jspb.Message.getFieldNumber_(e,r),void(e.extensionObject_=n);-1<t?(e.pivot_=Math.max(t,jspb.Message.getFieldNumber_(e,r+1)),e.extensionObject_=null):e.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(e){var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})},jspb.Message.toObjectList=function(e,t,n){for(var r=[],i=0;i<e.length;i++)r[i]=t.call(e[i],n,e[i]);return r},jspb.Message.toObjectExtension=function(e,t,n,r,i){for(var o in n){var a=n[o],s=r.call(e,a);if(null!=s){for(var u in a.fieldName)if(a.fieldName.hasOwnProperty(u))break;t[u]=a.toObjectFn?a.isRepeated?jspb.Message.toObjectList(s,a.toObjectFn,i):a.toObjectFn(i,s):s}}},jspb.Message.serializeBinaryExtensions=function(e,t,n,r){for(var i in n){var o=n[i],a=o.fieldInfo;if(!o.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var s=r.call(e,a);if(null!=s)if(a.isMessageType()){if(!o.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");o.binaryWriterFn.call(t,a.fieldIndex,s,o.binaryMessageSerializeFn)}else o.binaryWriterFn.call(t,a.fieldIndex,s)}},jspb.Message.readBinaryExtension=function(e,t,n,r,i){var o=n[t.getFieldNumber()];if(o){if(n=o.fieldInfo,!o.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(n.isMessageType()){var a=new n.ctor;o.binaryReaderFn.call(t,a,o.binaryMessageDeserializeFn)}else a=o.binaryReaderFn.call(t);n.isRepeated&&!o.isPacked?(t=r.call(e,n))?t.push(a):i.call(e,n,[a]):i.call(e,n,a)}else t.skipField()},jspb.Message.getField=function(e,t){if(t<e.pivot_){t=jspb.Message.getIndex_(e,t);var n=e.array[t];return n===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[t]=[]:n}if(e.extensionObject_)return n=e.extensionObject_[t],n===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:n},jspb.Message.getRepeatedField=function(e,t){return jspb.Message.getField(e,t)},jspb.Message.getOptionalFloatingPointField=function(e,t){return e=jspb.Message.getField(e,t),null==e?e:+e},jspb.Message.getBooleanField=function(e,t){return e=jspb.Message.getField(e,t),null==e?e:!!e},jspb.Message.getRepeatedFloatingPointField=function(e,t){var n=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var r=0;r<n.length;r++)n[r]=+n[r];e.convertedPrimitiveFields_[t]=!0}return n},jspb.Message.getRepeatedBooleanField=function(e,t){var n=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var r=0;r<n.length;r++)n[r]=!!n[r];e.convertedPrimitiveFields_[t]=!0}return n},jspb.Message.bytesAsB64=function(e){return null==e||goog.isString(e)?e:jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array?goog.crypt.base64.encodeByteArray(e):(goog.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e)),null)},jspb.Message.bytesAsU8=function(e){return null==e||e instanceof Uint8Array?e:goog.isString(e)?goog.crypt.base64.decodeStringToUint8Array(e):(goog.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e)),null)},jspb.Message.bytesListAsB64=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||goog.isString(e[0])?e:goog.array.map(e,jspb.Message.bytesAsB64)},jspb.Message.bytesListAsU8=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)},jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0]);goog.array.forEach(e,function(e){goog.typeOf(e)!=t&&goog.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)})}},jspb.Message.getFieldWithDefault=function(e,t,n){return e=jspb.Message.getField(e,t),null==e?n:e},jspb.Message.getBooleanFieldWithDefault=function(e,t,n){return e=jspb.Message.getBooleanField(e,t),null==e?n:e},jspb.Message.getFloatingPointFieldWithDefault=function(e,t,n){return e=jspb.Message.getOptionalFloatingPointField(e,t),null==e?n:e},jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,jspb.Message.getMapField=function(e,t,n,r){if(e.wrappers_||(e.wrappers_={}),t in e.wrappers_)return e.wrappers_[t];var i=jspb.Message.getField(e,t);if(!i){if(n)return;i=[],jspb.Message.setField(e,t,i)}return e.wrappers_[t]=new jspb.Map(i,r)},jspb.Message.setField=function(e,t,n){t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=n:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=n)},jspb.Message.setProto3IntField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,0)},jspb.Message.setProto3FloatField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,0)},jspb.Message.setProto3BooleanField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,!1)},jspb.Message.setProto3StringField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,"")},jspb.Message.setProto3BytesField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,"")},jspb.Message.setProto3EnumField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,0)},jspb.Message.setProto3StringIntField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,"0")},jspb.Message.setFieldIgnoringDefault_=function(e,t,n,r){n!==r?jspb.Message.setField(e,t,n):e.array[jspb.Message.getIndex_(e,t)]=null},jspb.Message.addToRepeatedField=function(e,t,n,r){e=jspb.Message.getRepeatedField(e,t),void 0!=r?e.splice(r,0,n):e.push(n)},jspb.Message.setOneofField=function(e,t,n,r){(n=jspb.Message.computeOneofCase(e,n))&&n!==t&&void 0!==r&&(e.wrappers_&&n in e.wrappers_&&(e.wrappers_[n]=void 0),jspb.Message.setField(e,n,void 0)),jspb.Message.setField(e,t,r)},jspb.Message.computeOneofCase=function(e,t){for(var n,r,i=0;i<t.length;i++){var o=t[i],a=jspb.Message.getField(e,o);null!=a&&(n=o,r=a,jspb.Message.setField(e,o,void 0))}return n?(jspb.Message.setField(e,n,r),n):0},jspb.Message.getWrapperField=function(e,t,n,r){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[n]){var i=jspb.Message.getField(e,n);(r||i)&&(e.wrappers_[n]=new t(i))}return e.wrappers_[n]},jspb.Message.getRepeatedWrapperField=function(e,t,n){return jspb.Message.wrapRepeatedField_(e,t,n),t=e.wrappers_[n],t==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[n]=[]),t},jspb.Message.wrapRepeatedField_=function(e,t,n){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[n]){for(var r=jspb.Message.getRepeatedField(e,n),i=[],o=0;o<r.length;o++)i[o]=new t(r[o]);e.wrappers_[n]=i}},jspb.Message.setWrapperField=function(e,t,n){e.wrappers_||(e.wrappers_={});var r=n?n.toArray():n;e.wrappers_[t]=n,jspb.Message.setField(e,t,r)},jspb.Message.setOneofWrapperField=function(e,t,n,r){e.wrappers_||(e.wrappers_={});var i=r?r.toArray():r;e.wrappers_[t]=r,jspb.Message.setOneofField(e,t,n,i)},jspb.Message.setRepeatedWrapperField=function(e,t,n){e.wrappers_||(e.wrappers_={}),n=n||[];for(var r=[],i=0;i<n.length;i++)r[i]=n[i].toArray();e.wrappers_[t]=n,jspb.Message.setField(e,t,r)},jspb.Message.addToRepeatedWrapperField=function(e,t,n,r,i){jspb.Message.wrapRepeatedField_(e,r,t);var o=e.wrappers_[t];return o||(o=e.wrappers_[t]=[]),n=n||new r,e=jspb.Message.getRepeatedField(e,t),void 0!=i?(o.splice(i,0,n),e.splice(i,0,n.toArray())):(o.push(n),e.push(n.toArray())),n},jspb.Message.toMap=function(e,t,n,r){for(var i={},o=0;o<e.length;o++)i[t.call(e[o])]=n?n.call(e[o],r,e[o]):e[o];return i},jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){var t=this.wrappers_[e];if(goog.isArray(t))for(var n=0;n<t.length;n++)t[n]&&t[n].toArray();else t&&t.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(e){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],function(t){return new e.ctor(t)})),this.wrappers_[t]}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}},jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var n=e.fieldIndex;return e.isRepeated?(t=t||[],e.isMessageType()?(this.wrappers_[n]=t,this.extensionObject_[n]=goog.array.map(t,function(e){return e.toArray()})):this.extensionObject_[n]=t):e.isMessageType()?(this.wrappers_[n]=t,this.extensionObject_[n]=t?t.toArray():t):this.extensionObject_[n]=t,this},jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var n=e.toArray();t=t.toArray();var r=[],i=0,o=n.length>t.length?n.length:t.length;for(e.getJsPbMessageId()&&(r[0]=e.getJsPbMessageId(),i=1);i<o;i++)jspb.Message.compareFields(n[i],t[i])||(r[i]=t[i]);return new e.constructor(r)},jspb.Message.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())},jspb.Message.compareExtensions=function(e,t){e=e||{},t=t||{};var n,r={};for(n in e)r[n]=0;for(n in t)r[n]=0;for(n in r)if(!jspb.Message.compareFields(e[n],t[n]))return!1;return!0},jspb.Message.compareFields=function(e,t){if(e==t)return!0;if(!goog.isObject(e)||!goog.isObject(t))return!!(goog.isNumber(e)&&isNaN(e)||goog.isNumber(t)&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}if(e.constructor===Array){var r=void 0,i=void 0,o=Math.max(e.length,t.length);for(n=0;n<o;n++){var a=e[n],s=t[n];if(a&&a.constructor==Object&&(goog.asserts.assert(void 0===r),goog.asserts.assert(n===e.length-1),r=a,a=void 0),s&&s.constructor==Object&&(goog.asserts.assert(void 0===i),goog.asserts.assert(n===t.length-1),i=s,s=void 0),!jspb.Message.compareFields(a,s))return!1}return!r&&!i||(r=r||{},i=i||{},jspb.Message.compareExtensions(r,i))}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")},jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)},jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))},jspb.Message.copyInto=function(e,t){goog.asserts.assertInstanceof(e,jspb.Message),goog.asserts.assertInstanceof(t,jspb.Message),goog.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type."),e=jspb.Message.clone(e);for(var n=t.toArray(),r=e.toArray(),i=n.length=0;i<r.length;i++)n[i]=r[i];t.wrappers_=e.wrappers_,t.extensionObject_=e.extensionObject_},jspb.Message.clone_=function(e){if(goog.isArray(e)){for(var t=Array(e.length),n=0;n<e.length;n++){var r=e[n];null!=r&&(t[n]="object"==typeof r?jspb.Message.clone_(goog.asserts.assert(r)):r)}return t}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);t={};for(n in e)null!=(r=e[n])&&(t[n]="object"==typeof r?jspb.Message.clone_(goog.asserts.assert(r)):r);return t},jspb.Message.registerMessageType=function(e,t){jspb.Message.registry_[e]=t,t.messageId=e},jspb.Message.registry_={},jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.arith={},jspb.arith.UInt64=function(e,t){this.lo=e,this.hi=t},jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi},jspb.arith.UInt64.prototype.add=function(e){return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(e){return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(e,t){var n=65535&e;e>>>=16;var r=65535&t,i=t>>>16;for(t=n*r+65536*(n*i&65535)+65536*(e*r&65535),n=e*i+(n*i>>>16)+(e*r>>>16);4294967296<=t;)t-=4294967296,n+=1;return new jspb.arith.UInt64(t>>>0,n>>>0)},jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);return e=jspb.arith.UInt64.mul32x32(this.hi,e),e.hi=e.lo,e.lo=0,t.add(e)},jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),n=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0);for(var r=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),r=r.leftShift();for(;!r.zero();)0>=e.cmp(n)&&(t=t.add(r),n=n.sub(e)),e=e.rightShift(),r=r.rightShift();return[t,n]},jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();){t=t.div(10);var n=t[0];e=t[1].lo+e,t=n}return""==e&&(e="0"),e},jspb.arith.UInt64.fromString=function(e){for(var t=new jspb.arith.UInt64(0,0),n=new jspb.arith.UInt64(0,0),r=0;r<e.length;r++){if("0">e[r]||"9"<e[r])return null;var i=parseInt(e[r],10);n.lo=i,t=t.mul(10).add(n)}return t},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(e,t){this.lo=e,this.hi=t},jspb.arith.Int64.prototype.add=function(e){return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(e){return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var e=0!=(2147483648&this.hi),t=new jspb.arith.UInt64(this.lo,this.hi);return e&&(t=new jspb.arith.UInt64(0,0).sub(t)),(e?"-":"")+t.toString()},jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=jspb.arith.UInt64.fromString(e))?null:(t&&(e=new jspb.arith.UInt64(0,0).sub(e)),new jspb.arith.Int64(e.lo,e.hi))},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;return this.buffer_=[],e},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){for(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(t==Math.floor(t)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(t==Math.floor(t)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(e),this.writeUint32(t)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){for(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(127&e|128),e>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){if(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(127&e|128),e>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((e<<1^e>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarint64(parseInt(e,10))},jspb.BinaryEncoder.prototype.writeUint8=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&256>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&65536>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(-128<=e&&128>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(-32768<=e&&32768>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(e){goog.asserts.assert(e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(e),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(e){goog.asserts.assert(e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(e){goog.asserts.assert(goog.isBoolean(e)||goog.isNumber(e)),this.buffer_.push(e?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(e)},jspb.BinaryEncoder.prototype.writeBytes=function(e){this.buffer_.push.apply(this.buffer_,e)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(e){for(var t=this.buffer_.length,n=0;n<e.length;n++){var r=e.charCodeAt(n);if(128>r)this.buffer_.push(r);else if(2048>r)this.buffer_.push(r>>6|192),this.buffer_.push(63&r|128);else if(65536>r)if(55296<=r&&56319>=r&&n+1<e.length){var i=e.charCodeAt(n+1);56320<=i&&57343>=i&&(r=1024*(r-55296)+i-56320+65536,this.buffer_.push(r>>18|240),this.buffer_.push(r>>12&63|128),this.buffer_.push(r>>6&63|128),this.buffer_.push(63&r|128),n++)}else this.buffer_.push(r>>12|224),this.buffer_.push(r>>6&63|128),this.buffer_.push(63&r|128)}return this.buffer_.length-t},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t),this.blocks_.push(e),this.totalLength_+=t.length+e.length},jspb.BinaryWriter.prototype.beginDelimited_=function(e){return this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),e=this.encoder_.end(),this.blocks_.push(e),this.totalLength_+=e.length,e.push(this.totalLength_),e},jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop();for(t=this.totalLength_+this.encoder_.length()-t,goog.asserts.assert(0<=t);127<t;)e.push(127&t|128),t>>>=7,this.totalLength_++;e.push(t),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,n){this.appendUint8Array_(e.subarray(t,n))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,n){null!=e&&null!=t&&null!=n&&this.writeSerializedMessage(e,t,n)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){goog.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,n=t.length,r=0,i=0;i<n;i++){var o=t[i];e.set(o,r),r+=o.length}return t=this.encoder_.end(),e.set(t,r),r+=t.length,goog.asserts.assert(r==e.length),this.blocks_=[e],e},jspb.BinaryWriter.prototype.getResultBase64String=function(e){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),e)},jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))},jspb.BinaryWriter.prototype.endSubMessage=function(){goog.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){goog.asserts.assert(1<=e&&e==Math.floor(e)),this.encoder_.writeUnsignedVarint32(8*e+t)},jspb.BinaryWriter.prototype.writeAny=function(e,t,n){var r=jspb.BinaryConstants.FieldType;switch(e){case r.DOUBLE:this.writeDouble(t,n);break;case r.FLOAT:this.writeFloat(t,n);break;case r.INT64:this.writeInt64(t,n);break;case r.UINT64:this.writeUint64(t,n);break;case r.INT32:this.writeInt32(t,n);break;case r.FIXED64:this.writeFixed64(t,n);break;case r.FIXED32:this.writeFixed32(t,n);break;case r.BOOL:this.writeBool(t,n);break;case r.STRING:this.writeString(t,n);break;case r.GROUP:goog.asserts.fail("Group field type not supported in writeAny()");break;case r.MESSAGE:goog.asserts.fail("Message field type not supported in writeAny()");break;case r.BYTES:this.writeBytes(t,n);break;case r.UINT32:this.writeUint32(t,n);break;case r.ENUM:this.writeEnum(t,n);break;case r.SFIXED32:this.writeSfixed32(t,n);break;case r.SFIXED64:this.writeSfixed64(t,n);break;case r.SINT32:this.writeSint32(t,n);break;case r.SINT64:this.writeSint64(t,n);break;case r.FHASH64:this.writeFixedHash64(t,n);break;case r.VHASH64:this.writeVarintHash64(t,n);break;default:goog.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))},jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt32String=function(e,t){null!=t&&(t=parseInt(t,10),goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(e,t))},jspb.BinaryWriter.prototype.writeInt64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint32String=function(e,t){null!=t&&(t=parseInt(t,10),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))},jspb.BinaryWriter.prototype.writeUint64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(e,t))},jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(e,t))},jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&(goog.asserts.assert(+t>=-jspb.BinaryConstants.TWO_TO_63&&+t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64String_(e,t))},jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))},jspb.BinaryWriter.prototype.writeFixed64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))},jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))},jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))},jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeFloat=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))},jspb.BinaryWriter.prototype.writeDouble=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))},jspb.BinaryWriter.prototype.writeBool=function(e,t){null!=t&&(goog.asserts.assert(goog.isBoolean(t)||goog.isNumber(t)),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))},jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeString=function(e,t){null!=t&&(e=this.beginDelimited_(e),this.encoder_.writeString(t),this.endDelimited_(e))},jspb.BinaryWriter.prototype.writeBytes=function(e,t){null!=t&&(t=jspb.utils.byteSourceToUint8Array(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),this.appendUint8Array_(t))},jspb.BinaryWriter.prototype.writeMessage=function(e,t,n){null!=t&&(e=this.beginDelimited_(e),n(t,this),this.endDelimited_(e))},jspb.BinaryWriter.prototype.writeMessageSet=function(e,t,n){null!=t&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e),e=this.beginDelimited_(3),n(t,this),this.endDelimited_(e),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(e,t,n){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),n(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(t))};jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSignedVarint32_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeInt32String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSignedVarint64_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeInt64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUnsignedVarint32_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUint32String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUnsignedVarint64_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUint64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarint32_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarint64_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarint64String_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixed32(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixed64(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixed64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSfixed32(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSfixed64(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSfixed64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFloat(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeDouble(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeBool(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeEnum(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeString(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeBytes(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,n){if(null!=t)for(var r=0;r<t.length;r++){var i=this.beginDelimited_(e);n(t[r],this),this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,n){if(null!=t)for(var r=0;r<t.length;r++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),n(t[r],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)},jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixedHash64(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeVarintHash64(e,t[n])},jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSignedVarint32(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSignedVarint32(parseInt(t[n],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSignedVarint64(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++){var r=jspb.arith.Int64.fromString(t[n]);this.encoder_.writeSplitVarint64(r.lo,r.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint32(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint32(parseInt(t[n],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint64(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++){var r=jspb.arith.UInt64.fromString(t[n]);this.encoder_.writeSplitVarint64(r.lo,r.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarint32(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarint64(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarint64(parseInt(t[n],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeUint32(t[e])},jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeUint64(t[e])},jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++){var n=jspb.arith.UInt64.fromString(t[e]);this.encoder_.writeSplitFixed64(n.lo,n.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeInt32(t[e])},jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64(t[e])},jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64String(t[e])},jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeFloat(t[e])},jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeDouble(t[e])},jspb.BinaryWriter.prototype.writePackedBool=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),e=0;e<t.length;e++)this.encoder_.writeBool(t[e])},jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeEnum(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeFixedHash64(t[e])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeVarintHash64(t[n]);this.endDelimited_(e)}},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf}).call(exports,__webpack_require__(18),__webpack_require__(416).Buffer)},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,r):"string"==typeof t?l(e,t,n):h(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return s(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function c(e,t){if(s(t),e=i(e,t<0?0:0|p(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=i(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function d(e,t){var n=t.length<0?0:0|p(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=d(e,t),e}function h(e,t){if(o.isBuffer(t)){var n=0|p(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?i(e,0):d(e,t);if("Buffer"===t.type&&Q(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function y(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return K(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*a}else-1!==l&&(c-=c-l),l=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var d=!0,f=0;f<u;f++)if(o(e,c+f)!==o(t,f)){d=!1;break}if(d)return c}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function T(e,t,n,r){return Y(K(t,e.length-n),e,n,r)}function S(e,t,n,r){return Y(q(t),e,n,r)}function E(e,t,n,r){return S(e,t,n,r)}function k(e,t,n,r){return Y(z(t),e,n,r)}function A(e,t,n,r){return Y(G(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,l,d;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[i+1],128==(192&u)&&(d=(31&o)<<6|63&u)>127&&(a=d);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(d=(15&o)<<12|(63&u)<<6|63&c)>2047&&(d<55296||d>57343)&&(a=d);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(d=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&d<1114112&&(a=d)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return O(r)}function O(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=W(e[o]);return i}function j(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,i){return i||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,i){return i||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,n,r,52,8),n+8}function V(e){if(e=H(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function G(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function z(e){return J.toByteArray(V(e))}function Y(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function X(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var J=n(417),$=n(418),Q=n(419);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return u(null,e,t,n)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):v.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,u=Math.min(a,s),c=this.slice(r,i),l=e.slice(t,n),d=0;d<u;++d)if(c[d]!==l[d]){a=c[d],s=l[d];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),$.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),$.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),$.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),$.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:K(new o(e,r).toString()),u=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(18))},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function o(e,t,n){return 3*(t+n)/4-n}function a(e){var t,n,i=r(e),a=i[0],s=i[1],u=new f(o(e,a,s)),c=0,l=s>0?a-4:a;for(n=0;n<l;n+=4)t=d[e.charCodeAt(n)]<<18|d[e.charCodeAt(n+1)]<<12|d[e.charCodeAt(n+2)]<<6|d[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=d[e.charCodeAt(n)]<<2|d[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===s&&(t=d[e.charCodeAt(n)]<<10|d[e.charCodeAt(n+1)]<<4|d[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u}function s(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function u(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join("")}function c(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(u(e,o,o+16383>a?a:o+16383));return 1===r?(t=e[n-1],i.push(l[t>>2]+l[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")),i.join("")}t.byteLength=i,t.toByteArray=a,t.fromByteArray=c;for(var l=[],d=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,g=h.length;p<g;++p)l[p]=h[p],d[h.charCodeAt(p)]=p;d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+d>=1?f/u:f*Math.pow(2,1-d),t*u>=2&&(a++,u/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*u-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){/*! @name @nagra/videojs-shaka @version 0.5.0-nmp-14 @license MIT */
!function(t,r){e.exports=r(n(55))}(0,function(e){"use strict";function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function i(e){return"dash-audio-"+e}function o(e){var t="main";return"alternate"===e.role&&e.accessibilityPurpose&&"visually impaired"===e.accessibilityPurpose?t="main-desc":"dub"===e.role&&(t="translation"),t}function a(e){var t=e.language;return e.role&&(t+=" ("+e.role+")"),t}function s(e,t){return e.find(function(e){return a(e)===t.label})}function u(t,n,r){var u=t.audioTracks();u.length&&t.clearTracks(["audio"]);var c=n.getVariantTracks().find(function(e){return e.active}),l=c?r.find(function(e){return e.language===c.language&&(!e.role||c.roles.includes(e.role))}):r.find(function(e){return"main"===e.role})||r[0];r.forEach(function(n,r){n===l&&t.trigger("shakaaudiotrackchange",{language:n.language});var s;if(Array.isArray(n.labels))for(var c=0;c<n.labels.length;c++)if(n.labels[c].lang&&-1!==player.language().indexOf(n.labels[c].lang.toLowerCase())){s=n.labels[c];break}var d;d=s?s.text:Array.isArray(n.labels)&&1===n.labels.length?n.labels[0].text:a(n),u.addTrack(new e.AudioTrack({enabled:n===l,id:i(r),kind:o(n),label:d,language:n.language}))});var d=function(){for(var e=0;e<u.length;e++){var i=u[e];if(i.enabled){var o=s(r,i);if(o){t.trigger("shakaaudiotrackchange",{language:o.language}),n.selectAudioLanguage(o.language,o.role);continue}}}};u.addEventListener("change",d),n.addEventListener("unloading",function(){u.removeEventListener("change",d)})}function c(e,t){u(e,t,t.getAudioLanguagesAndRoles())}function l(e,t){var n=e.xCallback(e.xKeySystem,e.xSourceObject,e.body,e.licenseRequestType),r=new Promise(function(e,r){n.then(function(n){e({uri:t,originalUri:t,data:n,headers:[],fromCache:!1})}).catch(function(e){var t=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,v,e);r(t)})});return shaka.util.AbortableOperation.notAbortable(r)}function d(e,t,n,r,i){return n===shaka.net.NetworkingEngine.RequestType.LICENSE&&"http:callback-uri"===e?l(t,e):shaka.net.HttpFetchPlugin.parse(e,t,n,r,i)}function f(e,t,n,r,i){return n===shaka.net.NetworkingEngine.RequestType.LICENSE&&"http:callback-uri"===e?l(t,e):shaka.net.HttpXHRPlugin.parse(e,t,n,r,i)}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var h=function(){function e(e,t){this._player=e,this._shakaPlayer=t,this._trackDictionary=[],this._updateActiveTracksEventHandle=this._updateActiveShakaTextTrack.bind(this),this._handleTextTracksAdded(t.getTextTracks())}var t=e.prototype;return t.dispose=function(){this._player.textTracks().off("change",this._updateActiveTracksEventHandle),this._clearShakaTracks()},t._generateKindFromTrack=function(e){var t=e.roles;return t&&t.some(function(e){return"caption"===e})?"captions":"subtitles"},t._updateActiveShakaTextTrack=function(){for(var e,t=this._player.textTracks(),n=this,i=0;i<t.length;i+=1)!function(i){var o=t[i];if("showing"===o.mode){var a=r(n._trackDictionary,function(e){return e.textTrack===o});e=a?a.shakaTrack:null}}(i);e?(this._shakaPlayer.selectTextTrack(e),this._shakaPlayer.setTextTrackVisibility(!0)):this._shakaPlayer.setTextTrackVisibility(!1)},t._attachShakaTextTracksToVideojs=function(e){var t=this,n=e.map(function(e){var n;if(Array.isArray(e.labels))for(var r=0;r<e.labels.length;r++)if(e.labels[r].lang&&-1!==player.language().indexOf(e.labels[r].lang.toLowerCase())){n=e.labels[r];break}var i;return i=n?n.text:Array.isArray(e.labels)&&1===e.labels.length?e.labels[0].text:e.language||e.label,{shakaTrack:e,trackConfig:{label:i,language:e.language,srclang:e.language,kind:t._generateKindFromTrack(e),roles:e.roles}}}).map(function(e){var n,i=e.trackConfig,o=e.shakaTrack,a=r(t._trackDictionary,function(e){var t=e.textTrack.language===i.language&&e.textTrack.kind===i.kind&&e.textTrack.label===i.label;return e.shakaTrack.roles.length>0&&(t=t&&e.shakaTrack.roles===i.roles),t});return a||(n=t._player.addRemoteTextTrack(i,!1),t._trackDictionary.push({textTrack:n.track,shakaTrack:o})),n});this._player.textTracks().on("change",this._updateActiveTracksEventHandle);var i=this._trackDictionary.find(function(e){e.track;return e.shakaTrack.active});return this._player.textTracks().tracks_.forEach(function(e){e.mode=i&&e===i.textTrack?"showing":"disabled"}),n},t._handleTextTracksAdded=function(e){this._clearShakaTracks(),e.length&&this._attachShakaTextTracksToVideojs(e)},t._clearShakaTracks=function(){var e=this;this._trackDictionary.forEach(function(t){e._player.removeRemoteTextTrack(t.textTrack)}),this._trackDictionary=[]},e}(),p={ShakaTextTrackHandler:h},g=function(){function t(e,t){this._player=e,this._shakaPlayer=t,this._trackDictionary=[],this._loadedMetaListenerHandle=this._handlePlaybackMetadataLoadedForVideo.bind(this),this._player.one("loadedmetadata",this._loadedMetaListenerHandle),this._skipBandwidthRestrictions=!1,this._restrictionFromKeyStatusChangeApplied=!1,this._checkDeviceIfNeedWorkaround()&&(this._log("Apply workaround on Samsung Tizen TV."),this._enableVideoTrackWithLowestBandwidth())}var n=t.prototype;return n.dispose=function(){var e=this,t=[];this._trackDictionary.forEach(function(n){t.push(e._generateIdFromTrackIndex(n.track.id))}),this._trackDictionary=[],t.forEach(function(t){var n=e._player.videoTracks().getTrackById(t);n&&e._player.videoTracks().removeTrack(n)}),this._log("Removing BW restrictions"),this._shakaPlayer.configure("restrictions",void 0)},n._checkDeviceIfNeedWorkaround=function(){var e=!1;return this._isMultiVideoStream()&&this._isEncryptedStream()&&this._isTizenTV()&&(e=!0),e},n._isMultiVideoStream=function(){var e=[];return this._shakaPlayer.getVariantTracks().forEach(function(t){e.includes(t.label)||e.push(t.label)}),e.length>1},n._isEncryptedStream=function(){return""!==this._shakaPlayer.keySystem()},n._isTizenTV=function(){return/Tizen/i.test(window.navigator&&window.navigator.userAgent||"")},n._enableVideoTrackWithLowestBandwidth=function(){for(var e=-1,t=1/0,n="",r=this._shakaPlayer.getVariantTracks(),i=0;i<r.length;i++){var o=r[i];o.active&&(n=o.label),o.bandwidth<t&&(t=o.bandwidth,e=i)}var a=r[e].label;if(e>=0&&n!==a){var s=this._shakaPlayer.getStats().estimatedBandwidth,u=e;r.length>1&&s>r[e].bandwidth&&(u=this._findBandwidthClosestVarantTrack(a,s)),this._shakaPlayer.selectVariantTrack(r[u],!0,0)}},n._findBandwidthClosestVarantTrack=function(e,t){for(var n=this._shakaPlayer.getVariantTracks(),r=0,i=0,o=0;o<n.length;o++){var a=n[o];a.label===e&&a.bandwidth>i&&a.bandwidth<=t&&(i=a.bandwidth,r=o)}return r},n._removeShakaListener=function(e,t){this._shakaPlayer.removeEventListener(e,t)},n._find=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},n._generateIdFromTrackIndex=function(e){return"shaka-video-"+e},n._generateKindFromTrack=function(e){if(e.roles){if(e.roles.some(function(e){return"main"===e}))return e.roles.some(function(e){return"caption"===e})?"captions":e.roles.some(function(e){return"subtitle"===e})?"subtitle":"main";if(e.roles.some(function(e){return"commentary"===e}))return"commentary";if(e.roles.some(function(e){return"alternate"===e}))return"alternate";if(e.roles.some(function(e){return"sign"===e}))return"sign"}return""},n._videoTracksChangeHandler=function(){this._skipBandwidthRestrictions?this._skipBandwidthRestrictions=!1:this._restrictBandwidth()},n._onShakaDrmSessionUpdate=function(){var e=this;if(!this._restrictionFromKeyStatusChangeApplied){window.setTimeout(function(){e._restrictBandwidth()},1e3),this._removeShakaListener("drmsessionupdate",this._onShakaDrmSessionUpdate.bind(this)),this._restrictionFromKeyStatusChangeApplied=!0}},n._restrictBandwidth=function(){for(var e,t=this._player.videoTracks(),n=0;n<t.length&&t.length>1;n++){var r=t[n];if(r.selected){var i=this._findShakaVideoTrack(r);if(i){var o=this._shakaPlayer.getConfiguration();o.restrictions&&o.restrictions.minBandwidth===i.track.minBandwidth&&o.restrictions.maxBandwidth===i.track.maxBandwidth?this._log("Skip to apply bandwidth restrictions due to no change."):e={minBandwidth:i.track.minBandwidth,maxBandwidth:i.track.maxBandwidth}}}}this._log("Apply restrictions: "+JSON.stringify(e)),this._shakaPlayer.configure("restrictions",e)},n._isBandwidthRestrictionsApplied=function(){var e=!1,t=this._shakaPlayer.getConfiguration();return!t.restrictions||0===t.restrictions.minBandwidth&&t.restrictions.maxBandwidth===1/0||(e=!0),e},n._onShakaPlayerAdaptationEvent=function(){var e=this;if(this._isBandwidthRestrictionsApplied())this._removeShakaListener("adaptation",this._onShakaPlayerAdaptationEvent.bind(this));else{var t=[];this._trackDictionary.forEach(function(n){e._findVideoTrackWithLabel(n.label)||(t.push(n.label),e._log("remove video track with lable: "+n.label))});var n=[],r=!1;if(this._trackDictionary=this._trackDictionary.filter(function(i){var o=!t.includes(i.label);return o||(i.track.active&&(r=!0),n.push(e._generateIdFromTrackIndex(i.track.id))),o}),n.forEach(function(t){var n=e._player.videoTracks().getTrackById(t);n&&e._player.videoTracks().removeTrack(n)}),r){var i=this._findActiveTrackLabel(),o=this._findTrackIdWithLabel(i),a=this._player.videoTracks().getTrackById(o);a&&(this._log("Select new video track with label: "+i),a.selected=!0)}}},n._findTrackIdWithLabel=function(e){if(e)for(var t=0;t<this._trackDictionary.length;t++){var n=this._trackDictionary[t];if(n.label===e)return this._generateIdFromTrackIndex(n.track.id)}return null},n._findActiveTrackLabel=function(){for(var e=this._shakaPlayer.getVariantTracks(),t=0;t<e.length;t++)if(e[t].active)return e[t].label;return null},n._findShakaVideoTrack=function(e){var t=this;return this._find(this._trackDictionary,function(n){return t._generateIdFromTrackIndex(n.track.id)===e.id})},n._findVideoTrackWithLabel=function(e){for(var t=this._shakaPlayer.getVariantTracks(),n=0;n<t.length;n++)if(t[n].label&&t[n].label===e)return!0;return!1},n._isKPTStream=function(){return this._trackDictionary.length>1&&this._isEncryptedStream()},n._log=function(e){this._player.vjsPlayer.log((new Date).toISOString()+":"+e)},n._handlePlaybackMetadataLoadedForVideo=function(){var t=this,n=0;this._shakaPlayer.getVariantTracks().forEach(function(e){if(e.label){var r=t._find(t._trackDictionary,function(t){return t.label===e.label});r?(r.track.maxBandwidth=Math.max(r.track.maxBandwidth,e.bandwidth),r.track.minBandwidth=Math.min(r.track.minBandwidth,e.bandwidth),r.track.active=r.track.active||e.active):t._trackDictionary.push({label:e.label,track:{id:n++,roles:e.roles,language:e.language,accessibility:e.accessibility,minBandwidth:e.bandwidth,maxBandwidth:e.bandwidth,active:e.active}})}}),this._trackDictionary.forEach(function(n){var r=n.label;n.track.roles&&n.track.roles.length&&(r+=" ("+n.track.roles.join(", ")+")"),t._player.videoTracks().addTrack(new e.VideoTrack({selected:n.track.active,id:t._generateIdFromTrackIndex(n.track.id),kind:t._generateKindFromTrack(n),label:r,language:n.track.language}))}),this._tracksChangedListenerHandle=this._videoTracksChangeHandler.bind(this),this._player.videoTracks().addEventListener("change",this._tracksChangedListenerHandle),this._shakaPlayer.addEventListener("unloading",function(){t._player.videoTracks().removeEventListener("change",t._tracksChangedListenerHandle)}),this._isKPTStream()&&(this._log("Register listeners to handle Key Per Track stream."),this._shakaPlayer.addEventListener("adaptation",this._onShakaPlayerAdaptationEvent.bind(this)),this._shakaPlayer.addEventListener("drmsessionupdate",this._onShakaDrmSessionUpdate.bind(this)),this._skipBandwidthRestrictions=!0),this._player.videoTracks().trigger("change")},t}(),y={ShakaVideoTrackHandler:g},v=6999,m={xhrPlugin:f,fetchPlugin:d},b=e.getTech("Html5"),_=function(n){function r(t,r){var i;return i=n.call(this,t,r)||this,i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0),i.vjsPlayer=e(t.playerId),i.player_.ready(function(){i.player_.addClass("vjs-shaka")}),i._initLivePauseTimeUpdate(),i._initErrorClearing(),i._videoTrackHandler=null,i._textTrackHandler=null,i._previousError=null,i}t(r,n);var i=r.prototype;return i.createEl=function(){var e=this;return this.el_=b.prototype.createEl.apply(this,arguments),shaka.polyfill.installAll(),window.AbortController!==shaka.polyfill.AbortController&&shaka.net.HttpFetchPlugin.isSupported()&&(shaka.net.NetworkingEngine.registerScheme("http",m.fetchPlugin,shaka.net.NetworkingEngine.PluginPriority.PREFERRED),shaka.net.NetworkingEngine.registerScheme("https",m.fetchPlugin,shaka.net.NetworkingEngine.PluginPriority.PREFERRED)),shaka.net.NetworkingEngine.registerScheme("http",m.xhrPlugin,shaka.net.NetworkingEngine.PluginPriority.FALLBACK),shaka.net.NetworkingEngine.registerScheme("https",m.xhrPlugin,shaka.net.NetworkingEngine.PluginPriority.FALLBACK),this.shaka_=new shaka.Player,this.shaka_.attach(this.el_,!1),this.shaka_.addEventListener("buffering",function(t){e.vjsPlayer.el_&&(t.buffering?e.vjsPlayer.trigger("waiting"):e.vjsPlayer.paused()||e.vjsPlayer.trigger("playing"))}),this.shaka_.addEventListener("error",function(t){e.retriggerError(t.detail)}),this.el_.tech=this,this.el_},i.setSrc=function(e){var t=this;this._videoTrackHandler&&this._videoTrackHandler.dispose(),this._textTrackHandler&&this._textTrackHandler.dispose();this.shaka_.load(e,void 0,"application/dash+xml").then(function(){t.initShakaMenus(t)}).catch(t._reinjectErrorToListeners.bind(this))},i.duration=function(){var e=this.shaka_.seekRange(),t=e.end-e.start;return this.shaka_.isLive()?-t:t},i.seekable=function(){var e=this.shaka_.seekRange();return{length:1,start:function(){return e.start},end:function(){return e.end}}},i.dispose=function(){this.shaka_&&(this.shaka_.unload(),this.shaka_.destroy()),this._stopLivePauseTimeUpdates(),n.prototype.dispose.call(this)},i.initShakaMenus=function(e){e._textTrackHandler=new p.ShakaTextTrackHandler(e,e.shaka_),c(e,e.shaka_),e._videoTrackHandler=new y.ShakaVideoTrackHandler(e,e.shaka_)},i._reinjectErrorToListeners=function(e){this.vjsPlayer&&this.vjsPlayer.otvtoolkit()&&this.vjsPlayer.otvtoolkit().errorReporting&&this.vjsPlayer.otvtoolkit().errorReporting.listener&&this.vjsPlayer.otvtoolkit().errorReporting.listener.errorChanged(e.severity,e.category,e.code,e.message),this.retriggerError(e)},i.retriggerError=function(e){var t;if(e.message&&(e.message.indexOf("UNSUPPORTED")>-1||e.message.indexOf("NOT_SUPPORTED")>-1))t=4;else switch(e.category){case shaka.util.Error.Category.NETWORK:t=2;break;case shaka.util.Error.Category.TEXT:case shaka.util.Error.Category.MEDIA:case shaka.util.Error.Category.MANIFEST:t=3;break;case shaka.util.Error.Category.STREAMING:t=1;break;case shaka.util.Error.Category.DRM:t=5;break;case shaka.util.Error.Category.PLAYER:case shaka.util.Error.Category.CAST:case shaka.util.Error.Category.STORAGE:t=0}if(e.severity===shaka.util.Error.Severity.CRITICAL){null!==this._previousError&&t!==this._previousError&&this._clearError(),this.vjsPlayer.error({code:t,message:e.code+" - "+e.message}),this._previousError=t;6007===e.code&&(this.vjsPlayer.pause(),this.vjsPlayer.otvtoolkit().reset())}},i._clearError=function(){this.vjsPlayer.error(null)},i._initLivePauseTimeUpdate=function(){this.vjsPlayer&&(this.vjsPlayer.on("play",this._stopLivePauseTimeUpdates.bind(this)),this.vjsPlayer.on("pause",this._startLivePauseTimeUpdates.bind(this)))},i._initErrorClearing=function(){this.vjsPlayer&&this.vjsPlayer.on("playing",this._clearError.bind(this))},i._startLivePauseTimeUpdates=function(){if(this.shaka_.isLive()){this.livePauseTimeUpdateInterval&&this._stopLivePauseTimeUpdates();var e=this.vjsPlayer;this.livePauseTimeUpdateInterval=this.vjsPlayer.setInterval(function(){e.trigger({type:"timeupdate",target:e,manuallyTriggered:!0})},250)}},i._stopLivePauseTimeUpdates=function(){this.vjsPlayer.clearInterval(this.livePauseTimeUpdateInterval)},r}(b);return _.defaultState={},_.VERSION="0.5.0-nmp-14",_.isSupported=function(){return!!window.MediaSource},_.canPlaySource=function(e,t){return/^(application\/dash\+xml|application\/x-mpegURL)/i.test(e.type)?"probably":""},e.getTech("Tech").registerTech("Shaka",_),_})},function(e,t,n){(function(t){e.exports=t.shaka=n(422)}).call(t,n(18))},function(e,t,n){(function(e){/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
!function(){var n="undefined"!=typeof window?window:e,r={};(function(e,t,n){function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function i(e,t){if(t)e:{var n=Sm;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&null!=t&&Tm(n,e,{configurable:!0,writable:!0,value:t})}}function o(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function a(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function s(e){if(!(e instanceof Array)){e=a(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function u(e,t){if(e.prototype=km(t.prototype),e.prototype.constructor=e,Om)Om(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Sh=t.prototype}function c(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function l(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function d(e,t){e.i={Oe:t,We:!0},e.g=e.m||e.j}function f(e,t,n){return e.g=n,{value:t}}function h(e){e.g=0}function p(e,t,n){e.m=t,void 0!=n&&(e.j=n)}function g(e){e.m=0,e.j=2}function y(e,t,n){e.g=t,e.m=n||0}function v(e,t){return e.m=t||0,t=e.i.Oe,e.i=null,t}function m(e){e.u=[e.i],e.m=0,e.j=0}function b(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.We?e.g=e.m||e.j:void 0!=n.B&&e.j<n.B?(e.g=n.B,e.i=null):e.g=e.j:e.g=t}function _(e){this.g=new c,this.h=e}function w(e,t){l(e.g);var n=e.g.l;return n?T(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),S(e))}function T(e,t,n,r){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.o=!1,i;var o=i.value}catch(t){return e.g.l=null,d(e.g,t),S(e)}return e.g.l=null,r.call(e.g,o),S(e)}function S(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,d(e.g,t)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.We)throw t.Oe;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function E(e){this.next=function(t){return l(e.g),e.g.l?t=T(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=S(e)),t},this.throw=function(t){return l(e.g),e.g.l?t=T(e,e.g.l.throw,t,e.g.s):(d(e.g,t),t=S(e)),t},this.return=function(t){return w(e,t)},this[Symbol.iterator]=function(){return this}}function k(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(r,i){function o(e){e.done?r(e.value):Promise.resolve(e.value).then(t,n).then(o,i)}o(e.next())})}function A(e){return k(new E(new _(e)))}function x(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function O(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{Ue:i,v:o}}return{Ue:-1,v:void 0}}function P(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function M(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}function I(e,t){e=e.split(".");var n=Mm;e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||void 0===t?n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}:n[r]=t}function j(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function D(e){return e.h/(1-Math.pow(e.g,e.i))}function R(){this.h=new j(2),this.j=new j(5),this.g=0,this.i=128e3,this.l=16e3}function L(){}function N(){}function F(){}function U(e){var t=x.apply(1,arguments);jm.has(e)||(jm.add(e),F.apply(L,s(t)))}function B(){}function V(){}function H(){}function W(){}function K(){}function q(){}function G(e){function t(){}Im=e,B=1<=Im?console.error.bind(console):t,V=2<=Im?console.warn.bind(console):t,H=3<=Im?console.info.bind(console):t,W=4<=Im?console.log.bind(console):t,K=5<=Im?console.debug.bind(console):t,q=6<=Im?console.debug.bind(console):t}function z(){e.console&&(F=function(){return console.warn.apply(console,s(x.apply(0,arguments)))},N=function(){return console.error.apply(console,s(x.apply(0,arguments)))},G(0))}function Y(e){if(Dm.has(e))return Dm.get(e);var t=MediaSource.isTypeSupported(e);return Dm.set(e,t),t}function X(){}function J(){}function $(){}function Q(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Z(e)==Z(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=te(e);t=te(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function Z(e){return e instanceof ArrayBuffer?e:e.buffer}function ee(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function te(e,t,n){return n=void 0===n?1/0:n,re(e,void 0===t?0:t,n,Uint8Array)}function ne(e,t,n){return n=void 0===n?1/0:n,re(e,void 0===t?0:t,n,DataView)}function re(e,t,n,r){var i=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,i)),new r(Z(e),t,Math.min(t+Math.max(n,0),i)-t)}function ie(){}function oe(e){this.h=new J,(e=Rm[e.toLowerCase()])&&(this.h=e()),this.g=new X,(e=Lm)&&(this.g=e())}function ae(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function se(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function ue(e,t,n){if(n||(n=ae),e.length!=t.length)return!1;t=t.slice();var r={};e=a(e);for(var i=e.next();!i.done;r={wd:r.wd},i=e.next()){if(r.wd=i.value,-1==(i=t.findIndex(function(e){return function(t){return n(e.wd,t)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function ce(e,t,n){if(n||(n=ae),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function le(e,t,n){this.startTime=e,this.endTime=t,this.T=n,this.region=new fe,this.position=null,this.I=Nm,this.size=0,this.textAlign=Fm,this.direction=Hm,this.writingMode=Wm,this.G=Km,this.j=null,this.ea="",this.s=qm,this.i=Bm,this.A=this.V=this.R=this.backgroundColor=this.l="",this.u=Xm,this.o=Jm,this.ca=this.X=this.m="",this.D=1,this.h=[],this.qa=this.L=this.K="",this.M=!0,this.id="",this.g=[],this.F=this.aa=!1,this.Y={Df:32,rows:15}}function de(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.T!=t.T)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!ce(e.g,t.g,de))return!1}else if("region"==n||"cellResolution"==n){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!ce(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}function fe(){this.id="",this.o=this.m=this.h=this.g=0,this.height=this.width=100,this.j=this.l=this.i=Qm,this.s=Zm}function he(){}function pe(e,t,n){eb[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,pd:t}}function ge(e,t){for(var n=e.toLowerCase().split(";")[0],r=a([ib,rb,nb,tb]),i=r.next();!i.done;i=r.next())if(i=eb[n+"-"+i.value]){var o=i.pd(),s=o.isSupported(e,t);if(o.destroy(),s)return i.pd}return null}/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
function ye(e){var t;e instanceof ye?(ve(this,e.Fa),this.Eb=e.Eb,this.Ja=e.Ja,me(this,e.Ub),this.Ba=e.Ba,be(this,e.g.clone()),this.qb=e.qb):e&&(t=String(e).match(ob))?(ve(this,t[1]||"",!0),this.Eb=_e(t[2]||""),this.Ja=_e(t[3]||"",!0),me(this,t[4]),this.Ba=_e(t[5]||"",!0),be(this,t[6]||"",!0),this.qb=_e(t[7]||"")):this.g=new Se(null)}function ve(e,t,n){e.Fa=n?_e(t,!0):t,e.Fa&&(e.Fa=e.Fa.replace(/:$/,""))}function me(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Ub=t}else e.Ub=null}function be(e,t,n){t instanceof Se?e.g=t:(n||(t=we(t,cb)),e.g=new Se(t))}function _e(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function we(e,t,n){return null!=e?(e=encodeURI(e).replace(t,Te),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Te(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function Se(e){this.g=e||null}function Ee(e){if(!e.oa&&(e.oa={},e.Tc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];o=decodeURIComponent(o.replace(/\+/g," ")),i=i||"",e.add(o,decodeURIComponent(i.replace(/\+/g," ")))}}function ke(e,t,n){var r=x.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1;var i,o=r="UNKNOWN";for(i in fb)fb[i]==this.category&&(r=i);for(var a in hb)hb[a]==this.code&&(o=a);if(this.message="Shaka Error "+r+"."+o+" ("+this.data.toString()+")",db)try{throw Error(this.message||"Shaka Error")}catch(e){this.stack=e.stack}for(var s in hb);}function Ae(e,t){return e.concat(t)}function xe(){}function Ce(e){return null!=e}function Oe(e,t){if(0==t.length)return e;var n=t.map(function(e){return new ye(e)});return e.map(function(e){return new ye(e)}).map(function(e){return n.map(function(t){return e.resolve(t)})}).reduce(Ae,[]).map(function(e){return e.toString()})}function Pe(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function Me(e,t){if(1==t.length)return t[0];if(null!=(e=Ie(e,t)))return e;throw new ke(2,4,4025,t)}function Ie(e,t){for(var n=a(vb[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var i=a(t),o=i.next();!o.done;o=i.next())if(o=o.value,r.test(o.trim()))return o.trim()}return e==pb?"":null}function je(){}function De(e,t){var n=e;return t&&!mb.includes(e)&&(n+='; codecs="'+t+'"'),n}function Re(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Le(e,t,n){var r=De(e,t);return t=Re(e,t),ge(t)?(e=ge(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?r.replace("video","audio"):r,n}function Ne(e){var t=Ue(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function Fe(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Ue(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}function Be(e){this.i=null,this.j=e,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.A="",this.o=new Map}function Ve(e){return!!bb[e]||("application/cea-608"==e||"application/cea-708"==e)&&!!Lm}function He(e,t,n,r){var i,o,a,s;return A(function(u){return 1==u.g?f(u,Promise.resolve(),2):e.i&&e.j?null==n||null==r?(e.i.parseInit(te(t)),u.return()):(i=e.u?n:e.s,o={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:i},a=e.i.parseMedia(te(t),o),s=a.filter(function(t){return t.startTime>=e.l&&t.startTime<e.m}),e.j.append(s),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),void h(u)):u.return()})}function We(e,t,n){e.l=t,e.m=n}function Ke(e,t,n){if(e.A=t,t=e.o.get(t))for(var r=a(t.keys()),i=r.next();!i.done;i=r.next())(i=t.get(i.value).filter(function(e){return e.endTime<=n}))&&e.j.append(i)}function qe(e,t,n){t.startTime+=n,t.endTime+=n,t=a(t.g);for(var r=t.next();!r.done;r=t.next())qe(e,r.value,n)}function Ge(e,t,n,r,i){var o=n+" "+r,s=new Map;t=a(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value;u=c.stream,c=c.cue,s.has(u)||s.set(u,new Map),s.get(u).has(o)||s.get(u).set(o,[]),qe(e,c,i),c.startTime>=e.l&&c.startTime<e.m&&(s.get(u).get(o).push(c),u==e.A&&e.j.append([c]))}for(i=a(s.keys()),o=i.next();!o.done;o=i.next())for(o=o.value,e.o.has(o)||e.o.set(o,new Map),t=a(s.get(o).keys()),u=t.next();!u.done;u=t.next())u=u.value,c=s.get(o).get(u),e.o.get(o).set(u,c);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}function ze(){}function Ye(e,t){return e=$e(e),t=$e(t),e.split("-")[0]==t.split("-")[0]}function Xe(e,t){return e=$e(e),t=$e(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function Je(e,t){return e=$e(e),t=$e(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function $e(e){var t=e.split("-x-"),n=t[0].split("-");return e=n[0]||"",n=n[1]||"",t=t[1]?"x-"+t[1]:"",e=e.toLowerCase(),e=_b.get(e)||e,n=n.toUpperCase(),(n?e+"-"+n:e)+(t?"-"+t:"")}function Qe(e,t){return e=$e(e),t=$e(t),t==e?4:Xe(t,e)?3:Je(t,e)?2:Xe(e,t)?1:0}function Ze(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=_b.get(e)||e}function et(e){return e.language?$e(e.language):e.audio&&e.audio.language?$e(e.audio.language):e.video&&e.video.language?$e(e.video.language):"und"}function tt(e,t){e=$e(e);var n=new Set,r=a(t);for(t=r.next();!t.done;t=r.next())n.add($e(t.value));for(r=a(n),t=r.next();!t.done;t=r.next())if((t=t.value)==e)return t;for(r=a(n),t=r.next();!t.done;t=r.next())if(t=t.value,Xe(t,e))return t;for(r=a(n),t=r.next();!t.done;t=r.next())if(t=t.value,Je(t,e))return t;for(n=a(n),t=n.next();!t.done;t=n.next())if(t=t.value,Xe(e,t))return t;return null}function nt(){this.g={}}function rt(e){this.h=e,this.g=null}function it(e){this.h=e,this.g=null}function ot(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function at(e){return""!=gt().canPlayType(e)}function st(){return!!navigator.userAgent.match(/Edge?\//)}function ut(){return pt("Xbox One")}function ct(){return pt("Tizen")}function lt(){return pt("Web0S")&&pt("Chrome/38.0.2125.122 Safari/537.36")}function dt(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!ct()&&!pt("PC=EOS")&&!pt("VirginMedia")&&!pt("SOPOpenBrowser")&&!ft()&&!pt("AFT")}function ft(){return pt("PlayStation 4")}function ht(){if(!dt())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e?parseInt(e[1],10):(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function pt(e){return(navigator.userAgent||"").includes(e)}function gt(){return Tb||(wb||(wb=new it(function(){Tb=null})),(Tb=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Tb=document.createElement("video")),wb.U(1),Tb)}function yt(){}function vt(e,t,n,r,i){var o=e.variants;(t.length||n.length)&&(o=_t(o,t,n)),o=Xt(o,r),t=mt(o),t=bt(t);var a=wt(t,i);e.variants=e.variants.filter(function(e){return Et(e)==a||(W("Dropping Variant (better codec available)",e),!1)})}function mt(e){var t=new nt;e=a(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=Et(n);t.push(r,n)}return t}function bt(e){var t=0,n=new Map,r=e.size();return e.forEach(function(e,i){i=a(i);for(var o=i.next();!o.done;o=i.next()){o=o.value;var s=o.video;if(s&&s.width&&s.height){s=s.width*s.height*(s.frameRate||1),n.has(s)||n.set(s,new nt);var u=n.get(s);u.push(e,o),u.size()===r&&(t=Math.max(t,s))}}}),t?n.get(t):e}function _t(e,t,n){var r={};t=a(t);for(var i=t.next();!i.done;r={Cd:r.Cd},i=t.next())if(r.Cd=i.value,i=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.Cd)}}(r)),i.length){e=i;break}for(r={},n=a(n),t=n.next();!t.done;r={vd:r.vd},t=n.next())if(r.vd=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.vd)}}(r)),t.length){e=t;break}return e}function wt(e,t){t=a(t);for(var n=t.next();!n.done;n=t.next())if((n=n.value)==kb||n==Ab){if(e=Tt(e,n),1==e.size())return e.keys()[0]}else if(n==xb)break;return St(e)}function Tt(e,t){var n=0,r=new nt;return e.forEach(function(e,i){for(var o=0,s=0,u=a(i),c=u.next();!c.done;c=u.next())c=c.value,c.decodingInfos.length&&(o+=c.decodingInfos[0][t]?1:0,s++);o/=s,W("codecs",e,"avg",t,o),o>n?(r.g={},r.push(e,i),n=o):o==n&&r.push(e,i)}),r}function St(e){var t="",n=1/0;return e.forEach(function(e,r){var i=0,o=0;r=a(r);for(var s=r.next();!s.done;s=r.next())i+=s.value.bandwidth||0,++o;i/=o,W("codecs",e,"avg bandwidth",i),i<n&&(t=e,n=i)}),t}function Et(e){var t="";e.video&&(t=Ne(e.video.codecs));var n="";return e.audio&&(n=Ne(e.audio.codecs)),t+"-"+n}function kt(e,t,n){e.variants=e.variants.filter(function(e){return At(e,t,n)})}function At(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;return!(i&&i.width&&i.height&&(!r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))||!r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function xt(e,t){return A(function(n){return 1==n.g?f(n,Ct(t,0<t.offlineSessionIds.length),2):(Rt(e,t),Lt(t),f(n,Nt(t),0))})}function Ct(e,t){return A(function(n){if(1==n.g)return f(n,Mt(e.variants,t,!1,[]),2);e.variants=e.variants.filter(function(e){var t=e.video;if(t){var n=Dt(t.codecs);if(t.codecs.includes(",")){var r=t.codecs.split(",");n=Me("video",r),n=Dt(n),r=Me("audio",r),r=jt(r);var i=Le(t.mimeType,r,"audio");if(!Y(i))return!1;n=[n,r].join()}if(r=Le(t.mimeType,n,"video"),!Y(r))return!1;t.codecs=n}if(n=e.audio){if(r=jt(n.codecs),i=Le(n.mimeType,r,"audio"),!Y(i))return!1;n.codecs=r}return ut()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&(t.codecs.includes("avc1.")||t.codecs.includes("avc3."))?(W("Dropping variant - not compatible with platform",Qt(e)),!1):((t=e.decodingInfos.some(function(e){return e.supported}))||W("Dropping variant - not compatible with platform",Qt(e)),t)}),h(n)})}function Ot(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=a(t);for(var r=t.next();!r.done;r=t.next()){var i=r.value;r=JSON.stringify(i),i=e[i],i instanceof Object?(i=Ot(i),n.push(r+":"+i)):(i=JSON.stringify(i),n.push(r+":"+i))}return"{"+n.join(",")+"}"}function Pt(e,t){var n,r,i,o;return A(function(a){switch(a.g){case 1:if(n=Ot(t),p(a,2),r=Sb,r[n]){q("Using cached results of mediaCapabilities.decodingInfo","for key",n),e.decodingInfos.push(r[n]),a.B(4);break}return f(a,navigator.mediaCapabilities.decodingInfo(t),5);case 5:i=a.h,r[n]=i,e.decodingInfos.push(i);case 4:y(a,0);break;case 2:o=v(a),H("MediaCapabilities.decodingInfo() failed.",JSON.stringify(t),o),h(a)}})}function Mt(e,t,n,r){var i,o,s,u,c,l,d,h,p,g,y,v,m,b,_,w,T;return A(function(S){switch(S.g){case 1:if(i=e.some(function(e){return e.decodingInfos.length}))return W("Already got the variants' decodingInfo."),S.return();o={},s=a(r),u=s.next();case 2:if(u.done){S.B(4);break}o.xd=u.value,c=!1,l=a(e),d=l.next();case 5:if(d.done){S.B(7);break}h=d.value,p=It(h,t,n).filter(function(e){return function(t){return(t.keySystemConfiguration&&t.keySystemConfiguration.keySystem)===e.xd}}(o)),g=a(p),y=g.next();case 8:if(y.done){S.B(10);break}return v=y.value,f(S,Pt(h,v),9);case 9:y=g.next(),S.B(8);break;case 10:h.decodingInfos.length&&(c=!0),d=l.next(),S.B(5);break;case 7:if(c)return S.return();o={xd:o.xd},u=s.next(),S.B(2);break;case 4:m=a(e),d=m.next();case 12:if(d.done){S.B(0);break}b=d.value,_=It(b,t,n).filter(function(e){return!(e=e.keySystemConfiguration&&e.keySystemConfiguration.keySystem)||!r.includes(e)}),w=a(_),y=w.next();case 15:if(y.done){d=m.next(),S.B(12);break}return T=y.value,f(S,Pt(b,T),16);case 16:y=w.next(),S.B(15)}})}function It(e,t,n){var r=e.audio,i=e.video;if(n={type:n?"file":"media-source"},i){var o=i.codecs;if(i.codecs.includes(",")){var s=i.codecs.split(",");o=Me("video",s),o=Dt(o),s=Me("audio",s),s=jt(s),s=Le(i.mimeType,s,"audio"),n.audio={contentType:s,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(o=Dt(o),o=Le(i.mimeType,o,"video"),n.video={contentType:o,width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||1},i.hdr)switch(i.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(r&&(o=jt(r.codecs),o=Le(r.mimeType,o,"audio"),n.audio={contentType:o,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio}),s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!s.length)return[n];e=[],o=new Map,s=a(s);for(var u=s.next();!u.done;u=s.next()){var c=u.value;o.get(c.keySystem)||o.set(c.keySystem,[]),o.get(c.keySystem).push(c)}s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],c=a(o.keys());for(var l=c.next();!l.done;l=c.next()){var d=l.value;l=Object.assign({},n);var f=o.get(d);for(d={keySystem:d,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},f=a(f),u=f.next();!u.done;u=f.next()){if(u=u.value,u.initData&&u.initData.length){for(var h=new Set,p=a(u.initData),g=p.next();!g.done;g=p.next())h.add(g.value.initDataType);1<h.size&&q("DrmInfo contains more than one initDataType,","and we use the initDataType of the first initData.",u),d.initDataType=u.initData[0].initDataType}u.distinctiveIdentifierRequired&&(d.distinctiveIdentifier="required"),u.persistentStateRequired&&(d.persistentState="required"),u.sessionType&&(d.sessionTypes=[u.sessionType]),r&&(""!=u.audioRobustness?d.audio?d.audio.robustness=d.audio.robustness||u.audioRobustness:d.audio={robustness:u.audioRobustness}:d.audio||(d.audio={})),i&&(""!=u.videoRobustness?d.video?d.video.robustness=d.video.robustness||u.videoRobustness:d.video={robustness:u.videoRobustness}:d.video||(d.video={}))}l.keySystemConfiguration=d,e.push(l)}return e}function jt(e){return"fLaC"===e?"flac":"Opus"===e?"opus":ct()&&"ac-3"==e.toLowerCase()?"ec-3":e}function Dt(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function Rt(e,t){t.variants=t.variants.filter(function(t){var n=t.audio;return t=t.video,n&&e&&e.audio&&!Ut(n,e.audio)?(W("Dropping variant - not compatible with active audio","active audio",Zt(e.audio),"variant.audio",Zt(n)),!1):!(t&&e&&e.video&&!Ut(t,e.video))||(W("Dropping variant - not compatible with active video","active video",Zt(e.video),"variant.video",Zt(t)),!1)})}function Lt(e){e.textStreams=e.textStreams.filter(function(e){var t=De(e.mimeType,e.codecs);return(t=Ve(t))||W("Dropping text stream. Is not supported by the platform.",e),t})}function Nt(e){var t,n,r,i,o,s,u,c;return A(function(l){switch(l.g){case 1:t=[],n=a(e.imageStreams),r=n.next();case 2:if(r.done){l.B(4);break}if(i=r.value,o=i.mimeType,Cb.has(o)){l.B(5);break}if(!(s=Ob.get(o))){Cb.set(o,!1),l.B(5);break}return f(l,Ft(s),7);case 7:u=l.h,Cb.set(o,u);case 5:(c=Cb.get(o))?t.push(i):W("Dropping image stream. Is not supported by the platform.",i),r=n.next(),l.B(2);break;case 4:e.imageStreams=t,h(l)}})}function Ft(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(2===n.height)}})}function Ut(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function Bt(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,i=n?n.mimeType:null,o=t?t.codecs:null,s=n?n.codecs:null,u=[];s&&u.push(s),o&&u.push(o);var c=[];n&&c.push(n.mimeType),t&&c.push(t.mimeType),c=c[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var d=new Set;if(t)for(var f=a(t.roles),h=f.next();!h.done;h=f.next())d.add(h.value);if(n)for(f=a(n.roles),h=f.next();!h.done;h=f.next())d.add(h.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:e.label,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:c,audioMimeType:r,videoMimeType:i,codecs:u.join(", "),audioCodec:o,videoCodec:s,primary:e.primary,roles:Array.from(d),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=e.label||t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Vt(e){return{id:e.id,active:!1,type:pb,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Ht(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var i=e.tilesLayout;return r&&(i=r.tilesLayout||i),i&&null!=t&&(t/=Number(i.split("x")[0])),i&&null!=n&&(n/=Number(i.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:i||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Wt(e){return e.__shaka_id||(e.__shaka_id=Eb++),e.__shaka_id}function Kt(e){var t=Gt(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),"subtitles"==e.kind&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function qt(e){var t=Gt(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Gt(e){var t=e.language;return{id:Wt(e),active:!1,type:"",bandwidth:0,language:$e(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function zt(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function Yt(e){return e.filter(function(e){return zt(e)})}function Xt(e,t){var n=e.filter(function(e){return e.audio&&e.audio.channelsCount}),r=new Map;n=a(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var o=i.audio.channelsCount;r.has(o)||r.set(o,[]),r.get(o).push(i)}return n=Array.from(r.keys()),0==n.length?e:(e=n.filter(function(e){return e<=t}),e.length?r.get(Math.max.apply(Math,s(e))):r.get(Math.min.apply(Math,s(n))))}function Jt(e,t,n,r){var i=e,o=e.filter(function(e){return e.primary});o.length&&(i=o);var a=i.length?i[0].language:"";if(i=i.filter(function(e){return e.language==a}),t){var s=tt($e(t),e.map(function(e){return e.language}));s&&(i=e.filter(function(e){return $e(e.language)==s}))}if(i=i.filter(function(e){return e.forced==r}),n){if(e=$t(i,n),e.length)return e;V("No exact match for the text role could be found.")}else if(e=i.filter(function(e){return 0==e.roles.length}),e.length)return e;return e=i.map(function(e){return e.roles}).reduce(Ae,[]),e.length?$t(i,e[0]):i}function $t(e,t){return e.filter(function(e){return e.roles.includes(t)})}function Qt(e){var t=[];return e.audio&&t.push(Zt(e.audio)),e.video&&t.push(Zt(e.video)),t.join(", ")}function Zt(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function en(){var e=this;this.m=null,this.l=!1,this.i=new R,this.u=null,navigator.connection&&navigator.connection.addEventListener&&(this.u=function(){if(e.l&&e.g.useNetworkInformation){e.i=new R,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&e.m(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}},navigator.connection.addEventListener("change",this.u)),this.o=[],this.A=1,this.F=!1,this.h=this.j=this.g=this.s=null,this.D=new it(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.m(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}})}function tn(e){var t=e.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink),t}function nn(e,t,n,r){return e&&(t=t.filter(function(t){return At(t,e,{width:r,height:n})})),t.sort(function(e,t){return e.bandwidth-t.bandwidth})}function rn(e,t){this.g=e,this.h=t}function on(e,t){var n=new rn(5,0),r=Mb,i=r.g,o=n.h-i.h;(0<(n.g-i.g||o)?r.i:r.h)(r.g,n,e,t)}function an(e,t,n,r){F([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function sn(e,t,n,r){N([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""))}function un(e,t){for(this.h=e,this.g=new Set([e]),t=t||[],e=a(t),t=e.next();!t.done;t=e.next())this.add(t.value)}function cn(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var r=t.audio;n=!((!(!n.channelsCount||!r.channelsCount||2<n.channelsCount||2<r.channelsCount)||n.channelsCount==r.channelsCount)&&ln(n,r)&&dn(n.roles,r.roles))}return!n&&(n=e.video&&t.video)&&(e=e.video,t=t.video,n=!(ln(e,t)&&dn(e.roles,t.roles))),!n}function ln(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map(function(e){return Ue(e)[0]}),t=t.codecs.split(",").map(function(e){return Ue(e)[0]}),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function dn(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=a(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function fn(e){this.g=e,this.h=new hn(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"","")}function hn(e,t,n,r,i){this.j=e,this.l=t,this.g=n,this.h=r,this.i=void 0===i?"":i}function pn(e,t){t=$e(t);var n=tt(t,e.map(function(e){return et(e)}));return n?e.filter(function(e){return n==et(e)}):[]}function gn(e,t){return e.filter(function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)})}function yn(e,t){return e.filter(function(e){return!(!e.audio||!e.audio.label)&&e.audio.label.toLowerCase()==t.toLowerCase()})}function vn(t,n){return"AUTO"==n&&(n=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),t.filter(function(e){return!e.video||!e.video.hdr||e.video.hdr==n})}function mn(){this.g=jb,this.h=(new Map).set(jb,2).set(Ib,1)}function bn(e,t,n){e.h.set(jb,n).set(Ib,t)}function _n(e,t){var n=Tn();this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function wn(e){var t,n;return A(function(r){if(1==r.g){if(e.g>=e.l){if(!e.i)throw new ke(2,7,1010);e.g=1,e.h=e.j}return t=e.g,(e.g++,0==t)?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),f(r,new Promise(function(e){new it(e).U(n/1e3)}),2))}e.h*=e.m,h(r)})}function Tn(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Sn(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function En(e,t){this.promise=e,this.i=t,this.g=!1}function kn(e){return new En(Promise.reject(e),function(){return Promise.resolve()})}function An(){var e=Promise.reject(new ke(2,7,7001));return e.catch(function(){}),new En(e,function(){return Promise.resolve()})}function xn(e){return new En(Promise.resolve(e),function(){return Promise.resolve()})}function Cn(e){return new En(e,function(){return e.catch(function(){})})}function On(e){return new En(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function Pn(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}function Mn(t,n){if(n)if(n instanceof Map)for(var r=a(n.keys()),i=r.next();!i.done;i=r.next())i=i.value,Object.defineProperty(this,i,{value:n.get(i),writable:!0,enumerable:!0});else for(r in n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function In(e){var t,n=new Mn(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}function jn(){this.ca=new nt,this.cd=this}function Dn(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e||e.buffer&&e.buffer.constructor==ArrayBuffer)return e;if(n.has(e))return null;var r=e.constructor==Array;if(e.constructor!=Object&&!r)return null;n.add(e);var i,o=r?[]:{};for(i in e)o[i]=t(e[i]);return r&&(o.length=e.length),o}}var n=new Set;return t(e)}function Rn(e){var t,n={};for(t in e)n[t]=e[t];return n}function Ln(){this.g=[]}function Nn(e,t){e.g.push(t.finally(function(){se(e.g,t)}))}function Fn(e,t,n,r){jn.call(this),this.i=!1,this.m=new Ln,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.u=r||null,this.o=!1}function Un(e,t,n,r){n=n||Lb;var i=Nb[e];(!i||n>=i.priority)&&(Nb[e]={priority:n,pd:t,Ag:void 0!==r&&r})}function Bn(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function Vn(e,t,n,r){function i(e){o=o.da(function(){return n.body&&(n.body=ee(n.body)),e(t,n,r)})}var o=xn(void 0);e.u&&i(e.u),e=a(e.g);for(var s=e.next();!s.done;s=e.next())i(s.value);return o.da(void 0,function(e){if(e instanceof ke&&7001==e.code)throw e;throw new ke(2,1,1006,e)})}function Hn(e,t,n,r,i,o,a){e.o&&(n.uris[i]=n.uris[i].replace("http://","https://"));var s=new ye(n.uris[i]),u=s.Fa,c=!1;u||(u=location.protocol,u=u.slice(0,-1),ve(s,u),n.uris[i]=s.toString()),u=u.toLowerCase();var l=(u=Nb[u])?u.pd:null;if(!l)return kn(new ke(2,1,1e3,s));var d,f=u.Ag,h=null,p=null,g=!1,y=!1;return Cn(wn(r)).da(function(){if(e.i)return An();d=Date.now();var r=l(n.uris[i],n,t,function(n,r,i){h&&h.stop(),p&&p.U(s/1e3),e.l&&t==Rb&&(e.l(n,r),c=!0,a.g=i)},function(r){e.j&&e.j(r,n,t),y=!0});if(!f)return r;var o=n.retryParameters.connectionTimeout;o&&(h=new it(function(){g=!0,r.abort()}),h.U(o/1e3));var s=n.retryParameters.stallTimeout;return s&&(p=new it(function(){g=!0,r.abort()})),r}).da(function(r){h&&h.stop(),p&&p.stop(),void 0==r.timeMs&&(r.timeMs=Date.now()-d);var i={response:r,jg:c};return!y&&e.j&&e.j(r.headers,n,t),i},function(s){if(h&&h.stop(),p&&p.stop(),e.s){var u=null,c=0;s instanceof ke&&(u=s,1001==s.code&&(c=s.data[1])),e.s(n,u,c,g)}if(e.i)return An();if(g&&(s=new ke(1,1,1003,n.uris[i],t)),s instanceof ke){if(7001==s.code)throw s;if(1010==s.code)throw o;if(1==s.severity)return u=(new Map).set("error",s),u=new Mn("retry",u),e.dispatchEvent(u),i=(i+1)%n.uris.length,Hn(e,t,n,r,i,s,a)}throw s})}function Wn(e,t,n,r){var i=xn(void 0),o={};e=a(e.h);for(var s=e.next();!s.done;o={zd:o.zd},s=e.next())o.zd=s.value,i=i.da(function(e){return function(){var i=n.response;return i.data&&(i.data=ee(i.data)),e.zd(t,i,r)}}(o));return i.da(function(){return n},function(e){var t=2;if(e instanceof ke){if(7001==e.code)throw e;t=e.severity}throw new ke(t,1,1007,e)})}function Kn(){this.g=0}function qn(e,t,n){En.call(this,e,t),this.h=n}function Gn(e){this.g=!1,this.h=new Sn,this.i=e}function zn(e,t){if(e.g){if(t instanceof ke&&7003==t.code)throw t;throw new ke(2,7,7003,t)}}function Yn(){this.g=new nt}function Xn(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=Jn(e,r),this.target.addEventListener(t,n,this.g)}function Jn(e,t){if(void 0==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),$n(e)?t:t.capture||!1}function $n(e){var t=Fb;if(void 0==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(e){t=!1}Fb=t}return t||!1}function Qn(e,t){var n=[];e=a(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function Zn(e,t){e=a(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function er(e){this.h=e,this.g=void 0}function tr(e){for(var t=new Map,n=a(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function nr(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}function rr(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;e=a(e);for(var n=e.next();!n.done;n=e.next()){var r=a(n.value);if(n=r.next().value,r=r.next().value,!t.has(n))return!1;if((n=t.get(n))!=r||void 0==n)return!1}return!0}function ir(){}function or(t){if(!t)return"";if(t=te(t),239==t[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!ft())return t=(new TextDecoder).decode(t),t.includes("�")&&N('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",r=0;r<t.length;++r){var i=65533;if(0==(128&t[r])?i=t[r]:t.length>=r+2&&192==(224&t[r])&&128==(192&t[r+1])?(i=(31&t[r])<<6|63&t[r+1],r+=1):t.length>=r+3&&224==(240&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])?(i=(15&t[r])<<12|(63&t[r+1])<<6|63&t[r+2],r+=2):t.length>=r+4&&240==(241&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])&&128==(192&t[r+3])&&(i=(7&t[r])<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3],r+=3),65535>=i)n+=String.fromCharCode(i);else{i-=65536;var o=1023&i;n+=String.fromCharCode(55296+(i>>10)),n+=String.fromCharCode(56320+o)}}return n}function ar(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw B("Data has an incorrect length, must be even."),new ke(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=ne(e);for(var i=0;i<n;i++)r[i]=e.getUint16(2*i,t);return Ub.value()(r)}function sr(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=te(e);if(239==n[0]&&187==n[1]&&191==n[2])return or(n);if(254==n[0]&&255==n[1])return ar(n.subarray(2),!1);if(255==n[0]&&254==n[1])return ar(n.subarray(2),!0);if(W("Unable to find byte-order-mark, making an educated guess."),0==n[0]&&0==n[2])return ar(e,!1);if(0==n[1]&&0==n[3])return ar(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return or(e);throw new ke(2,2,2003)}function ur(t){if(e.TextEncoder&&!ft()){var n=new TextEncoder;return ee(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var r=0;r<t.length;r++)n[r]=t[r].charCodeAt(0);return ee(n)}function cr(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n}function lr(e,t){this.h=ne(e),this.i=t==Bb,this.g=0}function dr(){return new ke(2,3,3e3)}function fr(){this.i=[],this.h=[],this.g=!1}function hr(e){for(var t=br(e);e.reader.ja()&&!e.parser.g;)e.parser.Bc(e.start+t,e.reader,e.partialOkay)}function pr(e){for(var t=br(e),n=e.reader.J(),r=0;r<n&&(e.parser.Bc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function gr(e){var t=br(e);for(e.reader.skip(78);e.reader.ja()&&!e.parser.g;)e.parser.Bc(e.start+t,e.reader,e.partialOkay)}function yr(e){return function(t){e(t.reader.$a(t.reader.getLength()-t.reader.ga()))}}function vr(e){var t=0;e=a(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function mr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function br(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}function _r(){}function wr(e){return e=te(e),e=Ub.value()(e),btoa(e)}function Tr(e,t){return t=void 0==t||t,e=wr(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Sr(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function Er(t){for(var n=t.length/2,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.parseInt(t.substr(2*i,2),16);return r}function kr(e){var t=te(e);e="",t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),1==n.length&&(n="0"+n),e+=n;return e}function Ar(){for(var e=x.apply(0,arguments),t=0,n=a(e),r=n.next();!r.done;r=n.next())t+=r.value.byteLength;for(t=new Uint8Array(t),n=0,e=a(e),r=e.next();!r.done;r=e.next())r=r.value,t.set(te(r),n),n+=r.byteLength;return t}function xr(e){var t=this;this.g=[],this.h=[],this.data=[],(new fr).box("moov",hr).box("moof",hr).O("pssh",function(e){if(1<e.version)V("Unrecognized PSSH version found!");else{var n=te(e.reader.h,-12,e.size);if(t.data.push(n),t.g.push(kr(e.reader.$a(16))),0<e.version){n=e.reader.J();for(var r=0;r<n;r++){var i=kr(e.reader.$a(16));t.h.push(i)}}}}).parse(e),0==this.data.length&&q("No pssh box found!")}function Cr(e,t,n,r){var i=e.length,o=t.length+16+i;0<r&&(o+=4+16*n.size);var s=new Uint8Array(o),u=ne(s),c=0;if(u.setUint32(c,o),c+=4,u.setUint32(c,1886614376),c+=4,1>r?u.setUint32(c,0):u.setUint32(c,16777216),c+=4,s.set(t,c),c+=t.length,0<r)for(u.setUint32(c,n.size),c+=4,t=a(n),n=t.next();!n.done;n=t.next())n=Er(n.value),s.set(n,c),c+=n.length;return u.setUint32(c,i),s.set(e,c+4),s}function Or(e,t){return e=Mr(e,t),1!=e.length?null:e[0]}function Pr(e,t,n){return e=jr(e,t,n),1!=e.length?null:e[0]}function Mr(e,t){var n=[];e=a(e.childNodes);for(var r=e.next();!r.done;r=e.next())(r=r.value)instanceof Element&&r.tagName==t&&n.push(r);return n}function Ir(e){return Array.from(e.childNodes).filter(function(e){return e instanceof Element})}function jr(e,t,n){var r=[];e=a(e.childNodes);for(var i=e.next();!i.done;i=e.next())(i=i.value)instanceof Element&&i.localName==n&&i.namespaceURI==t&&r.push(i);return r}function Dr(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Rr(e,t,n){t=a(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,e.hasAttributeNS(r,n))return e.getAttributeNS(r,n);return null}function Lr(e){return Array.from(e.childNodes).every(Nr)?e.textContent.trim():null}function Nr(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function Fr(e,t,n,r){r=void 0===r?null:r;var i=null;return e=e.getAttribute(t),null!=e&&(i=n(e)),null==i?r:i}function Ur(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Br(e){if(!e)return null;var t=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);return t?(e=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(e)?e:null):(V("Invalid duration string:",e),null)}function Vr(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function Hr(e){return e=Number(e),0==e%1?e:null}function Wr(e){return e=Number(e),0==e%1&&0<e?e:null}function Kr(e){return e=Number(e),0==e%1&&0<=e?e:null}function qr(e){return e=Number(e),isNaN(e)?null:e}function Gr(e){return!!e&&"true"===e.toLowerCase()}function zr(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Yr(e,t){var n=new DOMParser,r=Wb.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(e){return B("XML parsing exception:",e),null}if(!(n=e.documentElement))return B("XML document was empty!"),null;if(r=n.getElementsByTagName("parsererror"),r.length)return B("XML parser error found:",r[0]),null;if(n.tagName!=t)return B('XML tag name does not match expected "'+t+'":',n.tagName),null;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return B("XML document embeds unsafe content!"),null;return n}function Xr(e,t){try{return Yr(sr(e),t)}catch(e){return B("parseXmlString threw!",e),null}}function Jr(e,t){var n=this;t=void 0===t?1:t,this.D=e,this.G=new Set,this.m=this.u=this.R=null,this.Ga=this.ca=!1,this.I=0,this.g=null,this.A=new Yn,this.i=new Map,this.o=new Map,this.j=new Sn,this.h=null,this.s=function(t){2==t.severity&&n.j.reject(t),e.onError(t)},this.X=new Map,this.ea=new Map,this.Y=new it(function(){return _i(n)}),this.M=!1,this.L=[],this.V=!1,this.qa=new it(function(){xi(n)}).va(t),this.j.catch(function(){}),this.l=new Gn(function(){return $r(n)}),this.aa=!1,this.K=this.F=null}function $r(e){return A(function(t){switch(t.g){case 1:return e.A.release(),e.A=null,e.j.reject(),e.qa.stop(),e.qa=null,e.Y.stop(),e.Y=null,f(t,Si(e),2);case 2:if(!e.m){t.B(3);break}return p(t,4),f(t,e.m.setMediaKeys(null),6);case 6:y(t,5);break;case 4:v(t);case 5:e.m=null;case 3:e.g=null,e.G.clear(),e.u=null,e.o=new Map,e.h=null,e.s=function(){},e.D=null,e.aa=!1,e.F=null,h(t)}})}function Qr(e,t,n){return e.Ga=!0,e.o=new Map,e.M=n,ti(e,t)}function Zr(e,t,n){e.o=new Map,n=a(n);for(var r=n.next();!r.done;r=n.next())e.o.set(r.value,{initData:null,initDataType:null});for(n=a(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.o.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.M=0<e.o.size,ti(e,t)}function ei(e,t,n,r,i,o){var a=new Map;return i={audioCapabilities:i,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},i.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],a.set(t,i),li(e,a,[])}function ti(e,t){var n,r,i,o,s,u,c,l,d,h,p,g,y,v,m,b,_;return A(function(w){if(1==w.g){if(n=hi(e))for(r=a(t),i=r.next();!i.done;i=r.next())o=i.value,o.video&&(o.video.drmInfos=[n]),o.audio&&(o.audio.drmInfos=[n]);for(s=t.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}),s||(u=tr(e.h.servers),Pi(t,u)),c=new Set,l=a(t),i=l.next();!i.done;i=l.next())for(d=i.value,h=Ai(d),p=a(h),g=p.next();!g.done;g=p.next())y=g.value,c.add(y);for(v=a(c),g=v.next();!g.done;g=v.next())m=g.value,Ii(m,tr(e.h.servers),tr(e.h.advanced||{}),e.h.keySystemsMapping);return f(w,Mt(t,e.M,e.aa,e.h.preferredKeySystems),2)}return(b=s||Object.keys(e.h.servers).length)?(_=li(e,void 0,t),w.return(s?_:_.catch(function(){}))):(e.ca=!0,w.return(Promise.resolve()))})}function ni(e){var t;return A(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.F){n.B(2);break}return f(n,e.F,3);case 3:return zn(e.l),n.return();case 2:return p(n,4),e.F=e.m.setMediaKeys(e.u),f(n,e.F,6);case 6:y(n,5);break;case 4:t=v(n),e.s(new ke(2,6,6003,t.message));case 5:zn(e.l),h(n)}})}function ri(e,t){return A(function(n){if(1==n.g)return f(n,ni(e),2);si(e,t.initDataType,te(t.initData)),h(n)})}function ii(e){var t,n,r,i,o,a;return A(function(s){switch(s.g){case 1:if(!e.u||!e.g)return s.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){s.B(2);break}return t=Bn([e.g.serverCertificateUri],e.h.retryParameters),p(s,3),n=e.D.Bb.request(5,t),f(s,n.promise,5);case 5:r=s.h,e.g.serverCertificate=te(r.data),y(s,4);break;case 3:throw i=v(s),new ke(2,6,6017,i);case 4:if(e.l.g)return s.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(p(s,6),f(s,e.u.setServerCertificate(e.g.serverCertificate),8)):s.return();case 8:(o=s.h)||V("Server certificates are not supported by the key system.  The server certificate has been ignored."),y(s,0);break;case 6:throw a=v(s),new ke(2,6,6004,a.message)}})}function oi(e,t){var n,r,i;return A(function(o){return 1==o.g?f(o,yi(e,t,{initData:null,initDataType:null}),2):3!=o.g?(n=o.h)?(r=[],(i=e.i.get(n))&&(i.Oa=new Sn,r.push(i.Oa)),q("Attempting to remove session",t),r.push(n.remove()),f(o,Promise.all(r),3)):(q("Ignoring attempt to remove missing session",t),o.return()):(e.i.delete(n),void h(o))})}function ai(e){var t,n,r,i,o;return A(function(s){if(1==s.g)return e.o.size?(e.o.forEach(function(t,n){yi(e,n,t)}),f(s,e.j,3)):s.B(2);if(2!=s.g){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&Oi(e))return s.return(e.j);e.j=new Sn,e.j.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=a(n),i=r.next();!i.done;i=r.next())o=i.value,si(e,o.initDataType,o.initData);return n.length||e.j.resolve(),s.return(e.j)})}function si(e,t,n){if(n.length){if(!pt("Tizen 2")){var r=!1;if(e.R){var i=Yb.get(e.g.keySystem),o=new xr(n);if(0<=(i=o.g.indexOf(i))){r=o.data[i];var s=e.vc();s=a(e.R(r,s)),r=s.next().value,s=s.next().value}}if(r&&!s)return void W("Ignoring init data.");if(!r)for(r=e.i.values(),r=a(r),s=r.next();!s.done;s=r.next())if(Q(n,s.value.initData))return void W("Ignoring duplicate init data.")}0<e.i.size&&Ci(e)&&(e.j.resolve(),e.j=new Sn,e.j.catch(function(){})),vi(e,t,n,e.g.sessionType)}}function ui(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function ci(e){return e=e.i.keys(),e=Qn(e,function(e){return e.sessionId}),Array.from(e)}function li(e,t,n){var r,i,o,s,u,c,l,d,h,g,m,b,_,w,T;return A(function(S){switch(S.g){case 1:if(r=new Map,n.length){i=di(e,n,r),S.B(2);break}return f(S,fi(e,t),3);case 3:i=S.h;case 2:if(!(o=i))throw new ke(2,6,6001);for(zn(e.l),p(S,4),e.G.clear(),s=o.getConfiguration(),q("Got MediaKeySystemAccess with configuration",s),u=s.audioCapabilities||[],c=s.videoCapabilities||[],l=a(u),d=l.next();!d.done;d=l.next())h=d.value,e.G.add(h.contentType.toLowerCase());for(g=a(c),d=g.next();!d.done;d=g.next())m=d.value,e.G.add(m.contentType.toLowerCase());if(n.length){var E=o.keySystem,k=r.get(o.keySystem),A=[],x=[],C=[],O=[],P=new Set;Mi(k,A,C,x,O,P),1<C.length&&V("Multiple unique server certificates found! Only the first will be used."),1<A.length&&V("Multiple unique license server URIs found! Only the first will be used."),1<x.length&&V("Multiple unique server certificate URIs found! Only the first will be used.");var M=e.M?"persistent-license":"temporary";for(E={keySystem:E,licenseServerUri:A[0],distinctiveIdentifierRequired:k[0].distinctiveIdentifierRequired,persistentStateRequired:k[0].persistentStateRequired,sessionType:k[0].sessionType||M,audioRobustness:k[0].audioRobustness||"",videoRobustness:k[0].videoRobustness||"",serverCertificate:C[0],serverCertificateUri:x[0],initData:O,keyIds:P},k=a(k),A=k.next();!A.done;A=k.next())A=A.value,A.distinctiveIdentifierRequired&&(E.distinctiveIdentifierRequired=A.distinctiveIdentifierRequired),A.persistentStateRequired&&(E.persistentStateRequired=A.persistentStateRequired);k=E}else k=o.keySystem,E=t.get(o.keySystem),A=[],x=[],C=[],O=[],P=new Set,Mi(E.drmInfos,A,C,x,O,P),1<C.length&&V("Multiple unique server certificates found! Only the first will be used."),1<x.length&&V("Multiple unique server certificate URIs found! Only the first will be used."),1<A.length&&V("Multiple unique license server URIs found! Only the first will be used."),k={keySystem:k,licenseServerUri:A[0],distinctiveIdentifierRequired:"required"==E.distinctiveIdentifier,persistentStateRequired:"required"==E.persistentState,sessionType:E.sessionTypes[0]||"temporary",audioRobustness:(E.audioCapabilities?E.audioCapabilities[0].robustness:"")||"",videoRobustness:(E.videoCapabilities?E.videoCapabilities[0].robustness:"")||"",serverCertificate:C[0],serverCertificateUri:x[0],initData:O,keyIds:P};if(e.g=k,!e.g.licenseServerUri)throw new ke(2,6,6012,e.g.keySystem);return f(S,o.createMediaKeys(),6);case 6:if(b=S.h,zn(e.l),H("Created MediaKeys object for key system",e.g.keySystem),e.u=b,!(""!=e.h.minHdcpVersion&&"getStatusForPolicy"in e.u)){S.B(7);break}return p(S,8),f(S,e.u.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if("usable"!=(_=S.h))throw new ke(2,6,6018);zn(e.l),y(S,7,4);break;case 8:if((w=v(S,4))instanceof ke)throw w;throw new ke(2,6,6019,w.message);case 7:return e.ca=!0,f(S,ii(e),11);case 11:zn(e.l),y(S,0);break;case 4:if(T=v(S),zn(e.l,T),e.g=null,e.G.clear(),T instanceof ke)throw T;throw new ke(2,6,6002,T.message)}})}function di(e,t,n){for(var r=a(t),i=r.next();!i.done;i=r.next()){var o=a(Ai(i.value));for(i=o.next();!i.done;i=o.next())i=i.value,n.has(i.keySystem)||n.set(i.keySystem,[]),n.get(i.keySystem).push(i)}if(1==n.size&&n.has(""))throw new ke(2,6,6e3);for(r={},e=a(e.h.preferredKeySystems),i=e.next();!i.done;r={yd:r.yd},i=e.next())for(r.yd=i.value,o=a(t),i=o.next();!i.done;i=o.next())if(i=i.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.yd}}(r)))return i.keySystemAccess;for(e=a([!0,!1]),i=e.next();!i.done;i=e.next())for(r=i.value,o=a(t),i=o.next();!i.done;i=o.next()){var s=a(i.value.decodingInfos);for(i=s.next();!i.done;i=s.next()){var u=i.value;if(u.supported&&u.keySystemAccess){i=n.get(u.keySystemAccess.keySystem);var c=a(i);for(i=c.next();!i.done;i=c.next())if(!!i.value.licenseServerUri==r)return u.keySystemAccess}}}return null}function fi(e,t){var n,r,i,o,s,u,c,l,d,h,g,y,m,b,_,w,T;return A(function(S){switch(S.g){case 1:if(1==t.size&&t.has(""))throw new ke(2,6,6e3);for(r=a(t.values()),i=r.next();!i.done;i=r.next())o=i.value,0==o.audioCapabilities.length&&delete o.audioCapabilities,0==o.videoCapabilities.length&&delete o.videoCapabilities;s=a(e.h.preferredKeySystems),u=s.next();case 2:if(u.done){S.B(4);break}if(c=u.value,!t.has(c)){S.B(3);break}return l=t.get(c),p(S,6),f(S,navigator.requestMediaKeySystemAccess(c,[l]),8);case 8:return n=S.h,S.return(n);case 6:d=v(S),q("Requesting",c,"failed with config",l,d);case 7:zn(e.l);case 3:u=s.next(),S.B(2);break;case 4:h=a([!0,!1]),g=h.next();case 9:if(g.done){S.B(11);break}y=g.value,m=a(t.keys()),u=m.next();case 12:if(u.done){g=h.next(),S.B(9);break}if(b=u.value,_=t.get(b),(w=_.drmInfos.some(function(e){return!!e.licenseServerUri}))!=y){S.B(13);break}return p(S,15),f(S,navigator.requestMediaKeySystemAccess(b,[_]),17);case 17:return n=S.h,S.return(n);case 15:T=v(S),q("Requesting",b,"failed with config",_,T);case 16:zn(e.l);case 13:u=m.next(),S.B(12);break;case 11:return S.return(n)}})}function hi(t){if(t=tr(t.h.clearKeys),0==t.size)return null;var n=[],r=[];t.forEach(function(e,t){var i=t;22!=i.length&&(i=Tr(Er(t),!1)),t=e,22!=t.length&&(t=Tr(Er(e),!1)),e={kty:"oct",kid:i,k:t},n.push(e),r.push(e.kid)}),t=JSON.stringify({keys:n});var i=JSON.stringify({kids:r});return i=[{initData:te(ur(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:i,keyIds:new Set(r)}}function pi(e){Ci(e)&&e.j.resolve()}function gi(e,t){new it(function(){t.loaded=!0,pi(e)}).U(qb)}function yi(e,t,n){var r,i,o,a,s,u,c;return A(function(l){switch(l.g){case 1:try{K("Attempting to load an offline session",t),r=e.u.createSession("persistent-license")}catch(t){return i=new ke(2,6,6005,t.message),e.s(i),l.return(Promise.reject(i))}return e.A.C(r,"message",function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.V?e.L.push(t):mi(e,t)}),e.A.C(r,"keystatuseschange",function(t){return bi(e,t)}),o={initData:n.initData,initDataType:n.initDataType,loaded:!1,be:1/0,Oa:null,type:"persistent-license"},e.i.set(r,o),p(l,2),f(l,r.load(t),4);case 4:return a=l.h,zn(e.l),q("Loaded offline session",t,a),a||(e.i.delete(r),s=e.h.persistentSessionOnlinePlayback?1:2,e.s(new ke(s,6,6013)),o.loaded=!0),gi(e,o),pi(e),l.return(r);case 2:u=v(l),zn(e.l,u),e.i.delete(r),c=e.h.persistentSessionOnlinePlayback?1:2,e.s(new ke(c,6,6005,u.message)),o.loaded=!0,pi(e);case 3:return l.return(Promise.resolve())}})}function vi(e,t,n,r){try{H("Creating new",r,"session");var i=e.u.createSession(r)}catch(t){return void e.s(new ke(2,6,6005,t.message))}e.A.C(i,"message",function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.V?e.L.push(t):mi(e,t)}),e.A.C(i,"keystatuseschange",function(t){return bi(e,t)}),e.i.set(i,{initData:n,initDataType:t,loaded:!1,be:1/0,Oa:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(n){return t=n,n instanceof ke||(t=new ke(2,6,6016,n)),void e.s(t)}e.h.logLicenseExchange&&(r=Tr(n),H("EME init data: type=",t,"data=",r)),i.generateRequest(t,n).catch(function(t){if(!e.l.g){e.i.delete(i);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;0>r&&(r+=Math.pow(2,32)),r="0x"+r.toString(16)}e.s(new ke(2,6,6006,t.message,t,r))}})}function mi(e,t){var n,r,i,o,s,u,c,l,d,g,m,b,_,w,T;A(function(S){switch(S.g){case 1:if(n=t.target,K("Sending license request for session",n.sessionId,"of type",t.messageType),e.h.logLicenseExchange&&(r=Tr(t.message),H("EME license request",r)),i=e.i.get(n),o=e.g.licenseServerUri,s=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&s&&s.individualizationServer&&(o=s.individualizationServer),u=Bn([o],e.h.retryParameters),u.body=t.message,u.method="POST",u.licenseRequestType=t.messageType,u.sessionId=n.sessionId,u.drmInfo=e.g,i&&(u.initData=i.initData,u.initDataType=i.initDataType),ui(e.g.keySystem)){var E=ar(u.body,!0,!0);if(E.includes("PlayReadyKeyMessage")){W("Unwrapping PlayReady request."),E=Yr(E,"PlayReadyKeyMessage");for(var k=a(E.getElementsByTagName("HttpHeader")),A=k.next();!A.done;A=k.next())A=A.value,u.headers[A.getElementsByTagName("name")[0].textContent]=A.getElementsByTagName("value")[0].textContent;u.body=Sr(E.getElementsByTagName("Challenge")[0].textContent)}else W("PlayReady request is already unwrapped."),u.headers["Content-Type"]="text/xml; charset=utf-8"}return c=Date.now(),p(S,2),d=e.D.Bb.request(2,u),f(S,d.promise,4);case 4:l=S.h,y(S,3);break;case 2:return g=v(S),m=new ke(2,6,6007,g),e.s(m),i&&i.Oa&&i.Oa.reject(m),S.return();case 3:return e.l.g?S.return():(e.I+=(Date.now()-c)/1e3,e.h.logLicenseExchange&&(b=Tr(l.data),H("EME license response",b)),p(S,5),K("Updating session",n.sessionId),f(S,n.update(l.data),7));case 7:y(S,6);break;case 5:return _=v(S),w=new ke(2,6,6008,_.message),e.s(w),i&&i.Oa&&i.Oa.reject(w),S.return();case 6:if(e.l.g)return S.return();T=new Mn("drmsessionupdate"),e.D.onEvent(T),i&&(i.Oa&&i.Oa.resolve(),gi(e,i)),h(S)}})}function bi(e,t){t=t.target,q("Key status changed for session",t.sessionId);var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(t,i){if("string"==typeof i){var o=i;i=t,t=o}if(ui(e.g.keySystem)&&16==i.byteLength&&(st()||ft())){o=ne(i);var a=o.getUint32(0,!0),s=o.getUint16(4,!0),u=o.getUint16(6,!0);o.setUint32(0,a,!1),o.setUint16(4,s,!1),o.setUint16(6,u,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(r=!0),i=kr(i).slice(0,32),e.X.set(i,t)});var i=t.expiration-Date.now();(0>i||r&&1e3>i)&&n&&!n.Oa&&(W("Session has expired",t.sessionId),e.i.delete(t),t.close().catch(function(){})),Ci(e)&&(e.j.resolve(),e.Y.U(Gb))}function _i(e){var t=e.X,n=e.ea;n.clear(),t.forEach(function(e,t){return n.set(t,e)}),t=Array.from(n.values()),t.length&&t.every(function(e){return"expired"==e})&&e.s(new ke(2,6,6014)),e.D.nd(nr(n))}function wi(){var e,t,n,r,i,o,a,s;return A(function(u){return 1==u.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},r={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},i=[r,n],o=new Map,a=function(e){var t,n,r;return A(function(a){switch(a.g){case 1:if(p(a,2),"org.w3.clearkey"===e&&ht())throw Error("Unsupported keySystem");return f(a,navigator.requestMediaKeySystemAccess(e,i),4);case 4:return t=a.h,r=!!(n=t.getConfiguration().sessionTypes)&&n.includes("persistent-license"),pt("Tizen 3")&&(r=!1),o.set(e,{persistentState:r}),f(a,t.createMediaKeys(),5);case 5:y(a,0);break;case 2:v(a),o.set(e,null),h(a)}})},s=e.map(function(e){return a(e)}),f(u,Promise.all(s),2)):u.return(nr(o))})}function Ti(e){var t;return A(function(n){return 1==n.g?(t=new Promise(function(e,t){new it(t).U(Kb)}),p(n,2),f(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?y(n,0):(v(n),V("Timeout waiting for session close"),void h(n))})}function Si(e){var t;return A(function(n){return t=Array.from(e.i.entries()),e.i.clear(),f(n,Promise.all(t.map(function(t){t=a(t);var n,r=t.next().value,i=t.next().value;return A(function(t){return 1==t.g?(p(t,2),e.Ga||e.o.has(r.sessionId)||"persistent-license"!==i.type||e.h.persistentSessionOnlinePlayback?(K("Closing session",r.sessionId,i),f(t,Ti(r),5)):(K("Removing session",r.sessionId),f(t,r.remove(),5))):2!=t.g?y(t,0):(n=v(t),B("Failed to close or remove the session",n),void h(t))})})),0)})}function Ei(e,t){return!e.length||!t.length||e===t||0<ki(e,t).length}function ki(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=a(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var i={},o=a(t),u=o.next();!u.done;i={Ea:i.Ea},u=o.next())if(u=u.value,r.keySystem==u.keySystem){i.Ea=[],i.Ea=i.Ea.concat(r.initData||[]),i.Ea=i.Ea.concat(u.initData||[]),i.Ea=i.Ea.filter(function(e){return function(t,n){return void 0===t.keyId||n===e.Ea.findIndex(function(e){return e.keyId===t.keyId})}}(i)),o=r.keyIds&&u.keyIds?new Set([].concat(s(r.keyIds),s(u.keyIds))):r.keyIds||u.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||u.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||u.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||u.persistentStateRequired,videoRobustness:r.videoRobustness||u.videoRobustness,audioRobustness:r.audioRobustness||u.audioRobustness,serverCertificate:r.serverCertificate||u.serverCertificate,serverCertificateUri:r.serverCertificateUri||u.serverCertificateUri,initData:i.Ea,keyIds:o});break}}return n}function Ai(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function xi(e){e.i.forEach(function(t,n){var r=t.be,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.D.onExpirationUpdated(n.sessionId,i),t.be=i)})}function Ci(e){return e=e.i.values(),Zn(e,function(e){return e.loaded})}function Oi(e){for(var t=a(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.X.get(n.value))return!1;return!0}function Pi(e,t){var n=[];for(t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=a(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function Mi(e,t,n,r,i,o){var s={};e=a(e);for(var u=e.next();!u.done;s={pa:s.pa},u=e.next()){if(s.pa=u.value,t.includes(s.pa.licenseServerUri)||t.push(s.pa.licenseServerUri),r.includes(s.pa.serverCertificateUri)||r.push(s.pa.serverCertificateUri),s.pa.serverCertificate&&(n.some(function(e){return function(t){return Q(t,e.pa.serverCertificate)}}(s))||n.push(s.pa.serverCertificate)),s.pa.initData){u={};for(var c=a(s.pa.initData),l=c.next();!l.done;u={Lc:u.Lc},l=c.next())u.Lc=l.value,i.some(function(e){return function(t){var n=e.Lc;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Q(t.initData,n.initData)}}(u))||i.push(u.Lc)}if(s.pa.keyIds)for(u=a(s.pa.keyIds),c=u.next();!c.done;c=u.next())o.add(c.value)}}function Ii(t,n,r,i){var o=t.keySystem;!o||"org.w3.clearkey"==o&&t.licenseServerUri||(n.size&&(n=n.get(o)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(r=r.get(o))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate),r.sessionType&&(t.sessionType=r.sessionType),t.serverCertificateUri||(t.serverCertificateUri=r.serverCertificateUri)),i[o]&&(t.keySystem=i[o]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==o&&(t.keySystem="com.chromecast.playready"))}function ji(){}function Di(e,t,n,r){var i,o,a,s;return A(function(u){if(1==u.g){if(r){if(i=Xb[r.toLowerCase()])return u.return(i);V("Could not determine manifest type using MIME type ",r)}if(o=Li(e)){if(a=Jb[o])return u.return(a);V("Could not determine manifest type for extension ",o)}else V("Could not find extension for ",e);return r?u.B(2):f(u,Ri(e,t,n),3)}if(2!=u.g&&(r=u.h)){if(s=Xb[r])return u.return(s);V("Could not determine manifest type using MIME type",r)}throw new ke(2,4,4e3,e)})}function Ri(e,t,n){var r,i,o;return A(function(a){return 1==a.g?(r=Bn([e],n),r.method="HEAD",f(a,t.request(0,r).promise,2)):(i=a.h,o=i.headers["content-type"],a.return(o?o.toLowerCase().split(";").shift():""))})}function Li(e){return e=new ye(e).Ba.split("/").pop().split("."),1==e.length?"":e.pop().toLowerCase()}function Ni(e){function t(){i=!0}function n(e){o.push(e),hr(e)}e=te(e);var r,i=!1,o=[],s=[];if((new fr).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).O("stsd",function(e){r=e,o.push(e),pr(e)}).O("encv",t).O("enca",t).O("hev1",function(e){s.push({box:e,ib:1701733238})}).O("hvc1",function(e){s.push({box:e,ib:1701733238})}).O("avc1",function(e){s.push({box:e,ib:1701733238})}).O("avc3",function(e){s.push({box:e,ib:1701733238})}).O("ac-3",function(e){s.push({box:e,ib:1701733217})}).O("ec-3",function(e){s.push({box:e,ib:1701733217})}).O("mp4a",function(e){s.push({box:e,ib:1701733217})}).parse(e),i)return W("Init segment already indicates encryption."),e;if(0==s.length||!r)throw B("Failed to find boxes needed to fake encryption!"),q("Failed init segment (hex):",kr(e)),new ke(2,3,3019);s.reverse();for(var u=a(s),c=u.next();!c.done;c=u.next())c=c.value,W('Inserting "'+mr(c.ib)+'" box into init segment.'),e=Fi(e,r,c.box,o,c.ib);return e}function Fi(e,t,n,r,i){var o=$b.value(),s=e.subarray(n.start,n.start+n.size),u=ne(s),c=new Uint8Array(n.size+o.byteLength);for(c.set(s,0),s=ne(c),s.setUint32(4,i),c.set(o,n.size),i=u.getUint32(4),s.setUint32(n.size+16,i),Ui(c,0,c.byteLength),i=new Uint8Array(e.byteLength+c.byteLength),n=ut()?n.start:n.start+n.size,o=e.subarray(n),i.set(e.subarray(0,n)),i.set(c,n),i.set(o,n+c.byteLength),e=a(r),r=e.next();!r.done;r=e.next())r=r.value,Ui(i,r.start,r.size+c.byteLength);return c=ne(i,t.start),t=br(t),e=c.getUint32(t),c.setUint32(t,e+1),i}function Ui(e,t,n){e=ne(e,t),0!=(t=e.getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}function Bi(e,t,n,r,i,o){this.za=e,this.j=t,this.h=n,this.Wd=void 0===r?null:r,this.timescale=void 0===i?null:i,this.g=void 0===o?null:o}function Vi(e,t){return e&&t?e.yc()==t.yc()&&e.tc()==t.tc()&&ce(e.za(),t.za())&&Q(e.g,t.g):e==t}function Hi(e,t,n,r,i,o,a,s,u,c,l,d,f,h,p){c=void 0===c?[]:c,h=void 0===h?Qb:h,this.startTime=e,this.l=this.endTime=t,this.I=n,this.j=r,this.h=i,this.g=o,this.timestampOffset=a,this.appendWindowStart=s,this.appendWindowEnd=u,this.i=c,this.tilesLayout=void 0===l?"":l,this.G=void 0===d?null:d,this.D=void 0===f?null:f,this.status=h,this.s=!1,this.o=!0,this.u=!1,this.A=void 0===p?null:p,this.F=null,this.m=0}function Wi(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ki(e,t){return!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t>=e.start(0)}function qi(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=a(zi(e));for(var r=e.next();!r.done;r=e.next()){var i=r.value;r=i.start,i=i.end,i>t&&(n+=i-Math.max(r,t))}return n}function Gi(e,t,n){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)?null:(e=zi(e).findIndex(function(e,r,i){return e.start>t&&(0==r||i[r-1].end-t<=n)}),0<=e?e:null)}function zi(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function Yi(){}function Xi(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Ji(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function $i(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]}function Qi(e){var t={key:e.type,description:"",data:""};if("TXXX"===e.type){if(2>e.size)return null;if(3!==e.data[0])return V("Ignore frame with unrecognized character encoding"),null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var r=or(te(e.data,1,n));return e=or(te(e.data,2+n)).replace(/\0*$/,""),t.description=r,t.data=e,t}return"WXXX"===e.type?2>e.size?null:3!==e.data[0]?(V("Ignore frame with unrecognized character encoding"),null):-1===(n=e.data.subarray(1).indexOf(0))?null:(r=or(te(e.data,1,n)),e=or(te(e.data,2+n)).replace(/\0*$/,""),t.description=r,t.data=e,t):"PRIV"===e.type?2>e.size?null:-1===(r=e.data.indexOf(0))?null:(r=or(te(e.data,0,r)),t.description=r,"com.apple.streaming.transportStreamTimestamp"==r?(r=e.data.subarray(r.length+1),e=1&r[3],r=(r[4]<<23)+(r[5]<<15)+(r[6]<<7)+r[7],r/=45,e&&(r+=47721858.84),t.data=r):(e=ee(e.data.subarray(r.length+1)),t.data=e),t):"T"===e.type[0]?2>e.size?null:3!==e.data[0]?(V("Ignore frame with unrecognized character encoding"),null):(e=or(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=or(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(V("Unrecognized ID3 frame type:",e.type),t.data=ee(e.data),t):null}function Zi(e){for(var t=0,n=[];Xi(e,t);){var r=$i(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var i=e.subarray(t),o=$i(i,4);i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:o,data:i.subarray(10,10+o)},(o=Qi(i))&&n.push(o),t+=i.size+10}Ji(e,t)&&(t+=10)}return n}function eo(e,t){for(var n=t=void 0===t?0:t,r=0;Xi(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=$i(e,t+6),Ji(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}function to(e,t){var n=null,r=null,i=null,o=e.J();return 1&t&&(i=e.Vb()),2&t&&e.skip(4),8&t&&(n=e.J()),16&t&&(r=e.J()),{trackId:o,Me:n,Gf:r,Nh:i}}function no(e,t){return 1==t?(t=e.J(),e=e.J(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.J()}}function ro(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.J(),e.skip(4),e=e.jb(),{timescale:t,language:String.fromCharCode(96+(e>>10))+String.fromCharCode(96+((960&e)>>5))+String.fromCharCode(96+(31&e))}}function io(e,t,n){var r=e.J(),i=[],o=null;1&n&&(o=e.J()),4&n&&e.skip(4);for(var a=0;a<r;a++){var s={ne:null,sampleSize:null,qd:null};256&n&&(s.ne=e.J()),512&n&&(s.sampleSize=e.J()),1024&n&&e.skip(4),2048&n&&(s.qd=0==t?e.J():e.af()),i.push(s)}return{Rh:r,cf:i,Ff:o}}function oo(e){this.j=e,this.i=e.byteLength,this.g=this.h=0}function ao(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);0!==r&&(n.set(e.j.subarray(t,t+r)),e.h=new lr(n,0).J(),e.g=8*r,e.i-=r)}function so(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,ao(e)}e.h<<=t,e.g-=t}function uo(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&ao(e),n=t-n,0<n?r<<n|uo(e,n):r}function co(e){var t;for(t=0;t<e.g;++t)if(0!=(e.h&2147483648>>>t))return e.h<<=t,e.g-=t,t;return ao(e),t+co(e)}function lo(e){so(e,1+co(e))}function fo(e){return uo(e,co(e)+1)-1}function ho(e,t){for(var n=8,r=8,i=0;i<t;i++)0!==r&&(r=fo(e),r=(n+(1&r?1+r>>>1:-1*(r>>>1))+256)%256),n=0===r?n:r}function po(e){return uo(e,8),fo(e),fo(e)}function go(){this.u=null,this.A=!1,this.m=this.o=null,this.i=[],this.s=this.j=null,this.g=[],this.l=null,this.h=[]}function yo(e){if(1!=(e[0]<<16|e[1]<<8|e[2]))return null;var t={data:new Uint8Array(0),ee:e[4]<<8|e[5],pts:null,dts:null};if(t.ee&&t.ee>e.byteLength-6)return null;var n=e[7];return 192&n&&(t.pts=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,t.dts=t.pts,64&n&&(t.dts=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)),n=e[8]+9,e.byteLength<=n?null:(t.data=e.subarray(n),t)}function vo(e){return!(0>(e=mo(e)))&&(0<e&&V("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),!0)}function mo(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}function bo(e,t,n){this.g=null,this.i=-1,this.j=e,this.h=t,this.l=n,"undefined"==typeof libDPIModule&&F("Could not Find LCEVC Library dependencies on this page"),"undefined"==typeof LcevcDil?F("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||F(LcevcDil.SupportObject.SupportError),"undefined"!=typeof LcevcDil&&"undefined"!=typeof libDPIModule&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}function _o(e,t){var n=t_;switch(t.mimeType){case"video/webm":n=n_;break;case"video/mp4":n=r_}e.g&&(e.i=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(n))}function wo(e,t,n,r){var i=this;this.l=e,this.D=null,this.u=t,this.h={},this.G={},this.Y={},this.g=null,this.R=!1,this.ca=n||function(){},this.L=r||null,this.j={},this.A=new Yn,this.m={},this.F=null,this.I=new Sn,this.V="",this.i=To(this,this.I),this.o=!1,this.K=new Gn(function(){return So(i)}),this.s=!1,this.M="UNKNOWN",this.X=this.aa=!1,this.ea=new Sn}function To(e,t){var n=new MediaSource;return e.A.ka(n,"sourceopen",function(){URL.revokeObjectURL(e.V),t.resolve()}),e.V=i_(n),e.l.src=e.V,n}function So(e){var t,n,r,i,o,s,u,c;return A(function(l){if(1==l.g){t=[];for(n in e.j)for(r=e.j[n],i=r[0],e.j[n]=r.slice(0,1),i&&t.push(i.p.catch(xe)),o=a(r.slice(1)),s=o.next();!s.done;s=o.next())u=s.value,u.p.reject(new ke(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.u&&t.push(e.u.destroy());for(c in e.m)t.push(e.m[c].destroy());return f(l,Promise.all(t),2)}e.A&&(e.A.release(),e.A=null),e.l&&(e.l.removeAttribute("src"),e.l.load(),e.l=null),e.D=null,e.i=null,e.g=null,e.u=null,e.h={},e.m={},e.F=null,e.j={},e.L=null,h(l)})}function Eo(e,t,n){var r=De(n.mimeType,n.codecs);if(t==pb)ko(e,r,e.s,n.external);else{var i=e.D.forceTransmux;(!Y(r)||!e.s&&mb.includes(r))&&(i=!0);var o=Re(n.mimeType,n.codecs);i&&(i=ge(o))&&(r=i(),e.m[t]=r,r=r.convertCodecs(t,o)),o=r+e.D.sourceBufferExtraFeatures,zn(e.K);try{var a=e.i.addSourceBuffer(o)}catch(t){throw new ke(2,3,3015,t,"The mediaSource_ status was"+e.i.readyState+"expected 'open'")}e.s&&(a.mode=o_),e.A.C(a,"error",function(){e.j[t][0].p.reject(new ke(2,3,3014,e.l.error?e.l.error.code:0))}),e.A.C(a,"updateend",function(){return Bo(e,t)}),e.h[t]=a,e.G[t]=r,e.Y[t]=!!n.drmInfos.length}}function ko(e,t,n,r){e.g||(e.g=new Be(e.u));var i=e.g;r=r||e.R,e=e.M,"application/cea-608"==t||"application/cea-708"==t?i.i=null:(i.i=(0,bb[t])(),i.i.setSequenceMode?i.i.setSequenceMode(n):F('Text parsers should have a "setSequenceMode" method!'),i.i.setManifestType?i.i.setManifestType(e):F('Text parsers should have a "setManifestType" method!'),i.u=r)}function Ao(e){return!e.o&&(!e.i||"ended"==e.i.readyState)}function xo(e,t){return e.o?e=null:t==pb?e=e.g.g:(e=Po(e,t),e=!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null),e}function Co(e,t){return e.o?null:t==pb?e.g.h:Wi(Po(e,t))}function Oo(e,t,n){return e.o?0:t==pb?(e=e.g,null==e.h||e.h<n?0:e.h-Math.max(n,e.g)):(e=Po(e,t),qi(e,n))}function Po(e,t){try{return e.h[t].buffered}catch(n){return t in e.h&&B("failed to get buffered range for "+t,n),null}}function Mo(e,t,n,r,i,o){var a=null,s=te(n);if(mb.includes(i))o=Zi(s),o.length&&r&&((t=o.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&t.data&&(a=Math.round(t.data)/1e3),e.ca([{cueTime:r.startTime,data:s,frames:o,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(i.includes("/mp4")&&r&&0==r.timestampOffset&&r.g&&r.g.timescale){var u=r.g.timescale;if(!isNaN(u)){var c=0,l=!1;(new fr).box("moof",hr).box("traf",hr).O("tfdt",function(e){c=no(e.reader,e.version).baseMediaDecodeTime/u,l=!0,e.parser.stop()}).parse(n,!0),l&&(a=c)}}else i.includes("/mp4")||i.includes("/webm")||!vo(s)||(s=(new go).parse(s),t=s.getStartTime()[t],null!=t&&(a=t),s=s.getMetadata(),s.length&&e.ca(s,o,r?r.endTime:null));return a}function Io(e,t,n,r,i,o,a,s){a=void 0!==a&&a,s=void 0!==s&&s;var u,c,l,d,p,g,y,v,m,b,_;return A(function(w){switch(w.g){case 1:if(u=gb,t!=u.fa){w.B(2);break}if(!e.s){w.B(3);break}return f(w,e.ea,4);case 4:c=w.h,e.g.s=c;case 3:return f(w,He(e.g,n,r?r.startTime:null,r?r.endTime:null),5);case 5:return w.return();case 2:if(l=e.h[t].timestampOffset,d=e.G[t],e.m[t]&&(d=e.m[t].getOrginalMimeType()),r&&null!=(p=Mo(e,t,n,r,d,l))&&(g=r.startTime-p,y=Math.abs(l-g),(.1<=y||a||s)&&(l=g,e.X&&(Vo(e,t,function(){return Fo(e,t)}),Vo(e,t,function(){return Uo(e,t,l)}))),v=t==u.wa||!(u.wa in e.h),e.s&&v&&e.ea.resolve(l)),o&&t==u.wa&&(e.g||ko(e,"application/cea-608",e.s,!1),e.F||(m=d.split(";",1)[0],e.F=new oe(m)),r?(b=e.F.j(n),b.length&&Ge(e.g,b,r.startTime,r.endTime,l)):e.F.init(n)),!e.m[t]){w.B(6);break}return f(w,e.m[t].transmux(n,i,r,e.i.duration,t),7);case 7:n=w.h;case 6:return n=qo(e,n,r?r.startTime:null,t),r&&e.s&&t!=u.fa&&(a||s)&&(_=r.startTime,Vo(e,t,function(){return Fo(e,t)}),Vo(e,t,function(){return Uo(e,t,_)})),f(w,Vo(e,t,function(){var r=n;if("video"==t&&e.L){var i=e.L;i.g&&i.g.appendBuffer(r,"video",i.i)}e.h[t].appendBuffer(r)}),8);case 8:h(w)}})}function jo(e,t){var n=Co(e,"video")||0;Ke(e.g,t,n)}function Do(e){e.g&&Ke(e.g,"",0)}function Ro(e,t){var n;return A(function(r){return n=gb,t==n.fa?e.g?f(r,e.g.remove(0,1/0),0):r.return():f(r,Vo(e,t,function(){var n=e.i.duration;0>=n?Bo(e,t):e.h[t].remove(0,n)}),0)})}function Lo(e,t,n,r,i,o,a,s){var u,c,l;return A(function(d){return 1==d.g?(u=gb,t==u.fa?(o||(e.g.s=n),We(e.g,r,i),d.return()):(c=[],f(d,Xo(e,t,a,s),2))):((l=d.h)||c.push(Vo(e,t,function(){return Fo(e,t)})),o||c.push(Vo(e,t,function(){return Uo(e,t,n)})),c.push(Vo(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=i,e.h[t].appendWindowStart=r,Bo(e,t)})),f(d,Promise.all(c),0))})}function No(e,t,n){var r;return A(function(i){return r=gb,t==r.fa?i.return():(Vo(e,t,function(){return Fo(e,t)}),f(i,Vo(e,t,function(){return Uo(e,t,n)}),0))})}function Fo(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,Bo(e,t)}function Uo(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,Bo(e,t)}function Bo(e,t){if(!e.o){var n=e.j[t][0];n&&(n.p.resolve(),Wo(e,t))}}function Vo(e,t,n){return zn(e.K),n={start:n,p:new Sn},e.j[t].push(n),1==e.j[t].length&&Ko(e,t),n.p}function Ho(e,t){var n,r,i,o,a,s,u;return A(function(c){switch(c.g){case 1:zn(e.K),n=[],r={};for(i in e.h)r.cc=new Sn,o={start:function(e){return function(){return e.cc.resolve()}}(r),p:r.cc},e.j[i].push(o),n.push(r.cc),1==e.j[i].length&&o.start(),r={cc:r.cc};return p(c,2),f(c,Promise.all(n),4);case 4:y(c,3);break;case 2:throw a=v(c);case 3:return p(c,5,6),f(c,t(),6);case 6:m(c);for(s in e.h)Wo(e,s);b(c,0);break;case 5:throw u=v(c),new ke(2,3,3015,u,e.l.error||"No error in the media element")}})}function Wo(e,t){e.j[t].shift(),Ko(e,t)}function Ko(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new ke(2,3,3017,t)):n.p.reject(new ke(2,3,3015,r,e.l.error||"No error in the media element")),Wo(e,t)}}function qo(e,t,n,r){var i=e.Y[r];return e.D.insertFakeEncryptionInInit&&null==n&&i&&(ct()||ut())&&"mp4"==e.G[r].split(";")[0].split("/")[1]&&(W("Forcing fake encryption information in init segment."),t=Ni(t)),t}function Go(t,n,r,i){return Vo(t,n,function(){n===pb?W("Change not supported for "+n):(W("Change Type: "+t.G[n]+" -> "+r),e.SourceBuffer&&SourceBuffer.prototype&&SourceBuffer.prototype.changeType?(t.m[n]&&t.m[n].destroy(),i&&(t.m[n]=i),t.h[n].changeType(r+t.D.sourceBufferExtraFeatures),t.G[n]=r):W("Change Type not supported"),Bo(t,n))})}function zo(e,t){var n,r,i,o,s,u,c,l,d,h,p,y,v,_,w,T,S,E,k,x;return A(function(A){switch(A.g){case 1:e.o=!0,n=e.l.currentTime,g(A),e.A.kb(),r=[];for(i in e.m)r.push(e.m[i].destroy());for(o in e.j)for(s=e.j[o],u=s[0],e.j[o]=s.slice(0,1),u&&r.push(u.p.catch(xe)),c=a(s.slice(1)),l=c.next();!l.done;l=c.next())d=l.value,d.p.reject(new ke(2,7,7003,void 0));for(h in e.h){p=e.h[h];try{e.i.removeSourceBuffer(p)}catch(e){}}return f(A,Promise.all(r),4);case 4:return e.m={},e.j={},e.h={},y=e.i.duration,e.I=new Sn,e.i=To(e,e.I),f(A,e.I,5);case 5:for(e.i.duration=y,v=new Sn,_=e.i.sourceBuffers,w=t.size,T=0,e.A.C(_,"addsourcebuffer",function(){++T===w&&v.resolve()}),S=a(t.keys()),E=S.next();!E.done;E=S.next())k=E.value,x=t.get(k),Eo(e,k,x);return e.l.currentTime=n,f(A,v,2);case 2:m(A),e.o=!1,b(A,0)}})}function Yo(e,t){return Ho(e,function(){return zo(e,t)})}function Xo(t,n,r,i){var o,a,s,u,c,l,d,h,p;return A(function(g){return 1==g.g?(o=Ue(Fe(t.G[n]))[0],a=t.G[n].split(";")[0],u=De(r.mimeType,r.codecs),c=t.D.forceTransmux,(!Y(u)||!t.s&&mb.includes(u))&&(c=!0),l=Re(r.mimeType,r.codecs),c&&(d=ge(l))&&(s=d(),u=s.convertCodecs(n,l)),h=Ue(Fe(u))[0],p=u.split(";")[0],o===h&&a===p?g.return(!1):e.SourceBuffer&&SourceBuffer.prototype&&SourceBuffer.prototype.changeType?f(g,Go(t,n,u,s),3):(s&&s.destroy(),f(g,Yo(t,i),3))):g.return(!0)})}function Jo(e,t,n){this.i=e,this.u=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.m=0,this.D=!0,this.F=0,this.s=void 0===n||n,this.G=0,this.A=!1}function $o(e,t,n){this.l=n,this.j=e,this.s=ea(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=t,this.i=function(){}}function Qo(e,t){e.i=t}function Zo(e){this.g=e}function ea(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime,e=a(zi(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function ta(e,t,n,r,i){var o=this;this.u=i,this.g=e,this.A=t,this.s=n,this.l=new Yn,this.j=!1,this.F=e.readyState,this.D=this.h=0,this.i=r,this.o=!1,this.l.C(e,"waiting",function(){return na(o)}),this.m=new it(function(){na(o)}).va(this.s.gapJumpTimerTime)}function na(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.h&&(e.g.autoplay||e.g.currentTime!=e.h)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.i)){t=e.i;var n=t.j,r=ea(n),i=n.g.currentTime,o=Date.now()/1e3;t.g==i&&t.s==r||(t.m=o,t.g=i,t.s=r,t.h=!1),i=o-t.m,(r=i>=t.u&&r&&!t.h)&&(t.i(t.g,i),t.h=!0,t.g=n.g.currentTime,t.o++,t.l(new Mn("stalldetected"))),t=!r}t&&(t=e.g.currentTime,ct()&&0==t&&0!=e.h?F("Samsung Tizen device avoid gap jump!"):(n=e.g.buffered,null==(r=Gi(n,t,e.s.gapDetectionThreshold))||0==r&&!e.o||(i=n.start(r))>=e.A.Wa()||.001>(o=i-t)||(0==r?H("Jumping forward",o,"seconds because of gap before start time of",i):H("Jumping forward",o,"seconds because of gap starting at",n.end(r-1),"and ending at",i),e.g.currentTime=i,t==e.h&&(e.h=i),e.D++,e.u(new Mn("gapjumped")))))}}}function ra(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=a_.value().get(t),n.ka(e,t,r))}function ia(e,t,n,r){var i=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return null==i.l&&(i.l=r()),i.l},this.o=!1,this.h=new Yn,this.i=new ca(e),ra(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){sa(i,i.j())})}function oa(e){return e.o?e.g.currentTime:e.j()}function aa(e,t){0<e.g.readyState?la(e.i,t):ra(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){sa(e,e.j())})}function sa(e,t){.001>Math.abs(e.g.currentTime-t)?ua(e):(e.h.ka(e.g,"seeking",function(){ua(e)}),la(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function ua(e){e.o=!0,e.h.C(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function ca(e){var t=this;this.h=e,this.m=10,this.l=this.i=this.j=0,this.g=new it(function(){0>=t.j?(V(["Failed to move playhead from",t.i,"to",t.l].join(" ")),t.g.stop()):t.h.currentTime!=t.i?t.g.stop():(t.h.currentTime=t.l,t.j--)})}function la(e,t){e.i=e.h.currentTime,e.l=t,e.j=e.m,e.h.currentTime=t,e.g.va(.1)}function da(e){this.g=e,this.j=!1,this.h=null,this.i=new Yn}function fa(e,t,n,r,i,o){var a=this;this.i=e,this.g=t.presentationTimeline,this.D=t.minBufferTime||0,this.l=n,this.u=i,this.s=null,this.A=r,this.o=ya(e,n,o),this.j=new ta(e,t.presentationTimeline,n,this.o,o),this.h=new ia(e,function(){e:{var e=a.j;e.j=!0,e.o=!1,e=oa(a.h);var t=pa(a,e);if(.001<Math.abs(t-e)){var n=Date.now()/1e3;if(!a.s||a.s<n-1){a.s=n,aa(a.h,t),e=void 0;break e}}K("Seek to "+e),a.u(),e=void 0}return e},function(e){var t=a.j;t.g.seeking&&!t.j&&(t.j=!0,t.h=e)},function(){var e=r;return null==e?e=1/0>a.g.getDuration()?a.g.Qb():a.g.Wa():0>e&&(e=a.g.Wa()+e),ha(a,ga(a,e))}),this.m=new it(function(){if(0!=a.i.readyState&&!a.i.paused){var e=oa(a.h);if(ct()&&0==e&&0!=a.A)F("Samsung Tizen device avoid seek into future!");else{var t=a.g.Qb(),n=a.g.Wa();3>n-t&&(t=n-3),e<t&&(t=pa(a,e),H("Jumping forward "+(t-e)+" seconds to catch up with the seek range."),a.i.currentTime=t)}}})}function ha(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function pa(e,t){var n=Math.max(e.D,e.l.rebufferingGoal),r=e.l.safeSeekOffset,i=e.g.Qb(),o=e.g.Wa(),a=e.g.getDuration();3>o-i&&(i=o-3);var s=e.g.xc(n),u=e.g.xc(r);return n=e.g.xc(n+r),t>=a?(K("Playhead past duration."),ha(e,t)):t>o?(K("Playhead past end."),o):t<i?Ki(e.i.buffered,u)?(K("Playhead before start & start is buffered"),u):(K("Playhead before start & start is unbuffered"),n):t>=s||Ki(e.i.buffered,t)?(K("Playhead in safe region or in buffered region."),t):(K("Playhead outside safe region & in unbuffered region."),n)}function ga(e,t){var n=e.g.Qb();return t<n?n:(e=e.g.Wa(),t>e?e:t)}function ya(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new $o(new Zo(e),t.stallThreshold,n),Qo(t,function(t,n){W("Stall detected at "+t+" for "+n+" seconds."),r?(W("Seeking forward "+r+" seconds to break stall."),e.currentTime+=r):(W("Pausing and unpausing to break stall."),e.pause(),e.play())}),t}function va(e){this.g=e,this.l=null,this.j=0,this.m=!1}function ma(e,t,n){return new va([new Hi(e,e+t,function(){return n},0,null,null,e,e,e+t)])}function ba(e,t,n){this.i=e,this.g=t,this.h=n}function _a(){va.call(this,[]),this.h=[]}function wa(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Yc(),this.h=new it(function(){t.g.Ye(.25*t.i)})}function Ta(e){e.h.stop();var t=e.j?0:e.i;if(K("Changing effective playback rate to",t),0<=t)try{return void(e.g.Yc()!=t&&e.g.se(t))}catch(e){}e.h.va(.25),0!=e.g.Yc()&&e.g.se(0)}function Sa(e){var t=this;this.h=e,this.g=new Set,this.i=new it(function(){Ea(t,!1)}).va(.25)}function Ea(e,t){for(var n=a(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function ka(e){jn.call(this),this.g=new Map,this.h=e}function Aa(e,t){var n=e.g.get(t);return n||(n={Cc:[],Ke:null,contentType:t},e.g.set(t,n)),n}function xa(e,t,n){var r=Aa(e,t.contentType);Ca(e,r),e={Wd:t,position:n},r=r.Cc,t=r.findIndex(function(e){return e.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}function Ca(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,i=t.Cc;t.Cc=i.filter(function(e,t){return!(e.position<=n&&t+1<i.length&&i[t+1].position<=n||e.position>=r)})}else t.Cc=[]}function Oa(e){jn.call(this);var t=this;this.g=new Set,this.i=e,this.h=new it(function(){for(var e=t.i(),n=a(t.g),r=n.next();!r.done;r=n.next())r=r.value,r.endTime<e.start&&(t.g.delete(r),r=new Mn("regionremove",new Map([["region",r]])),t.dispatchEvent(r))}).va(2)}function Pa(e,t){jn.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{Gb:null,Fb:u_,yb:function(e,t){return Ma(n,"enter",e,t)}},{Gb:s_,Fb:u_,yb:function(e,t){return Ma(n,"enter",e,t)}},{Gb:c_,Fb:u_,yb:function(e,t){return Ma(n,"enter",e,t)}},{Gb:u_,Fb:s_,yb:function(e,t){return Ma(n,"exit",e,t)}},{Gb:u_,Fb:c_,yb:function(e,t){return Ma(n,"exit",e,t)}},{Gb:s_,Fb:c_,yb:function(e,t){return Ma(n,"skip",e,t)}},{Gb:c_,Fb:s_,yb:function(e,t){return Ma(n,"skip",e,t)}}],this.h=new Yn,this.h.C(this.i,"regionremove",function(e){n.g.delete(e.region)})}function Ma(e,t,n,r){t=new Mn(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}function Ia(e,t,n){this.j=e,this.h=t,this.i=0,this.l=n,this.g=new Map}function ja(e,t){var n=Na(e.h);if(e.h.segmentIndex){if(n=e.h.segmentIndex.sb(Math.max(t.startTime,e.i)))for(;e.g.size<e.j&&null!=t;){var r=!0;t.s&&null!=t.h&&(r=!1),2==t.wb()&&(r=!1),r&&!e.g.has(t)&&(r=new Fa(e.l),Ua(r,t,e.h),e.g.set(t,r)),e.i=t.startTime,t=n.next().value}}else H(n,"missing segmentIndex")}function Da(e){if(0!==e.g.size){for(var t=Na(e.h),n=a(e.g.keys()),r=n.next();!r.done;r=n.next())(r=r.value)&&La(e,r);H(t,"cleared all"),e.i=0}}function Ra(e,t){t&&t!==e.h&&(Da(e),e.h=t)}function La(e,t){var n=Na(e.h),r=e.g.get(t);e.g.delete(t),r&&(r.abort(),H(n,"pop and abort prefetched segment at time:",t.startTime))}function Na(e){return"SegmentPrefetch("+e.type+":"+e.id+")"}function Fa(e){this.i=e,this.g=this.h=null}function Ua(e,t,n){e.g=e.i(t,n,function(t){return A(function(n){return e.h?f(n,e.h(t),0):n.B(0)})})}function Ba(e,t,n,r,i){return e=Bn(e,r,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Va(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.u=1,this.o=this.j=null,this.F=0,this.D=!1,this.i=new Map,this.A=!1,this.G=null,this.s=!1,this.l=new Gn(function(){return Ha(n)})}function Ha(e){var t,n,r,i;return A(function(o){if(1==o.g){for(t=[],n=a(e.i.values()),r=n.next();!r.done;r=n.next())i=r.value,gs(i),t.push(ys(i));return f(o,Promise.all(t),2)}e.i.clear(),e.g=null,e.m=null,e.h=null,h(o)})}function Wa(e,t){var n,r,i,o,a,s,u;A(function(c){switch(c.g){case 1:return n=gb,e.F++,r=e.F,p(c,2),f(c,Ro(e.g.P,n.fa),4);case 4:y(c,3);break;case 2:i=v(c),e.g&&e.g.onError(i);case 3:o=De(t.mimeType,t.codecs),ko(e.g.P,o,e.m.sequenceMode,t.external),a=e.g.P.u,(s=a.isTextVisible()||e.h.alwaysStreamText)&&e.F==r&&(u=Qa(e,t),e.i.set(n.fa,u),ps(e,u,0)),h(c)}})}function Ka(e){var t=e.i.get(pb);t&&(gs(t),ys(t).catch(function(){}),e.i.delete(pb)),e.o=null}function qa(e,t){var n=e.i.get("video");if(n){var r=n.stream;r&&(W("setTrickPlay",t),t?(t=r.trickModeVideo)&&!n.Db&&(W("Engaging trick mode stream",t),Ya(e,t,!1,0,!1),n.Db=r):(r=n.Db)&&(W("Restoring non-trick-mode stream",r),n.Db=null,Ya(e,r,!0,0,!1)))}}function Ga(e,t,n,r,i,o){n=void 0!==n&&n,r=void 0===r?0:r,i=void 0!==i&&i,o=void 0!==o&&o,e.j=t,e.A&&(t.video&&Ya(e,t.video,n,r,i,o),t.audio&&Ya(e,t.audio,n,r,i,o))}function za(e,t){A(function(n){if(1==n.g)return e.o=t,e.A?t.segmentIndex?n.B(2):f(n,t.createSegmentIndex(),2):n.return();Ya(e,t,!0,0,!1),h(n)})}function Ya(e,t,n,r,i,o){var a=e.i.get(t.type);a||t.type!=pb?a&&(a.Db&&(W("switch during trick play mode",t),t.trickModeVideo?(a.Db=t,t=t.trickModeVideo,W("switch found trick play stream",t)):(a.Db=null,W("switch found no special trick play stream"))),a.stream!=t||i?(a.ua&&Ra(a.ua,t),t.type==pb&&(i=De(t.mimeType,t.codecs),ko(e.g.P,i,e.m.sequenceMode,t.external)),a.stream.closeSegmentIndex&&a.stream.closeSegmentIndex(),a.stream=t,a.$=null,a.Ee=!!o,W("switch: switching to Stream "+ms(a)),n&&(a.nc?a.ud=!0:a.sa?(a.mb=!0,a.Rc=r,a.ud=!0):(gs(a),hs(e,a,!0,r).catch(function(t){e.g&&e.g.onError(t)}))),Xa(e,a).catch(function(t){e.g&&e.g.onError(t)})):W("switch: Stream "+ms(a)+" already active")):Wa(e,t)}function Xa(e,t){var n,r;return A(function(i){if(1==i.g)return t.ta?(n=t.stream,r=t.ta,n.segmentIndex?i.B(2):f(i,n.createSegmentIndex(),2)):i.return();if(t.ta!=r||t.stream!=n)return i.return();var o=e.g.Xc(),a=Co(e.g.P,t.type),s=t.stream.segmentIndex.find(t.ra?t.ra.endTime:o),u=null==s?null:t.stream.segmentIndex.get(s);s=u&&u.h?u.h-u.j:null,u&&!s&&(s=(u.endTime-u.getStartTime())*(t.stream.bandwidth||0)/8),s?((u=u.g)&&(s+=(u.h?u.h-u.j:null)||0),u=e.g.getBandwidthEstimate(),o=8*s/u<(a||0)-o-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.ta.h.g>s):o=!1,o&&(H("Aborting current segment request."),t.ta.abort()),h(i)})}function Ja(e,t){var n=ms(t);t.nc?W(n,"clear: already clearing the buffer"):t.mb?W(n,"clear: already waiting"):t.sa?(W(n,"clear: currently updating"),t.mb=!0,t.Rc=0):null==xo(e.g.P,t.type)?(W(n,"clear: nothing buffered"),null==t.Pa&&ps(e,t,0)):(W(n,"clear: handling right now"),gs(t),hs(e,t,!1,0).catch(function(t){e.g&&e.g.onError(t)}))}function $a(e){var t,n,r,i,o,s,u,c,l;return A(function(d){if(1==d.g){if(t=gb,!e.j)throw B("init: no Streams chosen"),new ke(2,5,5006);return n=new Map,r=new Set,e.j.audio&&(n.set(t.ob,e.j.audio),r.add(e.j.audio)),e.j.video&&(n.set(t.wa,e.j.video),r.add(e.j.video)),e.o&&(n.set(t.fa,e.o),r.add(e.o)),i=e.g.P,f(d,i.init(n,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(zn(e.l),e.updateDuration(),o=a(n.keys()),s=o.next();!s.done;s=o.next())u=s.value,c=n.get(u),e.i.has(u)||(l=Qa(e,c),e.i.set(u,l),ps(e,l,0));h(d)})}function Qa(e,t){return{stream:t,type:t.type,$:null,ua:Za(e,t),ra:null,Sb:null,Td:null,Rd:null,Qd:null,Db:null,endOfStream:!1,sa:!1,Pa:null,mb:!1,Rc:0,ud:!1,nc:!1,Fc:!0,Zd:!1,je:!1,zc:!1,ta:null}}function Za(e,t){return"video"!==t.type&&"audio"!==t.type?null:0<e.h.segmentPrefetchLimit?new Ia(e.h.segmentPrefetchLimit,t,function(t,n,r){return fs(e,t,n,r)}):null}function es(e,t){var n,r,i,o,a,s;return A(function(u){switch(u.g){case 1:if(zn(e.l),n=ms(t),t.sa||null==t.Pa||t.nc)return u.return();if(t.Pa=null,!t.mb){u.B(2);break}return W(n,"skipping update and clearing the buffer"),f(u,hs(e,t,t.ud,t.Rc),3);case 3:return u.return();case 2:if(t.stream.segmentIndex){u.B(4);break}return r=t.stream,f(u,t.stream.createSegmentIndex(),5);case 5:if(r!=t.stream)return r.closeSegmentIndex&&r.closeSegmentIndex(),t.sa||t.Pa||ps(e,t,0),u.return();case 4:p(u,6),i=ts(e,t),null!=i&&(ps(e,t,i),t.zc=!1),y(u,7);break;case 6:return o=v(u),f(u,vs(e,t,o),8);case 8:return u.return();case 7:if(a=Array.from(e.i.values()),!e.A||!a.every(function(e){return e.endOfStream})){u.B(0);break}return K(n,"calling endOfStream()..."),f(u,e.g.P.endOfStream(),10);case 10:zn(e.l),s=e.g.P.getDuration(),0!=s&&s<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Na(s),h(u)}})}function ts(e,t){if(ls(t))return jo(e.g.P,t.stream.originalId||""),null;t.type==pb&&Do(e.g.P);var n=ms(t),r=e.g.Xc(),i=t.ra?t.ra.endTime:r;q(n,"timeNeeded="+i);var o=Oo(e.g.P,t.type,r);q(n,"update_:","presentationTime="+r,"bufferedAhead="+o);var s=Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.u,u=e.m.presentationTimeline.getDuration()-i,c=Co(e.g.P,t.type);if(1e-6>u&&c)return W(n,"buffered to end of presentation"),t.endOfStream=!0,"video"==t.type&&(e=e.i.get(pb))&&ls(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,o>=s)return q(n,"buffering goal met"),e.h.updateIntervalSeconds/2;if(!(o=ns(e,t,r,c)))return e.h.updateIntervalSeconds;for(s=1/0,u=Array.from(e.i.values()),u=a(u),c=u.next();!c.done;c=u.next())c=c.value,ls(c)||c.$&&!c.$.current()||(s=Math.min(s,c.ra?c.ra.endTime:r));return i>=s+e.m.presentationTimeline.g?(q(n,"waiting for other streams to buffer"),e.h.updateIntervalSeconds):(t.ua&&t.$&&ja(t.ua,o),rs(e,t,r,o).catch(function(){}),null)}function ns(e,t,n,r){var i=ms(t);if(t.$)return t.$.current();if(t.ra||r)return n=t.ra?t.ra.endTime:r,K(i,"looking up segment from new stream endTime:",n),t.Zd=!0,t.$=t.stream.segmentIndex.sb(n),t=t.$&&t.$.next().value,null==t&&V(i,"cannot find segment","endTime:",n),t;e=e.h.inaccurateManifestTolerance,r=Math.max(n-e,0),K(i,"looking up segment","lookupTime:",r,"presentationTime:",n);var o=null;return e&&(t.$=t.stream.segmentIndex.sb(r),o=t.$&&t.$.next().value),o||(t.$=t.stream.segmentIndex.sb(n),o=t.$&&t.$.next().value),null==o&&V(i,"cannot find segment","lookupTime:",r,"presentationTime:",n),o}function rs(t,n,r,i){var o,a,s,u,c,l,d,h,g,m,b,_,w,T,S,E,k;return A(function(x){switch(x.g){case 1:if(o=gb,a=ms(n),K(a,"fetchAndAppend_:","presentationTime="+r,"reference.startTime="+i.startTime,"reference.endTime="+i.endTime),s=n.stream,u=n.$,n.sa=!0,p(x,2),2==i.wb())throw new ke(1,1,1011);return f(x,ss(t,n,i),4);case 4:return zn(t.l),t.s?x.return():(q(a,"fetching segment"),c="video/mp4"==s.mimeType||"audio/mp4"==s.mimeType,l=e.ReadableStream,t.h.lowLatencyMode&&l&&c&&("HLS"!=t.m.type||i.u)?(g=new Uint8Array(0),b=m=!1,_=function(e){var o,a,u;return A(function(c){return m?c.return():(b=!0,zn(t.l),t.s?c.return():(g=os(g,e),o=!1,a=0,(new fr).box("mdat",function(e){a=e.size+e.start,o=!0}).parse(g,!1,!0),o?(u=g.subarray(0,a),g=g.subarray(a),f(c,us(t,n,r,s,i,u),0)):c.B(0)))})},f(x,ds(t,n,i,_),11)):(t.h.lowLatencyMode&&!l&&V("Low latency streaming mode is enabled, but ReadableStream is not supported by the browser."),d=ds(t,n,i),f(x,d,7)));case 7:if(h=x.h,zn(t.l),t.s)return x.return();if(!i.A){x.B(8);break}return f(x,is(h,i,u),9);case 9:h=x.h;case 8:return zn(t.l),n.mb?(H(a,"waitingToClearBuffer, skip append"),n.sa=!1,ps(t,n,0),x.return()):f(x,us(t,n,r,s,i,h),6);case 11:if(w=x.h,b){x.B(6);break}return m=!0,zn(t.l),t.s?x.return():n.mb?(H(a,"waitingToClearBuffer, skip append"),n.sa=!1,ps(t,n,0),x.return()):f(x,us(t,n,r,s,i,w),6);case 6:if(zn(t.l),t.s)return x.return();n.ra=i,T=u.next().value,q(a,"advancing to next segment",T),n.sa=!1,n.je=!1,S=t.g.P.Va(),E=S[n.type],K(a,"finished fetch and append",JSON.stringify(E)),n.mb||t.g.ce(i.startTime,i.endTime,n.type),ps(t,n,0),y(x,0);break;case 2:if(k=v(x),zn(t.l,k),t.s)return x.return();if(n.sa=!1,7001==k.code)n.sa=!1,gs(n),ps(t,n,0),x.B(0);else if(n.type==o.fa&&t.h.ignoreTextStreamFailures)1001==k.code?V(a,"Text stream failed to download. Proceeding without it."):V(a,"Text stream failed to parse. Proceeding without it."),t.i.delete(o.fa),x.B(0);else{if(3017!=k.code)return B(a,"failed fetch and append: code="+k.code),n.zc=!0,k.severity=2,f(x,vs(t,n,k),0);as(t,n,k),x.B(0)}}})}function is(t,n,r){var i,o,a,s;return A(function(u){if(1==u.g)return i=n.A,i.cryptoKey?u.B(2):f(u,i.fetchKey(),3);if(!(o=i.iv))for(o=te(new ArrayBuffer(16)),a=i.firstMediaSequenceNumber+r.g,s=o.byteLength-1;0<=s;s--)o[s]=255&a,a>>=8;return u.return(e.crypto.subtle.decrypt({name:"AES-CBC",iv:o},i.cryptoKey,t))})}function os(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function as(e,t,n){var r=ms(t);if(Array.from(e.i.values()).some(function(e){return e!=t&&e.je}))W(r,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var i=Math.round(100*e.u);if(20<i)e.u-=.2;else{if(!(4<i))return B(r,"MediaSource threw QuotaExceededError too many times"),t.zc=!0,e.s=!0,void e.g.onError(n);e.u-=.04}V(r,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*e.u))+"%"),t.je=!0}ps(e,t,4)}function ss(e,t,n){var r,i,o,a,s,u,c,l,d,h,g,m,b,_;return A(function(w){return r=gb,i=ms(t),o=[],a=Math.max(0,n.appendWindowStart-.1),s=n.appendWindowEnd+.01,u=Ue(t.stream.codecs)[0],c=t.stream.mimeType.split(";")[0],l=n.timestampOffset,l==t.Td&&a==t.Rd&&s==t.Qd&&u==t.fd&&c==t.Sd||(K(i,"setting timestamp offset to "+l),K(i,"setting append window start to "+a),K(i,"setting append window end to "+s),(t.fd&&u!=t.fd||t.Sd&&c!=t.Sd)&&(t.type===r.wa?(d=e.i.get(r.ob))&&(d.Sb=null,ys(d)):t.type===r.ob&&(h=e.i.get(r.wa))&&(h.Sb=null,ys(h))),g=function(){var n,i,o;return A(function(d){if(1==d.g)return n=new Map,e.j.audio&&n.set(r.ob,e.j.audio),e.j.video&&n.set(r.wa,e.j.video),p(d,2),t.Rd=a,t.Qd=s,t.fd=u,t.Sd=c,t.Td=l,i=e.m.sequenceMode||"HLS"==e.m.type,f(d,Lo(e.g.P,t.type,l,a,s,i,t.stream,n),4);if(2!=d.g)return y(d,0);throw o=v(d),t.Rd=null,t.Qd=null,t.fd=null,t.Td=null,o})},o.push(g())),!Vi(n.g,t.Sb)&&(t.Sb=n.g)&&(K(i,"fetching init segment"),m=ds(e,t,n.g,void 0,!0),b=function(){var o,a,s,u,c,l;return A(function(d){switch(d.g){case 1:return p(d,2),f(d,m,4);case 4:return o=d.h,zn(e.l),a=null,s=new Map,u=new fr,u.box("moov",hr).box("trak",hr).box("mdia",hr).O("mdhd",function(e){a=ro(e.reader,e.version).timescale}).box("hdlr",function(e){e=e.reader,e.skip(8),e=e.$a(4);var t=String.fromCharCode(e[0]);switch(t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])){case"soun":s.set(r.ob,a);break;case"vide":s.set(r.wa,a)}a=null}).parse(o),s.has(t.type)?n.g.timescale=s.get(t.type):null!=a&&(n.g.timescale=a),K(i,"appending init segment"),c=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,f(d,e.g.Fe(t.type,o),5);case 5:return f(d,Io(e.g.P,t.type,o,null,t.stream,c),6);case 6:y(d,0);break;case 2:throw l=v(d),t.Sb=null,l}})},e.g.xg(n.startTime,n.g),o.push(b())),_=t.ra?t.ra.m:null,e.m.sequenceMode?(n.m!=_||t.Zd)&&(t.Zd=!1,o.push(No(e.g.P,t.type,n.startTime))):e.m.ignoreManifestTimestampsInSegmentsMode&&n.m!=_&&o.push(No(e.g.P,t.type,n.timestampOffset)),f(w,Promise.all(o),0)})}function us(e,t,n,r,i,o){var a,s,u,c,l,d,p;return A(function(g){switch(g.g){case 1:return a=ms(t),s=r.closedCaptions&&0<r.closedCaptions.size,c=null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,l=e.h.parsePrftBox&&!e.D,(c||l)&&(u=new fr),c&&u.O("emsg",function(t){var n=r.emsgSchemeIdUris;if(0===t.version)var o=t.reader.Dc(),a=t.reader.Dc(),s=t.reader.J(),u=t.reader.J(),c=t.reader.J(),l=t.reader.J(),d=i.startTime+u/s;else s=t.reader.J(),d=t.reader.Vb()/s+i.timestampOffset,u=d-i.startTime,c=t.reader.J(),l=t.reader.J(),o=t.reader.Dc(),a=t.reader.Dc();t=t.reader.$a(t.reader.getLength()-t.reader.ga()),(n&&n.includes(o)||e.h.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==o?e.g.yg():(n=(new Map).set("detail",{startTime:d,endTime:d+c/s,schemeIdUri:o,value:a,timescale:s,presentationTimeDelta:u,eventDuration:c,id:l,messageData:t}),n=new Mn("emsg",n),n.cancelable=!0,e.g.onEvent(n),n.defaultPrevented||"https://aomedia.org/emsg/ID3"!=o&&"https://developer.apple.com/streaming/emsg-id3"!=o||(o=Zi(t),o.length&&i&&e.g.zg([{cueTime:i.startTime,data:t,frames:o,dts:i.startTime,pts:i.startTime}],0,i.endTime))))}),l&&u.O("prft",function(t){if(!e.D&&i.g.timescale){var n=t.reader,r=t.version;n.J(),t=n.J();t=1e3*t+n.J()/Math.pow(2,32)*1e3,0===r?n=n.J():(r=n.J(),n=n.J(),n=r*Math.pow(2,32)+n),t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+t).getTime(),n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/i.g.timescale*1e3)}),n=new Mn("prft",n),e.g.onEvent(n),e.D=!0}}),(c||l)&&u.parse(o),f(g,cs(e,t,n),2);case 2:return zn(e.l),d=t.Fc,t.Fc=!1,p=t.Ee,t.Ee=!1,f(g,e.g.Fe(t.type,o),3);case 3:return f(g,Io(e.g.P,t.type,o,i,r,s,d,p),4);case 4:zn(e.l),q(a,"appended media segment"),h(g)}})}function cs(e,t,n){var r,i,o,a,s;return A(function(u){if(1==u.g)return r=ms(t),q(r,"checking buffer length"),i=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),null==(o=xo(e.g.P,t.type))?(q(r,"buffer behind okay because nothing buffered:","presentationTime="+n,"bufferBehind="+i),u.return()):(a=n-o,.01>=(s=a-i)?(q(r,"buffer behind okay:","presentationTime="+n,"bufferedBehind="+a,"bufferBehind="+i,"underflow="+Math.abs(s)),u.return()):(K(r,"buffer behind too large:","presentationTime="+n,"bufferedBehind="+a,"bufferBehind="+i,"overflow="+s),f(u,e.g.P.remove(t.type,o,o+s),2)));zn(e.l),K(r,"evicted "+s+" seconds"),h(u)})}function ls(e){return e&&e.type==pb&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function ds(e,t,n,r,i){var o,a,s;return A(function(u){if(1==u.g){if(n instanceof Bi&&(o=n.g))return u.return(o);if(a=null,t.ua&&n instanceof Hi){var c=t.ua,l=Na(c.h);if(c.g.has(n)){var d=c.g.get(n);r&&(d.h=r),c.g.delete(n),W(l,"reused prefetched segment at time:",n.startTime,"mapSize",c.g.size),a=d.g}else W(l,"missed segment at time:",n.startTime,"mapSize",c.g.size),a=null}return a||(a=fs(e,n,t.stream,r,i)),t.ta=a,f(u,a.promise,2)}return s=u.h,t.ta=null,u.return(s.data)})}function fs(e,t,n,r,i){i=i?0:1;var o=t instanceof Hi?t:void 0;return r=Ba(t.za(),t.j,t.h,e.h.retryParameters,r),q("fetching: reference=",t),e.g.Bb.request(Rb,r,{type:i,stream:n,segment:o})}function hs(e,t,n,r){var i,o,a;return A(function(s){return 1==s.g?(i=ms(t),t.mb=!1,t.ud=!1,t.Rc=0,t.nc=!0,t.ra=null,t.Sb=null,t.$=null,W(i,"clearing buffer"),t.ua&&Da(t.ua),r?(o=e.g.Xc(),a=e.g.P.getDuration(),f(s,e.g.P.remove(t.type,o+r,a),3)):f(s,Ro(e.g.P,t.type),4)):3!=s.g?(zn(e.l),n?f(s,e.g.P.flush(t.type),3):s.B(3)):(zn(e.l),W(i,"cleared buffer"),t.nc=!1,t.endOfStream=!1,t.sa||t.Pa||ps(e,t,0),void h(s))})}function ps(e,t,n){var r=ms(t),i=t.type;i!=pb||e.i.has(i)?(q(r,"updating in "+n+" seconds"),t.Pa=new rt(function(){var n;return A(function(r){return 1==r.g?(p(r,2),f(r,es(e,t),4)):2!=r.g?y(r,0):(n=v(r),e.g&&e.g.onError(n),void h(r))})}).U(n)):K(r,"Text stream is unloaded. No update is needed.")}function gs(e){null!=e.Pa&&(e.Pa.stop(),e.Pa=null)}function ys(e){return A(function(t){return e.ta?f(t,e.ta.abort(),0):t.B(0)})}function vs(e,t,n){var r;return A(function(i){if(1==i.g)return f(i,wn(e.G),2);zn(e.l),r=0===e.h.maxDisabledTime&&1011==n.code?1:e.h.maxDisabledTime,1===n.category&&0<r&&(n.handled=e.g.Gd(t.stream,r),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.h.failureCallback(n),h(i)})}function ms(e){return"("+e.type+":"+e.stream.id+")"}function bs(e,t){var n=Uc(),r=this;this.j=t,this.i=e,this.l=n,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then(function(){return Ts(r)}),this.s=new Gn(function(){return _s(r)})}function _s(e){var t,n,r;return A(function(i){if(1==i.g)return e.h&&e.h.abort(),Es(e),f(i,e.u,2);for(e.g&&e.g.Ma.Cb(),t=a(e.m),n=t.next();!n.done;n=t.next())r=n.value,r.Ma.Cb();e.g=null,e.m=[],e.j=null,h(i)})}function ws(e,t){var n={Tb:function(){},md:function(){},Cb:function(){},onError:function(){},od:function(){},Qh:function(){}};return e.m.push({create:t,Ma:n}),e.h&&e.h.abort(),Es(e),n}function Ts(e){return A(function(t){if(e.s.g)t=t.B(0);else{if(0==e.m.length||e.g&&!e.g.xb)var n=!1;else{e.g&&(e.g.Ma.Cb(),e.g=null),n=e.m.shift();var r=n.create(e.l);r?(n.Ma.Tb(),e.g={node:r.node,T:r.T,xb:r.xb,Ma:n.Ma}):n.Ma.od(),n=!0}n?n=Promise.resolve():e.g?n=Ss(e):(e.j.wg(e.i),e.o=new Sn,n=e.o),t=f(t,n,1)}return t})}function Ss(e){var t,n;return A(function(r){switch(r.g){case 1:return e.i=e.j.Wf(e.i,e.l,e.g.node,e.g.T),p(r,2),e.h=e.j.Hf(e.i,e.l,e.g.T),f(r,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.Ma.md(),e.g=null),y(r,0);break;case 2:return t=v(r),7001==t.code?e.g.Ma.Cb():e.g.Ma.onError(t),e.g=null,e.h=null,n=e,f(r,e.j.handleError(e.l,t),5);case 5:n.i=r.h,h(r)}})}function Es(e){e.o&&(e.o.resolve(),e.o=null)}function ks(e){if(e.F)return"\n";if(e.g.length)return e.g.map(ks).join("");var t=[],n=700<=e.u,r="italic"==e.o,i=e.h.includes("underline");return n&&t.push(["b"]),r&&t.push(["i"]),i&&t.push(["u"]),n="",(r=As(e.l))&&(n+="."+r),(r=As(e.backgroundColor))&&(n+=".bg_"+r),n&&t.push(["c",n]),t.reduceRight(function(e,t){var n=a(t);return t=n.next().value,n=n.next().value,"<"+t+(void 0===n?"":n)+">"+e+"</"+t+">"},e.T)}function As(e){switch(e.toLowerCase()){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function xs(e,t){e=a(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.aa)xs(n.g,t);else{var r=n.clone();r.g=[],r.T=ks(n),t.push(r)}return t}function Cs(e){this.g=null;for(var t=a(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())n=n.value,n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function Os(e){if(e.startTime>=e.endTime)return V("Invalid cue times: "+e.startTime+" - "+e.endTime),null;var t=new VTTCue(e.startTime,e.endTime,e.T);t.lineAlign=e.s,t.positionAlign=e.I,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.G&&(t.snapToLines=!1),null!=e.j&&(t.line=e.j),null!=e.position&&(t.position=e.position),t}function Ps(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=a(Array.from(e.cues)),i=r.next();!i.done;i=r.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=n}function Ms(){}function Is(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function js(t,n){var r=this;this.j=!1,this.i=[],this.A=t,this.m=n,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new it(function(){Ls(r)}).va(.25),this.h=new Map,this.s=new Yn,this.s.C(document,"fullscreenchange",function(){Ls(r,!0)}),this.l=null,"ResizeObserver"in e&&(this.l=new ResizeObserver(function(){Ls(r,!0)}),this.l.observe(this.g)),this.o=new Map}function Ds(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function Rs(e,t,n,r,i){var o=!1,s=[],u=[];t=a(t);for(var c=t.next();!c.done;c=t.next()){c=c.value,i.push(c);var l=e.h.get(c),d=c.startTime<=r&&c.endTime>r,f=l?l.rf:null;l&&(s.push(l.Fd),l.Ec&&s.push(l.Ec),d||(o=!0,e.h.delete(c),l=null)),d&&(u.push(c),l?Ds(e,f)||(o=!0):(Ns(e,c,i),l=e.h.get(c),f=l.rf,o=!0)),0<c.g.length&&f&&Rs(e,c.g,f,r,i),i.pop()}if(o){for(r=a(s),i=r.next();!i.done;i=r.next())i=i.value,i.parentElement&&!i.id.includes("shaka-text-region")&&i.parentElement.removeChild(i);for(u.sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),u=a(u),c=u.next();!c.done;c=u.next())r=e.h.get(c.value),r.Ec?(n.appendChild(r.Ec),r.Ec.appendChild(r.Fd)):n.appendChild(r.Fd)}}function Ls(e,t){if(e.g){var n=e.A.currentTime;if(!e.j||(void 0===t?0:t)){t=a(e.o.values());for(var r=t.next();!r.done;r=t.next())Is(r.value);Is(e.g),e.h.clear(),e.o.clear()}if(e.j){t=new Map,r=a(e.h.keys());for(var i=r.next();!i.done;i=r.next())i=i.value,t.set(i,e.h.get(i));Rs(e,e.i,e.g,n,[])}}}function Ns(e,t,n){var r=1<n.length,i=r?"span":"div";t.F&&(i="br"),r=!r&&0<t.g.length;var o=document.createElement(i);if("br"!=i&&Us(e,o,t,n,r),n=null,t.region&&t.region.id)if(n=t.region,i=n.id+"_"+n.width+"x"+n.height+(n.i==Qm?"%":"px")+"-"+n.g+"x"+n.h+(n.j==Qm?"%":"px"),e.o.has(i))n=e.o.get(i);else{var a=document.createElement("span"),s=n.i==Qm?"%":"px",u=n.l==Qm?"%":"px",c=n.j==Qm?"%":"px";a.id="shaka-text-region---"+i,a.classList.add("shaka-text-region"),a.style.height=n.height+s,a.style.width=n.width+u,a.style.position="absolute",a.style.top=n.h+c,a.style.left=n.g+c,a.style.display="flex",a.style.flexDirection="column",a.style.alignItems="center",a.style.justifyContent="before"==t.i?"flex-start":"center"==t.i?"center":"flex-end",e.o.set(i,a),n=a}i=o,r&&(i=document.createElement("span"),i.classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,i.style.lineHeight="normal",o.appendChild(i)),e.h.set(t,{Fd:o,rf:i,Ec:n})}function Fs(e){var t=e.direction,n=e.I;return e=e.textAlign,n!==Nm?n:"left"===e||"start"===e&&t===Hm||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===Hm?"line-right":"center"}function Us(e,t,n,r,i){var o=t.style,a=0==n.g.length,s=1<r.length;o.whiteSpace="pre-wrap";var u=n.T.replace(/\s+$/g,function(e){return" ".repeat(e.length)});if(o.webkitTextStrokeColor=n.L,o.webkitTextStrokeWidth=n.qa,o.color=n.l,o.direction=n.direction,o.opacity=n.D,o.paddingLeft=Bs(n.ca,n,e.m),o.paddingRight=Bs(n.ca,n,e.m),o.textShadow=n.K,n.R)o.backgroundImage="url('"+n.R+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",o.width="100%",o.height="100%";else{if(n.g.length)var c=t;else c=document.createElement("span"),t.appendChild(c);n.V&&(c.style.border=n.V),i||((t=Vs(r,function(e){return e.backgroundColor}))?c.style.backgroundColor=t:u&&(c.style.backgroundColor="rgba(0, 0, 0, 0.8)")),u&&(c.textContent=u)}s&&!r[r.length-1].aa?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",o.justifyContent="before"==n.i?"flex-start":"center"==n.i?"center":"flex-end"),a||(o.margin="0"),o.fontFamily=n.m,o.fontWeight=n.u.toString(),o.fontStyle=n.o,o.letterSpacing=n.X,o.fontSize=Bs(n.A,n,e.m),null!=n.j&&(e=n.G,0==n.j&&e==Km&&(e=1),1==e&&(o.position="absolute",n.writingMode==Wm?(o.width="100%",n.s==qm?o.top=n.j+"%":"end"==n.s&&(o.bottom=100-n.j+"%")):"vertical-lr"==n.writingMode?(o.height="100%",n.s==qm?o.left=n.j+"%":"end"==n.s&&(o.right=100-n.j+"%")):(o.height="100%",n.s==qm?o.right=n.j+"%":"end"==n.s&&(o.left=100-n.j+"%")))),o.lineHeight=n.ea,null!=n.position&&(n.writingMode==Wm?o.paddingLeft=n.position:o.paddingTop=n.position),e=Fs(n),"line-left"==e?o.cssFloat="left":"line-right"==e&&(o.cssFloat="right"),o.textAlign=n.textAlign,o.textDecoration=n.h.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Wm?o.width=n.size+"%":o.height=n.size+"%")}function Bs(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var i=r.value;switch(r.unit){case"%":return i/100*n.clientHeight/t.Y.rows+"px";case"c":return n.clientHeight*i/t.Y.rows+"px";default:return e}}function Vs(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||0===r)return r}return null}function Hs(e,t){function n(e){for(var n=e,r=a(t),i=r.next();!i.done;i=r.next())i=i.value,i.end&&i.start<e&&(n+=i.end-i.start);return e=Math.floor(n/3600),r=Math.floor(n/60%60),i=Math.floor(n%60),n=Math.floor(1e3*n%1e3),(10>e?"0":"")+e+":"+(10>r?"0":"")+r+":"+(10>i?"0":"")+i+"."+(100>n?10>n?"00":"0":"")+n}var r=xs(e,[]);e="WEBVTT\n\n",r=a(r);for(var i=r.next();!i.done;i=r.next())i=i.value,e+=n(i.startTime)+" --\x3e "+n(i.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case Fm:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(i)+"\n",e+=i.T+"\n\n";return e}function Ws(e,t){this.h=e,this.g=t,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function Ks(e,t,n){try{if(!e.g.enabled)return t;var r=qs(e);e:{switch(n){case"video/webm":case"video/mp4":var i=h_;break e;case"application/x-mpegurl":i=l_;break e}i=void 0}r.ot=i,r.su=!0;var o=Js(r);return Qs(t,o)}catch(e){return U("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}function qs(t){return t.j||(t.j=t.g.sessionId||e.crypto.randomUUID()),{v:1,sf:t.o,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function Gs(e,t,n){n=void 0===n?{}:n;var r=void 0===r?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,qs(e)),n.pr=e.h.Wc();var i=n.ot===f_||n.ot===h_;if(e.l&&i&&(n.bs=!0,n.su=!0,e.l=!1),null==n.su&&(n.su=e.m),r)e=$s(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var o=Js(n);o&&(t.uris=t.uris.map(function(e){return Qs(e,o)}))}}}function zs(e){if(0===e.type)return p_;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?h_:f_;if("audio"==t)return d_;if("text"==t)return"application/mp4"===e.mimeType?y_:g_}}function Ys(e,t){if(t=e.h.Va()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):NaN}function Xs(e,t){var n=e.h.hb();if(!n.length)return NaN;e=n[0],n=a(n);for(var r=n.next();!r.done;r=n.next())r=r.value,"variant"===r.type&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case f_:return e.videoBandwidth||NaN;case d_:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Js(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}var r=[],i={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},o=Object.keys(e||{}).sort();o=a(o);for(var s=o.next();!s.done;s=o.next()){s=s.value;var u=e[s];if(function(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}(u)&&("v"!==s||1!==u)&&("pr"!=s||1!==u)){var c=i[s];c&&(u=c(u)),c=typeof u;var l=void 0;l="string"===c&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(u):"boolean"===c?s:"symbol"===c?s+"="+u.description:s+"="+u,r.push(l)}}return r.join(",")}function $s(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=a(t);for(var s=t.next();!s.done;s=t.next())s=s.value,i[null!=o[s]?o[s]:1][s]=e[s];for(e=0;e<i.length;e++)(o=Js(i[e]))&&(n["CMCD-"+r[e]]=o);return n}function Qs(e,t){return!t||e.includes("offline:")?e:(e=new ye(e),e.g.set("CMCD",t),e.toString())}function Zs(){}function eu(e,t,n,r,i){var o,a=i in r,s=!0;for(o in t){var u=i+"."+o,c=a?r[i]:n[o];a||o in n?void 0===t[o]?void 0===c||a?delete e[o]:e[o]=Dn(c):c.constructor==Object&&t[o]&&t[o].constructor==Object?(e[o]||(e[o]=Dn(c)),u=eu(e[o],t[o],c,r,u),s=s&&u):typeof t[o]!=typeof c||null==t[o]||"function"!=typeof t[o]&&t[o].constructor!=c.constructor?(N("Invalid config, wrong type for "+u),s=!1):("function"==typeof n[o]&&n[o].length!=t[o].length&&F("Unexpected number of arguments for "+u),e[o]=t[o]):(N("Invalid config, unrecognized key "+u),s=!1)}return s}function tu(e,t){for(var n={},r=n,i=0,o=0;!(0>(i=e.indexOf(".",i)));)0!=i&&"\\"==e[i-1]||(o=e.substring(o,i).replace(/\\\./g,"."),r[o]={},r=r[o],o=i+1),i+=1;return r[e.substring(o).replace(/\\\./g,".")]=t,n}function nu(e,t){return e&&t}function ru(){}function iu(e){return e=sr(e),new ye(e).Ja}function ou(e,t,n){function r(e){ne(o).setUint32(a,e.byteLength,!0),a+=4,o.set(te(e),a),a+=e.byteLength}if(!n||!n.byteLength)throw new ke(2,6,6015);var i;i="string"==typeof t?cr(t,!0):t,e=sr(e),e=cr(e,!0);var o=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),a=0;return r(e),r(i),r(n),o}function au(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,n=sr(e).split("skd://").pop(),ou(e,n,t))}function su(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")}function uu(){}function cu(){var t=1/0;navigator.connection&&navigator.connection.saveData&&(t=360);var n={retryParameters:Tn(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(t,n,r){return e.shakaMediaKeysPolyfill&&"skd"==n&&(n=r.serverCertificate,r=iu(t),t=ou(t,r,n)),t},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:ut(),minHdcpVersion:""},r={retryParameters:Tn(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:uuid:adb41c24-2dbf-4a6d-958b-4457c0d27b95":"com.tvkey.drm"},manifestPreprocessor:function(e){return nu([e],e)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(pt("Tizen 3")||pt("Tizen 2")||lt()||ft()),ignoreManifestTimestampsInSegmentsMode:!1},mss:{manifestPreprocessor:function(e){return nu([e],e)},sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},i={retryParameters:Tn(),failureCallback:function(e){return B("Unhandled streaming error",e),nu([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1};(pt("Web0S")||ct()||pt("CrKey"))&&(i.stallSkip=0);var o={trackSelectionCallback:function(e){return A(function(t){return t.return(e)})},downloadSizeCallback:function(e){var t;return A(function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?f(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))})},progressCallback:function(e,t){return nu([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},a={drm:n,manifest:r,streaming:i,mediaSource:{sourceBufferExtraFeatures:"",forceTransmux:!1,insertFakeEncryptionInInit:!0},offline:o,abrFactory:function(){return new en},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1}};return o.trackSelectionCallback=function(e){return A(function(t){return t.return(du(e,a.preferredAudioLanguage))})},a}function lu(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return eu(e,t,n||cu(),r,"")}function du(e,t){var n=e.filter(function(e){return"variant"==e.type}),r=[],i=tt(t,n.map(function(e){return e.language}));i&&(r=n.filter(function(e){return $e(e.language)==i})),0==r.length&&(r=n.filter(function(e){return e.primary})),0==r.length&&(1<new Set(n.map(function(e){return e.language})).size&&V("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),r=n);var o=r.filter(function(e){return e.height&&480>=e.height});for(o.length&&(o.sort(function(e,t){return t.height-e.height}),r=o.filter(function(e){return e.height==o[0].height})),t=[],r.length&&(n=Math.floor(r.length/2),r.sort(function(e,t){return e.bandwidth-t.bandwidth}),t.push(r[n])),e=a(e),r=e.next();!r.done;r=e.next())r=r.value,r.type!=pb&&"image"!=r.type||t.push(r);return t}function fu(){this.g=null,this.h=[]}function hu(e,t){if(null==e.g)K("Changing Player state to",t),e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp,e.g.state!=t&&(K("Changing Player state to",t),e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function pu(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=a(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function gu(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=a(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}function yu(){this.i=this.h=null,this.g=[]}function vu(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function mu(){this.u=this.A=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.M=this.R=this.I=this.K=this.L=this.l=this.o=NaN,this.g=new fu,this.h=new yu}function bu(t,n){jn.call(this);var r=this;this.Vd=null,this.m=m_,this.Uc=this.h=null,this.aa=!1,this.dd=new Yn,this.jc=new Yn,this.o=new Yn,this.Zb=this.i=this.ed=this.K=this.j=this.qa=this.L=this.qf=this.V=this.Ga=this.M=this.$c=this.I=this.Lb=this.A=this.G=this.l=this.F=null,this.qc=!1,this.Yd=this.s=null,this.me=1e9,this.g=rc(this),this.he={width:1/0,height:1/0},this.u=null,this.Ib=new hn(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel),this.Jb=this.g.preferredTextLanguage,this.pc=this.g.preferredTextRole,this.mc=this.g.preferForcedSubs,this.lc=[],this.rc=null,n&&n(this),this.V=zu(this),this.F=Vu(this),this.F.qe(this.g.streaming.forceHTTPS),this.D=null,E_&&(this.D=E_()),this.dd.C(e,"online",function(){kc(r),r.le()}),this.R={name:"detach"},this.X={name:"attach"},this.ea={name:"unload"},this.ve={name:"manifest-parser"},this.ge={name:"manifest"},this.Kb={name:"media-source"},this.ae={name:"drm-engine"},this.Y={name:"load"},this.ye={name:"src-equals-drm-engine"},this.Mb={name:"src-equals"};var i=new Map;i.set(this.X,function(e,t){return Cn(Eu(r,e,t))}),i.set(this.R,function(e){return e.mediaElement&&(r.jc.kb(),e.mediaElement=null),r.D&&r.D.release(),r.h=null,e=Promise.resolve(),Cn(e)}),i.set(this.ea,function(e){return Cn(ku(r,e))}),i.set(this.Kb,function(e){return e=Au(r,e),Cn(e)}),i.set(this.ve,function(e,t){return e=xu(r,e,t),Cn(e)}),i.set(this.ge,function(e){return Cu(r,e)}),i.set(this.ae,function(e){return e=Ou(r,e),Cn(e)}),i.set(this.Y,function(e,t){return Cn(Pu(r,e,t))}),i.set(this.ye,function(e,t){return e=Mu(r,e,t),Cn(e)}),i.set(this.Mb,function(e,t){return Iu(r,e,t)}),this.pb=new bs(this.R,{Wf:function(e,t,n,i){var o=null;return e==r.R&&(o=n==r.R?r.R:r.X),e==r.X&&(o=n==r.R||t.mediaElement!=i.mediaElement?r.R:n==r.X?r.X:n==r.Kb||n==r.Y?r.Kb:n==r.Mb?r.ye:null),e==r.Kb&&(o=n==r.Y&&t.mediaElement==i.mediaElement?r.ve:r.ea),e==r.ve&&(o=Fc(r.Y,r.ge,r.ea,n,t,i)),e==r.ge&&(o=Fc(r.Y,r.ae,r.ea,n,t,i)),e==r.ae&&(o=Fc(r.Y,r.Y,r.ea,n,t,i)),e==r.ye&&(o=n==r.Mb&&t.mediaElement==i.mediaElement?r.Mb:r.ea),e!=r.Y&&e!=r.Mb||(o=r.ea),e==r.ea&&(o=i.mediaElement&&t.mediaElement==i.mediaElement?r.X:r.R),o},Hf:function(e,t,n){return r.dispatchEvent(Tu("onstatechange",(new Map).set("state",e.name))),i.get(e)(t,n)},handleError:function(e,t){return A(function(n){return 1==n.g?(V("The walker saw an error:"),t instanceof ke?V("Error Code:",t.code):(V("Error Message:",t.message),V("Error Stack:",t.stack)),f(n,ku(r,e),2)):n.return(e.mediaElement?r.X:r.R)})},wg:function(e){r.dispatchEvent(Tu("onstateidle",(new Map).set("state",e.name)))}}),this.bd=new it(function(){return gc(r)}),t&&this.kc(t,!0)}function _u(e){null!=e.L&&(e.L.release(),e.L=null)}function wu(e,t){if(t.lcevc.enabled){var n=e.hb();n&&n[0]&&n[0].videoMimeType==k_.ts&&(st()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||F("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),_u(e),null==e.L&&(e.L=new bo(e.h,e.qf,t.lcevc),e.G&&(e.G.L=e.L))}else _u(e)}function Tu(e,t){return new Mn(e,t)}function Su(e,t){if(!ot())return!0;var n=t.mimeType,r=t.uri||"";if(n||(n=Li(r),n=k_[n]),n){if(""==(t.mediaElement||gt()).canPlayType(n))return!1;if(!ot()||!(n in Xb||Li(r)in Jb)||("application/x-mpegurl"===n||"application/vnd.apple.mpegurl"===n)&&e.g.streaming.preferNativeHls)return!0;if(dt())return e.g.streaming.useNativeHlsOnSafari}return!1}function Eu(e,t,n){return null==t.mediaElement&&(t.mediaElement=n.mediaElement,e.jc.C(t.mediaElement,"error",function(){var t=Cc(e);t&&Ac(e,t)})),e.h=t.mediaElement,Promise.resolve()}function ku(e,t){var n,r,i,o,s,u,c,l,d;return A(function(p){switch(p.g){case 1:return e.m!=v_&&(e.m=m_),n=e.lc.map(function(e){return e()}),e.lc=[],f(p,Promise.all(n),2);case 2:if(e.dispatchEvent(Tu("unloading")),t.mimeType=null,t.startTime=null,t.uri=null,e.Ga&&(e.Ga.release(),e.Ga=null),t.mediaElement&&e.o.kb(),e.bd.stop(),e.Lb&&(e.Lb.release(),e.Lb=null),e.$c&&(e.$c.stop(),e.$c=null),!e.K){p.B(3);break}return f(p,e.K.stop(),4);case 4:e.K=null,e.ed=null;case 3:if(!e.s){p.B(5);break}return f(p,e.s.stop(),5);case 5:if(!e.j){p.B(7);break}return f(p,e.j.destroy(),8);case 8:e.j=null;case 7:if(e.I&&(e.I.release(),e.I=null),e.A&&(e.A.release(),e.A=null),!e.G){p.B(9);break}return f(p,e.G.destroy(),10);case 10:e.G=null;case 9:if(e.D&&e.D.onAssetUnload(),!t.mediaElement||!t.mediaElement.src){p.B(11);break}return f(p,new Promise(function(e){return new it(e).U(.1)}),12);case 12:for(t.mediaElement.removeAttribute("src"),t.mediaElement.load();t.mediaElement.lastChild;)t.mediaElement.removeChild(t.mediaElement.firstChild);case 11:if(!e.l){p.B(13);break}return f(p,e.l.destroy(),14);case 14:e.l=null;case 13:if(e.Zb=null,e.M=null,e.i){for(r=a(e.i.variants),i=r.next();!i.done;i=r.next())for(o=i.value,s=a([o.audio,o.video]),u=s.next();!u.done;u=s.next())(c=u.value)&&c.segmentIndex&&c.segmentIndex.release();for(l=a(e.i.textStreams),u=l.next();!u.done;u=l.next())d=u.value,d.segmentIndex&&d.segmentIndex.release()}e.i=null,e.u=new mu,e.de=null,lc(e),h(p)}})}function Au(e,t){var n,r,i,o,a;return A(function(s){if(1==s.g)return n=e.g.textDisplayFactory,r=n(),e.de=n,i=Gu(t.mediaElement,r,function(t,n,r){Lu(e,t,n,r)},e.L),i.configure(e.g.mediaSource),o=e.g.manifest,a=o.segmentRelativeVttTiming,i.R=a,f(s,i.I,2);e.G=i,h(s)})}function xu(e,t,n){var r,i,o,a;return A(function(s){if(1==s.g)return t.mimeType=n.mimeType,t.uri=n.uri,r=t.uri,i=e.F,e.Zb=r,o=e,f(s,Di(r,i,e.g.manifest.retryParameters,t.mimeType),2);o.ed=s.h,e.K=e.ed(),a=Dn(e.g.manifest),n.mediaElement&&"AUDIO"===n.mediaElement.nodeName&&(a.disableVideo=!0),e.K.configure(a),h(s)})}function Cu(e,t){var n=t.uri;t=e.F,e.Ga=new Oa(function(){return e.Wb()}),e.Ga.addEventListener("regionadd",function(t){t=t.region,xc(e,"timelineregionadded",t),e.D&&e.D.onDashTimedMetadata(t)}),e.qa=null,e.g.streaming.observeQualityChanges&&(e.qa=new ka(function(){return e.Va()}),e.qa.addEventListener("qualitychange",function(t){var n=t.quality;t=t.position,n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t),e.dispatchEvent(Tu("mediaqualitychanged",n))}));var r={networkingEngine:t,filter:function(t){return oc(e,t)},makeTextStreamsForClosedCaptions:function(t){return ic(e,t)},onTimelineRegionAdded:function(t){var n=e.Ga;e:{for(var r=a(n.g),i=r.next();!i.done;i=r.next())if(i=i.value,i.schemeIdUri==t.schemeIdUri&&i.id==t.id&&i.startTime==t.startTime&&i.endTime==t.endTime){r=i;break e}r=null}null==r&&(n.g.add(t),t=new Mn("regionadd",new Map([["region",t]])),n.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return Ac(e,t)},isLowLatencyMode:function(){return e.g.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.g.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(t){var n=e.l?e.l.g:null;n&&e.l.u&&uc(e,n.keySystem,t)}},i=Date.now()/1e3;return new En(function(){var t,o,a,s;return A(function(u){if(1==u.g)return t=e,f(u,e.K.start(n,r),2);if(t.i=u.h,o=Tu("manifestparsed"),e.dispatchEvent(o),0==e.i.variants.length)throw new ke(2,4,4036);Uu(e.i),a=Date.now()/1e3,s=a-i,e.u.F=s,h(u)})}(),function(){return H("Aborting parser step..."),e.K.stop()})}function Ou(e,t){var n,r;return A(function(i){return 1==i.g?(n=Date.now()/1e3,r=!0,e.l=Bu(e,{Bb:e.F,onError:function(t){Ac(e,t)},nd:function(t){Oc(e,t)},onExpirationUpdated:function(t,n){Pc(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&r&&(r=!1,e.u.j=Date.now()/1e3-n,e.L&&(t=e.L,t.g&&t.h.classList.add("shaka-hidden")))}}),e.l.configure(e.g.drm),e.l.Ic(e.Vd),f(i,Zr(e.l,e.i.variants,e.i.offlineSessionIds),2)):3!=i.g?f(i,e.l.kc(t.mediaElement),3):f(i,oc(e,e.i),0)})}function Pu(e,t,n){var r,i,o,s,u,c,l,d,p,g,y,v,m,b,_,w,T,S,E;return A(function(k){switch(k.g){case 1:for(t.startTime=n.startTime,null!=e.rc&&(t.startTime=e.rc,e.rc=null),r=t.mediaElement,i=t.uri,e.Zb=i,e.I=new wa({Yc:function(){return r.playbackRate},Vc:function(){return r.defaultPlaybackRate},se:function(e){r.playbackRate=e},Ye:function(e){r.currentTime+=e}}),o=function(){return fc(e)},s=function(){return dc(e)},e.o.C(r,"playing",o),e.o.C(r,"pause",o),e.o.C(r,"ended",o),e.o.C(r,"ratechange",s),wu(e,e.g),u=e.g.abrFactory,e.s&&e.Yd==u||(e.Yd=u,e.s=u(),"function"!=typeof e.s.setMediaElement&&(on("AbrManager","Please use an AbrManager with setMediaElement function."),e.s.setMediaElement=function(){}),e.s.configure(e.g.abr)),e.Ib=new hn(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferredAudioLabel),e.Jb=e.g.preferredTextLanguage,e.pc=e.g.preferredTextRole,e.mc=e.g.preferForcedSubs,Mc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.s.init(function(t,n,r){n=void 0!==n&&n,r=void 0===r?0:r,W("switch_"),e.j&&t!=e.j.j&&vc(e,t,!0,n,r)}),e.s.setMediaElement(r),vt(e.i,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredAudioChannelCount,e.g.preferredDecodingAttributes),e.j=Yu(e),e.j.configure(e.g.streaming),e.m=b_,r.textTracks&&e.o.C(r.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"chapters":Fu(e,t)}}),e.dispatchEvent(Tu("streaming")),c=null,(l=e.j.j)||(c=pc(e)?e.s.chooseVariant():null),d=[],p=l||c,g=a([p.video,p.audio]),y=g.next();!y.done;y=g.next())(v=y.value)&&!v.segmentIndex&&d.push(v.createSegmentIndex());if(!(0<d.length)){k.B(2);break}return f(k,Promise.all(d),2);case 2:if(Mc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A=Hu(e,t.startTime),e.Lb=Wu(e,t.sd),m=Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal),Ku(e,m),l){k.B(4);break}if(vc(e,c,!0,!1,0),!e.g.streaming.startAtSegmentBoundary){k.B(4);break}return b=e.A.Pc(),f(k,cc(c,b),6);case 6:_=k.h,e.A.Ed(_);case 4:return e.A.Dd(),w=e.Rb().find(function(e){return e.active}),w||((T=Jt(e.i.textStreams,e.Jb,e.pc,e.mc)[0]||null)&&vu(e.u.h,T,!0),c&&(T?(c.audio&&bc(e,c.audio,T)&&(e.aa=!0),e.aa&&e.G.u.setTextVisibility(!0),Sc(e)):e.aa=!1),T&&(e.g.streaming.alwaysStreamText||e.Pd())&&za(e.j,T)),f(k,e.j.start(),7);case 7:e.g.abr.enabled&&(e.s.enable(),Ec(e)),Rt(e.j?e.j.j:null,e.i),jc(e.i),_c(e),pc(e),S=e.i.variants.some(function(e){return e.primary}),e.g.preferredAudioLanguage||S||V("No preferred audio language set.  We have chosen an arbitrary language initially"),e.S()&&(e.g.streaming.liveSync||e.i.serviceDescription)&&(E=function(){return hc(e)},e.o.C(r,"timeupdate",E)),e.qc=!0,e.o.ka(r,"loadedmetadata",function(){e.u.m=Date.now()/1e3-n.sd}),h(k)}})}function Mu(e,t,n){var r,i,o,a,s,u,c;return A(function(l){return 1==l.g?(r=gb,i=Date.now()/1e3,o=!0,e.l=Bu(e,{Bb:e.F,onError:function(t){Ac(e,t)},nd:function(t){Oc(e,t)},onExpirationUpdated:function(t,n){Pc(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&o&&(o=!1,e.u.j=Date.now()/1e3-i)}}),e.l.configure(e.g.drm),e.l.Ic(e.Vd),a=n.uri||"",s=Li(a),u=k_[s],"application/x-mpegurl"==u&&dt()&&(u="application/vnd.apple.mpegurl"),u||(u="video/mp4"),c={id:0,language:"und",disabledUntilTime:0,primary:!1,label:null,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:u,codecs:n.mimeType?Fe(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.wa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.l.aa=!0,f(l,Zr(e.l,[c],[]),2)):f(l,e.l.kc(t.mediaElement),0)})}function Iu(e,t,n){function r(){return fc(e)}t.uri=n.uri,t.startTime=n.startTime,e.Zb=t.uri;var i=t.mediaElement;e.A=new da(i);var o=!1;e.lc.push(function(){o=!0}),null!=t.startTime&&e.A.Ed(t.startTime),e.I=new wa({Yc:function(){return i.playbackRate},Vc:function(){return i.defaultPlaybackRate},se:function(e){i.playbackRate=e},Ye:function(e){i.currentTime+=e}}),Ku(e,e.g.streaming.rebufferingGoal),e.o.C(i,"playing",r),e.o.C(i,"pause",r),e.o.C(i,"ended",r),e.o.C(i,"ratechange",function(){return dc(e)}),"none"!=i.preload&&e.o.ka(i,"loadedmetadata",function(){e.u.m=Date.now()/1e3-n.sd}),i.audioTracks&&(e.o.C(i.audioTracks,"addtrack",function(){return _c(e)}),e.o.C(i.audioTracks,"removetrack",function(){return _c(e)}),e.o.C(i.audioTracks,"change",function(){return _c(e)})),i.textTracks&&(e.o.C(i.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":Ru(e,t);break;case"chapters":Fu(e,t);break;default:_c(e)}}),e.o.C(i.textTracks,"removetrack",function(){return _c(e)}),e.o.C(i.textTracks,"change",function(){return _c(e)}));var a=Li(t.uri);i.src=Ks(e.V,t.uri,k_[a]),(ct()||pt("Web0S"))&&i.load(),e.m=__,e.dispatchEvent(Tu("streaming"));var s=new Sn;return ra(i,HTMLMediaElement.HAVE_METADATA,e.o,function(){e.A.Dd(),s.resolve()}),ra(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.o,function(){var t;return A(function(n){return 1==n.g?(ju(e),t=Ju(e),t.find(function(e){return"disabled"!=e.mode})?(0<t.length&&(e.aa=!0),n.B(2)):f(n,new Promise(function(t){e.o.ka(i.textTracks,"change",t),new it(t).U(1)}),2)):o?n.return():(Du(e),void h(n))})}),i.error?s.reject(Cc(e)):"none"==i.preload&&(F('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),s.resolve()),e.o.ka(i,"error",function(){s.reject(Cc(e))}),new En(s,function(){return s.reject(new ke(2,7,7001)),Promise.resolve()}).da(function(){e.S()&&e.g.streaming.liveSync&&e.o.C(i,"timeupdate",function(){return hc(e)}),e.qc=!0})}function ju(e){var t=e.g.preferredAudioLanguage;""!=t&&e.df(t,e.g.preferredVariantRole)}function Du(e){var t=e.g.preferredTextLanguage;""!=t&&e.ef(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function Ru(e,t){if("metadata"==t.kind){t.mode="hidden",e.o.C(t,"cuechange",function(){if(t.activeCues)for(var n=a(t.activeCues),r=n.next();!r.done;r=n.next())r=r.value,Nu(e,r.startTime,r.endTime,r.type,r.value),e.D&&e.D.onCueMetadataChange(r.value)});var n=new it(function(){var t=$u(e);t=a(t);for(var n=t.next();!n.done;n=t.next())n.value.mode="hidden"}).Yb().U(.5);e.lc.push(function(){n.stop()})}}function Lu(e,t,n,r){t=a(t);for(var i=t.next();!i.done;i=t.next())if(i=i.value,i.data&&i.cueTime&&i.frames){var o=i.cueTime+n,s=r;s&&o>s&&(s=o);for(var u=a(i.frames),c=u.next();!c.done;c=u.next())Nu(e,o,s,"org.id3",c.value);e.D&&e.D.onHlsTimedMetadata(i,o)}}function Nu(e,t,n,r,i){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",i),e.dispatchEvent(Tu("metadata",t))}function Fu(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new it(function(){t.mode="hidden"}).Yb().U(.5);e.lc.push(function(){n.stop()})}}function Uu(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(W("Found variant with audio and video content, so filtering out audio-only content."),e.variants=e.variants.filter(t))}function Bu(e,t){return new Jr(t,e.g.drm.updateExpirationTime)}function Vu(e){return new Fn(function(t,n){e.s&&e.s.segmentDownloaded(t,n)},function(t,n,r){t=(new Map).set("headers",t).set("request",n).set("requestType",r),e.dispatchEvent(Tu("downloadheadersreceived",t))},function(t,n,r,i){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",r).set("aborted",i),e.dispatchEvent(Tu("downloadfailed",t))},function(t,n,r){var i=e.V;if(r=void 0===r?{}:r,i.g.enabled)if("HEAD"===n.method)Gs(i,n);else switch(t){case 0:try{if(i.g.enabled){if(r.type){e:{switch(r.type){case 4:var o="d";break e;case 3:case 2:o="h";break e;case 5:o="s";break e}o=void 0}i.o=o}Gs(i,n,{ot:l_,su:!i.i})}}catch(e){U("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}break;case Rb:t=r;try{if(i.g.enabled){var a=t.segment;o=0,a&&(o=a.endTime-a.startTime);var s={d:1e3*o,st:i.h.S()?"l":"v"};s.ot=zs(t);var u=s.ot===f_||s.ot===d_||s.ot===h_||s.ot===y_,c=t.stream;c&&(u&&(s.bl=Ys(i,c.type)),c.bandwidth&&(s.br=c.bandwidth/1e3)),u&&s.ot!==y_&&(s.tb=Xs(i,s.ot)/1e3),Gs(i,n,s)}}catch(e){U("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}break;case 2:case 5:case 6:Gs(i,n,{ot:"k"});break;case 4:Gs(i,n,{ot:"o"})}})}function Hu(e,t){return new fa(e.h,e.i,e.g.streaming,t,function(){e.Lb&&Ea(e.Lb,!0),e.j&&e.j.Fc(),e.M&&qu(e)},function(t){return e.dispatchEvent(t)})}function Wu(e,t){t=new Pa(e.Ga,e.S()||0<t),t.addEventListener("enter",function(t){xc(e,"timelineregionenter",t.region)}),t.addEventListener("exit",function(t){xc(e,"timelineregionexit",t.region)}),t.addEventListener("skip",function(t){var n=t.region;t.seeking||(xc(e,"timelineregionenter",n),xc(e,"timelineregionexit",n))});var n=new Sa(e.h);return n.g.add(t),e.qa&&n.g.add(e.qa),n}function Ku(e,t){e.M=new mn,e.M.g=Ib,bn(e.M,t,Math.min(.5,t/2)),lc(e),e.$c=new it(function(){qu(e)}).va(.25)}function qu(e){switch(e.m){case __:if(e.h.ended)var t=!0;else{var n=Wi(e.h.buffered);t=null!=n&&n>=e.h.duration-1}break;case b_:e:if(e.h.ended||Ao(e.G))t=!0;else{if(e.i.presentationTimeline.S()){n=e.i.presentationTimeline.vb();var r=Wi(e.h.buffered);if(null!=r&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=qi(e.h.buffered,e.h.currentTime),n=e.M;var i=t,o=n.h.get(n.g);t=n.g,r=i||r>=o?jb:Ib,n.g=r,t!=r&&lc(e)}function Gu(e,t,n,r){return new wo(e,t,n,r)}function zu(e){return new Ws({getBandwidthEstimate:function(){return e.s?e.s.getBandwidthEstimate():NaN},Va:function(){return e.Va()},getCurrentTime:function(){return e.h?e.h.currentTime:0},Wc:function(){return e.Wc()},ub:function(){return e.ub()},hb:function(){return e.hb()},S:function(){return e.S()}},e.g.cmcd)}function Yu(e){return new Va(e.i,{Xc:function(){return e.A?e.A.Pc():0},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},P:e.G,Bb:e.F,onError:function(t){return Ac(e,t)},onEvent:function(t){return e.dispatchEvent(t)},yg:function(){e.K&&e.K.update&&e.K.update()},ce:function(t,n,r){e.A&&e.A.Ze(),qu(e),t=(new Map).set("start",t).set("end",n).set("contentType",r),e.dispatchEvent(Tu("segmentappended",t))},xg:function(t,n){(n=n.Wd)&&e.qa&&xa(e.qa,n,t)},Fe:function(t,n){var r=e.l;if(r.h.parseInbandPsshEnabled&&!r.K&&["audio","video"].includes(t)){n=new xr(te(n));var i=0,o=a(n.data);for(t=o.next();!t.done;t=o.next())i+=t.value.length;if(0==i)r=Promise.resolve();else{for(i=new Uint8Array(i),o=0,n=a(n.data),t=n.next();!t.done;t=n.next())t=t.value,i.set(t,o),o+=t.length;si(r,"cenc",i),r=r.j}}else r=Promise.resolve();return r},zg:function(t,n,r){Lu(e,t,n,r)},Gd:function(t,n){return e.Gd(t,n)}})}function Xu(e){if(e.K){var t=Dn(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(t.disableVideo=!0),e.K.configure(t)}if(e.l&&e.l.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{sc(e,e.i)}catch(t){Ac(e,t)}e.s&&pc(e),!(t=e.j.j)||t.allowedByApplication&&t.allowedByKeySystem||(W("Choosing new variant after changing configuration"),yc(e))}if(e.F&&e.F.qe(e.g.streaming.forceHTTPS),e.G&&(e.G.configure(e.g.mediaSource),e.G.R=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.de!=t)){var n=t(),r=e.G,i=r.u;r.u=n,i&&(n.setTextVisibility(i.isTextVisible()),i.destroy()),r.g&&(r.g.j=n),e.de=t,e.j&&(t=e.j,(n=t.i.get(pb))&&Ya(t,n.stream,!0,0,!0))}e.s&&(e.s.configure(e.g.abr),e.g.abr.enabled?e.s.enable():e.s.disable(),Ec(e)),e.M&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),bn(e.M,t,Math.min(.5,t/2))),e.i&&Mc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.D&&e.D.configure(e.g.ads),e.V&&e.V.configure(e.g.cmcd)}function Ju(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function $u(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"==e.kind})}function Qu(e){return Array.from(e.h.textTracks).filter(function(e){return"chapters"==e.kind})}function Zu(e,t){var n,r;return A(function(i){switch(i.g){case 1:return n=Li(t),(r=A_[n])?i.return(r):(p(i,2),f(i,Ri(t,e.F,e.g.streaming.retryParameters),4));case 4:r=i.h,y(i,3);break;case 2:v(i);case 3:if(r)return i.return(r);throw B("The mimeType has not been provided and it could not be deduced from its extension."),new ke(1,2,2011,n)}})}function ec(e,t,n,r,i,o,a){var s,u,c,l;return A(function(d){if(1==d.g)return"text/vtt"!=i||a.length?f(d,tc(e,t,e.F,e.g.streaming.retryParameters),3):d.B(2);2!=d.g&&(s=d.h,u=nc(e,s,i,a),c=new Blob([u],{type:"text/vtt"}),t=i_(c),i="text/vtt"),l=document.createElement("track");var h=e.V,p=t;try{if(h.g.enabled){var g=qs(h);g.ot=g_,g.su=!0;var y=Js(g),v=Qs(p,y)}else v=p}catch(e){U("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),v=p}return l.src=v,l.label=o,l.kind=r,l.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(l),d.return(l)})}function tc(e,t,n,r){var i,o,a;return A(function(s){if(1==s.g){i=Rb,o=Bn([t],r),o.method="GET";var u=e.V;try{u.g.enabled&&Gs(u,o,{ot:g_,su:!0})}catch(e){U("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return f(s,n.request(i,o).promise,2)}return a=s.h,s.return(a.data)})}function nc(e,t,n,r){var i=bb[n];if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=te(t),t=n.parseMedia(t,e),Hs(t,r);throw new ke(2,2,2014,n)}function rc(e){var t=cu();return t.streaming.failureCallback=function(t){if(e.S()){var n=null;1001==t.code||1002==t.code?n=1:1003==t.code&&(n=.1),null!=n&&(t.severity=1,V("Live streaming error.  Retrying automatically..."),e.le(n))}},t.textDisplayFactory=function(){return e.Uc?new js(e.h,e.Uc):new Cs(e.h)},t}function ic(e,t){for(var n=new Set,r=a(t.textStreams),i=r.next();!i.done;i=r.next())i=i.value,"application/cea-608"!=i.mimeType&&"application/cea-708"!=i.mimeType||n.add(i.originalId);for(r=a(t.variants),i=r.next();!i.done;i=r.next())if((i=i.value.video)&&i.closedCaptions)for(var o=a(i.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(s=s.value,!n.has(s)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",c=new _a,l=i.closedCaptions.get(s);u={id:e.me++,originalId:s,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:c,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:pb,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1},t.textStreams.push(u),n.add(s)}}function oc(e,t){return A(function(n){if(1==n.g)return f(n,ac(e,t),2);sc(e,t),h(n)})}function ac(e,t){var n;return A(function(r){if(1==r.g)return n=e.j?e.j.j:null,f(r,xt(n,t),2);jc(t),h(r)})}function sc(e,t){if(e.m!=v_){for(var n=e.g.restrictions,r=e.he,i=!1,o=a(t.variants),s=o.next();!s.done;s=o.next()){s=s.value;var u=s.allowedByApplication;s.allowedByApplication=At(s,n,r),u!=s.allowedByApplication&&(i=!0)}if(i&&e.j&&_c(e),(n=e.l?e.l.g:null)&&e.l.u)for(r=a(t.variants),i=r.next();!i.done;i=r.next())i=i.value,uc(e,n.keySystem,i.video),uc(e,n.keySystem,i.audio);Ic(e,t)}}function uc(e,t,n){if(n){n=a(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=a(r.initData||[]);for(var i=r.next();!i.done;i=r.next())i=i.value,si(e.l,i.initDataType,i.initData)}}}function cc(e,t){var n,r,i,o,a;return A(function(s){return 1==s.g?(n=e.audio,r=e.video,i=function(e,t){var n,r,i;return A(function(o){return 1==o.g?e?f(o,e.createSegmentIndex(),2):o.return(null):(r=(n=e.segmentIndex.sb(t))?n.next().value:null)?(i=r.startTime,o.return(i)):o.return(null)})},f(s,i(n,t),2)):3!=s.g?(o=s.h,f(s,i(r,t),3)):(a=s.h,null!=a&&null!=o?s.return(Math.max(a,o)):null!=a?s.return(a):null!=o?s.return(o):s.return(t))})}function lc(e){var t=e.Nd();if(q("Player changing buffering state to",t),e.u&&e.M&&e.A){var n=e.I;n.j=t,Ta(n),e.V&&(n=e.V,t||n.i||(n.i=!0),n.i&&t&&(n.l=!0),n.m=t),fc(e)}t=(new Map).set("buffering",t),e.dispatchEvent(Tu("buffering",t))}function dc(e){var t=e.h.playbackRate;0!=t&&(e.I&&e.I.set(t),t=Tu("ratechange"),e.dispatchEvent(t))}function fc(e){if(e.u&&e.M){var t=e.u.g;e.M.g==Ib?hu(t,"buffering"):e.h.paused?hu(t,"paused"):e.h.ended?hu(t,"ended"):hu(t,"playing")}}function hc(e){if(e.S()){var t=e.Wb();if(Number.isFinite(t.end)&&!(e.h.currentTime<t.start)){if(e.g.streaming.liveSync)var n=e.g.streaming.liveSyncMaxLatency,r=e.g.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(n=e.i.serviceDescription.maxLatency||e.g.streaming.liveSyncMaxLatency,r=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSyncPlaybackRate);var i=e.h.playbackRate,o=t.end-e.h.currentTime,a=0;if(e.m==__){var s=e.h.buffered;0<s.length&&(a=s.end(s.length-1),a=Math.max(r,a-t.end))}n&&r&&o-a>n?i!=r&&(W("Latency ("+o+"s) is greater than liveSyncMaxLatency ("+n+"s). Updating playbackRate to "+r),e.nf(r)):1!==i&&0!==i&&e.Ge()}}}function pc(e){try{Ic(e,e.i)}catch(t){return Ac(e,t),!1}var t=Yt(e.i.variants);return t=e.Ib.create(t),e.s.setVariants(Array.from(t.values())),!0}function gc(e){for(var t=Date.now()/1e3,n=!1,r=a(e.i.variants),i=r.next();!i.done;i=r.next())i=i.value,0<i.disabledUntilTime&&i.disabledUntilTime<=t&&(i.disabledUntilTime=0,n=!0,q("Re-enabled variant with "+function(e){var t="";return e.video&&(t+="video:"+e.video.id),e.audio&&(t=t+(t?"&":"")+"audio:"+e.audio.id),t}(i)));e.i.variants.every(function(e){return 0===e.disabledUntilTime})&&e.bd.stop(),n&&yc(e,!0,void 0,!1,!1)}function yc(e,t,n,r,i){t=void 0===t||t,n=void 0===n?0:n,r=void 0!==r&&r,i=void 0===i||i;var o;(o=pc(e)?e.s.chooseVariant():null)&&vc(e,o,i,t,n,r)}function vc(e,t,n,r,i,o){o=void 0!==o&&o;var a=e.j.j;if(t==a)W("Variant already selected."),r&&Ga(e.j,t,r,i,!0);else{var s=e.u.h;s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Ga(e.j,t,r,i,o,n),r=null,a&&(r=Bt(a)),t=Bt(t),n?(n=(new Map).set("oldTrack",r).set("newTrack",t),e.L&&_o(e.L,t),n=Tu("adaptation",n),Dc(e,n)):wc(e,r,t)}}function mc(e,t){var n=Array.from(e.h.audioTracks).find(function(e){return e.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=qt(n),t=qt(t),wc(e,n,t)}function bc(e,t,n){if(0==e.g.autoShowText)return!1;if(1==e.g.autoShowText)return!0;var r=$e(e.g.preferredTextLanguage);return n=$e(n.language),2==e.g.autoShowText?Ye(n,r):3==e.g.autoShowText?(e=$e(t.language),Ye(n,r)&&!Ye(e,n)):(F("Invalid autoShowText setting!"),!1)}function _c(e){Dc(e,Tu("trackschanged"))}function wc(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.L&&_o(e.L,n),n=Tu("variantchanged",t),Dc(e,n)}function Tc(e){Dc(e,Tu("textchanged"))}function Sc(e){Dc(e,Tu("texttrackvisibility"))}function Ec(e){e.g.abr.enabled||kc(e),Dc(e,Tu("abrstatuschanged",(new Map).set("newStatus",e.g.abr.enabled)))}function kc(e,t){if(t=void 0===t||t,e.m==b_){q("Restoring all disabled streams..."),e.bd.stop();for(var n=a(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&pc(e)}}function Ac(e,t){if(e.m!=v_){2===t.severity&&kc(e,!1);var n=Tu("error",(new Map).set("detail",t));e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function xc(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent(Tu(t,n))}function Cc(e){if(!e.h.error)return null;var t=e.h.error.code;if(1==t)return null;var n=e.h.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new ke(2,3,3016,t,n,e.h.error.message)}function Oc(e,t){if(W("KeyStatuses: "+JSON.stringify(t,null,2)),e.j){var n=Object.keys(t);0==n.length&&V("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var r=1==n.length&&"00"==n[0];r&&V("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var i=!1;if(n.length){n=a(e.i.variants);for(var o=n.next();!o.done;o=n.next()){o=o.value;var s=[];o.audio&&s.push(o.audio),o.video&&s.push(o.video),s=a(s);for(var u=s.next();!u.done;u=s.next()){var c=u.value;if(u=o.allowedByKeySystem,c.keyIds.size){o.allowedByKeySystem=!0,c=a(c.keyIds);for(var l=c.next();!l.done;l=c.next())l=l.value,l=t[r?"00":l],o.allowedByKeySystem=o.allowedByKeySystem&&!!l&&!T_.includes(l)}u!=o.allowedByKeySystem&&(i=!0)}}}i&&!pc(e)||((t=e.j.j)&&!t.allowedByKeySystem&&(W("Choosing new streams after key status changed"),yc(e)),i&&_c(e))}}function Pc(e,t,n){e.K&&e.K.onExpirationUpdated&&e.K.onExpirationUpdated(t,n),t=Tu("expirationupdated"),e.dispatchEvent(t)}function Mc(e,t,n){0<t&&(e.S()?V("|playRangeStart| has been configured for live content. Ignoring the setting."):e.kf(t)),t=e.getDuration(),n<t&&(e.S()?V("|playRangeEnd| has been configured for live content. Ignoring the setting."):e.Na(n))}function Ic(e,t){e=e.l?e.l.vc():{};var n=Object.keys(e);n=n.length&&"00"==n[0];var r=!1,i=!1,o=new Set,s=new Set;t=a(t.variants);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=[];u.audio&&c.push(u.audio),u.video&&c.push(u.video),c=a(c);for(var l=c.next();!l.done;l=c.next())if(l=l.value,l.keyIds.size){l=a(l.keyIds);for(var d=l.next();!d.done;d=l.next()){d=d.value;var f=e[n?"00":d];f?T_.includes(f)&&s.add(f):o.add(d)}}u.allowedByApplication?u.allowedByKeySystem&&(r=!0):i=!0}if(!r)throw e={hasAppRestrictions:i,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)},new ke(2,4,4012,e)}function jc(e){if(!e.variants.some(zt))throw new ke(2,4,4032)}function Dc(e,t){A(function(n){if(1==n.g)return f(n,Promise.resolve(),2);e.m!=v_&&e.dispatchEvent(t),h(n)})}function Rc(e){var t=new Set;e=a(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add($e(n.language)):t.add("und");return t}function Lc(e){var t=new Map,n=new Map,r=new Map;e=a(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var o="und",s=[];i.language&&(o=$e(i.language)),s="variant"==i.type?i.audioRoles:i.roles,s&&s.length||(s=[""]),t.has(o)||t.set(o,new Set),s=a(s);for(var u=s.next();!u.done;u=s.next())u=u.value,t.get(o).add(u),r.get(u)||r.set(u,i.accessibilityPurpose),i.label&&(n.has(o)||n.set(o,new Map),n.get(o).set(u,i.label))}var c=[];return t.forEach(function(e,t){e=a(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var o=null;n.has(t)&&n.get(t).has(i)&&(o=n.get(t).get(i)),c.push({language:t,role:i,label:o,accessibilityPurpose:r.get(i)})}}),c}function Nc(){return new ke(2,7,7e3)}function Fc(e,t,n,r,i,o){return r==e&&i.mediaElement==o.mediaElement&&i.uri==o.uri&&i.mimeType==o.mimeType?t:n}function Uc(){return{mediaElement:null,mimeType:null,startTime:null,sd:NaN,uri:null}}function Bc(e){return new Promise(function(t,n){e.Cb=function(){return n(Nc())},e.md=function(){return t()},e.onError=function(e){return n(e)},e.od=function(){return n(Nc())}})}function Vc(){this.h=[],this.j=this.i=this.g=0}function Hc(e,t,n){var r=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.l=this.h.getVolume(),this.j=new Yn,this.j.C(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.j.C(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}function Wc(e,t,n,r,i){var o=this;this.o=e,this.i=t,this.A=!1,this.s=this.D=null,this.F=NaN,this.m=i,this.j=null,this.h=new Yn,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),e=new google.ima.AdDisplayContainer(this.o,this.i),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("4.4.2-nmp-4"),this.g=null,this.u=r||new google.ima.AdsRenderingSettings,this.h.C(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){qc(o,e)}),this.h.C(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){Kc(o,e)}),this.h.C(this.i,"ended",function(){o.l.contentComplete()}),this.h.ka(this.i,"play",function(){o.A=!0})}function Kc(e,t){V("There was an ad error from the IMA SDK: "+t.getError()),V("Resuming playback."),t=(new Map).set("originalEvent",t),e.m(new Mn("ad-error",t)),Xc(e,null),e.m(new Mn("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function qc(t,n){if(t.m(new Mn("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.F))),t.D.customPlayheadTracker){var r={currentTime:t.i.currentTime};t.g=n.getAdsManager(r,t.u),t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume),t.h.C(t.i,"timeupdate",function(){t.i.duration&&(r.currentTime=t.i.currentTime)}),t.h.C(t.i,"volumechange",function(){t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume)})}else t.g=n.getAdsManager(t.i,t.u);t.m(new Mn("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){n=[],i=a(i);for(var o=i.next();!o.done;o=i.next())n.push({start:o.value,end:null});t.m(new Mn("ad-cue-points-changed",(new Map).set("cuepoints",n)))}zc(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,Gc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.C(t.i,"loadeddata",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,Gc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in e?(t.s=new ResizeObserver(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,Gc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.s.observe(t.i)):t.h.C(document,"fullscreenchange",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,Gc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.A?t.g.start():t.h.ka(t.i,"play",function(){t.A=!0,t.g.start()})}catch(e){Xc(t,null)}}function Gc(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,!!e.webkitSupportsFullscreen&&e.webkitDisplayingFullscreen)}function zc(e){function t(t,n){t=(new Map).set("originalEvent",t),e.m(new Mn(n,t))}e.h.C(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(t){Kc(e,t)}),e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){Yc(e,t)}),e.h.C(e.g,google.ima.AdEvent.Type.STARTED,function(t){Yc(e,t)}),e.h.C(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){t(e,"ad-first-quartile")}),e.h.C(e.g,google.ima.AdEvent.Type.MIDPOINT,function(e){t(e,"ad-midpoint")}),e.h.C(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){t(e,"ad-third-quartile")}),e.h.C(e.g,google.ima.AdEvent.Type.COMPLETE,function(e){t(e,"ad-complete")}),e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(t){Xc(e,t)}),e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(t){Xc(e,t)}),e.h.C(e.g,google.ima.AdEvent.Type.SKIPPED,function(e){t(e,"ad-skipped")}),e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){t(e,"ad-volume-changed")}),e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){t(e,"ad-muted")}),e.h.C(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.C(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.C(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.C(e.g,google.ima.AdEvent.Type.CLICK,function(e){t(e,"ad-clicked")}),e.h.C(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(e){t(e,"ad-progress")}),e.h.C(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(e){t(e,"ad-buffering")}),e.h.C(e.g,google.ima.AdEvent.Type.IMPRESSION,function(e){t(e,"ad-impression")}),e.h.C(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){t(e,"ad-duration-changed")}),e.h.C(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(e){t(e,"ad-closed")}),e.h.C(e.g,google.ima.AdEvent.Type.LOADED,function(e){t(e,"ad-loaded")}),e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t(e,"all-ads-completed")}),e.h.C(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){t(e,"ad-linear-changed")}),e.h.C(e.g,google.ima.AdEvent.Type.AD_METADATA,function(e){t(e,"ad-metadata")}),e.h.C(e.g,google.ima.AdEvent.Type.LOG,function(e){t(e,"ad-recoverable-error")}),e.h.C(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){t(e,"ad-break-ready")}),e.h.C(e.g,google.ima.AdEvent.Type.INTERACTION,function(e){t(e,"ad-interaction")})}function Yc(e,t){var n=t.getAd();n?(e.j=new Hc(n,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new Mn("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause(),e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))):F("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Xc(e,t){e.m(new Mn("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.ended||e.i.play())}function Jc(e,t){this.g=e,this.i=null,this.h=t}function $c(e,t,n,r){var i=this;this.s=e,this.l=t,this.j=null,this.G=NaN,this.i=r,this.F=!1,this.u=this.m=this.o=null,this.A="",this.D=[],this.h=new Yn,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Mn("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){H("Ad SS Loaded"),Qc(i,e)}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){H("Ad SS Error"),i.A.length?(V("IMA stream request returned an error. Falling back to the backup asset uri."),i.j.resolve(i.A)):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.j=null}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){H("Ad Break Started")}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){H("Ad Started"),e=e.getAd(),i.m=new Jc(e,i.l),i.u&&(i.m.i=i.u),i.i(new Mn("ad-started",(new Map).set("ad",i.m))),i.s.setAttribute("ad-active","true")}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){H("Ad Break Ended"),i.s.removeAttribute("ad-active");var e=i.l.currentTime;i.o&&i.o>e&&(i.l.currentTime=i.o,i.o=null)}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){i.u=e.getStreamData().adProgressData,i.m&&(i.m.i=i.u)}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){H("Ad event: First Quartile"),i.i(new Mn("ad-first-quartile"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){H("Ad event: Midpoint"),i.i(new Mn("ad-midpoint"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){H("Ad event: Third Quartile"),i.i(new Mn("ad-third-quartile"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){H("Ad event: Complete"),i.i(new Mn("ad-complete")),i.i(new Mn("ad-stopped")),i.s.removeAttribute("ad-active"),i.m=null}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){H("Ad event: Skipped"),i.i(new Mn("ad-skipped")),i.i(new Mn("ad-stopped"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){H("Ad event: Cue points changed");var t=e.getStreamData();e=[],t=a(t.cuepoints);for(var n=t.next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});i.D=e,i.i(new Mn("ad-cue-points-changed",(new Map).set("cuepoints",e)))})}function Qc(e,t){e.i(new Mn("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.F||e.h.C(e.l,"seeked",function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(H("Seeking back to the start of the ad break at "+n.start+" and will return to "+t),e.o=t,e.l.currentTime=n.start)}})}function Zc(){jn.call(this),this.g=this.h=null,this.i=new Vc,this.l=navigator.language,this.j=null}function el(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Mn){var n={};for(r in t)(e=t[r])&&"object"==typeof e?"detail"==r&&(n[r]=e):r in Event||(n[r]=e);return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(e=a(Object.getOwnPropertyNames(t)),n=e.next();!n.done;n=e.next())r.add(n.value);for(e={},r=a(r),n=r.next();!n.done;n=r.next())n=n.value,e[n]=t[n];t={__type__:"Error",contents:e}}else if(t instanceof TimeRanges){for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},t=a(zi(t)),n=t.next();!n.done;n=t.next())n=n.value,e=n.end,r.start.push(n.start),r.end.push(e);t=r}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}})}function tl(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=nl(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){e=t.contents,t=Error(e.message);for(n in e)t[n]=e[n];n=t}else n=t;return n})}function nl(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}function rl(e,t,n,r,i,o,a){var s=this;this.G=e,this.M=a,this.j=new it(t),this.R=n,this.u=!1,this.s=r,this.F=i,this.K=o,this.h=this.m=!1,this.L="",this.o=null,this.A=function(){return cl(s)},this.D=function(e,t){switch(e=tl(t),q("CastSender: message",e),e.type){case"event":var n=e.targetName,r=In(e.event);s.s(n,r);break;case"update":n=e.update;for(r in n){e=s.g[r]||{};for(var i in n[r])e[i]=n[r][i]}s.u&&(s.R(),s.u=!1);break;case"asyncComplete":if(r=e.id,i=e.error,e=s.i[r],delete s.i[r],e)if(i){r=new ke(i.severity,i.category,i.code);for(n in i)r[n]=i[n];e.reject(r)}else e.resolve()}},this.g={video:{},player:{}},this.I=0,this.i={},this.l=null,H_.add(this)}function il(e){if(e.h){var t=e.K();chrome.cast.requestSession(function(n){return ol(e,t,n)},function(t){return al(e,t)})}}function ol(e,t,n){W("CastSender: onSessionInitiated"),B_=n,n.addUpdateListener(e.A),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D),cl(e),dl(e,{type:"init",initState:t,appData:e.o}),e.l.resolve()}function al(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new ke(2,8,n,t))}function sl(e,t){W("CastSender: onExistingSessionJoined");var n=e.K();e.l=new Sn,e.u=!0,ol(e,n,t)}function ul(e){var t=B_;t.removeUpdateListener(e.A),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function cl(e){var t=!!B_&&"connected"==B_.status;if(W("CastSender: connection status",t),e.h&&!t){e.F();for(var n in e.g)e.g[n]={};ll(e)}e.h=t,e.L=t?B_.receiver.friendlyName:"",e.j.Yb()}function ll(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new ke(1,7,7e3))}}function dl(e,t){t=el(t);var n=B_;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},B)}catch(r){throw B("Cast session sendMessage threw",r),t=new ke(2,8,8005,r),n=new Mn("error",(new Map).set("detail",t)),e.s("player",n),e.Ob(),t}}function fl(t){if(V_?e.__onGCastApiAvailable=V_:delete e.__onGCastApiAvailable,V_=null,t)for(var n=a(H_),r=n.next();!r.done;r=n.next())r.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function hl(e,t,n,r){r=void 0!==r&&r,jn.call(this);var i=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.D=n,this.A=r,this.u=new Map,this.g=new rl(n,function(){return ml(i)},function(){return bl(i)},function(e,t){return Sl(i,e,t)},function(){return _l(i)},function(){return vl(i)},r),pl(this)}function pl(e){e.g.init(),e.m=new Yn;for(var t=a(x_),n=t.next();!n.done;n=t.next())e.m.C(e.i,n.value,function(t){e.g.ia()||(t=In(t),e.j.dispatchEvent(t))});for(var r in Db)e.m.C(e.h,Db[r],function(t){e.g.ia()||e.o.dispatchEvent(t)});e.l={},t={};for(var i in e.i)t.ac=i,Object.defineProperty(e.l,t.ac,{configurable:!1,enumerable:!0,get:function(t){return function(){return wl(e,t.ac)}}(t),set:function(t){return function(n){var r=t.ac;e.g.ia()?e.g.set("video",r,n):e.i[r]=n}}(t)}),t={ac:t.ac};e.s={},yl(e,function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return Tl(e,t)}})}),gl(e),e.j=new jn,e.j.cd=e.l,e.o=new jn,e.o.cd=e.s}function gl(e){var t=new Map;yl(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.u.set(n,r):e.u.set(r,n)):t.set(r,n)})}function yl(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!o.has(e)}var r,i=e.h,o=new Set;for(r in i)n(r)&&(o.add(r),t(r,i[r]));for(e=Object.getPrototypeOf(i),r=Object.getPrototypeOf({});e&&e!=r;){for(var s=a(Object.getOwnPropertyNames(e)),u=s.next();!u.done;u=s.next())u=u.value,n(u)&&(o.add(u),t(u,i[u]));e=Object.getPrototypeOf(e)}}function vl(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Id(),startTime:null};e.i.pause();for(var n=a(O_),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=a(D_),r=n.next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.h[i[0]](),t.player[r]=i}for(n=a(R_),r=n.next();!r.done;r=n.next())i=r.value,r=i[1],i=e.h[i[0]](),t.playerAfterLoad[r]=i;return t}function ml(e){var t=new Mn("caststatuschanged");e.dispatchEvent(t)}function bl(e){var t=new Mn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function _l(e){for(var t=a(D_),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var i=e.g.get("player","getAssetUri")();n=e.g.get("video","ended"),t=Promise.resolve();var o=e.i.autoplay;r=null,n||(r=e.g.get("video","currentTime")),i&&(e.i.autoplay=!1,t=e.h.load(i,r));var s={};for(n=a(O_),r=n.next();!r.done;r=n.next())r=r.value,s[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var t=a(O_),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=s[n];for(t=a(R_),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}e.i.autoplay=o,i&&e.i.play()}},function(t){t=(new Map).set("detail",t),t=new Mn("error",t),e.h.dispatchEvent(t)})}function wl(e,t){if("addEventListener"==t)return function(t,n,r){return e.j.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.j.removeEventListener(t,n,r)};if(e.g.ia()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.ia()?e.g.get("video",t):(t=e.i[t],"function"==typeof t&&(t=t.bind(e.i)),t)}function Tl(e,t){if(e.u.has(t)&&(t=e.u.get(t)),"addEventListener"==t)return function(t,n,r){return e.o.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.o.removeEventListener(t,n,r)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return V("Can't share configuration across a network. Returning copy."),e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return e.g.ia()&&V("NOTE: getNetworkingEngine() is always local!"),function(){return e.h.ub()};if("getDrmEngine"==t)return e.g.ia()&&V("NOTE: getDrmEngine() is always local!"),function(){return e.h.l};if("getAdManager"==t)return e.g.ia()&&V("NOTE: getAdManager() is always local!"),function(){return e.h.Qe()};if("setVideoContainer"==t)return e.g.ia()&&V("NOTE: setVideoContainer() is always local!"),function(t){return e.h.lf(t)};if(e.g.ia()){if("getManifest"==t||"drmInfo"==t)return function(){return F(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return F(t+"() does not work while casting!"),Promise.resolve()}}return e.g.ia()&&0==Object.keys(e.g.g.video).length&&(M_[t]||I_[t])||!e.g.ia()?e.h[t].bind(e.h):e.g.get("player",t)}function Sl(e,t,n){e.g.ia()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function El(e,t,n,r){jn.call(this);var i=this;this.g=e,this.h=t,this.j=new Yn,this.I={video:e,player:t},this.D=n||function(){},this.K=r||function(e){return e},this.i=null,this.F=!1,this.o=!0,this.m=0,this.A=!1,this.u=!0,this.s=this.l=null,this.G=new it(function(){Pl(i)}),kl(this)}function kl(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Al(e)},t.onSenderDisconnected=function(){return Al(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Ll(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),Ll(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(t){return Dl(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return jl(e,t)},t.start(),t=a(x_);for(var n=t.next();!n.done;n=t.next())e.j.C(e.g,n.value,function(t){return Ol(e,"video",t)});for(var r in Db)e.j.C(e.h,Db[r],function(t){return Ol(e,"player",t)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.re(3840,2160):e.h.re(1920,1080),e.j.C(e.g,"loadeddata",function(){e.A=!0}),e.j.C(e.h,"loading",function(){e.o=!1,xl(e)}),e.j.C(e.g,"playing",function(){e.o=!1,xl(e)}),e.j.C(e.g,"pause",function(){xl(e)}),e.j.C(e.h,"unloading",function(){e.o=!0,xl(e)}),e.j.C(e.g,"ended",function(){new it(function(){e.g&&e.g.ended&&(e.o=!0,xl(e))}).U(K_)})}function Al(e){e.m=0,e.u=!0,e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,xl(e)}function xl(e){var t;A(function(n){return 1==n.g?f(n,Promise.resolve(),2):e.h?(t=new Mn("caststatuschanged"),e.dispatchEvent(t),Ml(e)||Nl(e),void h(n)):n.return()})}function Cl(e,t,n){var r,i,o,a,s,u,c,l,d,g;A(function(m){switch(m.g){case 1:for(r in t.player)i=t.player[r],e.h[r](i);return e.D(n),o=e.g.autoplay,t.manifest?(e.g.autoplay=!1,p(m,5),f(m,e.h.load(t.manifest,t.startTime),7)):f(m,Promise.resolve(),3);case 7:y(m,3);break;case 5:return a=v(m),s=(new Map).set("detail",a),u=new Mn("error",s),e.h&&e.h.dispatchEvent(u),m.return();case 3:if(!e.h)return m.return();for(c in t.video)l=t.video[c],e.g[c]=l;for(d in t.playerAfterLoad)g=t.playerAfterLoad[d],e.h[d](g);e.g.autoplay=o,t.manifest&&(e.g.play(),Nl(e)),h(m)}})}function Ol(e,t,n){e.h&&(Pl(e),Ll(e,{type:"event",targetName:t,event:n},e.l))}function Pl(e){e.G.U(W_);for(var t={video:{},player:{}},n=a(C_),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.S())for(var i in j_)0==e.m%j_[i]&&(t.player[i]=e.h[i]());for(var o in M_)0==e.m%M_[o]&&(t.player[o]=e.h[o]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Ll(e,{type:"update",update:t},e.l);for(var s in I_)0==e.m%I_[s]&&(t={player:{}},t.player[s]=e.h[s](),Ll(e,{type:"update",update:t},e.l));e.A&&(e.m+=1),Ml(e)}function Ml(e){return!(!e.u||!e.g.duration&&!e.h.S())&&(Il(e),e.u=!1,!0)}function Il(e,t){var n={contentId:e.h.Id(),streamType:e.h.S()?"LIVE":"BUFFERED",contentType:""};e.h.S()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),Nl(e,void 0===t?0:t,n)}function jl(e,t){var n=tl(t.data);switch(W("CastReceiver: message",n),n.type){case"init":e.m=0,e.A=!1,e.u=!0,Cl(e,n.initState,n.appData),Pl(e);break;case"appData":e.D(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,"video"==r){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==i){t.setSystemVolumeLevel(n);break}if("muted"==i){t.setSystemVolumeMuted(n);break}}e.I[r][i]=n;break;case"call":r=e.I[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,i=n.methodName,"player"==r&&"load"==i&&(e.m=0,e.A=!1);var o=n.id,a=t.senderId;t=e.I[r],n=t[i].apply(t,n.args),"player"==r&&"load"==i&&(n=n.then(function(){e.u=!0})),n.then(function(){return Rl(e,a,o,null)},function(t){return Rl(e,a,o,t)})}}function Dl(e,t){var n=tl(t.data);switch(W("CastReceiver: message",n),n.type){case"PLAY":e.g.play(),Nl(e);break;case"PAUSE":e.g.pause(),Nl(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;null!=t&&(e.g.currentTime=Number(t)),r&&"PLAYBACK_START"==r?(e.g.play(),Nl(e)):r&&"PLAYBACK_PAUSE"==r&&(e.g.pause(),Nl(e));break;case"STOP":e.h.ze().then(function(){e.h&&Nl(e)});break;case"GET_STATUS":Il(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var i=e.g.volume,o=e.g.muted;null!=t&&(e.g.volume=Number(t)),null!=r&&(e.g.muted=r),i==e.g.volume&&o==e.g.muted||Nl(e);break;case"LOAD":e.m=0,e.A=!1,e.u=!1,t=n.media,r=n.currentTime,i=e.K(t.contentId),o=n.autoplay||!0,e.D(t.customData),o&&(e.g.autoplay=!0),e.h.load(i,r).then(function(){e.h&&Il(e)}).catch(function(t){var r="LOAD_FAILED";7==t.category&&7e3==t.code&&(r="LOAD_CANCELLED"),Ll(e,{requestId:Number(n.requestId),type:r},e.s)});break;default:V("Unrecognized message type from the generic Chromecast controller!",n.type),Ll(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function Rl(e,t,n,r){e.h&&Ll(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function Ll(e,t,n,r){e.F&&(e=el(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Nl(e,t,n){n=void 0===n?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?q_:e.h.Nd()?z_:e.g.paused?Y_:G_,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),Ll(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}function Fl(e,t,n,r,i){if(r>=i)return null;for(var o=-1,a=-1,s=0;s<n.length;s++)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){o=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){a=s;break}if(-1===o||-1===a)return null;for(var u=s=!1,c="white",l="black",d=Ul(r,i,s,u,c,l);o<=a;o++){for(var f=n[o],h=-1,p=-1,g=0;g<f.length;g++)if(null!=f[g]&&""!==f[g].g.trim()){h=g;break}for(g=f.length-1;0<=g;g--)if(null!=f[g]&&""!==f[g].g.trim()){p=g;break}if(-1===h||-1===p)f=Bl(r,i),e.g.push(f);else{for(;h<=p;h++)if(g=f[h]){var y=g.l,v=g.i,m=g.j,b=g.h;y==s&&v==u&&m==c&&b==l||(d.T&&e.g.push(d),d=Ul(r,i,y,v,m,b),s=y,u=v,c=m,l=b),d.T+=g.g}else d.T+=" ";d.T&&e.g.push(d),o!==a&&(d=Bl(r,i),e.g.push(d)),d=Ul(r,i,s,u,c,l)}}return e.g.length?{cue:e,stream:t}:null}function Ul(e,t,n,r,i,o){return e=new le(e,t,""),n&&e.h.push("underline"),r&&(e.o="italic"),e.l=i,e.backgroundColor=o,e}function Bl(e,t){return e=new le(e,t,""),e.F=!0,e}function Vl(e,t,n,r,i){this.g=e,this.l=t,this.i=n,this.h=r,this.j=i}function Hl(e,t){this.i=[],this.g=1,this.h=0,this.u=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Kl(this)}function Wl(e,t,n){var r="CC"+(e.u<<1|e.s+1),i=new le(t,n,"");return i.G=1,i.j=e.g/16*100,Fl(i,r,e.i,t,n)}function Kl(e){zl(e,0,15),e.g=1}function ql(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case X_:r=Z_.has(n)?Z_.get(n):String.fromCharCode(n);break;case J_:r=ew.get(n);break;case $_:e.i[e.g].pop(),r=tw.get(n);break;case Q_:e.i[e.g].pop(),r=nw.get(n)}r&&e.i[e.g].push(new Vl(r,e.m,e.j,e.o,e.l))}}function Gl(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(e){return e});else for(var i=0;i<r;i++)e.i[t+i]=e.i[n+i].map(function(e){return e})}function zl(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}function Yl(e,t){this.h=rw,this.o=new Hl(e,t),this.i=new Hl(e,t),this.g=this.j=new Hl(e,t),this.l=0,this.m=null}function Xl(e,t,n){e.g=e.i;var r=e.g,i=null;return e.h!==ow&&e.h!==aw&&(i=Wl(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,zl(n,0,15),n=e.j,n.g=0<n.h?n.h:0,zl(n,0,15),r.g=15),e.h=ow,r.h=t,i}function Jl(e){e.h=iw,e.g=e.j,e.g.h=0}function $l(e){U("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=aw}function Ql(){this.l=!1,this.A=this.F=0,this.D=dw,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",Zl(this)}function Zl(e){e.i=[];for(var t=0;16>t;t++)e.i.push(ed())}function ed(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function td(e,t){nd(e)&&(e.i[e.h][e.g]=new Vl(t,e.u,e.o,e.m,e.s),e.g++)}function nd(e){var t=e.g<e.A&&0<=e.g;return e.h<e.F&&0<=e.h&&t}function rd(e,t,n){var r=new le(e.j,t,"");return r.textAlign=e.D===cw?"left":e.D===lw?"right":Fm,(n=Fl(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function id(){this.i=[],this.h=null,this.g=0}function od(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new ad(e.h)),e.h=null,e.g=0))}function ad(e){this.g=0,this.h=e}function sd(e){if(!e.ja())throw new ke(2,2,3e3);return e.h[e.g++]}function ud(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function cd(e,t,n,r){if(128<=n&&135>=n)r=7&n,e.h[r]&&(e.g=e.h[r]);else{if(136===n){n=sd(t).value,t=null,n=a(ld(e,n));for(var i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()&&(t=rd(i,r,e.i)),Zl(i);return t}if(137===n)for(t=sd(t).value,t=a(ld(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(138===n){for(n=sd(t).value,t=null,n=a(ld(e,n)),i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()&&(t=rd(i,r,e.i)),i.l=!1;return t}if(139===n){for(n=sd(t).value,t=null,n=a(ld(e,n)),i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()?t=rd(i,r,e.i):i.j=r,i.l=!i.l;return t}if(140===n)return t=sd(t).value,dd(e,t,r);if(143===n)return r=dd(e,255,r),fd(e),r;if(144===n)t.skip(1),r=sd(t).value,e.g&&(e.g.o=0<(128&r),e.g.u=0<(64&r));else if(145===n)r=sd(t).value,n=sd(t).value,t.skip(1),e.g&&(t=hd((48&n)>>4,(12&n)>>2,3&n),e.g.s=hd((48&r)>>4,(12&r)>>2,3&r),e.g.m=t);else if(146===n)r=sd(t).value,t=sd(t).value,e.g&&(e=e.g,e.h=15&r,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),r=sd(t).value,t.skip(1),e.g&&(e.g.D=3&r);else if(152<=n&&159>=n){if(n=(15&n)-8,!(i=null!==e.h[n])){var o=new Ql;o.j=r,e.h[n]=o}r=sd(t).value,sd(t),sd(t),o=sd(t).value;var s=sd(t).value;t=sd(t).value,i&&0==(7&t)||(t=e.h[n],t.h=0,t.g=0,t.u=!1,t.o=!1,t.s="white",t.m="black"),t=e.h[n],t.l=0<(32&r),t.F=1+(15&o),t.A=1+(63&s),e.g=e.h[n]}}}return null}function ld(e,t){for(var n=[],r=0;8>r;r++)1==(1&t)&&e.h[r]&&n.push(r),t>>=1;return n}function dd(e,t,n){var r=null;t=a(ld(e,t));for(var i=t.next();!i.done;i=t.next()){i=i.value;var o=e.h[i];o.isVisible()&&(r=rd(o,n,e.i)),e.h[i]=null}return r}function fd(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function hd(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],hw[e<<2|t<<1|n]}function pd(){this.h=[],this.g=[],this.i=new id,this.l=0,this.m=new Map([["CC1",new Yl(0,0)],["CC2",new Yl(0,1)],["CC3",new Yl(1,0)],["CC4",new Yl(1,1)]]),this.s=this.o=0,this.j=new Map,this.u=!0,gd(this)}function gd(e){e.o=0,e.s=0;for(var t=a(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=rw,n.g=n.j,n.m=null,Kl(n.i),Kl(n.j),Kl(n.o);e.u=!0}function yd(e,t){var n=t.type;if(16==(112&t.ya)){var r=t.ya>>3&1;0===n?e.o=r:e.s=r}if(n=e.m.get("CC"+(n<<1|(n?e.s:e.o)+1)),255===t.ya&&255===t.Ra||!t.ya&&!t.Ra||!md(t.ya)||!md(t.Ra))return 45<=++e.l&&gd(e),null;if(e.l=0,t.ya&=127,t.Ra&=127,!t.ya&&!t.Ra)return null;if(e=null,16==(112&t.ya))e:{if(r=t.ya,e=t.Ra,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,16==(240&r)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&r)<<1|e>>5&1];var i=(30&e)>>1;r="white";var o=!1;7>i?r=uw[i]:7===i&&(o=!0),e=1==(1&e),n.h!==aw&&(i=n.g,n.h===ow&&t!==i.g&&(n=1+t-i.h,Gl(i,n,1+i.g-i.h,i.h),zl(i,0,n-1),zl(i,t+1,15-t)),i.g=t,i.m=e,i.j=o,i.l=r,i.o="black")}else if(17==(247&r)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",ql(n.g,X_,32),r=!1,t=uw[(14&e)>>1],"white_italics"===t&&(t="white",r=!0),n.g.m=1==(1&e),n.g.j=r,n.g.l=t;else if(16==(247&r)&&32==(240&e)||23==(247&r)&&45==(255&e))t="black",0==(7&r)&&(t=sw[(14&e)>>1]),n.g.o=t;else if(17==(247&r)&&48==(240&e))ql(n.g,J_,e);else if(18==(246&r)&&32==(224&e))ql(n.g,1&r?Q_:$_,e);else if(20==(246&r)&&32==(240&e)){switch(e=t.pts,r=null,t.Ra){case 32:Jl(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=Xl(n,2,e);break;case 38:r=Xl(n,3,e);break;case 39:r=Xl(n,4,e);break;case 40:ql(n.g,X_,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Kl(n.o),$l(n);break;case 43:$l(n);break;case 44:t=n.i,r=null,n.h!==aw&&(r=Wl(t,n.l,e)),zl(t,0,15);break;case 45:t=n.g,n.h!==ow?r=null:(r=Wl(t,n.l,e),o=t.g-t.h+1,Gl(t,o-1,o,t.h),zl(t,0,o-1),zl(t,t.g,15-t.g),n.l=e);break;case 46:zl(n.j,0,15);break;case 47:t=null,n.h!==aw&&(t=Wl(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,Jl(n),n.l=e,r=t}e=r;break e}e=null}else r=t.Ra,ql(n.g,X_,t.ya),ql(n.g,X_,r);return e}function vd(e,t){var n=[];try{for(;t.ja();){var r=sd(t).value,i=(224&r)>>5,o=31&r;if(7===i&&0!=o&&(i=63&sd(t).value),0!=i){e.j.has(i)||e.j.set(i,new ud(i));for(var a=e.j.get(i),s=t.ga();t.ga()-s<o;){i=t;var u=sd(i),c=u.value,l=u.pts;if(16===c){c=c<<16|sd(i).value}if(0<=c&&31>=c){var d=l;if(a.g){var f=a.g;switch(i=null,c){case 8:!nd(f)||0>=f.g&&0>=f.h||(0>=f.g?(f.g=f.A-1,f.h--):f.g--,f.i[f.h][f.g]=null);break;case 13:if(f.isVisible()&&(i=rd(f,d,a.i)),f.h+1>=f.F){d=f;for(var h=0,p=1;16>p;p++,h++)d.i[h]=d.i[p];for(p=0;1>p;p++,h++)d.i[h]=ed()}else f.h++;f.g=0;break;case 14:f.isVisible()&&(i=rd(f,d,a.i)),f.i[f.h]=ed(),f.g=0;break;case 12:f.isVisible()&&(i=rd(f,d,a.i)),Zl(f),d=f,d.h=0,d.g=0}var g=i}else g=null}else if(128<=c&&159>=c)g=cd(a,i,c,l);else{if(4096<=c&&4127>=c)d=255&c,8<=d&&15>=d?i.skip(1):16<=d&&23>=d?i.skip(2):24<=d&&31>=d&&i.skip(3);else if(4224<=c&&4255>=c)d=255&c,128<=d&&135>=d?i.skip(4):136<=d&&143>=d&&i.skip(5);else if(32<=c&&127>=c)i=c,a.g&&(127===i?td(a.g,"♪"):td(a.g,String.fromCharCode(i)));else if(160<=c&&255>=c)a.g&&td(a.g,String.fromCharCode(c));else if(4128<=c&&4223>=c){if(i=255&c,a.g)if(fw.has(i)){var y=fw.get(i);td(a.g,y)}else td(a.g,"_")}else 4256<=c&&4351>=c&&a.g&&(160!=(255&c)?td(a.g,"_"):td(a.g,"[CC]"));g=null}(i=g)&&n.push(i)}}}}catch(e){if(!(e instanceof ke&&3e3===e.code))throw e;U("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function md(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function bd(e){for(var t=[],n=e,r=e=0;r<n.length;)2==e&&3==n[r]?(e=0,n=[].concat(s(n)),n.splice(r,1),n=new Uint8Array(n)):0==n[r]?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;255==e[r];)n+=255,r++;n+=e[r++];for(var i=0;255==e[r];)i+=255,r++;i+=e[r++],4==n&&t.push(e.subarray(r,r+i)),r+=i}return t}function _d(){this.j=new Map,this.i=this.h=0,this.g=pw}function wd(e,t,n,r,i,o,u,c,l){var d=0,f=o,h=c.map(function(e){return e.cf});for(h=[].concat.apply([],s(h)),h.length&&(f=h[0].sampleSize||o),t.skip(u+c[0].Ff);t.ja();){u=t.J();var p=t.ab(),g=null;switch(g=!1,c=1,e.g){case gw:g=31&p,g=6==g;break;case yw:c=2,t.skip(1),g=p>>1&63,g=39==g||40==g;break;default:return}if(g)for(p=0,d<h.length&&(p=h[d].qd||0),p=(n+p)/r,c=a(bd(t.$a(u-c))),g=c.next();!g.done;g=c.next())l.push({packet:g.value,pts:p});else try{t.skip(u-c)}catch(e){break}f-=u+4,0==f&&(n=d<h.length?n+(h[d].ne||i):n+i,d++,f=d<h.length?h[d].sampleSize||o:o)}}function Td(){}function Sd(e,t,n){var r=Od(e),i=null;e=[];var o=[],s=new Set(r.map(function(e){return e.keyId}));if(s.delete(null),1<s.size)throw new ke(2,4,4010);if(t||(o=r.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.rd||(i=e.init||i,!1)}),o.length&&(e=Cd(i,o,n,s),0==e.length&&(e=[Pe("",i)]))),r.length&&(t||!o.length))for(e=[],t=a(Object.values(n)),n=t.next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Pe(n,i));if(s=Array.from(s)[0]||null)for(t=a(e),n=t.next();!n.done;n=t.next())for(n=a(n.value.initData),r=n.next();!r.done;r=n.next())r.value.keyId=s;return{Le:s,Oh:i,drmInfos:e,Pe:!0}}function Ed(e,t,n,r){var i=Sd(e,n,r);if(t.Pe)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==i.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=i.drmInfos),t.Pe=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(e){return i.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==t.drmInfos.length))throw new ke(2,4,4008);return i.Le||t.Le}function kd(e){var t=0,n=ne(e),r=n.getUint32(t,!0);if(t+=4,r!=e.byteLength)return V("PlayReady Object with invalid length encountered."),[];e:{for(e=t+2,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,0!=(1&i)||i+e>n.byteLength){V("Malformed MS PRO object"),n=[];break e}var o=te(n,e,i);t.push({type:r,value:o}),e+=i}n=t}return n}function Ad(e){e=a(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next()){t=a(t.value.childNodes);for(var n=t.next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent}return""}function xd(e){var t=Pr(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=Pr(e.node,"urn:microsoft:playready","pro"))?(e=Sr(e.textContent),(e=kd(e).filter(function(e){return e.type===mw})[0])?(e=ar(e.value,!0),(e=Yr(e,"WRMHEADER"))?Ad(e):""):""):""}function Cd(e,t,n,r){var i=[];t=a(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s=n[o.rd];if(s){var u;if(u=Pr(o.node,"urn:microsoft:playready","pro")){u=Sr(u.textContent);var c=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);u=[{initData:Cr(u,c,new Set,0),initDataType:"cenc",keyId:o.keyId}]}else u=null;if(c=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===o.rd)if(c=r,0==c.size)c=null;else{var l=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),d=new Uint8Array([]);c=[{initData:Cr(d,l,c,1),initDataType:"cenc",keyId:o.keyId}]}u=Pe(s,o.init||e||u||c),(s=bw.get(s))&&(u.licenseServerUri=s(o)),i.push(u)}}return i}function Od(e){var t=[];e=a(e);for(var n=e.next();!n.done;n=e.next())(n=Pd(n.value))&&t.push(n);return t}function Pd(e){var t=e.getAttribute("schemeIdUri"),n=Dr(e,"urn:mpeg:cenc:2013","default_KID"),r=jr(e,"urn:mpeg:cenc:2013","pssh").map(Lr);if(!t)return B("Missing required schemeIdUri attribute on","ContentProtection element",e),null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new ke(2,4,4009);var i=[];if("urn:uuid:adb41c24-2dbf-4a6d-958b-4457c0d27b95"===t&&(null===r||0===r.length)){var o=Md(e);if(null!==o)return i.push({initDataType:"cenc",initData:o,keyId:null}),{node:e,rd:t,keyId:n,init:i}}try{i=r.map(function(e){return{initDataType:"cenc",initData:Sr(e),keyId:null}})}catch(e){throw new ke(2,4,4007)}return{node:e,rd:t,keyId:n,init:0<i.length?i:null}}function Md(e){if(null!==(e=Or(e,"prm:PRM"))){var t=Or(e,"prm:PRMSignalization");if(null!==t){e=new Uint8Array([173,180,28,36,45,191,74,109,149,139,68,87,192,210,123,149]);var n=Lr(t);if(null!==n)return t=new Set,n=ur(n),n=te(n),Cr(n,e,t,0)}}return null}function Id(t,n,r,i,o){var a={RepresentationID:n,Number:r,Bandwidth:i,Time:o};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(n,r,i,o){if("$$"==n)return"$";var s=a[r];if(null==s)return V("URL template does not have an available substitution for ",'identifier "'+r+'":',t),n;switch("RepresentationID"==r&&i&&(V("URL template should not contain a width specifier for identifier",'"RepresentationID":',t),i=void 0),"Time"==r&&(s=Math.round(s)),o){case void 0:case"d":case"i":case"u":n=s.toString();break;case"o":n=s.toString(8);break;case"x":n=s.toString(16);break;case"X":n=s.toString(16).toUpperCase();break;default:n=s.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-n.length)+1).join("0")+n})}function jd(e,t){var n=Dd(e,t,"timescale"),r=1;n&&(r=Wr(n)||1);var i=Dd(e,t,"duration");n=Wr(i||""),"image"==e.H.contentType&&(n=qr(i||"")),n&&(n/=r);var o=Dd(e,t,"startNumber");i=Number(Dd(e,t,"presentationTimeOffset"))||0;var a=Kr(o||"");if(null!=o&&null!=a||(a=1),o=Rd(e,t,"SegmentTimeline"),t=null,o){t=r,e=e.W.duration||1/0,o=Mr(o,"S");for(var s=[],u=-i,c=0;c<o.length;++c){var l=o[c],d=o[c+1],f=Fr(l,"t",Kr),h=Fr(l,"d",Kr),p=Fr(l,"r",Hr);if(null!=f&&(f-=i),!h){V('"S" element must have a duration:','ignoring the remaining "S" elements.',l);break}if(f=null!=f?f:u,0>(p=p||0))if(d){if(null==(d=Fr(d,"t",Kr))){V('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',l);break}if(f>=d){V('An "S" element cannot have a negative repeatif its start ','time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',l);break}p=Math.ceil((d-f)/h)-1}else{if(1/0==e){V('The last "S" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "S" element.',l);break}if(f/t>=e){V('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',l);break}p=Math.ceil((e*t-f)/h)-1}for(0<s.length&&f!=u&&(Math.abs((f-u)/t)>=yb&&V("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",l),s[s.length-1].end=f/t),l=0;l<=p;++l)u=f+h,s.push({start:f/t,end:u/t,Be:f}),f=u}t=s}return{timescale:r,la:n,Xb:a,bb:i/r||0,Ae:i,timeline:t}}function Dd(e,t,n){return[t(e.H),t(e.Z),t(e.ha)].filter(Ce).map(function(e){return e.getAttribute(n)}).reduce(function(e,t){return e||t})}function Rd(e,t,n){return[t(e.H),t(e.Z),t(e.ha)].filter(Ce).map(function(e){return Or(e,n)}).reduce(function(e,t){return e||t})}function Ld(e,t,n,r,i,o){for(var s=Dr(e,"http://www.w3.org/1999/xlink","href"),u=Dr(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",c=a(Array.from(e.attributes)),l=c.next();!l.done;l=c.next())l=l.value,"http://www.w3.org/1999/xlink"==l.namespaceURI&&e.removeAttributeNS(l.namespaceURI,l.localName);if(5<=o)return kn(new ke(2,4,4028));if("onLoad"!=u)return kn(new ke(2,4,4027));var d=Oe([r],[s]);return i.request(0,Bn(d,t)).da(function(r){if(!(r=Xr(r.data,e.tagName)))return kn(new ke(2,4,4001,s));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;r.childNodes.length;){var u=r.childNodes[0];r.removeChild(u),e.appendChild(u)}for(r=a(Array.from(r.attributes)),u=r.next();!u.done;u=r.next())e.setAttributeNode(u.value.cloneNode(!1));return Nd(e,t,n,d[0],i,o+1)})}function Nd(e,t,n,r,i,o){if(o=void 0===o?0:o,Dr(e,"http://www.w3.org/1999/xlink","href")){var s=Ld(e,t,n,r,i,o);return n&&(s=s.da(void 0,function(){return Nd(e,t,n,r,i,o)})),s}s=[];for(var u=a(Array.from(e.childNodes)),c=u.next();!c.done;c=u.next())(c=c.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Dr(c,"http://www.w3.org/1999/xlink","href")?e.removeChild(c):"SegmentTimeline"!=c.tagName&&s.push(Nd(c,t,n,r,i,o)));return On(s).da(function(){return e})}function Fd(e,t,n,r,i,o,a){var s,u=(new fr).O("sidx",function(e){s=Ud(t,r,i,o,a,n,e)});if(e&&u.parse(e),s)return s;throw B('Invalid box type, expected "sidx".'),new ke(2,3,3004)}function Ud(e,t,n,r,i,o,a){var s=[];a.reader.skip(4);var u=a.reader.J();if(0==u)throw B("Invalid timescale."),new ke(2,3,3005);if(0==a.version)var c=a.reader.J(),l=a.reader.J();else c=a.reader.Vb(),l=a.reader.Vb();a.reader.skip(2);var d=a.reader.jb();for(e=e+a.size+l,l=0;l<d;l++){var f=a.reader.J(),h=(2147483648&f)>>>31;f&=2147483647;var p=a.reader.J();if(a.reader.skip(4),1==h)throw B("Heirarchical SIDXs are not supported."),new ke(2,3,3006);s.push(new Hi(c/u+n,(c+p)/u+n,function(){return o},e,e+f-1,t,n,r,i)),c+=p,e+=f}return a.parser.stop(),s}function Bd(e){this.h=ne(e),this.g=new lr(this.h,0)}function Vd(e){var t=Hd(e);if(7<t.length)throw new ke(2,3,3002);var n=0;t=a(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=Hd(e);e:{r=a(_w);for(var i=r.next();!i.done;i=r.next())if(Q(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.ga();else{if(8==t.length&&224&t[1])throw new ke(2,3,3001);for(i=r=0;i<t.length;i++){var o=t[i];r=0==i?o&(1<<8-t.length)-1:256*r+o}t=r}return t=e.g.ga()+t<=e.h.byteLength?t:e.h.byteLength-e.g.ga(),r=ne(e.h,e.g.ga(),t),e.g.skip(t),new Wd(n,r)}function Hd(e){var t=e.g.ga(),n=e.g.ab();if(0==n)throw new ke(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),te(e.h,t,n)}function Wd(e,t){this.id=e,this.g=t}function Kd(e){if(8<e.g.byteLength)throw new ke(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new ke(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){t=256*t+e.g.getUint8(n)}return t}function qd(e,t,n,r,i,o,a,s,u){function c(){return i}var l=[];e=new Bd(e.g);for(var d=null,f=null;e.ja();){var h=Vd(e);if(187==h.id){var p=Gd(h);p&&(h=n*p.Wg,p=t+p.Dg,null!=d&&l.push(new Hi(d+a,h+a,c,f,p-1,o,a,s,u)),d=h,f=p)}}return null!=d&&l.push(new Hi(d+a,r+a,c,f,null,o,a,s,u)),l}function Gd(e){var t=new Bd(e.g);if(e=Vd(t),179!=e.id)throw V("Not a CueTime element."),new ke(2,3,3013);if(e=Kd(e),t=Vd(t),183!=t.id)throw V("Not a CueTrackPositions element."),new ke(2,3,3012);t=new Bd(t.g);for(var n=0;t.ja();){var r=Vd(t);if(241==r.id){n=Kd(r);break}}return{Wg:e,Dg:n}}function zd(e,t){if(!(t=Rd(e,t,"Initialization")))return null;var n=e.H.xa,r=t.getAttribute("sourceURL");r&&(n=Oe(e.H.xa,[r])),r=0;var i=null;return(t=Fr(t,"range",Vr))&&(r=t.start,i=t.end),new Bi(function(){return n},r,i,ef(e))}function Yd(e,t){var n=Number(Dd(e,Jd,"presentationTimeOffset"))||0,r=Dd(e,Jd,"timescale"),i=1;r&&(i=Wr(r)||1);var o=n/i||0,a=zd(e,Jd);Qd(e,a);var s=Rn(e);return{Pb:function(){var e=Rd(s,Jd,"RepresentationIndex"),n=s.H.xa;return e&&(e=e.getAttribute("sourceURL"))&&(n=Oe(s.H.xa,[e])),e=$d(s),Xd(s,t,a,n,e.start,e.end,o)}}}function Xd(e,t,n,r,i,o,a){var s,u,c,l,d,h,p,g,y,v,m,b,_,w,T;return A(function(S){if(1==S.g)return s=e.presentationTimeline,u=!e.fb||!e.W.Od,c=e.W.start,l=e.W.duration,d=e.H.mimeType.split("/")[1],h=t,p=null,g=[h(r,i,o,!1),"webm"==d?h(n.za(),n.j,n.h,!0):null],h=null,f(S,Promise.all(g),2);if(y=S.h,v=y[0],m=y[1]||null,b=null,_=c-a,w=c,T=l?c+l:1/0,"mp4"==d)var E=Fd(v,i,r,n,_,w,T);else{if(E=new Bd(m),440786851!=Vd(E).id)throw B("Not an EBML element."),new ke(2,3,3008);var k=Vd(E);if(408125543!=k.id)throw B("Not a Segment element."),new ke(2,3,3009);E=k.g.byteOffset,k=new Bd(k.g);for(var A=null;k.ja();){var x=Vd(k);if(357149030==x.id){A=x;break}}if(!A)throw B("Not an Info element."),new ke(2,3,3010);for(A=new Bd(A.g),x=1e6,k=null;A.ja();){var C=Vd(A);if(2807729==C.id)x=Kd(C);else if(17545==C.id)if(4==C.g.byteLength)k=C.g.getFloat32(0);else{if(8!=C.g.byteLength)throw new ke(2,3,3003);k=C.g.getFloat64(0)}}if(null==k)throw new ke(2,3,3011);if(A=x/1e9,k*=A,x=Vd(new Bd(v)),475249515!=x.id)throw B("Not a Cues element."),new ke(2,3,3007);E=qd(x,E,A,k,r,n,_,w,T)}return b=E,s.kd(b),p=new va(b),u&&p.sc(w,T,!0),S.return(p)})}function Jd(e){return e.Gc}function $d(e){var t=Rd(e,Jd,"RepresentationIndex");return e=Dd(e,Jd,"indexRange"),e=Vr(e||""),t&&(e=Fr(t,"range",Vr,e)),e}function Qd(e,t){if(Zd(e,t),!$d(e))throw B("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",e.H),new ke(2,4,4002)}function Zd(e,t){var n=e.H.mimeType.split("/")[1];if(e.H.contentType!=pb&&"mp4"!=n&&"webm"!=n)throw B("SegmentBase specifies an unsupported container type.",e.H),new ke(2,4,4006);if("webm"==n&&!t)throw B("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",e.H),new ke(2,4,4005)}function ef(e){var t=e.H;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.ld,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function tf(e,t){var n=zd(e,nf),r=rf(e);of(e,r);var i=null,o=null;e.ha.id&&e.H.id&&(o=t[e.ha.id+","+e.H.id])&&(i=o.segmentIndex);var a=af(e.W.start,e.W.duration,e.H.xa,r,n);return t=!i,i?i.hd(a,e.presentationTimeline.gb()):i=new va(a),e.presentationTimeline.kd(a),e.fb&&e.W.Od||i.sc(e.W.start,e.W.duration?e.W.start+e.W.duration:1/0,t),o&&(o.segmentIndex=i),{Pb:function(){return i&&0!=i.wc()||i.gd(a),Promise.resolve(i)}}}function nf(e){return e.lb}function rf(e){var t=sf(e);e=jd(e,nf);var n=e.Xb;0==n&&(V("SegmentList@startNumber must be > 0"),n=1);var r=0;return e.la?r=e.la*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{la:e.la,startTime:r,Xb:n,bb:e.bb,timeline:e.timeline,Ab:t}}function of(e,t){if(!t.la&&!t.timeline&&1<t.Ab.length)throw V("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",e.H),new ke(2,4,4002);if(!t.la&&!e.W.duration&&!t.timeline&&1==t.Ab.length)throw V("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",e.H),new ke(2,4,4002);if(t.timeline&&0==t.timeline.length)throw V("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",e.H),new ke(2,4,4002)}function af(e,t,n,r,i){var o=r.Ab.length;r.timeline&&r.timeline.length!=r.Ab.length&&(o=Math.min(r.timeline.length,r.Ab.length),V("The number of items in the segment timeline and the number of ","segment URLs do not match, truncating",r.Ab.length,"to",o));for(var a=e-r.bb,s=t?e+t:1/0,u=[],c=r.startTime,l={},d=0;d<o;l={hc:l.hc,ec:l.ec},d++){l.ec=r.Ab[d];var f=void 0;f=null!=r.la?c+r.la:r.timeline?r.timeline[d].end:c+t,l.hc=null,u.push(new Hi(e+c,e+f,function(e){return function(){return null==e.hc&&(e.hc=Oe(n,[e.ec.vg])),e.hc}}(l),l.ec.start,l.ec.end,i,a,e,s)),c=f}return u}function sf(e){return[e.H.lb,e.Z.lb,e.ha.lb].filter(Ce).map(function(e){return Mr(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){t.getAttribute("indexRange")&&!e.Ve&&(e.Ve=!0,V("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate."));var n=t.getAttribute("media");return t=Fr(t,"mediaRange",Vr,{start:0,end:null}),{vg:n,start:t.start,end:t.end}})}function uf(e,t,n,r,i,o){var a=hf(e),s=lf(e);df(e,s);var u=Rn(e);if(s.Ac)return Zd(e,a),{Pb:function(){var e=Id(s.Ac,u.H.id,null,u.bandwidth||null,null);return e=Oe(u.H.xa,[e]),Xd(u,t,a,e,0,null,s.bb)}};if(s.la)return r||"image"===e.Z.contentType||(e.presentationTimeline.$d(s.la),e.presentationTimeline.jd(e.W.start)),{Pb:function(){return ff(u,s,i,a,o)}};var c=null;r=r=null,e.ha.id&&e.H.id&&(r=e.ha.id+","+e.H.id,r=n[r])&&(c=r.segmentIndex);var l=e.W.start,d=e.W.duration?l+e.W.duration:1/0;W("New manifest "+l+" - "+d);var f=!(e.fb&&e.W.Od);return c?(n=c,gf(n,s,l,d,f),n.Ta(e.presentationTimeline.gb())):(W("Creating TSI with end "+d),c=new pf(s,e.H.id,e.bandwidth,e.H.xa,l,d,a,f)),s.timeline&&"image"!==e.Z.contentType&&e.presentationTimeline.$e(s.timeline,l),r&&e.fb&&(r.segmentIndex=c),{Pb:function(){return c instanceof pf&&0==c.wc()&&gf(c,s,l,d,f),Promise.resolve(c)}}}function cf(e){return e.Hc}function lf(e){var t=jd(e,cf),n=Dd(e,cf,"media");return e=Dd(e,cf,"index"),{la:t.la,timescale:t.timescale,Xb:t.Xb,bb:t.bb,Ae:t.Ae,timeline:t.timeline,Xd:n,Ac:e}}function df(e,t){var n=t.Ac?1:0;if(n+=t.timeline?1:0,0==(n+=t.la?1:0))throw B("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",e.H),new ke(2,4,4002);if(1!=n&&(V("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",e.H),t.Ac?(H("Using the index URL template by default."),t.timeline=null):H("Using the SegmentTimeline by default."),t.la=null),!t.Ac&&!t.Xd)throw B("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",e.H),new ke(2,4,4002)}function ff(e,t,n,r,i){function o(e){var n=(e-p)*h,i=n+t.bb,o=n+l;return n=o+h,o=new Hi(o,Math.min(n,u()),function(){var t=Id(y,m,e,v,i*g);return Oe(b,[t])},0,null,r,_,l,u()),o.l=n,o}function s(){var e=[Math.max(c.gb(),l),Math.min(c.vb(),u())].map(function(e){return e-l});return[Math.ceil(e[0]/h),Math.ceil(e[1]/h)-1].map(function(e){return e+p})}function u(){var e=null!=d&&i[d]||f;return e?l+e:1/0}var c=e.presentationTimeline,l=e.W.start,d=e.ha.id,f=e.W.duration,h=t.la,p=t.Xb,g=t.timescale,y=t.Xd,v=e.bandwidth||null,m=e.H.id,b=e.H.xa,_=l-t.bb,w=s();e=e.fb?Math.max(w[0],w[1]-n+1):w[0],w=w[1],n=[];for(var T=e;T<=w;++T){var S=o(T);n.push(S)}var E=new va(n);if(n=c.vb()<u(),T=c.S(),n||T){var k=Math.max(e,w+1);E.td(h,function(){var e=c.gb();E.Ta(e);var t=a(s());t.next(),t=t.next().value;for(var n=[];k<=t;){var r=o(k);n.push(r),k++}return e>u()&&!n.length?null:n})}return Promise.resolve(E)}function hf(e){var t=Dd(e,cf,"initialization");if(!t)return null;var n=e.H.id,r=e.bandwidth||null,i=e.H.xa;return new Bi(function(){var e=Id(t,n,null,r,null);return Oe(i,[e])},0,null,ef(e))}function pf(e,t,n,r,i,o,a,s){va.call(this,[]),this.h=e,this.s=t,this.u=n,this.A=r,this.i=i,this.o=o,this.D=a,s&&yf(this)}function gf(e,t,n,r,i){if(e.h){n=e.h.timeline;var o=n[n.length-1];t=t.timeline.filter(function(e){return e.start>=o.end}),0<t.length&&(W("Appending "+t.length+" entries"),e.h.timeline.push.apply(e.h.timeline,s(t))),e.o!==r&&(e.o=r)}else e.h=t,e.i=n,e.o=r;i&&yf(e)}function yf(e){if(!e.m){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.o;)t.pop();e.Ta(e.i),0!==t.length&&1/0!==e.o&&(t[t.length-1].end=e.o-e.i)}}function vf(e,t,n,r,i,o){return e=Id(e,t,n,r||null,i),Oe(o,[e]).map(function(e){return e.toString()})}function mf(){this.j=[],this.g=[],this.i=[],this.l=[],this.h=[],this.m=new Set}function bf(e){e=a(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],r=a(t.audioStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=!1,s=a(n),u=s.next();!u.done;u=s.next())u=u.value,i.id!=u.id&&i.channelsCount==u.channelsCount&&i.language==u.language&&i.bandwidth==u.bandwidth&&i.label==u.label&&i.codecs==u.codecs&&i.mimeType==u.mimeType&&ue(i.roles,u.roles)&&i.audioSamplingRate==u.audioSamplingRate&&i.primary==u.primary&&(o=!0);o||n.push(i)}t.audioStreams=n}}function _f(e){e=a(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],r=a(t.textStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=!1,s=a(n),u=s.next();!u.done;u=s.next())u=u.value,i.id!=u.id&&i.language==u.language&&i.label==u.label&&i.codecs==u.codecs&&i.mimeType==u.mimeType&&i.bandwidth==u.bandwidth&&i.accessibilityPurpose==u.accessibilityPurpose&&ue(i.roles,u.roles)&&(o=!0);o||n.push(i)}t.textStreams=n}}function wf(e){e=a(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],r=a(t.videoStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=!1,s=a(n),u=s.next();!u.done;u=s.next())u=u.value,i.id!=u.id&&i.width==u.width&&i.frameRate==u.frameRate&&i.codecs==u.codecs&&i.mimeType==u.mimeType&&i.label==u.label&&ue(i.roles,u.roles)&&rr(i.closedCaptions,u.closedCaptions)&&i.bandwidth==u.bandwidth&&(o=!0);o||n.push(i)}t.videoStreams=n}}function Tf(e){e=a(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],r=a(t.imageStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=!1,s=a(n),u=s.next();!u.done;u=s.next())u=u.value,i.id!=u.id&&i.width==u.width&&i.codecs==u.codecs&&i.mimeType==u.mimeType&&(o=!0);o||n.push(i)}t.imageStreams=n}}function Sf(e){var t,n,r,i,o,s,u,c,l,d,h,p,g,y,v,m,b,_,w,T,S,E,k,x,C,O,P;return A(function(A){switch(A.g){case 1:if(t=gb,1==e.length)return A.return(e[0]);for(n=e.map(function(e){return e.filter(function(e){return e.type==t.ob})}),r=e.map(function(e){return e.filter(function(e){return e.type==t.wa})}),i=e.map(function(e){return e.filter(function(e){return e.type==t.fa})}),o=e.map(function(e){return e.filter(function(e){return e.type==t.ic})}),s=a(i),u=s.next();!u.done;u=s.next())c=u.value,c.push(Vf(t.fa));for(l=a(o),d=l.next();!d.done;d=l.next())h=d.value,h.push(Vf(t.ic));return f(A,Ef([],n,0,Pf,If),2);case 2:return p=A.h,f(A,Ef([],r,0,Pf,If),3);case 3:return g=A.h,f(A,Ef([],i,0,Pf,If),4);case 4:return y=A.h,f(A,Ef([],o,0,Pf,If),5);case 5:if(v=A.h,m=0,g.length&&p.length)for(S=a(p),E=S.next();!E.done;E=S.next())for(k=E.value,x=a(g),C=x.next();!C.done;C=x.next())O=C.value,P=m++,O.variantIds.push(P),k.variantIds.push(P);else for(b=g.concat(p),_=a(b),w=_.next();!w.done;w=_.next())T=w.value,T.variantIds=[m++];return A.return(g.concat(p).concat(y).concat(v))}})}function Ef(e,t,n,r,i){var o,s,u,c,l,d,h,p,g,y,v,m,b,_,w,T,S,E,k,x,C;return A(function(A){switch(A.g){case 1:for(o=gb,s=[],u=0;u<t.length;u++)u>=n?s.push(new Set(t[u])):s.push(new Set);c=a(e),l=c.next();case 2:if(l.done){A.B(4);break}return d=l.value,f(A,kf(d,t,n,i,s),5);case 5:if(!(h=A.h))throw new ke(2,4,4037);l=c.next(),A.B(2);break;case 4:for(p=a(s),g=p.next();!g.done;g=p.next())for(y=g.value,v=a(y),m=v.next();!m.done;m=v.next())b=m.value,(_=xf(b,t,r,i,s))&&e.push(_);for(w=a(s),g=w.next();!g.done;g=w.next())for(T=g.value,S={},E=a(T),m=E.next();!m.done;S={Qa:S.Qa},m=E.next())if(S.Qa=m.value,k=S.Qa.type==o.fa&&!S.Qa.language,x=S.Qa.type==o.ic&&!S.Qa.tilesLayout,!k&&!x&&(C=e.some(function(e){return function(t){return t.mimeType==e.Qa.mimeType&&Ne(t.codecs)==Ne(e.Qa.codecs)}}(S))))throw B("Unused stream in period-flattening!",S.Qa,e),new ke(2,4,4037);return A.return(e)}})}function kf(e,t,n,r,i){return A(function(o){return 1==o.g?(jf(t,e),e.matchedStreams?e.segmentIndex?f(o,Af(e,n),2):o.B(2):(B("No matches extending output stream!",e,t),o.return(!1))):(Cf(e,n,r,i),o.return(!0))})}function Af(e,t){var n,r,i,o,s,u,c;return A(function(l){if(1==l.g){for(n=[],r=e.matchedStreams,i=a(r),o=i.next();!o.done;o=i.next())s=o.value,n.push(s.createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex());return f(l,Promise.all(n),2)}if(e.segmentIndex instanceof _a)for(u=t;u<r.length;u++)c=r[u],c.segmentIndex&&e.segmentIndex.h.push(c.segmentIndex);h(l)})}function xf(e,t,n,r,i){var o=n(e);return jf(t,o),o.createSegmentIndex&&(o.createSegmentIndex=function(){return A(function(e){return o.segmentIndex?e.B(0):(o.segmentIndex=new _a,f(e,Af(o,0),0))})}),o.matchedStreams&&o.matchedStreams.length?(Cf(o,0,r,i),o):null}function Cf(e,t,n,r){for(var i=e.matchedStreams,o=0;o<i.length;o++)if(o>=t){var a=i[o];n(e,a);var s=!0;"audio"==e.type&&0==Qe(e.language,a.language)&&(s=!1),s&&r[o].delete(a)}}function Of(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=a(t.matchedStreams),n=e.next();!n.done;n=e.next())n=n.value,n.segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Pf(e){return e=Object.assign({},e),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Mf(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=function(e,t){return new Set([].concat(s(e),s(t)))}(e.keyIds,t.keyIds),null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var n=ki(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!n.length)throw new ke(2,4,4038);if(e.drmInfos=n,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map),n=a(t.closedCaptions);for(var r=n.next();!r.done;r=n.next()){var i=a(r.value);r=i.next().value,i=i.next().value,e.closedCaptions.set(r,i)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Of(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Mf(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Mf(e.trickModeVideo,t)}function If(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(s(e.keyIds),s(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,s(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=a(t.closedCaptions),n=t.next();!n.done;n=t.next()){var r=a(n.value);n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}}function jf(e,t){var n=[];e=a(e);for(var r=e.next();!r.done;r=e.next()){var i=t,o={audio:Df,video:Df,text:Rf,image:Lf}[i.type],s={audio:Nf,video:Ff,text:Uf,image:Bf}[i.type],u=null;r=a(r.value);for(var c=r.next();!c.done;c=r.next())c=c.value,!o(i,c)||u&&!s(i,u,c)||(u=c);if(!(i=u))return;n.push(i)}t.matchedStreams=n}function Df(e,t){function n(e){if(!Ew.has(e)){var t=Ne(e);Ew.set(e,t)}return Ew.get(e)}return!(t.mimeType!=e.mimeType||n(t.codecs)!=n(e.codecs)||e.drmInfos&&!Ei(e.drmInfos,t.drmInfos))}function Rf(e,t){return!!e.language&&(!t.language||0!=Qe(e.language,t.language)&&t.kind==e.kind)}function Lf(e){return!!e.tilesLayout}function Nf(e,t,n){if(e.id==n.id)return!0;var r=Qe(e.language,t.language),i=Qe(e.language,n.language);return i>r||!(i<r)&&(e.roles.length?(r=t.roles.filter(function(t){return e.roles.includes(t)}),i=n.roles.filter(function(t){return e.roles.includes(t)}),i.length>r.length||!(i.length<r.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((r=Wf(e.channelsCount,t.channelsCount,n.channelsCount))==ww||r!=Sw&&((r=Wf(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==ww||r!=Sw&&!(!e.bandwidth||Kf(e.bandwidth,t.bandwidth,n.bandwidth)!=ww)))))}function Ff(e,t,n){if(e.id==n.id)return!0;var r=Wf(e.width*e.height,t.width*t.height,n.width*n.height);if(r==ww)return!0;if(r==Sw)return!1;if(e.frameRate){if((r=Wf(e.frameRate,t.frameRate,n.frameRate))==ww)return!0;if(r==Sw)return!1}return!(!e.bandwidth||Kf(e.bandwidth,t.bandwidth,n.bandwidth)!=ww)}function Uf(e,t,n){if(e.id==n.id)return!0;var r=Qe(e.language,t.language),i=Qe(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(r=t.roles.filter(function(t){return e.roles.includes(t)}),i=n.roles.filter(function(t){return e.roles.includes(t)}),i.length>r.length)return!0;if(i.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Bf(e,t,n){return e.id==n.id||Wf(e.width*e.height,t.width*t.height,n.width*n.height)==ww}function Vf(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1}}function Hf(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new va([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1}}function Wf(e,t,n){if(t==e&&e!=n)return Sw;if(n==e&&e!=t)return ww;if(t>e){if(n<=e||n-e<t-e)return ww;if(n-e>t-e)return Sw}else{if(n>e)return Sw;if(e-n<e-t)return ww;if(e-n>e-t)return Sw}return Tw}function Kf(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?ww:t<e?Sw:Tw}function qf(){var e=this;this.h=this.g=null,this.o=[],this.i=null,this.I=1,this.l={},this.L={},this.j=new mf,this.D=0,this.G=new j(5),this.F=new it(function(){eh(e)}),this.u=new Ln,this.A=null,this.K=[],this.m=1/0,this.s=!1}function Gf(e){var t,n,r,i,o,a,s;return A(function(u){return 1==u.g?(t=Bn(e.o,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),i=n.request(0,t,{type:4}),Nn(e.u,i),f(u,i.promise,2)):3!=u.g?(o=u.h,e.h?(o.uri&&!e.o.includes(o.uri)&&e.o.unshift(o.uri),f(u,zf(e,o.data,o.uri),3)):u.return(0)):(a=Date.now(),s=(a-r)/1e3,e.G.sample(1,s),u.return(s))})}function zf(e,t,n){var r,i,o,a,s;return A(function(u){if(1==u.g){if(!(r=Xr(t,"MPD")))throw new ke(2,4,4001,n);return(i=e.g.dash.disableXlinkProcessing)?u.return(Yf(e,r,n)):(o=e.g.dash.xlinkFailGracefully,a=Nd(r,e.g.retryParameters,o,n,e.h.networkingEngine),Nn(e.u,a),f(u,a.promise,2))}return s=u.h,u.return(Yf(e,s,n))})}function Yf(e,t,n){var r,i,o,s,u,c,l,d,p,g,y,v,m,b,_,w,T,S,E,k,x,C,O,P,M,I,j,D,R,L,N,U;return A(function(A){switch(A.g){case 1:if((r=e.g.dash.manifestPreprocessor)&&r(t),i=[n],o=Mr(t,"Location").map(Lr).filter(Ce),0<o.length&&(s=Oe(i,o),i=e.o=s),u=Mr(t,"BaseURL"),c=u.map(Lr),l=Oe(i,c),d=0,u&&u.length&&(d=Fr(u[0],"availabilityTimeOffset",qr)||0),p=e.g.dash.ignoreMinBufferTime,g=0,p||(g=Fr(t,"minBufferTime",Br)||0),e.D=Fr(t,"minimumUpdatePeriod",Br,-1),y=Fr(t,"availabilityStartTime",Ur),v=Fr(t,"timeShiftBufferDepth",Br),m=e.g.dash.ignoreSuggestedPresentationDelay,b=null,m||(b=Fr(t,"suggestedPresentationDelay",Br)),_=e.g.dash.ignoreMaxSegmentDuration,w=null,_||(w=Fr(t,"maxSegmentDuration",Br)),T=t.getAttribute("type")||"static",e.i)for(S=e.i.presentationTimeline,E=a(Object.values(e.l)),k=E.next();!k.done;k=E.next())x=k.value,x.segmentIndex&&x.segmentIndex.Ta(S.gb());else C=e.g.defaultPresentationDelay||1.5*g,O=null!=b?b:C,S=new Jo(y,O,e.g.dash.autoCorrectDrift);return S.ue("static"==T),(P=S.S())&&!isNaN(e.g.availabilityWindowOverride)&&(v=e.g.availabilityWindowOverride),null==v&&(v=1/0),S.te(v),M=t.getAttribute("profiles")||"",I={fb:"static"!=T,presentationTimeline:S,ha:null,W:null,Z:null,H:null,bandwidth:0,Ve:!1,Nb:d,profiles:M.split(",")},j=Xf(e,I,l,t),D=j.duration,R=j.periods,"static"!=T&&j.Ne||S.Na(D||1/0),e.m&&!e.s&&(L=e.h.isAutoLowLatencyMode())&&(e.h.enableLowLatencyMode(),e.s=e.h.isLowLatencyMode()),e.s?S.gf(e.m):e.m&&F("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),S.$d(w||1),f(A,e.j.Ie(R,I.fb),2);case 2:if(e.s&&(g=0),e.s&&e.m&&(e.D=e.m),e.i){e.i.variants=e.j.j,e.i.textStreams=e.j.Kd(),e.i.imageStreams=e.j.h,e.h.filter(e.i),A.B(3);break}var B=S,V=e.j.j,H=e.j.Kd(),W=e.j.h,K=g||0,q=e.g.dash.sequenceMode,G=Or(t,"ServiceDescription");if(G){var z=Or(G,"Latency");G=Or(G,"PlaybackRate"),z&&z.getAttribute("max")||G?(z=z&&z.getAttribute("max")?parseInt(z.getAttribute("max"),10)/1e3:null,G=G?parseFloat(G.getAttribute("max")):null,z={maxLatency:z,maxPlaybackRate:G}):z=null}else z=null;if(e.i={presentationTimeline:B,variants:V,textStreams:H,imageStreams:W,offlineSessionIds:[],minBufferTime:K,sequenceMode:q,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:z},!S.pf()){A.B(4);break}return N=Mr(t,"UTCTiming"),f(A,ah(e,l,N),5);case 5:if(U=A.h,!e.h)return A.return();S.hf(U);case 4:S.Ud();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),h(A)}})}function Xf(e,t,n,r){var i=Fr(r,"mediaPresentationDuration",Br),o=[],a=0;r=Mr(r,"Period");for(var s=0;s<r.length;s++){var u=r[s],c=r[s+1],l=Fr(u,"start",Br,a),d=u.id,f=Fr(u,"duration",Br),h=null;if(c){var p=Fr(c,"start",Br);null!=p&&(h=p-l)}else null!=i&&(h=i-l);if(p=yb,h&&f&&Math.abs(h-f)>p&&V("There is a gap/overlap between Periods",u),null==h&&(h=f),null!==e.A&&null!==d&&null!==l&&l<e.A&&!e.K.includes(d)&&s+1!=r.length)W("Skipping Period with ID "+d+" as its start time is smaller than the largest period start time that has been seen, and ID is unseen before");else{if(null!==l&&(null===e.A||l>e.A)&&(e.A=l),a=Jf(e,t,n,{start:l,duration:h,node:u,Od:null==h||!c}),o.push(a),t.ha.id&&h&&(e.L[t.ha.id]=h),null==h){c&&V("Skipping Period",s+1,"and any subsequent Periods:","Period",s+1,"does not have a valid start time.",c),a=null;break}a=l+h}}return e.K=o.map(function(e){return e.id}),null!=i?(a!=i&&V("@mediaPresentationDuration does not match the total duration of ","all Periods."),{periods:o,duration:i,Ne:!1}):{periods:o,duration:a,Ne:!0}}function Jf(e,t,n,r){t.ha=nh(r.node,null,n),t.W=r,t.ha.Nb=t.Nb,t.ha.id||(H("No Period ID given for Period with start time "+r.start+",  Assigning a default"),t.ha.id="__shaka_period_"+r.start);var i=Mr(r.node,"EventStream");n=t.presentationTimeline.gb(),i=a(i);for(var o=i.next();!o.done;o=i.next())sh(e,r.start,r.duration,o.value,n);if(n=Mr(r.node,"AdaptationSet").map(function(n){return Qf(e,t,n)}).filter(Ce),t.fb){for(r=[],i=a(n),o=i.next();!o.done;o=i.next()){o=a(o.value.Gg);for(var u=o.next();!u.done;u=o.next())r.push(u.value)}if(r.length!=new Set(r).size)throw new ke(2,4,4018)}for(r=n.filter(function(e){return!e.xe}),n=n.filter(function(e){return e.xe}),n=a(n),i=n.next();!i.done;i=n.next()){i=i.value,o=i.xe.split(" "),u=a(r);for(var c=u.next();!c.done;c=u.next()){var l=c.value;if(o.includes(l.id)){c={},l=a(l.streams);for(var d=l.next();!d.done;c={Oc:c.Oc},d=l.next())c.Oc=d.value,c.Oc.trickModeVideo=i.streams.find(function(e){return function(t){return Ne(e.Oc.codecs)==Ne(t.codecs)}}(c))}}}if(i=e.g.disableAudio?[]:$f(r,"audio"),u=e.g.disableVideo?[]:$f(r,"video"),o=e.g.disableText?[]:$f(r,pb),n=e.g.disableThumbnails?[]:$f(r,"image"),!u.length&&!i.length)throw new ke(2,4,4004);for(r=[],i=a(i),c=i.next();!c.done;c=i.next())r.push.apply(r,s(c.value.streams));for(i=[],u=a(u),c=u.next();!c.done;c=u.next())i.push.apply(i,s(c.value.streams));for(u=[],o=a(o),c=o.next();!c.done;c=o.next())u.push.apply(u,s(c.value.streams));for(o=[],n=a(n),c=n.next();!c.done;c=n.next())o.push.apply(o,s(c.value.streams));return{id:t.ha.id,audioStreams:r,videoStreams:i,textStreams:u,imageStreams:o}}function $f(e,t){return e.filter(function(e){return e.contentType==t})}function Qf(e,t,n){function r(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.Z=nh(n,t.ha,null);var i=!1,o=Mr(n,"Role"),u=o.map(function(e){return e.getAttribute("value")}).filter(Ce),c=void 0,l=t.Z.contentType==pb;l&&(c="subtitle"),o=a(o);for(var d=o.next();!d.done;d=o.next()){d=d.value;var f=d.getAttribute("schemeIdUri");if(null==f||"urn:mpeg:dash:role:2011"==f)switch(d=d.getAttribute("value")){case"main":i=!0;break;case"caption":case"subtitle":c=d}}var h;f=Mr(n,"EssentialProperty"),o=null,d=!1,f=a(f);for(var p=f.next();!p.done;p=f.next()){p=p.value;var g=p.getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==g?o=p.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==g?h=r(parseInt(p.getAttribute("value"),10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"!=g&&"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=g&&(d=!0)}for(f=Mr(n,"SupplementalProperty"),f=a(f),p=f.next();!p.done;p=f.next())p=p.value,"urn:mpeg:mpegB:cicp:TransferCharacteristics"==p.getAttribute("schemeIdUri")&&(h=r(parseInt(p.getAttribute("value"),10)));f=Mr(n,"Accessibility");var y,v=new Map;for(f=a(f),p=f.next();!p.done;p=f.next())if(g=p.value,p=g.getAttribute("schemeIdUri"),g=g.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==p)if(p=1,null!=g){g=g.split(";");for(var m=a(g),b=m.next();!b.done;b=m.next()){var _=b.value,w=b=void 0;_.includes("=")?(_=_.split("="),b=_[0].startsWith("CC")?_[0]:"CC"+_[0],w=_[1]||"und"):(b="CC"+p,2==g.length?p+=2:p++,w=_),v.set(b,$e(w))}}else v.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==p)if(p=1,null!=g)for(g=a(g.split(";")),b=g.next();!b.done;b=g.next())b=b.value,_=m=void 0,b.includes("=")?(b=b.split("="),m="svc"+b[0],_=b[1].split(",")[0].split(":").pop()):(m="svc"+p,p++,_=b),v.set(m,$e(_));else v.set("svc1","und");else"urn:mpeg:dash:role:2011"==p?null!=g&&(u.push(g),"captions"==g&&(c="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==p&&("1"==g?y="visually impaired":"2"==g&&(y="hard of hearing"));if(d)return null;d=Mr(n,"ContentProtection");var T=Sd(d,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),S=$e(t.Z.language||"und"),E=n.getAttribute("label");if((d=Mr(n,"Label"))&&d.length?(d=d[0],d.textContent&&(E=d.textContent)):null!=t.Z.id&&(E=t.Z.id.toString()),d=Mr(n,"Representation"),n=d.map(function(n){return(n=Zf(e,t,T,c,S,E,i,u,v,n,y))&&(n.hdr=n.hdr||h),n}).filter(function(e){return!!e}),0==n.length){if(o="image"==t.Z.contentType,e.g.dash.ignoreEmptyAdaptationSet||l||o)return null;throw new ke(2,4,4003)}if(!t.Z.contentType||"application"==t.Z.contentType)for(t.Z.contentType=ch(n[0].mimeType,n[0].codecs),l=a(n),f=l.next();!f.done;f=l.next())f.value.type=t.Z.contentType;for(l=a(n),f=l.next();!f.done;f=l.next())for(f=f.value,p=a(T.drmInfos),g=p.next();!g.done;g=p.next())g=g.value,g.keyIds=g.keyIds&&f.keyIds?new Set([].concat(s(g.keyIds),s(f.keyIds))):g.keyIds||f.keyIds;return l=d.map(function(e){return e.getAttribute("id")}).filter(Ce),{id:t.Z.id||"__fake__"+e.I++,contentType:t.Z.contentType,language:S,Ph:i,streams:n,drmInfos:T.drmInfos,xe:o,Gg:l}}function Zf(e,t,n,r,i,o,a,s,u,c,l){if(t.H=nh(c,t.Z,null),e.m=Math.min(e.m,t.H.Nb),!ih(t.H))return V("Skipping Representation",t.H),null;var d=t.W.start;t.bandwidth=Fr(c,"bandwidth",Wr)||0;var p=t.H.contentType,g=p==pb||"application"==p;p="image"==p;try{var y=function(t,n,r,i){return uh(e,t,n,r,i)};if(t.H.Gc)var v=Yd(t,y);else if(t.H.lb)v=tf(t,e.l);else if(t.H.Hc)v=uf(t,y,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.L);else{var m=t.H.xa,b=t.W.duration||0;v={Pb:function(){return Promise.resolve(ma(d,b,m))}}}}catch(e){if((g||p)&&4002==e.code)return null;throw e}y=Mr(c,"ContentProtection"),y=Ed(y,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),y=new Set(y?[y]:[]);var _=!1;Mr(c,"SupplementalProperty").some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")})&&(_=!0);var w=!1;g&&(w=s.includes("forced_subtitle")||s.includes("forced-subtitle"));var T;if(p&&((c=Mr(c,"EssentialProperty").find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))}))&&(T=c.getAttribute("value")),!T))return null;var S;c=t.H.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(S="PQ"),c=t.H.id?t.ha.id+","+t.H.id:"";var E=c&&e.l[c]?e.l[c]:{id:e.I++,originalId:t.H.id,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){E.segmentIndex&&(E.segmentIndex.release(),E.segmentIndex=null)},segmentIndex:null,mimeType:t.H.mimeType,codecs:t.H.codecs,frameRate:t.H.frameRate,pixelAspectRatio:t.H.pixelAspectRatio,bandwidth:t.bandwidth,width:t.H.width,height:t.H.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:y,language:i,originalLanguage:t.Z.language,label:o,type:t.Z.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:t.H.emsgSchemeIdUris,roles:s,forced:w,channelsCount:t.H.ld,audioSamplingRate:t.H.audioSamplingRate,spatialAudio:_,closedCaptions:u,hdr:S,tilesLayout:T,matchedStreams:[],accessibilityPurpose:l,external:!1};return E.createSegmentIndex=function(){var e;return A(function(t){if(1==t.g)return E.segmentIndex?t.B(0):(e=E,f(t,v.Pb(),3));e.segmentIndex=t.h,h(t)})},c&&t.fb&&!e.l[c]&&(e.l[c]=E),E}function eh(e){var t,n;A(function(r){switch(r.g){case 1:return H("Updating manifest..."),t=0,p(r,2),f(r,Gf(e),4);case 4:t=r.h,y(r,3);break;case 2:if(n=v(r),e.h){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(n),r.return();n.severity=1,e.h.onError(n)}case 3:if(!e.h)return r.return();th(e,t),h(r)}})}function th(e,t){0>e.D||e.F.U(Math.max(e.D-t,D(e.G)))}function nh(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,ld:null,audioSamplingRate:null,Nb:0},n=n||t.xa;var r=Mr(e,"BaseURL"),i=r.map(Lr),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs,c=Fr(e,"frameRate",zr)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,d=Mr(e,"InbandEventStream"),f=t.emsgSchemeIdUris.slice();d=a(d);for(var h=d.next();!h.done;h=d.next())h=h.value.getAttribute("schemeIdUri"),f.includes(h)||f.push(h);d=Mr(e,"AudioChannelConfiguration"),d=rh(d)||t.ld,h=Fr(e,"audioSamplingRate",Kr)||t.audioSamplingRate,o||(o=ch(s,u));var p=Or(e,"SegmentBase"),g=Or(e,"SegmentTemplate"),y=p?Fr(p,"availabilityTimeOffset",qr)||0:0,v=g?Fr(g,"availabilityTimeOffset",qr)||0:0;return r=r&&r.length?Fr(r[0],"availabilityTimeOffset",qr)||0:0,r=t.Nb+r+y+v,{xa:Oe(n,i),Gc:p||t.Gc,lb:Or(e,"SegmentList")||t.lb,Hc:g||t.Hc,width:Fr(e,"width",Kr)||t.width,height:Fr(e,"height",Kr)||t.height,contentType:o,mimeType:s,codecs:u,frameRate:c,pixelAspectRatio:l,emsgSchemeIdUris:f,id:e.getAttribute("id"),language:e.getAttribute("lang"),ld:d,audioSamplingRate:h,Nb:r}}function rh(e){e=a(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var r=parseInt(n,10);if(!r){V("Channel parsing failure! Ignoring scheme and value",t,n);continue}return r;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(r=parseInt(n,16))){V("Channel parsing failure! Ignoring scheme and value",t,n);continue}for(e=0;r;)1&r&&++e,r>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":r=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14];var i=parseInt(n,10);if(!i){V("Channel parsing failure! Ignoring scheme and value",t,n);continue}if(0<i&&i<r.length)return r[i];continue;default:V("Unrecognized audio channel scheme:",t,n)}}return null}function ih(e){var t=e.Gc?1:0;return t+=e.lb?1:0,0==(t+=e.Hc?1:0)?e.contentType==pb||"application"==e.contentType||(V("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',e),!1):(1!=t&&(V("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",e),e.Gc?(H("Using SegmentBase by default."),e.lb=null):H("Using SegmentList by default."),e.Hc=null),!0)}function oh(e,t,n,r){var i,o,a,s,u,c;return A(function(l){if(1==l.g)return i=Oe(t,[n]),o=Bn(i,e.g.retryParameters),o.method=r,a=e.h.networkingEngine.request(4,o),Nn(e.u,a),f(l,a.promise,2);if(s=l.h,"HEAD"==r){if(!s.headers||!s.headers.date)return V("UTC timing response is missing","expected date header"),l.return(0);u=s.headers.date}else u=or(s.data);return c=Date.parse(u),isNaN(c)?(V("Unable to parse date from UTC timing response"),l.return(0)):l.return(c-Date.now())})}function ah(e,t,n){var r,i,o,s,u,c,l,d,h;return A(function(g){switch(g.g){case 1:r=n.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}),i=e.g.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),o=a(r),s=o.next();case 2:if(s.done){g.B(4);break}switch(u=s.value,p(g,5),c=u.scheme,l=u.value,c){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return g.B(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return g.B(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(l),g.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":F("NTP UTCTiming scheme is not supported");break;default:F("Unrecognized scheme in UTCTiming element",c)}g.B(9);break;case 7:return f(g,oh(e,t,l,"HEAD"),10);case 10:return g.return(g.h);case 8:return f(g,oh(e,t,l,"GET"),11);case 11:return g.return(g.h);case 9:y(g,3);break;case 5:h=v(g),V("Error fetching time from UTCTiming elem",h.message);case 3:s=o.next(),g.B(2);break;case 4:return F("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),g.return(0)}})}function sh(e,t,n,r,i){var o=r.getAttribute("schemeIdUri")||"",s=r.getAttribute("value")||"",u=Fr(r,"timescale",Kr)||1;r=a(Mr(r,"Event"));for(var c=r.next();!c.done;c=r.next()){c=c.value;var l=Fr(c,"presentationTime",Kr)||0,d=Fr(c,"duration",Kr)||0;l=l/u+t,d=l+d/u,null!=n&&(l=Math.min(l,t+n),d=Math.min(d,t+n)),d<i||(c={schemeIdUri:o,value:s,startTime:l,endTime:d,id:c.getAttribute("id")||"",eventElement:c},e.h.onTimelineRegionAdded(c))}}function uh(e,t,n,r,i){var o,a,s,u,c,l;return A(function(d){return 1==d.g?(o=Rb,a=i?0:1,s=Ba(t,n,r,e.g.retryParameters),u=e.h.networkingEngine,c=u.request(o,s,{type:a}),Nn(e.u,c),f(d,c.promise,2)):(l=d.h,d.return(l.data))})}function ch(e,t){return t=De(e,t),Ve(t)?pb:e.split("/")[0]}function lh(){}function dh(e){var t=0,n=ne(e),r=n.getUint32(t,!0);if(t+=4,r!=e.byteLength)return V("PlayReady Object with invalid length encountered."),[];e:{for(e=t+2,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,0!=(1&i)||i+e>n.byteLength){V("Malformed MS PRO object"),n=[];break e}var o=te(n,e,i);t.push({type:r,value:o}),e+=i}n=t}return n}function fh(e){if(e=hh(e))e:{e=a(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next())if(t=Or(t.value,"LA_URL")){e=t.textContent;break e}e=""}else e="";return e}function hh(e){return e=Sr(e.textContent),(e=dh(e).filter(function(e){return e.type===xw})[0])?(e=ar(e.value,!0),(e=Yr(e,"WRMHEADER"))?e:null):null}function ph(e){if(!Ow){Ow=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);Vw=wh("ftyp",t,r,t,n),t=wh("dref",Hw),Ww=wh("dinf",t)}this.g=e}function gh(e){var t=wh,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.ma.byteLength)var i=wh("avcC",e.ma);else{i=wh;for(var o=7,a=[],u=[],c=0,l=0,d=0,f=0;f<e.Da.length;f++){var h=_h(e.Da[f]);switch(31&h[0]){case 7:a.push(h),o+=h.length+2;break;case 8:u.push(h),o+=h.length+2}}for(0<a.length&&(c=a[0][1],d=a[0][2],l=a[0][3]),o=new Uint8Array(o),f=0,o[f++]=1,o[f++]=c,o[f++]=d,o[f++]=l,o[f++]=255,o[f++]=224|a.length,c=0;c<a.length;c++)o[f++]=(65280&a[c].length)>>8,o[f++]=255&a[c].length,o.set(a[c],f),f+=a[c].length;for(o[f++]=u.length,a=0;a<u.length;a++)o[f++]=(65280&u[a].length)>>8,o[f++]=255&u[a].length,o.set(u[a],f),f+=u[a].length;i=i("avcC",o)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(s(bh(n,2)),s(bh(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",u=new Uint8Array([]),e.encrypted&&(u=vh(e),r="encv"),n=wh(r,n,i,u)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,i=e.stream.height||0,n=new Uint8Array([]),0<e.ma.byteLength&&(n=wh("hvcC",e.ma)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(s(bh(r,2)),s(bh(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="hvc1",u=new Uint8Array([]),e.encrypted&&(u=vh(e),i="encv"),n=wh(i,r,n,u));break;case"audio":e.codecs.includes("mp3")?e=wh(".mp3",yh(e)):e.codecs.includes("ac-3")?(n=wh("dac3",e.ba),r="ac-3",i=new Uint8Array([]),e.encrypted&&(i=vh(e),r="enca"),e=wh(r,yh(e),n,i)):e.codecs.includes("ec-3")?(n=wh("dec3",e.ba),r="ec-3",i=new Uint8Array([]),e.encrypted&&(i=vh(e),r="enca"),e=wh(r,yh(e),n,i)):(0<e.ba.byteLength?n=wh("esds",e.ba):(n=wh,r=e.id+1,i=e.stream.bandwidth||0,u=e.stream.channelsCount||2,c=e.stream.audioSamplingRate||44100,l=Me("audio",e.codecs.split(",")),d={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},a=d[c],"mp4a.40.5"!==l&&"mp4a.40.29"!==l||(a=d[2*c]),c=parseInt(l.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(s(bh(r,2)),[0,4,17,64,21,0,6,0],s(bh(i,4)),s(bh(i,4)),[5,2,c<<3|a>>>1,a<<7|u<<3,6,1,2])),n=n("esds",r)),r="mp4a",i=new Uint8Array([]),e.encrypted&&(i=vh(e),r="enca"),e=wh(r,yh(e),n,i)),n=e}return e=wh("stsd",Bw,n),t("stbl",e,wh("stts",Dw),wh("stsc",Rw),wh("stsz",Nw),wh("stco",Lw))}function yh(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(s(bh(e.stream.audioSamplingRate||44100,2)),[0,0]))}function vh(e){for(var t=wh,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,i=0;i<n.length;i+=1)r|=n.charCodeAt(i)<<8*(n.length-i-1);n=new Uint8Array([].concat(s(bh(r,4)))),n=wh("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=wh("schm",r),i=wh;var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=a(e.stream.drmInfos);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&u.keyIds&&u.keyIds.size){u=a(u.keyIds);for(var c=u.next();!c.done;c=u.next())o=_h(c.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),o=wh("tenc",e,o),t("sinf",n,r,i("schi",o))}function mh(e){var t=new Uint8Array([]);e=a(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=wh,i=new Uint8Array([0,0,0,0].concat(s(bh(n.data?n.data.cb:0,4))));i=wh("mfhd",i);var o,u=n.data?n.data.Ca:[],c=new Uint8Array(4+u.length);for(o=0;o<u.length;o++){var l=u[o].flags;c[o+4]=l.Ia<<4|l.La<<2|l.Ka}u=wh("sdtp",c);var d=u.length+92;c=wh,o=new Uint8Array([0,0,0,58].concat(s(bh(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=wh("tfhd",o),l=n.data?n.data.baseMediaDecodeTime:0;var f=Math.floor(l%(Pw+1));l=new Uint8Array([1,0,0,0].concat(s(bh(Math.floor(l/(Pw+1)),4)),s(bh(f,4)))),l=wh("tfdt",l);var h=d;d=n.data?n.data.Ca:[],f=d.length;var p=12+16*f,g=new Uint8Array(p);for(h+=8+p,g.set(["video"===n.type?1:0,0,15,1].concat(s(bh(f,4)),s(bh(h,4))),0),h=0;h<f;h++){var y=d[h];p=bh(y.duration,4);var v=bh(y.size,4),m=y.flags;y=bh(y.Sa,4),g.set([].concat(s(p),s(v),[m.Xa<<2|m.Ia,m.La<<6|m.Ka<<4|m.Ya,61440&m.Ha,15&m.Ha],s(y)),12+16*h)}for(d=wh("trun",g),u=c("traf",o,l,d,u),r=r("moof",i,u),i=n.data?n.data.Ca:[],n=new Uint8Array([]),i=a(i),u=i.next();!u.done;u=i.next())n=Ar(n,u.value.data);n=wh("mdat",n),t=Ar(t,r,n)}return t}function bh(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function _h(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function wh(e){var t=x.apply(1,arguments),n=Mw[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Mw[e]=n);for(var r=8,i=t.length-1;0<=i;i--)r+=t[i].byteLength;for(i=new Uint8Array(r),i[0]=r>>24&255,i[1]=r>>16&255,i[2]=r>>8&255,i[3]=255&r,i.set(n,4),n=0,r=8;n<t.length;n++)i.set(t[n],r),r+=t[n].byteLength;return i}function Th(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.A=new j(5),this.o=new it(function(){Sh(e)}),this.u=new Ln,this.m=new Map}function Sh(e){var t;A(function(n){switch(n.g){case 1:return H("Updating manifest..."),p(n,2),f(n,Eh(e),4);case 4:y(n,3);break;case 2:t=v(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();h(n)}})}function Eh(e){var t,n,r,i,o,u,c;return A(function(l){if(1==l.g)return t=Bn(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),i=n.request(0,t,{type:5}),Nn(e.u,i),f(l,i.promise,2);if(o=l.h,!e.h)return l.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var d=o.uri,p=Xr(o.data,"SmoothStreamingMedia");if(!p)throw new ke(2,4,4046,d);if((d=e.g.mss.manifestPreprocessor)&&d(p),e.i||(e.i=new Jo(null,0)),d=Fr(p,"IsLive",Gr,!1))throw new ke(2,4,4047);e.i.ue(!d);var g=Fr(p,"TimeScale",Kr,1e7),y=Fr(p,"DVRWindowLength",Kr);d&&(0===y||isNaN(y))&&(y=1/0);var v=Fr(p,"CanSeek",Gr,!1);0===y&&v&&(y=1/0),v=null,y&&0<y&&(v=y/g),d&&!isNaN(e.g.availabilityWindowOverride)&&(v=e.g.availabilityWindowOverride),null==v&&(v=1/0),e.i.te(v),y=Fr(p,"Duration",Kr,1/0),d||e.i.Na(y/g),d={variants:[],textStreams:[],timescale:g,duration:y/g},v=Mr(p,"Protection");var m;for(g=e.g.mss.keySystemsBySystemId,y=[],v=a(v),m=v.next();!m.done;m=v.next())y=y.concat(Mr(m.value,"ProtectionHeader"));if(y.length){for(v=[],m=0;m<y.length;m++){var b=y[m],_=b.getAttribute("SystemID").toLowerCase(),w=g[_];if(w){var T=hh(b);if(T)e:{T=a(T.getElementsByTagName("DATA"));for(var S=T.next();!S.done;S=T.next())if(S=Or(S.value,"KID")){T=Sr(S.textContent),T=new Uint8Array([T[3],T[2],T[1],T[0],T[5],T[4],T[7],T[6]].concat(s(T.slice(8)))),T=kr(T);break e}T=null}else T=null;S=Sr(b.textContent),_=Er(_.replace(/-/g,"")),_=[{initData:Cr(S,_,new Set,0),initDataType:"cenc",keyId:T}],_=Pe(w,_),T&&_.keyIds.add(T),(w=Cw.get(w))&&(_.licenseServerUri=w(b)),v.push(_)}}g=v}else g=[];for(m=g,v=[],g=[],y=[],p=Mr(p,"StreamIndex"),p=a(p),b=p.next();!b.done;b=p.next()){b=b.value,w=Mr(b,"QualityLevel"),_=d.timescale,T=d.duration,S=Mr(b,"c");for(var E=[],k=0,A=0;A<S.length;++A){var x=S[A],C=S[A+1],O=Fr(x,"t",Kr),P=Fr(x,"d",Kr),M=Fr(x,"r",Hr);if(!P){V('"c" element must have a duration:','ignoring the remaining "c" elements.',x);break}if(O=null!=O?O:k,0>(M=M||0))if(C){if(null==(C=Fr(C,"t",Kr))){V('An "c" element cannot have a negative repeat','if the next "c" element does not have a valid start time:','ignoring the remaining "c" elements.',x);break}if(O>=C){V('An "c" element cannot have a negative repeatif its start ','time exceeds the next "c" element\'s start time:','ignoring the remaining "c" elements.',x);break}M=Math.ceil((C-O)/P)-1}else{if(1/0==T){V('The last "c" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "c" element.',x);break}if(O/_>=T){V('The last "c" element cannot have a negative repeat',"if its start time exceeds the duration:",'igoring the last "c" element.',x);break}M=Math.ceil((T*_-O)/P)-1}for(x=0;x<=M;++x)k=O+P,E.push({start:O/_,end:k/_,Be:O}),O=k}for(_=E,w=a(w),T=w.next();!T.done;T=w.next())(T=kh(e,b,T.value,_,m,d))&&("audio"!=T.type||e.g.disableAudio?"video"!=T.type||e.g.disableVideo?T.type!=pb||e.g.disableText||y.push(T):g.push(T):v.push(T))}for(p=[],v=a(0<v.length?v:[null]),m=v.next();!m.done;m=v.next())for(m=m.value,b=a(0<g.length?g:[null]),T=b.next();!T.done;T=b.next())w=p,_=w.push,T=T.value,S=0,m&&m.bandwidth&&0<m.bandwidth&&(S+=m.bandwidth),T&&T.bandwidth&&0<T.bandwidth&&(S+=T.bandwidth),T={id:e.s++,language:m?m.language:"und",disabledUntilTime:0,primary:!!m&&m.primary||!!T&&T.primary,audio:m,video:T,bandwidth:S,label:null,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},_.call(w,T);d.variants=p,d.textStreams=y,e.j?(e.j.variants=d.variants,e.j.textStreams=d.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:d.variants,textStreams:d.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Ud()),Promise.resolve(),u=Date.now(),c=(u-r)/1e3,e.A.sample(1,c),h(l)})}function kh(e,t,n,r,i,o){var a=t.getAttribute("Type");if("audio"!==a&&"video"!==a&&"text"!==a)return F("Ignoring unrecognized type:",a),null;var s=t.getAttribute("Language"),u=e.s++,c=Fr(n,"Bitrate",Wr),l=Fr(n,"MaxWidth",Wr),d=Fr(n,"MaxHeight",Wr),f=Fr(n,"Channels",Wr),h=Fr(n,"SamplingRate",Wr),p=o.duration;r.length&&(p=r[r.length-1].end-r[0].start);var g=e.i.getDuration();e.i.Na(Math.min(p,g));var y={id:u,originalId:t.getAttribute("Name")||String(u),createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:c||0,width:l||void 0,height:d||void 0,kind:"",encrypted:0<i.length,drmInfos:i,keyIds:new Set,language:$e(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:f,audioSamplingRate:h,spatialAudio:!1,closedCaptions:null,hdr:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:p,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1};if((i=t.getAttribute("Subtype"))&&((i=qw[i])&&y.roles.push(i),"main"===i&&(y.primary=!0)),i=n.getAttribute("FourCC"),null!==i&&""!==i||(i=t.getAttribute("FourCC")),!i)if("audio"===a)i="AAC";else if("video"===a)return F('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!Kw.includes(i.toUpperCase()))return F("Codec not supported:",i),null;switch(n=Ah(n,a,i,y),y.mssPrivateData.codecPrivateData=n,a){case"audio":if(!n)return F("Quality unsupported without CodecPrivateData",a),null;y.type="audio",y.mimeType="mss/audio/mp4",y.codecs=xh(i,n);break;case"video":if(!n)return F("Quality unsupported without CodecPrivateData",a),null;y.type="video",y.mimeType="mss/video/mp4",y.codecs=Ch(n);break;case"text":y.type=pb,y.mimeType="application/mp4",("TTML"===i||"DFXP"===i)&&(y.codecs="stpp")}return y.createSegmentIndex=function(){if(y.segmentIndex)return Promise.resolve();if(e.m.has(y.id))var n=e.m.get(y.id);else n=[],"video"==y.type&&(n=y.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n={id:y.id,type:y.type,codecs:y.codecs,encrypted:y.encrypted,timescale:y.mssPrivateData.timescale,duration:y.mssPrivateData.duration,Da:n,ba:new Uint8Array([]),ma:new Uint8Array([]),data:null,stream:y},n=new ph([n]).initSegment(),e.m.set(y.id,n);return n=Oh(e,new Bi(function(){return[]},0,null,null,void 0,n),y,t,r),y.segmentIndex=new va(n),Promise.resolve()},y.closeSegmentIndex=function(){y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null)},y}function Ah(e,t,n,r){if(e=e.getAttribute("CodecPrivateData"))return e;if("audio"!==t)return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=i[e],"AACH"===n?(n=new Uint8Array(4),e=i[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function xh(e,t){var n=0;return"AACH"===e&&(n=5),t?0===n&&(n=(248&parseInt(t.substr(0,2),16))>>3):(n=2,"AACH"===e&&(n=5)),"mp4a.40."+n}function Ch(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function Oh(e,t,n,r,i){var o=r.getAttribute("Url").replace("{bitrate}",String(n.bandwidth));r=[];var s={};i=a(i);for(var u=i.next();!u.done;s={fc:s.fc},u=i.next())s.fc=u.value,r.push(new Hi(s.fc.start,s.fc.end,function(t){return function(){return Oe(e.l,[o.replace("{start time}",String(t.fc.Be))])}}(s),0,null,t,0,0,n.mssPrivateData.duration));return r}function Ph(e,t,n,r,i,o){if(200<=n&&299>=n&&202!=n)return{uri:i||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=sr(t)}catch(e){}throw W("HTTP error text:",i),new ke(401==n||403==n?2:1,1,1001,r,n,i,e,o)}function Mh(){}function Ih(e,t,n,r,i){var o=new Xw;tr(t.headers).forEach(function(e,t){o.append(t,e)});var a=new zw,s={He:!1,mf:!1};if(e=jh(e,n,{body:t.body||void 0,headers:o,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,r,i,t.streamDataCallback),e=new En(e,function(){return s.He=!0,a.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var u=new it(function(){s.mf=!0,a.abort()});u.U(t/1e3),e.finally(function(){u.stop()})}return e}function jh(e,t,n,r,i,o,a){var s,u,c,l,d,g,m,b,_,w,T,S,E;return A(function(k){switch(k.g){case 1:return s=Gw,u=Yw,g=d=0,m=Date.now(),p(k,2),f(k,s(e,n),4);case 4:if(c=k.h,o(Dh(c.headers)),"HEAD"==n.method){k.B(5);break}return b=c.clone().body.getReader(),w=(_=c.headers.get("Content-Length"))?parseInt(_,10):0,T=function(e){function t(){var n,r,o;return A(function(s){switch(s.g){case 1:return p(s,2),f(s,b.read(),4);case 4:n=s.h,y(s,3);break;case 2:return r=v(s),K("error reading from stream",r.message),s.return();case 3:if(n.done){s.B(5);break}if(d+=n.value.byteLength,!a){s.B(5);break}return f(s,a(n.value),5);case 5:o=Date.now(),(100<o-m||n.done)&&(i(o-m,d-g,w-d),g=d,m=o),n.done?e.close():(e.enqueue(n.value),t()),h(s)}})}t()},new u({start:T}),f(k,c.arrayBuffer(),6);case 6:l=k.h;case 5:y(k,3);break;case 2:if(S=v(k),r.He)throw new ke(1,1,7001,e,t);if(r.mf)throw new ke(1,1,1003,e,t);throw new ke(1,1,1002,e,S,t);case 3:return E=Dh(c.headers),k.return(Ph(E,l,c.status,e,c.url,t))}})}function Dh(e){var t={};return e.forEach(function(e,n){t[n.trim()]=e}),t}function Rh(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!!e.Response&&(!!new Response("").body&&!(!e.fetch||!e.AbortController))}function Lh(){}function Nh(e,t,n,r,i){var o=new Jw,a=Date.now(),s=0;return new En(new Promise(function(u,c){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials,o.onabort=function(){c(new ke(1,1,7001,e,n))};var l=!1;o.onreadystatechange=function(){if(2==o.readyState&&!l){var e=Fh(o);i(e),l=!0}},o.onload=function(){var t=Fh(o),r=o.response;try{var i=Ph(t,r,o.status,e,o.responseURL,n);u(i)}catch(e){c(e)}},o.onerror=function(t){c(new ke(1,1,1002,e,t,n))},o.ontimeout=function(){c(new ke(1,1,1003,e,n))},o.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(r(t-a,e.loaded-s,e.total-e.loaded),s=e.loaded,a=t)};for(var d in t.headers)o.setRequestHeader(d.toLowerCase(),t.headers[d]);o.send(t.body)}),function(){return o.abort(),Promise.resolve()})}function Fh(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}function Uh(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function Bh(e){return e.za().map(function(e){return"{"+encodeURI(e)+"}"}).join("")+":"+e.j+":"+e.h}function Vh(e,t){return Ba(e.g.za(),e.g.j,e.g.h,t.streaming.retryParameters)}function Hh(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Wh(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function Kh(e){var t=this;this.o=e,this.j=new Map,this.i=new Gn(function(){return Gh(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new Hh}function qh(e,t,n){e.m=t,e.l=n}function Gh(e){var t=e.h.map(function(e){return e()});return e.h=[],Promise.all(t)}function zh(e,t,n,r,i,o){zn(e.i);var a=(e.j.get(t)||Promise.resolve()).then(function(){var t,a,s,u,c,l,d;return A(function(h){if(1==h.g)return f(h,Xh(e,n),2);if(t=h.h,e.i.g)throw new ke(2,9,7001);if(i)for(u in a=te(t),s=new xr(a),s.data)c=Number(u),l=s.data[c],d=s.g[c],e.l(l,d);e.g.close(r,t.byteLength);var p=e.g;return e.m(0==p.i?0:p.j/p.i,e.g.h),h.return(o(t))})});e.j.set(t,a)}function Yh(e){return A(function(t){return 1==t.g?f(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function Xh(e,t){var n,r,i,o;return A(function(a){return 1==a.g?(n=Rb,r=e.o.request(n,t),i=function(){return r.abort()},e.h.push(i),f(a,r.promise,2)):(o=a.h,se(e.h,i),a.return(o.data))})}function Jh(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Sn,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function $h(e,t){return new Promise(function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(){var e;return A(function(r){if(1==r.g)return null==i.result?(n(),r.return()):(e=i.result,f(r,t(e.key,e.value,e),2));e.continue(),h(r)})}})}function Qh(e){this.h=e,this.g=[]}function Zh(e,t){return ep(e,t,"readwrite")}function ep(e,t,n){n=e.h.transaction([t],n);var r=new Jh(n,t);return e.g.push(r),r.promise().then(function(){se(e.g,r)},function(){se(e.g,r)}),r}function tp(e,t,n){this.h=new Qh(e),this.i=t,this.g=n}function np(e,t,n){e=Zh(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}function rp(e){return Promise.reject(new ke(2,9,9011,"Cannot add new value to "+e))}function ip(e,t,n,r){e=Zh(e.h,t),t=e.store();var i={};n=a(n);for(var o=n.next();!o.done;i={Mc:i.Mc},o=n.next())i.Mc=o.value,t.delete(i.Mc).onsuccess=function(e){return function(){return r(e.Mc)}}(i);return e.promise()}function op(e,t,n){var r,i,o,s,u,c,l;return A(function(d){if(1==d.g){for(r=ep(e.h,t,"readonly"),i=r.store(),o={},s=[],u={},c=a(n),l=c.next();!l.done;u={dc:u.dc,bc:u.bc},l=c.next())u.bc=l.value,u.dc=i.get(u.bc),u.dc.onsuccess=function(e){return function(){void 0==e.dc.result&&s.push(e.bc),o[e.bc]=e.dc.result}}(u);return f(d,r.promise(),2)}if(s.length)throw new ke(2,9,9012,"Could not find values for "+s);return d.return(n.map(function(e){return o[e]}))})}function ap(e){this.g=new Qh(e)}function sp(){this.g=new Map}function up(e){var t=null;if(e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){e.hasFixedKeySpace()||t||(t={path:{Aa:n,na:r},na:e})})}),t)return t;throw new ke(2,9,9013,"Could not find a cell that supports add-operations")}function cp(e,t){e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){t({Aa:n,na:r},e)})})}function lp(e,t,n){if(!(e=e.g.get(t)))throw new ke(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new ke(2,9,9013,"Could not find cell with name "+n);return t}function dp(e,t){e.g.forEach(function(e){t(e.getEmeSessionCell())})}function fp(e){var t=Array.from(e.g.keys());if(!t.length)throw new ke(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function hp(e){var t,n,r;return A(function(i){return 1==i.g?(t=Array.from(e.g.values()),n=0<t.length,n||(r=$w,r.forEach(function(e){(e=e())&&t.push(e)})),f(i,Promise.all(t.map(function(e){return e.erase()})),2)):n?i.B(0):f(i,Promise.all(t.map(function(e){return e.destroy()})),0)})}function pp(e,t){$w.set(e,t)}function gp(){tp.apply(this,arguments)}function yp(e,t){bp(e);for(var n=a(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(n){return vp(n,e.startTime,t)})}function vp(e,t,n){var r=e.initSegmentUri?mp(e.initSegmentUri):null,i=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){var n=mp(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:o,timestampOffset:i,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1}}function mp(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new ke(2,9,9004,"Could not parse uri "+e)}function bp(e){var t=e.streams.filter(function(e){return"audio"==e.contentType});if(e=e.streams.filter(function(e){return"video"==e.contentType}),!t.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){for(var n=a(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=a(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){W("Found video-only content. Creating variants for video.");var i=n++,o=a(e);for(r=o.next();!r.done;r=o.next())r.value.variantIds.push(i)}if(!e.length&&t.length)for(W("Found audio-only content. Creating variants for audio."),i=n++,o=a(t),r=o.next();!r.done;r=o.next())r.value.variantIds.push(i);if(e.length&&t.length)for(W("Found audio-video content. Creating variants."),t=a(t),r=t.next();!r.done;r=t.next())for(r=r.value,i=a(e),o=i.next();!o.done;o=i.next()){o=o.value;var s=n++;r.variantIds.push(s),o.variantIds.push(s)}}}function _p(){tp.apply(this,arguments)}function wp(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1}}function Tp(){tp.apply(this,arguments)}function Sp(){this.m=this.j=this.i=this.h=this.g=this.l=null}function Ep(){var t=new Sn,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(e){V("Deleting","shaka_offline_db","is being blocked",e)},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new ke(2,9,9001,n.error)),e.preventDefault()},t}function kp(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}function Ap(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new kp(t,n,r,Number(e[4])):null}function xp(e,t){this.h=e,this.g=t}function Cp(e,t){var n=new Jo(null,0);n.Na(t.duration);var r=t.streams.filter(function(e){return"audio"==e.type}),i=t.streams.filter(function(e){return"video"==e.type});r=Op(e,r,i,n),i=t.streams.filter(function(e){return e.type==pb}).map(function(t){return Pp(e,t,n)});var o=t.streams.filter(function(e){return"image"==e.type}).map(function(t){return Pp(e,t,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=a(r.values()),c=u.next();!c.done;c=u.next())c=c.value,c.audio&&c.audio.encrypted&&(c.audio.drmInfos=s),c.video&&c.video.encrypted&&(c.video.drmInfos=s);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function Op(e,t,n,r){for(var i=new Set,o=a(t),s=o.next();!s.done;s=o.next()){var u=a(s.value.variantIds);for(s=u.next();!s.done;s=u.next())i.add(s.value)}for(o=a(n),s=o.next();!s.done;s=o.next())for(u=a(s.value.variantIds),s=u.next();!s.done;s=u.next())i.add(s.value);for(o=new Map,i=a(i),s=i.next();!s.done;s=i.next())s=s.value,o.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,label:null,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=a(t),i=t.next();!i.done;i=t.next())for(i=i.value,s=Pp(e,i,r),u=a(i.variantIds),i=u.next();!i.done;i=u.next())i=o.get(i.value),i.language=s.language,i.primary=i.primary||s.primary,i.audio=s;for(n=a(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=Pp(e,i,r),s=a(i.variantIds),i=s.next();!i.done;i=s.next())i=o.get(i.value),i.primary=i.primary||t.primary,i.video=t;return o}function Pp(e,t,n){var r=t.segments.map(function(t){return Mp(e,t)});return n.kd(r),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new va(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external}}function Mp(e,t){var n=new kp("segment",e.h,e.g,t.dataKey);return new Hi(t.startTime,t.endTime,function(){return[n.toString()]},0,null,null!=t.initSegmentKey?Ip(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}function Ip(e,t){var n=new kp("segment",e.h,e.g,t);return new Bi(function(){return[n.toString()]},0,null)}function jp(){this.g=null}function Dp(){}function Rp(e){var t=Ap(e);return t&&"manifest"==t.g?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=xn(e)):e=t&&"segment"==t.g?Lp(t.key(),t):kn(new ke(2,1,9004,e)),e}function Lp(e,t){var n=new sp;return xn(void 0).da(function(){return n.init()}).da(function(){return lp(n,t.Aa(),t.na())}).da(function(e){return e.getSegments([t.key()])}).da(function(e){return{uri:t,data:e[0].data,headers:{}}}).finally(function(){return n.destroy()})}function Np(e,t,n){var r,i,o,s,u,c;return A(function(l){switch(l.g){case 1:r=[];for(var d=[],h=a(n),p=h.next();!p.done;p=h.next()){p=p.value;for(var g=!1,y=a(d),v=y.next();!v.done;v=y.next())if(v=v.value,Up(v.info,p)){v.sessionIds.push(p.sessionId),g=!0;break}g||d.push({info:p,sessionIds:[p.sessionId]})}i=a(d),o=i.next();case 2:if(o.done){l.B(4);break}return s=o.value,u=Fp(e,t,s),f(l,u,5);case 5:c=l.h,r=r.concat(c),o=i.next(),l.B(2);break;case 4:return l.return(r)}})}function Fp(e,t,n){var r,i,o,a;return A(function(s){switch(s.g){case 1:return r=new Jr({Bb:t,onError:function(){},nd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),p(s,2),r.configure(e),f(s,ei(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:y(s,3);break;case 2:return i=v(s),V("Error initializing EME",i),f(s,r.destroy(),5);case 5:return s.return([]);case 3:return p(s,6),f(s,ii(r),8);case 8:y(s,7);break;case 6:return o=v(s),V("Error setting server certificate",o),f(s,r.destroy(),9);case 9:return s.return([]);case 7:return a=[],f(s,Promise.all(n.sessionIds.map(function(e){var t;return A(function(n){return 1==n.g?(p(n,2),f(n,oi(r,e),4)):2!=n.g?(a.push(e),y(n,0)):(t=v(n),V("Error deleting offline session",t),void h(n))})})),10);case 10:return f(s,r.destroy(),11);case 11:return s.return(a)}})}function Up(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&ue(e.audioCapabilities,t.audioCapabilities,n)&&ue(e.videoCapabilities,t.videoCapabilities,n)}function Bp(e,t,n){var r=t.presentationTimeline.getDuration();return t=Hp(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function Vp(e,t){var n=Cp(new xp(e.Aa(),e.na()),t),r=t.appMetadata||{};return n=Hp(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function Hp(e){var t=[],n=Yt(e.variants);n=a(n);for(var r=n.next();!r.done;r=n.next())t.push(Bt(r.value));for(e=a(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Vt(n.value));return t}function Wp(){this.g={}}function Kp(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,o=r.bandwidth||t.bandwidth-i;0>=o&&(V("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),o=t.bandwidth),e.g[n.id]=i,e.g[r.id]=o}}function qp(e,t){e.g[t.id]=t.bandwidth||2048}function Gp(e,t){return e=e.g[t],null==e&&(e=0,B("Asking for bitrate of stream not given to the estimator")),0==e&&V("Using bitrate of 0, this stream won't affect progress"),e}function zp(e){var t=this;if(e&&e.constructor!=bu)throw new ke(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.ub()):(this.h=cu(),this.g=new Fn),this.i=[],this.j=[];var n=!e;this.l=new Gn(function(){var e,r,i,o,s;return A(function(u){switch(u.g){case 1:return f(u,Promise.all(t.j.map(function(e){return Gh(e)})),2);case 2:for(e=function(){},r=[],i=a(t.i),o=i.next();!o.done;o=i.next())s=o.value,r.push(s.then(e,e));return f(u,Promise.all(r),3);case 3:if(!n){u.B(4);break}return f(u,t.g.destroy(),4);case 4:t.h=null,t.g=null,h(u)}})})}function Yp(){if(ot())e:{for(var e=a($w.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Xp(e,t,n,r,i,o){var a,s,u,c,l,d,h,g,y,_,w,T,S,E;return A(function(k){switch(k.g){case 1:return yg(),s=a=null,u=new sp,d=l=c=null,p(k,2,3),f(k,r(),5);case 5:return a=k.h,f(k,lg(e,t,a,i),6);case 6:if(h=k.h,gg(e),!(g=!h.presentationTimeline.S()&&!h.presentationTimeline.zb()))throw new ke(2,9,9005,t);return f(k,dg(e,h,function(e){d=d||e},i),7);case 7:if(s=k.h,gg(e),d)throw d;return f(k,Zp(h,i),8);case 8:return f(k,u.init(),9);case 9:return gg(e),f(k,up(u),10);case 10:return c=k.h,gg(e),y=eg(s,h,t,n,i,o),_=y.pg,w=y.we,f(k,c.na.addManifests([_]),11);case 11:if(T=k.h,gg(e),l=T[0],gg(e),d)throw d;return f(k,Jp(e,w,l,_,o,i,c.na,h,s),12);case 12:return gg(e),S=new kp("manifest",c.path.Aa,c.path.na,l),k.return(Vp(S,_));case 3:return m(k),f(k,u.destroy(),13);case 13:if(!a){k.B(14);break}return f(k,a.stop(),14);case 14:if(!s){k.B(16);break}return f(k,s.destroy(),16);case 16:b(k,0);break;case 2:if(E=v(k),null==l){k.B(18);break}return f(k,$p(l),18);case 18:throw d||E}})}function Jp(e,t,n,r,i,o,s,u,c){var l,d,g,m,b,_,w,T,S,E;return A(function(k){switch(k.g){case 1:if(l={},d=0,g=function(t,p){var g,y,v,m,b,_,w;return A(function(T){if(1==T.g){for(g={},y=a(t),v=y.next();!v.done;g={nb:g.nb},v=y.next())g.nb=v.value,m=Vh(g.nb,o),b=g.nb.i,_=g.nb.h,w=function(t){return function(n){var r,i,o;return A(function(a){if(1==a.g)return f(a,s.addSegments([{data:n}]),2);r=a.h,gg(e),i=t.nb.g,o=Bh(i),l[o]=r[0],d+=n.byteLength,h(a)})}}(g),zh(i,g.nb.groupId,m,b,_,w);return f(T,Yh(i),2)}return p?(gg(e),rg(u,r,c,o),f(T,s.updateManifest(n,r),0)):T.B(0)})},m=!1,p(k,2),!tg(u)||!m||ng(u)){k.B(4);break}return f(k,g(t.filter(function(e){return e.h}),!0),5);case 5:return gg(e),t=t.filter(function(e){return!e.h}),b=l,_=d,l={},d=0,f(k,Qp(s,n,r,b,_,function(){return gg(e)}),6);case 6:gg(e);case 4:if(m){k.B(7);break}return f(k,g(t,!1),8);case 8:return gg(e),w=l,T=d,l={},d=0,f(k,Qp(s,n,r,w,T,function(){return gg(e)}),9);case 9:gg(e);case 7:y(k,0);break;case 2:return S=v(k),E=Object.values(l),f(k,s.removeSegments(E,function(){}),10);case 10:throw S}})}function $p(e){var t,n,r,i;return A(function(o){switch(o.g){case 1:return t=new sp,f(o,t.init(),2);case 2:return f(o,up(t),3);case 3:return n=o.h,r=new kp("manifest",n.path.Aa,n.path.na,e),f(o,t.destroy(),4);case 4:return i=new zp,f(o,i.remove(r.toString()),0)}})}function Qp(e,t,n,r,i,o){var s,u,c,l,d,h,g,m,b,_,w;return A(function(T){switch(T.g){case 1:for(s=!1,p(T,2),u=!0,c=a(n.streams),l=c.next();!l.done;l=c.next())for(d=l.value,h=a(d.segments),g=h.next();!g.done;g=h.next())m=g.value,b=m.pendingSegmentRefId?r[m.pendingSegmentRefId]:null,null!=b&&(m.dataKey=b,m.pendingSegmentRefId=void 0),b=m.pendingInitSegmentRefId?r[m.pendingInitSegmentRefId]:null,null!=b&&(m.initSegmentKey=b,m.pendingInitSegmentRefId=void 0),m.pendingSegmentRefId&&(u=!1),m.pendingInitSegmentRefId&&(u=!1);return n.size+=i,u&&(n.isIncomplete=!1),f(T,e.updateManifest(t,n),4);case 4:s=!0,o(),y(T,0);break;case 2:return _=v(T),f(T,$p(t),5);case 5:if(s){T.B(6);break}return w=Object.values(r),f(T,e.removeSegments(w,function(){}),6);case 6:throw _}})}function Zp(e,t){var n,r,i,o,s,u,c,l,d,g,m,b,_,w,T,S,E,k,x,C,O,P,M,I,j,D,R,L,N;return A(function(A){switch(A.g){case 1:return n={width:1/0,height:1/0},kt(e,t.restrictions,n),f(A,Ct(e,t.offline.usePersistentLicense),2);case 2:for(r=[],i=t.preferredAudioChannelCount,o=t.preferredDecodingAttributes,s=t.preferredVideoCodecs,u=t.preferredAudioCodecs,vt(e,s,u,i,o),c=a(e.variants),l=c.next();!l.done;l=c.next())d=l.value,r.push(Bt(d));for(g=a(e.textStreams),m=g.next();!m.done;m=g.next())b=m.value,r.push(Vt(b));for(_=a(e.imageStreams),w=_.next();!w.done;w=_.next())T=w.value,r.push(Ht(T));return f(A,t.offline.trackSelectionCallback(r),3);case 3:for(S=A.h,E=e.presentationTimeline.getDuration(),k=0,x=a(S),C=x.next();!C.done;C=x.next())O=C.value,P=O.bandwidth*E/8,k+=P;return p(A,4),f(A,t.offline.downloadSizeCallback(k),6);case 6:if(!(M=A.h))throw new ke(2,9,9014);y(A,5);break;case 4:if((I=v(A))instanceof ke)throw I;throw V("downloadSizeCallback has produced an unexpected error",I),new ke(2,9,9015);case 5:for(j=new Set,D=new Set,R=new Set,L=a(S),C=L.next();!C.done;C=L.next())N=C.value,"variant"==N.type&&j.add(N.id),"text"==N.type&&D.add(N.id),"image"==N.type&&R.add(N.id);e.variants=e.variants.filter(function(e){return j.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return D.has(e.id)}),e.imageStreams=e.imageStreams.filter(function(e){return R.has(e.id)}),Tg(e),h(A)}})}function eg(e,t,n,r,i,o){var s=Bp(n,t,r),u=i.offline.progressCallback;qh(o,function(e,t){s.size=t,u(s,e)},function(t,n){c&&i.offline.usePersistentLicense&&l==n&&si(e,"cenc",t)});var c=tg(t)&&!ng(t),l=null;c&&(l=Qw.get(e.g.keySystem));for(var d=new Wp,f=a(t.textStreams),h=f.next();!h.done;h=f.next())d.g[h.value.id]=52;for(f=a(t.imageStreams),h=f.next();!h.done;h=f.next())qp(d,h.value);for(h=a(t.variants),f=h.next();!f.done;f=h.next())Kp(d,f.value);return d=fg(o,d,t,i),o=d.streams,d=d.we,h=e.g,f=i.offline.usePersistentLicense,h&&f&&(h.initData=[]),{pg:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.uc(),streams:o,sessionIds:f?ci(e):[],drmInfo:h,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},we:d}}function tg(e){return e.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})}function ng(e){return e.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})})}function rg(e,t,n,r){if(t.expiration=n.uc(),n=ci(n),t.sessionIds=r.offline.usePersistentLicense?n:[],tg(e)&&r.offline.usePersistentLicense&&!n.length)throw new ke(2,9,9007)}function ig(e,t){var n,r,i,o,a,s;return A(function(u){switch(u.g){case 1:if(yg(),null==(n=Ap(t))||"manifest"!=n.g)throw new ke(2,9,9004,t);return r=n,i=new sp,g(u),f(u,i.init(),4);case 4:return f(u,lp(i,r.Aa(),r.na()),5);case 5:return o=u.h,f(u,o.getManifests([r.key()]),6);case 6:return a=u.h,s=a[0],f(u,Promise.all([ag(e,s,i),sg(o,r,s)]),2);case 2:return m(u),f(u,i.destroy(),8);case 8:b(u,0)}})}function og(e,t){for(var n=[],r=a(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&"video"==i.type?n.push({contentType:De(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||n.push({contentType:De(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function ag(e,t,n){return A(function(r){return f(r,_g(e.g,e.h.drm,n,t),0)})}function sg(e,t,n){function r(){}var i=bg(n);return Vp(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}function ug(e){var t,n,r,i,o,s,u,c,l,d;return A(function(h){switch(h.g){case 1:return yg(),t=e.g,n=e.h.drm,r=new sp,i=!1,g(h),f(h,r.init(),4);case 4:o=[],dp(r,function(e){return o.push(e)}),s=a(o),u=s.next();case 5:if(u.done){h.B(2);break}return c=u.value,f(h,c.getAll(),8);case 8:return l=h.h,f(h,Np(n,t,l),9);case 9:return d=h.h,f(h,c.remove(d),10);case 10:d.length!=l.length&&(i=!0),u=s.next(),h.B(5);break;case 2:return m(h),f(h,r.destroy(),11);case 11:b(h,3);break;case 3:return h.return(!i)}})}function cg(){var e,t,n;return A(function(r){switch(r.g){case 1:return yg(),e=[],t=new sp,g(r),f(r,t.init(),4);case 4:return n=Promise.resolve(),cp(t,function(t,r){n=n.then(function(){var n;return A(function(i){if(1==i.g)return f(i,r.getAllManifests(),2);n=i.h,n.forEach(function(n,r){n=Vp(new kp("manifest",t.Aa,t.na,r),n),e.push(n)}),h(i)})})}),f(r,n,2);case 2:return m(r),f(r,t.destroy(),6);case 6:b(r,3);break;case 3:return r.return(e)}})}function lg(e,t,n,r){var i,o,a,s,u;return A(function(c){if(1==c.g)return i=null,o=e.g,a={networkingEngine:o,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},n.configure(r.manifest),gg(e),f(c,n.start(t,a),2);if(3!=c.g)return s=c.h,gg(e),u=wg(s),f(c,Promise.all(Qn(u,function(e){return e.createSegmentIndex()})),3);if(gg(e),i)throw i;return c.return(s)})}function dg(e,t,n,r){var i;return A(function(o){switch(o.g){case 1:return i=new Jr({Bb:e.g,onError:n,nd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),i.configure(r.drm),f(o,Qr(i,t.variants,r.offline.usePersistentLicense),2);case 2:return f(o,ii(i),3);case 3:return f(o,ai(i),4);case 4:return o.return(i)}})}function fg(e,t,n,r){var i=new Map,o=wg(n),s=new Map;o=a(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var c=hg(e,t,n,u,r,i);s.set(u.id,c)}for(e=a(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),we:Array.from(i.values())}}function hg(e,t,n,r,i,o){var a={id:r.id,originalId:r.originalId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external},s=i.offline.numberOfParallelDownloads,u=0;return pg(r,n.presentationTimeline.gb(),function(n){var i=Bh(n),c=void 0;if(!o.has(i)){var l=n.endTime-n.startTime;l=Gp(t,r.id)*l,l=Wh(e.g,l),o.set(i,new Uh(n,l,u,!1))}n.g&&(c=Bh(n.g),o.has(c)||(l=.5*Gp(t,r.id),l=Wh(e.g,l),o.set(c,new Uh(n.g,l,u,!0)))),a.segments.push({pendingInitSegmentRefId:c,initSegmentKey:c?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:i,dataKey:0}),u=(u+1)%s}),a}function pg(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function gg(e){if(e.l.g)throw new ke(2,9,7001)}function yg(){if(!Yp())throw new ke(2,9,9e3)}function vg(e,t){return A(function(n){return 1==n.g?(e.i.push(t),g(n),f(n,t,4)):2!=n.g?n.return(n.h):(m(n),se(e.i,t),b(n,0))})}function mg(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){se(e.i,n)})}function bg(e){var t=new Set;e=a(e.streams);for(var n=e.next();!n.done;n=e.next()){n=a(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,null!=r.initSegmentKey&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function _g(e,t,n,r){var i,o,a;return A(function(s){return 1==s.g?r.drmInfo?(i=fp(n),o=r.sessionIds.map(function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:og(r,!1),videoCapabilities:og(r,!0)}}),f(s,Np(t,e,o),2)):s.return():3!=s.g?(a=s.h,f(s,i.remove(a),3)):f(s,i.add(o.filter(function(e){return!a.includes(e.sessionId)})),0)})}function wg(e){for(var t=new Set,n=a(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=a(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=a(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function Tg(e){var t=new Set(e.variants.map(function(e){return e.video})),n=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams,1<t.size&&V("Multiple video tracks selected to be stored"),t=a(n);for(var r=t.next();!r.done;r=t.next()){r=r.value;for(var i=a(n),o=i.next();!o.done;o=i.next())o=o.value,r!=o&&r.language==o.language&&V("Similar audio tracks were selected to be stored",r.id,o.id)}for(n=a(e),t=n.next();!t.done;t=n.next())for(t=t.value,r=a(e),i=r.next();!i.done;i=r.next())i=i.value,t!=i&&t.language==i.language&&V("Similar text tracks were selected to be stored",t.id,i.id)}function Sg(){}function Eg(e,t){for(e={priority:t||0,xf:e},t=0;t<Zw.length;t++)if(Zw[t].priority<e.priority)return void Zw.splice(t,0,e);Zw.push(e)}function kg(){this.g=new xg}function Ag(){e.AbortController||(e.AbortController=kg,e.AbortSignal=xg)}function xg(){jn.call(this),this.h=!1,this.g=void 0,this.onabort=null}function Cg(){}function Og(){if(Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))H("Using native ARIAMixin interface.");else{H("ARIAMixin interface not detected. Installing polyfill.");for(var e=a(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())Pg(t.value)}}function Pg(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||void 0==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function Mg(){}function Ig(){_m()}function jg(){}function Dg(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Rg),document.addEventListener("webkitfullscreenerror",Rg),document.addEventListener("mozfullscreenchange",Rg),document.addEventListener("mozfullscreenerror",Rg),document.addEventListener("MSFullscreenChange",Rg),document.addEventListener("MSFullscreenError",Rg)}}function Rg(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function Lg(){}function Ng(){var e=!0;(dt()||pt("PlayStation 5")||ft()||pt("Web0S")||ct()||pt("CrKey")||pt("PC=EOS")||pt("Hisense")||pt("VIDAA"))&&(e=!1),e&&navigator.mediaCapabilities?H("MediaCapabilities: Native mediaCapabilities support found."):(H("MediaCapabilities: install"),navigator.mediaCapabilities||(navigator.mediaCapabilities={}),eT=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Fg)}function Fg(t){var n,r,i,o,a,s,u,c,l,d,h,g,m,b,_,w,T,S,E;return A(function(k){switch(k.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},!t)return k.return(n);if(r=t.video,i=t.audio,"media-source"==t.type){if(!ot())return k.return(n);if(r){if(pt("CrKey"))if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var A=r.contentType;r.width&&r.height&&(A+="; width="+r.width+"; height="+r.height),r.framerate&&(A+="; framerate="+r.framerate),"pq"===r.transferFunction&&(A+="; eotf=smpte2084"),o=cast.__platform__.canDisplayType(A)}else V("Expected cast APIs to be available! Falling back to shaka.media.Capabilities.isTypeSupported() for type support."),o=Y(r.contentType);else ct()?(a=r.contentType,r.width&&r.height&&(a+="; width="+r.width,a+="; height="+r.height),r.framerate&&(a+="; framerate="+r.framerate),r.bitrate&&(a+="; bitrate="+r.bitrate),o=Y(a)):o=Y(r.contentType);if(!o)return k.return(n)}if(i&&(s=i.contentType,!(u=Y(s))))return k.return(n)}else{if("file"!=t.type)return k.return(n);if(r&&(c=r.contentType,!(l=at(c)))||i&&(d=i.contentType,!(h=at(d))))return k.return(n)}if(!t.keySystemConfiguration)return n.supported=!0,k.return(Promise.resolve(n));if(g=t.keySystemConfiguration,m=[],b=[],g.audio&&(_={robustness:g.audio.robustness||"",contentType:t.audio.contentType},m.push(_)),g.video&&(w={robustness:g.video.robustness||"",contentType:t.video.contentType},b.push(w)),T={initDataTypes:[g.initDataType],distinctiveIdentifier:g.distinctiveIdentifier,persistentState:g.persistentState,sessionTypes:g.sessionTypes},m.length&&(T.audioCapabilities=m),b.length&&(T.videoCapabilities=b),S=(t.video?t.video.contentType:"")+"#"+(t.audio?t.audio.contentType:"")+"#"+t.keySystemConfiguration.keySystem,p(k,3),S in tT){E=tT[S],k.B(5);break}return f(k,navigator.requestMediaKeySystemAccess(g.keySystem,[T]),6);case 6:E=k.h,tT[S]=E;case 5:y(k,4);break;case 3:v(k),H("navigator.requestMediaKeySystemAccess failed.");case 4:E&&(n.supported=!0,n.keySystemAccess=E);case 2:return k.return(n)}})}function Ug(){}function Bg(){W("MediaSource.install");var t=ht();e.MediaSource?e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(H("Patching Chromecast MSE bugs."),qg()):t?12>=t?(H("Patching Safari 11 & 12 MSE bugs."),Vg(),Hg()):15>=t&&(H("Patching Safari 13 & 14 & 15 MSE bugs."),Vg()):st()?(H("Rejecting TS container."),Wg()):pt("Tizen 2")||pt("Tizen 3")||pt("Tizen 4")?(H("Rejecting Opus."),Kg()):H("Using native MSE as-is."):H("No MSE implementation available."),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&(H("Patching vp09 support queries."),Gg())}function Vg(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,x.apply(0,arguments));return t.abort=function(){},t}}function Hg(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function Wg(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(";")[0].split("/")[1]&&e(t)}}function Kg(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Ue(t)[0]&&e(t)}}function qg(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some(function(e){return e.startsWith("codecs=")})?cast.__platform__.canDisplayType(t):e(t)}}function Gg(){var e=MediaSource.isTypeSupported;pt("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(e){return e.startsWith("codecs=")});if(0>r)return e(t);var i=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=i.findIndex(function(e){return e.startsWith("vp09")});return 0<=o&&(i[o]="vp9",n[r]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}function zg(){}function Yg(){screen.orientation&&screen.orientation.unlock?H("Using native screen.orientation"):void 0!=screen.orientation?Xg():void 0!=e.orientation&&Jg()}function Xg(){void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return H("screen.orientation.lock is a no-op"),Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){H("screen.orientation.unlock is a no-op")})}function Jg(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new $g;screen.orientation=n,t(),e.addEventListener("orientationchange",function(){t();var e=new Mn("change");n.dispatchEvent(e)})}function $g(){jn.call(this),this.type="",this.angle=0}function Qg(){}function Zg(e,t){W("PatchedMediaKeysApple.requestMediaKeySystemAccess");try{var n=new ny(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function ey(e){W("PatchedMediaKeysApple.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&iy(t,null),delete this.mediaKeys,(this.mediaKeys=e)?iy(e,this):Promise.resolve()}function ty(e){if(W("PatchedMediaKeysApple.onWebkitNeedKey_",e),e=te(e.initData),ne(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=ar(e.subarray(4),!0),e=ur(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=ee(e),this.dispatchEvent(t)}function ny(e,t){if(W("PatchedMediaKeysApple.MediaKeySystemAccess"),this.keySystem=e,e.startsWith("com.apple.fps"))for(e=a(t),t=e.next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,i=!1;if(n.audioCapabilities)for(var o=a(n.audioCapabilities),s=o.next();!s.done;s=o.next())s=s.value,s.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),i=!0));if(n.videoCapabilities)for(n=a(n.videoCapabilities),s=n.next();!s.done;s=n.next())o=s.value,o.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),i=!0));r||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=i?t:null}if(t)return void(this.g=t)}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function ry(e){W("PatchedMediaKeysApple.MediaKeys"),this.h=new WebKitMediaKeys(e),this.g=new Yn}function iy(e,t){if(e.g.kb(),!t)return Promise.resolve();e.g.C(t,"webkitneedkey",ty);try{return ra(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(e){return Promise.reject(e)}}function oy(e){W("PatchedMediaKeysApple.MediaKeySession"),jn.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Yn,this.sessionId="",this.expiration=NaN,this.closed=new Sn,this.keyStatuses=new sy}function ay(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.g=t,t=new Mn("keystatuseschange"),e.dispatchEvent(t)}function sy(){this.size=0,this.g=void 0}function uy(){}function cy(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(H("EME not available."),navigator.requestMediaKeySystemAccess=ly,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=dy,e.MediaKeys=fy,e.MediaKeySystemAccess=hy,e.shakaMediaKeysPolyfill=!0)}function ly(){return W("PatchedMediaKeysNop.requestMediaKeySystemAccess"),Promise.reject(Error("The key system specified is not supported."))}function dy(e){return W("PatchedMediaKeysNop.setMediaKeys"),null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function fy(){throw new TypeError("Illegal constructor.")}function hy(){throw this.keySystem="",new TypeError("Illegal constructor.")}function py(){}function gy(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)H("Using webkit-prefixed EME v0.1b"),uT="webkit";else{if(!HTMLMediaElement.prototype.generateKeyRequest)return;H("Using nonprefixed EME v0.1b")}navigator.requestMediaKeySystemAccess=vy,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=my,e.MediaKeys=_y,e.MediaKeySystemAccess=by,e.shakaMediaKeysPolyfill=!0}}function yy(e){var t=uT;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function vy(e,t){W("PatchedMediaKeysWebkit.requestMediaKeySystemAccess");try{var n=new by(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function my(e){W("PatchedMediaKeysWebkit.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&wy(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&wy(e,this),Promise.resolve()}function by(e,t){W("PatchedMediaKeysWebkit.MediaKeySystemAccess"),this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video"),t=a(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var c=a(o.audioCapabilities),l=c.next();!l.done;l=c.next())l=l.value,l.contentType&&(u=!0,i.canPlayType(l.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(l),r=!0));if(o.videoCapabilities)for(c=a(o.videoCapabilities),l=c.next();!l.done;l=c.next())l=l.value,l.contentType&&(u=!0,i.canPlayType(l.contentType,this.g)&&(s.videoCapabilities.push(l),r=!0));if(u||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r)return void(this.h=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function _y(e){W("PatchedMediaKeysWebkit.MediaKeys"),this.l=e,this.h=null,this.g=new Yn,this.i=[],this.j=new Map}function wy(e,t){e.h=t,e.g.kb();var n=uT;t&&(e.g.C(t,n+"needkey",function(t){W("PatchedMediaKeysWebkit.onWebkitNeedKey_",t);var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=ee(t.initData),e.h.dispatchEvent(n)}),e.g.C(t,n+"keymessage",function(t){W("PatchedMediaKeysWebkit.onWebkitKeyMessage_",t);var n=Ty(e,t.sessionId);n?(t=(new Map).set("messageType",void 0==n.keyStatuses.wb()?"licenserequest":"licenserenewal").set("message",t.message),t=new Mn("message",t),W("PatchedMediaKeysWebkit.MediaKeySession.generated"),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t)):B("Session not found",t.sessionId)}),e.g.C(t,n+"keyadded",function(t){W("PatchedMediaKeysWebkit.onWebkitKeyAdded_",t),(t=Ty(e,t.sessionId))&&(W("PatchedMediaKeysWebkit.MediaKeySession.ready"),Ay(t,"usable"),t.g&&t.g.resolve(),t.g=null)}),e.g.C(t,n+"keyerror",function(t){W("PatchedMediaKeysWebkit.onWebkitKeyError_",t);var n=Ty(e,t.sessionId);n&&n.handleError(t)}))}function Ty(e,t){var n=e.j.get(t);return n?(W("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):(n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),W("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):null}function Sy(e,t,n){W("PatchedMediaKeysWebkit.MediaKeySession"),jn.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Sn,this.keyStatuses=new xy}function Ey(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var r=te(ur("LOAD_SESSION|"+n));else{var i=ur("PERSISTENT|");r=Ar(i,t)}else r=te(t)}catch(e){return Promise.reject(e)}e.h=new Sn;var o=yy("generateKeyRequest");try{e.j[o](e.i,r)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new it(function(){try{e.j[o](e.i,r)}catch(t){e.h.reject(t),e.h=null}}).U(.01)}return e.h}function ky(e,t,n){if(e.g)e.g.then(function(){return ky(e,t,n)}).catch(function(){return ky(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var r=or(n),i=JSON.parse(r);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Sr(i.keys[0].k),i=Sr(i.keys[0].kid)}else r=te(n),i=null;var o=yy("addKey");try{e.j[o](e.i,r,i,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function Ay(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.g=t,t=new Mn("keystatuseschange"),e.dispatchEvent(t)}function xy(){this.size=0,this.g=void 0}function Cy(){}function Oy(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(W("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=My,Object.defineProperty(t,"disablePictureInPicture",{get:jy,set:Dy,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Iy,document.addEventListener("webkitpresentationmodechanged",Py,!0))}}function Py(e){if(e=e.target,"picture-in-picture"==e.webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function My(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Iy(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function jy(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Dy(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function Ry(){}function Ly(){W("randomUUID.install"),e.crypto?"randomUUID"in e.crypto?W("RandomUUID: Native window.crypto.randomUUID() support found."):e.crypto.randomUUID=Ny:W("window.crypto must be available to install randomUUID polyfill.")}function Ny(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function Fy(){}function Uy(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=By)}function By(){return new Promise(function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(t,n){e({usage:t,quota:n})},t)})}function Vy(){}function Hy(){W("Symbol.install");var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:Wy})}function Wy(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function Ky(){}function qy(){if(W("VideoPlayPromise.install"),e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e}}}function Gy(){}function zy(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||lt())&&(t.getVideoPlaybackQuality=Yy)}}function Yy(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Xy(){}function Jy(){if(e.VTTCue)H("Using native VTTCue.");else if(e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)H("Using VTTCue polyfill from 3 argument TextTrackCue."),t=$y;else if(6==n)H("Using VTTCue polyfill from 6 argument TextTrackCue."),t=Qy;else{try{var r=!!$y(1,2,"")}catch(e){r=!1}r&&(H("Using VTTCue polyfill from 3 argument TextTrackCue."),t=$y)}t?e.VTTCue=function(e,n,r){return t(e,n,r)}:B("No recognized signature for TextTrackCue found!")}else B("VTTCue not available.")}function $y(t,n,r){return new e.TextTrackCue(t,n,r)}function Qy(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function Zy(){}function ev(){}function tv(e,t,n,r,i,o,s,u,c,l,d){var f=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!d)return null;var h=document.createElement("span");h.textContent=e.textContent}else h=e;for(var p=null,g=a(kT),y=g.next();!y.done&&!(p=uv(h,"backgroundImage",r,"#",y.value)[0]);y=g.next());if(("p"==e.nodeName||p)&&(d=!0),e=d,g="default"==(h.getAttribute("xml:space")||(u?"default":"preserve")),y=Array.from(h.childNodes).every(function(e){return e.nodeType==Node.TEXT_NODE}),u=[],!y)for(var v=a(h.childNodes),m=v.next();!m.done;m=v.next())(m=tv(m.value,t,n,r,i,o,s,g,c,h,d))&&u.push(m);r=null!=l,v=/\S/.test(h.textContent);var b=h.hasAttribute("begin")||h.hasAttribute("end")||h.hasAttribute("dur");if(!(b||v||"br"==h.tagName||0!=u.length||r&&!g))return null;for(m=lv(h,n),v=m.start,m=m.end;f&&f.nodeType==Node.ELEMENT_NODE&&"tt"!=f.tagName;)m=cv(f,n,v,m),v=m.start,m=m.end,f=f.parentNode;if(null==v&&(v=0),v+=t.periodStart,m=null==m?1/0:m+t.periodStart,v=Math.max(v,t.segmentStart),m=Math.min(m,t.segmentEnd),!b&&0<u.length)for(v=1/0,m=0,t=a(u),n=t.next();!n.done;n=t.next())n=n.value,v=Math.min(v,n.startTime),m=Math.max(m,n.endTime);if("br"==h.tagName)return i=new le(v,m,""),i.F=!0,i;if(t="",y&&(t=h.textContent,g&&(t=t.trim(),t=t.replace(/\s+/g," "))),t=new le(v,m,t),t.g=u,d||(t.aa=!0),c&&(t.Y=c),c=uv(h,"region",o,"")[0],h.hasAttribute("region")&&c&&c.getAttribute("xml:id")){var _=c.getAttribute("xml:id");t.region=s.filter(function(e){return e.id==_})[0]}return s=c,l&&r&&!h.getAttribute("region")&&!h.getAttribute("style")&&(s=uv(l,"region",o,"")[0]),nv(t,h,s,p,i,e,0==u.length),t}function nv(e,t,n,r,i,o,a){if(o=o||a,"rtl"==iv(t,n,i,"direction",o)&&(e.direction="rtl"),a=iv(t,n,i,"writingMode",o),"tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=Hm),(a=iv(t,n,i,"textAlign",!0))?(e.I=TT[a],e.s=wT[a],e.textAlign=Um[a.toUpperCase()]):e.textAlign=Fm,(a=iv(t,n,i,"displayAlign",!0))&&(e.i=Vm[a.toUpperCase()]),(a=iv(t,n,i,"color",o))&&(e.l=a),(a=iv(t,n,i,"backgroundColor",o))&&(e.backgroundColor=a),(a=iv(t,n,i,"border",o))&&(e.V=a),a=iv(t,n,i,"fontFamily",o))switch(a){case"monospaceSerif":e.m="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.m="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.m="sans-serif";break;case"monospaceSansSerif":e.m="Consolas,monospace";break;case"proportionalSerif":e.m="serif";break;default:e.m=a}if((a=iv(t,n,i,"fontWeight",o))&&"bold"==a&&(e.u=700),a=iv(t,n,i,"wrapOption",o),e.M=!a||"noWrap"!=a,(a=iv(t,n,i,"lineHeight",o))&&a.match(hT)&&(e.ea=a),(a=iv(t,n,i,"fontSize",o))&&(a.match(hT)||a.match(fT))&&(e.A=a),(a=iv(t,n,i,"fontStyle",o))&&(e.o=$m[a.toUpperCase()]),r){a=r.getAttribute("imageType")||r.getAttribute("imagetype");var s=r.getAttribute("encoding");r=r.textContent.trim(),"PNG"==a&&"Base64"==s&&r&&(e.R="data:image/png;base64,"+r)}(r=iv(t,n,i,"textOutline",o))&&(r=r.split(" "),r[0].match(hT)?e.L=e.l:(e.L=r[0],r.shift()),r[0]&&r[0].match(hT)?e.qa=r[0]:e.L=""),(r=iv(t,n,i,"letterSpacing",o))&&r.match(hT)&&(e.X=r),(r=iv(t,n,i,"linePadding",o))&&r.match(hT)&&(e.ca=r),(o=iv(t,n,i,"opacity",o))&&(e.D=parseFloat(o)),(n=ov(n,i,"textDecoration"))&&rv(e,n),(t=av(t,i,"textDecoration"))&&rv(e,t)}function rv(e,t){t=a(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.h.includes("underline")||e.h.push("underline");break;case"noUnderline":e.h.includes("underline")&&se(e.h,"underline");break;case"lineThrough":e.h.includes("lineThrough")||e.h.push("lineThrough");break;case"noLineThrough":e.h.includes("lineThrough")&&se(e.h,"lineThrough");break;case"overline":e.h.includes("overline")||e.h.push("overline");break;case"noOverline":e.h.includes("overline")&&se(e.h,"overline")}}function iv(e,t,n,r,i){return i=void 0===i||i,(e=av(e,n,r))?e:i?ov(t,n,r):null}function ov(e,t,n){if(!e)return null;var r=Rr(e,ET,n);return r||sv(e,t,n)}function av(e,t,n){var r=Rr(e,ET,n);return r||sv(e,t,n)}function sv(e,t,n){e=uv(e,"style",t,"");for(var r=null,i=0;i<e.length;i++){var o=Dr(e[i],"urn:ebu:tt:style",n);o||(o=Rr(e[i],ET,n)),o||(o=av(e[i],t,n)),o&&(r=o)}return r}function uv(e,t,n,r,i){var o=[];if(!e||1>n.length)return o;var s=e;for(e=null;s&&!(e=i?Dr(s,i,t):s.getAttribute(t))&&(s=s.parentNode)instanceof Element;);if(t=e)for(t=a(t.split(" ")),i=t.next();!i.done;i=t.next())for(i=i.value,e=a(n),s=e.next();!s.done;s=e.next())if(s=s.value,r+s.getAttribute("xml:id")==i){o.push(s);break}return o}function cv(e,t,n,r){return e=lv(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==r?r=e.end:null!=e.start&&(r+=e.start),{start:n,end:r}}function lv(e,t){var n=dv(e.getAttribute("begin"),t),r=dv(e.getAttribute("end"),t);return e=dv(e.getAttribute("dur"),t),null==r&&null!=e&&(r=n+e),{start:n,end:r}}function dv(e,t){var n=null;if(gT.test(e)){e=gT.exec(e),n=Number(e[1]);var r=Number(e[2]),i=Number(e[3]),o=Number(e[4]);o+=(Number(e[5])||0)/t.h,i+=o/t.frameRate,n=i+60*r+3600*n}else if(yT.test(e))n=fv(yT,e);else if(vT.test(e))n=fv(vT,e);else if(mT.test(e))e=mT.exec(e),n=Number(e[1])/t.frameRate;else if(bT.test(e))e=bT.exec(e),n=Number(e[1])/t.g;else if(_T.test(e))n=fv(_T,e);else if(e)throw new ke(2,2,2001,"Could not parse cue time range in TTML");return n}function fv(e,t){return e=e.exec(t),null==e||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function hv(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function pv(){this.g=new ev}function gv(e){this.h=e||"",this.g=0}function yv(e){vv(e,/[ \t]+/gm)}function vv(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=null==t?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function mv(e){return e.g==e.h.length?null:(e=vv(e,/[^ \t\n]*/gm))?e[0]:null}function bv(){this.h=!1,this.g="UNKNOWN"}function _v(e){for(var t=a(Object.entries(zm)),n=t.next();!n.done;n=t.next()){var r=a(n.value);n=r.next().value,r=r.next().value;var i=new le(0,0,"");i.l=r,e.set("."+n,i)}for(t=a(Object.entries(Ym)),n=t.next();!n.done;n=t.next())r=a(n.value),n=r.next().value,r=r.next().value,i=new le(0,0,""),i.backgroundColor=r,e.set("."+n,i)}function wv(e,t,n){0===n.size&&_v(n);e:{var r=e;e=[];for(var i=-1,o="",s=0;s<r.length;s++)if("/"===r[s]&&0<s&&"<"===r[s-1]){var u=r.indexOf(">",s);if(u<=s){e=r;break e}if((u=r.substring(s+1,u))&&"c"===u){var c=e.pop();c?c===u?(o+="/"+u+">",s+=u.length+1):c.startsWith("c.")?(s+=u.length+1,o+="/"+c+">"):o+=r[s]:o+=r[s]}else o+=r[s]}else"<"===r[s]?(i=s+1,"c"!=r[i]&&(i=-1)):">"===r[s]&&0<i&&(e.push(r.substr(i,s-i)),i=-1),o+=r[s];e=o}for(r=[],o=-1,i=0;i<e.length;i++)"<"===e[i]?o=i+1:">"===e[i]&&0<o&&(o=e.substr(o,i-o),o.match(AT)&&r.push(o),o=-1);for(r=a(r),i=r.next();!i.done;i=r.next())i=i.value,e=e.replace("<"+i+">",'<div time="'+i+'">'),e+="</div>";e:{for(i=e,o=[],s=-1,r="",e=!1,u=0;u<i.length;u++)if("/"===i[u]){if(-1===(c=i.indexOf(">",u))){e=i;break e}if((c=i.substring(u+1,c))&&"v"==c){e=!0;var l=null;if(o.length&&(l=o[o.length-1]),l){if(l===c)r+="/"+c+">";else{if(!l.startsWith("v")){r+=i[u];continue}r+="/"+l+">"}u+=c.length+1}else r+=i[u]}else r+=i[u]}else"<"===i[u]?(s=u+1,"v"!=i[s]&&(s=-1)):">"===i[u]&&0<s&&(o.push(i.substr(s,u-s)),s=-1),r+=i[u];for(i=a(o),o=i.next();!o.done;o=i.next())o=o.value,s=o.replace(" ",".voice-"),r=r.replace("<"+o+">","<"+s+">"),r=r.replace("</"+o+">","</"+s+">"),e||(r+="</"+s+">");e=r}if(i=Yr("<span>"+e+"</span>","span")){if(r=[],i=i.childNodes,1==i.length&&(o=i[0],o.nodeType==Node.TEXT_NODE||o.nodeType==Node.CDATA_SECTION_NODE))return void(t.T=xv(e));for(e=a(i),i=e.next();!i.done;i=e.next())Sv(i.value,t,r,n);t.g=r}else V("The cue's markup could not be parsed: ",e),t.T=xv(e)}function Tv(e,t){return e&&0<e.length?e:t}function Sv(e,t,n,r){var i=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var o=a(e.nodeName.split(/(?=[ .])+/g)),s=o.next();!s.done;s=o.next()){var u=s=s.value;if(u.startsWith(".voice-")){var c=u.split("-").pop();u='v[voice="'+c+'"]',r.has(u)||(u="v[voice="+c+"]")}switch(r.has(u)&&(u=r.get(u))&&(i.backgroundColor=Tv(u.backgroundColor,i.backgroundColor),i.l=Tv(u.l,i.l),i.m=Tv(u.m,i.m),i.A=Tv(u.A,i.A),i.u=u.u,i.o=u.o,i.D=u.D,i.K=u.K,i.M=u.M),s){case"br":s=t.clone(),s.F=!0,n.push(s);break;case"b":i.u=700;break;case"i":i.o="italic";break;case"u":i.h.push("underline");break;case"font":(s=e.getAttribute("color"))&&(i.l=s);break;case"div":(s=e.getAttribute("time"))&&(s=Av(new gv(s)))&&(i.startTime=s)}}if(Nr(e))for(o=!0,r=a(e.textContent.split("\n")),e=r.next();!e.done;e=r.next())e=e.value,o||(o=t.clone(),o.F=!0,n.push(o)),0<e.length&&(o=i.clone(),o.T=xv(e),n.push(o)),o=!1;else for(t=a(e.childNodes),e=t.next();!e.done;e=t.next())Sv(e.value,i,n,r)}function Ev(e,t,n){var r;if(r=/^align:(start|middle|center|end|left|right)$/.exec(t))t=r[1],e.textAlign="middle"==t?Fm:Um[t.toUpperCase()];else if(r=/^vertical:(lr|rl)$/.exec(t))e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl";else if(r=/^size:([\d.]+)%$/.exec(t))e.size=Number(r[1]);else if(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))e.position=Number(r[1]),r[2]&&(t=r[2],e.I="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":Nm);else{if(!(r=/^region:(.*)$/.exec(t))){e:{if(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.G=1,e.j=Number(n[1]),n[2]&&(e.s=Gm[n[2].toUpperCase()]);else{if(!(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))){e=!1;break e}e.G=Km,e.j=Number(n[1]),n[2]&&(e.s=Gm[n[2].toUpperCase()])}e=!0}return e}(t=kv(n,r[1]))&&(e.region=t)}return!0}function kv(e,t){return e=e.filter(function(e){return e.id==t}),e.length?e[0]:(V("VTT parser could not find a region with id: ",t," The region will be ignored."),null)}function Av(e){if(null==(e=vv(e,AT)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function xv(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(e){return t[e]||"'"}):e||""}function Cv(){this.g=null}function Ov(e,t,n){var r,i,o;return(new fr).box("payl",yr(function(e){r=or(e)})).box("iden",yr(function(e){i=or(e)})).box("sttg",yr(function(e){o=or(e)})).parse(e),r?Pv(r,i,o,t,n):null}function Pv(e,t,n,r,i){if(r=new le(r,i,""),wv(e,r,new Map),t&&(r.id=t),n)for(e=new gv(n),t=mv(e);t;)Ev(r,t,[])||V("VTT parser encountered an invalid VTT setting: ",t," The setting will be ignored."),yv(e),t=mv(e);return r}function Mv(){}function Iv(e){if(null==(e=vv(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function jv(){this.g=new bv}function Dv(e){var t="WEBVTT\n\n";if(""==e)return t;e=e.replace(/\r+/g,""),e=e.trim(),e=a(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}function Rv(){}function Lv(e,t){var n=t.Fontname;if(n&&(e.m=n),(n=t.Fontsize)&&(e.A=n+"px"),(n=t.PrimaryColour)&&(n=Nv(n))&&(e.l=n),(n=t.BackColour)&&(n=Nv(n))&&(e.backgroundColor=n),t.Bold&&(e.u=700),t.Italic&&(e.o="italic"),t.Underline&&e.h.push("underline"),(n=t.Spacing)&&(e.X=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.i=Bm,e.textAlign="start";break;case 2:e.i=Bm,e.textAlign=Fm;break;case 3:e.i=Bm,e.textAlign="end";break;case 5:e.i="before",e.textAlign="start";break;case 6:e.i="before",e.textAlign=Fm;break;case 7:e.i="before",e.textAlign="end";break;case 9:e.i="center",e.textAlign="start";break;case 10:e.i="center",e.textAlign=Fm;break;case 11:e.i="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.D=parseFloat(t))}function Nv(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function Fv(e){return e=PT.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}function Uv(e,t){var n=1&e[t+1]?7:9;return t+n<=e.length&&0<(e=((3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5)-n)?{ad:n,N:e}:null}function Bv(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(60&e[t+2])>>>2;if(r>n.length-1)return null;var i=1+((192&e[t+2])>>>6),o=(1&e[t+2])<<2;return o|=(192&e[t+3])>>>6,{sampleRate:n[r],channelCount:o,Sc:"mp4a.40."+i}}function Vv(e,t){if(t+1<e.length&&255===e[t]&&240==(246&e[t+1])){var n=1&e[t+1]?7:9;if(t+n>=e.length)return!1;var r=(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5;return!(r<=n)&&((t+=r)===e.length||t+1<e.length&&255===e[t]&&240==(246&e[t+1]))}return!1}function Hv(e){this.i=e,this.h=0,this.g=new Map}function Wv(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(3<=n)return null;var r=63&e[t+4],i=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+i>e.length)return null;var o=e[t+6]>>5,a=0;2===o?a+=2:(1&o&&1!==o&&(a+=2),4&o&&(a+=2)),a=(e[t+6]<<8|e[t+7])>>12-a&1;var s=7&e[t+5];return e=new Uint8Array([n<<6|e[t+5]>>3<<1|s>>2,(3&s)<<6|o<<3|a<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][o]+a,ba:e,N:i}}function Kv(e,t){if(11===e[t]&&119===e[t+1]){var n=0,r=5;t+=r;for(var i,o;0<r;){o=e[t];var a=Math.min(r,8),s=8-a;i=4278190080>>>24+s<<s,i=(o&i)>>s,n=n?n<<a|i:i,t+=1,r-=a}if(16>n)return!0}return!1}function qv(e){this.i=e,this.h=0,this.g=new Map}function Gv(e,t){if(t+8>e.length||2935!=(e[t]<<8|e[t+1]<<0))return null;var n=new oo(e.subarray(t+2));so(n,2),so(n,3);var r=uo(n,11)+1<<1,i=uo(n,2);if(3==i){i=uo(n,2),i=[24e3,22060,16e3][i];var o=3}else i=[48e3,44100,32e3][i],o=uo(n,2);var a=uo(n,3),s=uo(n,1);return n=uo(n,5),t+r>e.byteLength?null:(e=Math.floor(r*i/(16*[1,2,3,6][o])),e=new Uint8Array([(8160&e)>>5,(31&e)<<3,i<<6|n<<1|0,0|a<<1|s<<0,0]),{sampleRate:i,channelCount:[2,1,2,3,3,4,4,5][a]+s,ba:e,N:r})}function zv(e){this.i=e,this.h=0,this.g=new Map}function Yv(e){if(!e.length)return null;var t=e.find(function(e){return 7==e.type});if(e=e.find(function(e){return 8==e.type}),!t||!e)return null;var n=new oo(t.data),r=uo(n,8);if(uo(n,8),uo(n,8),lo(n),MT.includes(r)&&(r=fo(n),3===r&&so(n,1),lo(n),lo(n),so(n,1),1===uo(n,1))){r=3!==r?8:12;for(var i=0;i<r;i++)1===uo(n,1)&&(6>i?ho(n,16):ho(n,64))}if(lo(n),0===(r=fo(n)))fo(n);else if(1===r)for(so(n,1),lo(n),lo(n),r=fo(n),i=0;i<r;i++)lo(n);lo(n),so(n,1),r=fo(n);var o=fo(n),a=uo(n,1);0===a&&so(n,1),so(n,1);var u=i=0,c=0,l=0;return 1===uo(n,1)&&(i=fo(n),u=fo(n),c=fo(n),l=fo(n)),n=(2-a)*(o+1)*16-2*c-2*l,r=16*(r+1)-2*i-2*u,i=[],t=t.Ua,i.push(t.byteLength>>>8&255),i.push(255&t.byteLength),i=i.concat.apply(i,s(t)),t=[],e=e.Ua,t.push(e.byteLength>>>8&255),t.push(255&e.byteLength),t=t.concat.apply(t,s(e)),e=new Uint8Array([1,i[3],i[4],i[5],255,225].concat(i,[1],t)),{height:n,width:r,ma:e}}function Xv(e){var t=!1,n=new Uint8Array([]),r=e.find(function(e){return 7==e.type}),i=!1;e=a(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var s=!1;switch(o.type){case 1:s=i=!0;var u=o.data;r&&4<u.length&&(2===(u=po(new oo(u)))||4===u||7===u||9===u)&&(t=!0);break;case 5:t=s=i=!0;break;case 6:case 7:case 8:s=!0;break;case 9:i=s=!0;break;case 12:s=!0;break;default:s=!1}i&&s&&(s=o.Ua.byteLength,u=new Uint8Array(4),u[0]=s>>24&255,u[1]=s>>16&255,u[2]=s>>8&255,u[3]=255&s,n=Ar(n,u,o.Ua))}return n.byteLength?{data:n,Xe:t}:null}function Jv(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,o=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==o){var a=e[t+3]>>6;i=1e3*IT[14*(3===n?3-r:3===r?3:4)+i-1],o=jT[3*(3===n?0:2===n?1:2)+o],n=DT[n][r];var s=RT[r],u=Math.floor(n*i/o+(e[t+2]>>1&1))*s,c=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(c=c?parseInt(c[1],10):0)&&87>=c&&2===r&&224e3<=i&&0===a&&(e[t+3]|=128),{sampleRate:o,channelCount:3===a?1:2,N:u,Jg:8*n*s}}return null}function $v(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function Qv(e){this.i=e,this.h=0,this.g=new Map}function Zv(e){this.h=e,this.g=null}/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/
function em(e){this.h=e,(this.g=Aw.get("ISOBoxer")())&&tm(this)}function tm(e){function t(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var e=!0,n=0;16>n;n++)this.usertype[n]!==LT[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))})}function nm(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}function rm(e){var t=this;this.m=e,this.j=Aw.get("muxjs")(),this.h=this.g=null,this.l=[],this.i=!1,this.j&&(this.g=new this.j.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.g.on("data",function(e){t.l.push(Ar(e.initSegment,e.data))}),this.g.on("done",function(){var e=Ar.apply(_r,s(t.l));t.h.resolve(e),t.i=!1}))}function im(e,t){if(t=t.replace(/mp2t/i,"mp4"),"audio"==e&&(t=t.replace("video","audio")),e=/avc1\.(66|77|100)\.(\d+)/.exec(t)){var n="avc1.",r=e[1],i=Number(e[2]);n=("66"==r?n+"4200":"77"==r?n+"4d00":n+"6400")+(i>>4).toString(16),n+=(15&i).toString(16),t=t.replace(e[0],n)}return t}function om(e){this.j=e,this.g=0,this.h=new Map,this.i=null}/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function am(){}function sm(){UT?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(UT=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=um):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function um(e,t){var n,r=this;return A(function(i){return 1==i.g?(navigator,f(i,UT.call(r,e,t),2)):(n=i.h,mm(n)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=UT,i.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=cm,i.return(cm.call(r,e,t))))})}function cm(e,t){var n,r,i,o,s,u,c,l,d,h,p=this;return A(function(g){if(1==g.g){for(navigator,n=vm(e),r=[],i=a(t),o=i.next();!o.done;o=i.next())s=o.value,u=lm(s.videoCapabilities,n),c=lm(s.audioCapabilities,n),s.videoCapabilities&&s.videoCapabilities.length&&!u.length||s.audioCapabilities&&s.audioCapabilities.length&&!c.length||(l=Object.assign({},s),l.videoCapabilities=u,l.audioCapabilities=c,r.push(l));if(!r.length)throw d=Error("Unsupported keySystem or supportedConfigurations."),d.name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return f(g,UT.call(p,e,r),2)}return h=g.h,g.return(new ym(h,n))})}function lm(e,t){return e?e.filter(function(e){return!e.encryptionScheme||e.encryptionScheme==t}):e}function dm(){}function fm(){BT?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(BT=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=hm):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function hm(e){var t,n,r,i=this;return A(function(o){switch(o.g){case 1:return navigator.mediaCapabilities,f(o,BT.call(i,e),2);case 2:if(t=o.h,!e.keySystemConfiguration)return o.return(t);if((n=t.keySystemAccess)&&mm(n))return navigator.mediaCapabilities.decodingInfo=BT,o.return(t);if(navigator.mediaCapabilities.decodingInfo=pm,n){o.B(3);break}return r=t,f(o,gm(e),4);case 4:return r.keySystemAccess=o.h,o.return(t);case 3:return o.return(pm.call(i,e))}})}function pm(e){var t,n,r,i,o,a,s,u,c=this;return A(function(l){switch(l.g){case 1:return navigator.mediaCapabilities,t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,r=n.keySystem,i=n.audio&&n.audio.encryptionScheme,o=n.video&&n.video.encryptionScheme,t=vm(r),a={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},i&&i!=t||o&&o!=t)?l.return(a):f(l,BT.call(c,e),2);case 2:if(s=l.h,s.keySystemAccess){s.keySystemAccess=new ym(s.keySystemAccess,t),l.B(3);break}if(!e.keySystemConfiguration){l.B(3);break}return u=s,f(l,gm(e),5);case 5:u.keySystemAccess=l.h;case 3:return l.return(s)}})}function gm(e){var t,n;return A(function(r){if(1==r.g){var i=e.keySystemConfiguration,o=[],a=[];return i.audio&&o.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType}),i.video&&a.push({robustness:i.video.robustness||"",contentType:e.video.contentType}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},o.length&&(i.audioCapabilities=o),a.length&&(i.videoCapabilities=a),t=i,f(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}function ym(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function vm(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":e.startsWith("com.tvkey")?"cenc":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function mm(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function bm(){}function _m(){sm(),fm()}/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
var wm,Tm="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype?e:(e[t]=n.value,e)},Sm=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var r=0;r<n.length;++r){var i=n[r];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);i("Symbol",function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(e||"")+"_"+i++,e)}function n(e,t){this.g=e,Tm(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return t}),i("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=Sm[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&Tm(i.prototype,e,{configurable:!0,writable:!0,value:function(){return o(r(this))}})}return e});var Em,km="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)Em=Object.setPrototypeOf;else{var Am;e:{var xm={a:!0},Cm={};try{Cm.__proto__=xm,Am=Cm.a;break e}catch(e){}Am=!1}Em=Am?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Om=Em;c.prototype.s=function(e){this.h=e},c.prototype.return=function(e){this.i={return:e},this.g=this.j},c.prototype.B=function(e){this.g=e},i("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var i=Sm.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.I(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.D(e):this.m(e)}},t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.K(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.u()},t.prototype.G=function(){var e=this;i(function(){if(e.A()){var t=Sm.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.A=function(){if(this.o)return!1;var e=Sm.CustomEvent,t=Sm.Event,n=Sm.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=Sm.document.createEvent("CustomEvent"),e.initCustomEvent("unhandledrejection",!1,!0,e)),e.promise=this,e.reason=this.i,n(e))},t.prototype.u=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.I=function(e){var t=this.j();e.Qc(t.resolve,t.reject)},t.prototype.K=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t(function(e,t){i=e,o=t});return this.Qc(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Qc=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=a(e),o=i.next();!o.done;o=i.next())r(o.value).Qc(t,n)})},t.all=function(e){var n=a(e),i=n.next();return i.done?r([]):new t(function(e,t){var o=[],a=0;do{o.push(void 0),a++,r(i.value).Qc(function(t){return function(n){o[t]=n,0==--a&&e(o)}}(o.length-1),t),i=n.next()}while(!i.done)})},t}),i("WeakMap",function(e){function t(e){if(this.g=(u+=Math.random()+1).toString(),e){e=a(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!C(e,s)){var t=new n;Tm(e,s,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&i(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(i(e),!C(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.g]=t,this},t.prototype.get=function(e){return r(e)&&C(e,s)?e[s][this.g]:void 0},t.prototype.has=function(e){return r(e)&&C(e,s)&&C(e[s],this.g)},t.prototype.delete=function(e){return!!(r(e)&&C(e,s)&&C(e[s],this.g))&&delete e[s][this.g]},t}),i("Map",function(e){function t(){var e={};return e.Za=e.next=e.head=e}function n(e,t){var n=e.g;return o(function(){if(n){for(;n.head!=e.g;)n=n.Za;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?s.has(t)?n=s.get(t):(n=""+ ++u,s.set(t,n)):n="p_"+t;var r=e.h[n];if(r&&C(e.h,n))for(e=0;e<r.length;e++){var i=r[e];if(t!==t&&i.key!==i.key||t===i.key)return{id:n,list:r,index:e,entry:i}}return{id:n,list:r,index:-1,entry:void 0}}function i(e){if(this.h={},this.g=t(),this.size=0,e){e=a(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(a([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&(i=r.next(),!(i.done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done))}catch(e){return!1}}())return e;var s=new WeakMap;i.prototype.set=function(e,t){e=0===e?0:e;var n=r(this,e);return n.list||(n.list=this.h[n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this.g,Za:this.g.Za,head:this.g,key:e,value:t},n.list.push(n.entry),this.g.Za.next=n.entry,this.g.Za=n.entry,this.size++),this},i.prototype.delete=function(e){return e=r(this,e),!(!e.entry||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.entry.Za.next=e.entry.next,e.entry.next.Za=e.entry.Za,e.entry.head=null,this.size--,!0)},i.prototype.clear=function(){this.h={},this.g=this.g.Za=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).entry},i.prototype.get=function(e){return(e=r(this,e).entry)&&e.value},i.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},i.prototype.keys=function(){return n(this,function(e){return e.key})},i.prototype.values=function(){return n(this,function(e){return e.value})},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var u=0;return i}),i("Set",function(e){function t(e){if(this.g=new Map,e){e=a(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(a([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(i=r.next(),!i.done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach(function(r){return e.call(t,r,r,n)})},t)}),i("Array.prototype.findIndex",function(e){return e||function(e,t){return O(this,e,t).Ue}}),i("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}}),i("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}}),i("String.prototype.includes",function(e){return e||function(e,t){return-1!==P(this,e,"includes").indexOf(e,t||0)}}),i("Array.prototype.find",function(e){return e||function(e,t){return O(this,e,t).v}}),i("String.prototype.startsWith",function(e){return e||function(e,t){var n=P(this,e,"startsWith"),r=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var o=0;o<i&&t<r;)if(n[t++]!=e[o++])return!1;return o>=i}}),i("Array.prototype.keys",function(e){return e||function(){return M(this,function(e){return e})}});var Pm="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)C(r,i)&&(e[i]=r[i])}return e};i("Object.assign",function(e){return e||Pm}),i("Array.from",function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var o=0;!(i=e.next()).done;)r.push(t.call(n,i.value,o++))}else for(i=e.length,o=0;o<i;o++)r.push(t.call(n,e[o],o));return r}}),i("Array.prototype.values",function(e){return e||function(){return M(this,function(e,t){return t})}}),i("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),i("Array.prototype.entries",function(e){return e||function(){return M(this,function(e,t){return[e,t]})}}),i("String.prototype.repeat",function(e){return e||function(e){var t=P(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),i("Number.isNaN",function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),i("Number.isFinite",function(e){return e||function(e){return"number"==typeof e&&(!isNaN(e)&&1/0!==e&&-1/0!==e)}}),i("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)C(e,t)&&n.push(e[t]);return n}}),i("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}}),i("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)C(e,t)&&n.push([t,e[t]]);return n}});var Mm=this||self;j.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},R.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},R.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},R.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(D(this.h),D(this.j))};var Im;I("shaka.log",L),L.alwaysWarn=F,L.alwaysError=N,L.error=B,L.warning=V,L.info=H,L.debug=W,L.v1=K,L.v2=q,L.Level={NONE:0,ERROR:1,Mh:2,lh:3,dh:4,Ih:5,Jh:6},L.MAX_LOG_LEVEL=0;var jm=new Set;L.setLevel=G,L.init=z,z();var Dm=new Map;X.prototype.extract=function(){},X.prototype.decode=function(){return[]},X.prototype.clear=function(){},J.prototype.init=function(){},J.prototype.parse=function(){return[]},I("shaka.util.BufferUtils",$),$.toDataView=ne,$.toUint8=te,$.toArrayBuffer=ee,$.equal=Q,ie.prototype.init=function(){},ie.prototype.j=function(){},ie.prototype.i=function(){},I("shaka.media.IClosedCaptionParser",ie),oe.prototype.init=function(e){this.h.init(e)},oe.prototype.j=function(e){e=this.h.parse(e),e=a(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=te(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},oe.prototype.i=function(){this.g.clear()},I("shaka.media.ClosedCaptionParser",oe),oe.findDecoder=function(){return Lm},oe.unregisterDecoder=function(){Lm=null},oe.registerDecoder=function(e){Lm=e},oe.findParser=function(e){return Rm[e]},oe.unregisterParser=function(e){delete Rm[e]},oe.registerParser=function(e,t){Rm[e]=t};var Rm={},Lm=null;le.prototype.clone=function(){var e,t=new le(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},I("shaka.text.Cue",le),le.equal=de,le.prototype.clone=le.prototype.clone;var Nm="auto";le.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Nm};var Fm="center",Um={LEFT:"left",RIGHT:"right",CENTER:Fm,START:"start",END:"end"};le.textAlign=Um;var Bm="after",Vm={BEFORE:"before",CENTER:"center",AFTER:Bm};le.displayAlign=Vm;var Hm="ltr";le.direction={HORIZONTAL_LEFT_TO_RIGHT:Hm,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Wm="horizontal-tb";le.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Wm,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Km=0;le.lineInterpretation={LINE_NUMBER:Km,PERCENTAGE:1};var qm="start",Gm={CENTER:"center",START:qm,END:"end"};le.lineAlign=Gm;var zm={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};le.defaultTextColor=zm;var Ym={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};le.defaultTextBackgroundColor=Ym;var Xm=400;le.fontWeight={NORMAL:Xm,BOLD:700};var Jm="normal",$m={NORMAL:Jm,ITALIC:"italic",OBLIQUE:"oblique"};le.fontStyle=$m,le.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},I("shaka.text.CueRegion",fe);var Qm=1;fe.units={PX:0,PERCENTAGE:Qm,LINES:2};var Zm="";fe.scrollMode={NONE:Zm,UP:"up"},he.prototype.destroy=function(){},I("shaka.transmuxer.TransmuxerEngine",he),he.findTransmuxer=ge,he.unregisterTransmuxer=function(e,t){delete eb[e.toLowerCase().split(";")[0]+"-"+t]},he.registerTransmuxer=pe,he.prototype.destroy=he.prototype.destroy;var eb={},tb=1,nb=2,rb=3,ib=4;he.PluginPriority={FALLBACK:tb,PREFERRED_SECONDARY:nb,PREFERRED:rb,APPLICATION:ib};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
var ob=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");wm=ye.prototype,wm.Fa="",wm.Eb="",wm.Ja="",wm.Ub=null,wm.Ba="",wm.qb="",wm.toString=function(){var e=[],t=this.Fa;if(t&&e.push(we(t,ab,!0),":"),t=this.Ja){e.push("//");var n=this.Eb;n&&e.push(we(n,ab,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Ub,null!=t&&e.push(":",String(t))}return(t=this.Ba)&&(this.Ja&&"/"!=t.charAt(0)&&e.push("/"),e.push(we(t,"/"==t.charAt(0)?ub:sb,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.qb)&&e.push("#",we(t,lb)),e.join("")},wm.resolve=function(e){var t=this.clone();"data"===t.Fa&&(t=new ye);var n=!!e.Fa;n?ve(t,e.Fa):n=!!e.Eb,n?t.Eb=e.Eb:n=!!e.Ja,n?t.Ja=e.Ja:n=null!=e.Ub;var r=e.Ba;if(n)me(t,e.Ub);else if(n=!!e.Ba){if("/"!=r.charAt(0))if(this.Ja&&!this.Ba)r="/"+r;else{var i=t.Ba.lastIndexOf("/");-1!=i&&(r=t.Ba.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}r=o.join("/")}}return n?t.Ba=r:n=""!==e.g.toString(),n?be(t,e.g.clone()):n=!!e.qb,n&&(t.qb=e.qb),t},wm.clone=function(){return new ye(this)};var ab=/[#\/\?@]/g,sb=/[#\?:]/g,ub=/[#\?]/g,cb=/[#\?@]/g,lb=/#/g;wm=Se.prototype,wm.oa=null,wm.Tc=null,wm.add=function(e,t){Ee(this),this.g=null;var n=this.oa.hasOwnProperty(e)?this.oa[e]:null;return n||(this.oa[e]=n=[]),n.push(t),this.Tc++,this},wm.set=function(e,t){return Ee(this),this.g=null,this.oa.hasOwnProperty(e)?this.oa[e]=[t]:this.add(e,t),this},wm.toString=function(){if(this.g)return this.g;if(!this.oa)return"";var e,t=[];for(e in this.oa)for(var n=encodeURIComponent(e),r=this.oa[e],i=0;i<r.length;i++){var o=n;""!==r[i]&&(o+="="+encodeURIComponent(r[i])),t.push(o)}return this.g=t.join("&")},wm.clone=function(){var e=new Se;if(e.g=this.g,this.oa){var t,n={};for(t in this.oa)n[t]=this.oa[t].concat();e.oa=n,e.Tc=this.Tc}return e},ke.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},I("shaka.util.Error",ke);var db=!0;ke.Severity={RECOVERABLE:1,CRITICAL:2};var fb={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10};ke.Category=fb;var hb={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};ke.Code=hb;var pb="text",gb={wa:"video",ob:"audio",fa:pb,ic:"image",Yg:"application"},yb=1/15,vb={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvh/],text:[/^vtt$/,/^wvtt/,/^stpp/]};I("shaka.util.MimeUtils",je),je.getFullTypeWithAllCodecs=Re,je.getFullType=De,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var mb=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];Be.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()},Be.prototype.remove=function(e,t){var n=this;return A(function(r){if(1==r.g)return f(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),h(r)})},I("shaka.text.TextEngine",Be),Be.prototype.destroy=Be.prototype.destroy,Be.findParser=function(e){return bb[e]},Be.unregisterParser=function(e){delete bb[e]},Be.registerParser=function(e,t){bb[e]=t};var bb={};I("shaka.util.LanguageUtils",ze),ze.findClosestLocale=tt,ze.getLocaleForVariant=et,ze.getLocaleForText=function(e){return $e(e.language||"und")},ze.getBase=Ze,ze.relatedness=Qe,ze.areSiblings=function(e,t){var n=Ze(e),r=Ze(t);return e!=n&&t!=r&&n==r},ze.normalize=$e,ze.isSiblingOf=Je,ze.isParentOf=Xe,ze.areLanguageCompatible=Ye,ze.areLocaleCompatible=function(e,t){return e=$e(e),t=$e(t),e==t};var _b=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);wm=nt.prototype,wm.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},wm.get=function(e){return(e=this.g[e])?e.slice():null},wm.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(e){return e!=t}),0==this.g[e].length&&delete this.g[e])},wm.forEach=function(e){for(var t in this.g)e(t,this.g[t])},wm.size=function(){return Object.keys(this.g).length},wm.keys=function(){return Object.keys(this.g)},rt.prototype.U=function(t){var n=this;this.stop();var r=!0,i=null;return this.g=function(){e.clearTimeout(i),r=!1},i=e.setTimeout(function(){r&&n.h()},1e3*t),this},rt.prototype.stop=function(){this.g&&(this.g(),this.g=null)},it.prototype.Yb=function(){return this.stop(),this.h(),this},it.prototype.U=function(e){var t=this;return this.stop(),this.g=new rt(function(){t.h()}).U(e),this},it.prototype.va=function(e){var t=this;return this.stop(),this.g=new rt(function(){t.g.U(e),t.h()}).U(e),this},it.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},I("shaka.util.Timer",it),it.prototype.stop=it.prototype.stop,it.prototype.tickEvery=it.prototype.va,it.prototype.tickAfter=it.prototype.U,it.prototype.tickNow=it.prototype.Yb;var wb=null,Tb=null;I("shaka.util.StreamUtils",yt),yt.meetsRestrictions=At;var Sb={},Eb=0,kb="smooth",Ab="powerEfficient",xb="bandwidth",Cb=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),Ob=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");wm=en.prototype,wm.stop=function(){this.m=null,this.l=!1,this.o=[],this.A=1,this.j=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.D.stop()},wm.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.u),this.u=null),this.D=null},wm.init=function(e){this.m=e},wm.chooseVariant=function(){var t=1/0,n=1/0;this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=e.screen.height*n,n*=e.screen.width),this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=this.j.clientHeight*n,n*=this.j.clientWidth),t=nn(this.g.restrictions,this.o,t,n),n=this.i.getBandwidthEstimate(tn(this)),this.o.length&&!t.length&&(V("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),t=nn(null,this.o,1/0,1/0),t=[t[0]]);for(var r=t[0]||null,i=0;i<t.length;i++){for(var o=t[i],a=isNaN(this.A)?1:Math.abs(this.A),s=a*o.bandwidth,u=s/this.g.bandwidthDowngradeTarget,c={bandwidth:1/0},l=i+1;l<t.length;l++)if(o.bandwidth!=t[l].bandwidth){c=t[l];break}a=a*c.bandwidth/this.g.bandwidthUpgradeTarget,q("Bandwidth ranges:",(s/1e6).toFixed(3),(u/1e6).toFixed(3),(a/1e6).toFixed(3)),n>=u&&n<=a&&r.bandwidth!=o.bandwidth&&(r=o)}return this.s=Date.now(),r},wm.enable=function(){this.l=!0},wm.disable=function(){this.l=!1},wm.segmentDownloaded=function(e,t){if(q("Segment downloaded:","deltaTimeMs="+e,"numBytes="+t,"lastTimeChosenMs="+this.s,"enabled="+this.l),this.i.sample(e,t),null!=this.s&&this.l)e:{if(q("Suggesting Streams..."),this.F){if(Date.now()-this.s<1e3*this.g.switchInterval){q("Still within switch interval...");break e}}else{if(e=this.i,!(e.g>=e.i)){q("Still waiting for a good estimate...");break e}this.F=!0}e=this.chooseVariant(),t=this.i.getBandwidthEstimate(tn(this)),t=Math.round(t/1e3),e&&(W("Calling switch_(), bandwidth="+t+" kbps"),this.m(e,this.g.clearBufferSwitch,this.g.safeMarginSwitch))}},wm.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(tn(this))},wm.setVariants=function(e){this.o=e},wm.playbackRateChanged=function(e){this.A=e},wm.setMediaElement=function(t){var n=this;this.j=t,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in e&&(this.h=new ResizeObserver(function(){n.D.U(Pb)}),this.h.observe(this.j))},wm.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},I("shaka.abr.SimpleAbrManager",en),en.prototype.configure=en.prototype.configure,en.prototype.setMediaElement=en.prototype.setMediaElement,en.prototype.playbackRateChanged=en.prototype.playbackRateChanged,en.prototype.setVariants=en.prototype.setVariants,en.prototype.getBandwidthEstimate=en.prototype.getBandwidthEstimate,en.prototype.segmentDownloaded=en.prototype.segmentDownloaded,en.prototype.disable=en.prototype.disable,en.prototype.enable=en.prototype.enable,en.prototype.chooseVariant=en.prototype.chooseVariant,en.prototype.init=en.prototype.init,en.prototype.release=en.prototype.release,en.prototype.stop=en.prototype.stop;var Pb=1;rn.prototype.toString=function(){return"v"+this.g+"."+this.h};var Mb=null;I("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),un.prototype.add=function(e){return cn(this.h,e)?(this.g.add(e),!0):(V("Rejecting variant - not compatible with root."),!1)},un.prototype.values=function(){return this.g.values()},fn.prototype.create=function(e){var t=this,n=e.filter(function(e){return cn(t.g,e)});return n.length?new un(n[0],n):this.h.create(e)},hn.prototype.create=function(e){var t=[];t=pn(e,this.j);var n=e.filter(function(e){return e.primary});for(t=t.length?t:n.length?n:e,e=gn(t,this.l),e.length?t=e:V("No exact match for variant role could be found."),this.h&&(e=vn(t,this.h),e.length?t=e:V("No exact match for the hdr level could be found.")),this.g&&(e=Xt(t,this.g),e.length?t=e:V("No exact match for the channel count could be found.")),this.i&&(e=yn(t,this.i),e.length?t=e:V("No exact match for variant label could be found.")),e=new un(t[0]),t=a(t),n=t.next();!n.done;n=t.next())n=n.value,cn(e.h,n)&&e.add(n);return e};var Ib=0,jb=1;Sn.prototype.resolve=function(){},Sn.prototype.reject=function(){},En.prototype.abort=function(){return this.g=!0,this.i()},En.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},En.prototype.da=function(e,t){function n(n){return function(s){if(i.g&&n)o.reject(a);else{var u=n?e:t;u?r=Pn(u,s,o):(n?o.resolve:o.reject)(s)}}}function r(){return o.reject(a),i.abort()}var i=this,o=new Sn,a=new ke(2,7,7001);return this.promise.then(n(!0),n(!1)),new En(o,function(){return r()})},I("shaka.util.AbortableOperation",En),En.prototype.chain=En.prototype.da,En.prototype.finally=En.prototype.finally,En.all=On,En.prototype.abort=En.prototype.abort,En.notAbortable=Cn,En.completed=xn,En.aborted=An,En.failed=kn,Mn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Mn.prototype.stopImmediatePropagation=function(){this.g=!0},Mn.prototype.stopPropagation=function(){},I("shaka.util.FakeEvent",Mn);var Db={$g:"abrstatuschanged",ah:"adaptation",bh:"buffering",eh:"downloadfailed",fh:"downloadheadersreceived",gh:"drmsessionupdate",hh:"emsg",th:"prft",Error:"error",ih:"expirationupdated",jh:"gapjumped",mh:"loaded",nh:"loading",ph:"manifestparsed",qh:"mediaqualitychanged",Metadata:"metadata",rh:"onstatechange",sh:"onstateidle",uh:"ratechange",wh:"segmentappended",xh:"sessiondata",yh:"stalldetected",zh:"streaming",Ah:"textchanged",Bh:"texttrackvisibility",Ch:"timelineregionadded",Dh:"timelineregionenter",Eh:"timelineregionexit",Fh:"trackschanged",Hh:"unloading",Lh:"variantchanged"};jn.prototype.addEventListener=function(e,t){this.ca&&this.ca.push(e,t)},jn.prototype.removeEventListener=function(e,t){this.ca&&this.ca.remove(e,t)},jn.prototype.dispatchEvent=function(e){if(!this.ca)return!0;var t=this.ca.get(e.type)||[],n=this.ca.get("All");for(n&&(t=t.concat(n)),t=a(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.cd,e.currentTarget=this.cd;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){B("Uncaught exception in event handler",e,e?e.message:null,e?e.stack:null)}if(e.g)break}return e.defaultPrevented},jn.prototype.release=function(){this.ca=null},Ln.prototype.destroy=function(){for(var e=[],t=a(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},u(Fn,jn),wm=Fn.prototype,wm.qe=function(e){this.o=e},wm.Bg=function(e){this.g.add(e)},wm.Ug=function(e){this.g.delete(e)},wm.Af=function(){this.g.clear()},wm.Cg=function(e){this.h.add(e)},wm.Vg=function(e){this.h.delete(e)},wm.Bf=function(){this.h.clear()},wm.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),jn.prototype.release.call(this),this.m.destroy()},wm.request=function(e,t,n){var r=this,i=new Kn;if(this.i){var o=Promise.reject(new ke(2,7,7001));return o.catch(function(){}),new qn(o,function(){return Promise.resolve()},i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Dn(t.retryParameters):Tn(),t.uris=Dn(t.uris),o=Vn(this,e,t,n);var a=o.da(function(){return Hn(r,e,t,new _n(t.retryParameters,!1),0,null,i)}),s=a.da(function(t){return Wn(r,e,t,n)}),u=Date.now(),c=0;o.promise.then(function(){c=Date.now()-u},function(){});var l=0;a.promise.then(function(){l=Date.now()},function(){});var d=s.da(function(n){var i=Date.now()-l,o=n.response;return o.timeMs+=c,o.timeMs+=i,n.jg||!r.l||o.fromCache||"HEAD"==t.method||e!=Rb||r.l(o.timeMs,o.data.byteLength),o},function(e){throw e&&(e.severity=2),e});return o=new qn(d.promise,function(){return d.abort()},i),Nn(this.m,o),o},I("shaka.net.NetworkingEngine",Fn),Fn.prototype.request=Fn.prototype.request,Fn.prototype.destroy=Fn.prototype.destroy,Fn.makeRequest=Bn,Fn.defaultRetryParameters=function(){return Tn()},Fn.prototype.clearAllResponseFilters=Fn.prototype.Bf,Fn.prototype.unregisterResponseFilter=Fn.prototype.Vg,Fn.prototype.registerResponseFilter=Fn.prototype.Cg,Fn.prototype.clearAllRequestFilters=Fn.prototype.Af,Fn.prototype.unregisterRequestFilter=Fn.prototype.Ug,Fn.prototype.registerRequestFilter=Fn.prototype.Bg,Fn.unregisterScheme=function(e){delete Nb[e]},Fn.registerScheme=Un,Fn.prototype.setForceHTTPS=Fn.prototype.qe,Fn.NumBytesRemainingClass=Kn,u(qn,En),Fn.PendingRequest=qn;var Rb=1;Fn.RequestType={MANIFEST:0,SEGMENT:Rb,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6},Fn.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var Lb=3;Fn.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Lb};var Nb={};Gn.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},wm=Yn.prototype,wm.release=function(){this.kb(),this.g=null},wm.C=function(e,t,n,r){this.g&&(e=new Xn(e,t,n,r),this.g.push(t,e))},wm.ka=function(e,t,n,r){function i(r){o.Jc(e,t,i),n(r)}var o=this;this.C(e,t,i,r)},wm.Jc=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=a(r);for(var i=r.next();!i.done;i=r.next())i=i.value,i.target!=e||n!=i.listener&&n||(i.Jc(),this.g.remove(t,i))}},wm.kb=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,s(t.g[e]));for(t=a(n),n=t.next();!n.done;n=t.next())n.value.Jc();this.g.g={}}},I("shaka.util.EventManager",Yn),Yn.prototype.removeAll=Yn.prototype.kb,Yn.prototype.unlisten=Yn.prototype.Jc,Yn.prototype.listenOnce=Yn.prototype.ka,Yn.prototype.listen=Yn.prototype.C,Yn.prototype.release=Yn.prototype.release,Xn.prototype.Jc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var Fb=void 0;er.prototype.value=function(){return void 0==this.g&&(this.g=this.h()),this.g},I("shaka.util.StringUtils",ir),ir.resetFromCharCode=function(){Ub.g=void 0},ir.toUTF16=cr,ir.toUTF8=ur,ir.fromBytesAutoDetect=sr,ir.fromUTF16=ar,ir.fromUTF8=or;var Ub=new er(function(){for(var e={eb:65536};0<e.eb;e={eb:e.eb},e.eb/=2)if(function(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}(e.eb))return function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.eb)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.eb));return n}}(e);return null});wm=lr.prototype,wm.ja=function(){return this.g<this.h.byteLength},wm.ga=function(){return this.g},wm.getLength=function(){return this.h.byteLength},wm.ab=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(e){throw dr()}},wm.jb=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(e){throw dr()}},wm.J=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(e){throw dr()}},wm.af=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(e){throw dr()}},wm.Vb=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(e){throw dr()}if(2097151<t)throw new ke(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},wm.$a=function(e){if(this.g+e>this.h.byteLength)throw dr();var t=te(this.h,this.g,e);return this.g+=e,t},wm.skip=function(e){if(this.g+e>this.h.byteLength)throw dr();this.g+=e},wm.Ig=function(e){if(this.g<e)throw dr();this.g-=e},wm.seek=function(e){if(0>e||e>this.h.byteLength)throw dr();this.g=e},wm.Dc=function(){for(var e=this.g;this.ja()&&0!=this.h.getUint8(this.g);)this.g+=1;return e=te(this.h,e,this.g-e),this.g+=1,or(e)},I("shaka.util.DataViewReader",lr),lr.prototype.readTerminatedString=lr.prototype.Dc,lr.prototype.seek=lr.prototype.seek,lr.prototype.rewind=lr.prototype.Ig,lr.prototype.skip=lr.prototype.skip,lr.prototype.readBytes=lr.prototype.$a,lr.prototype.readUint64=lr.prototype.Vb,lr.prototype.readInt32=lr.prototype.af,lr.prototype.readUint32=lr.prototype.J,lr.prototype.readUint16=lr.prototype.jb,lr.prototype.readUint8=lr.prototype.ab,lr.prototype.getLength=lr.prototype.getLength,lr.prototype.getPosition=lr.prototype.ga,lr.prototype.hasMoreData=lr.prototype.ja;var Bb=1;lr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Bb},wm=fr.prototype,wm.box=function(e,t){return e=vr(e),this.i[e]=Vb,this.h[e]=t,this},wm.O=function(e,t){return e=vr(e),this.i[e]=Hb,this.h[e]=t,this},wm.stop=function(){this.g=!0},wm.parse=function(e,t,n){for(e=new lr(e,0),this.g=!1;e.ja()&&!this.g;)this.Bc(0,e,t,n)},wm.Bc=function(e,t,n,r){var i=t.ga();if(r&&i+8>t.getLength())this.g=!0;else{var o=t.J(),a=t.J(),s=mr(a),u=!1;switch(q("Parsing MP4 box",s),o){case 0:o=t.getLength()-i;break;case 1:if(r&&t.ga()+8>t.getLength())return void(this.g=!0);o=t.Vb(),u=!0}var c=this.h[a];if(c){var l=null,d=null;if(this.i[a]==Hb){if(r&&t.ga()+4>t.getLength())return void(this.g=!0);d=t.J(),l=d>>>24,d&=16777215}a=i+o,n&&a>t.getLength()&&(a=t.getLength()),r&&a>t.getLength()?this.g=!0:(r=a-t.ga(),t=0<r?t.$a(r):new Uint8Array(0),t=new lr(t,0),c({name:s,parser:this,partialOkay:n||!1,version:l,flags:d,reader:t,size:o,start:i+e,has64BitSize:u}))}else t.skip(Math.min(i+o-t.ga(),t.getLength()-t.ga()))}},I("shaka.util.Mp4Parser",fr),fr.headerSize=br,fr.typeToString=mr,fr.allData=yr,fr.visualSampleEntry=gr,fr.sampleDescription=pr,fr.children=hr,fr.prototype.parseNext=fr.prototype.Bc,fr.prototype.parse=fr.prototype.parse,fr.prototype.stop=fr.prototype.stop,fr.prototype.fullBox=fr.prototype.O,fr.prototype.box=fr.prototype.box;var Vb=0,Hb=1;I("shaka.util.Uint8ArrayUtils",_r),_r.concat=Ar,_r.toHex=kr,_r.fromHex=Er,_r.fromBase64=Sr,_r.toBase64=Tr,_r.toStandardBase64=wr;var Wb=new er(function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}});wm=Jr.prototype,wm.destroy=function(){return this.l.destroy()},wm.configure=function(e){this.h=e},wm.Ic=function(e){this.R=e},wm.kc=function(e){var t=this;return A(function(n){if(1==n.g)return t.u?(t.m=e,t.A.ka(t.m,"play",function(){for(var e=a(t.L),n=e.next();!n.done;n=e.next())mi(t,n.value);t.V=!0,t.L=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.A.C(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Si(t)}),t.K=t.g?t.g.initData.find(function(e){return 0<e.initData.length})||null:null,t.K||"com.apple.fps"!==t.g.keySystem||t.o.size?f(n,ni(t),2):n.B(2)):(t.A.ka(e,"encrypted",function(){t.s(new ke(2,6,6010))}),n.return());ai(t).catch(function(){}),t.K||t.o.size||t.h.parseInbandPsshEnabled||t.A.C(t.m,"encrypted",function(e){return ri(t,e)}),h(n)})},wm.ke=function(){for(var e=this,t=(this.g?this.g.initData:[])||[],n=a(t),r=n.next();!r.done;r=n.next())r=r.value,vi(this,r.initDataType,r.initData,this.g.sessionType);return this.o.size&&this.o.forEach(function(t,n){yi(e,n,t)}),t.length||this.o.size||this.j.resolve(),this.j},wm.Hd=function(){var e=this,t=this.i.keys();return t=Qn(t,function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}}),Array.from(t)},wm.uc=function(){var e=1/0,t=this.i.keys();t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},wm.vc=function(){return nr(this.ea)};var Kb=1,qb=5,Gb=.5,zb=new er(function(){return ee(new Uint8Array([0]))}),Yb=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");I("shaka.media.ManifestParser",ji),ji.unregisterParserByMime=function(e){delete Xb[e]},ji.registerParserByMime=function(e,t){Xb[e]=t},ji.registerParserByExtension=function(e,t){Jb[e]=t},ji.AccessibilityPurpose={Kh:"visually impaired",kh:"hard of hearing"};var Xb={},Jb={},$b=new er(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});Bi.prototype.yc=function(){return this.j},Bi.prototype.tc=function(){return this.h},I("shaka.media.InitSegmentReference",Bi),Bi.prototype.getEndByte=Bi.prototype.tc,Bi.prototype.getStartByte=Bi.prototype.yc,wm=Hi.prototype,wm.za=function(){return this.I()},wm.getStartTime=function(){return this.startTime},wm.Nf=function(){return this.endTime},wm.yc=function(){return this.j},wm.tc=function(){return this.h},wm.eg=function(){return this.tilesLayout},wm.dg=function(){return this.G},wm.wb=function(){return this.status},wm.tg=function(){this.status=Zb},wm.sg=function(){this.s=!0},wm.og=function(){return this.s},wm.rg=function(){this.o=!1},wm.ng=function(){return this.o},wm.qg=function(){this.u=!0},wm.kg=function(){return this.u},wm.jf=function(e){this.F=e},wm.bg=function(){return this.F},wm.offset=function(e){this.startTime+=e,this.endTime+=e,this.l+=e;for(var t=a(this.i),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.l+=e},wm.Tg=function(e){null==this.D?N("Sync attempted without sync time!"):(e=this.D-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},I("shaka.media.SegmentReference",Hi),Hi.prototype.syncAgainst=Hi.prototype.Tg,Hi.prototype.offset=Hi.prototype.offset,Hi.prototype.getThumbnailSprite=Hi.prototype.bg,Hi.prototype.setThumbnailSprite=Hi.prototype.jf,Hi.prototype.hasByterangeOptimization=Hi.prototype.kg,Hi.prototype.markAsByterangeOptimization=Hi.prototype.qg,Hi.prototype.isIndependent=Hi.prototype.ng,Hi.prototype.markAsNonIndependent=Hi.prototype.rg,Hi.prototype.isPreload=Hi.prototype.og,Hi.prototype.markAsPreload=Hi.prototype.sg,Hi.prototype.markAsUnavailable=Hi.prototype.tg,Hi.prototype.getStatus=Hi.prototype.wb,Hi.prototype.getTileDuration=Hi.prototype.dg,Hi.prototype.getTilesLayout=Hi.prototype.eg,Hi.prototype.getEndByte=Hi.prototype.tc,Hi.prototype.getStartByte=Hi.prototype.yc,Hi.prototype.getEndTime=Hi.prototype.Nf,Hi.prototype.getStartTime=Hi.prototype.getStartTime,Hi.prototype.getUris=Hi.prototype.za;var Qb=0,Zb=1;Hi.Status={Zg:Qb,Gh:Zb,oh:2},I("shaka.util.Id3Utils",Yi),Yi.getID3Data=eo,Yi.getID3Frames=Zi,I("shaka.util.ExpGolomb",oo),wm=go.prototype,wm.clearData=function(){this.i=[],this.g=[],this.h=[]},wm.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,mo(e)),n=e.length-(e.length+t)%188,r=!1,i=t;i<n;i+=188)if(71==e[i]){var o=!!(64&e[i+1]),a=((31&e[i+1])<<8)+e[i+2];if(1<(48&e[i+3])>>4){var s=i+5+e[i+4];if(s==i+188)continue}else s=i+4;switch(a){case 0:o&&(s+=e[s]+1),this.u=(31&e[s+10])<<8|e[s+11];break;case 17:case 8191:break;case this.u:o&&(s+=e[s]+1),o=e,a={audio:-1,video:-1,Md:-1,audioCodec:"",videoCodec:""};var u=s+3+((15&o[s+1])<<8|o[s+2])-4;for(s+=12+((15&o[s+10])<<8|o[s+11]);s<u;){var c=(31&o[s+1])<<8|o[s+2],l=(15&o[s+3])<<8|o[s+4];switch(o[s]){case 6:if(-1==a.audio&&0<l)for(var d=s+5,f=l;2<f;){switch(o[d]){case 106:a.audio=c,a.audioCodec="ac3";break;case 122:a.audio=c,a.audioCodec="ec3"}var h=o[d+1]+2;d+=h,f-=h}break;case 15:-1==a.audio&&(a.audio=c,a.audioCodec="aac");break;case 21:-1==a.Md&&(a.Md=c);break;case 27:-1==a.video&&(a.video=c,a.videoCodec="avc");break;case 3:case 4:-1==a.audio&&(a.audio=c,a.audioCodec="mp3");break;case 36:-1==a.video&&(a.video=c,a.videoCodec="hvc");break;case 129:-1==a.audio&&(a.audio=c,a.audioCodec="ac3");break;case 132:case 135:-1==a.audio&&(a.audio=c,a.audioCodec="ec3")}s+=l+5}o=a,null==this.o&&(this.o=o.video,this.m=o.videoCodec),null==this.j&&(this.j=o.audio,this.s=o.audioCodec),null==this.l&&(this.l=o.Md),r&&!this.A&&(W("reparse from beginning"),r=!1,i=t-188),this.A=!0;break;case this.o:s=e.subarray(s,i+188),o?this.i.push(s):this.i.length&&(o=this.i[this.i.length-1])&&(this.i[this.i.length-1]=Ar(o,s));break;case this.j:s=e.subarray(s,i+188),o?this.g.push(s):this.g.length&&(o=this.g[this.g.length-1])&&(this.g[this.g.length-1]=Ar(o,s));break;case this.l:s=e.subarray(s,i+188),o?this.h.push(s):this.h.length&&(o=this.h[this.h.length-1])&&(this.h[this.h.length-1]=Ar(o,s));break;default:r=!0}}else V("Found TS packet that do not start with 0x47");return this},wm.fe=function(e,t){for(var n,r=e.pts?e.pts/9e4:null,i=e.data,o=i.byteLength,a=0,s=[],u=-1,c=0,l=!1,d=0;d<o;++d){var f=i[d];if(f){if(2<=a&&1==f&&l){if(0==(e=d-(3<a?3:a)))break;n.data=Ar(n.data,i.subarray(0,e)),n.Ua=Ar(n.Ua,i.subarray(0,e));break}if(2<=a&&1==f){if(0<=u&&(a=d-((3<a?3:a)+1),s.push({data:i.subarray(u+1,a+1),Ua:i.subarray(u,a+1),type:c,time:r})),d>=o-1)return V("Malformed TS, incomplete NALU, ignoring."),s;d++,u=d,c=31&i[d]}a=0}else a++;d>=o-1&&0<=u&&0<=a&&(l?(n.data=Ar(n.data,i),n.Ua=Ar(n.Ua,i)):(l=!0,n={data:i.subarray(u+1,o),Ua:i.subarray(u,o),type:c,time:r},t&&0==e.ee&&(i=t.data,o=i.byteLength,d=-1)))}return n&&s.push(n),s},wm.getMetadata=function(){for(var e=[],t=a(this.h),n=t.next();!n.done;n=t.next())(n=yo(n.value))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Zi(n.data),dts:n.dts,pts:n.pts});return e},wm.rb=function(){for(var e=[],t=a(this.g),n=t.next();!n.done;n=t.next())(n=yo(n.value))&&e.push(n);return e},wm.Zc=function(){for(var e=[],t=a(this.i),n=t.next();!n.done;n=t.next()){n=n.value;var r=yo(n);r&&null!=r.pts&&null!=r.dts?e.push(r):e.length&&(n=r?r.data:n)&&(r=e.pop(),r.data=Ar(r.data,n),e.push(r))}return e},wm.getStartTime=function(){for(var e=null,t=a(this.rb()),n=t.next();!n.done;n=t.next()){var r=n.value;r&&null!=r.pts&&(r=Math.min(r.dts,r.pts)/9e4,null==e||e>r)&&(e=r)}for(t=null,r=a(this.Zc()),n=r.next();!n.done;n=r.next())(n=n.value)&&null!=n.pts&&(n=Math.min(n.dts,n.pts)/9e4,null==t||t>n)&&(t=n);return{audio:e,video:t}},wm.Jd=function(){return{audio:this.s,video:this.m}},wm.Ld=function(){var e=[];if("avc"!=this.m)return e;for(var t=this.Zc(),n=0;n<t.length;n++){var r=t[n],i=void 0;n+1<t.length&&(i=t[n+1]),e.push.apply(e,s(this.fe(r,i)))}return e},wm.hg=function(){on("TsParser","Please use getVideoInfo function instead.");var e=this.Te();return{height:e.height,width:e.width}},wm.Te=function(){var e={height:null,width:null,Sc:null},t=this.Ld();if(!t.length)return e;if(!(t=t.find(function(e){return 7==e.type})))return e;t=new oo(t.data);var n=uo(t,8),r=uo(t,8),i=uo(t,8);if(lo(t),e_.includes(n)){var o=fo(t);if(3===o&&so(t,1),lo(t),lo(t),so(t,1),1===uo(t,1)){o=3!==o?8:12;for(var a=0;a<o;a++)1===uo(t,1)&&(6>a?ho(t,16):ho(t,64))}}if(lo(t),0===(o=fo(t)))fo(t);else if(1===o)for(so(t,1),lo(t),lo(t),o=fo(t),a=0;a<o;a++)lo(t);lo(t),so(t,1),o=fo(t),a=fo(t);var s=uo(t,1);0===s&&so(t,1),so(t,1);var u=0,c=0,l=0,d=0;return 1===uo(t,1)&&(u=fo(t),c=fo(t),l=fo(t),d=fo(t)),e.height=String((2-s)*(a+1)*16-2*l-2*d),e.width=String(16*(o+1)-2*u-2*c),e.Sc="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2),e},I("shaka.util.TsParser",go),go.syncOffset=mo,go.probe=vo,go.prototype.getVideoInfo=go.prototype.Te,go.prototype.getVideoResolution=go.prototype.hg,go.prototype.getVideoNalus=go.prototype.Ld,go.prototype.getCodecs=go.prototype.Jd,go.prototype.getStartTime=go.prototype.getStartTime,go.prototype.getVideoData=go.prototype.Zc,go.prototype.getAudioData=go.prototype.rb,go.prototype.getMetadata=go.prototype.getMetadata,go.prototype.parseAvcNalus=go.prototype.fe,go.prototype.parse=go.prototype.parse,go.prototype.clearData=go.prototype.clearData,go.Timescale=9e4;var e_=[100,110,122,244,44,83,86,118,128,138,139,134];bo.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},I("shaka.lcevc.Dil",bo),bo.prototype.release=bo.prototype.release;var t_=0,n_=1,r_=2;wm=wo.prototype,wm.destroy=function(){return this.K.destroy()},wm.init=function(e,t,n,r){t=void 0!==t&&t,n=void 0===n?"UNKNOWN":n,r=void 0!==r&&r;var i,o,s,u,c=this;return A(function(l){if(1==l.g)return f(l,c.I,2);for(c.s=t,c.M=n,c.aa=r,c.X=!c.s&&"HLS"==c.M&&!c.aa,i=a(e.keys()),o=i.next();!o.done;o=i.next())s=o.value,u=e.get(s),Eo(c,s,u),c.j[s]=[];h(l)})},wm.configure=function(e){this.D=e},wm.Va=function(){var e={total:this.o?[]:zi(this.l.buffered),audio:this.o?[]:zi(Po(this,"audio")),video:this.o?[]:zi(Po(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},wm.remove=function(e,t,n){var r,i=this;return A(function(o){return r=gb,e==r.fa?f(o,i.g.remove(t,n),0):f(o,Vo(i,e,function(){n<=t?Bo(i,e):i.h[e].remove(t,n)}),0)})},wm.flush=function(e){var t,n=this;return A(function(r){return t=gb,e==t.fa?r.return():f(r,Vo(n,e,function(){n.l.currentTime-=.001,Bo(n,e)}),0)})},wm.endOfStream=function(e){var t=this;return A(function(n){return f(n,Ho(t,function(){Ao(t)||"closed"===t.i.readyState||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},wm.Na=function(e){var t=this;return A(function(n){return f(n,Ho(t,function(){if(e<t.i.duration)for(var n in t.h){var r={start:function(){},p:new Sn};t.j[n].unshift(r)}t.i.duration=e}),0)})},wm.getDuration=function(){return this.i.duration};var i_=e.URL.createObjectURL,o_="sequence";wm=Jo.prototype,wm.getDuration=function(){return this.j},wm.Uf=function(){return this.g},wm.Qg=function(e){this.i=e},wm.Na=function(e){this.j=e},wm.Zf=function(){return this.i},wm.hf=function(e){this.m=e},wm.ue=function(e){this.D=e},wm.te=function(e){this.o=e},wm.Pg=function(e){this.u=e},wm.Mf=function(){return this.u},wm.$e=function(e,t){if(0!=e.length){var n=e[e.length-1].end+t;this.jd(e[0].start+t),this.g=e.reduce(function(e,t){return Math.max(e,t.end-t.start)},this.g),this.h=Math.max(this.h,n),null!=this.i&&this.s&&!this.A&&(this.i=(Date.now()+this.m)/1e3-this.h-this.g),K("notifySegments:","maxSegmentDuration="+this.g)}},wm.kd=function(e){if(0!=e.length){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.m)/1e3;e=a(e);for(var i=e.next();!i.done;i=e.next())i=i.value,r<i.startTime||(t=Math.min(t,i.startTime),n=Math.max(n,i.endTime),this.g=Math.max(this.g,i.endTime-i.startTime));this.jd(t),this.h=Math.max(this.h,n),null!=this.i&&this.s&&!this.A&&(this.i=r-this.h-this.g),K("notifySegments:","maxSegmentDuration="+this.g)}},wm.Ud=function(){this.A=!0},wm.jd=function(e){this.l=null==this.l?e:Math.min(this.l,e)},wm.$d=function(e){this.g=Math.max(this.g,e),K("notifyNewSegmentDuration:","maxSegmentDuration="+this.g)},wm.offset=function(e){null!=this.l&&(this.l+=e),null!=this.h&&(this.h+=e)},wm.S=function(){return 1/0==this.j&&!this.D},wm.zb=function(){return 1/0!=this.j&&!this.D},wm.gb=function(){return Math.max(this.F,this.vb()-this.o)},wm.kf=function(e){this.F=e},wm.vb=function(){return this.S()||this.zb()?Math.min(Math.max(0,(Date.now()+this.m)/1e3-this.g-this.i)+this.G,this.j):this.h?Math.min(this.h,this.j):this.j},wm.xc=function(e){var t=Math.max(this.l,this.F);return 1/0==this.o?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.vb()-this.o+e,this.Wa()))},wm.Qb=function(){return this.xc(0)},wm.Wa=function(){return Math.max(0,this.vb()-(this.S()||this.zb()?this.u:0))},wm.pf=function(){return!(null==this.i||null!=this.h&&this.s)},wm.gf=function(e){this.G=e},I("shaka.media.PresentationTimeline",Jo),Jo.prototype.setAvailabilityTimeOffset=Jo.prototype.gf,Jo.prototype.usingPresentationStartTime=Jo.prototype.pf,Jo.prototype.getSeekRangeEnd=Jo.prototype.Wa,Jo.prototype.getSeekRangeStart=Jo.prototype.Qb,Jo.prototype.getSafeSeekRangeStart=Jo.prototype.xc,Jo.prototype.getSegmentAvailabilityEnd=Jo.prototype.vb,Jo.prototype.setUserSeekStart=Jo.prototype.kf,Jo.prototype.getSegmentAvailabilityStart=Jo.prototype.gb,Jo.prototype.isInProgress=Jo.prototype.zb,Jo.prototype.isLive=Jo.prototype.S,Jo.prototype.offset=Jo.prototype.offset,Jo.prototype.notifyMaxSegmentDuration=Jo.prototype.$d,Jo.prototype.notifyMinSegmentStartTime=Jo.prototype.jd,Jo.prototype.lockStartTime=Jo.prototype.Ud,Jo.prototype.notifySegments=Jo.prototype.kd,Jo.prototype.notifyTimeRange=Jo.prototype.$e,Jo.prototype.getDelay=Jo.prototype.Mf,Jo.prototype.setDelay=Jo.prototype.Pg,Jo.prototype.setSegmentAvailabilityDuration=Jo.prototype.te,Jo.prototype.setStatic=Jo.prototype.ue,Jo.prototype.setClockOffset=Jo.prototype.hf,Jo.prototype.getPresentationStartTime=Jo.prototype.Zf,Jo.prototype.setDuration=Jo.prototype.Na,Jo.prototype.setPresentationStartTime=Jo.prototype.Qg,Jo.prototype.getMaxSegmentDuration=Jo.prototype.Uf,Jo.prototype.getDuration=Jo.prototype.getDuration,$o.prototype.release=function(){this.l=this.j=null,this.i=function(){}},ta.prototype.release=function(){this.l&&(this.l.release(),this.l=null),null!=this.m&&(this.m.stop(),this.m=null),this.i&&(this.i.release(),this.i=null),this.g=this.A=this.u=null},ta.prototype.ce=function(){this.o=!0,na(this)};var a_=new er(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});ia.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},ca.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},wm=da.prototype,wm.Dd=function(){function e(){null==t.h||0==t.h?t.j=!0:(t.i.ka(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;ra(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},wm.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},wm.Ed=function(e){this.h=this.j?this.h:e},wm.Pc=function(){return(this.j?this.g.currentTime:this.h)||0},wm.De=function(){return 0},wm.Ce=function(){return 0},wm.Ze=function(){},wm=fa.prototype,wm.Dd=function(){this.m.va(.25)},wm.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},wm.Ed=function(e){this.A=e,aa(this.h,e)},wm.Pc=function(){var e=oa(this.h);return 0<this.i.readyState&&!this.i.paused?ga(this,e):e},wm.De=function(){return this.o?this.o.o:0},wm.Ce=function(){return this.j.D},wm.Ze=function(){this.j.ce()},wm=va.prototype,wm.wc=function(){return this.g.length},wm.release=function(){this.m||(this.g=[],this.l&&this.l.stop(),this.l=null)},wm.ug=function(){this.m=!0},wm.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],i=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<i)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},wm.get=function(e){return 0==this.g.length?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},wm.offset=function(e){if(!this.m)for(var t=a(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},wm.gd=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(e){return Math.round(1e3*e.startTime)/1e3<t}),this.g.push.apply(this.g,s(e))}},wm.hd=function(e,t){var n=this;e=e.filter(function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)}),this.gd(e),this.Ta(t)},wm.Ta=function(e){if(!this.m){var t=this.g.length;this.g=this.g.filter(function(t){return t.endTime>e}),this.j+=t-this.g.length}},wm.sc=function(e,t,n){if(n=void 0!==n&&n,!this.m){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;0!=this.g.length&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new Hi(e.startTime,t,e.I,e.j,e.h,e.g,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.G,e.D,e.status,e.A),this.g[this.g.length-1].m=e.m)}},wm.td=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new it(function(){var e=t();e?n.g.push.apply(n.g,s(e)):(n.l.stop(),n.l=null)}),this.l.va(e))},va.prototype[Symbol.iterator]=function(){return this.sb(0)},va.prototype.sb=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),r=-1;if(n&&0<n.i.length)for(var i=n.i.length-1;0<=i;--i){var o=n.i[i];if(e>=o.startTime&&e<o.endTime){for(;i&&!o.o;)i--,o=n.i[i];if(!o.o)return N("No independent partial segment found!"),null;t++,r=i-1;break}}return new ba(this,t,r)},I("shaka.media.SegmentIndex",va),va.forSingleSegment=ma,va.prototype.getIteratorForTime=va.prototype.sb,va.prototype.updateEvery=va.prototype.td,va.prototype.fit=va.prototype.sc,va.prototype.evict=va.prototype.Ta,va.prototype.mergeAndEvict=va.prototype.hd,va.prototype.offset=va.prototype.offset,va.prototype.get=va.prototype.get,va.prototype.find=va.prototype.find,va.prototype.markImmutable=va.prototype.ug,va.prototype.release=va.prototype.release,ba.prototype.Ef=function(){return this.g},ba.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.i.length&&e.za().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.i.length?e.i[this.h]:e},ba.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.i.length?(this.h++,e.za().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),e=this.current(),{value:e,done:!e}},I("shaka.media.SegmentIterator",ba),ba.prototype.next=ba.prototype.next,ba.prototype.current=ba.prototype.current,ba.prototype.currentPosition=ba.prototype.Ef,u(_a,va),wm=_a.prototype,wm.clone=function(){var e=new _a;return e.h=this.h.slice(),e},wm.release=function(){for(var e=a(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},wm.find=function(e){for(var t=0,n=a(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.find(e);if(null!=i)return i+t;t+=r.j+r.g.length}return null},wm.get=function(e){for(var t=0,n=a(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.get(e-t);if(i)return i;t+=r.j+r.g.length}return null},wm.offset=function(){},wm.gd=function(){},wm.Ta=function(){},wm.hd=function(){},wm.sc=function(){},wm.td=function(){},I("shaka.media.MetaSegmentIndex",_a),_a.prototype.updateEvery=_a.prototype.td,_a.prototype.fit=_a.prototype.sc,_a.prototype.mergeAndEvict=_a.prototype.hd,_a.prototype.evict=_a.prototype.Ta,_a.prototype.merge=_a.prototype.gd,_a.prototype.offset=_a.prototype.offset,_a.prototype.get=_a.prototype.get,_a.prototype.find=_a.prototype.find,_a.prototype.release=_a.prototype.release,wa.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},wa.prototype.set=function(e){this.i=e,Ta(this)},wa.prototype.Vc=function(){return this.g.Vc()},Sa.prototype.release=function(){this.i.stop();for(var e=a(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},u(ka,jn),ka.prototype.release=function(){this.g.clear(),jn.prototype.release.call(this)},ka.prototype.j=function(e){for(var t=a(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var r=n.Cc,i=r.length-1;0<=i;i--){var o=r[i];if(o.position<=e){r=o.Wd;break e}}r=null}if((i=r)&&(i=n.Ke,i=!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width)),i)e:{if(i=e,o=r.contentType,(o=this.h()[o])&&0<o.length){var s=o[o.length-1].end;if(i>=o[0].start&&i<s){i=!0;break e}}i=!1}i&&(n.Ke=r,W("Media quality changed at position "+e+" "+JSON.stringify(r)),n=new Mn("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}},u(Oa,jn),Oa.prototype.release=function(){this.g.clear(),this.h.stop(),jn.prototype.release.call(this)},u(Pa,jn),Pa.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,jn.prototype.release.call(this)},Pa.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=a(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.g.get(r),o=e<r.startTime?s_:e>r.endTime?c_:u_;this.g.set(r,o);for(var s=a(this.m),u=s.next();!u.done;u=s.next())u=u.value,u.Gb==i&&u.Fb==o&&u.yb(r,t)}}};var s_=1,u_=2,c_=3;Fa.prototype.abort=function(){this.g&&this.g.abort()},wm=Va.prototype,wm.destroy=function(){return this.l.destroy()},wm.configure=function(e){this.h=e,this.G=new _n({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0);for(var t=a(this.i.keys()),n=t.next();!n.done;n=t.next())if(n=this.i.get(n.value),n.ua){var r=n.ua,i=e.segmentPrefetchLimit;r.j=i;for(var o=Array.from(r.g.keys());o.length>i;){var s=o.pop();s&&La(r,s)}0<e.segmentPrefetchLimit||(n.ua=null)}else 0<e.segmentPrefetchLimit&&(n.ua=Za(this,n.stream))},wm.start=function(){var e=this;return A(function(t){if(1==t.g)return f(t,$a(e),2);zn(e.l),W("init: completed initial Stream setup"),e.A=!0,h(t)})},wm.Fc=function(){if(this.g){for(var e=this.g.Xc(),t=!1,n=a(this.i.keys()),r=n.next();!r.done;r=n.next()){var i=r.value;r=this.i.get(i);var o=ms(r),s=null;r.$&&(s=r.$.current()),(!s||s.startTime>e||s.endTime<e)&&(r.$=null),s=this.g.P,s.o?s=!1:i==pb?(s=s.g,s=null!=s.g&&null!=s.h&&(e>=s.g&&e<s.h)):(s=Po(s,i),s=Ki(s,e)),s||((null!=Co(this.g.P,i)||r.sa)&&(Ja(this,r),t=!0),r.ta&&(r.ta.abort(),W(o,"Aborting operation due to seek"),r.ta=null),i===pb&&(i=this.g.P,i.F&&i.F.i()),r.Fc=!0)}t||W("(all): seeked: buffered seek: presentationTime="+e)}},wm.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.P.Na(e):this.g.P.Na(Math.pow(2,32))},bs.prototype.destroy=function(){return this.s.destroy()},wm=Cs.prototype,wm.remove=function(e,t){return!!this.g&&(Ps(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},wm.append=function(e){var t=xs(e,[]),n=[];e=this.g.cues?Array.from(this.g.cues):[];var r={};t=a(t);for(var i=t.next();!i.done;r={Hb:r.Hb},i=t.next())r.Hb=i.value,e.some(function(e){return function(t){return t.startTime==e.Hb.startTime&&t.endTime==e.Hb.endTime&&t.text==e.Hb.T}}(r))||(i=Os(r.Hb))&&n.push(i);e=n.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)}),e=a(e);for(r=e.next();!r.done;r=e.next())this.g.addCue(r.value)},wm.destroy=function(){return this.g&&(Ps(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},wm.isTextVisible=function(){return"showing"==this.g.mode},wm.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},I("shaka.text.SimpleTextDisplayer",Cs),Cs.prototype.setTextVisibility=Cs.prototype.setTextVisibility,Cs.prototype.isTextVisible=Cs.prototype.isTextVisible,Cs.prototype.destroy=Cs.prototype.destroy,Cs.prototype.append=Cs.prototype.append,Cs.prototype.remove=Cs.prototype.remove,I("shaka.util.Dom",Ms),Ms.removeAllChildren=Is,wm=js.prototype,wm.append=function(e){var t=[].concat(s(this.i)),n={};e=a(e);for(var r=e.next();!r.done;n={Kc:n.Kc},r=e.next())n.Kc=r.value,t.some(function(e){return function(t){return de(t,e.Kc)}}(n))||this.i.push(n.Kc);Ls(this)},wm.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},wm.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;return this.i=this.i.filter(function(n){return n.startTime<e||n.endTime>=t}),Ls(this,n>this.i.length),!0},wm.isTextVisible=function(){return this.j},wm.setTextVisibility=function(e){this.j=e},I("shaka.text.UITextDisplayer",js),js.prototype.setTextVisibility=js.prototype.setTextVisibility,js.prototype.isTextVisible=js.prototype.isTextVisible,js.prototype.remove=js.prototype.remove,js.prototype.destroy=js.prototype.destroy,js.prototype.append=js.prototype.append,I("shaka.text.WebVttGenerator",function(){}),Ws.prototype.configure=function(e){this.g=e};var l_="m",d_="a",f_="v",h_="av",p_="i",g_="c",y_="tt";I("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",vh:"s",OTHER:"o"}),I("shaka.util.ConfigUtils",Zs),Zs.convertToConfigObject=tu,Zs.mergeConfigObjects=eu,I("shaka.util.FairPlayUtils",ru),ru.commonFairPlayResponse=function(e,t){if(2===e){try{var n=or(t.data)}catch(e){return}e=!1,n=n.trim(),"<ckc>"===n.substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(e){}e&&(t.data=ee(Sr(n)))}},ru.expressplayFairPlayRequest=function(e,t){su(e,t)},ru.conaxFairPlayRequest=function(e,t){su(e,t)},ru.ezdrmFairPlayRequest=function(e,t){su(e,t)},ru.verimatrixFairPlayRequest=function(e,t){2===e&&(e=te(t.body),e=Tr(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=ur("spc="+e))},ru.expressplayInitDataTransform=function(e,t,n){return au(e,t,n)},ru.conaxInitDataTransform=function(t,n,r){if("skd"!==n)return t;n=r.serverCertificate,r=sr(t).split("skd://").pop().split("?").shift(),r=e.atob(r);var i=new ArrayBuffer(2*r.length);i=new Uint16Array(i);for(var o=0,a=r.length;o<a;o++)i[o]=r.charCodeAt(o);return ou(t,i,n)},ru.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,n=sr(e).split(";").pop(),ou(e,n,t))},ru.verimatrixInitDataTransform=function(e,t,n){return au(e,t,n)},ru.initDataTransform=ou,ru.defaultGetContentId=iu,ru.isFairPlaySupported=function(){var e;return A(function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},p(t,2),f(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(v(t),t.return(!1))})},I("shaka.util.PlayerConfiguration",uu),uu.mergeConfigObjects=lu,uu.createDefault=cu,u(bu,jn),wm=bu.prototype,wm.destroy=function(){var e,t=this;return A(function(n){switch(n.g){case 1:return t.m==v_?n.return():(_u(t),t.m=v_,e=ws(t.pb,function(){return{node:t.R,T:Uc(),xb:!1}}),f(n,new Promise(function(t){e.Tb=function(){H("Preparing to destroy walker...")},e.md=function(){t()},e.Cb=function(){t()},e.onError=function(){t()},e.od=function(){t()}}),2));case 2:return f(n,t.pb.destroy(),3);case 3:if(t.dd&&(t.dd.release(),t.dd=null),t.jc&&(t.jc.release(),t.jc=null),t.o&&(t.o.release(),t.o=null),t.Yd=null,t.g=null,t.u=null,t.Uc=null,t.V=null,!t.F){n.B(4);break}return f(n,t.F.destroy(),5);case 5:t.F=null;case 4:t.s&&(t.s.release(),t.s=null),jn.prototype.release.call(t),h(n)}})},wm.kc=function(e,t){if(t=void 0===t||t,this.m==v_)return Promise.reject(Nc());var n=Uc();n.mediaElement=e,ot()||(t=!1);var r=t?this.Kb:this.X;return e=ws(this.pb,function(){return{node:r,T:n,xb:!1}}),e.Tb=function(){return H("Starting attach...")},Bc(e)},wm.wf=function(e){this.qf=e},wm.detach=function(){var e=this;if(this.m==v_)return Promise.reject(Nc());var t=ws(this.pb,function(){return{node:e.R,T:Uc(),xb:!1}});return t.Tb=function(){return H("Starting detach...")},Bc(t)},wm.ze=function(e){var t=this;if(e=void 0===e||e,this.m==v_)return Promise.reject(Nc());this.qc=!1,ot()||(e=!1),_u(this);var n=Uc(),r=ws(this.pb,function(r){var i=r.mediaElement&&e?t.Kb:r.mediaElement?t.X:t.R;return n.mediaElement=r.mediaElement,{node:i,T:n,xb:!1}});return r.Tb=function(){return H("Starting unload...")},Bc(r)},wm.Xg=function(e){this.rc=e},wm.load=function(e,t,n){var r=this;if(this.rc=null,this.qc=!1,this.m==v_)return Promise.reject(Nc());this.dispatchEvent(Tu("loading"));var i=Uc();i.uri=e,i.sd=Date.now()/1e3,n&&(i.mimeType=n),void 0!==t&&(i.startTime=t);var o=Su(this,i)?this.Mb:this.Y,a=ws(this.pb,function(e){return null==e.mediaElement?null:(i.mediaElement=e.mediaElement,{node:o,T:i,xb:!0})});return this.u=new mu,a.Tb=function(){return H("Starting load of "+e+"...")},new Promise(function(e,t){a.od=function(){return t(new ke(2,7,7002))},a.md=function(){e(),r.dispatchEvent(Tu("loaded"))},a.Cb=function(){return t(Nc())},a.onError=function(e){return t(e)}})},wm.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=tu(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(on("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(on("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&e.streaming.lowLatencyMode&&(void 0==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),void 0==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01),void 0==e.streaming.segmentPrefetchLimit&&(e.streaming.segmentPrefetchLimit=2));var n=lu(this.g,e,rc(this));return Xu(this),n},wm.getConfiguration=function(){var e=rc(this);return lu(e,this.g,rc(this)),e},wm.Kf=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Wb().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},wm.Hg=function(){for(var e in this.g)delete this.g[e];lu(this.g,rc(this),rc(this)),Xu(this)},wm.Qf=function(){return this.m},wm.Tf=function(){return this.i?this.i.type:null},wm.Vf=function(){return this.h},wm.ub=function(){return this.F},wm.Id=function(){return this.Zb},wm.Qe=function(){return this.D?this.D:null},wm.S=function(){return this.i?this.i.presentationTimeline.S():!(!this.h||!this.h.src)&&1/0==this.h.duration},wm.zb=function(){return!!this.i&&this.i.presentationTimeline.zb()},wm.lg=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.h||!this.h.src)&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},wm.Wb=function(){if(!this.qc)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.Qb(),end:e.Wa()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},wm.ig=function(){this.S()?this.h.currentTime=this.Wb().end:V("goToLive is for live streams!")},wm.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},wm.drmInfo=function(){return this.l?this.l.g:null},wm.uc=function(){return this.l?this.l.uc():1/0},wm.Hd=function(){return this.l?this.l.Hd():[]},wm.vc=function(){return this.l?this.l.vc():{}},wm.Nd=function(){return!!this.M&&this.M.g==Ib},wm.Wc=function(){return this.h?this.I?this.I.i:1:0},wm.nf=function(e){0==e?F("A trick play rate of 0 is unsupported!"):(this.h.paused&&this.h.play(),this.I.set(e),this.m==b_&&(this.s.playbackRateChanged(e),qa(this.j,1<Math.abs(e))))},wm.Ge=function(){var e=this.I.Vc();this.m==__&&this.I.set(e),this.m==b_&&(this.I.set(e),this.s.playbackRateChanged(e),qa(this.j,!1))},wm.hb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=a(this.i.variants),i=r.next();!i.done;i=r.next())if(i=i.value,zt(i)){var o=Bt(i);o.active=i==e,o.active||1==n||null==e||i.video!=e.video||i.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(e){return qt(e)}):[]},wm.Rb=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=a(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var i=Vt(r);i.active=r==e,t.push(i)}return t}return this.h&&this.h.src&&this.h.textTracks?Ju(this).map(function(e){return Kt(e)}):[]},wm.Pf=function(){return this.i?this.i.imageStreams.map(function(e){return Ht(e)}):[]},wm.cg=function(e,t){var n,r,i,o,a,s,u,c,l,d,h,p,g,y,v,m,b,_,w,T,S=this;return A(function(E){return 1==E.g?S.i?(n=S.i.imageStreams.find(function(t){return t.id==e}))?n.segmentIndex?E.B(3):f(E,n.createSegmentIndex(),3):E.return(null):E.B(2):2!=E.g?null==(r=n.segmentIndex.find(t))?E.return(null):(i=n.segmentIndex.get(r),o=i.tilesLayout||n.tilesLayout,(a=/(\d+)x(\d+)/.exec(o))?(s=n.width||0,u=n.height||0,c=parseInt(a[1],10),l=parseInt(a[2],10),d=s/c,h=u/l,p=c*l,g=i.l-i.startTime,y=i.G||g/p,v=i.startTime,b=m=0,1<p&&(_=Math.floor((t-i.startTime)/y),v=i.startTime+_*y,m=_%c*d,b=Math.floor(_/c)*h),w=!1,(T=i.F)&&(w=!0,h=T.height,m=T.positionX,b=T.positionY,d=T.width),E.return({imageHeight:u,imageWidth:s,height:h,positionX:m,positionY:b,startTime:v,duration:y,uris:i.za(),width:d,sprite:w})):(V("Tiles layout does not contain a valid format  (columns x rows)"),E.return(null))):E.return(null)})},wm.ff=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(t){return t.id==e.id});t?t==this.j.o?W("Text track already selected."):(vu(this.u.h,t,!1),za(this.j,t),Tc(this),this.Jb=t.language):B("No stream with id",e.id)}else if(this.h&&this.h.src&&this.h.textTracks){t=Ju(this),t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,Wt(n)==e.id?n.mode=this.aa?"showing":"hidden":n.mode="disabled";Tc(this)}},wm.oe=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){this.g.abr.enabled&&F("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.i.variants.find(function(t){return t.id==e.id});r?zt(r)?(vc(this,r,!1,t,n),this.Ib=new fn(r),pc(this)):B("Unable to switch to restricted track",e.id):B("No variant with id",e.id)}else if(this.h&&this.h.audioTracks)for(t=Array.from(this.h.audioTracks),t=a(t),n=t.next();!n.done;n=t.next())if(n=n.value,Wt(n)==e.id){mc(this,n);break}},wm.Jf=function(){return Lc(this.hb())},wm.ag=function(){return Lc(this.Rb())},wm.If=function(){return Array.from(Rc(this.hb()))},wm.$f=function(){return Array.from(Rc(this.Rb()))},wm.df=function(e,t,n,r){if(n=void 0===n?0:n,r=void 0===r?0:r,this.i&&this.A){this.Ib=new hn(e,t||"",n,"",""),e=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},t=this.j.j;var i=this.Ib.create(this.i.variants);n=null,i=a(i.values());for(var o=i.next();!o.done;o=i.next())o=o.value,(!n||e(n,t)>e(o,t))&&(n=o);n?(e=Bt(n),this.oe(e,!0,r)):yc(this)}else this.h&&this.h.audioTracks&&(r=Jt(this.hb(),e,t||"",!1)[0])&&this.oe(r)},wm.ef=function(e,t,n){n=void 0!==n&&n,this.i&&this.A?(this.Jb=e,this.pc=t||"",this.mc=n,(e=Jt(this.i.textStreams,this.Jb,this.pc,this.mc)[0]||null)&&(e==this.j.o?W("Text track already selected."):(vu(this.u.h,e,!1),(this.g.streaming.alwaysStreamText||this.Pd())&&(za(this.j,e),Tc(this))))):(e=Jt(this.Rb(),e,t||"",n)[0])&&this.ff(e)},wm.Kg=function(e,t,n){if(t=void 0===t||t,n=void 0===n?0:n,this.i&&this.A){for(var r=null,i=a(this.i.variants),o=i.next();!o.done;o=i.next())if(o=o.value,o.audio.label==e){r=o;break}null==r?V("No variants were found with label: "+e+". Ignoring the request to switch."):(this.Ib=new hn(r.language,"",0,"",e),yc(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=a(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&mc(this,t)}},wm.Pd=function(){var e=this.aa;return this.G?this.G.u.isTextVisible():this.h&&this.h.src&&this.h.textTracks?Ju(this).some(function(e){return"showing"==e.mode}):e},wm.Re=function(){return this.h&&this.h.src&&this.h.textTracks?Qu(this).map(function(e){return Kt(e)}):[]},wm.Lf=function(e){var t=$e(e),n=Qu(this).filter(function(e){return $e(e.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=a(n);for(var i=n.next();!i.done;i=n.next())if((i=i.value)&&i.cues){i=a(i.cues);for(var o=i.next();!o.done;o=i.next()){var s=o.value;(o=s.id)&&""!=o||(o=s.startTime+"-"+s.endTime+"-"+s.text),s={id:o,title:s.text,startTime:s.startTime,endTime:s.endTime},r.has(o)||(e.push(s),r.add(o))}}return e},wm.Rg=function(e){if(e=!!e,this.aa!=e){if(this.aa=e,this.m==b_)this.G.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.o||(e=Jt(this.i.textStreams,this.Jb,this.pc,this.mc),0<e.length&&(za(this.j,e[0]),Tc(this))):Ka(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=Ju(this);t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,"disabled"!=n.mode&&(n.mode=e?"showing":"hidden")}Sc(this)}},wm.Yf=function(){if(!this.S())return V("getPlayheadTimeAsDate is for live streams!"),null;var e=this.pb.l,t=0;if(this.A)t=this.A.Pc();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+t)):this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?(V("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(e.getTime()+1e3*t)):(V("No way to get playhead time as Date!"),null)},wm.Se=function(){if(!this.S())return V("getPresentationStartTimeAsDate is for live streams!"),null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.h&&this.h.getStartDate){var e=this.h.getStartDate();return isNaN(e.getTime())?(V("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):e}return V("No way to get presentation start time as Date!"),null},wm.Va=function(){if(this.m==b_)return this.G.Va();var e={total:[],audio:[],video:[],text:[]};return this.m==__&&(e.total=zi(this.h.buffered)),e},wm.getStats=function(){if(this.m!=b_&&this.m!=__)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};fc(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.u;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.A&&(this.u.M=this.A.Ce(),this.u.R=this.A.De()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.u;var r=Number(n.totalVideoFrames);t.L=Number(n.droppedVideoFrames),t.K=r,this.u.I=Number(n.corruptedVideoFrames)}this.l?(n=this.l,n=n.I?n.I:NaN):n=NaN,this.u.s=n,this.m==b_&&((n=this.j.j)&&(this.u.A=(this.I?this.I.i:1)*n.bandwidth),n&&n.video&&(t=this.u,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.S()&&(n=this.Se().valueOf()+1e3*this.Wb().end,this.u.D=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.u.G=this.i.presentationTimeline.g),n=this.s.getBandwidthEstimate(),this.u.u=n),this.m==__&&(n=this.u,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var i=this.u;e=i.o,n=i.l,t=i.A,r=i.K;var o=i.L,s=i.I,u=i.R,c=i.M,l=i.u,d=i.i,f=i.m,h=i.F,p=i.j,g=pu(i.g,"playing"),y=pu(i.g,"paused"),v=pu(i.g,"buffering"),m=i.s,b=i.D,_=i.G,w=gu(i.g),T=[];i=a(i.h.g);for(var S=i.next();!S.done;S=i.next())S=S.value,T.push({timestamp:S.timestamp,id:S.id,type:S.type,fromAdaptation:S.fromAdaptation,bandwidth:S.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:o,corruptedFrames:s,stallsDetected:u,gapsJumped:c,estimatedBandwidth:l,completionPercent:d,loadLatency:f,manifestTimeSeconds:h,drmTimeSeconds:p,playTime:g,pauseTime:y,bufferingTime:v,licenseTime:m,liveLatency:b,maxSegmentDuration:_,stateHistory:w,switchHistory:T}},wm.uf=function(e,t,n,r,i,o,a){a=void 0!==a&&a;var s,u,c,l,d,h,p,g,y,v,m,b=this;return A(function(_){switch(_.g){case 1:if(b.m!=b_&&b.m!=__)throw B("Must call load() and wait for it to resolve before adding text tracks."),new ke(1,7,7004);if(r){_.B(2);break}return f(_,Zu(b,e),3);case 3:r=_.h;case 2:if(s=[],b.D)try{s=b.D.getServerSideCuePoints()}catch(e){}if(b.m!=__){_.B(4);break}return a&&(n="forced"),f(_,ec(b,e,t,n,r,o||"",s),5);case 5:if(u=b.Rb(),c=u.find(function(e){return e.language==t&&e.label==(o||"")&&e.kind==n}))return _c(b),_.return(c);throw B("Cannot add this text when loaded with src="),new ke(1,2,2012);case 4:if(l=gb,d=b.i.presentationTimeline.getDuration(),1/0==d)throw new ke(1,4,4033);if(!s.length){_.B(6);break}return f(_,tc(b,e,b.F,b.g.streaming.retryParameters),7);case 7:h=_.h,p=nc(b,h,r,s),g=new Blob([p],{type:"text/vtt"}),e=i_(g),r="text/vtt";case 6:if(y={id:b.me++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:ma(0,d,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:l.fa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!a,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0},v=De(y.mimeType,y.codecs),!(m=Ve(v)))throw new ke(2,2,2014,r);return b.i.textStreams.push(y),_c(b),_.return(Vt(y))}})},wm.vf=function(e,t){var n,r,i,o,s,u,c,l,d,h,p,g,y,v,m,b,_=this;return A(function(w){switch(w.g){case 1:if(_.m!=b_&&_.m!=__)throw B("Must call load() and wait for it to resolve before adding image tracks."),new ke(1,7,7004);if(_.m==__)throw B("Cannot add this thumbnail track when loaded with src="),new ke(1,2,2016);if(t){w.B(2);break}return f(w,Zu(_,e),3);case 3:t=w.h;case 2:if("text/vtt"!=t)throw new ke(1,2,2017,e);if(n=gb,r=_.i.presentationTimeline.getDuration(),1/0==r)throw new ke(1,4,4045);return f(w,tc(_,e,_.F,_.g.streaming.retryParameters),4);case 4:if(i=w.h,!(o=bb[t]))throw new ke(2,2,2014,t);for(s=o(),u={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0},c=te(i),l=s.parseMedia(c,u),d=[],h={},p=a(l),g=p.next();!g.done;h={$b:h.$b},g=p.next())y=g.value,h.$b=Oe([e],[y.T])[0],v=new Hi(y.startTime,y.endTime,function(e){return function(){return[e.$b]}}(h),0,null,null,0,0,1/0),h.$b.includes("#xywh")&&(m=h.$b.split("#xywh=")[1].split(","),4===m.length&&v.jf({height:parseInt(m[3],10),positionX:parseInt(m[0],10),positionY:parseInt(m[1],10),width:parseInt(m[2],10)})),d.push(v);return b={id:_.me++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new va(d),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ic,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0},_.i.imageStreams.push(b),_c(_),w.return(Ht(b))}})},wm.tf=function(e,t,n){var r,i,o,a,s=this;return A(function(u){switch(u.g){case 1:if(s.m!=b_&&s.m!=__)throw B("Must call load() and wait for it to resolve before adding chapters tracks."),new ke(1,7,7004);if(n){u.B(2);break}return f(u,Zu(s,e),3);case 3:n=u.h;case 2:if(r=[],s.D)try{r=s.D.getServerSideCuePoints()}catch(e){}return f(u,ec(s,e,t,"chapters",n,"",r),4);case 4:if(i=u.h,o=s.Re(),!(a=o.find(function(e){return e.language==t}))){u.B(5);break}return f(u,new Promise(function(e,t){s.o.ka(i,"load",e),s.o.ka(i,"error",function(){t(new ke(1,2,2015))})}),6);case 6:return u.return(a);case 5:throw B("Cannot add this text when loaded with src="),new ke(1,2,2012)}})},wm.re=function(e,t){this.he.width=e,this.he.height=t},wm.le=function(e){if(this.m==b_){var t=this.j;if(e=void 0===e?.1:e,t.l.g)B("Unable to retry after StreamingEngine is destroyed!"),t=!1;else if(t.s)B("Unable to retry after StreamingEngine encountered a fatal error!"),t=!1;else{for(var n=a(t.i.values()),r=n.next();!r.done;r=n.next()){r=r.value;var i=ms(r);!r.zc||r.sa||r.Pa||(H(i,"Retrying after failure..."),r.zc=!1,ps(t,r,e))}t=!0}}else t=!1;return t},wm.Rf=function(){return F("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},wm.Sf=function(){return this.ed},wm.ke=function(){this.l&&this.l.ke()},wm.Ic=function(e){this.Vd=e,this.l&&this.l.Ic(e)},wm.lf=function(e){this.Uc=e},wm.Gd=function(e,t){if(!this.g.abr.enabled||this.m===v_||this.m!=b_||!navigator.onLine)return!1;if(this.i.variants.some(function(t){return!(!(t=t[e.type])||t.id===e.id)&&("audio"!=e.type||e.language===t.language)})){for(var n=a(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var i=r[e.type];i&&i.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t,q("Disabled stream "+e.type+":"+e.id+" for "+t+" seconds..."))}return this.bd.va(1),t=this.Va().video.reduce(function(e,t){return e+t.end-t.start},0),yc(this,!0,t,!0,!1),!0}return V("No alternate stream found for active "+e.type+" stream. Will ignore request to disable stream..."),!1},I("shaka.Player",bu),bu.prototype.setVideoContainer=bu.prototype.lf,bu.prototype.setLicenceRequiredCallback=bu.prototype.Ic,bu.prototype.requestLicence=bu.prototype.ke,bu.prototype.getManifestParserFactory=bu.prototype.Sf,bu.prototype.getManifest=bu.prototype.Rf,bu.prototype.retryStreaming=bu.prototype.le,bu.prototype.setMaxHardwareResolution=bu.prototype.re,bu.prototype.addChaptersTrack=bu.prototype.tf,bu.prototype.addThumbnailsTrack=bu.prototype.vf,bu.prototype.addTextTrackAsync=bu.prototype.uf,bu.prototype.getStats=bu.prototype.getStats,bu.prototype.getBufferedInfo=bu.prototype.Va,bu.prototype.getPresentationStartTimeAsDate=bu.prototype.Se,bu.prototype.getPlayheadTimeAsDate=bu.prototype.Yf,bu.prototype.setTextTrackVisibility=bu.prototype.Rg,bu.prototype.getChapters=bu.prototype.Lf,bu.prototype.getChaptersTracks=bu.prototype.Re,bu.prototype.isTextTrackVisible=bu.prototype.Pd,bu.prototype.selectVariantsByLabel=bu.prototype.Kg,bu.prototype.selectTextLanguage=bu.prototype.ef,bu.prototype.selectAudioLanguage=bu.prototype.df,bu.prototype.getTextLanguages=bu.prototype.$f,bu.prototype.getAudioLanguages=bu.prototype.If,bu.prototype.getTextLanguagesAndRoles=bu.prototype.ag,bu.prototype.getAudioLanguagesAndRoles=bu.prototype.Jf,bu.prototype.selectVariantTrack=bu.prototype.oe,bu.prototype.selectTextTrack=bu.prototype.ff,bu.prototype.getThumbnails=bu.prototype.cg,bu.prototype.getImageTracks=bu.prototype.Pf,bu.prototype.getTextTracks=bu.prototype.Rb,bu.prototype.getVariantTracks=bu.prototype.hb,bu.prototype.cancelTrickPlay=bu.prototype.Ge,bu.prototype.trickPlay=bu.prototype.nf,bu.prototype.getPlaybackRate=bu.prototype.Wc,bu.prototype.isBuffering=bu.prototype.Nd,bu.prototype.getKeyStatuses=bu.prototype.vc,bu.prototype.getActiveSessionsMetadata=bu.prototype.Hd,bu.prototype.getExpiration=bu.prototype.uc,bu.prototype.drmInfo=bu.prototype.drmInfo,bu.prototype.keySystem=bu.prototype.keySystem,bu.prototype.goToLive=bu.prototype.ig,bu.prototype.seekRange=bu.prototype.Wb,bu.prototype.isAudioOnly=bu.prototype.lg,bu.prototype.isInProgress=bu.prototype.zb,bu.prototype.isLive=bu.prototype.S,bu.prototype.getAdManager=bu.prototype.Qe,bu.prototype.getAssetUri=bu.prototype.Id,bu.prototype.getNetworkingEngine=bu.prototype.ub,bu.prototype.getMediaElement=bu.prototype.Vf,bu.prototype.getManifestType=bu.prototype.Tf,bu.prototype.getLoadMode=bu.prototype.Qf,bu.prototype.resetConfiguration=bu.prototype.Hg,bu.prototype.getBufferFullness=bu.prototype.Kf,bu.prototype.getConfiguration=bu.prototype.getConfiguration,bu.prototype.configure=bu.prototype.configure,bu.prototype.load=bu.prototype.load,bu.prototype.updateStartTime=bu.prototype.Xg,bu.prototype.unload=bu.prototype.ze,bu.prototype.detach=bu.prototype.detach,bu.prototype.attachCanvas=bu.prototype.wf,bu.prototype.attach=bu.prototype.kc,bu.probeSupport=function(e){e=void 0===e||e;var t,n,r,i,o,u;return A(function(c){if(1==c.g)return t={},e?f(c,wi(),3):c.B(2);2!=c.g&&(t=c.h);var l={};if(ot()){for(var d in Xb)l[d]=!0;for(var h in Jb)l[h]=!0}d={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},h=a(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var p=h.next();!p.done;p=h.next())p=p.value,l[p]=ot()?!!Xb[p]:at(p);for(var g in d)l[g]=ot()?!!Jb[g]:at(d[g]);for(n=l,g='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(s(mb)),l={},g=a(g),d=g.next();!d.done;d=g.next())d=d.value,l[d]=ot()?!!Ve(d)||(Y(d)||!!ge(d)):at(d),h=d.split(";")[0],l[h]=l[h]||l[d];r=l,i={manifest:n,media:r,drm:t},o=S_;for(u in o)i[u]=o[u]();return c.return(i)})},bu.isBrowserSupported=function(){if(e.Promise||F("A Promise implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||pt("Trident/"))return!1;var t=ht();return!(t&&13>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!ot()||at("application/x-mpegurl"))},bu.setAdManagerFactory=function(e){E_=e},bu.registerSupportPlugin=function(e,t){S_[e]=t},bu.prototype.destroy=bu.prototype.destroy;var v_=0,m_=1,b_=2,__=3;bu.LoadMode={DESTROYED:v_,NOT_LOADED:m_,MEDIA_SOURCE:b_,SRC_EQUALS:__},bu.version="4.4.2-nmp-4";var w_=["","4"];Mb=new function(e){this.g=e,this.i=an,this.h=sn}(new rn(Number(w_[0]),Number(w_[1])));var T_=["output-restricted","internal-error"],S_={},E_=null,k_={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},A_={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};wm=Hc.prototype,wm.getDuration=function(){return this.g.getDuration()},wm.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},wm.getRemainingTime=function(){return this.h.getRemainingTime()},wm.isPaused=function(){return this.i},wm.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},wm.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},wm.canSkipNow=function(){return this.h.getAdSkippableState()},wm.skip=function(){return this.h.skip()},wm.pause=function(){return this.h.pause()},wm.play=function(){return this.h.resume()},wm.getVolume=function(){return this.h.getVolume()},wm.setVolume=function(e){return this.h.setVolume(e)},wm.isMuted=function(){return 0==this.h.getVolume()},wm.isLinear=function(){return this.g.isLinear()},wm.resize=function(e,t){var n=!1,r=this.m;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},wm.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},wm.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},wm.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},wm.getTitle=function(){return this.g.getTitle()},wm.getDescription=function(){return this.g.getDescription()},wm.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},wm.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},wm.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},wm.getAdId=function(){return this.g.getAdId()},wm.getCreativeAdId=function(){return this.g.getCreativeAdId()},wm.getAdvertiserName=function(){return this.g.getAdvertiserName()},wm.getMediaUrl=function(){return this.g.getMediaUrl()},wm.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},wm.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},wm.release=function(){this.h=this.g=null},I("shaka.ads.ClientSideAd",Hc),Hc.prototype.release=Hc.prototype.release,Hc.prototype.getPodIndex=Hc.prototype.getPodIndex,Hc.prototype.getTimeOffset=Hc.prototype.getTimeOffset,Hc.prototype.getMediaUrl=Hc.prototype.getMediaUrl,Hc.prototype.getAdvertiserName=Hc.prototype.getAdvertiserName,Hc.prototype.getCreativeAdId=Hc.prototype.getCreativeAdId,Hc.prototype.getAdId=Hc.prototype.getAdId,Hc.prototype.getVastMediaWidth=Hc.prototype.getVastMediaWidth,Hc.prototype.getVastMediaHeight=Hc.prototype.getVastMediaHeight,Hc.prototype.getVastMediaBitrate=Hc.prototype.getVastMediaBitrate,Hc.prototype.getDescription=Hc.prototype.getDescription,Hc.prototype.getTitle=Hc.prototype.getTitle,Hc.prototype.getPositionInSequence=Hc.prototype.getPositionInSequence,Hc.prototype.getSequenceLength=Hc.prototype.getSequenceLength,Hc.prototype.setMuted=Hc.prototype.setMuted,Hc.prototype.resize=Hc.prototype.resize,Hc.prototype.isLinear=Hc.prototype.isLinear,Hc.prototype.isMuted=Hc.prototype.isMuted,Hc.prototype.setVolume=Hc.prototype.setVolume,Hc.prototype.getVolume=Hc.prototype.getVolume,Hc.prototype.play=Hc.prototype.play,Hc.prototype.pause=Hc.prototype.pause,Hc.prototype.skip=Hc.prototype.skip,Hc.prototype.canSkipNow=Hc.prototype.canSkipNow,Hc.prototype.getTimeUntilSkippable=Hc.prototype.getTimeUntilSkippable,Hc.prototype.isSkippable=Hc.prototype.isSkippable,Hc.prototype.isPaused=Hc.prototype.isPaused,Hc.prototype.getRemainingTime=Hc.prototype.getRemainingTime,Hc.prototype.getMinSuggestedDuration=Hc.prototype.getMinSuggestedDuration,Hc.prototype.getDuration=Hc.prototype.getDuration,Wc.prototype.configure=function(e){this.D=e},Wc.prototype.stop=function(){this.g&&this.g.stop(),this.o&&Is(this.o)},Wc.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()},wm=Jc.prototype,wm.getDuration=function(){return this.i?this.i.duration:-1},wm.getMinSuggestedDuration=function(){return this.getDuration()},wm.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},wm.isPaused=function(){return this.h.paused},wm.isSkippable=function(){return this.g.isSkippable()},wm.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},wm.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},wm.skip=function(){this.h.currentTime+=this.getRemainingTime()},wm.pause=function(){return this.h.pause()},wm.play=function(){return this.h.play()},wm.getVolume=function(){return this.h.volume},wm.setVolume=function(e){this.h.volume=e},wm.isMuted=function(){return this.h.muted},wm.isLinear=function(){return!0},wm.resize=function(){},wm.setMuted=function(e){this.h.muted=e},wm.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},wm.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},wm.getTitle=function(){return this.g.getTitle()},wm.getDescription=function(){return this.g.getDescription()},wm.getVastMediaBitrate=function(){return 0},wm.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},wm.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},wm.getAdId=function(){return this.g.getAdId()},wm.getCreativeAdId=function(){return this.g.getCreativeAdId()},wm.getAdvertiserName=function(){return this.g.getAdvertiserName()},wm.getMediaUrl=function(){return null},wm.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},wm.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},wm.release=function(){this.h=this.i=this.g=null},I("shaka.ads.ServerSideAd",Jc),Jc.prototype.release=Jc.prototype.release,Jc.prototype.getPodIndex=Jc.prototype.getPodIndex,Jc.prototype.getTimeOffset=Jc.prototype.getTimeOffset,Jc.prototype.getMediaUrl=Jc.prototype.getMediaUrl,Jc.prototype.getAdvertiserName=Jc.prototype.getAdvertiserName,Jc.prototype.getCreativeAdId=Jc.prototype.getCreativeAdId,Jc.prototype.getAdId=Jc.prototype.getAdId,Jc.prototype.getVastMediaWidth=Jc.prototype.getVastMediaWidth,Jc.prototype.getVastMediaHeight=Jc.prototype.getVastMediaHeight,Jc.prototype.getVastMediaBitrate=Jc.prototype.getVastMediaBitrate,Jc.prototype.getDescription=Jc.prototype.getDescription,Jc.prototype.getTitle=Jc.prototype.getTitle,Jc.prototype.getPositionInSequence=Jc.prototype.getPositionInSequence,Jc.prototype.getSequenceLength=Jc.prototype.getSequenceLength,Jc.prototype.setMuted=Jc.prototype.setMuted,Jc.prototype.resize=Jc.prototype.resize,Jc.prototype.isLinear=Jc.prototype.isLinear,Jc.prototype.isMuted=Jc.prototype.isMuted,Jc.prototype.setVolume=Jc.prototype.setVolume,Jc.prototype.getVolume=Jc.prototype.getVolume,Jc.prototype.play=Jc.prototype.play,Jc.prototype.pause=Jc.prototype.pause,Jc.prototype.skip=Jc.prototype.skip,Jc.prototype.canSkipNow=Jc.prototype.canSkipNow,Jc.prototype.getTimeUntilSkippable=Jc.prototype.getTimeUntilSkippable,Jc.prototype.isSkippable=Jc.prototype.isSkippable,Jc.prototype.isPaused=Jc.prototype.isPaused,Jc.prototype.getRemainingTime=Jc.prototype.getRemainingTime,Jc.prototype.getMinSuggestedDuration=Jc.prototype.getMinSuggestedDuration,Jc.prototype.getDuration=Jc.prototype.getDuration,$c.prototype.configure=function(){},$c.prototype.stop=function(){this.A="",this.o=null,this.D=[]},$c.prototype.release=function(){this.stop(),this.h&&this.h.release()},$c.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},u(Zc,jn),wm=Zc.prototype,wm.setLocale=function(e){this.l=e},wm.configure=function(e){this.j=e,this.h&&this.h.configure(this.j),this.g&&this.g.configure(this.j)},wm.initClientSide=function(t,n,r){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new ke(2,10,1e4);this.h&&this.h.release(),this.h=new Wc(t,n,this.l,r,function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.i.h.push(e.loadTime);break;case"ad-started":i.i.g++;break;case"ad-complete":i.i.i++;break;case"ad-skipped":i.i.j++}i.dispatchEvent(e)}),this.h.configure(this.j)},wm.release=function(){this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),jn.prototype.release.call(this)},wm.onAssetUnload=function(){this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Mn("ad-stopped")),this.i=new Vc},wm.requestClientSideAds=function(e){if(!this.h)throw new ke(1,10,10001);var t=this.h;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.F=Date.now()/1e3,t.l.requestAds(e)},wm.updateClientSideAdsRenderingSettings=function(e){if(!this.h)throw new ke(1,10,10001);var t=this.h;t.u=e,t.g&&t.g.updateAdsRenderingSettings(t.u)},wm.initServerSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.dai)throw new ke(2,10,10002);this.g&&this.g.release(),this.g=new $c(t,n,this.l,function(e){if(e&&e.type)switch(e.type){case"ads-loaded":r.i.h.push(e.loadTime);break;case"ad-started":r.i.g++;break;case"ad-complete":r.i.i++;break;case"ad-skipped":r.i.j++}r.dispatchEvent(e)}),this.g.configure(this.j)},wm.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new ke(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&F('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="4.4.2-nmp-4",n=this.g,n.j?e=Promise.reject(new ke(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.F=!0),n.j=new Sn,n.g.requestStream(e),n.A=t||"",n.G=Date.now()/1e3,e=n.j),e},wm.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new ke(1,10,10003);(e.mpt||e.mpv)&&F('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="4.4.2-nmp-4",this.g.g.replaceAdTagParameters(e)},wm.getServerSideCuePoints=function(){if(!this.g)throw new ke(1,10,10003);return this.g.D},wm.getStats=function(){var e=this.i;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},wm.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}},wm.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},wm.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},I("shaka.ads.AdManager",Zc),Zc.prototype.onCueMetadataChange=Zc.prototype.onCueMetadataChange,Zc.prototype.onHlsTimedMetadata=Zc.prototype.onHlsTimedMetadata,Zc.prototype.onDashTimedMetadata=Zc.prototype.onDashTimedMetadata,Zc.prototype.getStats=Zc.prototype.getStats,Zc.prototype.getServerSideCuePoints=Zc.prototype.getServerSideCuePoints,Zc.prototype.replaceServerSideAdTagParameters=Zc.prototype.replaceServerSideAdTagParameters,Zc.prototype.requestServerSideStream=Zc.prototype.requestServerSideStream,Zc.prototype.initServerSide=Zc.prototype.initServerSide,Zc.prototype.updateClientSideAdsRenderingSettings=Zc.prototype.updateClientSideAdsRenderingSettings,Zc.prototype.requestClientSideAds=Zc.prototype.requestClientSideAds,Zc.prototype.onAssetUnload=Zc.prototype.onAssetUnload,Zc.prototype.release=Zc.prototype.release,Zc.prototype.initClientSide=Zc.prototype.initClientSide,Zc.prototype.configure=Zc.prototype.configure,Zc.prototype.setLocale=Zc.prototype.setLocale,Zc.ADS_LOADED="ads-loaded",Zc.AD_STARTED="ad-started",Zc.AD_FIRST_QUARTILE="ad-first-quartile",Zc.AD_MIDPOINT="ad-midpoint",Zc.AD_THIRD_QUARTILE="ad-third-quartile",Zc.AD_COMPLETE="ad-complete",Zc.AD_STOPPED="ad-stopped",Zc.AD_SKIPPED="ad-skipped",Zc.AD_VOLUME_CHANGED="ad-volume-changed",Zc.AD_MUTED="ad-muted",Zc.AD_PAUSED="ad-paused",Zc.AD_RESUMED="ad-resumed",Zc.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Zc.CUEPOINTS_CHANGED="ad-cue-points-changed",Zc.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Zc.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Zc.AD_CLICKED="ad-clicked",Zc.AD_PROGRESS="ad-progress",Zc.AD_BUFFERING="ad-buffering",Zc.AD_IMPRESSION="ad-impression",Zc.AD_DURATION_CHANGED="ad-duration-changed",Zc.AD_CLOSED="ad-closed",Zc.AD_LOADED="ad-loaded",Zc.ALL_ADS_COMPLETED="all-ads-completed",Zc.AD_LINEAR_CHANGED="ad-linear-changed",Zc.AD_METADATA="ad-metadata",Zc.AD_RECOVERABLE_ERROR="ad-recoverable-error",Zc.AD_ERROR="ad-error",Zc.AD_BREAK_READY="ad-break-ready",Zc.AD_INTERACTION="ad-interaction",E_=function(){return new Zc};var x_="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),C_="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),O_=["loop","playbackRate"],P_=["pause","play"],M_={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},I_={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},j_={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},D_=[["getConfiguration","configure"]],R_=[["isTextTrackVisible","setTextTrackVisibility"]],L_="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),N_=["attach","attachCanvas","detach","load","unload"];wm=rl.prototype,wm.destroy=function(){return H_.delete(this),ll(this),B_&&ul(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.D=this.A=this.l=this.i=this.g=this.o=null,Promise.resolve()},wm.ia=function(){return this.h},wm.ie=function(){return this.L},wm.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Yb();var t=new chrome.cast.SessionRequest(this.G,[],null,this.M,null);t=new chrome.cast.ApiConfig(t,function(e){for(var t=a(H_),n=t.next();!n.done;n=t.next())sl(n.value,e)},function(e){for(var t=a(H_),n=t.next();!n.done;n=t.next()){n=n.value;var r=e;W("CastSender: receiver status",r),U_="available"==r,n.j.Yb()}},"origin_scoped"),chrome.cast.initialize(t,function(){W("CastSender: init")},function(e){B("CastSender: init error",e)}),U_&&this.j.U(F_),(t=B_)&&t.status!=chrome.cast.SessionStatus.STOPPED?(W("CastSender: re-using existing connection"),sl(this,t)):B_=null}else e.__onGCastApiAvailable!==fl&&(V_=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=fl)},wm.pe=function(e){this.o=e,this.h&&dl(this,{type:"appData",appData:this.o})},wm.cast=function(e){var t=this;return A(function(n){if(!t.m)throw new ke(1,8,8e3);if(!U_)throw new ke(1,8,8001);if(t.h)throw new ke(1,8,8002);return t.l=new Sn,chrome.cast.requestSession(function(n){return ol(t,e,n)},function(e){return al(t,e)}),f(n,t.l,0)})},wm.Ob=function(){if(this.h){if(ll(this),B_){ul(this);try{B_.stop(function(){},function(){})}catch(e){}B_=null}cl(this)}},wm.get=function(e,t){var n=this;if("video"==e){if(P_.includes(t))return function(){return n.bf.apply(n,[e,t].concat(s(x.apply(0,arguments))))}}else if("player"==e){if(j_[t]&&!this.get("player","isLive")())return function(){};if(L_.includes(t))return function(){return n.bf.apply(n,[e,t].concat(s(x.apply(0,arguments))))};if(N_.includes(t))return function(){return n.Eg.apply(n,[e,t].concat(s(x.apply(0,arguments))))};if(M_[t]||I_[t])return function(){return n.g[e][t]}}return this.g[e][t]},wm.set=function(e,t,n){this.g[e][t]=n,dl(this,{type:"set",targetName:e,property:t,value:n})},wm.bf=function(e,t){dl(this,{type:"call",targetName:e,methodName:t,args:x.apply(2,arguments)})},wm.Eg=function(e,t){var n=x.apply(2,arguments),r=new Sn,i=this.I.toString();this.I++,this.i[i]=r;try{dl(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i})}catch(e){r.reject(e)}return r};var F_=.02,U_=!1,B_=null,V_=null,H_=new Set;u(hl,jn),wm=hl.prototype,wm.destroy=function(e){return e&&this.g.Ob(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,jn.prototype.release.call(this),Promise.all(e)},wm.gg=function(){return this.l},wm.Xf=function(){return this.s},wm.yf=function(){return this.g.m&&U_},wm.ia=function(){return this.g.ia()},wm.ie=function(){return this.g.ie()},wm.cast=function(){var e,t=this;return A(function(n){return 1==n.g?(e=vl(t),f(n,t.g.cast(e),2)):t.h?f(n,t.h.ze(),0):n.return()})},wm.pe=function(e){this.g.pe(e)},wm.Sg=function(){il(this.g)},wm.Ob=function(){this.g.Ob()},wm.zf=function(e,t){t=void 0!==t&&t;var n=this;return A(function(r){if(1==r.g)return e==n.D&&t==n.A?r.return():(n.D=e,n.A=t,n.g.Ob(),f(r,n.g.destroy(),2));n.g=null,n.g=new rl(e,function(){return ml(n)},function(){return bl(n)},function(e,t){return Sl(n,e,t)},function(){return _l(n)},function(){return vl(n)},t),n.g.init(),h(r)})},I("shaka.cast.CastProxy",hl),hl.prototype.changeReceiverId=hl.prototype.zf,hl.prototype.forceDisconnect=hl.prototype.Ob,hl.prototype.suggestDisconnect=hl.prototype.Sg,hl.prototype.setAppData=hl.prototype.pe,hl.prototype.cast=hl.prototype.cast,hl.prototype.receiverName=hl.prototype.ie,hl.prototype.isCasting=hl.prototype.ia,hl.prototype.canCast=hl.prototype.yf,hl.prototype.getPlayer=hl.prototype.Xf,hl.prototype.getVideo=hl.prototype.gg,hl.prototype.destroy=hl.prototype.destroy,u(El,jn),wm=El.prototype,wm.isConnected=function(){return this.F},wm.mg=function(){return this.o},wm.Ng=function(e){this.i=e},wm.Cf=function(){this.i=null},wm.Og=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},wm.Mg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},wm.Lg=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},wm.destroy=function(){var e,t,n=this;return A(function(r){if(1==r.g)return n.j&&(n.j.release(),n.j=null),e=[],n.h&&(e.push(n.h.destroy()),n.h=null),n.G&&(n.G.stop(),n.G=null),n.g=null,n.I=null,n.D=null,n.F=!1,n.o=!0,n.l=null,n.s=null,jn.prototype.release.call(n),f(r,Promise.all(e),2);t=cast.receiver.CastReceiverManager.getInstance(),t.stop(),h(r)})},I("shaka.cast.CastReceiver",El),El.prototype.destroy=El.prototype.destroy,El.prototype.setContentArtist=El.prototype.Lg,El.prototype.setContentImage=El.prototype.Mg,El.prototype.setContentTitle=El.prototype.Og,El.prototype.clearContentMetadata=El.prototype.Cf,El.prototype.setContentMetadata=El.prototype.Ng,El.prototype.isIdle=El.prototype.mg,El.prototype.isConnected=El.prototype.isConnected;var W_=.5,K_=5,q_="IDLE",G_="PLAYING",z_="BUFFERING",Y_="PAUSED",X_=0,J_=1,$_=2,Q_=3,Z_=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),ew=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),tw=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),nw=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),rw=0,iw=1,ow=3,aw=4,sw="black green blue cyan red yellow magenta black".split(" "),uw="white green blue cyan red yellow magenta white_italics".split(" ");Ql.prototype.isVisible=function(){return this.l};var cw=0,lw=1,dw=2;ad.prototype.ja=function(){return this.g<this.h.length},ad.prototype.ga=function(){return this.g},ad.prototype.skip=function(e){if(this.g+e>this.h.length)throw new ke(2,2,3e3);this.g+=e};var fw=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),hw="black blue green cyan red magenta yellow white".split(" ");pd.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,gd(this),e=a(this.j.values());for(var t=e.next();!t.done;t=e.next())fd(t.value)},pd.prototype.extract=function(e,t){if(this.u){for(var n=a(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.u=!1}if(e=new lr(e,0),181===e.ab()&&49===e.jb()&&1195456820===e.J()&&3===e.ab()&&0!=(64&(n=e.ab())))for(n&=31,e.skip(1),r=0;r<n;r++){var i=e.ab(),o=(4&i)>>2,s=e.ab(),u=e.ab();o&&(i&=3,0===i||1===i?this.h.push({pts:t,type:i,ya:s,Ra:u,order:this.h.length}):(this.g.push({pts:t,type:i,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:u,order:this.g.length})))}},pd.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=a(this.h),r=n.next();!r.done;r=n.next())(r=yd(this,r.value))&&t.push(r);for(n=a(this.g),r=n.next();!r.done;r=n.next())od(this.i,r.value);for(n=a(this.i.i),r=n.next();!r.done;r=n.next())r=vd(this,r.value),t.push.apply(t,s(r));return this.i.i=[],this.h=[],this.g=[],t},I("shaka.cea.CeaDecoder",pd),Lm=function(){return new pd},_d.prototype.init=function(e){function t(e){(e=e.name)in vw&&(n.g=vw[e])}var n=this,r=[],i=[];if((new fr).box("moov",hr).box("mvex",hr).O("trex",function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.J(),t=t.J(),n.h=e,n.i=t}).box("trak",hr).O("tkhd",function(e){var t=e.reader;e=e.version,1==e?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4));var n=t.J();1==e?t.skip(8):t.skip(4),t.skip(4),t.skip(8),t.skip(2),t.skip(2),t.skip(2),t.skip(2),t.skip(36),t.jb(),t.jb(),t.jb(),t.jb(),r.push(n)}).box("mdia",hr).O("mdhd",function(e){e=ro(e.reader,e.version),i.push(e.timescale)}).box("minf",hr).box("stbl",hr).O("stsd",pr).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",gr).box("sinf",hr).box("frma",function(e){e=e.reader.J(),(e=mr(e))in vw&&(n.g=vw[e])}).parse(e,!0),!r.length||!i.length||r.length!=i.length)throw new ke(2,2,2010);this.g==pw&&F("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(e,t){n.j.set(e,i[t])})},_d.prototype.parse=function(e){var t=this;if(this.g==pw)return[];var n=[],r=this.h,i=this.i,o=0,a=[],s=null,u=9e4;return(new fr).box("moof",function(e){o=e.start,a=[],hr(e)}).box("traf",hr).O("trun",function(e){e=io(e.reader,e.version,e.flags),a.push(e)}).O("tfhd",function(e){e=to(e.reader,e.flags),r=e.Me||t.h,i=e.Gf||t.i,e=e.trackId,t.j.has(e)&&(u=t.j.get(e))}).O("tfdt",function(e){s=no(e.reader,e.version).baseMediaDecodeTime}).box("mdat",function(e){if(null===s)throw F("Unable to find base media decode time for CEA captions!"),new ke(2,2,2010);wd(t,e.reader,s,u,r,i,o-e.start-8,a,n)}).parse(e,!1),n},I("shaka.cea.Mp4CeaParser",_d);var pw=0,gw=1,yw=2,vw={avc1:gw,avc3:gw,hev1:yw,hvc1:yw,dvh1:yw,dvhe:yw};Rm["video/mp4"]=function(){return new _d},Td.prototype.init=function(){},Td.prototype.parse=function(e){var t=[];if(e=te(e),!vo(e))return t;e=(new go).parse(e).Ld(),e=a(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,6==n.type&&null!=n.time)for(var r=a(bd(n.data)),i=r.next();!i.done;i=r.next())t.push({packet:i.value,pts:n.time});return t},I("shaka.cea.TsCeaParser",Td),Rm["video/mp2t"]=function(){return new Td};var mw=1,bw=(new Map).set("com.widevine.alpha",function(e){var t=Pr(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=Pr(e.node,"urn:microsoft","laurl"))?e.getAttribute("licenseUrl")||"":""}).set("com.microsoft.playready",xd).set("com.microsoft.playready.recommendation",xd).set("com.microsoft.playready.software",xd).set("com.microsoft.playready.hardware",xd).set("org.w3.clearkey",function(e){var t=Pr(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=Pr(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""});Bd.prototype.ja=function(){return this.g.ja()};var _w=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];u(pf,va),wm=pf.prototype,wm.wc=function(){return this.h?this.h.timeline.length:0},wm.release=function(){va.prototype.release.call(this),this.h=null},wm.Ta=function(e){if(this.h){W(this.s+" Evicting at "+e);for(var t=0,n=this.h.timeline,r=0;r<n.length;r+=1){var i=n[r],o=i.end+this.i;if(i=i.start+this.i,!(o<=e))break;W("Evicting "+i+" - "+o),t+=1}0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,0===this.wc()&&this.release())}},wm.find=function(e){if(W("Find "+e),this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>this.o)return null;for(var n=t.length-1,r=0;r<t.length;r++){var i=t[r],o=i.start+this.i;if(i=i.end+this.i,r<n&&(i=t[r+1].start+this.i),e>=o&&e<i)return r+this.j}return null},wm.get=function(e){var t=this,n=e-this.j;if(0>n||n>=this.wc()||!this.h)return null;var r=this.g[n];if(!r){r=this.h.timeline[n];var i=e+this.h.Xb,o=this.h.Ae+r.Be;r=new Hi(this.i+r.start,this.i+r.end,function(){return t.h?vf(t.h.Xd,t.s,i,t.u,o,t.A):[]},0,null,this.D,this.i-this.h.bb,this.i,this.o),this.g[n]=r}return r},wm=mf.prototype,wm.release=function(){for(var e=a(this.g.concat(this.i,this.l,this.h)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.g=[],this.i=[],this.l=[],this.h=[],this.j=[]},wm.fg=function(){return this.j},wm.Kd=function(){return this.l.slice()},wm.Of=function(){return this.h},wm.Ie=function(e,t){var n,r,i,o,s,u,c,l,d,p,g,y,v,m,b,_,w,T,S,E,k,x,C,O,P,M,I,j,D,R,L=this;return A(function(A){switch(A.g){case 1:if(n=gb,bf(e),wf(e),_f(e),Tf(e),!t&&1==e.length){r=e[0],L.g=r.audioStreams,L.i=r.videoStreams,L.l=r.textStreams,L.h=r.imageStreams,A.B(2);break}for(i=-1,o=0;o<e.length;o++)s=e[o],L.m.has(s.id)||(L.m.add(s.id),-1==i&&(i=o));if(-1==i)return A.return();for(u=e.map(function(e){return e.audioStreams}),c=e.map(function(e){return e.videoStreams}),l=e.map(function(e){return e.textStreams}),d=e.map(function(e){return e.imageStreams}),p=a(l),g=p.next();!g.done;g=p.next())y=g.value,y.push(Hf(n.fa));for(v=a(d),m=v.next();!m.done;m=v.next())b=m.value,b.push(Hf(n.ic));return f(A,Ef(L.g,u,i,Of,Mf),3);case 3:return f(A,Ef(L.i,c,i,Of,Mf),4);case 4:return f(A,Ef(L.l,l,i,Of,Mf),5);case 5:return f(A,Ef(L.h,d,i,Of,Mf),2);case 2:if(_=0,w=[],L.i.length&&L.g.length)for(C=a(L.g),O=C.next();!O.done;O=C.next())for(P=O.value,M=a(L.i),I=M.next();!I.done;I=M.next())j=I.value,D=ki(P.drmInfos,j.drmInfos),P.drmInfos.length&&j.drmInfos.length&&!D.length?V("Incompatible DRM in audio & video, skipping variant creation.",P,j):(R=_++,w.push({id:R,language:P.language,disabledUntilTime:0,primary:P.primary,audio:P,video:j,label:j.label,bandwidth:(P.bandwidth||0)+(j.bandwidth||0),drmInfos:D,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(T=L.i.concat(L.g),S=a(T),E=S.next();!E.done;E=S.next())k=E.value,x=_++,w.push({id:x,language:k.language,disabledUntilTime:0,primary:k.primary,audio:k.type==n.ob?k:null,video:k.type==n.wa?k:null,bandwidth:k.bandwidth||0,drmInfos:k.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});L.j=w,h(A)}})},I("shaka.util.PeriodCombiner",mf),mf.prototype.combinePeriods=mf.prototype.Ie,mf.prototype.getImageStreams=mf.prototype.Of,mf.prototype.getTextStreams=mf.prototype.Kd,mf.prototype.getVariants=mf.prototype.fg;var ww=1,Tw=0,Sw=-1,Ew=new Map;wm=qf.prototype,wm.configure=function(e){this.g=e},wm.start=function(e,t){var n,r=this;return A(function(i){if(1==i.g)return r.s=t.isLowLatencyMode(),r.o=[e],r.h=t,f(i,Gf(r),2);if(n=i.h,r.h&&th(r,n),!r.h)throw new ke(2,7,7001);return i.return(r.i)})},wm.stop=function(){for(var e=a(Object.values(this.l)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.o=[],this.i=null,this.l={},this.j=null,null!=this.F&&(this.F.stop(),this.F=null),this.u.destroy()},wm.update=function(){var e,t=this;return A(function(n){return 1==n.g?(p(n,2),f(n,Gf(t),4)):2!=n.g?y(n,0):(e=v(n),t.h&&e?(t.h.onError(e),void h(n)):n.return())})},wm.onExpirationUpdated=function(){},I("shaka.dash.DashParser",qf),Jb.mpd=function(){return new qf},Xb["application/dash+xml"]=function(){return new qf},Xb["video/vnd.mpeg.dash.mpd"]=function(){return new qf},I("shaka.dependencies",lh),lh.has=function(e){return Aw.has(e)},lh.add=function(e,t){if(!kw[e])throw Error(e+" is not supported");Aw.set(e,function(){return t})};var kw={muxjs:"muxjs",ISOBoxer:"ISOBoxer"};lh.Allowed=kw;var Aw=new Map([["muxjs",function(){return e.muxjs}],["ISOBoxer",function(){return e.ISOBoxer}]]),xw=1,Cw=(new Map).set("com.microsoft.playready",fh).set("com.microsoft.playready.recommendation",fh).set("com.microsoft.playready.software",fh).set("com.microsoft.playready.hardware",fh);ph.prototype.initSegment=function(){for(var e=new Uint8Array([]),t=a(this.g),n=t.next();!n.done;n=t.next()){var r=e;e=n.value,n=wh;var i=e.id+1,o=e.stream.width||0,u=e.stream.height||0;"audio"==e.type&&(u=o=0);var c=e.duration*e.timescale,l=Math.floor(c/(Pw+1));switch(c=Math.floor(c%(Pw+1)),i=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(s(bh(i,4)),[0,0,0,0],s(bh(l,4)),s(bh(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],s(bh(o,2)),[0,0],s(bh(u,2)),[0,0])),i=wh("tkhd",i),o=wh,l=e.duration*e.timescale,u=Math.floor(l/(Pw+1)),l=Math.floor(l%(Pw+1)),c=e.stream.language,c=c.charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(s(bh(e.timescale,4)),s(bh(u,4)),s(bh(l,4)),s(bh(c,2)),[0,0])),u=wh("mdhd",u),l=e,c=new Uint8Array([]),l.type){case"video":c=Iw;break;case"audio":c=jw}l=wh("hdlr",c);e:{switch(e.type){case"video":e=wh("minf",wh("vmhd",Fw),Ww,gh(e));break e;case"audio":e=wh("minf",wh("smhd",Uw),Ww,gh(e));break e}e=new Uint8Array([])}e=o("mdia",u,l,e),n=n("trak",i,e),e=Ar(r,n)}for(n=this.g[0],t=wh,i=n.duration*n.timescale,r=Math.floor(i/(Pw+1)),i=Math.floor(i%(Pw+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(s(bh(n.timescale,4)),s(bh(r,4)),s(bh(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),r=wh("mvhd",r),o=new Uint8Array([]),i=a(this.g),u=i.next();!u.done;u=i.next())u=new Uint8Array([0,0,0,0].concat(s(bh(u.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),u=wh("trex",u),o=Ar(o,u);if(i=wh("mvex",o),o=new Uint8Array([]),n.encrypted)for(n=a(n.stream.drmInfos),u=n.next();!u.done;u=n.next())if(u=u.value,u.initData)for(u=a(u.initData),l=u.next();!l.done;l=u.next())o=Ar(o,l.value.initData);return t=t("moov",r,e,i,o),r=new Uint8Array(Vw.byteLength+t.byteLength),r.set(Vw),r.set(t,Vw.byteLength),r};var Ow=!1,Pw=Math.pow(2,32)-1,Mw={},Iw=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),jw=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Dw=new Uint8Array([0,0,0,0,0,0,0,0]),Rw=new Uint8Array([0,0,0,0,0,0,0,0]),Lw=new Uint8Array([0,0,0,0,0,0,0,0]),Nw=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Fw=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Uw=new Uint8Array([0,0,0,0,0,0,0,0]),Bw=new Uint8Array([0,0,0,0,0,0,0,1]),Vw=new Uint8Array([]),Hw=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Ww=new Uint8Array([]);wm=Th.prototype,wm.configure=function(e){this.g=e},wm.start=function(e,t){var n=this;return A(function(r){if(1==r.g)return n.l=[e],n.h=t,f(r,Eh(n),2);if(!n.h)throw new ke(2,7,7001);return r.return(n.j)})},wm.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.o&&(this.o.stop(),this.o=null),this.m.clear(),this.u.destroy()},wm.update=function(){var e,t=this;return A(function(n){return 1==n.g?(p(n,2),f(n,Eh(t),4)):2!=n.g?y(n,0):(e=v(n),t.h&&e?(t.h.onError(e),void h(n)):n.return())})},wm.onExpirationUpdated=function(){},I("shaka.mss.MssParser",Th);var Kw="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),qw={CAPT:"main",SUBT:"alternate",DESC:"main"};Jb.ism=function(){return new Th},Xb["application/vnd.ms-sstr+xml"]=function(){return new Th},I("shaka.net.HttpFetchPlugin",Mh),Mh.isSupported=Rh,Mh.parse=Ih;var Gw=e.fetch,zw=e.AbortController,Yw=e.ReadableStream,Xw=e.Headers;Rh()&&(Un("http",Ih,2,!0),Un("https",Ih,2,!0),Un("blob",Ih,2,!0)),I("shaka.net.HttpXHRPlugin",Lh),Lh.parse=Nh;var Jw=e.XMLHttpRequest;Un("http",Nh,1,!0),Un("https",Nh,1,!0),Un("blob",Nh,1,!0),Hh.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},Kh.prototype.destroy=function(){return this.i.destroy()},Jh.prototype.abort=function(){var e=this;return A(function(t){if(1==t.g){try{e.i.abort()}catch(e){}return p(t,2),f(t,e.g,4)}if(2!=t.g)return y(t,0);v(t),h(t)})},Jh.prototype.store=function(){return this.h},Jh.prototype.promise=function(){return this.g},Qh.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},wm=tp.prototype,wm.destroy=function(){return this.h.destroy()},wm.hasFixedKeySpace=function(){return!0},wm.addSegments=function(){return rp(this.i)},wm.removeSegments=function(e,t){return ip(this,this.i,e,t)},wm.getSegments=function(e){var t,n=this;return A(function(r){return 1==r.g?f(r,op(n,n.i,e),2):(t=r.h,r.return(t.map(function(e){return n.Je(e)})))})},wm.addManifests=function(){return rp(this.g)},wm.updateManifest=function(){return Promise.reject(new ke(2,9,9016,"Cannot modify values in "+this.g))},wm.updateManifestExpiration=function(e,t){var n=Zh(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},wm.removeManifests=function(e,t){return ip(this,this.g,e,t)},wm.getManifests=function(e){var t,n=this;return A(function(r){return 1==r.g?f(r,op(n,n.g,e),2):(t=r.h,r.return(Promise.all(t.map(function(e){return n.oc(e)}))))})},wm.getAllManifests=function(){var e,t,n=this;return A(function(r){return 1==r.g?(e=ep(n.h,n.g,"readonly"),t=new Map,f(r,$h(e,function(e,r){var i;return A(function(o){if(1==o.g)return f(o,n.oc(r),2);i=o.h,t.set(e,i),h(o)})}),2)):3!=r.g?f(r,e.promise(),3):r.return(t)})},wm.Je=function(e){return e},wm.oc=function(e){return Promise.resolve(e)},wm.add=function(e,t){var n,r,i,o,s,u,c,l=this;return A(function(d){if(1==d.g){for(n=Zh(l.h,e),r=n.store(),i=[],o={},s=a(t),u=s.next();!u.done;o={Nc:o.Nc},u=s.next())c=u.value,o.Nc=r.add(c),o.Nc.onsuccess=function(e){return function(){i.push(e.Nc.result)}}(o);return f(d,n.promise(),2)}return d.return(i)})},ap.prototype.destroy=function(){return this.g.destroy()},ap.prototype.getAll=function(){var e,t,n=this;return A(function(r){return 1==r.g?(e=ep(n.g,"session-ids","readonly"),t=[],f(r,$h(e,function(e,n){t.push(n)}),2)):3!=r.g?f(r,e.promise(),3):r.return(t)})},ap.prototype.add=function(e){var t=Zh(this.g,"session-ids"),n=t.store();e=a(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},ap.prototype.remove=function(e){var t,n=this;return A(function(r){return 1==r.g?(t=Zh(n.g,"session-ids"),f(r,$h(t,function(t,n,r){e.includes(n.sessionId)&&r.delete()}),2)):f(r,t.promise(),0)})},sp.prototype.destroy=function(){for(var e=[],t=a(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},sp.prototype.init=function(){var e=this;$w.forEach(function(t,n){(t=t())?e.g.set(n,t):H("Skipping "+n+" as it is not supported on this platform")});for(var t=[],n=a(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},I("shaka.offline.StorageMuxer",sp),sp.unregister=function(e){$w.delete(e)},sp.register=pp,sp.prototype.destroy=sp.prototype.destroy;var $w=new Map;u(gp,tp),gp.prototype.updateManifestExpiration=function(e,t){var n,r,i,o=this;return A(function(a){return n=Zh(o.h,o.g),r=n.store(),i=new Sn,r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new ke(2,9,9012,"Could not find values for "+e))},f(a,Promise.all([n.promise(),i]),0)})},gp.prototype.oc=function(e){var t,n,r,i,o,a;return A(function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime,o=yp(e.periods[n],i),t.push(o);return f(s,Sf(t),2)}return a=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:a,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})},gp.prototype.Je=function(e){return{data:e.data}},u(_p,tp),_p.prototype.oc=function(e){var t,n,r,i,o,s;return A(function(u){if(1==u.g){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime;for(var c=e.periods[n],l=[],d=a(c.streams),h=d.next();!h.done;h=d.next())h=h.value,0!=h.variantIds.length&&l.push(wp(h,c.startTime,c.startTime+i));o=l,t.push(o)}return f(u,Sf(t),2)}return s=u.h,u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})},u(Tp,tp),wm=Tp.prototype,wm.hasFixedKeySpace=function(){return!1},wm.addSegments=function(e){return this.add(this.i,e)},wm.addManifests=function(e){return this.add(this.g,e)},wm.updateManifest=function(e,t){return np(this,e,t)},wm.oc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},wm=Sp.prototype,wm.init=function(){var t=this,n=new Sn,r=!1,i=new it(function(){r=!0,n.reject(new ke(2,9,9017))});i.U(5);var o=e.indexedDB.open("shaka_offline_db",5);return o.onsuccess=function(){if(!r){var e=o.result;t.l=e;var a=e.objectStoreNames;a.contains("manifest")&&a.contains("segment")?(W("Mounting v1 idb storage cell"),a=new gp(e,"segment","manifest")):a=null,t.g=a,a=e.objectStoreNames,a.contains("manifest-v2")&&a.contains("segment-v2")?(W("Mounting v2 idb storage cell"),a=new _p(e,"segment-v2","manifest-v2")):a=null,t.h=a,a=e.objectStoreNames,a.contains("manifest-v3")&&a.contains("segment-v3")?(W("Mounting v3 idb storage cell"),a=new _p(e,"segment-v3","manifest-v3")):a=null,t.i=a,a=e.objectStoreNames,a.contains("manifest-v5")&&a.contains("segment-v5")?(W("Mounting v5 idb storage cell"),a=new Tp(e,"segment-v5","manifest-v5")):a=null,t.j=a,e.objectStoreNames.contains("session-ids")?(W("Mounting session ID idb storage cell"),e=new ap(e)):e=null,t.m=e,i.stop(),n.resolve()}},o.onupgradeneeded=function(){for(var e=o.result,t=a(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},o.onerror=function(e){r||(n.reject(new ke(2,9,9001,o.error)),i.stop(),e.preventDefault())},n},wm.destroy=function(){var e=this;return A(function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return f(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return f(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return f(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return f(t,e.j.destroy(),8);case 8:if(!e.m){t.B(10);break}return f(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),h(t)}})},wm.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},wm.getEmeSessionCell=function(){return this.m},wm.erase=function(){var e=this;return A(function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return f(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return f(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return f(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return f(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),f(t,Ep(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,f(t,e.init(),0)}})},pp("idb",function(){return pt("CrKey")||ut()||!e.indexedDB?null:new Sp}),kp.prototype.Aa=function(){return this.i},kp.prototype.na=function(){return this.h},kp.prototype.key=function(){return this.l},kp.prototype.toString=function(){return this.j},wm=jp.prototype,wm.configure=function(){},wm.start=function(e,t){var n,r,i,o,a,s,u,c=this;return A(function(l){switch(l.g){case 1:if(n=Ap(e),c.g=n,null==n||"manifest"!=n.g)throw new ke(2,1,9004,e);return r=new sp,g(l),f(l,r.init(),4);case 4:return f(l,lp(r,n.Aa(),n.na()),5);case 5:return i=l.h,f(l,i.getManifests([n.key()]),6);case 6:return o=l.h,a=o[0],s=new xp(n.Aa(),n.na()),u=Cp(s,a),t.makeTextStreamsForClosedCaptions(u),l.return(u);case 2:return m(l),f(l,r.destroy(),7);case 7:b(l,0)}})},wm.stop=function(){return Promise.resolve()},wm.update=function(){},wm.onExpirationUpdated=function(e,t){var n,r,i,o,a,s,u,c,l=this;return A(function(d){switch(d.g){case 1:return n=l.g,r=new sp,p(d,2,3),f(d,r.init(),5);case 5:return f(d,lp(r,n.Aa(),n.na()),6);case 6:return i=d.h,f(d,i.getManifests([n.key()]),7);case 7:if(o=d.h,a=o[0],s=a.sessionIds.includes(e),u=void 0==a.expiration||a.expiration>t,!s||!u){d.B(3);break}return W("Updating expiration for stored content"),f(d,i.updateManifestExpiration(n.key(),t),3);case 3:return m(d),f(d,r.destroy(),10);case 10:b(d,0);break;case 2:c=v(d),B("There was an error updating",n,c),d.B(3)}})},Xb["application/x-offline-manifest"]=function(){return new jp},I("shaka.offline.OfflineScheme",Dp),Dp.plugin=Rp,Un("offline",Rp),wm=zp.prototype,wm.destroy=function(){return this.l.destroy()},wm.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=tu(e,t)),lu(this.h,e)},wm.getConfiguration=function(){var e=cu();return lu(e,this.h,cu()),e},wm.ub=function(){return this.g},wm.store=function(e,t,n){var r=this,i=this.getConfiguration(),o=new Kh(this.g);return this.j.push(o),t=Xp(this,e,t||{},function(){var t;return A(function(o){return 1==o.g?f(o,Di(e,r.g,i.manifest.retryParameters,n||null),2):(t=o.h,o.return(t()))})},i,o),t=new En(t,function(){return Gh(o)}),t.finally(function(){se(r.j,o)}),mg(this,t)},wm.remove=function(e){return vg(this,ig(this,e))},wm.Fg=function(){return vg(this,ug(this))},wm.list=function(){return vg(this,cg())},I("shaka.offline.Storage",zp),zp.deleteAll=function(){var e;return A(function(t){return 1==t.g?(e=new sp,g(t),f(t,hp(e),2)):5!=t.g?(m(t),f(t,e.destroy(),5)):b(t,0)})},zp.prototype.list=zp.prototype.list,zp.prototype.removeEmeSessions=zp.prototype.Fg,zp.prototype.remove=zp.prototype.remove,zp.prototype.store=zp.prototype.store,zp.prototype.getNetworkingEngine=zp.prototype.ub,zp.prototype.getConfiguration=zp.prototype.getConfiguration,zp.prototype.configure=zp.prototype.configure,zp.prototype.destroy=zp.prototype.destroy,zp.support=Yp;var Qw=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");S_.offline=Yp,I("shaka.polyfill",Sg),Sg.register=Eg,Sg.installAll=function(){for(var e=a(Zw),t=e.next();!t.done;t=e.next()){t=t.value;try{t.xf()}catch(e){F("Error installing polyfill!",e)}}};var Zw=[];kg.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Mn("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},Sm.Object.defineProperties(kg.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Sg.AbortController=kg,kg.install=Ag,u(xg,jn),Sm.Object.defineProperties(xg.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Eg(Ag),Sg.Aria=Cg,Cg.install=Og,Eg(Og),Sg.EncryptionScheme=Mg,Mg.install=Ig,Eg(Ig,-2),Sg.Fullscreen=jg,jg.install=Dg,Eg(Dg),Sg.MediaCapabilities=Lg,Lg.install=Ng;var eT=null;Lg.originalMcap=eT;var tT={};Lg.memoizedMediaKeySystemAccessRequests_=tT,Eg(Ng,-1),Sg.MediaSource=Ug,Ug.install=Bg,Eg(Bg),Sg.Orientation=zg,zg.install=Yg,u($g,jn),$g.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},$g.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Eg(Yg);var nT,rT,iT,oT,aT,sT;Sg.PatchedMediaKeysApple=Qg,Qg.uninstall=function(){nT&&(H("Un-installing Apple-prefixed EME"),nT=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",rT),HTMLMediaElement.prototype.setMediaKeys=iT,e.MediaKeys=oT,e.MediaKeySystemAccess=aT,navigator.requestMediaKeySystemAccess=sT,rT=sT=iT=aT=oT=null,e.shakaMediaKeysPolyfill=!1)},Qg.install=function(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&((void 0===t?0:t)&&(nT=!0,rT=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),iT=HTMLMediaElement.prototype.setMediaKeys,oT=e.MediaKeys,aT=e.MediaKeySystemAccess,sT=navigator.requestMediaKeySystemAccess),H("Using Apple-prefixed EME"),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ey,e.MediaKeys=ry,e.MediaKeySystemAccess=ny,navigator.requestMediaKeySystemAccess=Zg,e.shakaMediaKeysPolyfill=!0)},ny.prototype.createMediaKeys=function(){W("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var e=new ry(this.keySystem);return Promise.resolve(e)},ny.prototype.getConfiguration=function(){return W("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration"),this.g},ry.prototype.createSession=function(e){if(W("PatchedMediaKeysApple.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new oy(this.h,e)},ry.prototype.setServerCertificate=function(){return W("PatchedMediaKeysApple.MediaKeys.setServerCertificate"),Promise.resolve(!1)},ry.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},u(oy,jn),wm=oy.prototype,wm.generateRequest=function(e,t){var n=this;W("PatchedMediaKeysApple.MediaKeySession.generateRequest"),this.h=new Sn;try{var r=this.l.createSession("video/mp4",te(t));this.i=r,this.sessionId=r.sessionId||"",this.j.C(this.i,"webkitkeymessage",function(e){W("PatchedMediaKeysApple.onWebkitKeyMessage_",e),n.h&&(n.h.resolve(),n.h=null),e=(new Map).set("messageType",void 0==n.keyStatuses.wb()?"license-request":"license-renewal").set("message",ee(e.message)),e=new Mn("message",e),n.dispatchEvent(e)}),this.j.C(r,"webkitkeyadded",function(e){W("PatchedMediaKeysApple.onWebkitKeyAdded_",e),n.g&&(ay(n,"usable"),n.g.resolve(),n.g=null)}),this.j.C(r,"webkitkeyerror",function(e){if(W("PatchedMediaKeysApple.onWebkitKeyError_",e),e=Error("EME PatchedMediaKeysApple key error"),e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ay(n,"output-not-allowed");break;default:ay(n,"internal-error")}}),ay(this,"status-pending")}catch(e){this.h.reject(e)}return this.h},wm.load=function(){return W("PatchedMediaKeysApple.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},wm.update=function(e){W("PatchedMediaKeysApple.MediaKeySession.update"),this.g=new Sn;try{this.i.update(te(e))}catch(e){this.g.reject(e)}return this.g},wm.close=function(){W("PatchedMediaKeysApple.MediaKeySession.close");try{this.i.close(),this.closed.resolve(),this.j.kb()}catch(e){this.closed.reject(e)}return this.closed},wm.remove=function(){return W("PatchedMediaKeysApple.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},wm=sy.prototype,wm.wb=function(){return this.g},wm.forEach=function(e){this.g&&e(this.g,zb.value())},wm.get=function(e){if(this.has(e))return this.g},wm.has=function(e){var t=zb.value();return!(!this.g||!Q(e,t))},wm.entries=function(){},wm.keys=function(){},wm.values=function(){},Sg.PatchedMediaKeysNop=uy,uy.install=cy,fy.prototype.createSession=function(){},fy.prototype.setServerCertificate=function(){},fy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},hy.prototype.getConfiguration=function(){},hy.prototype.createMediaKeys=function(){},Eg(cy,-10),Sg.PatchedMediaKeysWebkit=py,py.install=gy,by.prototype.createMediaKeys=function(){W("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var e=new _y(this.g);return Promise.resolve(e)},by.prototype.getConfiguration=function(){return W("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration"),this.h},_y.prototype.createSession=function(e){if(W("PatchedMediaKeysWebkit.MediaKeys.createSession"),"temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Sy(t,this.l,e),this.i.push(e),e},_y.prototype.setServerCertificate=function(){return W("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate"),Promise.resolve(!1)},_y.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},u(Sy,jn),wm=Sy.prototype,wm.handleError=function(e){W("PatchedMediaKeysWebkit.MediaKeySession.handleError",e);var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ay(this,"output-restricted"):1==t?Ay(this,"expired"):Ay(this,"internal-error"))},wm.generateRequest=function(e,t){return W("PatchedMediaKeysWebkit.MediaKeySession.generateRequest"),Ey(this,t,null)},wm.load=function(e){return W("PatchedMediaKeysWebkit.MediaKeySession.load"),"persistent-license"==this.l?Ey(this,null,e):Promise.reject(Error("Not a persistent session."))},wm.update=function(e){W("PatchedMediaKeysWebkit.MediaKeySession.update",e);var t=new Sn;return ky(this,t,e),t},wm.close=function(){if(W("PatchedMediaKeysWebkit.MediaKeySession.close"),"persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=yy("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},wm.remove=function(){return W("PatchedMediaKeysWebkit.MediaKeySession.remove"),"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},wm=xy.prototype,wm.wb=function(){return this.g},wm.forEach=function(e){this.g&&e(this.g,zb.value())},wm.get=function(e){if(this.has(e))return this.g},wm.has=function(e){var t=zb.value();return!(!this.g||!Q(e,t))},wm.entries=function(){},wm.keys=function(){},wm.values=function(){};var uT="";Eg(gy),Sg.PiPWebkit=Cy,Cy.install=Oy,Eg(Oy),Sg.RandomUUID=Ry,Ry.install=Ly,Eg(Ly),Sg.StorageEstimate=Fy,Fy.install=Uy,Eg(Uy),Sg.Symbol=Vy,Vy.install=Hy,Eg(Hy),Sg.VideoPlayPromise=Ky,Ky.install=qy,Eg(qy),Sg.VideoPlaybackQuality=Gy,Gy.install=zy,Eg(zy),Sg.VTTCue=Xy,Xy.install=Jy,Eg(Jy),Zy.prototype.parseInit=function(){},Zy.prototype.setSequenceMode=function(){},Zy.prototype.setManifestType=function(){},Zy.prototype.parseMedia=function(e,t){var n=null,r=[];e=or(e).split(/\r?\n/),e=a(e);for(var i=e.next();!i.done;i=e.next()){var o=i.value;o&&!/^\s+$/.test(o)&&((i=cT.exec(o))?(o=lT.exec(i[1]),o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",",".")),i=new le(o,t.segmentEnd?t.segmentEnd:o+2,i[2]),n&&(n.endTime=o,r.push(n)),n=i):V("LrcTextParser encountered an unknown line.",o))}return n&&r.push(n),r},I("shaka.text.LrcTextParser",Zy),Zy.prototype.parseMedia=Zy.prototype.parseMedia,Zy.prototype.setManifestType=Zy.prototype.setManifestType,Zy.prototype.setSequenceMode=Zy.prototype.setSequenceMode,Zy.prototype.parseInit=Zy.prototype.parseInit;var cT=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,lT=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;bb["application/x-subtitle-lrc"]=function(){return new Zy},ev.prototype.parseInit=function(){},ev.prototype.setSequenceMode=function(){},ev.prototype.setManifestType=function(){},ev.prototype.parseMedia=function(e,t){var n=or(e);if(e=[],""==n)return e;var r=Yr(n,"tt");if(!r)throw new ke(2,2,2005,"Failed to parse TTML.");if(!(n=r.getElementsByTagName("body")[0]))return[];var i=Rr(r,ST,"frameRate"),o=Rr(r,ST,"subFrameRate"),s=Rr(r,ST,"frameRateMultiplier"),u=Rr(r,ST,"tickRate"),c=Rr(r,ST,"cellResolution"),l=r.getAttribute("xml:space")||"default",d=Rr(r,ET,"extent");if("default"!=l&&"preserve"!=l)throw new ke(2,2,2005,"Invalid xml:space value: "+l);l="default"==l,i=new hv(i,o,s,u),c=c&&(c=/^(\d+) (\d+)$/.exec(c))?{Df:parseInt(c[1],10),rows:parseInt(c[2],10)}:null,o=(o=r.getElementsByTagName("metadata")[0])?Ir(o):[],s=Array.from(r.getElementsByTagName("style")),r=Array.from(r.getElementsByTagName("region")),u=[];for(var f=a(r),h=f.next();!h.done;h=f.next()){var p=h.value;h=new fe;var g=p.getAttribute("xml:id");if(g){h.id=g;var y=null;d&&(y=dT.exec(d)||pT.exec(d)),g=y?Number(y[1]):null,y=y?Number(y[2]):null;var v,m;(v=ov(p,s,"extent"))&&null!=(v=(m=dT.exec(v))||pT.exec(v))&&(h.width=Number(v[1]),h.height=Number(v[2]),m||(null!=g&&(h.width=100*h.width/g),null!=y&&(h.height=100*h.height/y)),h.l=m||null!=g?Qm:0,h.i=m||null!=y?Qm:0),(p=ov(p,s,"origin"))&&null!=(v=(m=dT.exec(p))||pT.exec(p))&&(h.g=Number(v[1]),h.h=Number(v[2]),m||(null!=y&&(h.h=100*h.h/y),null!=g&&(h.g=100*h.g/g)),h.j=m||null!=g?Qm:0)}else V("TtmlTextParser parser encountered a region with no id. Region will be ignored."),h=null;h&&u.push(h)}if(Mr(n,"p").length)throw new ke(2,2,2001,"<p> can only be inside <div> in TTML");for(d=a(Mr(n,"div")),f=d.next();!f.done;f=d.next())if(Mr(f.value,"span").length)throw new ke(2,2,2001,"<span> can only be inside <p> in TTML");return(t=tv(n,t,i,o,s,r,u,l,c,null,!1))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},I("shaka.text.TtmlTextParser",ev),ev.prototype.parseMedia=ev.prototype.parseMedia,ev.prototype.setManifestType=ev.prototype.setManifestType,ev.prototype.setSequenceMode=ev.prototype.setSequenceMode,ev.prototype.parseInit=ev.prototype.parseInit;var dT=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,fT=/^(\d{1,2}(?:\.\d+)?|100)%$/,hT=/^(\d+px|\d+em|\d*\.?\d+c)$/,pT=/^(\d+)px (\d+)px$/,gT=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,yT=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,vT=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,mT=/^(\d*(?:\.\d*)?)f$/,bT=/^(\d*(?:\.\d*)?)t$/,_T=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),wT={left:qm,center:"center",right:"end",start:qm,end:"end"},TT={left:"line-left",center:"center",right:"line-right"},ST=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],ET=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],kT=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];bb["application/ttml+xml"]=function(){return new ev},pv.prototype.parseInit=function(e){var t=!1;if((new fr).box("moov",hr).box("trak",hr).box("mdia",hr).box("minf",hr).box("stbl",hr).O("stsd",pr).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new ke(2,2,2007)},pv.prototype.setSequenceMode=function(){},pv.prototype.setManifestType=function(){},pv.prototype.parseMedia=function(e,t){var n=this,r=!1,i=[];if((new fr).box("mdat",yr(function(e){r=!0,i=i.concat(n.g.parseMedia(e,t))})).parse(e,!1),!r)throw new ke(2,2,2007);return i},I("shaka.text.Mp4TtmlParser",pv),pv.prototype.parseMedia=pv.prototype.parseMedia,pv.prototype.setManifestType=pv.prototype.setManifestType,pv.prototype.setSequenceMode=pv.prototype.setSequenceMode,pv.prototype.parseInit=pv.prototype.parseInit,bb['application/mp4; codecs="stpp"']=function(){return new pv},bb['application/mp4; codecs="stpp.ttml"']=function(){return new pv},bb['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new pv},bb['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new pv},bv.prototype.parseInit=function(){},bv.prototype.setSequenceMode=function(e){this.h=e},bv.prototype.setManifestType=function(e){this.g=e},bv.prototype.parseMedia=function(e,t){e=or(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new ke(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.h){var r=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=n[0].match(/MPEGTS:(\d+)/m);if(r&&i){if(null==(e=Av(new gv(r[1]))))throw new ke(2,2,2e3);for(i=Number(i[1]),r=t.segmentStart-t.periodStart;95443.7176888889<=r;)r-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}}else n[0].includes("X-TIMESTAMP-MAP")&&"HLS"==this.g&&(e=t.segmentStart);for(t=[],i=a(n[0].split("\n")),r=i.next();!r.done;r=i.next())if(r=r.value,/^Region:/.test(r)){r=new gv(r);var o=new fe;mv(r),yv(r);for(var s=mv(r);s;){var u;e:{var c=o,l=s;if(u=/^id=(.*)$/.exec(l))c.id=u[1];else if(u=/^width=(\d{1,2}|100)%$/.exec(l))c.width=Number(u[1]);else if(u=/^lines=(\d+)$/.exec(l))c.height=Number(u[1]),c.i=2;else if(u=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))c.m=Number(u[1]),c.o=Number(u[2]);else if(u=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))c.g=Number(u[1]),c.h=Number(u[2]);else{if(!/^scroll=up$/.exec(l)){u=!1;break e}c.s="up"}u=!0}u||V("VTT parser encountered an invalid VTTRegion setting: ",s," The setting will be ignored."),yv(r),s=mv(r)}t.push(o)}for(i=new Map,_v(i),r=[],n=a(n.slice(1)),o=n.next();!o.done;o=n.next()){if(o=o.value.split("\n"),(1!=o.length||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&"STYLE"==o[0]){for(s=[],u=-1,c=1;c<o.length;c++)o[c].includes("::cue")&&(s.push([]),u=s.length-1),-1!=u&&(s[u].push(o[c]),o[c].includes("}")&&(u=-1));for(s=a(s),u=s.next();!u.done;u=s.next()){l=u.value,u="global",(c=l[0].match(/\((.*)\)/))&&(u=c.pop()),c=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(c=l[1].split(";")),(l=i.get(u))||(l=new le(0,0,""));for(var d=!1,f=0;f<c.length;f++){var h=/^\s*([^:]+):\s*(.*)/.exec(c[f]);if(h){var p=h[2].trim().replace(";","");switch(h[1].trim()){case"background-color":case"background":d=!0,l.backgroundColor=p;break;case"color":d=!0,l.l=p;break;case"font-family":d=!0,l.m=p;break;case"font-size":d=!0,l.A=p;break;case"font-weight":(700<=parseInt(p,10)||"bold"==p)&&(d=!0,l.u=700);break;case"font-style":switch(p){case"normal":d=!0,l.o=Jm;break;case"italic":d=!0,l.o="italic";break;case"oblique":d=!0,l.o="oblique"}break;case"opacity":d=!0,l.D=parseFloat(p);break;case"text-shadow":d=!0,l.K=p;break;case"white-space":d=!0,l.M="noWrap"!=p;break;default:V("VTT parser encountered an unsupported style: ",h)}}}d&&i.set(u,l)}}if(d=e,1==o.length&&!o[0]||/^NOTE($|[ \t])/.test(o[0])||"STYLE"==o[0]||"REGION"==o[0])o=null;else if(s=null,o[0].includes("--\x3e")||(s=o[0],o.splice(0,1)),u=new gv(o[0]),c=Av(u),f=vv(u,/[ \t]+--\x3e[ \t]+/g),l=Av(u),null==c||null==f||null==l)F("Failed to parse VTT time code. Cue skipped:",s,o),o=null;else{for(c+=d,l+=d,o=o.slice(1).join("\n").trim(),i.has("global")?(d=i.get("global").clone(),d.startTime=c,d.endTime=l,d.T=""):d=new le(c,l,""),yv(u),c=mv(u);c;)Ev(d,c,t)||V("VTT parser encountered an invalid VTT setting: ",c," The setting will be ignored."),yv(u),c=mv(u);wv(o,d,i),null!=s&&(d.id=s),o=d}o&&r.push(o)}return r},I("shaka.text.VttTextParser",bv),bv.prototype.parseMedia=bv.prototype.parseMedia,bv.prototype.setManifestType=bv.prototype.setManifestType,bv.prototype.setSequenceMode=bv.prototype.setSequenceMode,bv.prototype.parseInit=bv.prototype.parseInit;var AT=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;bb["text/vtt"]=function(){return new bv},bb['text/vtt; codecs="vtt"']=function(){return new bv},bb['text/vtt; codecs="wvtt"']=function(){return new bv},Cv.prototype.parseInit=function(e){var t=this,n=!1;if((new fr).box("moov",hr).box("trak",hr).box("mdia",hr).O("mdhd",function(e){e=ro(e.reader,e.version),t.g=e.timescale}).box("minf",hr).box("stbl",hr).O("stsd",pr).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new ke(2,2,2008);if(!n)throw new ke(2,2,2008)},Cv.prototype.setSequenceMode=function(){},Cv.prototype.setManifestType=function(){},Cv.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw B("No init segment for MP4+VTT!"),new ke(2,2,2008);var n,r=0,i=[],o=[],s=!1,u=!1,c=!1,l=null;if((new fr).box("moof",hr).box("traf",hr).O("tfdt",function(e){s=!0,r=no(e.reader,e.version).baseMediaDecodeTime}).O("tfhd",function(e){l=to(e.reader,e.flags).Me}).O("trun",function(e){u=!0,i=io(e.reader,e.version,e.flags).cf}).box("mdat",yr(function(e){c=!0,n=e})).parse(e,!1),!c&&!s&&!u)throw new ke(2,2,2008);e=r;for(var d=new lr(n,0),f=a(i),h=f.next();!h.done;h=f.next()){h=h.value;var p=h.ne||l,g=h.qd?r+h.qd:e;e=g+(p||0);var y=0;do{var v=d.J();y+=v;var m=d.J();m=mr(m);var b=null;"vttc"==m?8<v&&(b=d.$a(v-8)):("vtte"!=m&&B("Unknown box "+m+"! Skipping!"),d.skip(v-8)),p?b&&(v=Ov(b,t.periodStart+g/this.g,t.periodStart+e/this.g),o.push(v)):B("WVTT sample duration unknown, and no default found!")}while(h.sampleSize&&y<h.sampleSize)}return o.filter(Ce)},I("shaka.text.Mp4VttParser",Cv),Cv.prototype.parseMedia=Cv.prototype.parseMedia,Cv.prototype.setManifestType=Cv.prototype.setManifestType,Cv.prototype.setSequenceMode=Cv.prototype.setSequenceMode,Cv.prototype.parseInit=Cv.prototype.parseInit,bb['application/mp4; codecs="wvtt"']=function(){return new Cv},Mv.prototype.parseInit=function(){},Mv.prototype.setSequenceMode=function(){},Mv.prototype.setManifestType=function(){},Mv.prototype.parseMedia=function(e){var t=or(e).replace(/\r+/g,"");if(t=t.trim(),e=[],""==t)return e;t=a(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var r=new gv(n[0]),i=Iv(r),o=vv(r,/,/g);if(r=Iv(r),null==i||null==o||null==r)throw new ke(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new le(i,r,n.slice(1).join("\n").trim()))}return e},I("shaka.text.SbvTextParser",Mv),Mv.prototype.parseMedia=Mv.prototype.parseMedia,Mv.prototype.setManifestType=Mv.prototype.setManifestType,Mv.prototype.setSequenceMode=Mv.prototype.setSequenceMode,Mv.prototype.parseInit=Mv.prototype.parseInit,bb["text/x-subviewer"]=function(){return new Mv},jv.prototype.parseInit=function(){},jv.prototype.setSequenceMode=function(){},jv.prototype.setManifestType=function(){},jv.prototype.parseMedia=function(e,t){return e=or(e),e=Dv(e),e=te(ur(e)),this.g.parseMedia(e,t)},I("shaka.text.SrtTextParser",jv),jv.srt2webvtt=Dv,jv.prototype.parseMedia=jv.prototype.parseMedia,jv.prototype.setManifestType=jv.prototype.setManifestType,jv.prototype.setSequenceMode=jv.prototype.setSequenceMode,jv.prototype.parseInit=jv.prototype.parseInit,bb["text/srt"]=function(){return new jv},Rv.prototype.parseInit=function(){},Rv.prototype.setSequenceMode=function(){},Rv.prototype.setManifestType=function(){},Rv.prototype.parseMedia=function(e){var t="",n="";e=or(e).split(/\r?\n\s*\r?\n/),e=a(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var i=xT.exec(r);if(i){var o=i[1];if(i=i[2],"V4 Styles"==o||"V4+ Styles"==o){t=i;continue}if("Events"==o){n=i;continue}}V("SsaTextParser parser encountered an unknown part.",r)}for(e=[],r=null,t=a(t.split(/\r?\n/)),i=t.next();!i.done;i=t.next())if(o=i.value,!/^\s*;/.test(o)&&(i=CT.exec(o)))if(o=i[1].trim(),i=i[2].trim(),"Format"==o)r=i.split(OT);else if("Style"==o){o=i.split(OT),i={};for(var s=0;s<r.length&&s<o.length;s++)i[r[s]]=o[s];e.push(i)}for(r=[],t=null,o={},n=a(n.split(/\r?\n/)),i=n.next();!i.done;o={Bd:o.Bd},i=n.next())if(i=i.value,!/^\s*;/.test(i)&&(s=CT.exec(i)))if(i=s[1].trim(),s=s[2].trim(),"Format"==i)t=s.split(OT);else if("Dialogue"==i){s=s.split(OT),i={};for(var u=0;u<t.length&&u<s.length;u++)i[t[u]]=s[u];u=Fv(i.Start);var c=Fv(i.End);s=new le(u,c,s.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),o.Bd=i.Style,(i=e.find(function(e){return function(t){return t.Name==e.Bd}}(o)))&&Lv(s,i),r.push(s)}return r},I("shaka.text.SsaTextParser",Rv),Rv.prototype.parseMedia=Rv.prototype.parseMedia,Rv.prototype.setManifestType=Rv.prototype.setManifestType,Rv.prototype.setSequenceMode=Rv.prototype.setSequenceMode,Rv.prototype.parseInit=Rv.prototype.parseInit;var xT=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,CT=/^\s*([^:]+):\s*(.*)/,OT=/\s*,\s*/,PT=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;bb["text/x-ssa"]=function(){return new Rv},wm=Hv.prototype,wm.destroy=function(){this.g.clear()},wm.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]&&Y(this.convertCodecs("audio",e))},wm.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(Fe(t)||"mp4a.40.2")+'"':t},wm.getOrginalMimeType=function(){return this.i},wm.transmux=function(e,t,n,r){for(var i=te(e),o=eo(i),a=o.length;a<i.length&&!Vv(i,a);a++);if(e=1e3*n.endTime,o=Zi(o),o.length&&n&&(n=o.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(e=n.data),!(n=Bv(i,a)))return Promise.reject(new ke(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,o=[];a<i.length;){var s=Uv(i,a);if(!s)return Promise.reject(new ke(2,3,3018));var u=s.ad+s.N;a+u<=i.length&&o.push({data:i.subarray(a+s.ad,a+u),size:s.N,duration:1024,Sa:0,flags:{Xa:0,La:0,Ka:0,Ha:0,Ia:2,Ya:0}}),a+=u}return i=n.sampleRate,e=Math.floor(e*i/1e3),r={id:t.id,type:"audio",codecs:n.Sc,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:i,duration:r,Da:[],ba:new Uint8Array([]),ma:new Uint8Array([]),data:{cb:this.h,baseMediaDecodeTime:e,Ca:o},stream:t},e=new ph([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=e.initSegment(),this.g.set(t.id,r)),t=mh(e),this.h++,t=Ar(r,t),Promise.resolve(t)},I("shaka.transmuxer.AacTransmuxer",Hv),Hv.prototype.transmux=Hv.prototype.transmux,Hv.prototype.getOrginalMimeType=Hv.prototype.getOrginalMimeType,Hv.prototype.convertCodecs=Hv.prototype.convertCodecs,Hv.prototype.isSupported=Hv.prototype.isSupported,Hv.prototype.destroy=Hv.prototype.destroy,pe("audio/aac",function(){return new Hv("audio/aac")},tb),wm=qv.prototype,wm.destroy=function(){this.g.clear()},wm.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]&&Y(this.convertCodecs("audio",e))},wm.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':t},wm.getOrginalMimeType=function(){return this.i},wm.transmux=function(e,t,n,r){e=te(e);for(var i=eo(e),o=i.length;o<e.length&&!Kv(e,o);o++);var a=1e3*n.endTime;i=Zi(i),i.length&&n&&(n=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(a=n.data),n=0,i=new Uint8Array([]);for(var s=[];o<e.length;){var u=Wv(e,o);if(!u)return Promise.reject(new ke(2,3,3018));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,n=u.sampleRate,i=u.ba,s.push({data:e.subarray(o,o+u.N),size:u.N,duration:1536,Sa:0,flags:{Xa:0,La:0,Ka:0,Ha:0,Ia:2,Ya:0}}),o+=u.N}return e=Math.floor(a*n/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Da:[],ba:i,ma:new Uint8Array([]),data:{cb:this.h,baseMediaDecodeTime:e,Ca:s},stream:t},e=new ph([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=e.initSegment(),this.g.set(t.id,r)),t=mh(e),this.h++,t=Ar(r,t),Promise.resolve(t)},I("shaka.transmuxer.Ac3Transmuxer",qv),qv.prototype.transmux=qv.prototype.transmux,qv.prototype.getOrginalMimeType=qv.prototype.getOrginalMimeType,qv.prototype.convertCodecs=qv.prototype.convertCodecs,qv.prototype.isSupported=qv.prototype.isSupported,qv.prototype.destroy=qv.prototype.destroy,pe("audio/ac3",function(){return new qv("audio/ac3")},tb),wm=zv.prototype,wm.destroy=function(){this.g.clear()},wm.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]&&Y(this.convertCodecs("audio",e))},wm.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t},wm.getOrginalMimeType=function(){return this.i},wm.transmux=function(e,t,n,r){e=te(e);for(var i=eo(e),o=i.length;o<e.length&&2935!=(e[o]<<8|e[o+1]<<0);o++);var a=1e3*n.endTime;i=Zi(i),i.length&&n&&(n=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(a=n.data),n=0,i=new Uint8Array([]);for(var s=[];o<e.length;){var u=Gv(e,o);if(!u)return Promise.reject(new ke(2,3,3018));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,n=u.sampleRate,i=u.ba,s.push({data:e.subarray(o,o+u.N),size:u.N,duration:1536,Sa:0,flags:{Xa:0,La:0,Ka:0,Ha:0,Ia:2,Ya:0}}),o+=u.N}return e=Math.floor(a*n/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Da:[],ba:i,ma:new Uint8Array([]),data:{cb:this.h,baseMediaDecodeTime:e,Ca:s},stream:t},e=new ph([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=e.initSegment(),this.g.set(t.id,r)),t=mh(e),this.h++,t=Ar(r,t),Promise.resolve(t)},I("shaka.transmuxer.Ec3Transmuxer",zv),zv.prototype.transmux=zv.prototype.transmux,zv.prototype.getOrginalMimeType=zv.prototype.getOrginalMimeType,zv.prototype.convertCodecs=zv.prototype.convertCodecs,zv.prototype.isSupported=zv.prototype.isSupported,zv.prototype.destroy=zv.prototype.destroy,pe("audio/ec3",function(){return new zv("audio/ec3")},tb);var MT=[100,110,122,244,44,83,86,118,128,138,139,134],IT=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],jT=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],DT=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],RT=[0,1,1,4];wm=Qv.prototype,wm.destroy=function(){this.g.clear()},wm.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]&&Y(this.convertCodecs("audio",e))},wm.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t},wm.getOrginalMimeType=function(){return this.i},wm.transmux=function(e,t,n,r){for(e=te(e),n=eo(e).length;n<e.length;n++){var i=n;if(i+1<e.length&&$v(e,i)){var o=Jv(e,i),a=4;o&&o.N&&(a=o.N),i+=a,i=i===e.length||i+1<e.length&&$v(e,i)}else i=!1;if(i)break}var s;for(i=[];n<e.length;){if(!(o=Jv(e,n)))return Promise.reject(new ke(2,3,3018));s||(s=o),n+o.N<=e.length&&i.push({data:e.subarray(n,n+o.N),size:o.N,duration:1152,Sa:0,flags:{Xa:0,La:0,Ka:0,Ha:0,Ia:2,Ya:0}}),n+=o.N}return s?(e=9e4*s.Jg/s.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s.sampleRate,duration:r,Da:[],ba:new Uint8Array([]),ma:new Uint8Array([]),data:{cb:this.h,baseMediaDecodeTime:e,Ca:i},stream:t},s=new ph([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=s.initSegment(),this.g.set(t.id,r)),t=mh(s),this.h++,t=Ar(r,t),Promise.resolve(t)):Promise.reject(new ke(2,3,3018))},I("shaka.transmuxer.Mp3Transmuxer",Qv),Qv.prototype.transmux=Qv.prototype.transmux,Qv.prototype.getOrginalMimeType=Qv.prototype.getOrginalMimeType,Qv.prototype.convertCodecs=Qv.prototype.convertCodecs,Qv.prototype.isSupported=Qv.prototype.isSupported,Qv.prototype.destroy=Qv.prototype.destroy,pe("audio/mpeg",function(){return new Qv("audio/mpeg")},tb),wm=Zv.prototype,wm.destroy=function(){},wm.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=Fe(e).split(","),n=Ie("audio",t);return t=Ie("video",t),!(!n||t||"mp3"!=Ne(n))&&Y(this.convertCodecs("audio",e))},wm.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t},wm.getOrginalMimeType=function(){return this.h},wm.transmux=function(e){this.g?this.g.clearData():this.g=new go,e=te(e);var t=this.g.parse(e);if(e=t.Jd(),"mp3"!=e.audio||e.video)return Promise.reject(new ke(2,3,3018));e=new Uint8Array([]),t=a(t.rb());for(var n=t.next();!n.done;n=t.next())if(n=n.value.data)for(var r=0;r<n.length;){var i=Jv(n,r);i?(r+i.N<=n.length&&(e=Ar(e,n.subarray(r,r+i.N))),r+=i.N):r++}return Promise.resolve(e)},I("shaka.transmuxer.MpegTsTransmuxer",Zv),Zv.prototype.transmux=Zv.prototype.transmux,Zv.prototype.getOrginalMimeType=Zv.prototype.getOrginalMimeType,Zv.prototype.convertCodecs=Zv.prototype.convertCodecs,Zv.prototype.isSupported=Zv.prototype.isSupported,Zv.prototype.destroy=Zv.prototype.destroy,pe("video/mp2t",function(){return new Zv("video/mp2t")},nb),wm=em.prototype,wm.destroy=function(){},wm.isSupported=function(e,t){var n=e.startsWith("mss/");return!(!this.g||!n)&&(t?Y(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Y(t)||Y(e)))},wm.convertCodecs=function(e,t){return t.replace("mss/","")},wm.getOrginalMimeType=function(){return this.h},wm.transmux=function(e,t,n){if(!n)return Promise.resolve(te(e));if(!t.mssPrivateData)return Promise.reject(new ke(2,3,3020));try{var r,i=this.g.parseBuffer(e),o=i.fetch("tfhd");o.track_ID=t.id+1;var a=i.fetch("tfdt"),s=i.fetch("traf");null===a&&(a=this.g.createFullBox("tfdt",s,o),a.version=1,a.flags=0,a.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var u=i.fetch("trun"),c=i.fetch("tfxd");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var l=i.fetch("tfrf");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var d=i.fetch("sepiff");if(null!==d){d.type="senc",d.usertype=void 0;var f=i.fetch("saio");if(null===f){f=this.g.createFullBox("saio",s),f.version=0,f.flags=0,f.entry_count=1,f.offset=[0];var h=this.g.createFullBox("saiz",s);if(h.version=0,h.flags=0,h.sample_count=d.sample_count,h.default_sample_info_size=0,h.sample_info_size=[],2&d.flags)for(r=0;r<d.sample_count;r+=1)h.sample_info_size[r]=10+6*d.entry[r].NumberOfEntries;else h.default_sample_info_size=8}}o.flags&=16777214,o.flags|=131072,u.flags|=1;var p=i.fetch("moof");u.data_offset=p.getLength()+8;var g=i.fetch("saio");null!==g&&(g.offset[0]=nm(p,"traf")+nm(s,"senc")+16);var y=te(i.write());return Promise.resolve(y)}catch(e){return e instanceof ke?Promise.reject(e):Promise.reject(new ke(2,3,3022))}},I("shaka.transmuxer.MssTransmuxer",em),em.prototype.transmux=em.prototype.transmux,em.prototype.getOrginalMimeType=em.prototype.getOrginalMimeType,em.prototype.convertCodecs=em.prototype.convertCodecs,em.prototype.isSupported=em.prototype.isSupported,em.prototype.destroy=em.prototype.destroy;var LT=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);pe("mss/audio/mp4",function(){return new em("mss/audio/mp4")},tb),pe("mss/video/mp4",function(){return new em("mss/video/mp4")},tb),wm=rm.prototype,wm.destroy=function(){this.g&&this.g.dispose(),this.g=null},wm.isSupported=function(e,t){var n="mp2t"==e.toLowerCase().split(";")[0].split("/")[1];return!(!this.j||!n)&&(t?Y(im(t,e)):(t=im("audio",e),e=im("video",e),Y(t)||Y(e)))},wm.convertCodecs=function(e,t){return"mp2t"==t.toLowerCase().split(";")[0].split("/")[1]?im(e,t):t},wm.getOrginalMimeType=function(){return this.m},wm.transmux=function(e){return this.i=!0,this.h=new Sn,this.l=[],e=te(e),this.g.push(e),this.g.flush(),this.i&&this.h.reject(new ke(2,3,3018)),this.h},I("shaka.transmuxer.MuxjsTransmuxer",rm),rm.prototype.transmux=rm.prototype.transmux,rm.prototype.getOrginalMimeType=rm.prototype.getOrginalMimeType,rm.prototype.convertCodecs=rm.prototype.convertCodecs,rm.prototype.isSupported=rm.prototype.isSupported,rm.prototype.destroy=rm.prototype.destroy,pe("video/mp2t",function(){return new rm("video/mp2t")},tb),wm=om.prototype,wm.destroy=function(){this.h.clear()},wm.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=Fe(e).split(","),r=Ie("audio",n);return n=Ie("video",n),!(r&&n||r&&(r=Ne(r),!NT.includes(r))||n&&(r=Ne(n),!FT.includes(r)))&&(t?Y(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Y(t)||Y(e)))},wm.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=Fe(t).replace("mp4a.40.34","mp3"),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},wm.getOrginalMimeType=function(){return this.j},wm.transmux=function(e,t,n,r,i){this.i?this.i.clearData():this.i=new go,e=te(e);var o=this.i.parse(e);e=[];var s=o.Jd();try{if(n=null,"video"==i){switch(s.video){case"avc":for(var u=[],c=null,l=[],d=o.Zc(),f=0;f<d.length;f++){var h=d[f],p=void 0;f+1<d.length&&(p=d[f+1]);var g=o.fe(h,p);l=l.concat(g);var y=Xv(g);y&&(null==c&&(c=h.dts),p=void 0,p=f+1<d.length?(d[f+1].dts||0)-(h.dts||0):(h.dts||0)-(d[f-1].dts||0),u.push({data:y.data,size:y.data.byteLength,duration:p,Sa:Math.round((h.pts||0)-(h.dts||0)),flags:{Xa:0,La:0,Ka:0,Ha:0,Ia:y.Xe?2:1,Ya:y.Xe?0:1}}))}var v=Yv(l);if(!v||null==c)throw new ke(2,3,3018);t.height=v.height,t.width=v.width,n={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Da:[],ba:new Uint8Array([]),ma:v.ma,data:{cb:this.g,baseMediaDecodeTime:c,Ca:u},stream:t}}n&&(e.push(n),n=null)}if("audio"==i){switch(s.audio){case"aac":for(var m,b=[],_=null,w=a(o.rb()),T=w.next();!T.done;T=w.next()){var S=T.value,E=S.data;if(E){if(o=0,!(m=Bv(E,o)))throw new ke(2,3,3018);for(t.audioSamplingRate=m.sampleRate,t.channelsCount=m.channelCount,null==_&&null!==S.pts&&(_=S.pts);o<E.length;){var k=Uv(E,o);if(k){var A=k.ad+k.N;o+A<=E.length&&b.push({data:E.subarray(o+k.ad,o+A),size:k.N,duration:1024,Sa:0,flags:{Xa:0,La:0,Ka:0,Ha:0,Ia:2,Ya:0}}),o+=A}else o++}}}if(!m||null==_)throw new ke(2,3,3018);var x=m.sampleRate;o=_/9e4*x,n={id:t.id,type:"audio",codecs:m.Sc,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:x,duration:r,Da:[],ba:new Uint8Array([]),ma:new Uint8Array([]),data:{cb:this.g,baseMediaDecodeTime:o,Ca:b},stream:t};break;case"ac3":_=[],m=0,b=new Uint8Array([]),x=null;for(var C=a(o.rb()),O=C.next();!O.done;O=C.next()){var P=O.value,M=P.data;for(null==x&&null!==P.pts&&(x=P.pts),o=0;o<M.length;){var I=Wv(M,o);I?(t.audioSamplingRate=I.sampleRate,t.channelsCount=I.channelCount,m=I.sampleRate,b=I.ba,_.push({data:M.subarray(o,o+I.N),size:I.N,duration:1536,Sa:0,flags:{Xa:0,La:0,Ka:0,Ha:0,Ia:2,Ya:0}}),o+=I.N):o++}}if(0==m||0==b.byteLength||null==x)throw new ke(2,3,3018);o=x/9e4*m,n={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:m,duration:r,Da:[],ba:b,ma:new Uint8Array([]),data:{cb:this.g,baseMediaDecodeTime:o,Ca:_},stream:t};break;case"ec3":b=[],m=0,_=new Uint8Array([]),x=null;for(var j=a(o.rb()),D=j.next();!D.done;D=j.next()){var R=D.value,L=R.data;for(null==x&&null!==R.pts&&(x=R.pts),o=0;o<L.length;){var N=Gv(L,o);N?(t.audioSamplingRate=N.sampleRate,t.channelsCount=N.channelCount,m=N.sampleRate,_=N.ba,b.push({data:L.subarray(o,o+N.N),size:N.N,duration:1536,Sa:0,flags:{Xa:0,La:0,Ka:0,Ha:0,Ia:2,Ya:0}}),o+=N.N):o++}}if(0==m||0==_.byteLength||null==x)throw new ke(2,3,3018);o=x/9e4*m,n={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:m,duration:r,Da:[],ba:_,ma:new Uint8Array([]),data:{cb:this.g,baseMediaDecodeTime:o,Ca:b},stream:t};break;case"mp3":b=[];var F;_=null;for(var U=a(o.rb()),B=U.next();!B.done;B=U.next()){var V=B.value,H=V.data;if(H)for(null==_&&null!==V.pts&&(_=V.pts),o=0;o<H.length;){var W=Jv(H,o);W?(F||(F=W),o+W.N<=H.length&&b.push({data:H.subarray(o,o+W.N),size:W.N,duration:1152,Sa:0,flags:{Xa:0,La:0,Ka:0,Ha:0,Ia:2,Ya:0}}),o+=W.N):o++}}if(!F||null==_)throw new ke(2,3,3018);var K=F.sampleRate;o=_/9e4*K,n={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:K,duration:r,Da:[],ba:new Uint8Array([]),ma:new Uint8Array([]),data:{cb:this.g,baseMediaDecodeTime:o,Ca:b},stream:t}}n&&e.push(n)}}catch(e){return Promise.reject(e)}return e.length?(e=new ph(e),this.h.has(t.id)?r=this.h.get(t.id):(r=e.initSegment(),this.h.set(t.id,r)),t=mh(e),this.g++,t=Ar(r,t),Promise.resolve(t)):Promise.reject(new ke(2,3,3018))},I("shaka.transmuxer.TsTransmuxer",om),om.prototype.transmux=om.prototype.transmux,om.prototype.getOrginalMimeType=om.prototype.getOrginalMimeType,om.prototype.convertCodecs=om.prototype.convertCodecs,om.prototype.isSupported=om.prototype.isSupported,om.prototype.destroy=om.prototype.destroy;var NT=["aac","ac-3","ec-3","mp3"],FT=["avc"];pe("video/mp2t",function(){return new om("video/mp2t")},rb);var UT;I("EmeEncryptionSchemePolyfill",am),am.install=sm;var BT;I("McEncryptionSchemePolyfill",dm),dm.install=fm,ym.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=a(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=a(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},ym.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},I("EncryptionSchemePolyfills",bm),bm.install=_m,void 0!==n&&n.exports&&(n.exports=bm)}).call(r,n,n,void 0);for(var i in r.shaka)t[i]=r.shaka[i]}()}).call(t,n(18))},function(e,t,n){"use strict";"function"==typeof Symbol&&Symbol.iterator;!function(){var e=function(e,t){return function(n){return window.getComputedStyle?window.getComputedStyle(e,t)[n]:e.currentStyle[n]}},t=function t(n){return"HTML"!==n.nodeName&&"static"===e(n)("position")?t(n.offsetParent):n},n=function(){return window.pageXOffset?{x:window.pageXOffset,y:window.pageYOffset}:{x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}},r=function(e){if(-1!==navigator.userAgent.toLowerCase().indexOf("android")){var t=e.controlBar.progressControl,n=function(){t.addClass("fake-active")},r=function(){t.removeClass("fake-active")};t.on("touchstart",n),t.on("touchend",r),t.on("touchcancel",r)}},i=function(e,t){var n=document.createElement("base");n.href=e;var r=document.getElementsByTagName("head")[0];r.insertBefore(n,r.firstChild);var i=document.createElement("a");i.href=t;var o=i.href;return r.removeChild(n),o},o=function(e,t){for(var n={},r=e.cues,o=0;o<r.length;o++){var a=r[o],s=n[a.startTime]={src:i(t,a.text.split("#")[0])},u=a.text.split("#")[1];if(u&&"xywh="===u.substring(0,5)){var c=u.substring(5).split(",");s.width=c[2],s.height=c[3],s.style={left:"-"+c[0]+"px",top:"-"+c[1]+"px"}}}return n},a=function(){return window.navigator.userAgent.toLowerCase().includes("smart")},s=function(){return!a()&&-1!==window.navigator.userAgent.indexOf("Safari")&&-1===window.navigator.userAgent.indexOf("Chrome")},u=function(){return s()?"chapters":"metadata"},c=function(e,i){if(e._thumbs)return void(e._thumbs.settings=i);e._thumbs={settings:i},r(e);var o=e.el_.querySelector(".vjs-thumbnail-holder"),a=e.el_.querySelector(".vjs-thumbnail"),s=e.controlBar.progressControl,u=s.seekBar,c=s.el();o||(o=document.createElement("div"),o.className="vjs-thumbnail-holder",a=document.createElement("div"),o.appendChild(a),a.className="vjs-thumbnail",c.firstChild?c.insertBefore(o,c.firstChild):c.appendChild(o));var l=e.duration();e.on("durationchange",function(t){l=e.duration()}),e.on("loadedmetadata",function(t){l=e.duration()});var d=function(r){var i=window.getComputedStyle(o),c=parseInt(i.getPropertyValue("--thumbnails-height"),10);if(isNaN(c)&&(c=0),r.target!==o&&r.target!==a){var d=n().x,f=t(s.el()).getBoundingClientRect(),h=(f.width||f.right)+d,p=r.pageX;r.changedTouches&&(p=r.changedTouches[0].pageX);var g=p||r.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;g-=t(s.el()).getBoundingClientRect().left+d;var y=Math.floor(u.calculateDistance(r)*l),v=0,m=e._thumbs.settings;for(var b in m)y>b&&(v=Math.max(v,b));var _=m[v];if(_){var w=/^https?:\/\//i;_.src&&a.style.background.replace(w,"//")!=_.src.replace(w,"//")&&(a.style.background="url("+_.src+") no-repeat");var T=e.currentDimensions(),S=T.width/1920,E=parseFloat(_.width||m[0].width),k=parseFloat(_.height||m[0].height);a.style.width=E+"px",a.style.height=k+"px",_.style&&(a.style.backgroundPosition=_.style.left+" "+_.style.top),a.style.transform="scale("+S+","+S+")";var A=E*S,x=k*S,C=A/2;g+C>h?g=h-A:g<C?g=0:g-=C,o.style.width=A+"px",o.style.height=x+"px",o.style.left=g+"px",o.style.top="-"+(x+c)+"px",o.style.display="block"}}};s.on("mousemove",d),s.on("touchmove",d);var f=function(e){o.style.display="none"};s.on("touchcancel",f),s.on("touchend",f),e.on("userinactive",f)},l=function(e){c(e,{vtt:""});var t=e.$(".vjs-thumbnail-holder");t&&t.style&&(t.style.display="none");var n=e.remoteTextTracks().tracks_.find(function(e){return e.kind===u()&&"thumbnails"===e.id&&e.label===f.toString()});n&&e.removeRemoteTextTrack(n)},d=!1,f=0;videojs.registerPlugin("thumbnails",function(e){var t=this;if(!e)return void l(t);var n=u();if(d||(t.textTracks().on("removetrack",function(e){e.track.kind===n&&"thumbnails"===e.track.id&&e.track.label===f.toString()&&l(t)}),d=!0),!e.vtt)return void c(t,e);l(t),f++;var r=t.addRemoteTextTrack({id:"thumbnails",kind:n,label:f.toString(),src:e.vtt},!1);e.vtt&&r.addEventListener("load",function n(){r.removeEventListener("load",n);var i=t.textTracks().getTrackById("thumbnails");c(t,o(i,e.vtt))})})}()},function(e,t){window.webOS=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"deviceInfo",function(){return k}),n.d(t,"fetchAppId",function(){return u}),n.d(t,"fetchAppInfo",function(){return l}),n.d(t,"fetchAppRootPath",function(){return d}),n.d(t,"keyboard",function(){return A}),n.d(t,"libVersion",function(){return C}),n.d(t,"platformBack",function(){return f}),n.d(t,"platform",function(){return S}),n.d(t,"service",function(){return g}),n.d(t,"systemInfo",function(){return x});var u=function(){return window.PalmSystem&&window.PalmSystem.identifier?window.PalmSystem.identifier.split(" ")[0]:""},c={},l=function(e,t){if(0===Object.keys(c).length){var n=function(t,n){if(!t&&n)try{c=JSON.parse(n),e&&e(c)}catch(t){console.error("Unable to parse appinfo.json file for",u()),e&&e()}else e&&e()},r=new window.XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300||0===r.status?n(null,r.responseText):n({status:404}))};try{r.open("GET",t||"appinfo.json",!0),r.send(null)}catch(e){n({status:404})}}else e&&e(c)},d=function(){var e=window.location.href;if("baseURI"in window.document)e=window.document.baseURI;else{var t=window.document.getElementsByTagName("base");t.length>0&&(e=t[0].href)}var n=e.match(new RegExp(".*://[^#]*/"));return n?n[0]:""},f=function(){if(window.PalmSystem&&window.PalmSystem.platformBack)return window.PalmSystem.platformBack()},h={},p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bridge=null,this.cancelled=!1,this.subscribe=!1}var t,n;return t=e,(n=[{key:"send",value:function(e){var t=e.service,n=void 0===t?"":t,r=e.method,o=void 0===r?"":r,a=e.parameters,s=void 0===a?{}:a,u=e.onSuccess,c=void 0===u?function(){}:u,l=e.onFailure,d=void 0===l?function(){}:l,f=e.onComplete,p=void 0===f?function(){}:f,g=e.subscribe,y=void 0!==g&&g;if(!window.PalmServiceBridge){var v={errorCode:-1,errorText:"PalmServiceBridge is not found.",returnValue:!1};return d(v),p(v),console.error("PalmServiceBridge is not found."),this}this.ts&&h[this.ts]&&delete h[this.ts];var m,b=i({},s);return this.subscribe=y,this.subscribe&&(b.subscribe=this.subscribe),b.subscribe&&(this.subscribe=b.subscribe),this.ts=Date.now(),h[this.ts]=this,this.bridge=new PalmServiceBridge,this.bridge.onservicecallback=this.callback.bind(this,c,d,p),this.bridge.call(("/"!==(m=n).slice(-1)&&(m+="/"),m+o),JSON.stringify(b)),this}},{key:"callback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!this.cancelled){var i={};try{i=JSON.parse(r)}catch(e){i={errorCode:-1,errorText:r,returnValue:!1}}var o=i,a=o.errorCode,s=o.returnValue;a||!1===s?(i.returnValue=!1,t(i)):(i.returnValue=!0,e(i)),n(i),this.subscribe||this.cancel()}}},{key:"cancel",value:function(){this.cancelled=!0,null!==this.bridge&&(this.bridge.cancel(),this.bridge=null),this.ts&&h[this.ts]&&delete h[this.ts]}}])&&a(t.prototype,n),e}(),g={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i({service:e},t);return(new p).send(n)}},y={};if("object"===("undefined"==typeof window?"undefined":s(window))&&window.PalmSystem){if(window.navigator.userAgent.indexOf("SmartWatch")>-1)y.watch=!0;else if(window.navigator.userAgent.indexOf("SmartTV")>-1||window.navigator.userAgent.indexOf("Large Screen")>-1)y.tv=!0;else{try{var v=JSON.parse(window.PalmSystem.deviceInfo||"{}");if(v.platformVersionMajor&&v.platformVersionMinor){var m=Number(v.platformVersionMajor),b=Number(v.platformVersionMinor);m<3||3===m&&b<=0?y.legacy=!0:y.open=!0}}catch(e){y.open=!0}window.Mojo=window.Mojo||{relaunch:function(){}},window.PalmSystem.stageReady&&window.PalmSystem.stageReady()}if(window.navigator.userAgent.indexOf("Chr0me")>-1||window.navigator.userAgent.indexOf("Chrome")>-1){var _=window.navigator.userAgent.indexOf("Chr0me")>-1?window.navigator.userAgent.indexOf("Chr0me"):window.navigator.userAgent.indexOf("Chrome"),w=window.navigator.userAgent.slice(_).indexOf(" "),T=window.navigator.userAgent.slice(_+7,_+w).split(".");y.chrome=Number(T[0])}else y.chrome=0}else y.unknown=!0;var S=y,E={},k=function(e){if(0===Object.keys(E).length){try{var t=JSON.parse(window.PalmSystem.deviceInfo);E.modelName=t.modelName,E.version=t.platformVersion,E.versionMajor=t.platformVersionMajor,E.versionMinor=t.platformVersionMinor,E.versionDot=t.platformVersionDot,E.sdkVersion=t.platformVersion,E.screenWidth=t.screenWidth,E.screenHeight=t.screenHeight}catch(e){E.modelName="webOS Device"}E.screenHeight=E.screenHeight||window.screen.height,E.screenWidth=E.screenWidth||window.screen.width,S.tv&&(S.chrome>=68?(new p).send({service:"luna://com.webos.service.config",method:"getConfigs",parameters:{configNames:["tv.model.modelname","tv.nyx.platformVersion","tv.nyx.firmwareVersion","tv.hw.panelResolution","tv.hw.displayType","tv.hw.ddrSize","tv.model.supportHDR","tv.config.supportDolbyHDRContents","tv.config.supportDolbyTVATMOS"]},onSuccess:function(t){if(E.modelName=t.configs["tv.model.modelname"]||E.modelName,E.sdkVersion=t.configs["tv.nyx.platformVersion"]||E.sdkVersion,E.uhd="UD"===t.configs["tv.hw.panelResolution"]||"8K"===t.configs["tv.hw.panelResolution"],E.uhd8K="8K"===t.configs["tv.hw.panelResolution"],E.oled="OLED"===t.configs["tv.hw.displayType"],E.ddrSize=t.configs["tv.hw.ddrSize"],E.hdr10=!0===t.configs["tv.model.supportHDR"],E.dolbyVision=!0===t.configs["tv.config.supportDolbyHDRContents"],E.dolbyAtmos=!0===t.configs["tv.config.supportDolbyTVATMOS"],t.configs["tv.nyx.firmwareVersion"]&&"0.0.0"!==t.configs["tv.nyx.firmwareVersion"]||(t.configs["tv.nyx.firmwareVersion"]=t.configs["tv.nyx.platformVersion"]),t.configs["tv.nyx.firmwareVersion"]){E.version=t.configs["tv.nyx.firmwareVersion"];for(var n=E.version.split("."),r=["versionMajor","versionMinor","versionDot"],i=0;i<r.length;i+=1)try{E[r[i]]=parseInt(n[i],10)}catch(e){E[r[i]]=n[i]}}e(E)},onFailure:function(){e(E)}}):(new p).send({service:"luna://com.webos.service.tv.systemproperty",method:"getSystemInfo",parameters:{keys:["firmwareVersion","modelName","sdkVersion","UHD","OLED","ddrSize"]},onSuccess:function(t){if(E.modelName=t.modelName||E.modelName,E.sdkVersion=t.sdkVersion||E.sdkVersion,E.uhd=t.UHD?"true"===t.UHD:void 0,E.oled=t.OLED?"true"===t.OLED:void 0,E.ddrSize=t.ddrSize,t.firmwareVersion&&"0.0.0"!==t.firmwareVersion||(t.firmwareVersion=t.sdkVersion),t.firmwareVersion){E.version=t.firmwareVersion;for(var n=E.version.split("."),r=["versionMajor","versionMinor","versionDot"],i=0;i<r.length;i+=1)try{E[r[i]]=parseInt(n[i],10)}catch(e){E[r[i]]=n[i]}}(new p).send({service:"luna://com.webos.service.config",method:"getConfigs",parameters:{configNames:["tv.model.supportTemp8K","tv.model.supportHDR","tv.config.supportDolbyHDRContents","tv.config.supportDolbyTVATMOS"]},onSuccess:function(t){t.configs&&(E.uhd8K=!0===t.configs["tv.model.supportTemp8K"],E.hdr10=!0===t.configs["tv.model.supportHDR"],E.dolbyVision=!0===t.configs["tv.config.supportDolbyHDRContents"],E.dolbyAtmos=!0===t.configs["tv.config.supportDolbyTVATMOS"]),e(E)},onFailure:function(){E.uhd8K=!1,E.hdr10=!1,E.dolbyVision=!1,E.dolbyAtmos=!1,e(E)}})},onFailure:function(t){if(E.modelName=t.modelName||E.modelName,E.sdkVersion=t.sdkVersion||E.sdkVersion,t.firmwareVersion&&"0.0.0"!==t.firmwareVersion||(t.firmwareVersion=t.sdkVersion),t.firmwareVersion){E.version=t.firmwareVersion;for(var n=E.version.split("."),r=["versionMajor","versionMinor","versionDot"],i=0;i<r.length;i+=1)try{E[r[i]]=parseInt(n[i],10)}catch(e){E[r[i]]=n[i]}}E.uhd=t.UHD?"true"===t.UHD:void 0,E.uhd8K=!1,E.oled=t.OLED?"true"===t.OLED:void 0,E.ddrSize=t.ddrSize,E.hdr10=!1,E.dolbyVision=!1,E.dolbyAtmos=!1,e(E)}}))}else e(E)},A={isShowing:function(){return PalmSystem&&PalmSystem.isKeyboardVisible}},x=function(){var e={};if(window.PalmSystem){if(window.PalmSystem.country){var t=JSON.parse(window.PalmSystem.country);e.country=t.country,e.smartServiceCountry=t.smartServiceCountry}window.PalmSystem.timeZone&&(e.timezone=window.PalmSystem.timeZone)}return e},C="1.2.3"}])}])});