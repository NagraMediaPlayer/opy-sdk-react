!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OTV=t():e.OTV=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=152)}([function(e,t,n){var r=n(1),i=n(7),o=n(15),a=n(12),s=n(19),u=function(e,t,n){var c,l,f,d,h=e&u.F,p=e&u.G,g=e&u.S,y=e&u.P,v=e&u.B,m=p?r:g?r[t]||(r[t]={}):(r[t]||{}).prototype,b=p?i:i[t]||(i[t]={}),w=b.prototype||(b.prototype={});p&&(n=t);for(c in n)l=!h&&m&&void 0!==m[c],f=(l?m:n)[c],d=v&&l?s(f,r):y&&"function"==typeof f?s(Function.call,f):f,m&&a(m,c,f,e&u.U),b[c]!=f&&o(b,c,d),y&&w[c]!=f&&(w[c]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(58)("wks"),i=n(32),o=n(1).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(21),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(2)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(3),i=n(104),o=n(28),a=Object.defineProperty;t.f=n(8)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(26);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"f",function(){return y}),n.d(t,"g",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return f}),n.d(t,"d",function(){return d}),n.d(t,"a",function(){return h}),n.d(t,"e",function(){return p});var c=function(){function e(){i(this,e)}return a(e,null,[{key:"eventTimeline",get:function(){return"EVENT_TIMELINE"}},{key:"playback",get:function(){return"PLAYBACK"}},{key:"sessionManagement",get:function(){return"SESSION_MANAGEMENT"}},{key:"manifestDl",get:function(){return"MANIFEST_DL"}},{key:"segmentDl",get:function(){return"SEGMENT_DL"}},{key:"licenseRequest",get:function(){return"LICENCE_REQUEST"}}])}(),l=function(){function e(){i(this,e)}return a(e,null,[{key:"setURL",get:function(){return"seturl"}},{key:"seeking",get:function(){return"seeking"}},{key:"seeked",get:function(){return"seeked"}},{key:"prepared",get:function(){return"prepared"}},{key:"firstFrame",get:function(){return"firstframe"}},{key:"start",get:function(){return"start"}},{key:"stop",get:function(){return"stop"}}])}(),f=function(){function e(){i(this,e)}return a(e,null,[{key:"networkStart",get:function(){return"network_start"}},{key:"networkComplete",get:function(){return"network_complete"}},{key:"networkCancel",get:function(){return"network_cancel"}},{key:"networkError",get:function(){return"network_error"}}])}(),d=function(){function e(){i(this,e)}return a(e,null,[{key:"setupStart",get:function(){return"ssm_setup_start"}},{key:"setupSuccessful",get:function(){return"ssm_setup_success"}},{key:"setupFailure",get:function(){return"ssm_setup_failure"}},{key:"teardownStart",get:function(){return"ssm_teardown_start"}},{key:"teardownSuccessful",get:function(){return"ssm_teardown_success"}},{key:"teardownFailure",get:function(){return"ssm_teardown_failure"}},{key:"renewalStart",get:function(){return"ssm_renewal_start"}},{key:"renewalSuccessful",get:function(){return"ssm_renewal_success"}},{key:"renewalFailure",get:function(){return"ssm_renewal_failure"}},{key:"heartbeatStart",get:function(){return"ssm_heartbeat_start"}},{key:"heartbeatSuccessful",get:function(){return"ssm_heartbeat_success"}},{key:"heartbeatFailure",get:function(){return"ssm_heartbeat_failure"}}])}(),h=function(){function e(){i(this,e)}return a(e,null,[{key:"provisionRequestStart",get:function(){return"provision_request_start"}},{key:"provisionRequestSuccessful",get:function(){return"provision_request_success"}},{key:"provisionRequestFailed",get:function(){return"provision_request_failure"}},{key:"keyRequestStart",get:function(){return"key_request_start"}},{key:"keyRequestSuccessful",get:function(){return"key_request_success"}},{key:"keyRequestFailed",get:function(){return"key_request_failure"}}])}(),p=function(){function e(){i(this,e)}return a(e,null,[{key:"url",get:function(){return"url"}},{key:"error",get:function(){return"error"}},{key:"contentToken",get:function(){return"contentToken"}},{key:"sessionToken",get:function(){return"sessionToken"}}])}(),g=a(function e(t,n,r,o){i(this,e),this.time=t,this.eventType=n,this.command=r,this.extra=o}),y=function(){function e(){i(this,e),this.timelines=[],this.enabled=!1}return a(e,[{key:"enableTimeline",value:function(e){e?this.enabled||(this.enabled=!0,this.addToTimeline(c.eventTimeline,"logging_started")):(this.addToTimeline(c.eventTimeline,"logging_stopped"),this.enabled=!1)}},{key:"isEnabled",value:function(){return this.enabled}},{key:"addToTimeline",value:function(e,t,n){var r=this;if(this.enabled){var i=new Date;setTimeout(function(){r._doAddEvent(i,e,t,n)},0)}}},{key:"removeTimeline",value:function(e){this.timelines=e?this.timelines.filter(function(t){return t.time>=e}):[]}},{key:"getTimelineList",value:function(e){return e?e.xNumber?this._getTimelineListByNumber(e.xNumber):e.xType?this._getTimelineListByType(e.xType):e.xFrom&&e.xTo?this._getTimelineListByDate(e.xFrom,e.xTo):[]:this.timelines.slice()}},{key:"_getTimelineListByNumber",value:function(e){return this.timelines.slice(-e)}},{key:"_getTimelineListByDate",value:function(e,t){return this.timelines.filter(function(n){return n.time>=e&&n.time<=t})}},{key:"_getTimelineListByType",value:function(e){return this.timelines.filter(function(t){return t.eventType===e})}},{key:"_doAddEvent",value:function(e,t,n,r){var i=new g(e,t,n,r);this.timelines.push(i)}}])}()},function(e,t,n){var r=n(1),i=n(15),o=n(14),a=n(32)("src"),s=n(157),u=(""+s).split("toString");n(7).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t,n){var r=n(0),i=n(2),o=n(26),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(9),i=n(31);e.exports=n(8)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(52),i=n(26);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(20);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(53),i=n(31),o=n(16),a=n(28),s=n(14),u=n(104),c=Object.getOwnPropertyDescriptor;t.f=n(8)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(0),i=n(7),o=n(2);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){var r=n(19),i=n(52),o=n(10),a=n(6),s=n(120);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var g,y,v=o(t),m=i(v),b=r(s,p,3),w=a(m.length),S=0,_=n?h(t,w):u?h(t,0):void 0;w>S;S++)if((d||S in m)&&(g=m[S],y=b(g,S,v),e))if(n)_[S]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return S;case 2:_.push(g)}else if(l)return!1;return f?-1:c||l?l:_}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";if(n(8)){var r=n(33),i=n(1),o=n(2),a=n(0),s=n(69),u=n(96),c=n(19),l=n(47),f=n(31),d=n(15),h=n(48),p=n(21),g=n(6),y=n(131),v=n(35),m=n(28),b=n(14),w=n(54),S=n(4),_=n(10),T=n(88),k=n(36),E=n(38),A=n(37).f,x=n(90),C=n(32),P=n(5),I=n(24),j=n(59),M=n(55),O=n(92),R=n(45),D=n(62),L=n(46),N=n(91),U=n(122),B=n(9),F=n(22),H=B.f,V=F.f,W=i.RangeError,K=i.TypeError,q=i.Uint8Array,G=Array.prototype,z=u.ArrayBuffer,X=u.DataView,Y=I(0),J=I(2),$=I(3),Q=I(4),Z=I(5),ee=I(6),te=j(!0),ne=j(!1),re=O.values,ie=O.keys,oe=O.entries,ae=G.lastIndexOf,se=G.reduce,ue=G.reduceRight,ce=G.join,le=G.sort,fe=G.slice,de=G.toString,he=G.toLocaleString,pe=P("iterator"),ge=P("toStringTag"),ye=C("typed_constructor"),ve=C("def_constructor"),me=s.CONSTR,be=s.TYPED,we=s.VIEW,Se=I(1,function(e,t){return Ae(M(e,e[ve]),t)}),_e=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Te=!!q&&!!q.prototype.set&&o(function(){new q(1).set({})}),ke=function(e,t){var n=p(e);if(n<0||n%t)throw W("Wrong offset!");return n},Ee=function(e){if(S(e)&&be in e)return e;throw K(e+" is not a typed array!")},Ae=function(e,t){if(!(S(e)&&ye in e))throw K("It is not a typed array constructor!");return new e(t)},xe=function(e,t){return Ce(M(e,e[ve]),t)},Ce=function(e,t){for(var n=0,r=t.length,i=Ae(e,r);r>n;)i[n]=t[n++];return i},Pe=function(e,t,n){H(e,t,{get:function(){return this._d[n]}})},Ie=function(e){var t,n,r,i,o,a,s=_(e),u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,d=x(s);if(void 0!=d&&!T(d)){for(a=d.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(f&&u>2&&(l=c(l,arguments[2],2)),t=0,n=g(s.length),i=Ae(this,n);n>t;t++)i[t]=f?l(s[t],t):s[t];return i},je=function(){for(var e=0,t=arguments.length,n=Ae(this,t);t>e;)n[e]=arguments[e++];return n},Me=!!q&&o(function(){he.call(new q(1))}),Oe=function(){return he.apply(Me?fe.call(Ee(this)):Ee(this),arguments)},Re={copyWithin:function(e,t){return U.call(Ee(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Q(Ee(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return N.apply(Ee(this),arguments)},filter:function(e){return xe(this,J(Ee(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(Ee(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Ee(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Y(Ee(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Ee(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Ee(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(Ee(this),arguments)},lastIndexOf:function(e){return ae.apply(Ee(this),arguments)},map:function(e){return Se(Ee(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Ee(this),arguments)},reduceRight:function(e){return ue.apply(Ee(this),arguments)},reverse:function(){for(var e,t=this,n=Ee(t).length,r=Math.floor(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t},some:function(e){return $(Ee(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return le.call(Ee(this),e)},subarray:function(e,t){var n=Ee(this),r=n.length,i=v(e,r);return new(M(n,n[ve]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,g((void 0===t?r:v(t,r))-i))}},De=function(e,t){return xe(this,fe.call(Ee(this),e,t))},Le=function(e){Ee(this);var t=ke(arguments[1],1),n=this.length,r=_(e),i=g(r.length),o=0;if(i+t>n)throw W("Wrong length!");for(;o<i;)this[t+o]=r[o++]},Ne={entries:function(){return oe.call(Ee(this))},keys:function(){return ie.call(Ee(this))},values:function(){return re.call(Ee(this))}},Ue=function(e,t){return S(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Be=function(e,t){return Ue(e,t=m(t,!0))?f(2,e[t]):V(e,t)},Fe=function(e,t,n){return!(Ue(e,t=m(t,!0))&&S(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?H(e,t,n):(e[t]=n.value,e)};me||(F.f=Be,B.f=Fe),a(a.S+a.F*!me,"Object",{getOwnPropertyDescriptor:Be,defineProperty:Fe}),o(function(){de.call({})})&&(de=he=function(){return ce.call(this)});var He=h({},Re);h(He,Ne),d(He,pe,Ne.values),h(He,{slice:De,set:Le,constructor:function(){},toString:de,toLocaleString:Oe}),Pe(He,"buffer","b"),Pe(He,"byteOffset","o"),Pe(He,"byteLength","l"),Pe(He,"length","e"),H(He,ge,{get:function(){return this[be]}}),e.exports=function(e,t,n,u){u=!!u;var c=e+(u?"Clamped":"")+"Array",f="get"+e,h="set"+e,p=i[c],v=p||{},m=p&&E(p),b=!p||!s.ABV,_={},T=p&&p.prototype,x=function(e,n){var r=e._d;return r.v[f](n*t+r.o,_e)},C=function(e,n,r){var i=e._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[h](n*t+i.o,r,_e)},P=function(e,t){H(e,t,{get:function(){return x(this,t)},set:function(e){return C(this,t,e)},enumerable:!0})};b?(p=n(function(e,n,r,i){l(e,p,c,"_d");var o,a,s,u,f=0,h=0;if(S(n)){if(!(n instanceof z||"ArrayBuffer"==(u=w(n))||"SharedArrayBuffer"==u))return be in n?Ce(p,n):Ie.call(p,n);o=n,h=ke(r,t);var v=n.byteLength;if(void 0===i){if(v%t)throw W("Wrong length!");if((a=v-h)<0)throw W("Wrong length!")}else if((a=g(i)*t)+h>v)throw W("Wrong length!");s=a/t}else s=y(n),a=s*t,o=new z(a);for(d(e,"_d",{b:o,o:h,l:a,e:s,v:new X(o)});f<s;)P(e,f++)}),T=p.prototype=k(He),d(T,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&D(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=n(function(e,n,r,i){l(e,p,c);var o;return S(n)?n instanceof z||"ArrayBuffer"==(o=w(n))||"SharedArrayBuffer"==o?void 0!==i?new v(n,ke(r,t),i):void 0!==r?new v(n,ke(r,t)):new v(n):be in n?Ce(p,n):Ie.call(p,n):new v(y(n))}),Y(m!==Function.prototype?A(v).concat(A(m)):A(v),function(e){e in p||d(p,e,v[e])}),p.prototype=T,r||(T.constructor=p));var I=T[pe],j=!!I&&("values"==I.name||void 0==I.name),M=Ne.values;d(p,ye,!0),d(T,be,c),d(T,we,!0),d(T,ve,p),(u?new p(1)[ge]==c:ge in T)||H(T,ge,{get:function(){return c}}),_[c]=p,a(a.G+a.W+a.F*(p!=v),_),a(a.S,c,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o(function(){v.of.call(p,1)}),c,{from:Ie,of:je}),"BYTES_PER_ELEMENT"in T||d(T,"BYTES_PER_ELEMENT",t),a(a.P,c,Re),L(c),a(a.P+a.F*Te,c,{set:Le}),a(a.P+a.F*!j,c,Ne),r||T.toString==de||(T.toString=de),a(a.P+a.F*o(function(){new p(1).slice()}),c,{slice:De}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){T.toLocaleString.call([1,2])})),c,{toLocaleString:Oe}),R[c]=j?I:M,r||j||d(T,pe,M)}}else e.exports=function(){}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(32)("meta"),i=n(4),o=n(14),a=n(9).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(2)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return c&&p.NEED&&u(e)&&!o(e,r)&&l(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(e,t,n){"use strict";function r(){return!l()&&-1!==window.navigator.userAgent.indexOf("Safari")&&-1===window.navigator.userAgent.indexOf("Chrome")}function i(){var e=window.chrome,t=window.navigator,n=t.vendor,r=void 0!==window.opr,i=t.userAgent.indexOf("Edge")>-1;return!!t.userAgent.match("CriOS")||null!==e&&void 0!==e&&"Google Inc."===n&&!1===r&&!1===i}function o(){return window.navigator.userAgent.toLowerCase().includes("web0s")}function a(){return window.navigator.userAgent.toLowerCase().includes("samsung")&&window.navigator.userAgent.toLowerCase().includes("hbbtv")}function s(){return window.navigator.userAgent.toLowerCase().includes("x11; linux")&&window.navigator.userAgent.toLowerCase().includes("chrome/83")}function u(){return s()}function c(){return window.navigator.userAgent.toLowerCase().includes("vestel")}function l(){return window.navigator.userAgent.toLowerCase().includes("smart")}function f(){return window.navigator.userAgent.toLowerCase().includes("xbox")}function d(){return window.navigator.userAgent.toLowerCase().includes("hbbtv")}function h(){var e=/tizen\W[\d|.]+/g,t=window.navigator.userAgent.toLocaleLowerCase().match(e);if(t){var n=t[0].slice("tizen ".length);return Number(n)}return NaN}function p(){var e=h();return!isNaN(e)&&e>=5.5}t.a={isSafari:r,isChrome:i,isSmartTV:l,isXbox:f,isHbbtv:d,isVestel:c,isTVKeyCapable:a,getTizenVersion:h,isLateTizen:p,isWebOS:o,isNagraCONNECTCapable:u}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(106),i=n(75);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(21),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(3),i=n(107),o=n(75),a=n(74)("IE_PROTO"),s=function(){},u=function(){var e,t=n(72)("iframe"),r=o.length;for(t.style.display="none",n(76).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(106),i=n(75).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(14),i=n(10),o=n(74)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(5)("unscopables"),i=Array.prototype;void 0==i[r]&&n(15)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";function r(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}function i(e){var t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)}function o(e){var t=new Uint8Array(e);return String.fromCharCode.apply(null,t)}function a(e){for(var t=new ArrayBuffer(e.length*u),n=new Uint16Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}function s(e){return btoa(new Uint8Array(e).reduce(function(e,t){return e+String.fromCharCode(t)},""))}var u=2;t.a={base64DecodeUint8Array:r,arrayToString:i,arrayBufferToString:o,stringToArray:a,toBase64:s}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return c});var c=function(){function e(){i(this,e)}return a(e,[{key:"ready",value:function(){}},{key:"updateSourceData",value:function(e){return e}},{key:"tearDown",value:function(){}},{key:"renewLicence",value:function(){}}])}()},function(e,t,n){var r=n(9).f,i=n(14),o=n(5)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(0),i=n(26),o=n(2),a=n(78),s="["+a+"]",u="​",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),f=function(e,t,n){var i={},s=o(function(){return!!a[e]()||u[e]()!=u}),c=i[e]=s?t(d):a[e];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},d=f.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=f},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(1),i=n(9),o=n(8),a=n(5)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(12);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=c(e,"string");return"symbol"==r(t)?t:t+""}function c(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(e,t,n){return t=v(t),f(e,h()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function f(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(e,t,n,r){var i=g(v(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=y(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},g.apply(null,arguments)}function y(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}n.d(t,"a",function(){return E}),n.d(t,"b",function(){return x});var S=n(42),_=n(11),T=n(30),k=n(351),E=function(e){function t(e,n,r){var i;return o(this,t),i=l(this,t),i.log=n,i.vjsPlayer=r,i.drmDetails=e,i._persistentState=new k.a(T.a.isSmartTV()),i.timeline=i._makeTimelineLogger(),i}return m(t,e),s(t,[{key:"ready",value:function(e){this.vjsPlayer.tech_.shaka_&&(this._setWidevineAdvancedDrm(),this._configureDrm(),this.vjsPlayer&&this.vjsPlayer.tech_&&this.timeline._registerShakaFilters(this.vjsPlayer.tech_.shaka_),p(t,"ready",this,3)([e]))}},{key:"tearDown",value:function(){return this.vjsPlayer&&this.vjsPlayer.tech_,this.token="",this.source=void 0,p(t,"tearDown",this,3)([])}},{key:"updateSourceData",value:function(e){this.token=e.token,this.vjsPlayer&&this.vjsPlayer.tech_.shaka_&&this._configureDrm();var n=/\.mpd/i;return void 0===e.type&&n.test(e.src)&&(e.type="application/dash+xml"),this.timeline.setSource(e),this.source=p(t,"updateSourceData",this,3)([e]),this.source}},{key:"renewLicence",value:function(){p(t,"renewLicence",this,3)([]),this.vjsPlayer.tech_.shaka_&&this.vjsPlayer.tech_.shaka_.requestLicence?this.vjsPlayer.tech_.shaka_.requestLicence():this.log("Unable to request new licence. No tech capability")}},{key:"_makeTimelineLogger",value:function(){return new x}},{key:"_setWidevineAdvancedDrm",value:function(){var e={},t=this._getWidevineServerCertificate(),n=this._getPersistentState();t&&(!T.a.isSmartTV()||!T.a.isTVKeyCapable()&&T.a.isLateTizen())&&(e.serverCertificate=t),n&&(e.persistentStateRequired="required"===n),this.vjsPlayer.tech_.shaka_&&e!=={}&&this.vjsPlayer.tech_.shaka_.configure({drm:{advanced:{"com.widevine.alpha":e}}})}},{key:"_getPersistentState",value:function(){var e="optional";return this.drmDetails&&this.drmDetails.config["com.widevine.alpha"]&&this.drmDetails.config["com.widevine.alpha"].persistentState&&(e=this._persistentState.adjustDefault(this.drmDetails.config["com.widevine.alpha"].persistentState)),this.log("PersistentState is "+e),e}},{key:"_configureDrm",value:function(){}},{key:"_getWidevineServerCertificate",value:function(){var e;return this.drmDetails&&this.drmDetails.config&&this.drmDetails.config.widevineServerCertificate&&(e=w(this.drmDetails.config.widevineServerCertificate)),e}},{key:"_configureSingleSession",value:function(){this.singleSessionController=new A(this.vjsPlayer,this.vjsPlayer.tech_.shaka_)}}])}(S.a),A=function(){function e(t,n){o(this,e),this.requestedLicence=!1,this._onLoadstartHandle=this._onLoadstart.bind(this),this._licenceRequiredHandle=this._licenceRequiredCallback.bind(this),n.setLicenceRequiredCallback&&(n.setLicenceRequiredCallback(this._licenceRequiredHandle),t.off("loadstart",this._onLoadstartHandle),t.on("loadstart",this._onLoadstartHandle))}return s(e,[{key:"_onLoadstart",value:function(){this.requestedLicence=!1}},{key:"_licenceRequiredCallback",value:function(){return this.requestedLicence?[!0,!1]:(this.requestedLicence=!0,[!1,!1])}}])}(),x=function(){function e(){o(this,e),this.url="",this.provision=!1,this.requestFilterHandle=this._shakaRequestFilter.bind(this),this.responseFilterHandle=this._shakaResponseFilter.bind(this)}return s(e,[{key:"setSource",value:function(e){this.url=e.src||e}},{key:"tearDown",value:function(){this.provision=!1}},{key:"_registerShakaFilters",value:function(e){e&&(this._unregisterShakaFilters(e),e.addEventListener("error",this._onErrorEvent.bind(this)),e.getNetworkingEngine().registerRequestFilter(this.requestFilterHandle),e.getNetworkingEngine().registerResponseFilter(this.responseFilterHandle))}},{key:"_unregisterShakaFilters",value:function(e){e&&(e.getNetworkingEngine().unregisterRequestFilter(this.requestFilterHandle),e.getNetworkingEngine().unregisterResponseFilter(this.responseFilterHandle))}},{key:"_onErrorEvent",value:function(e){if(6007===e.detail.code){var t,n=_.g.licenseRequest,r=i({},_.e.url,this.url);r[_.e.error]=e.detail.message,t=this.provision?_.a.provisionRequestFailed:_.a.keyRequestFailed;var o=JSON.stringify(r);OTV.eventTimeline.addToTimeline(n,t,o)}}},{key:"_shakaRequestFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE){var n=_.g.licenseRequest,r=JSON.stringify(i({},_.e.url,this.url));this.provision=t.body.byteLength<100;var o=this.provision?_.a.provisionRequestStart:_.a.keyRequestStart;OTV.eventTimeline.addToTimeline(n,o,r)}}},{key:"_shakaResponseFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE){var n,r=this.url?this.url:t.url,o=_.g.licenseRequest,a=i({},_.e.url,r);n=this.provision?_.a.provisionRequestSuccessful:_.a.keyRequestSuccessful;var s=JSON.stringify(a);OTV.eventTimeline.addToTimeline(o,n,s)}}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=f(e,"string");return"symbol"==r(t)?t:t+""}function f(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"c",function(){return g}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h});var d="customer",h="otv",p=[h,d],g=function(){function e(){s(this,e),this.configs={};var t,n=i(p);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.configs[r]={}}}catch(e){n.e(e)}finally{n.f()}this.tech=void 0}return c(e,[{key:"setTech",value:function(e){this.tech=e,e&&this._applyConfig()}},{key:"getConfiguration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p[0];return this.tech?this.tech.getConfiguration():JSON.parse(JSON.stringify(this.configs[e]))}},{key:"configure",value:function(e,t,n){var i=t;return 3===arguments.length&&"string"==typeof t&&(i=shaka.util.ConfigUtils.convertToConfigObject(t,n)),"object"===r(i)&&(!!p.includes(e)&&(this._mergeConfigObjects(this.configs[e],i),!this.tech||this._applyConfig()))}},{key:"_applyConfig",value:function(){for(var e={},t=0,n=p;t<n.length;t++){var r=n[t];this._mergeConfigObjects(e,this.configs[r])}return this.tech.configure(e)}},{key:"_mergeConfigObjects",value:function(e,t){for(var n in t)t[n]&&t[n].constructor===Object?(e[n]||(e[n]={}),this._mergeConfigObjects(e[n],t[n])):e[n]=t[n]}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c=n(103),l=function(){function e(t){i(this,e),this.videojs=t,this.eventListeners=new c.a.ListenerList}return a(e,[{key:"_getShakaPlayerInstance",value:function(){var e;return this.videojs&&this.videojs.tech_&&(e=this.videojs.tech_.shaka_),e}},{key:"addListener",value:function(e){this.eventListeners.add(e)}},{key:"removeListener",value:function(e){this.eventListeners.remove(e)}},{key:"setListener",value:function(e){this.listener=e}},{key:"dispose",value:function(){this.eventListeners.clear(),this.eventListeners=null,this.videojs=null}}])}();t.a={Statistics:l}},function(e,t,n){var r=n(25);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(25),i=n(5)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r=n(3),i=n(20),o=n(5)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){(function(t){e.exports=t.otvplayer=n(342)}).call(t,n(18))},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return l});var c=function(){function e(t,n){i(this,e),this.logger=t,this.type=n,this.string=""}return a(e,[{key:"addType",value:function(){return this.string+=this.type,this}},{key:"log",value:function(){return this.logger(this.string),this}},{key:"warn",value:function(){return this.logger.warn(this.string),this}},{key:"error",value:function(){return this.logger.error(this.string),this}},{key:"debug",value:function(){return this.logger.debug(this.string),this}},{key:"message",value:function(e){return this.string+=e,this}},{key:"throw",value:function(){throw new Error(this.string)}}])}(),l=function(){function e(t,n){i(this,e),this.logger=t,this.type=n}return a(e,[{key:"addType",value:function(){return new c(this.logger,this.type).addType()}},{key:"message",value:function(e){return new c(this.logger,this.type).message(e)}}])}()},function(e,t,n){var r=n(7),i=n(1),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(33)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(16),i=n(6),o=n(35);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(25);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(5)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(3);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(54),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(124);var r=n(12),i=n(15),o=n(2),a=n(26),s=n(5),u=n(93),c=s("species"),l=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var d=s(e),h=!o(function(){var t={};return t[d]=function(){return 7},7!=""[e](t)}),p=h?!o(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[d](""),!t}):void 0;if(!h||!p||"replace"===e&&!l||"split"===e&&!f){var g=/./[d],y=n(a,d,""[e],function(e,t,n,r,i){return t.exec===u?h&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),v=y[0],m=y[1];r(String.prototype,e,v),i(RegExp.prototype,d,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})}}},function(e,t,n){var r=n(19),i=n(119),o=n(88),a=n(3),s=n(6),u=n(90),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,g,y,v=d?function(){return e}:u(e),m=r(n,f,t?2:1),b=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(h=s(e.length);h>b;b++)if((y=t?m(a(p=e[b])[0],p[1]):m(e[b]))===c||y===l)return y}else for(g=v.call(e);!(p=g.next()).done;)if((y=i(g,m,p.value,t))===c||y===l)return y};t.BREAK=c,t.RETURN=l},function(e,t,n){var r=n(1),i=r.navigator;e.exports=i&&i.userAgent||""},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(12),a=n(48),s=n(29),u=n(66),c=n(47),l=n(4),f=n(2),d=n(62),h=n(43),p=n(79);e.exports=function(e,t,n,g,y,v){var m=r[e],b=m,w=y?"set":"add",S=b&&b.prototype,_={},T=function(e){var t=S[e];o(S,e,"delete"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(v||S.forEach&&!f(function(){(new b).entries().next()}))){var k=new b,E=k[w](v?{}:-0,1)!=k,A=f(function(){k.has(1)}),x=d(function(e){new b(e)}),C=!v&&f(function(){for(var e=new b,t=5;t--;)e[w](t,t);return!e.has(-0)});x||(b=t(function(t,n){c(t,b,e);var r=p(new m,t,b);return void 0!=n&&u(n,y,r[w],r),r}),b.prototype=S,S.constructor=b),(A||C)&&(T("delete"),T("has"),y&&T("get")),(C||E)&&T(w),v&&S.clear&&delete S.clear}else b=g.getConstructor(t,e,y,w),a(b.prototype,n),s.NEED=!0;return h(b,e),_[e]=b,i(i.G+i.W+i.F*(b!=m),_),v||g.setStrong(b,e,y),b}},function(e,t,n){for(var r,i=n(1),o=n(15),a=n(32),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[d[f++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(e,t,n){"use strict";function r(e,t,n,r){var a=e;return a+="/".concat(t),a+=i(n),a+="/contentlicenseservice/v1",a+=o(r)}function i(e){var t=null;switch(e.toLowerCase()){case"fairplay":t="fpls";break;case"playready":t="prls";break;case"widevine":t="wvls";break;case"tvkey":t="tkls";break;case"nagra":t="prmls"}return"/".concat(t)}function o(e){var t=null;return"License"===e?t="licenses":"Cert"===e&&(t="certificates"),"/".concat(t)}t.a={buildUrlWith:r,drmSpecificSeparatorFor:i,requestSpecificSuffixFor:o}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e){for(var t=e.trim().toLowerCase(),n=null,r=0,i=Object.keys(v);r<i.length;r++){var o=i[r];if(t.includes(o)){n=v[o];break}}return n}function l(e){var t=null;return m.includes(e)?t=y:e===g&&(t=g),t}function f(e){var t=null;return e.headers.hasOwnProperty("content-type")&&(t=l(e.headers["content-type"])),t}function d(e){var t=null;return e.startsWith("#EXTM3U")?t=y:e.includes("MPD")&&(t=g),t}var h=n(371),p=n.n(h),g="application/dash+xml",y="application/x-mpegURL",v={};v[".m3u8"]=y,v[".mpd"]=g,v["manifest(format=m3u8-aapl)"]=y,v["manifest(format=mpd-time-csf)"]=g;var m=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.a;i(this,e),this.XMLHttpRequester=t}return a(e,[{key:"build",value:function(e,t){var n=this;return t?Promise.resolve({src:e,type:t}):new Promise(function(t,r){var i=c(e);i?t({src:e,type:i}):n._getMimeTypeFromManifest(e,t,r)})}},{key:"_getMimeTypeFromManifest",value:function(e,t,n){var r=this;(new this.XMLHttpRequester).send({method:"HEAD",url:e}).then(function(i){if(200!==i.status)throw new Error("Invalid URL given");var o=f(i);o?t({src:e,type:o}):r._parseManifestForMimeType(e,t,n)}).catch(function(){r._parseManifestForMimeType(e,t,n)})}},{key:"_parseManifestForMimeType",value:function(e,t,n){(new this.XMLHttpRequester).send({method:"GET",url:e}).then(function(n){if(200!==n.status)throw new Error("Invalid URL given");var r=d(n.responseText);if(!r)throw new Error("Cannot play given manifest");t({src:e,type:r})}).catch(function(){n("XHR Error")})}}])}();t.a={SourceBuilder:b}},function(e,t,n){var r=n(4),i=n(1).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){t.f=n(5)},function(e,t,n){var r=n(58)("keys"),i=n(32);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(1).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(4),i=n(3),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(19)(Function.call,n(22).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(4),i=n(77).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(21),i=n(26);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(21),i=n(26);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(33),i=n(0),o=n(12),a=n(15),s=n(45),u=n(118),c=n(43),l=n(38),f=n(5)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,p,g,y,v){u(n,t,p);var m,b,w,S=function(e){if(!d&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},_=t+" Iterator",T="values"==g,k=!1,E=e.prototype,A=E[f]||E["@@iterator"]||g&&E[g],x=A||S(g),C=g?T?S("entries"):x:void 0,P="Array"==t?E.entries||A:A;if(P&&(w=l(P.call(new e)))!==Object.prototype&&w.next&&(c(w,_,!0),r||"function"==typeof w[f]||a(w,f,h)),T&&A&&"values"!==A.name&&(k=!0,x=function(){return A.call(this)}),r&&!v||!d&&!k&&E[f]||a(E,f,x),s[t]=x,s[_]=h,g)if(m={values:T?x:S("values"),keys:y?x:S("keys"),entries:C},v)for(b in m)b in E||o(E,b,m[b]);else i(i.P+i.F*(d||k),t,m);return m}},function(e,t,n){var r=n(86),i=n(26);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(4),i=n(25),o=n(5)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(5)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(45),i=n(5)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(9),i=n(31);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(54),i=n(5)("iterator"),o=n(45);e.exports=n(7).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";var r=n(10),i=n(35),o=n(6);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(39),i=n(123),o=n(45),a=n(16);e.exports=n(84)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r=n(63),i=RegExp.prototype.exec,o=String.prototype.replace,a=i,s=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=void 0!==/()??/.exec("")[1];(s||u)&&(a=function(e){var t,n,a,c,l=this;return u&&(n=new RegExp("^"+l.source+"$(?!\\s)",r.call(l))),s&&(t=l.lastIndex),a=i.call(l,e),s&&a&&(l.lastIndex=l.global?a.index+a[0].length:t),u&&a&&a.length>1&&o.call(a[0],n,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)}),a}),e.exports=a},function(e,t,n){"use strict";var r=n(83)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r,i,o,a=n(19),s=n(112),u=n(76),c=n(72),l=n(1),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,g=l.Dispatch,y=0,v={},m=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},b=function(e){m.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++y]=function(){s("function"==typeof e?e:Function(e),t)},r(y),y},h=function(e){delete v[e]},"process"==n(25)(f)?r=function(e){f.nextTick(a(m,e,1))}:g&&g.now?r=function(e){g.now(a(m,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(e)}}:function(e){setTimeout(a(m,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,n){"use strict";function r(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?U(2,-24)-U(2,-77):0,f=0,d=e<0||0===e&&1/e<0?1:0;for(e=N(e),e!=e||e===D?(i=e!=e?1:0,r=u):(r=B(F(e)/H),e*(o=U(2,-r))<1&&(r--,o*=2),e+=r+c>=1?l/o:l*U(2,1-c),e*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(e*o-1)*U(2,t),r+=c):(i=e*U(2,c-1)*U(2,t),r=0));t>=8;a[f++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*d,a}function i(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=t;s>0;r=256*r+e[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-D:D;r+=U(2,t),l-=a}return(c?-1:1)*r*U(2,l-t)}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function a(e){return[255&e]}function s(e){return[255&e,e>>8&255]}function u(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function c(e){return r(e,52,8)}function l(e){return r(e,23,4)}function f(e,t,n){A(e[P],t,{get:function(){return this[n]}})}function d(e,t,n,r){var i=+n,o=k(i);if(o+t>e[W])throw R(I);var a=e[V]._b,s=o+e[K],u=a.slice(s,s+t);return r?u:u.reverse()}function h(e,t,n,r,i,o){var a=+n,s=k(a);if(s+t>e[W])throw R(I);for(var u=e[V]._b,c=s+e[K],l=r(+i),f=0;f<t;f++)u[c+f]=l[o?f:t-f-1]}var p=n(1),g=n(8),y=n(33),v=n(69),m=n(15),b=n(48),w=n(2),S=n(47),_=n(21),T=n(6),k=n(131),E=n(37).f,A=n(9).f,x=n(91),C=n(43),P="prototype",I="Wrong index!",j=p.ArrayBuffer,M=p.DataView,O=p.Math,R=p.RangeError,D=p.Infinity,L=j,N=O.abs,U=O.pow,B=O.floor,F=O.log,H=O.LN2,V=g?"_b":"buffer",W=g?"_l":"byteLength",K=g?"_o":"byteOffset";if(v.ABV){if(!w(function(){j(1)})||!w(function(){new j(-1)})||w(function(){return new j,new j(1.5),new j(NaN),"ArrayBuffer"!=j.name})){j=function(e){return S(this,j),new L(k(e))};for(var q,G=j[P]=L[P],z=E(L),X=0;z.length>X;)(q=z[X++])in j||m(j,q,L[q]);y||(G.constructor=j)}var Y=new M(new j(2)),J=M[P].setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||b(M[P],{setInt8:function(e,t){J.call(this,e,t<<24>>24)},setUint8:function(e,t){J.call(this,e,t<<24>>24)}},!0)}else j=function(e){S(this,j,"ArrayBuffer");var t=k(e);this._b=x.call(new Array(t),0),this[W]=t},M=function(e,t,n){S(this,M,"DataView"),S(e,j,"DataView");var r=e[W],i=_(t);if(i<0||i>r)throw R("Wrong offset!");if(n=void 0===n?r-i:T(n),i+n>r)throw R("Wrong length!");this[V]=e,this[K]=i,this[W]=n},g&&(f(j,"byteLength","_l"),f(M,"buffer","_b"),f(M,"byteLength","_l"),f(M,"byteOffset","_o")),b(M[P],{getInt8:function(e){return d(this,1,e)[0]<<24>>24},getUint8:function(e){return d(this,1,e)[0]},getInt16:function(e){var t=d(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=d(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return o(d(this,4,e,arguments[1]))},getUint32:function(e){return o(d(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return i(d(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return i(d(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){h(this,1,e,a,t)},setUint8:function(e,t){h(this,1,e,a,t)},setInt16:function(e,t){h(this,2,e,s,t,arguments[2])},setUint16:function(e,t){h(this,2,e,s,t,arguments[2])},setInt32:function(e,t){h(this,4,e,u,t,arguments[2])},setUint32:function(e,t){h(this,4,e,u,t,arguments[2])},setFloat32:function(e,t){h(this,4,e,l,t,arguments[2])},setFloat64:function(e,t){h(this,8,e,c,t,arguments[2])}});C(j,"ArrayBuffer"),C(M,"DataView"),m(M[P],v.VIEW,!0),t.ArrayBuffer=j,t.DataView=M},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(136)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=c(e,"string");return"symbol"==r(t)?t:t+""}function c(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return h});var l=n(11),f=n(41),d=n(139),h=function(){function e(t){o(this,e),this.drmOptions=t.drmOptions,this.logger=t.logger,this.drmOptions.licenceServer||this.logger.addType().message(" FairPlay licenceServer not configured!").warn(),this.drmImplementer=d.a.getDrmImplementation(this.drmOptions.system)}return s(e,[{key:"setToken",value:function(e){this.token=e}},{key:"request",value:function(e,t){var n=this;this.logger.message("Function: FairPlayLicenceRequester.request()").log();var r=this._getLicenceUri(t),i={method:"POST",mode:"cors",redirect:"follow",headers:{Accept:"application/json","Content-Type":"application/octet-stream","nv-authorizations":this._getTokenString(t)},body:e};return this._logKeyRequestStatTimelineEvent(t,r),new Promise(function(e,o){var a=n;fetch(r,i).then(function(i){if(i.ok){a._logKeyStatSuccessTimelineEvent(t,r);var s=i.clone();i.json().then(function(t){n.logger.message("CkcMessage (JSON): "+t.CkcMessage).debug(),e(f.a.base64DecodeUint8Array(t.CkcMessage))}).catch(function(){n.logger.message("CkcMessage (Binary) received").debug(),s.arrayBuffer().then(function(t){e(t)})})}else{var u="licence request failed";a.logger.message(u).warn(),a._logKeyRequestStatFailureTimelineEvent(t,r,u),o(u)}}).catch(function(e){o("Error on licence request: ".concat(JSON.stringify(e)))})})}},{key:"_getLicenceUri",value:function(){return this.drmOptions.licenceServer}},{key:"_getTokenString",value:function(){return this.token}},{key:"_logKeyRequestStatTimelineEvent",value:function(e,t){this._logTimelineEvent(l.a.keyRequestStart,t)}},{key:"_logKeyStatSuccessTimelineEvent",value:function(e,t){this._logTimelineEvent(l.a.keyRequestSuccessful,t)}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e,t,n){this._logTimelineEvent(l.a.keyRequestFailed,t,n)}},{key:"_logTimelineEvent",value:function(e,t,n){var r="";r=n?JSON.stringify(i(i({},l.e.url,t),l.e.error,n)):JSON.stringify(i({},l.e.url,t)),OTV.eventTimeline.addToTimeline(l.g.licenseRequest,e,r)}}])}()},function(e,t,n){"use strict";function r(e){var t=e.drmOptions["com.apple.fps"],n=Boolean(navigator.requestMediaKeySystemAccess);if(t&&t.useLegacyEME||!n){var r=n?"Legacy EME selected by configuration":"Legacy EME selected. MediaKey not available";return e.logger.message(r).log(),new i.a(e)}return e.logger.message("MediaKey EME selected").log(),new o.a(e)}t.a=r;var i=n(348),o=n(349)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return c});var c=function(){function e(t){i(this,e),this.logger=t.logger,this.certificateRequester=t.certificateRequester,this.drmOptions=t.drmOptions,this.licenceRequester=t.licenceRequester}return a(e,[{key:"setVideoElement",value:function(e){this._supportKeySystem()&&(this.videoElement=e,this.onVideoEncryptedHandle=this._onVideoEncrypted.bind(this),this.onVideoErrorHandle=this._onVideoError.bind(this),this._setEncryptedListener(e,this.onVideoEncryptedHandle),e.addEventListener("error",this.onVideoErrorHandle,!1))}},{key:"dispose",value:function(){this.videoElement&&(this._removeEncryptedListener(this.videoElement,this.onVideoEncryptedHandle),this.videoElement.removeEventListener("error",this.onVideoErrorHandle,!1),this.videoElement=void 0)}},{key:"tearDown",value:function(){}},{key:"renewLicence",value:function(){throw new Error("DecryptionInterface.renewLicence() not supported for this decryption type")}},{key:"_setEncryptedListener",value:function(e,t){throw new Error("DecryptionInterface._setEncryptedListener() must be overridden by derived class")}},{key:"_removeEncryptedListener",value:function(e,t){throw new Error("DecryptionInterface._removeEncryptedListener() must be overridden by derived class")}},{key:"_supportKeySystems",value:function(){throw new Error("DecryptionInterface._supportKeySystems() must be overridden by derived class")}},{key:"_onVideoEncrypted",value:function(){throw new Error("DecryptionInterface._onVideoEncrypted() must be overridden by derived class")}},{key:"_onVideoError",value:function(e){var t="A video playback error occurred";throw e.target&&e.target.error&&(t=t+" - Event error code: "+e.target.error.code+" - Event error message: "+e.target.error.message),new Error(t)}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c=function(){function e(){i(this,e),this.listenerArray=[]}return a(e,[{key:"add",value:function(e){this.contain(e)||this.listenerArray.push(e)}},{key:"remove",value:function(e){var t=this.listenerArray.indexOf(e);t>=0&&this.listenerArray.splice(t,1)}},{key:"contain",value:function(e){return this.listenerArray.indexOf(e)>=0}},{key:"length",value:function(){return this.listenerArray.length}},{key:"get",value:function(e){return this.listenerArray[e]}},{key:"clear",value:function(){this.listenerArray=[]}}])}();t.a={ListenerList:c}},function(e,t,n){e.exports=!n(8)&&!n(2)(function(){return 7!=Object.defineProperty(n(72)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(1),i=n(7),o=n(33),a=n(73),s=n(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(14),i=n(16),o=n(59)(!1),a=n(74)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(9),i=n(3),o=n(34);e.exports=n(8)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(16),i=n(37).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){"use strict";var r=n(8),i=n(34),o=n(60),a=n(53),s=n(10),u=n(52),c=Object.assign;e.exports=!c||n(2)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=s(e),c=arguments.length,l=1,f=o.f,d=a.f;c>l;)for(var h,p=u(arguments[l++]),g=f?i(p).concat(f(p)):i(p),y=g.length,v=0;y>v;)h=g[v++],r&&!d.call(p,h)||(n[h]=p[h]);return n}:c},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(20),i=n(4),o=n(112),a=[].slice,s={},u=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(1).parseInt,i=n(44).trim,o=n(78),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(1).parseFloat,i=n(44).trim;e.exports=1/r(n(78)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(25);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(4),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";var r=n(36),i=n(31),o=n(43),a={};n(15)(a,n(5)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(3);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(247);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(20),i=n(10),o=n(52),a=n(6);e.exports=function(e,t,n,s,u){r(t);var c=i(e),l=o(c),f=a(c.length),d=u?f-1:0,h=u?-1:1;if(n<2)for(;;){if(d in l){s=l[d],d+=h;break}if(d+=h,u?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;u?d>=0:f>d;d+=h)d in l&&(s=t(s,l[d],d,c));return s}},function(e,t,n){"use strict";var r=n(10),i=n(35),o=n(6);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),u=i(t,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),f=1;for(u<s&&s<u+l&&(f=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=f,u+=f;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(93);n(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(8)&&"g"!=/./g.flags&&n(9).f(RegExp.prototype,"flags",{configurable:!0,get:n(63)})},function(e,t,n){"use strict";var r,i,o,a,s=n(33),u=n(1),c=n(19),l=n(54),f=n(0),d=n(4),h=n(20),p=n(47),g=n(66),y=n(55),v=n(95).set,m=n(267)(),b=n(127),w=n(268),S=n(67),_=n(128),T=u.TypeError,k=u.process,E=k&&k.versions,A=E&&E.v8||"",x=u.Promise,C="process"==l(k),P=function(){},I=i=b.f,j=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[n(5)("species")]=function(e){e(P,P)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==A.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(e){}}(),M=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},O=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(i||(2==e._h&&L(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?c(T("Promise-chain cycle")):(o=M(n))?o.call(n,u,c):u(n)):c(r)}catch(e){l&&!a&&l.exit(),c(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&R(e)})}},R=function(e){v.call(u,function(){var t,n,r,i=e._v,o=D(e);if(o&&(t=w(function(){C?k.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=C||D(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},L=function(e){v.call(u,function(){var t;C?k.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),O(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw T("Promise can't be resolved itself");(t=M(e))?m(function(){var r={_w:n,_d:!1};try{t.call(e,c(U,r,1),c(N,r,1))}catch(e){N.call(r,e)}}):(n._v=e,n._s=1,O(n,!1))}catch(e){N.call({_w:n,_d:!1},e)}}};j||(x=function(e){p(this,x,"Promise","_h"),h(e),r.call(this);try{e(c(U,this,1),c(N,this,1))}catch(e){N.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(48)(x.prototype,{then:function(e,t){var n=I(y(this,x));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=C?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&O(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(U,e,1),this.reject=c(N,e,1)},b.f=I=function(e){return e===x||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!j,{Promise:x}),n(43)(x,"Promise"),n(46)("Promise"),a=n(7).Promise,f(f.S+f.F*!j,"Promise",{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!j),"Promise",{resolve:function(e){return _(s&&this===a?x:this,e)}}),f(f.S+f.F*!(j&&n(62)(function(e){x.all(e).catch(P)})),"Promise",{all:function(e){var t=this,n=I(t),r=n.resolve,i=n.reject,o=w(function(){var n=[],o=0,a=1;g(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=I(t),r=n.reject,i=w(function(){g(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(20);e.exports.f=function(e){return new r(e)}},function(e,t,n){var r=n(3),i=n(4),o=n(127);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(9).f,i=n(36),o=n(48),a=n(19),s=n(47),u=n(66),c=n(84),l=n(123),f=n(46),d=n(8),h=n(29).fastKey,p=n(40),g=d?"_s":"size",y=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=p(this,t),r=y(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[g]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!y(p(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return p(this,t)[g]}}),l},def:function(e,t,n){var r,i,o=y(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[g]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var r=n(48),i=n(29).getWeak,o=n(3),a=n(4),s=n(47),u=n(66),c=n(24),l=n(14),f=n(40),d=c(5),h=c(6),p=0,g=function(e){return e._l||(e._l=new y)},y=function(){this.a=[]},v=function(e,t){return d(e.a,function(e){return e[0]===t})};y.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var c=e(function(e,r){s(e,c,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=r&&u(r,n,e[o],e)});return r(c.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?g(f(this,t)).delete(e):n&&l(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?g(f(this,t)).has(e):n&&l(n,this._i)}}),c},def:function(e,t,n){var r=i(o(t),!0);return!0===r?g(e).set(t,n):r[e._i]=n,e},ufstore:g}},function(e,t,n){var r=n(21),i=n(6);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(37),i=n(60),o=n(3),a=n(1).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(6),i=n(80),o=n(26);e.exports=function(e,t,n,a){var s=String(o(e)),u=s.length,c=void 0===n?" ":String(n),l=r(t);if(l<=u||""==c)return s;var f=l-u,d=i.call(c,Math.ceil(f/c.length));return d.length>f&&(d=d.slice(0,f)),a?d+s:s+d}},function(e,t,n){var r=n(8),i=n(34),o=n(16),a=n(53).f;e.exports=function(e){return function(t){for(var n,s=o(t),u=i(s),c=u.length,l=0,f=[];c>l;)n=u[l++],r&&!a.call(s,n)||f.push(e?[n,s[n]]:s[n]);return f}}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return h});var c=n(138),l=n(57),f=n(100),d=n(101),h=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:OTV.conax;i(this,e),n.system=t,this.logger=new l.a(r,t),this.token=void 0,this.videoDecryption=null,this.conaxApi=o,this.drmOptions=n}return a(e,[{key:"initialise",value:function(){this._getFpId(),this._addFpDevice(),this._getFpToken(),this.certificateRequester=new c.a(this.drmOptions,this.logger),this.certificateRequester.requestCertificate();var e={drmOptions:this.drmOptions,logger:this.logger};this.licenceRequester=this._makeLicenceRequester(e),this.licenceRequester.setToken(this.token);var t={drmOptions:this.drmOptions,certificateRequester:this.certificateRequester,logger:this.logger,licenceRequester:this.licenceRequester};this.videoDecryption=this._makeVideoDecryptionHandler(t)}},{key:"setVideoElement",value:function(e){this.videoDecryption.setVideoElement(e)}},{key:"tearDown",value:function(){this.videoDecryption.tearDown()}},{key:"_getFpToken",value:function(){var e=this.conaxApi.getOperator(),t=this.conaxApi.getOttAccount(),n={};"upfronttoken"===this.drmOptions.mode?this.token=this.drmOptions.token:(n=this.conaxApi.getToken(this.drmOptions.portalURL+"/authtoken/"+e,t,this.cxDeviceID))&&(this.token='{"Version":"1.0.0","CxAuthenticationDataToken":"'.concat(n,'","CxClientInfo":{"DeviceType":"Browser","DrmClientType":"FairPlay-HTML5","DrmClientVersion":"1.0.0","CxDeviceId":"').concat(this.cxDeviceID,'"}}'))}},{key:"_addFpDevice",value:function(){var e=this.conaxApi.getOperator(),t=this.conaxApi.getOttAccount();this.conaxApi.addDevice(this.drmOptions.portalURL+"/ottAccount/device/"+e,t,this.cxDeviceID,"BrowserFP","FP Browser")}},{key:"_getFpId",value:function(){this.cxDeviceID=this.conaxApi.getOrCreateCxDeviceId("FairPlay")}},{key:"_resetFpId",value:function(){this.conaxApi.resetCxDeviceId("FairPlay"),this._getFpId()}},{key:"setSourceToken",value:function(e){this.token=e,this.licenceRequester.setToken(e)}},{key:"_makeLicenceRequester",value:function(e){return new f.a(e)}},{key:"_makeVideoDecryptionHandler",value:function(e){return Object(d.a)(e)}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=c(e,"string");return"symbol"==r(t)?t:t+""}function c(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return f});var l=n(11),f=function(){function e(t,n){o(this,e),this.certificate={},this.certificatesURL=t.certificatesURL,this.logger=n,this.certErrorHandler=t.certErrorHandler,this.certificatesURL||this.logger.addType().message(" FairPlay certificatesURL not configured!").warn()}return s(e,[{key:"requestCertificate",value:function(){var e=this;this.certificatePromise=new Promise(function(t,n){e.logger.message("Request FairPlay server certificate from ").addType().log(),e._logProvisionRequestStatTimelineEvent(e.certificatesURL);var r=new XMLHttpRequest;r.responseType="arraybuffer",r.addEventListener("load",function(n){return e.onCertificateLoaded(n,t)},!1),r.addEventListener("error",function(){return e.onCertificateError(n)},!1),r.addEventListener("timeout",function(){return e.onCertificateTimeout(n)},!1),r.open("GET",e.certificatesURL,!0),r.timeout=2e3,r.send()})}},{key:"getCertificate",value:function(){return this.certificatePromise}},{key:"onCertificateTimeout",value:function(e){this.certErrorHandler&&this.certErrorHandler("Timeout during retrieval of certificate from ".concat(this.certificatesURL)),e("timeout")}},{key:"onCertificateLoaded",value:function(e,t){this.logger.message("Retrieved the server certificate from ").addType().log();var n=e.target;this.certificate.array=new Uint8Array(n.response),this._logProvisionRequestStatSuccessTimelineEvent(this.certificatesURL),t(this.certificate.array)}},{key:"onCertificateError",value:function(e){this.certErrorHandler&&this.certErrorHandler("Failure during retrieval of certificate from ".concat(this.certificatesURL)),this.logger.message("Failed to retrieve the server certificate from ").addType().error(),this._logProvisionRequestStatFailureTimelineEvent(this.certificatesURL,this.certErrorHandler?this.certErrorHandler.error:void 0),e("error")}},{key:"_logProvisionRequestStatTimelineEvent",value:function(e){this._logTimelineEvent(l.a.provisionRequestStart,e)}},{key:"_logProvisionRequestStatSuccessTimelineEvent",value:function(e){this._logTimelineEvent(l.a.provisionRequestSuccessful,e)}},{key:"_logProvisionRequestStatFailureTimelineEvent",value:function(e,t){this._logTimelineEvent(l.a.provisionRequestFailed,e,t)}},{key:"_logTimelineEvent",value:function(e,t,n){var r="";r=n?JSON.stringify(i(i({},l.e.url,t),l.e.error,n)):JSON.stringify(i({},l.e.url,t)),OTV.eventTimeline.addToTimeline(l.g.licenseRequest,e,r)}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e){return new(h[e]||d)(e)}var l=function(){function e(){i(this,e)}return a(e,[{key:"setRequestHeaders",value:function(e,t,n){var r="upfronttoken"===n?"PreAuthorization":"Conax-Custom-Data";e.setRequestHeader(r,t)}}])}(),f=function(){function e(){i(this,e)}return a(e,[{key:"setRequestHeaders",value:function(e,t){e.setRequestHeader("Accept","application/json"),e.setRequestHeader("nv-authorizations",t)}}])}(),d=a(function e(t){throw i(this,e),new Error("Invalid security type: ".concat(t," defined"))}),h={"nagra-conax-upfront-fps":l,"nagra-conax-fps":l,"nagra-ssp-fps":f,"nagra-ssp-tvkey":f,"nagra-ssp":f};t.a={getDrmImplementation:c}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){return e+"/"+t+"/wvls/contentlicenseservice/v1/certificates"}function l(){}n.d(t,"a",function(){return h});var f=n(41),d=l;d.warn=l;var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{config:{}},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;i(this,e),this.drmDetails=t,this.log=n,this.updateDetailsWithCertificate(t)}return a(e,[{key:"updateDetailsWithCertificate",value:function(e){var t=this;if(!e.config.widevineServerCertificate&&e.config.licenceServer&&e.config.tenantId){this.log("VMP certificate unknown, so looking for it");var n=this;this.certUrl=c(e.config.licenceServer,e.config.tenantId),this.certificatePromise=new Promise(function(e,r){t.xhr=new XMLHttpRequest,t.xhr.open("GET",t.certUrl,!0),t.xhr.responseType="arraybuffer",t.xhr.onload=t._onCertLoad.bind(t,e,r),t.xhr.onerror=function(){n.log.warn("Failed to acquire VMP certificate from "+t.certUrl),r()},t.xhr.send()})}}},{key:"waitCertificate",value:function(){return this.certificatePromise||Promise.reject()}},{key:"_onCertLoad",value:function(e,t){if(this.log("_onCertLoad"),200===this.xhr.status){this.log("HTTP_OK");var n=btoa(f.a.arrayBufferToString(this.xhr.response));this.log("Acquired VMP certificate: "+n),this.drmDetails.config.widevineServerCertificate=n,e()}else this.log.warn("Error acquiring VMP certificate from "+this.certUrl+".  Status: "+this.xhr.status),t()}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return S});var b=n(142),w=n(42),S=function(e){function t(e,n){var r;return i(this,t),r=c(this,t),r.sspFairPlay=r._makeFairPlaySystem(e.system,e.config,n),r.sspFairPlay.initialise(),r}return v(t,e),a(t,[{key:"ready",value:function(e){this.sspFairPlay.setVideoElement(e)}},{key:"tearDown",value:function(){this.sspFairPlay.tearDown()}},{key:"updateSourceData",value:function(e){return e&&e.token&&this.sspFairPlay.setSourceToken(e.token),h(t,"updateSourceData",this,3)([e])}},{key:"_makeFairPlaySystem",value:function(e,t,n){return new b.a.SSPFairPlaySystem(e,t,n)}}])}(w.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c=n(138),l=n(57),f=n(100),d=n(101),h=n(70),p=function(){function e(t,n,r){i(this,e),n.system=t,this.logger=new l.a(r,t),this.token=void 0,n.certificatesURL=h.a.buildUrlWith(n.licenceServer,n.tenantId,"FairPlay","Cert"),n.licenceServer=h.a.buildUrlWith(n.licenceServer,n.tenantId,"FairPlay","License"),this.drmOptions=n}return a(e,[{key:"initialise",value:function(){this.certificateRequester=this._makeCertificateRequester(this.drmOptions),this.certificateRequester.requestCertificate();var e={drmOptions:this.drmOptions,logger:this.logger};this.licenceRequester=this._makeLicenceRequester(e);var t={drmOptions:this.drmOptions,certificateRequester:this.certificateRequester,logger:this.logger,licenceRequester:this.licenceRequester};this.videoDecryption=this._makeVideoDecryptionHandler(t)}},{key:"setVideoElement",value:function(e){this.videoDecryption.setVideoElement(e)}},{key:"setSourceToken",value:function(e){this.token=e,this.licenceRequester.setToken(e)}},{key:"tearDown",value:function(){this.videoDecryption.tearDown()}},{key:"_makeLicenceRequester",value:function(e){return new f.a(e)}},{key:"_makeVideoDecryptionHandler",value:function(e){return Object(d.a)(e)}},{key:"_makeCertificateRequester",value:function(e){return new c.a(e,this.logger)}}])}();t.a={SSPFairPlaySystem:p}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c=n(41),l=function(){function e(t){i(this,e),this.serverResponse=t,this.customData={},this.proactive=!1,this.licence="",this._parse()}return a(e,[{key:"_parse",value:function(){var e=c.a.arrayBufferToString(this.serverResponse),t=new window.DOMParser,n=t.parseFromString(e,"text/xml"),r=this.licence=n.getElementsByTagName("License")[0];if(void 0!==r&&(this.licence=r.childNodes[0].nodeValue),this.customDataXML=n.getElementsByTagName("CustomData")[0],void 0!==this.customDataXML){try{this.customData=JSON.parse(this.customDataXML.childNodes[0].nodeValue)}catch(e){this.customData={}}this.customData&&this.customData.sessionToken&&(this.proactive=!0)}}}])}();t.a={PlayReadyServerResponseParser:l}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return f});var c=n(358),l=1,f=function(){function e(t,n,r){i(this,e),this.ssmUri=t,this.log=n,this.renewalCallback=r||this._defaultRenewalCallback.bind(this),this.ssmInterface=new c.a.SsmInterface(this.ssmUri+"/sessions",n),this.renewalInterval=0,this.sessionToken=null,this.teardownPromise=Promise.resolve(),this.setupPromise=null,this.state=l}return a(e,[{key:"setup",value:function(e){var t=this;return this.log("SecureSession::setup Enter"),3===this.state?(this.log("SecureSession::setup Current SSM Setup has not finished. Return existing setup promise"),this.setupPromise):(this.setupPromise=new Promise(function(n,r){2===t.state&&(t.log("tear down as session is still on."),t.teardown().catch(function(){return null})),t.teardownPromise.catch(function(){return null}).finally(function(){t._updateState(3),t.log("SecureSession::setup Send Setup to SSM server"),t.ssmInterface.doSetup(e).then(function(e){t.log("SecureSession::setup Receive response successfully from SSM server"),t.sessionToken=e.sessionToken,t.renewalInterval=setInterval(t.renewalCallback,1e3*e.heartbeatPeriod),t._updateState(2),n(t.sessionToken)}).catch(function(e){t._updateState(5),r(e),t.log("SecureSession::setup setup failed from SSM server.")})})}),this.log("SecureSession::setup Leave"),this.setupPromise)}},{key:"teardown",value:function(){var e=this;return this.log("SecureSession::teardown Enter"),this.state===l?(this.log("SecureSession::teardown Current SSM has been torndown. Do nothing."),this.teardownPromise):4===this.state||null===this.setupPromise?(this.log("SecureSession::teardown Current SSM teardown has not finished. Return existing teardown promise"),this.teardownPromise):(this.teardownPromise=new Promise(function(t,n){e.renewalInterval&&(clearInterval(e.renewalInterval),e.renewalInterval=0),e.sessionToken?(e._updateState(4),e._teardownSession(t,n)):e.setupPromise?(e.setupPromise.then(function(){e._updateState(4),e._teardownSession(t,n)}).catch(function(t){e._updateState(5),n(t),e.log("SecureSession::teardown setup failed from SSM server.")}),e.setupPromise=null):(e._updateState(l),e.log("SecureSession::teardown Do nothing as SSM teardown before SSM setup"),t())}),this.log("SecureSession::teardown Leave"),this.teardownPromise)}},{key:"_teardownSession",value:function(e,t){var n=this;this.sessionToken?(this.log("SecureSession::_teardownSession send teardown to SSM server"),this.ssmInterface.tearDown(this.sessionToken).then(function(){n.log("SecureSession::_teardownSession receive respopnse successfully from SSM server"),n._updateState(l),n.sessionToken=null,e()}).catch(function(e){n.log("SecureSession::_teardownSession teardown failed from SSM server"),n.teardownPromise=Promise.resolve(),n._updateState(5),n.sessionToken=null,t(e)}),this.sessionToken=null):(this.log("SecureSession::_teardownSession Do nothing as no SSM session setup."),e())}},{key:"_updateState",value:function(t){t!==this.state&&(this.log("State Change: "+e.getSSMStateString(this.state)+" ==> "+e.getSSMStateString(t)),this.state=t)}},{key:"getState",value:function(){return this.state}},{key:"heartbeat",value:function(){var e=this;return new Promise(function(t,n){e.ssmInterface.heartbeat(e.sessionToken).then(function(n){e.sessionToken=n,t(n)}).catch(function(e){return n(e)})})}},{key:"updateSessionToken",value:function(e){this.sessionToken=e}},{key:"_defaultRenewalCallback",value:function(){var e=this;this.heartbeat().catch(function(t){e.log.warn("Default heartbeat failed: "+t)})}}],[{key:"getSSMStateString",value:function(e){var t=new Map([[l,"SSM_SESSION_OFF"],[2,"SSM_SESSION_ON"],[3,"SSM_SETUP_REQUESTED"],[4,"SSM_TEARDOWN_REQUESTED"],[5,"SSM_ERROR"]]);return t.has(e)?t.get(e):"UNKNOWN"}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t=p(t),u(e,l()?Reflect.construct(t,n||[],p(e).constructor):t.apply(e,n))}function u(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function f(e,t,n,r){var i=d(p(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=h(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},d.apply(null,arguments)}function h(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=b(e,"string");return"symbol"==r(t)?t:t+""}function b(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return k});var w=n(49),S=n(11),_=n(50),T={drm:{servers:v(v(v(v({},"com.microsoft.playready","http:callback-uri"),"com.widevine.alpha","http:callback-uri"),"com.tvkey.drm","http:callback-uri"),"com.nagra.prm","http:callback-uri")}},k=function(e){function t(e,n,r){var o;return i(this,t),o=s(this,t,[e,n,r]),o.requestFilterHandle=o._shakaRequestFilter.bind(o),o.responseFilterHandle=o._shakaResponseFilter.bind(o),o}return g(t,e),a(t,[{key:"ready",value:function(e){this.vjsPlayer.tech_.shaka_&&(this.drmDetails.config.multiSession||this._configureSingleSession(),f(t,"ready",this,3)([e]))}},{key:"renewLicence",value:function(){f(t,"renewLicence",this,3)([]),this.timeline.setRenewal()}},{key:"_configureDrm",value:function(){this.vjsPlayer.otvtoolkit().techConfig.configure(_.b,T);var e=this.vjsPlayer.tech_.shaka_,t=e.getNetworkingEngine();t.unregisterRequestFilter(this.requestFilterHandle),t.unregisterResponseFilter(this.responseFilterHandle),t.registerRequestFilter(this.requestFilterHandle),t.registerResponseFilter(this.responseFilterHandle)}},{key:"_getHttpCallback",value:function(){return this.drmDetails.config.requestLicenceCallback}},{key:"_makeTimelineLogger",value:function(e){return new E(e)}},{key:"_shakaRequestFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE){var n=this.vjsPlayer.tech_.shaka_;if(t.xSourceObject=this.source,t.xKeySystem=n.keySystem(),t.xCallback=this._getHttpCallback(),"com.tvkey.drm"===n.keySystem()||"com.nagra.prm"===n.keySystem()){var r=shaka.util.StringUtils,i=JSON.parse(r.fromUTF8(t.body)),o={OttLicenseRequestMessage:i},a=JSON.stringify(o);this.log("tvkey/nagra license request payload: "+a),t.body=r.toUTF8(a)}}}},{key:"_shakaResponseFilter",value:function(e,t){var n=this.vjsPlayer.tech_.shaka_;if(e===shaka.net.NetworkingEngine.RequestType.LICENSE&&"com.tvkey.drm"===n.keySystem()){var r=shaka.util.StringUtils.fromUTF8(t.data);this.log("tvkey license response payload: "+r)}}}])}(w.a),E=function(e){function t(e){var n;return i(this,t),n=s(this,t,[e]),n.token="",n.renewal=!1,n}return g(t,e),a(t,[{key:"tearDown",value:function(){this.renewal=!1,f(t,"tearDown",this,3)([])}},{key:"setSource",value:function(e){this.token=e.token||"",f(t,"setSource",this,3)([e])}},{key:"setRenewal",value:function(){this.renewal=!0}},{key:"_shakaRequestFilter",value:function(e,n){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if("license-renewal"===n.licenseRequestType||this.renewal){this.renewal=!0,this.provision=!1;var r=JSON.stringify(v({},S.e.contentToken,this.token)),i=S.g.sessionManagement,o=S.d.renewalStart;OTV.eventTimeline.addToTimeline(i,o,r)}else this.renewal=!1,f(t,"_shakaRequestFilter",this,3)([e,n])}},{key:"_shakaResponseFilter",value:function(e,n){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if(this.renewal){var r,i=v({},S.e.contentToken,this.token);r=S.d.renewalSuccessful;var o=S.g.sessionManagement,a=JSON.stringify(i);OTV.eventTimeline.addToTimeline(o,r,a)}else f(t,"_shakaResponseFilter",this,3)([e,n])}},{key:"_onErrorEvent",value:function(e){if(6007===e.detail.code)if(this.renewal){var n,r=v({},S.e.contentToken,this.token);r[S.e.error]=e.detail.message,n=S.d.renewalFailure;var i=S.g.sessionManagement,o=JSON.stringify(r);OTV.eventTimeline.addToTimeline(i,n,o)}else f(t,"_onErrorEvent",this,3)([e])}}])}(w.b)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return E});var b=n(42),w=n(57),S=n(101),_=n(147),T=n(361),k="com.apple.fps.1_0",E=function(e){function t(e,n){var r;i(this,t),r=c(this,t),r.config=e.config,r.logger=new w.a(n,e.system),r.licenceRequester=r._makeLicenceRequester(r.config.requestLicenceCallback,k),r.certificateRequester=r._makeCertificateRequester(r.config.fairplayServerCertificate);var o={drmOptions:r.config,certificateRequester:r.certificateRequester,logger:r.logger,licenceRequester:r.licenceRequester};return r.videoDecryption=r._makeVideoDecryptionHandler(o),r}return v(t,e),a(t,[{key:"ready",value:function(e){this.videoDecryption.setVideoElement(e)}},{key:"tearDown",value:function(){this.videoDecryption.tearDown()}},{key:"updateSourceData",value:function(e){return this.src=e,this.licenceRequester.setSource(e),h(t,"updateSourceData",this,3)([e])}},{key:"renewLicence",value:function(){this.videoDecryption.renewLicence()}},{key:"_makeLicenceRequester",value:function(e,t){return new _.a(e,t)}},{key:"_makeCertificateRequester",value:function(e){return new T.a(e)}},{key:"_makeVideoDecryptionHandler",value:function(e){return Object(S.a)(e)}}])}(b.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=c(e,"string");return"symbol"==r(t)?t:t+""}function c(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return f});var l=n(11),f=function(){function e(t,n){o(this,e),this.callback=t,this.keysystem=n,this.source=void 0}return s(e,[{key:"setSource",value:function(e){this.source=e}},{key:"request",value:function(e,t){var n=this;return new Promise(function(r,i){n._logKeyRequestStatTimelineEvent(t),n.callback(n.keysystem,n.source,e,t).then(function(e){n._logKeyStatSuccessTimelineEvent(t),r(e)}).catch(function(e){n._logKeyRequestStatFailureTimelineEvent(e,t),i(e)})})}},{key:"_logKeyRequestStatTimelineEvent",value:function(e){var t,n;"license-renewal"===e?(t=l.g.sessionManagement,n=l.d.renewalStart):(t=l.g.licenseRequest,n=l.a.keyRequestStart),OTV.eventTimeline.addToTimeline(t,n)}},{key:"_logKeyStatSuccessTimelineEvent",value:function(e){var t,n;"license-renewal"===e?(t=l.g.sessionManagement,n=l.d.renewalSuccessful):(t=l.g.licenseRequest,n=l.a.keyRequestSuccessful),OTV.eventTimeline.addToTimeline(t,n)}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e,t){var n,r;"license-renewal"===t?(n=l.g.sessionManagement,r=l.d.renewalFailure):(n=l.g.licenseRequest,r=l.a.keyRequestFailed);var o=JSON.stringify(i({},l.e.error,e));OTV.eventTimeline.addToTimeline(n,r,o)}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=h(t),l(e,d()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return S});var y=n(102),v=n(41),m=n(367),b=n(30),w=[{initDataTypes:["keyids","cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.640028"'}]}],S=function(e){function t(e){var n;return i(this,t),n=c(this,t,[e]),n.mediaKeySession=null,n}return p(t,e),a(t,[{key:"renewLicence",value:function(){this.logger.addType().message(" Renew licence is not supported.").warn()}},{key:"tearDown",value:function(){if(this.mediaKeySession){var e=this;this.mediaKeySession.close().finally(function(){e.mediaKeySession=null,e.videoElement.setMediaKeys(null),e._setEncryptedListener(e.videoElement,e.onVideoEncryptedHandle)})}}},{key:"_setEncryptedListener",value:function(e,t){e.addEventListener("encrypted",t,!1)}},{key:"_removeEncryptedListener",value:function(e,t){e.removeEventListener("encrypted",t,!1)}},{key:"_supportKeySystem",value:function(){var e=Boolean(navigator.requestMediaKeySystemAccess);return e||this.logger.addType().message(" TVKey/Nagra System not supported by browser.").log(),e}},{key:"_onVideoEncrypted",value:function(e){this.logger.message("Function: _onVideoEncrypted for ").addType().log();var t=e.initDataType,n=e.initData,r=this;if(!this._isPrmPsshInitData(n))return void this.logger.message("This is not a PRM init data. Skip").log();this._removeEncryptedListener(this.videoElement,this.onVideoEncryptedHandle);var i="com.tvkey.drm";b.a.isNagraCONNECTCapable()&&(i="com.nagra.prm"),navigator.requestMediaKeySystemAccess(i,w).then(function(e){r.logger.message("Access to mediakeysystem granted").log(),e.createMediaKeys().then(function(e){r.logger.message("Keys created").log(),r.videoElement.setMediaKeys(e),r.mediaKeySession=e.createSession(),r.logger.message("MediaKey session Created.").log(),r._configureSessionListeners(r.mediaKeySession),r.logger.message("Generating MediaKey session request").log(),r.mediaKeySession.generateRequest(t,n).catch(function(e){var t=e.errorCode,n=e.message,i=t.systemCode;r.logger.message("Error: ".concat(n,", system: ").concat(i,"\n").concat(JSON.stringify(e))).error()})})})}},{key:"_isPrmPsshInitData",value:function(e){var t=new Uint8Array(e);this.logger.message("init Data length : "+t.length).log(),this.logger.message("init Data (base64) : "+v.a.toBase64(e)).log();var n=new m.a(t);return!(!n.systemId||(this.logger.message("Pssh system id: "+n.systemId).log(),"adb41c242dbf4a6d958b4457c0d27b95"!==n.systemId))}},{key:"_configureSessionListeners",value:function(e){var t=this;e.addEventListener("message",function(e){t.logger.message("MediaKey message received.  Requesting licence").log(),t.licenceRequester.request(e.message,e.messageType).then(function(n){t.logger.message("Licence Key received").log(),e.target.update(n).catch(function(e){t.logger.message("Error: "+e.message).error()})}).catch(function(e){var t="Failed to retrieve licence.  Error: "+e;throw new Error(t)})},!1)}}])}(y.a)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){g&&h&&(g=!1,h.length?p=h.concat(p):y=-1,p.length&&s())}function s(){if(!g){var e=i(a);g=!0;for(var t=p.length;t;){for(h=p,p=[];++y<t;)h&&h[y].run();y=-1,t=p.length}h=null,g=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],g=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||g||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c=function(){function e(t){i(this,e),this.preference=t,this.sourcePreference=void 0}return a(e,[{key:"getPreference",value:function(){return this.sourcePreference||this.preference}},{key:"setPreference",value:function(e){this.preference=e}},{key:"setSourcePreference",value:function(e){this.sourcePreference=e}}])}(),l=new c;t.a=l},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c=function(){function e(t){i(this,e),this.videojs=t,this.onErrorHandle=this._onErrorEvent.bind(this)}return a(e,[{key:"dispose",value:function(){var e=this._getPlayerInstance();e&&this._removePlayerListeners(e),this.videojs=void 0}},{key:"setErrorListener",value:function(e){this.listener=e}},{key:"ready",value:function(){var e=this._getPlayerInstance();e&&(this._removePlayerListeners(e),this._setupPlayerListeners(e))}},{key:"_setupPlayerListeners",value:function(e){e.addEventListener("error",this.onErrorHandle)}},{key:"_removePlayerListeners",value:function(e){e.removeEventListener("error",this.onErrorHandle)}},{key:"_getPlayerInstance",value:function(){}},{key:"_onErrorEvent",value:function(e){e.detail.severity===shaka.util.Error.Severity.RECOVERABLE&&e.detail.category===shaka.util.Error.Category.NETWORK||this.listener&&this.listener.errorChanged&&this.listener.errorChanged(e.detail.severity,e.detail.category,e.detail.code,e.detail.message,e.detail.data)}}])}();t.a={ErrorReporting:c}},function(e,t,n){n(153),n(339),e.exports=n(340)},function(e,t,n){"use strict";n(154);var r=function(e){return e&&e.__esModule?e:{default:e}}(n(326));r.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),r.default._babelPolyfill=!0},function(e,t,n){"use strict";n(155),n(298),n(300),n(303),n(305),n(307),n(309),n(311),n(313),n(315),n(317),n(319),n(321),n(325)},function(e,t,n){n(156),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(237),n(238),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(92),n(261),n(124),n(262),n(125),n(263),n(264),n(265),n(266),n(126),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),e.exports=n(7)},function(e,t,n){"use strict";var r=n(1),i=n(14),o=n(8),a=n(0),s=n(12),u=n(29).KEY,c=n(2),l=n(58),f=n(43),d=n(32),h=n(5),p=n(73),g=n(105),y=n(158),v=n(61),m=n(3),b=n(4),w=n(10),S=n(16),_=n(28),T=n(31),k=n(36),E=n(108),A=n(22),x=n(60),C=n(9),P=n(34),I=A.f,j=C.f,M=E.f,O=r.Symbol,R=r.JSON,D=R&&R.stringify,L=h("_hidden"),N=h("toPrimitive"),U={}.propertyIsEnumerable,B=l("symbol-registry"),F=l("symbols"),H=l("op-symbols"),V=Object.prototype,W="function"==typeof O&&!!x.f,K=r.QObject,q=!K||!K.prototype||!K.prototype.findChild,G=o&&c(function(){return 7!=k(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=I(V,t);r&&delete V[t],j(e,t,n),r&&e!==V&&j(V,t,r)}:j,z=function(e){var t=F[e]=k(O.prototype);return t._k=e,t},X=W&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},Y=function(e,t,n){return e===V&&Y(H,t,n),m(e),t=_(t,!0),m(n),i(F,t)?(n.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),n=k(n,{enumerable:T(0,!1)})):(i(e,L)||j(e,L,T(1,{})),e[L][t]=!0),G(e,t,n)):j(e,t,n)},J=function(e,t){m(e);for(var n,r=y(t=S(t)),i=0,o=r.length;o>i;)Y(e,n=r[i++],t[n]);return e},$=function(e,t){return void 0===t?k(e):J(k(e),t)},Q=function(e){var t=U.call(this,e=_(e,!0));return!(this===V&&i(F,e)&&!i(H,e))&&(!(t||!i(this,e)||!i(F,e)||i(this,L)&&this[L][e])||t)},Z=function(e,t){if(e=S(e),t=_(t,!0),e!==V||!i(F,t)||i(H,t)){var n=I(e,t);return!n||!i(F,t)||i(e,L)&&e[L][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=M(S(e)),r=[],o=0;n.length>o;)i(F,t=n[o++])||t==L||t==u||r.push(t);return r},te=function(e){for(var t,n=e===V,r=M(n?H:S(e)),o=[],a=0;r.length>a;)!i(F,t=r[a++])||n&&!i(V,t)||o.push(F[t]);return o};W||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===V&&t.call(H,n),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),G(this,e,T(1,n))};return o&&q&&G(V,e,{configurable:!0,set:t}),z(e)},s(O.prototype,"toString",function(){return this._k}),A.f=Z,C.f=Y,n(37).f=E.f=ee,n(53).f=Q,x.f=te,o&&!n(33)&&s(V,"propertyIsEnumerable",Q,!0),p.f=function(e){return z(h(e))}),a(a.G+a.W+a.F*!W,{Symbol:O});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)h(ne[re++]);for(var ie=P(h.store),oe=0;ie.length>oe;)g(ie[oe++]);a(a.S+a.F*!W,"Symbol",{for:function(e){return i(B,e+="")?B[e]:B[e]=O(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!W,"Object",{create:$,defineProperty:Y,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=c(function(){x.f(1)});a(a.S+a.F*ae,"Object",{getOwnPropertySymbols:function(e){return x.f(w(e))}}),R&&a(a.S+a.F*(!W||c(function(){var e=O();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!X(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!X(t))return t}),r[1]=t,D.apply(R,r)}}),O.prototype[N]||n(15)(O.prototype,N,O.prototype.valueOf),f(O,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){e.exports=n(58)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(34),i=n(60),o=n(53);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(36)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperty:n(9).f})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperties:n(107)})},function(e,t,n){var r=n(16),i=n(22).f;n(23)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){var r=n(10),i=n(38);n(23)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(10),i=n(34);n(23)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){n(23)("getOwnPropertyNames",function(){return n(108).f})},function(e,t,n){var r=n(4),i=n(29).onFreeze;n(23)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(4),i=n(29).onFreeze;n(23)("seal",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(4),i=n(29).onFreeze;n(23)("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(4);n(23)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(4);n(23)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(4);n(23)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(109)})},function(e,t,n){var r=n(0);r(r.S,"Object",{is:n(110)})},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(77).set})},function(e,t,n){"use strict";var r=n(54),i={};i[n(5)("toStringTag")]="z",i+""!="[object z]"&&n(12)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(111)})},function(e,t,n){var r=n(9).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(8)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(4),i=n(38),o=n(5)("hasInstance"),a=Function.prototype;o in a||n(9).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(0),i=n(113);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(0),i=n(114);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(1),i=n(14),o=n(25),a=n(79),s=n(28),u=n(2),c=n(37).f,l=n(22).f,f=n(9).f,d=n(44).trim,h=r.Number,p=h,g=h.prototype,y="Number"==o(n(36)(g)),v="trim"in String.prototype,m=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():d(t,3);var n,r,i,o=t.charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,u=t.slice(2),c=0,l=u.length;c<l;c++)if((a=u.charCodeAt(c))<48||a>i)return NaN;return parseInt(u,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(y?u(function(){g.valueOf.call(n)}):"Number"!=o(n))?a(new p(m(t)),n,h):m(t)};for(var b,w=n(8)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)i(p,b=w[S])&&!i(h,b)&&f(h,b,l(p,b));h.prototype=g,g.constructor=h,n(12)(r,"Number",h)}},function(e,t,n){"use strict";var r=n(0),i=n(21),o=n(115),a=n(80),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*c[n],c[n]=r%1e7,r=u(r/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=u(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},p=function(e,t,n){return 0===t?n:t%2==1?p(e,t-1,n*e):p(e*e,t/2,n)},g=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(2)(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,r,s,u=o(this,l),c=i(e),y="",v="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(y="-",u=-u),u>1e-21)if(t=g(u*p(2,69,1))-69,n=t<0?u*p(2,-t,1):u/p(2,t,1),n*=4503599627370496,(t=52-t)>0){for(f(0,n),r=c;r>=7;)f(1e7,0),r-=7;for(f(p(10,r,1),0),r=t-1;r>=23;)d(1<<23),r-=23;d(1<<r),f(1,1),d(2),v=h()}else f(0,n),f(1<<-t,0),v=h()+a.call("0",c);return c>0?(s=v.length,v=y+(s<=c?"0."+a.call("0",c-s)+v:v.slice(0,s-c)+"."+v.slice(s-c))):v=y+v,v}})},function(e,t,n){"use strict";var r=n(0),i=n(2),o=n(115),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(0),i=n(1).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isInteger:n(116)})},function(e,t,n){var r=n(0);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(0),i=n(116),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(0),i=n(114);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(0),i=n(113);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(0),i=n(117),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=n(0),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(e,t,n){var r=n(0),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(0),i=n(81);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(0),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(0),i=n(82);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(0);r(r.S,"Math",{fround:n(201)})},function(e,t,n){var r=n(81),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126),c=function(e){return e+1/o-1/o};e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),l=r(e);return i<u?l*c(i/u/a)*u*a:(t=(1+a/o)*i,n=t-(t-i),n>s||n!=n?l*(1/0):l*n)}},function(e,t,n){var r=n(0),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)n=i(arguments[a++]),u<n?(r=u/n,o=o*r*r+1,u=n):n>0?(r=n/u,o+=r*r):o+=n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(e,t,n){var r=n(0),i=Math.imul;r(r.S+r.F*n(2)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log1p:n(117)})},function(e,t,n){var r=n(0);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(0);r(r.S,"Math",{sign:n(81)})},function(e,t,n){var r=n(0),i=n(82),o=Math.exp;r(r.S+r.F*n(2)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(0),i=n(82),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(0),i=n(35),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(0),i=n(16),o=n(6);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(44)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var r=n(83)(!0);n(84)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(0),i=n(83)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(85),a="".endsWith;r(r.P+r.F*n(87)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),u=String(e);return a?a.call(t,u,s):t.slice(s-u.length,s)===u}})},function(e,t,n){"use strict";var r=n(0),i=n(85);r(r.P+r.F*n(87)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(0);r(r.P,"String",{repeat:n(80)})},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(85),a="".startsWith;r(r.P+r.F*n(87)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(13)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){"use strict";n(13)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(13)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(13)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(13)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(13)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(13)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(13)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(13)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(13)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(13)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(13)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(13)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n(28);r(r.P+r.F*n(2)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(0),i=n(236);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(2),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(12)(r,"toString",function(){var e=o.call(this);return e===e?i.call(this):"Invalid Date"})},function(e,t,n){var r=n(5)("toPrimitive"),i=Date.prototype;r in i||n(15)(i,r,n(239))},function(e,t,n){"use strict";var r=n(3),i=n(28);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(61)})},function(e,t,n){"use strict";var r=n(19),i=n(0),o=n(10),a=n(119),s=n(88),u=n(6),c=n(89),l=n(90);i(i.S+i.F*!n(62)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,f,d=o(e),h="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,y=void 0!==g,v=0,m=l(d);if(y&&(g=r(g,p>2?arguments[2]:void 0,2)),void 0==m||h==Array&&s(m))for(t=u(d.length),n=new h(t);t>v;v++)c(n,v,y?g(d[v],v):d[v]);else for(f=m.call(d),n=new h;!(i=f.next()).done;v++)c(n,v,y?a(f,g,[i.value,v],!0):i.value);return n.length=v,n}})},function(e,t,n){"use strict";var r=n(0),i=n(89);r(r.S+r.F*n(2)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(0),i=n(16),o=[].join;r(r.P+r.F*(n(52)!=Object||!n(17)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(0),i=n(76),o=n(25),a=n(35),s=n(6),u=[].slice;r(r.P+r.F*n(2)(function(){i&&u.call(i)}),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return u.call(this,e,t);for(var i=a(e,n),c=a(t,n),l=s(c-i),f=new Array(l),d=0;d<l;d++)f[d]="String"==r?this.charAt(i+d):this[i+d];return f}})},function(e,t,n){"use strict";var r=n(0),i=n(20),o=n(10),a=n(2),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n(17)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(0),i=n(24)(0),o=n(17)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(4),i=n(61),o=n(5)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(0),i=n(24)(1);r(r.P+r.F*!n(17)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(24)(2);r(r.P+r.F*!n(17)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(24)(3);r(r.P+r.F*!n(17)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(24)(4);r(r.P+r.F*!n(17)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(121);r(r.P+r.F*!n(17)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(0),i=n(121);r(r.P+r.F*!n(17)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(0),i=n(59)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(17)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(16),o=n(21),a=n(6),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(17)(s)),"Array",{lastIndexOf:function(e){if(u)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(0);r(r.P,"Array",{copyWithin:n(122)}),n(39)("copyWithin")},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(91)}),n(39)("fill")},function(e,t,n){"use strict";var r=n(0),i=n(24)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(39)("find")},function(e,t,n){"use strict";var r=n(0),i=n(24)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(39)(o)},function(e,t,n){n(46)("Array")},function(e,t,n){var r=n(1),i=n(79),o=n(9).f,a=n(37).f,s=n(86),u=n(63),c=r.RegExp,l=c,f=c.prototype,d=/a/g,h=/a/g,p=new c(d)!==d;if(n(8)&&(!p||n(2)(function(){return h[n(5)("match")]=!1,c(d)!=d||c(h)==h||"/a/i"!=c(d,"i")}))){c=function(e,t){var n=this instanceof c,r=s(e),o=void 0===t;return!n&&r&&e.constructor===c&&o?e:i(p?new l(r&&!o?e.source:e,t):l((r=e instanceof c)?e.source:e,r&&o?u.call(e):t),n?this:f,c)};for(var g=a(l),y=0;g.length>y;)!function(e){e in c||o(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})}(g[y++]);f.constructor=c,c.prototype=f,n(12)(r,"RegExp",c)}n(46)("RegExp")},function(e,t,n){"use strict";n(125);var r=n(3),i=n(63),o=n(8),a=/./.toString,s=function(e){n(12)(RegExp.prototype,"toString",e,!0)};n(2)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(e,t,n){"use strict";var r=n(3),i=n(6),o=n(94),a=n(64);n(65)("match",1,function(e,t,n,s){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var u=r(e),c=String(this);if(!u.global)return a(u,c);var l=u.unicode;u.lastIndex=0;for(var f,d=[],h=0;null!==(f=a(u,c));){var p=String(f[0]);d[h]=p,""===p&&(u.lastIndex=o(c,i(u.lastIndex),l)),h++}return 0===h?null:d}]})},function(e,t,n){"use strict";var r=n(3),i=n(10),o=n(6),a=n(21),s=n(94),u=n(64),c=Math.max,l=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,p=function(e){return void 0===e?e:String(e)};n(65)("replace",2,function(e,t,n,g){function y(e,t,r,o,a,s){var u=r+e.length,c=o.length,l=h;return void 0!==a&&(a=i(a),l=d),n.call(s,l,function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>c){var d=f(l/10);return 0===d?n:d<=c?void 0===o[d-1]?i.charAt(1):o[d-1]+i.charAt(1):n}s=o[l-1]}return void 0===s?"":s})}return[function(r,i){var o=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=g(n,e,this,t);if(i.done)return i.value;var f=r(e),d=String(this),h="function"==typeof t;h||(t=String(t));var v=f.global;if(v){var m=f.unicode;f.lastIndex=0}for(var b=[];;){var w=u(f,d);if(null===w)break;if(b.push(w),!v)break;""===String(w[0])&&(f.lastIndex=s(d,o(f.lastIndex),m))}for(var S="",_=0,T=0;T<b.length;T++){w=b[T];for(var k=String(w[0]),E=c(l(a(w.index),d.length),0),A=[],x=1;x<w.length;x++)A.push(p(w[x]));var C=w.groups;if(h){var P=[k].concat(A,E,d);void 0!==C&&P.push(C);var I=String(t.apply(void 0,P))}else I=y(k,d,E,A,C,t);E>=_&&(S+=d.slice(_,E)+I,_=E+k.length)}return S+d.slice(_)}]})},function(e,t,n){"use strict";var r=n(3),i=n(110),o=n(64);n(65)("search",1,function(e,t,n,a){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),u=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var l=o(s,u);return i(s.lastIndex,c)||(s.lastIndex=c),null===l?-1:l.index}]})},function(e,t,n){"use strict";var r=n(86),i=n(3),o=n(55),a=n(94),s=n(6),u=n(64),c=n(93),l=n(2),f=Math.min,d=[].push,h="length",p=!l(function(){RegExp(4294967295,"y")});n(65)("split",2,function(e,t,n,l){var g;return g="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[h]||2!="ab".split(/(?:ab)*/)[h]||4!=".".split(/(.?)(.?)/)[h]||".".split(/()()/)[h]>1||"".split(/.?/)[h]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,a,s,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,p=void 0===t?4294967295:t>>>0,g=new RegExp(e.source,l+"g");(o=c.call(g,i))&&!((a=g.lastIndex)>f&&(u.push(i.slice(f,o.index)),o[h]>1&&o.index<i[h]&&d.apply(u,o.slice(1)),s=o[0][h],f=a,u[h]>=p));)g.lastIndex===o.index&&g.lastIndex++;return f===i[h]?!s&&g.test("")||u.push(""):u.push(i.slice(f)),u[h]>p?u.slice(0,p):u}:"0".split(void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,r):g.call(String(i),n,r)},function(e,t){var r=l(g,e,this,t,g!==n);if(r.done)return r.value;var c=i(e),d=String(this),h=o(c,RegExp),y=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(p?"y":"g"),m=new h(p?c:"^(?:"+c.source+")",v),b=void 0===t?4294967295:t>>>0;if(0===b)return[];if(0===d.length)return null===u(m,d)?[d]:[];for(var w=0,S=0,_=[];S<d.length;){m.lastIndex=p?S:0;var T,k=u(m,p?d:d.slice(S));if(null===k||(T=f(s(m.lastIndex+(p?0:S)),d.length))===w)S=a(d,S,y);else{if(_.push(d.slice(w,S)),_.length===b)return _;for(var E=1;E<=k.length-1;E++)if(_.push(k[E]),_.length===b)return _;S=w=T}}return _.push(d.slice(w)),_}]})},function(e,t,n){var r=n(1),i=n(95).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(25)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var f=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var r=n(129),i=n(40);e.exports=n(68)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(129),i=n(40);e.exports=n(68)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(1),o=n(24)(0),a=n(12),s=n(29),u=n(109),c=n(130),l=n(4),f=n(40),d=n(40),h=!i.ActiveXObject&&"ActiveXObject"in i,p=s.getWeak,g=Object.isExtensible,y=c.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(e){if(l(e)){var t=p(e);return!0===t?y(f(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(f(this,"WeakMap"),e,t)}},b=e.exports=n(68)("WeakMap",v,m,c,!0,!0);d&&h&&(r=c.getConstructor(v,"WeakMap"),u(r.prototype,m),s.NEED=!0,o(["delete","has","get","set"],function(e){var t=b.prototype,n=t[e];a(t,e,function(t,i){if(l(t)&&!g(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)})}))},function(e,t,n){"use strict";var r=n(130),i=n(40);n(68)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(0),i=n(69),o=n(96),a=n(3),s=n(35),u=n(6),c=n(4),l=n(1).ArrayBuffer,f=n(55),d=o.ArrayBuffer,h=o.DataView,p=i.ABV&&l.isView,g=d.prototype.slice,y=i.VIEW;r(r.G+r.W+r.F*(l!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||c(e)&&y in e}}),r(r.P+r.U+r.F*n(2)(function(){return!new d(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==g&&void 0===t)return g.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(f(this,d))(u(i-r)),c=new h(this),l=new h(o),p=0;r<i;)l.setUint8(p++,c.getUint8(r++));return o}}),n(46)("ArrayBuffer")},function(e,t,n){var r=n(0);r(r.G+r.W+r.F*!n(69).ABV,{DataView:n(96).DataView})},function(e,t,n){n(27)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(e,t,n){n(27)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(27)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){var r=n(0),i=n(20),o=n(3),a=(n(1).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(2)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var r=i(e),u=o(n);return a?a(r,t,u):s.call(r,t,u)}})},function(e,t,n){var r=n(0),i=n(36),o=n(20),a=n(3),s=n(4),u=n(2),c=n(111),l=(n(1).Reflect||{}).construct,f=u(function(){function e(){}return!(l(function(){},[],e)instanceof e)}),d=!u(function(){l(function(){})});r(r.S+r.F*(f||d),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!f)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var u=n.prototype,h=i(s(u)?u:Object.prototype),p=Function.apply.call(e,h,t);return s(p)?p:h}})},function(e,t,n){var r=n(9),i=n(0),o=n(3),a=n(28);i(i.S+i.F*n(2)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(0),i=n(22).f,o=n(3);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(0),i=n(3),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(118)(o,"Object",function(){var e,t=this,n=t._k;do{if(t._i>=n.length)return{value:void 0,done:!0}}while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){function r(e,t){var n,s,l=arguments.length<3?e:arguments[2];return c(e)===l?e[t]:(n=i.f(e,t))?a(n,"value")?n.value:void 0!==n.get?n.get.call(l):void 0:u(s=o(e))?r(s,t,l):void 0}var i=n(22),o=n(38),a=n(14),s=n(0),u=n(4),c=n(3);s(s.S,"Reflect",{get:r})},function(e,t,n){var r=n(22),i=n(0),o=n(3);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(0),i=n(38),o=n(3);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(0),i=n(3),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(132)})},function(e,t,n){var r=n(0),i=n(3),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){function r(e,t,n){var u,d,h=arguments.length<4?e:arguments[3],p=o.f(l(e),t);if(!p){if(f(d=a(e)))return r(d,t,n,h);p=c(0)}if(s(p,"value")){if(!1===p.writable||!f(h))return!1;if(u=o.f(h,t)){if(u.get||u.set||!1===u.writable)return!1;u.value=n,i.f(h,t,u)}else i.f(h,t,c(0,n));return!0}return void 0!==p.set&&(p.set.call(h,n),!0)}var i=n(9),o=n(22),a=n(38),s=n(14),u=n(0),c=n(31),l=n(3),f=n(4);u(u.S,"Reflect",{set:r})},function(e,t,n){var r=n(0),i=n(77);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){n(299),e.exports=n(7).Array.includes},function(e,t,n){"use strict";var r=n(0),i=n(59)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(39)("includes")},function(e,t,n){n(301),e.exports=n(7).Array.flatMap},function(e,t,n){"use strict";var r=n(0),i=n(302),o=n(10),a=n(6),s=n(20),u=n(120);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=u(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(39)("flatMap")},function(e,t,n){"use strict";function r(e,t,n,c,l,f,d,h){for(var p,g,y=l,v=0,m=!!d&&s(d,h,3);v<c;){if(v in n){if(p=m?m(n[v],v,t):n[v],g=!1,o(p)&&(g=p[u],g=void 0!==g?!!g:i(p)),g&&f>0)y=r(e,t,p,a(p.length),y,f-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=p}y++}v++}return y}var i=n(61),o=n(4),a=n(6),s=n(19),u=n(5)("isConcatSpreadable");e.exports=r},function(e,t,n){n(304),e.exports=n(7).String.padStart},function(e,t,n){"use strict";var r=n(0),i=n(133),o=n(67),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){n(306),e.exports=n(7).String.padEnd},function(e,t,n){"use strict";var r=n(0),i=n(133),o=n(67),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){n(308),e.exports=n(7).String.trimLeft},function(e,t,n){"use strict";n(44)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){n(310),e.exports=n(7).String.trimRight},function(e,t,n){"use strict";n(44)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){n(312),e.exports=n(73).f("asyncIterator")},function(e,t,n){n(105)("asyncIterator")},function(e,t,n){n(314),e.exports=n(7).Object.getOwnPropertyDescriptors},function(e,t,n){var r=n(0),i=n(132),o=n(16),a=n(22),s=n(89);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),u=a.f,c=i(r),l={},f=0;c.length>f;)void 0!==(n=u(r,t=c[f++]))&&s(l,t,n);return l}})},function(e,t,n){n(316),e.exports=n(7).Object.values},function(e,t,n){var r=n(0),i=n(134)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){n(318),e.exports=n(7).Object.entries},function(e,t,n){var r=n(0),i=n(134)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";n(126),n(320),e.exports=n(7).Promise.finally},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(1),a=n(55),s=n(128);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){n(322),n(323),n(324),e.exports=n(7)},function(e,t,n){var r=n(1),i=n(0),o=n(67),a=[].slice,s=/MSIE .\./.test(o),u=function(e){return function(t,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(e,t,n){var r=n(0),i=n(95);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var r=n(92),i=n(34),o=n(12),a=n(1),s=n(15),u=n(45),c=n(5),l=c("iterator"),f=c("toStringTag"),d=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),g=0;g<p.length;g++){var y,v=p[g],m=h[v],b=a[v],w=b&&b.prototype;if(w&&(w[l]||s(w,l,d),w[f]||s(w,f,v),u[v]=d,m))for(y in r)w[y]||o(w,y,r[y],!0)}},function(e,t,n){var r=function(e){"use strict";function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,r){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),s=new h(r||[]);return b(a,"_invoke",{value:c(e,n,s)}),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach(function(n){t(e,n,function(e){return this._invoke(n,e)})})}function u(e,t){function n(i,o,a,s){var u=r(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&m.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(l).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(u.arg)}function i(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return o=o?o.then(i,i):i()}var o;b(this,"_invoke",{value:i})}function c(e,t,n){var i=k;return function(o,a){if(i===A)throw new Error("Generator is already running");if(i===x){if("throw"===o)throw a;return g()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=l(s,n);if(u){if(u===C)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===k)throw i=x,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=A;var c=r(e,t,n);if("normal"===c.type){if(i=n.done?x:E,c.arg===C)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=x,n.method="throw",n.arg=c.arg)}}}function l(e,t){var n=t.method,i=e.iterator[n];if(i===y)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=y,l(e,t),"throw"===t.method)?C:("return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),C);var o=r(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,C;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=y),t.delegate=null,C):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,C)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[S];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=y,t.done=!0,t};return r.next=r}}return{next:g}}function g(){return{value:y,done:!0}}var y,v=Object.prototype,m=v.hasOwnProperty,b=Object.defineProperty||function(e,t,n){e[t]=n.value},w="function"==typeof Symbol?Symbol:{},S=w.iterator||"@@iterator",_=w.asyncIterator||"@@asyncIterator",T=w.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,n){return e[t]=n}}e.wrap=n;var k="suspendedStart",E="suspendedYield",A="executing",x="completed",C={},P={};t(P,S,function(){return this});var I=Object.getPrototypeOf,j=I&&I(I(p([])));j&&j!==v&&m.call(j,S)&&(P=j);var M=a.prototype=i.prototype=Object.create(P);return o.prototype=a,b(M,"constructor",{value:a,configurable:!0}),b(a,"constructor",{value:o,configurable:!0}),o.displayName=t(a,T,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,T,"GeneratorFunction")),e.prototype=Object.create(M),e},e.awrap=function(e){return{__await:e}},s(u.prototype),t(u.prototype,_,function(){return this}),e.AsyncIterator=u,e.async=function(t,r,i,o,a){void 0===a&&(a=Promise);var s=new u(n(t,r,i,o),a);return e.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},s(M),t(M,T,"Generator"),t(M,S,function(){return this}),t(M,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=p,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=y)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=y),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,C):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),C},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),C}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;d(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=y),C}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){n(327),e.exports=n(135).global},function(e,t,n){var r=n(328);r(r.G,{global:n(97)})},function(e,t,n){var r=n(97),i=n(135),o=n(329),a=n(331),s=n(338),u=function(e,t,n){var c,l,f,d=e&u.F,h=e&u.G,p=e&u.S,g=e&u.P,y=e&u.B,v=e&u.W,m=h?i:i[t]||(i[t]={}),b=m.prototype,w=h?r:p?r[t]:(r[t]||{}).prototype;h&&(n=t);for(c in n)(l=!d&&w&&void 0!==w[c])&&s(m,c)||(f=l?w[c]:n[c],m[c]=h&&"function"!=typeof w[c]?n[c]:y&&l?o(f,r):v&&w[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):g&&"function"==typeof f?o(Function.call,f):f,g&&((m.virtual||(m.virtual={}))[c]=f,e&u.R&&b&&!b[c]&&a(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(330);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(332),i=n(337);e.exports=n(99)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(333),i=n(334),o=n(336),a=Object.defineProperty;t.f=n(99)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(98);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(99)&&!n(136)(function(){return 7!=Object.defineProperty(n(335)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(98),i=n(97).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(98);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r,i;/**
 * @file Web Cryptography API shim
 * @author Artem S Vybornov <vybornov@gmail.com>
 * @license MIT
 */
!function(n,o){r=[],void 0!==(i=function(){return o(n)}.apply(t,r))&&(e.exports=i)}("undefined"!=typeof self?self:this,function(e){"use strict";function t(e){return btoa(e).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function n(e){return e+="===",e=e.slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function r(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function i(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function o(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=o(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=o(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function a(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function s(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(i(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach(function(n){n in e&&(t[n]=e[n])});break;default:throw new TypeError("Unsupported key type")}return t}function u(e){var t=s(e);return S&&(t.extractable=t.ext,delete t.ext),r(unescape(encodeURIComponent(JSON.stringify(t)))).buffer}function c(e){var n=f(e),r=!1;n.length>2&&(r=!0,n.shift());var o={ext:!0};switch(n[0][0]){case"1.2.840.113549.1.1.1":var a=["n","e","d","p","q","dp","dq","qi"],s=f(n[1]);r&&s.shift();for(var u=0;u<s.length;u++)s[u][0]||(s[u]=s[u].subarray(1)),o[a[u]]=t(i(s[u]));o.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return o}function l(e){var t,i=[["",null]],o=!1;switch(e.kty){case"RSA":for(var a=["n","e","d","p","q","dp","dq","qi"],s=[],u=0;u<a.length&&a[u]in e;u++){var c=s[u]=r(n(e[a[u]]));128&c[0]&&(s[u]=new Uint8Array(c.length+1),s[u].set(c,1))}s.length>2&&(o=!0,s.unshift(new Uint8Array([0]))),i[0][0]="1.2.840.113549.1.1.1",t=s;break;default:throw new TypeError("Unsupported key type")}return i.push(new Uint8Array(d(t)).buffer),o?i.unshift(new Uint8Array([0])):i[1]={tag:3,value:i[1]},new Uint8Array(d(i)).buffer}function f(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),t.end-t.pos<2||t.end>e.length)throw new RangeError("Malformed DER");var n=e[t.pos++],r=e[t.pos++];if(r>=128){if(r&=127,t.end-t.pos<r)throw new RangeError("Malformed DER");for(var o=0;r--;)o<<=8,o|=e[t.pos++];r=o}if(t.end-t.pos<r)throw new RangeError("Malformed DER");var a;switch(n){case 2:a=e.subarray(t.pos,t.pos+=r);break;case 3:if(e[t.pos++])throw new Error("Unsupported bit string");r--;case 4:a=new Uint8Array(e.subarray(t.pos,t.pos+=r)).buffer;break;case 5:a=null;break;case 6:var s=btoa(i(e.subarray(t.pos,t.pos+=r)));if(!(s in T))throw new Error("Unsupported OBJECT ID "+s);a=T[s];break;case 48:a=[];for(var u=t.pos+r;t.pos<u;)a.push(f(e,t));break;default:throw new Error("Unsupported DER tag 0x"+n.toString(16))}return a}function d(e,t){t||(t=[]);var n=0,i=0,o=t.length+2;if(t.push(0,0),e instanceof Uint8Array){n=2,i=e.length;for(var a=0;a<i;a++)t.push(e[a])}else if(e instanceof ArrayBuffer){n=4,i=e.byteLength,e=new Uint8Array(e);for(var a=0;a<i;a++)t.push(e[a])}else if(null===e)n=5,i=0;else if("string"==typeof e&&e in k){var s=r(atob(k[e]));n=6,i=s.length;for(var a=0;a<i;a++)t.push(s[a])}else if(e instanceof Array){for(var a=0;a<e.length;a++)d(e[a],t);n=48,i=t.length-o}else{if(!("object"==typeof e&&3===e.tag&&e.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+e);e=new Uint8Array(e.value),n=3,i=e.byteLength,t.push(0);for(var a=0;a<i;a++)t.push(e[a]);i++}if(i>=128){var u=i,i=4;for(t.splice(o,0,u>>24&255,u>>16&255,u>>8&255,255&u);i>1&&!(u>>24);)u<<=8,i--;i<4&&t.splice(o,4-i),i|=128}return t.splice(o-2,2,n,i),t}function h(e,t,n,r){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===n?e.extractable:n,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===r?e.usages:r,enumerable:!0}})}function p(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function g(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}if("function"!=typeof Promise)throw"Promise support required";var y=e.crypto||e.msCrypto;if(y){var v=y.subtle||y.webkitSubtle;if(v){var m=e.Crypto||y.constructor||Object,b=e.SubtleCrypto||v.constructor||Object,w=(e.CryptoKey||e.Key||Object,e.navigator.userAgent.indexOf("Edge/")>-1),S=!!e.msCrypto&&!w,_=!y.subtle&&!!y.webkitSubtle;if(S||_){var T={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},k={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach(function(e){var t=v[e];v[e]=function(i,l,f){var d,m,b,w=[].slice.call(arguments);switch(e){case"generateKey":d=o(i),m=l,b=f;break;case"importKey":d=o(f),m=w[3],b=w[4],"jwk"===i&&(l=s(l),l.alg||(l.alg=a(d)),l.key_ops||(l.key_ops="oct"!==l.kty?"d"in l?b.filter(g):b.filter(p):b.slice()),w[1]=u(l));break;case"unwrapKey":d=w[4],m=w[5],b=w[6],w[2]=f._key}if("generateKey"===e&&"HMAC"===d.name&&d.hash)return d.length=d.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[d.hash.name],v.importKey("raw",y.getRandomValues(new Uint8Array(d.length+7>>3)),d,m,b);if(_&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===d.name&&(!d.modulusLength||d.modulusLength>=2048))return i=o(i),i.name="RSAES-PKCS1-v1_5",delete i.hash,v.generateKey(i,!0,["encrypt","decrypt"]).then(function(e){return Promise.all([v.exportKey("jwk",e.publicKey),v.exportKey("jwk",e.privateKey)])}).then(function(e){return e[0].alg=e[1].alg=a(d),e[0].key_ops=b.filter(p),e[1].key_ops=b.filter(g),Promise.all([v.importKey("jwk",e[0],d,!0,e[0].key_ops),v.importKey("jwk",e[1],d,m,e[1].key_ops)])}).then(function(e){return{publicKey:e[0],privateKey:e[1]}});if((_||S&&"SHA-1"===(d.hash||{}).name)&&"importKey"===e&&"jwk"===i&&"HMAC"===d.name&&"oct"===l.kty)return v.importKey("raw",r(n(l.k)),f,w[3],w[4]);if(_&&"importKey"===e&&("spki"===i||"pkcs8"===i))return v.importKey("jwk",c(l),f,w[3],w[4]);if(S&&"unwrapKey"===e)return v.decrypt(w[3],f,l).then(function(e){return v.importKey(i,e,w[4],w[5],w[6])});var T;try{T=t.apply(v,w)}catch(e){return Promise.reject(e)}return S&&(T=new Promise(function(e,t){T.onabort=T.onerror=function(e){t(e)},T.oncomplete=function(t){e(t.target.result)}})),T=T.then(function(e){return"HMAC"===d.name&&(d.length||(d.length=8*e.algorithm.length)),0==d.name.search("RSA")&&(d.modulusLength||(d.modulusLength=(e.publicKey||e).algorithm.modulusLength),d.publicExponent||(d.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e=e.publicKey&&e.privateKey?{publicKey:new h(e.publicKey,d,m,b.filter(p)),privateKey:new h(e.privateKey,d,m,b.filter(g))}:new h(e,d,m,b)})}}),["exportKey","wrapKey"].forEach(function(e){var n=v[e];v[e]=function(o,u,c){var f=[].slice.call(arguments);switch(e){case"exportKey":f[1]=u._key;break;case"wrapKey":f[1]=u._key,f[2]=c._key}if((_||S&&"SHA-1"===(u.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===o&&"HMAC"===u.algorithm.name&&(f[0]="raw"),!_||"exportKey"!==e||"spki"!==o&&"pkcs8"!==o||(f[0]="jwk"),S&&"wrapKey"===e)return v.exportKey(o,u).then(function(e){return"jwk"===o&&(e=r(unescape(encodeURIComponent(JSON.stringify(s(e)))))),v.encrypt(f[3],c,e)});var d;try{d=n.apply(v,f)}catch(e){return Promise.reject(e)}return S&&(d=new Promise(function(e,t){d.onabort=d.onerror=function(e){t(e)},d.oncomplete=function(t){e(t.target.result)}})),"exportKey"===e&&"jwk"===o&&(d=d.then(function(e){return(_||S&&"SHA-1"===(u.algorithm.hash||{}).name)&&"HMAC"===u.algorithm.name?{kty:"oct",alg:a(u.algorithm),key_ops:u.usages.slice(),ext:!0,k:t(i(e))}:(e=s(e),e.alg||(e.alg=a(u.algorithm)),e.key_ops||(e.key_ops="public"===u.type?u.usages.filter(p):"private"===u.type?u.usages.filter(g):u.usages.slice()),e)})),!_||"exportKey"!==e||"spki"!==o&&"pkcs8"!==o||(d=d.then(function(e){return e=l(s(e))})),d}}),["encrypt","decrypt","sign","verify"].forEach(function(e){var t=v[e];v[e]=function(n,r,i,a){if(S&&(!i.byteLength||a&&!a.byteLength))throw new Error("Empy input is not allowed");var s=[].slice.call(arguments),u=o(n);if(S&&"decrypt"===e&&"AES-GCM"===u.name){var c=n.tagLength>>3;s[2]=(i.buffer||i).slice(0,i.byteLength-c),n.tag=(i.buffer||i).slice(i.byteLength-c)}s[1]=r._key;var l;try{l=t.apply(v,s)}catch(e){return Promise.reject(e)}return S&&(l=new Promise(function(t,n){l.onabort=l.onerror=function(e){n(e)},l.oncomplete=function(n){var n=n.target.result;if("encrypt"===e&&n instanceof AesGcmEncryptResult){var r=n.ciphertext,i=n.tag;n=new Uint8Array(r.byteLength+i.byteLength),n.set(new Uint8Array(r),0),n.set(new Uint8Array(i),r.byteLength),n=n.buffer}t(n)}})),l}}),S){var E=v.digest;v.digest=function(e,t){if(!t.byteLength)throw new Error("Empy input is not allowed");var n;try{n=E.call(v,e,t)}catch(e){return Promise.reject(e)}return n=new Promise(function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}})},e.crypto=Object.create(y,{getRandomValues:{value:function(e){return y.getRandomValues(e)}},subtle:{value:v}}),e.CryptoKey=h}_&&(y.subtle=v,e.Crypto=m,e.SubtleCrypto=b,e.CryptoKey=h)}}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(n(341),n(406)),i=(n.n(r),n(412)),o=(n.n(i),n(413)),a=(n.n(o),n(415)),s=(n.n(a),n(416)),u=(n.n(s),n(417));n.d(t,"utils",function(){return u.g}),n.d(t,"player",function(){return u.e}),n.d(t,"ssp",function(){return u.f}),n.d(t,"versions",function(){return u.h}),n.d(t,"conax",function(){return u.b}),n.d(t,"eventTimeline",function(){return u.c}),n.d(t,"eventTimelineAnalyzer",function(){return u.d}),n.d(t,"OtvInsightAgent",function(){return u.a})},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b=n(56),w=n.n(b),S=n(344),_=(n.n(S),n(345)),T=n(346),k=n(370),E=n(71),A=n(379),x=n(382),C=n(385),P=n(388),I=n(389),j=n(30),M=n(390),O=n(150),R=n(392),D=n(394),L=n(395),N=n(396),U=n(397),B=n(398),F=n(399),H=n(400),V=n(401),W=n(402),K=n(403),q=n(50),G=n(404),z=n(405),X={drm:{system:"none",config:{"com.widevine.alpha":{persistentState:"optional"}}}},Y=w.a.getPlugin("plugin"),J={streaming:{retryParameters:{maxAttempts:4}},manifest:{segmentRelativeVttTiming:!0,retryParameters:{maxAttempts:4,timeout:5e3}}},$=function(e){function t(e,n){var r;return i(this,t),r=c(this,t,[e,n]),r._initComponents(n.components),r.otvVideoTracksButton&&r.otvVideoTracksButton(),r.techConfig=new q.c,r._init(e,n),r}return v(t,e),a(t,[{key:"dispose",value:function(){this.seekMonitor&&this.seekMonitor.dispose(),this.otvResolutionController&&this.otvResolutionController.dispose(),this.drmSecurityLevel&&this.drmSecurityLevel.dispose(),this.networkStatistics&&this.networkStatistics.dispose(),this.playbackStatistics&&this.playbackStatistics.dispose(),this.renderingStatistics&&this.renderingStatistics.dispose(),this.timeline&&this.timeline.dispose(),this.errorReporting&&this.errorReporting.dispose(),this.reset(),h(t,"dispose",this,3)([]);for(var e=document.getElementsByClassName("opy-videowindow"),n=0;n<e.length;n++)e[n].remove()}},{key:"addEventListener",value:function(e,t,n){return this.eventTarget.addEventListener(e,t,n)}},{key:"removeEventListener",value:function(e,t,n){return this.eventTarget.removeEventListener(e,t,n)}},{key:"dispatchEvent",value:function(e){var t;return"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event"),t.initEvent(e,!0,!0)),this.eventTarget.dispatchEvent(t)}},{key:"addThumbnailPreview",value:function(e){var t=this;Object(G.a)()&&setTimeout(function(){return t.player.thumbnails({vtt:e})},100)}},{key:"addChapters",value:function(e){var t=this;!Object(G.a)()||this.chapterManager&&this.chapterManager.uri===e||(this.chapterManager&&(this.chapterManager.reset(),this.chapterManager=void 0),e&&setTimeout(function(){t.chapterManager=new chapters.ChapterManager(t.player,e)},0))}},{key:"getThumbnail",value:function(e,t){var n=this.player.tech_.shaka_;if(n){var r=n.getImageTracks();r.length?n.getThumbnails(r[0].id,e).then(function(e){var n={url:e.uris[0],x:Math.floor(e.positionX),y:Math.floor(e.positionY),width:Math.floor(e.width),height:Math.floor(e.height)};t(n)}).catch(function(){t(null)}):t(null)}else t(null)}},{key:"startThumbnailPresenter",value:function(){Object(G.a)()&&!this.thumbnailPresenter&&(this.thumbnailPresenter=new thumbnailPresenter.ThumbnailPresenter(this.player,this.getThumbnail))}},{key:"createSourceObjectFromURL",value:function(e,t){return(new E.a.SourceBuilder).build(e,t)}},{key:"getResolution",value:function(){return this.playbackStatistics.getResolution()}},{key:"getBandwidth",value:function(){return this.playbackStatistics.getStreamBitrate()}},{key:"getMaxBandwidth",value:function(){return this.otvResolutionController.getMaxBandwidth()}},{key:"getMaxResolution",value:function(){return this.otvResolutionController.getMaxResolution()}},{key:"getVideoJS",value:function(){return w.a}},{key:"setMaxBandwidth",value:function(e){this.otvResolutionController.setMaxBandwidth(e)}},{key:"setMaxResolution",value:function(e,t){this.otvResolutionController.setMaxResolution(e,t)}},{key:"enablePiP",value:function(){Object(G.a)()&&null===this.pipManager&&(this.pipManager=new pip.PiPManager(this.player,this.videoWindowDiv))}},{key:"enableAutoPiPInitiationOnScroll",value:function(e){Object(G.a)()&&null!==this.pipManager&&this.pipManager.enableAutoPiPInitiationOnScroll(e)}},{key:"reset",value:function(){clearTimeout(this._zappingTimerId),this.timeline.onStop(),this.player.removeClass("vjs-has-started"),this._disableAllSubtitleTracks(),Object(G.a)()&&this.addChapters(),Object(G.a)()&&this.player.thumbnails&&this.player.thumbnails(),this.drmController.tearDown()}},{key:"getConfiguration",value:function(){return this.techConfig.getConfiguration(q.a)}},{key:"configure",value:function(e,t){return this.techConfig.configure(q.a,e,t)}},{key:"_init",value:function(e,t){var n=this;this._zappingTimerId=null,Object(G.a)()&&(this.pipManager=null),e.addClass("vjs-otvtoolkit"),this.timeline=new N.a(e),this.segmentTimeoutController=new D.a.SegmentTimeoutController(e),this.eventTarget=document.createDocumentFragment(),this._log=Object(F.a)(!1),this._initSource(e),this._initCurrentTime(e),this._initReset(e),this.pluginOptions=w.a.obj.merge(X,t),this.otvResolutionController=new I.a(e,this._log),this.platCfg=new z.a.PlatformSpecificConfig(this.techConfig,j.a,this.pluginOptions),this._initUIElement();e.$("video");this._initDrm(e),this._initPlayerEvents(e,this.drmController),this._checkForEdge(),this.on(e,"durationchange",function(){e.duration()===1/0?n._updateFormatTime():n._resetFormatTime()}),this._initDiagnostics(e),this.pluginOptions.quickmark&&this._initQuickmark(e),this._initCheckForSeekable(),j.a.isSmartTV()&&console.log("Executing on SmartTV"),this._initPlayerWaiting(e),this._initVideoSizeMonitor(e)}},{key:"_initVideoSizeMonitor",value:function(e){this.sizeMonitor=new L.a(e,this)}},{key:"_initQuickmark",value:function(e){var t=this.pluginOptions.quickmark.quickmarkConfig,n={};this.pluginOptions.quickmark.message&&(n.message=this.pluginOptions.quickmark.message),this.pluginOptions.quickmark.error&&(n.error=this.pluginOptions.quickmark.error),this.pluginOptions.quickmark.tlValidation&&(n.tlValidation=this.pluginOptions.quickmark.tlValidation);try{this.quickmarkInterface=new R.a({player:e,toolkit:this,url:t.url,service:t.service,token:t.token,tenant:t.tenant,apikey:t.apikey,secret:t.secret,callbacks:n}),this._log("jswbw version: "+this.quickmarkInterface.getVersion())}catch(e){this._log("Failed to create quickmark interface: "+e.message)}}},{key:"_initUIElement",value:function(){var e=document.getElementsByClassName("opy-videowindow");e.length>0?this.videoWindowDiv=e[0]:(this.videoWindowDiv=document.createElement("div"),this.videoWindowDiv.className="opy-videowindow"),document.body.contains(this.player.el())&&(this.player.el().parentNode.insertBefore(this.videoWindowDiv,this.player.el()),this.videoWindowDiv.appendChild(this.player.el()))}},{key:"_initDrm",value:function(e){var t,n;this.pluginOptions.drm&&this.pluginOptions.drm.config&&(t=this.pluginOptions.drm.config.preferredDRM,n=this.pluginOptions.drm.config.tvkeyOperatorUUID),O.a.setPreference(this._updatePreferenceForNagraDRMs(t));var r=V.a.homogeniseSsmUri(this.pluginOptions.drm);this.drmController=T.a.createDRMController(r,this._log,this.player,this.pluginOptions.preferredPlayer),this.drmSecurityLevel=new M.a(e,this._log),this.wvhw=new W.a(this.pluginOptions.drm,this.drmSecurityLevel,this.techConfig,q.b,this._log),j.a.isTVKeyCapable()&&n&&this.drmSecurityLevel.activateTVKey(this.pluginOptions.drm.config)}},{key:"_updatePreferenceForNagraDRMs",value:function(e){if((!e||"com.nagra.prm"!==e.toLowerCase()||j.a.isNagraCONNECTCapable())&&(!e||"com.tvkey.drm"!==e.toLowerCase()||j.a.isTVKeyCapable()))return e}},{key:"_initDiagnostics",value:function(e){this.networkStatistics=new A.a.NetworkStatistics(e),this.playbackStatistics=new x.a.PlaybackStatistics(e),this.renderingStatistics=new C.a.RenderingStatistics(e),this.errorReporting=j.a.isSafari()?new U.a.NativePlayerErrorReporting(e):new B.a.ShakaPlayerErrorReporting(e),this.logProvider=new H.a.LogProvider(e)}},{key:"_disableAllSubtitleTracks",value:function(){for(var e=this.player.textTracks(),t=0;t<e.length;t++){var n=e[t];try{switch(n.kind.toLowerCase()){case"subtitles":case"captions":case"descriptions":n.mode="disabled"}}catch(e){this._log("Invalid track kind detected.")}}}},{key:"_resetFormatTime",value:function(){w.a.time.resetFormatTime&&this.updatedFormatTime&&(this._log("Resetting formatTime"),w.a.time.resetFormatTime(),delete this.updatedFormatTime)}},{key:"_updateFormatTime",value:function(){w.a.time.setFormatTime&&!this.updatedFormatTime&&(this._log("Setting formatTime to live"),w.a.time.setFormatTime(k.a.liveFormatTime.bind(this.player)),this.updatedFormatTime=!0)}},{key:"_createError",value:function(e,t){var n=new Error(t);return n.name=e,n}},{key:"_enableIntegrationLogo",value:function(e){var t="".concat("logo","-img"),n=document.getElementById("logo"),r=document.getElementById(t);n?(n.removeChild(r),n.parentNode.removeChild(n)):n=document.createElement("div"),r=document.createElement("div"),r.id=t,r.style.backgroundImage="url('".concat(_.a,"')"),r.style.width="100%",r.style.height="100%",r.style.backgroundSize="100%",r.style.backgroundRepeat="round",n.id="logo",n.style.pointerEvents="none",n.style.right="0",n.style.top="0",n.style.position="absolute",n.style.padding="5px",n.style.width="144px",n.style.height="72px",n.appendChild(r);var i=!1;return e&&(e.parentNode.appendChild(n),i=!0),i}},{key:"_makeSeekable",value:function(e){var t=this.player.el();e!==t.classList.contains("opy-seekable")&&(e?t.classList.add("opy-seekable"):t.classList.remove("opy-seekable"))}},{key:"_initSource",value:function(e){e.origSrc=e.src,e.src=function(t){var n=this.otvtoolkit();if(t){if(O.a.setSourcePreference(n._updatePreferenceForNagraDRMs(t.preferredDRM)),O.a.getPreference()&&n.techConfig.configure(q.b,"drm.preferredKeySystems",[O.a.getPreference()]),n.segmentTimeoutController.setVodTimeoutMultiplier(t.vodSegmentTimeout||D.a.USE_DEFAULT),n.segmentTimeoutController.setLiveTimeoutMultiplier(t.liveSegmentTimeout||D.a.USE_DEFAULT),e.addClass("opy-zapping"),n._isConfigTimerDrivenNudgeable(e)){var r=function(){n._isNudgeNeeded(e,!0)&&(n._doNudge(e)&&(e._zappingTimerId=setTimeout(function(){r()},5e3)))};clearTimeout(e._zappingTimerId),e._zappingTimerId=setTimeout(function(){r()},5e3)}this.one(e,["canplay","contentcanplay"],function(){e.removeClass("opy-zapping")}),n.reset();var i=n.drmController.updateSourceData(t);return e.tech_.shaka_&&e.tech_.shaka_.configure({streaming:{lowLatencyMode:void 0,rebufferingGoal:void 0,inaccurateManifestTolerance:void 0}}),n.otvResolutionController&&(t.startAtLowestBitrate?n.otvResolutionController.setShakaPlayToStartAtLowestBitrate():n.otvResolutionController.resetShakaPlayToStartAtLowestBitrate()),n.techConfig.configure(q.b,{streaming:{autoLowLatencyMode:i.lowLatencyEnabled}}),void 0!==n.pluginOptions.preferredPlayer&&(i.preferredPlayer=n.pluginOptions.preferredPlayer),n.timeline.onSetUrl(i),n.networkStatistics.setSource(t),n.playbackStatistics.setSource(t),n.renderingStatistics.setSource(t),n.seekMonitor.setSource(t),void this.origSrc(i)}return this.origSrc(t)}}},{key:"_initCurrentTime",value:function(e){e.origCurrentTime=e.currentTime,e.currentTime=function(t){var n=t;if(t){var r=e.seekable().length,i=e.seekable().end(r-1);n=Math.min(t,i)}return this.origCurrentTime(n)}}},{key:"_initReset",value:function(e){var t=this,n=e.reset.bind(e);e.reset=function(){t.techConfig.setTech(null),t._saveSettings(),t.reset(),n()}}},{key:"_saveSettings",value:function(){this.player&&(this._muted=this.player.muted(),this._volume=this.player.volume())}},{key:"_reinstateSettings",value:function(e){e&&(void 0!==this._muted&&(e.muted=this._muted,e.defaultMuted=this._muted),void 0!==this._volume&&(e.volume=this._volume),e.disablePictureInPicture=!0,e.addEventListener("contextmenu",function(e){e.preventDefault()},!1))}},{key:"_initReadyEvent",value:function(e,t){var n=this;this.on(e,"ready",function(){n.errorReporting.ready(),t.ready(e.tech_.el_);var r=e.$("video");n._reinstateSettings(r),n.startThumbnailPresenter(),n.techConfig.setTech(e.tech_.shaka_),n.otvResolutionController.ready(),e.tech_.shaka_&&n._configOnReady(e)})}},{key:"_configOnReady",value:function(e){var t=this;if(void 0===this.defaultInitDataTransform){var n=this.getConfiguration();this.defaultInitDataTransform=n.drm.initDataTransform}this.platCfg.applyPlatformSpecificConfig(),e&&e.options_&&e.options_.shakaConfig&&this.techConfig.configure(q.b,e.options_.shakaConfig),this.techConfig.configure(q.b,J),this.techConfig.configure(q.b,{drm:{initDataTransform:function(e,n,r){return"com.tvkey.drm"!==r.keySystem&&"com.nagra.prm"!==r.keySystem?t.defaultInitDataTransform(e,n,r):e}}}),this.wvhw.setHwDecryption(this.pluginOptions.drm,this.drmSecurityLevel,this.techConfig,q.b)}},{key:"_isConfigTimerDrivenNudgeable",value:function(){return j.a.isSmartTV()}},{key:"_isConfigPlayingEvtNudgeable",value:function(e){var t=!!e.otvtoolkit().pluginOptions.drm.config.ssmServer,n=!!e.otvtoolkit().pluginOptions.drm.system.includes("customer"),r=!!e.otvtoolkit().pluginOptions.drm.config.requestLicenceCallback;return!j.a.isSafari()&&(t||n||r)}},{key:"_isNudgeNeeded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.paused(),r=e.autoplay(),i=e.el_.classList.contains("opy-zapping"),o=r&&i;return o=t?o&&n:o&&this._isConfigPlayingEvtNudgeable(e)}},{key:"_doNudge",value:function(e){var t=!1,n=e.tech_.shaka_&&e.tech_.shaka_.isLive(),r=e.seekable().length;if(n)e.play(),t=!0;else if(r>0){var i=e.currentTime(),o=Math.min(5,2*(e.seekable().end(r-1)-e.seekable().start(r-1))/1e3);e.log("NUDGING currentTime is ".concat(i," <= ").concat(o," ?")),i<=o&&e.currentTime(o),t=!0}return t}},{key:"_initPlayingEvent",value:function(e){var t=this;this.one(e,"playing",function(){t._isNudgeNeeded(e)&&t._doNudge(e)})}},{key:"_initSeekEvent",value:function(e){this.seekMonitor=new K.a(window.navigator.userAgent,e,this._log),this.on(e,"seeked",function(){e.paused()||e.play()})}},{key:"_initLoadStartEvent",value:function(e){var t=this;this.on(e,"loadstart",function(){t._configureTextDisplayFactory(),t._log("Current Tech name is:"+t.player.techName_)})}},{key:"_initPlayerEvents",value:function(e,t){this._initReadyEvent(e,t),this._initSeekEvent(e),this._initLoadStartEvent(e),this._initPlayingEvent(e)}},{key:"_initComponents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};P.a.initialiseToolkit(this);for(var t in e)e.hasOwnProperty(t)&&(this.hasOwnProperty(t)?this[t](e[t]):w.a.log.warn('Component "'.concat(t,'", does not exist it will not be added.')))}},{key:"_initPlayerWaiting",value:function(e){var t=function(){e.addClass("vjs-waiting");var t=e.currentTime(),n=function(){e.currentTime()-t>.04&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))};e.on("timeupdate",n)};e.on("waiting",t)}},{key:"_initCheckForSeekable",value:function(){var e=this,t=function(){var t=e.player.seekable(),n=e.player.hasClass("vjs-liveui");0===t.length&&n&&e.player.removeClass("vjs-liveui")};this.on(this.player,"canplaythrough",t)}},{key:"_checkForEdge",value:function(){-1!==window.navigator.userAgent.toLowerCase().indexOf("edge")?this.player.hasClass("opy-edge")||this.player.addClass("opy-edge"):this.player.hasClass("opy-edge")&&this.player.removeClass("opy-edge")}},{key:"_enableConsoleLogging",value:function(e){this.on(e,"loadstart",this._printEvent),this.on(e,"sourceset",this._printEvent),this.on(e,"waiting",this._printEvent),this.on(e,"canplay",this._printEvent),this.on(e,"canplaythrough",this._printEvent),this.on(e,"playing",this._printEvent),this.on(e,"ended",this._printEvent),this.on(e,"seeking",this._printEvent),this.on(e,"seeked",this._printEvent),this.on(e,"play",this._printEvent),this.on(e,"firstplay",this._printEvent),this.on(e,"pause",this._printEvent),this.on(e,"durationchange",this._printEvent),this.on(e,"fullscreenchange",this._printEvent),this.on(e,"error",this._printEvent),this.on(e,"loadedmetadata",this._printEvent),this.on(e,"posterchange",this._printEvent),this.on(e,"textdata",this._printEvent),this.on(e,"ready",this._printEvent)}},{key:"_printEvent",value:function(e){this._log("Event: "+e.type+" called")}},{key:"_configureTextDisplayFactory",value:function(){var e,t=this,n=t.player.el_.getElementsByTagName("video")[0],r=n.parentElement;this.player.tech_.shaka_&&this.player.tech_.shaka_.setVideoContainer(r),e=function(){return new shaka.text.UITextDisplayer(n,r,{captionsUpdatePeriod:.25})},this.techConfig.configure(q.b,"textDisplayFactory",e)}}])}(Y);$.VERSION=S.version,w.a.registerPlugin("otvtoolkit",$)},function(e,t,n){(function(t){e.exports=t.videojs=n(343)}).call(t,n(18))},function(e,t,n){(function(t){/**
 * @license
 * Video.js 8.17.3-nmp-1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */
!function(t,n){e.exports=n()}(0,function(){function e(e){return r(e)?Object.keys(e):[]}function n(t,n){e(t).forEach(function(e){return n(t[e],e)})}function r(e){return!!e&&"object"==typeof e}function i(e){return r(e)&&"[object Object]"===kt.call(e)&&e.constructor===Object}function o(){for(var e={},t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.forEach(function(t){t&&n(t,function(t,n){i(t)?(i(e[n])||(e[n]={}),e[n]=o(e[n],t)):e[n]=t})}),e}function a(e,t,n,r){function i(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})}var o={configurable:!0,enumerable:!0,get:function(){var e=n();return i(e),e}};return(r=void 0===r||r)&&(o.set=i),Object.defineProperty(e,t,o)}function s(e){return"string"==typeof e&&Boolean(e.trim())}function u(){return document===window.document}function c(e){return r(e)&&1===e.nodeType}function l(e){return function(t,n){return s(t)?(n=c(n=s(n)?document.querySelector(n):n)?n:document)[e]&&n[e](t):document[e](null)}}function f(e,t,n,r){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={});var i=document.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];"textContent"===e?d(i,n):i[e]===n&&"tabIndex"!==e||(i[e]=n)}),Object.getOwnPropertyNames(n).forEach(function(e){i.setAttribute(e,n[e])}),r&&x(i,r),i}function d(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function h(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function p(e,t){if(0<=t.indexOf(" "))throw new Error("class has illegal whitespace characters");return e.classList.contains(t)}function g(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=e.classList).add.apply(t,r.reduce(function(e,t){return e.concat(t.split(/\s+/))},[])),e}function y(e){var t;if(!e)return _t.warn("removeClass was called with an element that doesn't exist"),null;for(var n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=e.classList).remove.apply(t,r.reduce(function(e,t){return e.concat(t.split(/\s+/))},[])),e}function v(e,t,n){return"boolean"!=typeof(n="function"==typeof n?n(e,t):n)&&(n=void 0),t.split(/\s+/).forEach(function(t){return e.classList.toggle(t,n)}),e}function m(e,t){Object.getOwnPropertyNames(t).forEach(function(n){var r=t[n];null===r||void 0===r||!1===r?e.removeAttribute(n):e.setAttribute(n,!0===r?"":r)})}function b(e){var t={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(e&&e.attributes&&0<e.attributes.length)for(var r=e.attributes,i=r.length-1;0<=i;i--){var o=r[i].name,a=r[i].value;n.includes(o)&&(a=null!==a),t[o]=a}return t}function w(e,t){return e.getAttribute(t)}function S(e,t,n){e.setAttribute(t,n)}function _(e,t){e.removeAttribute(t)}function T(e){if(!e||!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,r=0,i=0;e.offsetParent&&e!==document[ht.fullscreenElement];)r+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{left:r,top:i,width:t,height:n}}function k(e){return r(e)&&3===e.nodeType}function E(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function A(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return c(e="function"==typeof e?e():e)||k(e)?e:"string"==typeof e&&/\S/.test(e)?document.createTextNode(e):void 0}).filter(function(e){return e})}function x(e,t){return A(t).forEach(function(t){return e.appendChild(t)}),e}function C(e,t){return x(E(e),t)}function P(e,t){if(!e||!t)return"";if("function"!=typeof window.getComputedStyle)return"";var n;try{n=window.getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}function I(e){[].concat(document.styleSheets).forEach(function(t){try{var n=[].concat(t.cssRules).map(function(e){return e.cssText}).join(""),r=document.createElement("style");r.textContent=n,e.document.head.appendChild(r)}catch(r){n=document.createElement("link"),n.rel="stylesheet",n.type=t.type,n.media=t.media.mediaText,n.href=t.href,e.document.head.appendChild(n)}})}function j(){if(!1!==wt.options.autoSetup){var e=Array.prototype.slice.call(document.getElementsByTagName("video")),t=Array.prototype.slice.call(document.getElementsByTagName("audio")),n=Array.prototype.slice.call(document.getElementsByTagName("video-js")),r=e.concat(t,n);if(r&&0<r.length)for(var i=0,o=r.length;i<o;i++){var a=r[i];if(!a||!a.getAttribute){M(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&wt(a)}else Qt||M(1)}}function M(e,t){u()&&(t&&(wt=t),window.setTimeout(j,e))}function O(){Qt=!0,window.removeEventListener("load",O)}function R(e){var t=document.createElement("style");return t.className=e,t}function D(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}function L(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function N(e,t){return e(t={exports:{}},t.exports),t.exports}function U(e,t){var n;on.has(e)&&(0===(n=on.get(e)).handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length)&&on.delete(e)}function B(e,t,n,r){n.forEach(function(n){e(t,n,r)})}function F(e){function t(){return!0}function n(){return!1}if(!e.fixed_){if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var r,i,o,a=e||window.event,s=(e={},["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"]);for(r in a)s.includes(r)||"returnValue"===r&&a.preventDefault||(e[r]=a[r]);e.target||(e.target=e.srcElement||document),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){a.preventDefault&&a.preventDefault(),e.returnValue=!1,a.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),e.cancelBubble=!0,a.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!=e.clientX&&(i=document.documentElement,o=document.body,e.pageX=e.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}e.fixed_=!0}return e}function H(e,t,n){if(Array.isArray(t))return B(H,e,t,n);on.has(e)||on.set(e,{});var r=on.get(e);r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=an++),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(!r.disabled){t=F(t);var i=r.handlers[t.type];if(i)for(var o=i.slice(0),a=0,s=o.length;a<s&&!t.isImmediatePropagationStopped();a++)try{o[a].call(e,t,n)}catch(t){_t.error(t)}}}),1===r.handlers[t].length&&(e.addEventListener?(n=!1,function(){if("boolean"!=typeof Zt){Zt=!1;try{var e=Object.defineProperty({},"passive",{get:function(){Zt=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}return Zt}()&&-1<sn.indexOf(t)&&(n={passive:!0}),e.addEventListener(t,r.dispatcher,n)):e.attachEvent&&e.attachEvent("on"+t,r.dispatcher))}function V(e,t,n){if(on.has(e)){var r=on.get(e);if(r.handlers){if(Array.isArray(t))return B(V,e,t,n);var i=function(e,t){r.handlers[t]=[],U(e,t)};if(void 0===t)for(var o in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},o)&&i(e,o);else{var a=r.handlers[t];if(a)if(n){if(n.guid)for(var s=0;s<a.length;s++)a[s].guid===n.guid&&a.splice(s--,1);U(e,t)}else i(e,t)}}}}function W(e,t,n){var r=on.has(e)?on.get(e):{},i=e.parentNode||e.ownerDocument;return"string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=F(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles?W.call(null,i,t,n):!i&&!t.defaultPrevented&&t.target&&t.target[t.type]&&(on.has(t.target)||on.set(t.target,{}),r=on.get(t.target),t.target[t.type])&&(r.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),r.disabled=!1),!t.defaultPrevented}function K(e,t,n){function r(){V(e,t,r),n.apply(this,arguments)}if(Array.isArray(t))return B(K,e,t,n);r.guid=n.guid=n.guid||an++,H(e,t,r)}function q(e,t,n){function r(){V(e,t,r),n.apply(this,arguments)}r.guid=n.guid=n.guid||an++,H(e,t,r)}function G(e,t,n){if(!e||!e.nodeName&&!hn(e))throw new Error("Invalid target for "+dn(t)+"#"+n+"; must be a DOM node or evented object.")}function z(e,t,n){if(!pn(e))throw new Error("Invalid event type for "+dn(t)+"#"+n+"; must be a non-empty string or array.")}function X(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for "+dn(t)+"#"+n+"; must be a function.")}function Y(e,t,n){var r,i,o=t.length<3||t[0]===e||t[0]===e.eventBusEl_,t=o?(r=e.eventBusEl_,3<=t.length&&t.shift(),i=t[0],t[1]):(r=t[0],i=t[1],t[2]);return G(r,e,n),z(i,e,n),X(t,e,n),{isTargetingSelf:o,target:r,type:i,listener:t=cn(e,t)}}function J(e,t,n,r){G(e,e,t),e.nodeName?un[t](e,n,r):e[t](n,r)}function $(e,t){if(t=(t=void 0===t?{}:t).eventBusKey){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=f("span",{className:"vjs-event-bus"});rn(e,gn),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),[e,e.el_,e.eventBusEl_].forEach(function(e){e&&on.has(e)&&on.delete(e)}),window.setTimeout(function(){e.eventBusEl_=null},0)})}function Q(e,t){rn(e,yn),e.state=rn({},e.state,t),"function"==typeof e.handleStateChanged&&hn(e)&&e.on("statechanged",e.handleStateChanged)}function Z(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})}function ee(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function te(e,t){return ee(e)===ee(t)}function ne(e,t,n,r){var i=r,o=n.length-1;if("number"!=typeof i||i<0||o<i)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+i+") is non-numeric or out of bounds (0-"+o+").");return n[r][t]}function re(e){var t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:ne.bind(null,"start",0,e),end:ne.bind(null,"end",1,e)};return window.Symbol&&window.Symbol.iterator&&(t[window.Symbol.iterator]=function(){return(e||[]).values()}),t}function ie(e,t){return Array.isArray(e)?re(e):void 0===e||void 0===t?re():re([[e,t]])}function oe(e,t){e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),o=Math.floor(t/60%60),t=Math.floor(t/3600);return(i=0<(i=isNaN(e)||e===1/0?r=n="-":i)||0<t?i+":":"")+(r=((i||10<=o)&&r<10?"0"+r:r)+":")+(n=n<10?"0"+n:n)}function ae(e){wn=e}function se(){wn=oe}function ue(e,t){return wn(e,t=void 0===t?e:t)}function ce(e,t){var n,r,i=0;if(!t)return 0;e&&e.length||(e=ie(0,0));for(var o=0;o<e.length;o++)n=e.start(o),i+=(r=t<(r=e.end(o))?t:r)-n;return i/t}function le(e){if(e instanceof le)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:r(e)&&("number"==typeof e.code&&(this.code=e.code),rn(this,e)),this.message||(this.message=le.defaultMessages[this.code]||"")}function fe(e){return null!=e&&"function"==typeof e.then}function de(e){fe(e)&&e.then(null,function(e){})}function he(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,n,r){return e[n]&&(t[n]=e[n]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}function pe(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)}function ge(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)}function ye(e){return new URL(e,document.baseURI)}function ve(e){return new URL(e,document.baseURI).href}function me(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){var n;if(e)return"string"==typeof e?be(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(e,t,n){var r=e;return Wn(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=nn({},t,{uri:e}),r.callback=n,r}function Se(e,t,n){return _e(t=we(e,t,n))}function _e(e){function t(){var e=void 0,e=c.response||c.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(c);if(g)try{e=JSON.parse(e)}catch(e){}return e}function n(t){var n;if(clearTimeout(a),clearTimeout(e.retryTimeout),(t=t instanceof Error?t:new Error(""+(t||"Unknown XMLHttpRequest Error"))).statusCode=0,o||!Se.retryManager.getIsEnabled()||!e.retry||!e.retry.shouldRetry())return e.requestType&&Se.responseInterceptorsStorage.getIsEnabled()&&(n={headers:y.headers||{},body:y.body,responseUrl:c.responseURL,responseType:c.responseType},n=Se.responseInterceptorsStorage.execute(e.requestType,n),y.body=n.body,y.headers=n.headers),u(t,y);e.retryTimeout=setTimeout(function(){e.retry.moveToNextAttempt(),e.xhr=c,_e(e)},e.retry.getCurrentFuzzedDelay())}function r(){var n,r,i;if(!o)return clearTimeout(a),clearTimeout(e.retryTimeout),i=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status,n=y,r=null,0!==i?(n={body:t(),statusCode:i,method:f,headers:{},url:l,rawRequest:c},c.getAllResponseHeaders&&(n.headers=zn(c.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),e.requestType&&Se.responseInterceptorsStorage.getIsEnabled()&&(i={headers:n.headers||{},body:n.body,responseUrl:c.responseURL,responseType:c.responseType},i=Se.responseInterceptorsStorage.execute(e.requestType,i),n.body=i.body,n.headers=i.headers),u(r,n,n.body)}if(void 0===e.callback)throw new Error("callback argument missing");e.requestType&&Se.requestInterceptorsStorage.getIsEnabled()&&(d=Se.requestInterceptorsStorage.execute(e.requestType,{uri:e.uri||e.url,headers:e.headers||{},body:e.body,metadata:e.metadata||{},retry:e.retry,timeout:e.timeout}),e.uri=d.uri,e.headers=d.headers,e.body=d.body,e.metadata=d.metadata,e.retry=d.retry,e.timeout=d.timeout);var i,o,a,s=!1,u=function(t,n,r){s||(s=!0,e.callback(t,n,r))},c=e.xhr||null,l=(c=c||new(e.cors||e.useXDR?Se.XDomainRequest:Se.XMLHttpRequest)).url=e.uri||e.url,f=c.method=e.method||"GET",d=e.body||e.data,h=c.headers=e.headers||{},p=!!e.sync,g=!1,y={body:void 0,headers:{},statusCode:0,method:f,url:l,rawRequest:c};if("json"in e&&!1!==e.json&&(g=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==f)&&"HEAD"!==f&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===e.json?d:e.json)),c.onreadystatechange=function(){4!==c.readyState||Se.responseInterceptorsStorage.getIsEnabled()||setTimeout(r,0)},c.onload=r,c.onerror=n,c.onprogress=function(){},c.onabort=function(){o=!0,clearTimeout(e.retryTimeout)},c.ontimeout=n,c.open(f,l,!p,e.username,e.password),p||(c.withCredentials=!!e.withCredentials),!p&&0<e.timeout&&(a=setTimeout(function(){var e;o||(o=!0,c.abort("timeout"),(e=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",n(e))},e.timeout)),c.setRequestHeader)for(i in h)h.hasOwnProperty(i)&&c.setRequestHeader(i,h[i]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(d||null),c}function Te(e,t){var n={uri:e};(e=Bn(e))&&(n.cors=e),(e="use-credentials"===t.tech_.crossOrigin())&&(n.withCredentials=e),Xn(n,cn(this,function(e,n,r){if(e)return _t.error(e,n);t.loaded_=!0,"function"!=typeof window.WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(e){if("vttjserror"!==e.type)return $n(r,t);_t.error("vttjs failed to load, stopping trying to process "+t.src)}):$n(r,t)}))}function ke(){}function Ee(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Ae(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}return e=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/),e?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function xe(){this.values=rr(null)}function Ce(e,t,n,r){var i,o,a=r?e.split(r):[e];for(i in a)"string"==typeof a[i]&&2===(o=a[i].split(n)).length&&t(o[0].trim(),o[1].trim())}function Pe(e,t){for(var n,r,i,o,a,s,u=e.document.createElement("div"),c=u,l=[];null!==(s=void 0,s=t?(s=(s=t.match(/^([^<]*)(<[^>]*>?)?/))[1]||s[2],t=t.substr(s.length),s):null);)"<"===s[0]?"/"===s[1]?l.length&&l[l.length-1]===s.substr(2).replace(">","")&&(l.pop(),c=c.parentNode):(r=Ae(s.substr(1,s.length-2)))?(n=e.document.createProcessingInstruction("timestamp",r),c.appendChild(n)):(r=s.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(i=r[1],o=r[3],a=void 0,a=or[i],n=a?(a=e.document.createElement(a),(i=sr[i])&&o&&(a[i]=o.trim()),a):null)&&(i=c,ur[(o=n).localName]&&ur[o.localName]!==i.localName||(r[2]&&((a=r[2].split(".")).forEach(function(e){var t=/^bg_/.test(e),e=t?e.slice(3):e;ar.hasOwnProperty(e)&&(e=ar[e],n.style[t?"background-color":"color"]=e)}),n.className=a.join(" ")),l.push(r[1]),c.appendChild(n),c=n)):c.appendChild(e.document.createTextNode((o=s,ir.innerHTML=o,o=ir.textContent,ir.textContent="",o)));return u}function Ie(e){function t(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}var n=[],r="";if(e&&e.childNodes)for(t(n,e);r=function e(n){var r,i,o;return n&&n.length?(i=(r=n.pop()).textContent||r.innerText)?(o=i.match(/^.*(\n|\r)/))?o[n.length=0]:i:"ruby"===r.tagName?e(n):r.childNodes?(t(n,r),e(n)):void 0:null}(n);)for(var i=0;i<r.length;i++)if(function(e){for(var t=0;t<cr.length;t++){var n=cr[t];if(e>=n[0]&&e<=n[1])return 1}}(r.charCodeAt(i)))return"rtl";return"ltr"}function je(){}function Me(e,t,n){je.call(this),this.cue=t,this.cueDiv=Pe(e,t.text),this.applyStyles({color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"},this.cueDiv),this.div=e.document.createElement("div"),e={direction:Ie(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(e),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":case"line-left":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":case"line-right":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Oe(e){var t,n,r,i;e.div&&(t=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop,i=(i=(i=e.div.childNodes)&&i[0])&&i.getClientRects&&i.getClientRects(),e=e.div.getBoundingClientRect(),i=i?Math.max(i[0]&&i[0].height||0,e.height/i.length):0),this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||t,this.bottom=e.bottom||r+(e.height||t),this.width=e.width||n,this.lineHeight=void 0!==i?i:e.lineHeight}function Re(e,t,n,r){var i,o=new Oe(t),a=t.cue,s=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(a),u=[];if(a.snapToLines){switch(a.vertical){case"":u=["+y","-y"],i="height";break;case"rl":u=["+x","-x"],i="width";break;case"lr":u=["-x","+x"],i="width"}var c=o.lineHeight,l=c*Math.round(s),f=n[i]+c,d=u[0];Math.abs(l)>f&&(l=l<0?-1:1,l*=Math.ceil(f/c)*c),s<0&&(l+=""===a.vertical?n.height:n.width,u=u.reverse()),o.move(d,l)}else{var h=o.lineHeight/n.height*100;switch(a.lineAlign){case"center":s-=h/2;break;case"end":s-=h}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}u=["+y","-x","+x","-y"],o=new Oe(t)}f=function(e,t){for(var i,o=new Oe(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var u=e.intersectPercentage(n);u<a&&(i=new Oe(e),a=u),e=new Oe(o)}return i||o}(o,u),t.move(f.toCSSCompatValues(n))}function De(){}function Le(e){return"string"==typeof e&&!!dr[e.toLowerCase()]&&e.toLowerCase()}function Ne(e,t,n){this.hasBeenReset=!1;var r="",i=!1,o=e,a=t,s=n,u=null,c="",l=!0,f="auto",d="start",h="auto",p="auto",g=100,y="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(e){r=""+e}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(e){i=!!e}},startTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");o=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");a=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return s},set:function(e){s=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(e){if(!1===(e="string"==typeof(e=e)&&!!fr[e.toLowerCase()]&&e.toLowerCase()))throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");c=e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return l},set:function(e){l=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return d},set:function(e){(e=Le(e))&&(d=e,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return h},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");h=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(e){(e=Le(e))&&(p=e,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return y},set:function(e){if(!(e=Le(e)))throw new SyntaxError("align: an invalid or illegal alignment string was specified.");y=e,this.hasBeenReset=!0}}}),this.displayState=void 0}function Ue(e){return"number"==typeof e&&0<=e&&e<=100}function Be(){var e=100,t=3,n=0,r=100,i=0,o=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Ue(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!Ue(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!Ue(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!Ue(e))throw new Error("ViewportAnchorY must be between 0 and 100.");o=e}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!Ue(e))throw new Error("ViewportAnchorX must be between 0 and 100.");i=e}},scroll:{enumerable:!0,get:function(){return a},set:function(e){!1!==(e="string"==typeof(e=e)&&!!pr[e.toLowerCase()]&&e.toLowerCase())&&(a=e)}}})}function Fe(e,t,n){e.setTimeout(function(){return function e(t,n,r,i,o,a){void 0===t&&(t={}),void 0===n&&(n=[]),void 0===o&&(o=[]),void 0===a&&(a=!1);var s=n[0],u=n.slice(1);if("string"==typeof s)e(t,vr[s],r,i,o,a);else if(s){var c=We(i,s);if(!c.setSource)return o.push(c),e(t,u,r,i,o,a);c.setSource(rn({},t),function(n,s){if(n)return e(t,u,r,i,o,a);o.push(c),e(s,t.type===s.type?u:vr[s.type],r,i,o,a)})}else u.length?e(t,u,r,i,o,a):a?r(t,o):e(t,vr["*"],r,i,o,!0)}(t,vr[t.type],n,e)},1)}function He(e,t,n,r){void 0===r&&(r=null);for(var i="call"+ee(n),i=e.reduce(Ve(i),r),r=i===br,t=r?null:t[n](i),o=e,a=n,s=t,u=r,c=o.length-1;0<=c;c--){var l=o[c];l[a]&&l[a](u,s)}return t}function Ve(e){return function(t,n){return t===br?br:n[e]?n[e](t):t}}function We(e,t){var n=mr[e.id()],r=null;if(null==n)r=t(e),mr[e.id()]=[[t,r]];else{for(var i=0;i<n.length;i++){var o=n[i];o[0]===t&&(r=o[1])}null===r&&(r=t(e),n.push([t,r]))}return r}function Ke(e){var t;return e=Array.isArray(e)?(t=[],e.forEach(function(e){e=Ke(e),Array.isArray(e)?t=t.concat(e):r(e)&&t.push(e)}),t):"string"==typeof e&&e.trim()?[qe({src:e})]:r(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[qe(e)]:[]}function qe(e){var t;return e.type||(t=kr(e.src))&&(e.type=t),e}function Ge(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){var n;if(e)return"string"==typeof e?ze(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Xe(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Ye(e,t,n){try{e.style[t]=n}catch(e){}}function Je(e){return e?e+"px":""}function $e(e){var t,n,r,i=e.el();i.resetSourceWatch_||(t={},n=Mr(e),r=function(t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=t.apply(i,r);return Pr(e),a}},["append","appendChild","insertAdjacentHTML"].forEach(function(e){i[e]&&(t[e]=i[e],i[e]=r(t[e]))}),Object.defineProperty(i,"innerHTML",o(n,{set:r(n.set)})),i.resetSourceWatch_=function(){i.resetSourceWatch_=null,Object.keys(t).forEach(function(e){i[e]=t[e]}),Object.defineProperty(i,"innerHTML",n)},e.one("sourceset",i.resetSourceWatch_))}function Qe(e){var t,n,r,i;e.featuresSourceset&&!(t=e.el()).resetSourceset_&&(n=jr([e.el(),window.HTMLMediaElement.prototype,Or],"src"),r=t.setAttribute,i=t.load,Object.defineProperty(t,"src",o(n,{set:function(r){return r=n.set.call(t,r),e.triggerSourceset(t.src),r}})),t.setAttribute=function(n,i){return i=r.call(t,n,i),/src/i.test(n)&&e.triggerSourceset(t.src),i},t.load=function(){var n=i.call(t);return Pr(e)||(e.triggerSourceset(""),$e(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):Pr(e)||$e(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=i,t.setAttribute=r,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()})}function Ze(e){return qr.hasOwnProperty(e)}function et(e){return Ze(e)?qr[e]:void 0}function tt(e,t){e[Kr]=e[Kr]||{},e[Kr][t]=!0}function nt(e,t,n){n=(n?"before":"")+"pluginsetup",e.trigger(n,t),e.trigger(n+":"+t.name,t)}function rt(e,t){function n(){nt(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return tt(this,e),nt(this,{name:e,plugin:t,instance:n}),n}return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function it(e,t){return t.prototype.name=e,function(){nt(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=Vr(t,[this].concat(r));return this[e]=function(){return o},nt(this,o.getEventHash()),o}}function ot(e,t,n,r){return i=t+" is deprecated and will be removed in "+e+".0; please use "+n+" instead.",o=r,a=!1,function(){a||_t.warn(i),a=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.apply(this,t)};var i,o,a}function at(e){return 0===e.indexOf("#")?e.slice(1):e}function st(e,t,n){if(a=st.getPlayer(e))t&&_t.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&a.ready(n);else{var i="string"==typeof e?Yt("#"+at(e)):e;if(!c(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");e="getRootNode"in i&&i.getRootNode()instanceof window.ShadowRoot?i.getRootNode():i.ownerDocument.body,i.ownerDocument.defaultView&&e.contains(i)||_t.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),ft("beforesetup").forEach(function(e){e=e(i,o(t)),!r(e)||Array.isArray(e)?_t.error("please return an object in beforesetup hooks"):t=o(t,e)});var a=new(vn.getComponent("Player"))(i,t,n);ft("setup").forEach(function(e){return e(a)})}return a}for(var ut,ct="8.17.3-nmp-1",lt={},ft=function(e,t){return lt[e]=lt[e]||[],t&&(lt[e]=lt[e].concat(t)),lt[e]},dt=function(e,t){return!((t=ft(e).indexOf(t))<=-1||(lt[e]=lt[e].slice(),lt[e].splice(t,1),0))},ht={prefixed:!0},pt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],gt=pt[0],yt=0;yt<pt.length;yt++)if(pt[yt][1]in document){ut=pt[yt];break}if(ut){for(var vt=0;vt<ut.length;vt++)ht[gt[vt]]=ut[vt];ht.prefixed=ut[0]!==gt[0]}var mt,bt,wt,St=[],_t=function e(t,n,r){function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o("log",c,t)}void 0===n&&(n=":");var o,a,s,u,c="info";return a=t,u=r=void 0===r?"":r,o=function(e,t,n){var t=s.levels[t],r=new RegExp("^("+t+")$"),i=a;"log"!==e&&n.unshift(e.toUpperCase()+":"),u&&(i="%c"+a,n.unshift(u)),n.unshift(i+":"),St&&(St.push([].concat(n)),i=St.length-1e3,St.splice(0,0<i?i:0)),window.console&&(i=(i=window.console[e])||"debug"!==e?i:window.console.info||window.console.log)&&t&&r.test(e)&&i[Array.isArray(n)?"apply":"call"](window.console,n)},(s=i).createLogger=function(i,o,a){return e(t+" "+(o=void 0!==o?o:n)+" "+i,o,void 0!==a?a:r)},i.createNewLogger=e,i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:c},i.level=function(e){if("string"==typeof e){if(!i.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');c=e}return c},(i.history=function(){return St?[].concat(St):[]}).filter=function(e){return(St||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},i.history.clear=function(){St&&(St.length=0)},i.history.disable=function(){null!==St&&(St.length=0,St=null)},i.history.enable=function(){null===St&&(St=[])},i.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o("error",c,t)},i.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o("warn",c,t)},i.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o("debug",c,t)},i}("VIDEOJS"),Tt=_t.createLogger,kt=Object.prototype.toString,Et=Object.freeze({__proto__:null,each:n,reduce:function(t,n,r){return void 0===r&&(r=0),e(t).reduce(function(e,r){return n(e,t[r],r)},r)},isObject:r,isPlain:i,merge:o,values:function(e){var t,n,r=[];for(t in e=void 0===e?{}:e)e.hasOwnProperty(t)&&(n=e[t],r.push(n));return r},defineLazyProperty:a}),At=!1,xt=null,Ct=!1,Pt=!1,It=!1,jt=!1,Mt=!1,Ot=null,Rt=null,Dt=Boolean(window.cast&&window.cast.framework&&window.cast.framework.CastReceiverContext),Lt=null,Nt=!1,Ut=!1,Bt=!1,Ft=!1,Ht=!1,Vt=!1,Wt=!1,Kt=Boolean(u()&&("ontouchstart"in window||window.navigator.maxTouchPoints||window.DocumentTouch&&window.document instanceof window.DocumentTouch)),qt=window.navigator&&window.navigator.userAgentData,Gt=(qt&&qt.platform&&qt.brands&&(Ct="Android"===qt.platform,It=Boolean(qt.brands.find(function(e){return"Microsoft Edge"===e.brand})),jt=Boolean(qt.brands.find(function(e){return"Chromium"===e.brand})),Mt=!It&&jt,Ot=Rt=(qt.brands.find(function(e){return"Chromium"===e.brand})||{}).version||null,Ut="Windows"===qt.platform),jt||(qt=window.navigator&&window.navigator.userAgent||"",At=/iPod/i.test(qt),ln=qt.match(/OS (\d+)_/i),xt=ln&&ln[1]?ln[1]:null,Ct=/Android/i.test(qt),ln=qt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),mt=ln?(tn=ln[1]&&parseFloat(ln[1]),bt=ln[2]&&parseFloat(ln[2]),tn&&bt?parseFloat(ln[1]+"."+ln[2]):tn||null):null,Pt=/Firefox/i.test(qt),It=/Edg/i.test(qt),jt=/Chrome/i.test(qt)||/CriOS/i.test(qt),Mt=!It&&jt,bt=qt.match(/(Chrome|CriOS)\/(\d+)/),Ot=Rt=bt&&bt[2]?parseFloat(bt[2]):null,ln=(ln=/MSIE\s(\d+)\.\d/.exec(qt))&&parseFloat(ln[1]),Lt=ln=!ln&&/Trident\/7.0/i.test(qt)&&/rv:11.0/.test(qt)?11:ln,Ht=/Tizen/i.test(qt),Vt=/Web0S/i.test(qt),Wt=Ht||Vt,Nt=/Safari/i.test(qt)&&!Mt&&!Ct&&!It&&!Wt,Ut=/Windows/i.test(qt),Bt=/iPad/i.test(qt)||Nt&&Kt&&!/iPhone/i.test(qt),Ft=/iPhone/i.test(qt)&&!Bt),Ft||Bt||At),zt=(Nt||Gt)&&!Mt,Xt=Object.freeze({__proto__:null,get IS_IPOD(){return At},get IOS_VERSION(){return xt},get IS_ANDROID(){return Ct},get ANDROID_VERSION(){return mt},get IS_FIREFOX(){return Pt},get IS_EDGE(){return It},get IS_CHROMIUM(){return jt},get IS_CHROME(){return Mt},get CHROMIUM_VERSION(){return Ot},get CHROME_VERSION(){return Rt},IS_CHROMECAST_RECEIVER:Dt,get IE_VERSION(){return Lt},get IS_SAFARI(){return Nt},get IS_WINDOWS(){return Ut},get IS_IPAD(){return Bt},get IS_IPHONE(){return Ft},get IS_TIZEN(){return Ht},get IS_WEBOS(){return Vt},get IS_SMART_TV(){return Wt},TOUCH_ENABLED:Kt,IS_IOS:Gt,IS_ANY_SAFARI:zt}),Yt=l("querySelector"),Jt=l("querySelectorAll"),$t=Object.freeze({__proto__:null,isReal:u,isEl:c,isInFrame:function(){try{return window.parent!==window.self}catch(e){return!0}},createEl:f,textContent:d,prependTo:h,hasClass:p,addClass:g,removeClass:y,toggleClass:v,setAttributes:m,getAttributes:b,getAttribute:w,setAttribute:S,removeAttribute:_,blockTextSelection:function(){document.body.focus(),document.onselectstart=function(){return!1}},unblockTextSelection:function(){document.onselectstart=function(){return!0}},getBoundingClientRect:function(e){var t,n;if(e&&e.getBoundingClientRect&&e.parentNode)return t=e.getBoundingClientRect(),n={},["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),n.height||(n.height=parseFloat(P(e,"height"))),n.width||(n.width=parseFloat(P(e,"width"))),n},findPosition:T,getPointerPosition:function(e,t){var n={x:0,y:0};if(Gt)for(var r=e;r&&"html"!==r.nodeName.toLowerCase();){var i,o=P(r,"transform");/^matrix/.test(o)?(i=o.slice(7,-1).split(/,\s/).map(Number),n.x+=i[4],n.y+=i[5]):/^matrix3d/.test(o)&&(i=o.slice(9,-1).split(/,\s/).map(Number),n.x+=i[12],n.y+=i[13]),r.assignedSlot&&r.assignedSlot.parentElement&&window.WebKitCSSMatrix&&(o=window.getComputedStyle(r.assignedSlot.parentElement).transform,o=new window.WebKitCSSMatrix(o),n.x+=o.m41,n.y+=o.m42),r=r.parentNode||r.host}var a={},s=T(t.target),u=(e=T(e)).width,c=t.offsetY-(e.top-s.top),s=t.offsetX-(e.left-s.left);return t.changedTouches&&(s=t.changedTouches[0].pageX-e.left,c=t.changedTouches[0].pageY+e.top,Gt)&&(s-=n.x,c-=n.y),a.y=1-Math.max(0,Math.min(1,c/e.height)),a.x=Math.max(0,Math.min(1,s/u)),a},isTextNode:k,emptyEl:E,normalizeContent:A,appendContent:x,insertContent:C,isSingleLeftClick:function(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||"mousedown"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons},$:Yt,$$:Jt,computedStyle:P,copyStyleSheetsToWindow:I}),Qt=!1;u()&&("complete"===document.readyState?O():window.addEventListener("load",O));var Zt,en,tn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},nn=N(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)!{}.hasOwnProperty.call(r,n)||(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),rn=L(nn),on=new WeakMap,an=3,sn=["touchstart","touchmove"],un=Object.freeze({__proto__:null,fixEvent:F,on:H,off:V,trigger:W,one:K,any:q}),cn=function(e,t,n){return t.guid||(t.guid=an++),e=t.bind(e),e.guid=n?n+"_"+t.guid:t.guid,e},ln=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:30,bind_:cn,throttle:function(e,t){var n=window.performance.now();return function(){var r=window.performance.now();t<=r-n&&(e.apply(void 0,arguments),n=r)}},debounce:function(e,t,n,r){function i(){var i=this,a=arguments,s=function(){s=o=null,n||e.apply(i,a)};!o&&n&&e.apply(i,a),r.clearTimeout(o),o=r.setTimeout(s,t)}var o;return void 0===r&&(r=window),i.cancel=function(){r.clearTimeout(o),o=null},i}}),fn=function(){function e(){}var t=e.prototype;return t.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},H(this,e,t),this.addEventListener=n},t.off=function(e,t){V(this,e,t)},t.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},K(this,e,t),this.addEventListener=n},t.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},q(this,e,t),this.addEventListener=n},t.trigger=function(e){var t=e.type||e;e=F(e="string"==typeof e?{type:t}:e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),W(this,e)},t.queueTrigger=function(e){var t=this,n=(en=en||new Map,e.type||e),r=en.get(this),i=(r||(r=new Map,en.set(this,r)),r.get(n)),i=(r.delete(n),window.clearTimeout(i),window.setTimeout(function(){r.delete(n),0===r.size&&(r=null,en.delete(t)),t.trigger(e)},0));r.set(n,i)},e}(),dn=(fn.prototype.allowedEvents_={},fn.prototype.addEventListener=fn.prototype.on,fn.prototype.removeEventListener=fn.prototype.off,fn.prototype.dispatchEvent=fn.prototype.trigger,function(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_||(e.constructor&&e.constructor.name?e.constructor.name:typeof e)}),hn=function(e){return e instanceof fn||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},pn=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},gn={on:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,o=Y(this,n,"on"),a=o.isTargetingSelf,s=o.target,u=o.type,c=o.listener;J(s,"on",u,c),a||((i=function(){return e.off(s,u,c)}).guid=c.guid,(o=function(){return e.off("dispose",i)}).guid=c.guid,J(this,"on","dispose",i),J(s,"on","dispose",o))},one:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Y(this,n,"one"),o=i.isTargetingSelf,a=i.target,s=i.type,u=i.listener;o?J(a,"one",s,u):((i=function t(){e.off(a,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];u.apply(null,r)}).guid=u.guid,J(a,"one",s,i))},any:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Y(this,n,"any"),o=i.isTargetingSelf,a=i.target,s=i.type,u=i.listener;o?J(a,"any",s,u):((i=function t(){e.off(a,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];u.apply(null,r)}).guid=u.guid,J(a,"any",s,i))},off:function(e,t,n){!e||pn(e)?V(this.eventBusEl_,e,t):(t=t,G(e=e,this,"off"),z(t,this,"off"),X(n,this,"off"),n=cn(this,n),this.off("dispose",n),e.nodeName?(V(e,t,n),V(e,"dispose",n)):hn(e)&&(e.off(t,n),e.off("dispose",n)))},trigger:function(e,t){G(this.eventBusEl_,this,"trigger");var n=e&&"string"!=typeof e?e.type:e;if(pn(n))return W(this.eventBusEl_,e,t);throw new Error("Invalid event type for "+dn(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.")}},yn={state:{},setState:function(e){var t,r=this;return n(e="function"==typeof e?e():e,function(e,n){r.state[n]!==e&&((t=t||{})[n]={from:r.state[n],to:e}),r.state[n]=e}),t&&hn(this)&&this.trigger({changes:t,type:"statechanged"}),t}},qt=Object.freeze({__proto__:null,toLowerCase:Z,toTitleCase:ee,titleCaseEquals:te}),vn=function(){function e(e,t,n){var r=this;!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=o({},this.options_),t=this.options_=o(this.options_,t),this.id_=t.id||t.el&&t.el.id,this.id_||(e=e&&e.id&&e.id()||"no_player",this.id_=e+"_component_"+an++),this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(function(e){return r.addClass(e)}),["on","off","one","any","trigger"].forEach(function(e){r[e]=void 0}),!1!==t.evented&&($(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Q(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.on=function(e,t){},t.off=function(e,t){},t.one=function(e,t){},t.any=function(e,t){},t.trigger=function(e,t){},t.dispose=function(e){if(void 0===e&&(e={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;0<=t;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e&&(this.options_=o(this.options_,e)),this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return f(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),o=i&&i[r],r=r&&r.split("-")[0],i=i&&i[r],r=n;return o&&o[e]?r=o[e]:i&&i[e]&&(r=i[e]),r=t?r.replace(/\{(\d+)\}/g,function(e,n){return n=t[n-1],void 0===n?e:n}):r},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var t=t.reduce(function(e,t){return e.concat(t)},[]),r=this,i=0;i<t.length;i++)if(!(r=r.getChild(t[i]))||!r.getChild)return;return r},t.setIcon=function(e,t){var n,r,i;if(void 0===t&&(t=this.el()),this.player_.options_.experimentalSvgIcons)return i="http://www.w3.org/2000/svg",n=f("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),(r=document.createElementNS(i,"svg")).setAttributeNS(null,"viewBox","0 0 512 512"),i=document.createElementNS(i,"use"),r.appendChild(i),i.setAttributeNS(null,"href","#vjs-icon-"+e),n.appendChild(r),this.iconIsSet_?t.replaceChild(n,t.querySelector(".vjs-icon-placeholder")):t.appendChild(n),this.iconIsSet_=!0,n},t.addChild=function(t,n,r){if(void 0===n&&(n={}),void 0===r&&(r=this.children_.length),"string"==typeof t){var i=ee(t),o=n.componentClass||i,a=(n.name=i,e.getComponent(o));if(!a)throw new Error("Component "+o+" does not exist");if("function"!=typeof a)return null;o=new a(this.player_||this,n)}else o=t;return o.parentComponent_&&o.parentComponent_.removeChild(o),this.children_.splice(r,0,o),o.parentComponent_=this,"function"==typeof o.id&&(this.childIndex_[o.id()]=o),(i=i||o.name&&ee(o.name()))&&(this.childNameIndex_[i]=o,this.childNameIndex_[Z(i)]=o),"function"==typeof o.el&&o.el()&&(a=null,this.children_[r+1]&&(this.children_[r+1].el_?a=this.children_[r+1].el_:c(this.children_[r+1])&&(a=this.children_[r+1])),this.contentEl().insertBefore(o.el(),a)),o},t.removeChild=function(e){if((e="string"==typeof e?this.getChild(e):e)&&this.children_){for(var t,n=!1,r=this.children_.length-1;0<=r;r--)if(this.children_[r]===e){n=!0,this.children_.splice(r,1);break}n&&(e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[ee(e.name())]=null,this.childNameIndex_[Z(e.name())]=null,t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}},t.initChildren=function(){var t,n,r,i=this,o=this.options_.children;o&&(t=this.options_,n=e.getComponent("Tech"),(r=Array.isArray(o)?o:Object.keys(o)).concat(Object.keys(this.options_).filter(function(e){return!r.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var t,e="string"==typeof e?o[t=e]||i.options_[t]||{}:(t=e.name,e);return{name:t,opts:e}}).filter(function(t){return(t=e.getComponent(t.opts.componentClass||ee(t.name)))&&!n.isTech(t)}).forEach(function(e){var n=e.name,e=e.opts;!1!==(e=void 0!==t[n]?t[n]:e)&&((e=!0===e?{}:e).playerOptions=i.options_.playerOptions,e=i.addChild(n,e))&&(i[n]=e)}))},t.buildCSSClass=function(){return""},t.ready=function(e,t){void 0===t&&(t=!1),e&&(this.isReady_?t?e.call(this):this.setTimeout(e,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e)))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},t.$=function(e,t){return Yt(e,t||this.contentEl())},t.$$=function(e,t){return Jt(e,t||this.contentEl())},t.hasClass=function(e){return p(this.el_,e)},t.addClass=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];g.apply($t,[this.el_].concat(t))},t.removeClass=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];y.apply($t,[this.el_].concat(t))},t.toggleClass=function(e,t){v(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return w(this.el_,e)},t.setAttribute=function(e,t){S(this.el_,e,t)},t.removeAttribute=function(e){_(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){var r,i;if(void 0===t)return this.el_?-1!==(i=(r=this.el_.style[e]).indexOf("px"))?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+ee(e)],10):0;-1!==(""+(t=null!==t&&t==t?t:0)).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",n||this.trigger("componentresize")},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");return t=P(this.el_,e),0!==(t=parseFloat(t))&&!isNaN(t)||(e="offset"+ee(e),t=this.el_[e]),t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.getPositions=function(){var e=this.el_.getBoundingClientRect();return{boundingClientRect:{x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},center:{x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2}}},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&("Tab"===e.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled||e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){function e(){t=!1}var t,n=0,r=null;this.on("touchstart",function(e){1===e.touches.length&&(r={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},n=window.performance.now(),t=!0)}),this.on("touchmove",function(e){var n;(1<e.touches.length||r&&(n=e.touches[0].pageX-r.pageX,e=e.touches[0].pageY-r.pageY,10<Math.sqrt(n*n+e*e)))&&(t=!1)}),this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(r=null)===t&&window.performance.now()-n<200&&(e.preventDefault(),this.trigger("tap"))})},t.enableTouchActivity=function(){var e,t,n;this.player()&&this.player().reportUserActivity&&(e=cn(this.player(),this.player().reportUserActivity),this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}),n=function(n){e(),this.clearInterval(t)},this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n))},t.setTimeout=function(e,t){var n,r=this;return e=cn(this,e),this.clearTimersOnDispose_(),n=window.setTimeout(function(){r.setTimeoutIds_.has(n)&&r.setTimeoutIds_.delete(n),e()},t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),window.clearTimeout(e)),e},t.setInterval=function(e,t){return e=cn(this,e),this.clearTimersOnDispose_(),e=window.setInterval(e,t),this.setIntervalIds_.add(e),e},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),window.clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,n=this;return this.clearTimersOnDispose_(),e=cn(this,e),t=window.requestAnimationFrame(function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()}),this.rafIds_.add(t),t},t.requestNamedAnimationFrame=function(e,t){var n,r=this;if(!this.namedRafs_.has(e))return this.clearTimersOnDispose_(),t=cn(this,t),n=this.requestAnimationFrame(function(){t(),r.namedRafs_.has(e)&&r.namedRafs_.delete(e)}),this.namedRafs_.set(e,n),e},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),window.cancelAnimationFrame(e)),e},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var n=t[0],r=t[1];e[n].forEach(function(t,n){return e[r](n)})}),e.clearingTimersOnDispose_=!1}))},t.getIsDisabled=function(){return Boolean(this.el_.disabled)},t.getIsExpresslyInert=function(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert},t.getIsFocusable=function(e){return 0<=(e||this.el_).tabIndex&&!(this.getIsDisabled()||this.getIsExpresslyInert())},t.getIsAvailableToBeFocused=function(e){function t(e){var e=window.getComputedStyle(e,null),t=e.getPropertyValue("visibility");return"none"!==e.getPropertyValue("display")&&!["hidden","collapse"].includes(t)}var n;return!(!function(e){if(e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width!==0){var t={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2};if(!(t.x<0||t.x>(document.documentElement.clientWidth||window.innerWidth)||t.y<0||t.y>(document.documentElement.clientHeight||window.innerHeight)))for(var n=document.elementFromPoint(t.x,t.y);n;){if(n===e)return 1;if(!n.parentNode)return;n=n.parentNode}}}(e=e||this.el())||!t((n=e).parentElement)||!t(n)||"0"===n.style.opacity||"0px"===window.getComputedStyle(n).height||"0px"===window.getComputedStyle(n).width||e.parentElement&&!(0<=e.tabIndex))},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var r=e.getComponent("Tech"),r=r&&r.isTech(n),i=e===n||e.prototype.isPrototypeOf(n.prototype);if(r||!i)throw i=r?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+i+".");if(t=ee(t),e.components_||(e.components_={}),r=e.getComponent("Player"),"Player"===t&&r&&r.players){var o=r.players,i=Object.keys(o);if(o&&0<i.length&&i.map(function(e){return o[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[Z(t)]=n},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}(),mn=(vn.registerComponent("Component",vn),N(function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),Dt=(L(mn),N(function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,mn(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports})),bn=L(Dt),wn=oe;Dt=Object.freeze({__proto__:null,createTimeRanges:ie,createTimeRange:ie,setFormatTime:ae,resetFormatTime:se,formatTime:ue}),le.prototype.code=0,le.prototype.message="",le.prototype.status=null,le.prototype.metadata=null,le.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],le.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},le.MEDIA_ERR_CUSTOM=0,le.prototype.MEDIA_ERR_CUSTOM=0,le.MEDIA_ERR_ABORTED=1,le.prototype.MEDIA_ERR_ABORTED=1,le.MEDIA_ERR_NETWORK=2,le.prototype.MEDIA_ERR_NETWORK=2,le.MEDIA_ERR_DECODE=3,le.prototype.MEDIA_ERR_DECODE=3,le.MEDIA_ERR_SRC_NOT_SUPPORTED=4,le.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,le.MEDIA_ERR_ENCRYPTED=5,le.prototype.MEDIA_ERR_ENCRYPTED=5;var Sn,_n=function(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(e){r=e}return[r,n]},Tn=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=he(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(he))},kn=function(e,t){return e.forEach(function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return n.addCue(e)})}),t.textTracks()},En="vjs-modal-dialog",An=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleKeyDown_=function(e){return r.handleKeyDown(e)},r.close_=function(e){return r.close(e)},r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=f("div",{className:En+"-content"},{role:"document"}),r.descEl_=f("p",{className:En+"-description vjs-control-text",id:r.el().getAttribute("aria-describedby")}),d(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}bn(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return En+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){var e;this.opened_?this.options_.fillAlways&&this.fill():(e=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){var e;this.opened_&&(e=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary)&&this.dispose()},n.closeable=function(e){var t,n;return"boolean"==typeof e&&(e=this.closeable_=!!e,t=this.getChild("closeButton"),e&&!t&&(n=this.contentEl_,this.contentEl_=this.el_,t=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(t,"close",this.close_)),!e)&&t&&(this.off(t,"close",this.close_),this.removeChild(t),t.dispose()),this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling,e=(this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),C(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t),this.getChild("closeButton"));e&&n.appendChild(e.el_),this.trigger("aftermodalfill")},n.empty=function(){this.trigger("beforemodalempty"),E(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=document.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),"Escape"===e.key&&this.closeable())e.preventDefault(),this.close();else if("Tab"===e.key){for(var t,n=this.focusableEls_(),r=this.el_.querySelector(":focus"),i=0;i<n.length;i++)if(r===n[i]){t=i;break}document.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof window.HTMLAnchorElement||e instanceof window.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof window.HTMLInputElement||e instanceof window.HTMLSelectElement||e instanceof window.HTMLTextAreaElement||e instanceof window.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof window.HTMLIFrameElement||e instanceof window.HTMLObjectElement||e instanceof window.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},t}(vn),xn=(An.prototype.options_={pauseOnOpen:!0,temporary:!0},vn.registerComponent("ModalDialog",An),function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(n,"length",{get:function(){return this.tracks_.length}});for(var r=0;r<t.length;r++)n.addTrack(t[r]);return n}bn(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},hn(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,n=0,r=this.length;n<r;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(fn));for(Sn in xn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},xn.prototype.allowedEvents_)xn.prototype["on"+Sn]=null;var Cn=function(e){function t(t){for(var n,r=(t=void 0===t?[]:t).length-1;0<=r;r--)if(t[r].enabled){pe(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,n}bn(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&pe(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,pe(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(xn),Pn=function(e){function t(t){for(var n,r=(t=void 0===t?[]:t).length-1;0<=r;r--)if(t[r].selected){ge(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(n,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}bn(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&ge(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,ge(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(xn),In=function(e){function t(){return e.apply(this,arguments)||this}bn(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_)&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_)},t}(xn),jn=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),Mn=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){function t(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}var n=this.length||0,r=0,i=e.length;if(this.cues_=e,this.length_=e.length,n<i)for(r=n;r<i;r++)t.call(this,r)},t.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}(),On={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Rn={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Dn={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ln={disabled:"disabled",hidden:"hidden",showing:"showing"},Nn=function(e){function t(t){void 0===t&&(t={}),n=e.call(this)||this;var n,r,i={id:t.id||"vjs_track_"+an++,kind:t.kind||"",language:t.language||""},o=t.label||"";for(r in i)!function(e){Object.defineProperty(n,e,{get:function(){return i[e]},set:function(){}})}(r);return Object.defineProperty(n,"label",{get:function(){return o},set:function(e){e!==o&&(o=e,this.trigger("labelchange"))}}),n}return bn(t,e),t}(fn),Un=function(e){return"string"==typeof e&&(e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e))?e.pop().toLowerCase():""},Bn=function(e,t){return void 0===t&&(t=window.location),ye(e).origin!==t.origin},Fn=Object.freeze({__proto__:null,parseUrl:ye,getAbsoluteURL:ve,getFileExtension:Un,isCrossOrigin:Bn}),Hn="undefined"!=typeof window?window:void 0!==tn?tn:"undefined"!=typeof self?self:{},Vn=Hn,Wn=function(e){var t;return!!e&&("[object Function]"===(t=Kn.call(e))||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt))},Kn=Object.prototype.toString,Hn=function(){function e(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var t=e.prototype;return t.getIsEnabled=function(){return this.enabled_},t.enable=function(){this.enabled_=!0},t.disable=function(){this.enabled_=!1},t.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},t.addInterceptor=function(e,t){return this.typeToInterceptorsMap_.has(e)||this.typeToInterceptorsMap_.set(e,new Set),e=this.typeToInterceptorsMap_.get(e),!e.has(t)&&(e.add(t),!0)},t.removeInterceptor=function(e,t){return!(!(e=this.typeToInterceptorsMap_.get(e))||!e.has(t)||(e.delete(t),0))},t.clearInterceptorsByType=function(e){return!!this.typeToInterceptorsMap_.get(e)&&(this.typeToInterceptorsMap_.delete(e),this.typeToInterceptorsMap_.set(e,new Set),!0)},t.clear=function(){return!!this.typeToInterceptorsMap_.size&&(this.typeToInterceptorsMap_=new Map,!0)},t.getForType=function(e){return this.typeToInterceptorsMap_.get(e)||new Set},t.execute=function(e,t){for(var n=me(this.getForType(e));!(r=n()).done;){var r=r.value;try{t=r(t)}catch(e){}}return t},e}(),qn=function(){function e(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var t=e.prototype;return t.getIsEnabled=function(){return this.enabled_},t.enable=function(){this.enabled_=!0},t.disable=function(){this.enabled_=!1},t.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},t.getMaxAttempts=function(){return this.maxAttempts_},t.setMaxAttempts=function(e){this.maxAttempts_=e},t.getDelayFactor=function(){return this.delayFactor_},t.setDelayFactor=function(e){this.delayFactor_=e},t.getFuzzFactor=function(){return this.fuzzFactor_},t.setFuzzFactor=function(e){this.fuzzFactor_=e},t.getInitialDelay=function(){return this.initialDelay_},t.setInitialDelay=function(e){this.initialDelay_=e},t.createRetry=function(e){var e=void 0===e?{}:e,t=e.maxAttempts;return new Gn({maxAttempts:t||this.maxAttempts_,delayFactor:e.delayFactor||this.delayFactor_,fuzzFactor:e.fuzzFactor||this.fuzzFactor_,initialDelay:e.initialDelay||this.initialDelay_})},e}(),Gn=function(){function e(e){this.maxAttempts_=e.maxAttempts,this.delayFactor_=e.delayFactor,this.fuzzFactor_=e.fuzzFactor,this.currentDelay_=e.initialDelay,this.currentAttempt_=1}var t=e.prototype;return t.moveToNextAttempt=function(){this.currentAttempt_++;var e=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+e},t.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},t.getCurrentDelay=function(){return this.currentDelay_},t.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},t.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},t.getCurrentFuzzedDelay=function(){var e=this.getCurrentMinPossibleDelay(),t=this.getCurrentMaxPossibleDelay();return e+Math.random()*(t-e)},e}();Se.httpHandler=function(e,t){return void 0===t&&(t=!1),function(n,r,i){if(n)e(n);else if(400<=r.statusCode&&r.statusCode<=599){if(n=i,t)if(Vn.TextDecoder){r=function(e){return void 0===e&&(e=""),e.toLowerCase().split(";").reduce(function(e,t){var t=t.split("="),n=t[0],t=t[1];return"charset"===n.trim()?t.trim():e},"utf-8")}(r.headers&&r.headers["content-type"]);try{n=new TextDecoder(r).decode(i)}catch(n){}}else n=String.fromCharCode.apply(null,new Uint8Array(i));e({cause:n})}else e(null,i)}},Se.requestInterceptorsStorage=new Hn,Se.responseInterceptorsStorage=new Hn,Se.retryManager=new qn;for(var zn=function(e){var t={};return e&&e.trim().split("\n").forEach(function(e){var n=e.indexOf(":"),r=e.slice(0,n).trim().toLowerCase(),e=e.slice(n+1).trim();void 0===t[r]?t[r]=e:Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]}),t},Xn=Se,Hn=Se,Yn=(Se.XMLHttpRequest=Vn.XMLHttpRequest||function(){},Se.XDomainRequest="withCredentials"in new Se.XMLHttpRequest?Se.XMLHttpRequest:Vn.XDomainRequest,["get","put","post","patch","head","delete"]),Jn=0;Jn<Yn.length;Jn++)!function(e){Se["delete"===e?"del":e]=function(t,n,r){return(n=we(t,n,r)).method=e.toUpperCase(),_e(n)}}(Yn[Jn]);Xn.default=Hn;var $n=function(e,t){var n=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<r.length&&(window.console&&window.console.groupCollapsed&&window.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach(function(e){return _t.error(e)}),window.console)&&window.console.groupEnd&&window.console.groupEnd(),n.flush()},Qn=function(e){function t(t){var n,r,i,a,s,u;if((t=void 0===t?{}:t).tech)return t=o(t,{kind:Dn[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=Ln[t.mode]||"disabled",i=t.default,"metadata"!==t.kind&&"chapters"!==t.kind||(r="hidden"),(n=e.call(this,t)||this).tech_=t.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks,a=new Mn(n.cues_),s=new Mn(n.activeCues_),u=!1,n.timeupdateHandler=cn(n,function(e){void 0===e&&(e={}),this.tech_.isDisposed()||(this.tech_.isReady_&&(this.activeCues=this.activeCues,u)&&(this.trigger("cuechange"),u=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}),n.tech_.one("dispose",function(){n.stopTracking()}),"disabled"!==r&&n.startTracking(),Object.defineProperties(n,{default:{get:function(){return i},set:function(){}},mode:{get:function(){return r},set:function(e){Ln[e]&&r!==e&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||Te(this.src,this),this.stopTracking(),"disabled"!==r&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0!==this.cues.length){for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];i.startTime<=e&&e<=i.endTime&&t.push(i)}if(u=!1,t.length!==this.activeCues_.length)u=!0;else for(var o=0;o<t.length;o++)-1===this.activeCues_.indexOf(t[o])&&(u=!0);this.activeCues_=t,s.setCues_(this.activeCues_)}return s},set:function(){}}}),t.src?(n.src=t.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&Te(n.src,n)):n.loaded_=!0,n;throw new Error("A tech was not provided.")}bn(t,e);var n=t.prototype;return n.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},n.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},n.addCue=function(e){var t=e;if(!("getCueAsHTML"in t)){for(var n in t=new window.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var r=this.tech_.textTracks(),i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(Nn),qn=(Qn.prototype.allowedEvents_={cuechange:"cuechange"},function(e){function t(t){var t=o(t=void 0===t?{}:t,{kind:Rn[t.kind]||""}),n=e.call(this,t)||this,r=!1,i="",a="";return Object.defineProperty(n,"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),Object.defineProperty(n,"audioChannelConfig",{get:function(){return i},set:function(e){"string"==typeof e&&e!==i&&(i=e)}}),Object.defineProperty(n,"audioCodec",{get:function(){return a},set:function(e){"string"==typeof e&&e!==a&&(a=e)}}),t.enabled&&(n.enabled=t.enabled),i=t.audioChannelConfig||"",a=t.audioCodec||"",n.loaded_=!0,n}return bn(t,e),t}(Nn)),Hn=function(e){function t(t){var t=o(t=void 0===t?{}:t,{kind:On[t.kind]||""}),n=e.call(this,t)||this,r=!1;return Object.defineProperty(n,"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),t.selected&&(n.selected=t.selected),n}return bn(t,e),t}(Nn),Nn=function(e){function t(n){void 0===n&&(n={}),r=e.call(this)||this;var r,i,o=new Qn(n);return r.kind=o.kind,r.src=o.src,r.srclang=o.language,r.label=o.label,r.default=o.default,Object.defineProperties(r,{readyState:{get:function(){return i}},track:{get:function(){return o}}}),i=t.NONE,o.addEventListener("loadeddata",function(){i=t.LOADED,r.trigger({type:"load",target:r})}),r}return bn(t,e),t}(fn),Zn=(Nn.prototype.allowedEvents_={load:"load"},Nn.NONE=0,Nn.LOADING=1,Nn.LOADED=2,Nn.ERROR=3,{audio:{ListClass:Cn,TrackClass:qn,capitalName:"Audio"},video:{ListClass:Pn,TrackClass:Hn,capitalName:"Video"},text:{ListClass:In,TrackClass:Qn,capitalName:"Text"}}),er=(Object.keys(Zn).forEach(function(e){Zn[e].getterName=e+"Tracks",Zn[e].privateName=e+"Tracks_"}),{remoteText:{ListClass:In,TrackClass:Qn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:jn,TrackClass:Nn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}}),tr=rn({},Zn,er),Cn=(er.names=Object.keys(er),Zn.names=Object.keys(Zn),tr.names=[].concat(er.names).concat(Zn.names),void 0!==tn?tn:"undefined"!=typeof window?window:{}),nr="undefined"!=typeof document?document:(nr=Cn["__GLOBAL_DOCUMENT_CACHE@4"])||(Cn["__GLOBAL_DOCUMENT_CACHE@4"]={}),Pn=nr,rr=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return ke.prototype=e,new ke};((Ee.prototype=rr(Error.prototype)).constructor=Ee).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},xe.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var ir=Pn.createElement&&Pn.createElement("textarea"),or={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},ar={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},sr={v:"title",lang:"lang"},ur={rt:"ruby"},cr=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];je.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},je.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(Me.prototype=rr(je.prototype)).constructor=Me,Oe.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Oe.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Oe.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Oe.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Oe.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Oe.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Oe.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Oe.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},De.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},De.convertCueToDOMTree=function(e,t){return e&&t?Pe(e,t):null},De.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1}(t))for(var i,o,a=[],s=Oe.getSimpleBoxPosition(r),u={font:Math.round(.05*s.height*100)/100+"px sans-serif"},c=0;c<t.length;c++)i=new Me(e,o=t[c],u),r.appendChild(i.div),Re(0,i,s,a),o.displayState=i.div,a.push(Oe.getSimpleBoxPosition(i));else for(var l=0;l<t.length;l++)r.appendChild(t[l].displayState)},(De.Parser=function(e,t,n){n||(n=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof Ee))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function t(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var r,i=(r=t()).match(/^WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Ee(Ee.Errors.BadSignature);n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:r=t(),n.state){case"HEADER":/:/.test(r)?function(e){e.match(/X-TIMESTAMP-MAP/)?Ce(e,function(e,t){var r;"X-TIMESTAMP-MAP"===e&&(e=t,r=new xe,Ce(e,function(e,t){switch(e){case"MPEGT":r.integer(e+"S",t);break;case"LOCA":r.set(e+"L",Ae(t))}},/[^\d]:/,/,/),n.ontimestampmap)&&n.ontimestampmap({MPEGTS:r.get("MPEGTS"),LOCAL:r.get("LOCAL")})},/=/):Ce(e,function(e,t){var r;"Region"===e&&(e=t,r=new xe,Ce(e,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var n,i=t.split(",");2===i.length&&((n=new xe).percent("x",i[0]),n.percent("y",i[1]),n.has("x")&&n.has("y"))&&(r.set(e+"X",n.get("x")),r.set(e+"Y",n.get("y")));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id"))&&((e=new(n.vttjs.VTTRegion||n.window.VTTRegion)).width=r.get("width",100),e.lines=r.get("lines",3),e.regionAnchorX=r.get("regionanchorX",0),e.regionAnchorY=r.get("regionanchorY",100),e.viewportAnchorX=r.get("viewportanchorX",0),e.viewportAnchorY=r.get("viewportanchorY",100),e.scroll=r.get("scroll",""),n.onregion&&n.onregion(e),n.regionList.push({id:r.get("id"),region:e}))},/:/)}(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{!function(e,t,n){function r(){var t=Ae(e);if(null===t)throw new Ee(Ee.Errors.BadTimeStamp,"Malformed timestamp: "+o);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(){e=e.replace(/^\s+/,"")}var o=e;if(i(),t.startTime=r(),i(),"--\x3e"!==e.substr(0,3))throw new Ee(Ee.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);e=e.substr(3),i(),t.endTime=r(),i();var a=e,s=new xe;Ce(a,function(e,t){switch(e){case"region":for(var r=n.length-1;0<=r;r--)if(n[r].id===t){s.set(e,n[r].region);break}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),o=i[0];s.integer(e,o),s.percent(e,o)&&s.set("snapToLines",!1),s.alt(e,o,["auto"]),2===i.length&&s.alt("lineAlign",i[1],["start","center","end"]);break;case"position":i=t.split(","),s.percent(e,i[0]),2===i.length&&s.alt("positionAlign",i[1],["start","center","end"]);break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),t.region=s.get("region",null),t.vertical=s.get("vertical","");try{t.line=s.get("line","auto")}catch(r){}t.lineAlign=s.get("lineAlign","start"),t.snapToLines=s.get("snapToLines",!0),t.size=s.get("size",100);try{t.align=s.get("align","center")}catch(r){t.align=s.get("align","middle")}try{t.position=s.get("position","auto")}catch(r){t.position=s.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=s.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(r,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var a=-1!==r.indexOf("--\x3e");if(!r||a&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Ee(Ee.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var lr=De,fr={"":1,lr:1,rl:1},dr={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};Ne.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var hr=Ne,pr={"":!0,up:!0},gr=N(function(e){var e=e.exports={WebVTT:lr,VTTCue:hr,VTTRegion:Be},t=(Vn.vttjs=e,Vn.WebVTT=e.WebVTT,e.VTTCue),n=e.VTTRegion,r=Vn.VTTCue,i=Vn.VTTRegion;e.shim=function(){Vn.VTTCue=t,Vn.VTTRegion=n},e.restore=function(){Vn.VTTCue=r,Vn.VTTRegion=i},Vn.VTTCue||e.shim()});gr.WebVTT;var yr=function(e){function t(t,n){var r;return void 0===n&&(n=function(){}),(t=void 0===t?{}:t).reportTouchActivity=!1,(r=e.call(this,null,t,n)||this).onDurationChange_=function(e){return r.onDurationChange(e)},r.trackProgress_=function(e){return r.trackProgress(e)},r.trackCurrentTime_=function(e){return r.trackCurrentTime(e)},r.stopTrackingCurrentTime_=function(e){return r.stopTrackingCurrentTime(e)},r.disposeSourceHandler_=function(e){return r.disposeSourceHandler(e)},r.queuedHanders_=new Set,r.hasStarted_=!1,r.on("playing",function(){this.hasStarted_=!0}),r.on("loadstart",function(){this.hasStarted_=!1}),tr.names.forEach(function(e){e=tr[e],t&&t[e.getterName]&&(r[e.privateName]=t[e.getterName])}),r.featuresProgressEvents||r.manualProgressOn(),r.featuresTimeupdateEvents||r.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(r["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?r.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(r.featuresNativeTextTracks=!0),r.featuresNativeTextTracks||r.emulateTextTracks(),r.preloadTextTracks=!1!==t.preloadTextTracks,r.autoRemoteTextTracks_=new tr.text.ListClass,r.initTrackListeners(),t.nativeControlsForTouch||r.emitTapEvents(),r.constructor&&(r.name_=r.constructor.name||"Unknown Tech"),r}bn(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(cn(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return ie(0,0)},n.bufferedPercent=function(){return ce(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(Zn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(e){for(var n=t[e+"Tracks"]()||[],r=n.length;r--;){var i=n[r];"text"===e&&t.removeRemoteTextTrack(i),n.removeTrack(i)}})},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return void 0!==e&&(this.error_=new le(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?ie(0,0):ie()},n.play=function(){},n.setScrubbing=function(e){},n.scrubbing=function(){},n.setCurrentTime=function(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;Zn.names.forEach(function(t){function n(){e.trigger(t+"trackchange")}var r=Zn[t],i=e[r.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),e.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})},n.addWebVttScript_=function(){var e,t=this;window.WebVTT||(document.body.contains(this.el())?!this.options_["vtt.js"]&&i(gr)&&0<Object.keys(gr).length?this.trigger("vttjsloaded"):((e=document.createElement("script")).src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),window.WebVTT=!0,this.el().parentNode.appendChild(e)):this.ready(this.addWebVttScript_))},n.emulateTextTracks=function(){function e(e){return i.addTrack(e.track)}function t(e){return i.removeTrack(e.track)}function n(){a();for(var e=0;e<i.length;e++){var t=i[e];t.removeEventListener("cuechange",a),"showing"===t.mode&&t.addEventListener("cuechange",a)}}var r=this,i=this.textTracks(),o=this.remoteTextTracks(),a=(o.on("addtrack",e),o.on("removetrack",t),this.addWebVttScript_(),function(){return r.trigger("texttrackchange")});n(),i.addEventListener("change",n),i.addEventListener("addtrack",n),i.addEventListener("removetrack",n),this.on("dispose",function(){o.off("addtrack",e),o.off("removetrack",t),i.removeEventListener("change",n),i.removeEventListener("addtrack",n),i.removeEventListener("removetrack",n);for(var r=0;r<i.length;r++)i[r].removeEventListener("cuechange",a)})},n.addTextTrack=function(e,t,n){if(e)return e=e,t=t,n=n,void 0===i&&(i={}),o=(r=this).textTracks(),i.kind=e,t&&(i.label=t),n&&(i.language=n),i.tech=r,e=new tr.text.TrackClass(i),o.addTrack(e),e;throw new Error("TextTrack kind is required but was not provided");var r,i,o},n.createRemoteTextTrack=function(e){return e=o(e,{tech:this}),new er.remoteTextEl.TrackClass(e)},n.addRemoteTextTrack=function(e,t){var n=this,r=this.createRemoteTextTrack(e=void 0===e?{}:e);return"boolean"!=typeof t&&(t=!1),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!1===t&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(r.track)}),r},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){return Promise.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.requestVideoFrameCallback=function(e){var t=this,n=an++;return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",function(){t.queuedHanders_.has(n)&&(t.queuedHanders_.delete(n),e())})):this.requestNamedAnimationFrame(n,e),n},n.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(e){},n.overrideNativeVideoTracks=function(e){},n.canPlayType=function(e){return""},t.canPlayType=function(e){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n,r){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(t.canPlaySource)return e=ee(e),t.techs_[e]=n,t.techs_[Z(e)]=n,"Tech"!==e&&(void 0!==r&&!0===r?t.defaultTechOrder_.push(e):t.defaultTechOrder_.unshift(e)),n;throw new Error("Techs must have a static canPlaySource method on them")},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=ee(e),window&&window.videojs&&window.videojs[e]?(_t.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),window.videojs[e]):void 0)},t}(vn),vr=(tr.names.forEach(function(e){var t=tr[e];yr.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),yr.prototype.featuresVolumeControl=!0,yr.prototype.featuresMuteControl=!0,yr.prototype.featuresFullscreenResize=!1,yr.prototype.featuresPlaybackRate=!1,yr.prototype.featuresProgressEvents=!1,yr.prototype.featuresSourceset=!1,yr.prototype.featuresTimeupdateEvents=!1,yr.prototype.featuresNativeTextTracks=!1,yr.prototype.featuresVideoFrameCallback=!1,yr.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var r=(r=e.sourceHandlers)||(e.sourceHandlers=[]);void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){for(var n,r=e.sourceHandlers||[],i=0;i<r.length;i++)if(n=r[i].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var r=e.sourceHandlers||[],i=0;i<r.length;i++)if(r[i].canHandleSource(t,n))return r[i];return null},e.canPlaySource=function(t,n){var r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""},["seekable","seeking","duration","currentTime","setCurrentTime"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:_t.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},vn.registerComponent("Tech",yr),yr.registerTech("Tech",yr),yr.defaultTechOrder_=[],{}),mr={},br={},wr={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Sr={setCurrentTime:1,setMuted:1,setVolume:1},_r={play:1,pause:1},Tr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},kr=function(e){return e=Un(e=void 0===e?"":e),Tr[e.toLowerCase()]||""},In=Ht?10009:Vt?461:8,Er={codes:{play:415,pause:19,ff:417,rw:412,back:In},names:((jn={415:"play",19:"pause",417:"ff",412:"rw"})[In]="back",jn),isEventKey:function(e,t){return t=t.toLowerCase(),!(!this.names[e.keyCode]||this.names[e.keyCode]!==t)},getEventName:function(e){return this.names[e.keyCode]||(this.codes[e.code]?(e=this.codes[e.code],this.names[e]):null)}},Ar=function(e){function t(t){var n=e.call(this)||this;return n.player_=t,n.focusableComponents=[],n.isListening_=!1,n.isPaused_=!1,n.onKeyDown_=n.onKeyDown_.bind(n),n.lastFocusedComponent_=null,n}bn(t,e);var n=t.prototype;return n.start=function(){var e=this;this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",function(){e.focus(e.updateFocusableComponents()[0])}),this.player_.on("modalclose",function(){e.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay.on("aftermodalfill",function(){e.updateFocusableComponents(),e.focusableComponents.length&&(1<e.focusableComponents.length?e.focusableComponents[1]:e.focusableComponents[0]).focus()}))},n.stop=function(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1},n.onKeyDown_=function(e){var t,n=e.originalEvent||e;["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(n.key)?this.isPaused_||(n.preventDefault(),t=n.key.substring(5).toLowerCase(),this.move(t)):Er.isEventKey(n,"play")||Er.isEventKey(n,"pause")||Er.isEventKey(n,"ff")||Er.isEventKey(n,"rw")?(n.preventDefault(),t=Er.getEventName(n),this.performMediaAction_(t)):Er.isEventKey(n,"Back")&&e.target&&e.target.closeable()&&(n.preventDefault(),e.target.close())},n.performMediaAction_=function(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+5);break;case"rw":this.userSeek_(this.player_.currentTime()-5)}},n.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},n.pause=function(){this.isPaused_=!0},n.resume=function(){this.isPaused_=!1},n.handlePlayerBlur_=function(e){var t=e.relatedTarget,n=null,r=this.getCurrentComponent(e.target);t&&(n=Boolean(t.closest(".video-js")),t.classList.contains("vjs-text-track-settings"))&&!this.isPaused_&&this.searchForTrackSelect_(),(e.currentTarget.contains(e.relatedTarget)||n)&&t||(r&&"CloseButton"===r.name()?this.refocusComponent():(this.pause(),r&&r.el()&&(this.lastFocusedComponent_=r)))},n.handlePlayerFocus_=function(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()},n.updateFocusableComponents=function(){function e(t){for(var n=Ge(t);!(i=n()).done;){var i=i.value;i.hasOwnProperty("el_")&&i.getIsFocusable()&&i.getIsAvailableToBeFocused(i.el())&&r.push(i),i.hasOwnProperty("children_")&&0<i.children_.length&&e(i.children_)}}var t=this,n=this.player_,r=[];return n.children_.forEach(function(n){if(n.hasOwnProperty("el_")){if(n.getIsFocusable&&n.getIsAvailableToBeFocused&&n.getIsFocusable()&&n.getIsAvailableToBeFocused(n.el()))return void r.push(n);n.hasOwnProperty("children_")&&0<n.children_.length?e(n.children_):n.hasOwnProperty("items")&&0<n.items.length?e(n.items):t.findSuitableDOMChild(n)&&r.push(n)}"ErrorDisplay"===n.name_&&n.opened_&&(n=n.el_.querySelector(".vjs-errors-ok-button-container"))&&n.querySelectorAll("button").forEach(function(e,t){r.push({name:function(){return"ModalButton"+(t+1)},el:function(){return e},getPositions:function(){var t=e.getBoundingClientRect();return{boundingClientRect:{x:t.x,y:t.y,width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left},center:{x:t.left+t.width/2,y:t.top+t.height/2,width:0,height:0,top:t.top+t.height/2,right:t.left+t.width/2,bottom:t.top+t.height/2,left:t.left+t.width/2}}},getIsAvailableToBeFocused:function(){return!0},getIsFocusable:function(e){return!0},focus:function(){return e.focus()}})})}),this.focusableComponents=r,this.focusableComponents},n.findSuitableDOMChild=function(e){return e.el()?function t(n){if(e.getIsFocusable(n)&&e.getIsAvailableToBeFocused(n))return n;for(var r=0;r<n.children.length;r++){var i=t(n.children[r]);if(i)return i}return null}(e.el()):null},n.getCurrentComponent=function(e){this.updateFocusableComponents();var t=e||document.activeElement;if(this.focusableComponents.length)for(var n=Ge(this.focusableComponents);!(r=n()).done;){var r=r.value;if(r.el()===t)return r}},n.add=function(e){var t=[].concat(this.focusableComponents);e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})},n.remove=function(e){for(var t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name())return this.focusableComponents.splice(t,1),void this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})},n.clear=function(){0<this.focusableComponents.length&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))},n.move=function(e){var t,n,r=this,i=this.getCurrentComponent();i&&(t=i.getPositions(),n=this.focusableComponents.filter(function(n){return n!==i&&r.isInDirection_(t.boundingClientRect,n.getPositions().boundingClientRect,e)}),(n=this.findBestCandidate_(t.center,n,e))?this.focus(n):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:i}))},n.findBestCandidate_=function(e,t,n){for(var r=1/0,i=null,o=Ge(t);!(a=o()).done;){var a=a.value,s=a.getPositions().center,s=this.calculateDistance_(e,s,n);s<r&&(r=s,i=a)}return i},n.isInDirection_=function(e,t,n){switch(n){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}},n.refocusComponent=function(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(var e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name())return void this.focus(this.focusableComponents[e])}else this.focus(this.updateFocusableComponents()[0])},n.focus=function(e){"object"==typeof e&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())},n.calculateDistance_=function(e,t,n){var r,i=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y);switch(n){case"right":case"left":r=i+100*o;break;case"up":r=2*o+.5*i;break;case"down":r=5*o+i;break;default:r=i+o}return r},n.searchForTrackSelect_=function(){for(var e=Ge(this.updateFocusableComponents());!(t=e()).done;){var t=t.value;if("TextTrackSelect"===t.constructor.name){this.focus(t);break}}},t}(fn),Nn=function(e){function t(t,n,r){var i=o({createEl:!1},n),i=e.call(this,t,i,r)||this;if(n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var a=0,s=n.playerOptions.techOrder;a<s.length;a++){var u=ee(s[a]),c=yr.getTech(u);if((c=u?c:vn.getComponent(u))&&c.isSupported()){t.loadTech_(u);break}}return i}return bn(t,e),t}(vn),xr=(vn.registerComponent("MediaLoader",Nn),"#222"),Cr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Cn=function(e){function t(t,n,r){function i(e){o.updateDisplayOverlay(),o.updateDisplay(e)}var o=e.call(this,t,n,r)||this;return t.on("loadstart",function(e){return o.toggleDisplay(e)}),t.on("texttrackchange",function(e){return o.updateDisplay(e)}),t.on("loadedmetadata",function(e){o.updateDisplayOverlay(),o.preselectTrack(e)}),t.ready(cn(o,function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",i),t.on("playerresize",i);for(var e=window.screen.orientation||window,n=window.screen.orientation?"change":"orientationchange",r=(e.addEventListener(n,i),t.on("dispose",function(){return e.removeEventListener(n,i)}),this.options_.playerOptions.tracks||[]),o=0;o<r.length;o++)this.player_.addRemoteTextTrack(r[o],!0);this.preselectTrack()}})),o}bn(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,r={captions:1,subtitles:1},i=this.player_.textTracks(),o=this.player_.cache_.selectedLanguage,a=0;a<i.length;a++){var s=i[a];o&&o.enabled&&o.language&&o.language===s.language&&s.kind in r?n=s.kind!==o.kind&&n||s:o&&!o.enabled?t=e=n=null:s.default&&("descriptions"!==s.kind||e?s.kind in r&&!t&&(t=s):e=s)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof window.WebVTT&&window.WebVTT.processCues(window,[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],r=0;r<e.length;++r){var i=e[r];"showing"===i.mode&&n.push(i)}this.updateForTrack(n)}else{for(var o=null,a=null,s=e.length;s--;){var u=e[s];"showing"===u.mode&&("descriptions"===u.kind?o=u:a=u)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):o&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(o))}},n.updateDisplayOverlay=function(){var e,t,n,r,i,o;this.player_.videoHeight()&&window.CSS.supports("inset-inline: 10px")&&(n=(e=this.player_.currentWidth())/(t=this.player_.currentHeight()),r=this.player_.videoWidth()/this.player_.videoHeight(),o=i=0,.1<Math.abs(n-r)&&(r<n?i=Math.round((e-t*r)/2):o=Math.round((t-e/r)/2)),Ye(this.el_,"insetInline",Je(i)),Ye(this.el_,"insetBlock",Je(o)))},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,r=n.length;r--;){var i,o=n[r];o&&(o=o.displayState,t.color&&(o.firstChild.style.color=t.color),t.textOpacity&&Ye(o.firstChild,"color",Xe(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(o.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Ye(o.firstChild,"backgroundColor",Xe(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Ye(o,"backgroundColor",Xe(t.windowColor,t.windowOpacity)):o.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+xr:"raised"===t.edgeStyle?o.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+xr:"depressed"===t.edgeStyle?o.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+xr:"uniform"===t.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+xr)),t.fontPercent&&1!==t.fontPercent&&(i=window.parseFloat(o.style.fontSize),o.style.fontSize=i*t.fontPercent+"px",o.style.height="auto",o.style.top="auto"),t.fontFamily)&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=Cr[t.fontFamily])}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof window.WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],i=0;i<r.activeCues.length;++i)t.push(r.activeCues[i]);window.WebVTT.processCues(window,t,this.el_);for(var o=0;o<e.length;++o){for(var a=e[o],s=0;s<a.activeCues.length;++s){var u=a.activeCues[s].displayState;g(u,"vjs-text-track-cue","vjs-text-track-cue-"+(a.language||o)),a.language&&S(u,"lang",a.language)}this.player_.textTrackSettings&&this.updateDisplayState(a)}}},t}(vn),Pr=(vn.registerComponent("TextTrackDisplay",Cn),function(e){var t=e.el();if(t.hasAttribute("src"))e.triggerSourceset(t.src);else{var n=e.$$("source"),r=[],t="";if(!n.length)return!1;for(var i=0;i<n.length;i++){var o=n[i].src;o&&-1===r.indexOf(o)&&r.push(o)}if(!r.length)return!1;e.triggerSourceset(t=1===r.length?r[0]:t)}return!0}),Ir=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){for(var t=document.createElement(this.nodeName.toLowerCase()),n=(t.innerHTML=e,document.createDocumentFragment());t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",window.Element.prototype.appendChild.call(this,n),this.innerHTML}}),jr=function(e,t){for(var n={},r=0;r<e.length&&!((n=Object.getOwnPropertyDescriptor(e[r],t))&&n.set&&n.get);r++);return n.enumerable=!0,n.configurable=!0,n},Mr=function(e){return jr([e.el(),window.HTMLMediaElement.prototype,window.Element.prototype,Ir],"innerHTML")},Or=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?ve(window.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return window.Element.prototype.setAttribute.call(this,"src",e),e}}),Rr=function(e){function t(t,n){var r=e.call(this,t,n)||this,n=t.source,i=!1;if(r.featuresVideoFrameCallback=r.featuresVideoFrameCallback&&"VIDEO"===r.el_.tagName,n&&(r.el_.currentSrc!==n.src||t.tag&&3===t.tag.initNetworkState_)?r.setSource(n):r.handleLateInit_(r.el_),t.enableSourceset&&r.setupSourcesetHandling_(),r.isScrubbing_=!1,r.el_.hasChildNodes()){for(var o=r.el_.childNodes,a=o.length,s=[];a--;){var u=o[a];"track"===u.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(u),r.remoteTextTracks().addTrack(u.track),r.textTracks().addTrack(u.track),i||r.el_.hasAttribute("crossorigin")||!Bn(u.src)||(i=!0)):s.push(u))}for(var c=0;c<s.length;c++)r.el_.removeChild(s[c])}return r.proxyNativeTracks_(),r.featuresNativeTextTracks&&i&&_t.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),r.restoreMetadataTracksInIOSNativePlayer_(),(Kt||Ft)&&!0===t.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}bn(t,e);var n=t.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){Qe(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){n=[];for(var e=0;e<r.length;e++){var t=r[e];"metadata"===t.kind&&n.push({track:t,storedMode:t.mode})}}function t(){for(var e=0;e<n.length;e++){var i=n[e];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}r.removeEventListener("change",t)}var n,r=this.textTracks();e(),r.addEventListener("change",e),this.on("dispose",function(){return r.removeEventListener("change",e)}),this.on("webkitbeginfullscreen",function(){r.removeEventListener("change",e),r.removeEventListener("change",t),r.addEventListener("change",t)}),this.on("webkitendfullscreen",function(){r.removeEventListener("change",e),r.addEventListener("change",e),r.removeEventListener("change",t)})},n.overrideNative_=function(e,t){var n,r=this;t===this["featuresNative"+e+"Tracks"]&&(this[(n=e.toLowerCase())+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){r.el()[n+"Tracks"].removeEventListener(e,r[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n))},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t,n,r=this,i=Zn[e],o=this.el()[i.getterName],a=this[i.getterName]();this["featuresNative"+i.capitalName+"Tracks"]&&o&&o.addEventListener&&(n=function(){for(var e=[],t=0;t<a.length;t++){for(var n=!1,r=0;r<o.length;r++)if(o[r]===a[t]){n=!0;break}n||e.push(a[t])}for(;e.length;)a.removeTrack(e.shift())},this[i.getterName+"Listeners_"]=t={change:function(t){var n={type:"change",target:a,currentTarget:a,srcElement:a};a.trigger(n),"text"===e&&r[er.remoteText.getterName]().trigger(n)},addtrack:function(e){a.addTrack(e.track)},removetrack:function(e){a.removeTrack(e.track)}},Object.keys(t).forEach(function(e){var n=t[e];o.addEventListener(e,n),r.on("dispose",function(t){return o.removeEventListener(e,n)})}),this.on("loadstart",n),this.on("dispose",function(e){return r.off("loadstart",n)}))},n.proxyNativeTracks_=function(){var e=this;Zn.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},n.createEl=function(){for(var e,n=this.options_.tag,r=(n&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(n?(e=n.cloneNode(!0),n.parentNode&&n.parentNode.insertBefore(e,n),t.disposeMediaElement(n),n=e):(n=document.createElement("video"),e=o({},this.options_.tag&&b(this.options_.tag)),Kt&&!0===this.options_.nativeControlsForTouch||delete e.controls,m(n,rn(e,{id:this.options_.techId,class:"vjs-tech"}))),n.playerId=this.options_.playerId),void 0!==this.options_.preload&&S(n,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(n.disablePictureInPicture=this.options_.disablePictureInPicture),["loop","muted","playsinline","autoplay"]),i=0;i<r.length;i++){var a=r[i],s=this.options_[a];void 0!==s&&(s?S(n,a,a):_(n,a),n[a]=s)}return n},n.handleLateInit_=function(e){var t,n,r,i;void 0!==e.networkState&&0!==e.networkState&&3!==e.networkState&&(0===e.readyState?(t=!1,this.on("loadstart",n=function(){t=!0}),this.on("loadedmetadata",r=function(){t||this.trigger("loadstart")}),this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),t||this.trigger("loadstart")})):((i=["loadstart"]).push("loadedmetadata"),2<=e.readyState&&i.push("loadeddata"),3<=e.readyState&&i.push("canplay"),4<=e.readyState&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(e){this.trigger(e)},this)})))},n.setScrubbing=function(e){this.isScrubbing_=e},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&zt?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){_t(e,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;return this.el_.duration===1/0&&Ct&&Mt&&0===this.el_.currentTime?(this.on("timeupdate",function t(){0<e.el_.currentTime&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN):this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e,t,n=this;"webkitDisplayingFullscreen"in this.el_&&(e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},this.on("webkitbeginfullscreen",t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))}),this.on("dispose",function(){n.off("webkitbeginfullscreen",t),n.off("webkitendfullscreen",e)}))},n.supportsFullScreen=function(){return"function"==typeof this.el_.webkitEnterFullScreen},n.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)de(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):e.prototype.requestVideoFrameCallback.call(this,t)},n.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):e.prototype.cancelVideoFrameCallback.call(this,t)},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){t.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):e.prototype.addTextTrack.call(this,t,n,r)},n.createRemoteTextTrack=function(t){var n;return this.featuresNativeTextTracks?(n=document.createElement("track"),t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n):e.prototype.createRemoteTextTrack.call(this,t)},n.addRemoteTextTrack=function(t,n){return t=e.prototype.addRemoteTextTrack.call(this,t,n),this.featuresNativeTextTracks&&this.el().appendChild(t),t},n.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),r=n.length;r--;)t!==n[r]&&t!==n[r].track||this.el().removeChild(n[r])},n.getVideoPlaybackQuality=function(){var e;return"function"==typeof this.el().getVideoPlaybackQuality?this.el().getVideoPlaybackQuality():(e={},void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),window.performance&&(e.creationTime=window.performance.now()),e)},t}(yr),Dr=(a(Rr,"TEST_VID",function(){var e,t;if(u())return e=document.createElement("video"),(t=document.createElement("track")).kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}),Rr.isSupported=function(){try{Rr.TEST_VID.volume=.5}catch(e){return!1}return!(!Rr.TEST_VID||!Rr.TEST_VID.canPlayType)},Rr.canPlayType=function(e){return Rr.TEST_VID.canPlayType(e)},Rr.canPlaySource=function(e,t){return Rr.canPlayType(e.type)},Rr.canControlVolume=function(){try{var e=Rr.TEST_VID.volume,t=(Rr.TEST_VID.volume=e/2+.1,e!==Rr.TEST_VID.volume);return t&&Gt?(window.setTimeout(function(){Rr&&Rr.prototype&&(Rr.prototype.featuresVolumeControl=e!==Rr.TEST_VID.volume)}),!1):t}catch(e){return!1}},Rr.canMuteVolume=function(){try{var e=Rr.TEST_VID.muted;return Rr.TEST_VID.muted=!e,Rr.TEST_VID.muted?S(Rr.TEST_VID,"muted","muted"):_(Rr.TEST_VID,"muted"),e!==Rr.TEST_VID.muted}catch(e){return!1}},Rr.canControlPlaybackRate=function(){if(Ct&&Mt&&Rt<58)return!1;try{var e=Rr.TEST_VID.playbackRate;return Rr.TEST_VID.playbackRate=e/2+.1,e!==Rr.TEST_VID.playbackRate}catch(e){return!1}},Rr.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(document.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(document.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(document.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(document.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Rr.supportsNativeTextTracks=function(){return zt&&!Ht||Gt&&Mt},Rr.supportsNativeVideoTracks=function(){return!(!Rr.TEST_VID||!Rr.TEST_VID.videoTracks)},Rr.supportsNativeAudioTracks=function(){return!(!Rr.TEST_VID||!Rr.TEST_VID.audioTracks)},Rr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[0],n=e[1];a(Rr.prototype,t,function(){return Rr[n]()},!0)}),Rr.prototype.featuresVolumeControl=Rr.canControlVolume(),Rr.prototype.movingMediaElementInDOM=!Gt,Rr.prototype.featuresFullscreenResize=!0,Rr.prototype.featuresProgressEvents=!0,Rr.prototype.featuresTimeupdateEvents=!0,Rr.prototype.featuresVideoFrameCallback=!(!Rr.TEST_VID||!Rr.TEST_VID.requestVideoFrameCallback),Rr.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);if(e.removeAttribute("src"),"function"==typeof e.load)try{e.load()}catch(e){}}},Rr.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);if(e.removeAttribute("src"),"function"==typeof e.load)try{e.load()}catch(e){}}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){Rr.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){Rr.prototype["set"+ee(e)]=function(t){(this.el_[e]=t)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){Rr.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(e){Rr.prototype["set"+ee(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){Rr.prototype[e]=function(){return this.el_[e]()}}),yr.withSourceHandlers(Rr),Rr.nativeSourceHandler={},Rr.nativeSourceHandler.canPlayType=function(e){try{return Rr.TEST_VID.canPlayType(e)}catch(e){return""}},Rr.nativeSourceHandler.canHandleSource=function(e,t){return e.type?Rr.nativeSourceHandler.canPlayType(e.type):e.src?(e=Un(e.src),Rr.nativeSourceHandler.canPlayType("video/"+e)):""},Rr.nativeSourceHandler.handleSource=function(e,t,n){e.startTime&&(t.el_.currentTime=e.startTime===1/0?864e3:e.startTime),t.setSrc(e.src)},Rr.nativeSourceHandler.dispose=function(){},Rr.registerSourceHandler(Rr.nativeSourceHandler),yr.registerTech("Html5",Rr),["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"]),Lr={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Nr=["tiny","xsmall","small","medium","large","xlarge","huge"],Ur={},Br=(Nr.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Ur[e]="vjs-layout-"+t}),{tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0}),Fr=function(e){function t(n,r,i){var a,s;if(n.id=n.id||r.id||"vjs_video_"+an++,(r=rn(t.getTagSettings(n),r)).initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,r.language||(u=n.closest("[lang]"))&&(r.language=u.getAttribute("lang")),(a=e.call(this,null,r,i)||this).boundDocumentFullscreenChange_=function(e){return a.documentFullscreenChange_(e)},a.boundFullWindowOnEscKey_=function(e){return a.fullWindowOnEscKey(e)},a.boundUpdateStyleEl_=function(e){return a.updateStyleEl_(e)},a.boundApplyInitTime_=function(e){return a.applyInitTime_(e)},a.boundUpdateCurrentBreakpoint_=function(e){return a.updateCurrentBreakpoint_(e)},a.boundHandleTechClick_=function(e){return a.handleTechClick_(e)},a.boundHandleTechDoubleClick_=function(e){return a.handleTechDoubleClick_(e)},a.boundHandleTechTouchStart_=function(e){return a.handleTechTouchStart_(e)},a.boundHandleTechTouchMove_=function(e){return a.handleTechTouchMove_(e)},a.boundHandleTechTouchEnd_=function(e){return a.handleTechTouchEnd_(e)},a.boundHandleTechTap_=function(e){return a.handleTechTap_(e)},a.boundUpdatePlayerHeightOnAudioOnlyMode_=function(e){return a.updatePlayerHeightOnAudioOnlyMode_(e)},a.isFullscreen_=!1,a.log=Tt(a.id_),a.fsApi_=ht,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");a.tag=n,a.tagAttributes=n&&b(n),a.language(a.options_.language),r.languages?(s={},Object.getOwnPropertyNames(r.languages).forEach(function(e){s[e.toLowerCase()]=r.languages[e]}),a.languages_=s):a.languages_=t.prototype.options_.languages,a.resetCache_(),a.poster_=r.poster||"",a.controls_=!!r.controls,n.controls=!1,n.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],n.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach(function(e){if("function"!=typeof a[e])throw new Error('plugin "'+e+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),$(a,{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(H(document,a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var u=o(a.options_),i=(r.plugins&&Object.keys(r.plugins).forEach(function(e){a[e](r.plugins[e])}),r.debug&&a.debug(!0),a.options_.playerOptions=u,a.middleware_=[],a.playbackRates(r.playbackRates),r.experimentalSvgIcons&&((i=(new window.DOMParser).parseFromString(icons,"image/svg+xml")).querySelector("parsererror")?(_t.warn("Failed to load SVG Icons. Falling back to Font Icons."),a.options_.experimentalSvgIcons=null):((u=i.documentElement).style.display="none",a.el_.appendChild(u),a.addClass("vjs-svg-icons-enabled"))),a.initChildren(),a.isAudio("audio"===n.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),r.spatialNavigation&&r.spatialNavigation.enabled&&(a.spatialNavigation=new Ar(a),a.addClass("vjs-spatial-navigation-enabled")),Kt&&a.addClass("vjs-touch-enabled"),Gt||a.addClass("vjs-workinghover"),t.players[a.id_]=a,ct.split(".")[0]);return a.addClass("vjs-v"+i),a.userActive(!0),a.reportUserActivity(),a.one("play",function(e){return a.listenForUserActivity_(e)}),a.on("keydown",function(e){return a.handleKeyDown(e)}),a.on("languagechange",function(e){return a.handleLanguagechange(e)}),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)}),a}bn(t,e);var n=t.prototype;return n.dispose=function(){var n,r=this;this.trigger("dispose"),this.off("dispose"),V(document,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),V(document,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),n=this,mr.hasOwnProperty(n.id())&&delete mr[n.id()],tr.names.forEach(function(e){e=tr[e],e=r[e.getterName](),e&&e.off&&e.off()}),e.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},n.createEl=function(){var t,n=this.tag,r=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),i="video-js"===this.tag.tagName.toLowerCase(),o=(r?t=this.el_=n.parentNode:i||(t=this.el_=e.prototype.createEl.call(this,"div")),b(n));if(i){for(t=this.el_=n,n=this.tag=document.createElement("video");t.children.length;)n.appendChild(t.firstChild);p(t,"video-js")||g(t,"video-js"),t.appendChild(n),r=this.playerElIngest_=t,Object.keys(t).forEach(function(e){try{n[e]=t[e]}catch(e){}})}n.setAttribute("tabindex","-1"),o.tabindex="-1",Mt&&Ut&&(n.setAttribute("role","application"),o.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in o&&delete o.width,"height"in o&&delete o.height,Object.getOwnPropertyNames(o).forEach(function(e){i&&"class"===e||t.setAttribute(e,o[e]),i&&n.setAttribute(e,o[e])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",(n.player=t.player=this).addClass("vjs-paused");for(var a,s=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(function(e){return Xt[e]}).map(function(e){return"vjs-device-"+e.substring(3).toLowerCase().replace(/\_/g,"-")}),u=(this.addClass.apply(this,s),!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=R("vjs-styles-dimensions"),s=Yt(".vjs-styles-defaults"),(a=Yt("head")).insertBefore(this.styleEl_,s?s.nextSibling:a.firstChild)),this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin),n.getElementsByTagName("a")),c=0;c<u.length;c++){var l=u.item(c);g(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!r&&n.parentNode.insertBefore(t,n),h(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t},n.crossOrigin=function(e){if(void 0===e)return this.techGet_("crossOrigin");null!==e&&"anonymous"!==e&&"use-credentials"!==e?_t.warn('crossOrigin must be null,  "anonymous" or "use-credentials", given "'+e+'"'):(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e))},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var n,r=e+"_";if(void 0===t)return this[r]||0;""===t||"auto"===t?(this[r]=void 0,this.updateStyleEl_()):(n=parseFloat(t),isNaN(n)?_t.error('Improper value "'+t+'" supplied for for '+e):(this[r]=n,this.updateStyleEl_()))},n.fluid=function(e){var t,n=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,hn(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),e=function(){n.on(["playerreset","resize"],n.boundUpdateStyleEl_)},hn(t=this)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){var e,t,n,r;!0===window.VIDEOJS_NO_DYNAMIC_STYLE?(n="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,(e=this.tech_&&this.tech_.el())&&(0<=n&&(e.width=n),0<=t)&&(e.height=t)):(e=(n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/n[0],t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/e:this.videoWidth()||300,n=void 0!==this.height_?this.height_:t*e,r=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(r),D(this.styleEl_,"\n      ."+r+" {\n        width: "+t+"px;\n        height: "+n+"px;\n      }\n\n      ."+r+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*e+"%;\n      }\n    "))},n.loadTech_=function(e,t){var n=this,r=(this.tech_&&this.unloadTech_(),ee(e)),i=e.charAt(0).toLowerCase()+e.slice(1),o=(this.tag&&(yr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1,this.autoplay()),a={source:t,autoplay:o=!("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&o,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset},o=(tr.names.forEach(function(e){e=tr[e],a[e.getterName]=n[e.privateName]}),rn(a,this.options_[r]),rn(a,this.options_[i]),rn(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(a.startTime=this.cache_.currentTime),yr.getTech(e));if(!o)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new o(a),this.tech_.ready(cn(this,this.handleTechReady_),!0),kn(this.textTracksJson_||[],this.tech_),Dr.forEach(function(e){n.on(n.tech_,e,function(t){return n["handleTech"+ee(e)+"_"](t)})}),Object.keys(Lr).forEach(function(e){n.on(n.tech_,e,function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Lr[e]+"_"].bind(n),event:t}):n["handleTech"+Lr[e]+"_"](t)})}),this.on(this.tech_,"loadstart",function(e){return n.handleTechLoadStart_(e)}),this.on(this.tech_,"sourceset",function(e){return n.handleTechSourceset_(e)}),this.on(this.tech_,"waiting",function(e){return n.handleTechWaiting_(e)}),this.on(this.tech_,"ended",function(e){return n.handleTechEnded_(e)}),this.on(this.tech_,"seeking",function(e){return n.handleTechSeeking_(e)}),this.on(this.tech_,"play",function(e){return n.handleTechPlay_(e)}),this.on(this.tech_,"pause",function(e){return n.handleTechPause_(e)}),this.on(this.tech_,"durationchange",function(e){return n.handleTechDurationChange_(e)}),this.on(this.tech_,"fullscreenchange",function(e,t){return n.handleTechFullscreenChange_(e,t)}),this.on(this.tech_,"fullscreenerror",function(e,t){return n.handleTechFullscreenError_(e,t)}),this.on(this.tech_,"enterpictureinpicture",function(e){return n.handleTechEnterPictureInPicture_(e)}),this.on(this.tech_,"leavepictureinpicture",function(e){return n.handleTechLeavePictureInPicture_(e)}),this.on(this.tech_,"error",function(e){return n.handleTechError_(e)}),this.on(this.tech_,"posterchange",function(e){return n.handleTechPosterChange_(e)}),this.on(this.tech_,"textdata",function(e){return n.handleTechTextData_(e)}),this.on(this.tech_,"ratechange",function(e){return n.handleTechRateChange_(e)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||h(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e=this;tr.names.forEach(function(t){t=tr[t],e[t.privateName]=e[t.getterName]()}),this.textTracksJson_=Tn(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&_t.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.version=function(){return{"video.js":ct}},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()&&this.hasStarted(!1),this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,r=function(){function e(){t.muted(n)}var n=t.muted(),r=(t.muted(!0),t.playTerminatedQueue_.push(e),t.play());if(fe(r))return r.catch(function(t){throw e(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(t||""))})};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():r():fe(n=this.play())&&(n=n.catch(r)),fe(n))return n.then(function(){t.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){t.trigger({type:"autoplay-failure",autoplay:e})})}},n.updateSourceCaches_=function(e){for(var t=e=void 0===e?"":e,n="",e=("string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(e){return e.src===t});if(n.length)return n[0].type;for(var r=e.$$("source"),i=0;i<r.length;i++){var o=r[i];if(o.type&&o.src&&o.src===t)return o.type}return kr(t)}(this,t)),this.cache_.source=o({},e,{src:t,type:n}),this.cache_.sources.filter(function(e){return e.src&&e.src===t})),r=[],i=this.$$("source"),a=[],s=0;s<i.length;s++){var u=b(i[s]);r.push(u),u.src&&u.src===t&&a.push(u.src)}a.length&&!e.length?this.cache_.sources=r:e.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t,n,r,i=this;this.changingSrc_||(t=function(e){return i.updateSourceCaches_(e)},n=this.currentSource().src,r=e.src,(t=!n||/^blob:/.test(n)||!/^blob:/.test(r)||this.lastSource_&&(this.lastSource_.tech===r||this.lastSource_.player===n)?t:function(){})(r),e.src)||this.tech_.any(["sourceset","loadstart"],function(e){"sourceset"!==e.type&&(e=i.techGet_("currentSrc"),i.lastSource_.tech=e,i.updateSourceCaches_(e))}),this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this,t=(this.addClass("vjs-waiting"),this.trigger("waiting"),this.currentTime());this.on("timeupdate",function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))})},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){!this.controls_||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?de(this.play()):this.pause())},n.handleTechDoubleClick_=function(e){!this.controls_||Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t,e=e.target.player;e&&e!==this||(e=this.el(),!(t=document[this.fsApi_.fullscreenElement]===e)&&e.matches&&(t=e.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(t))},n.handleTechFullscreenChange_=function(e,t){var n=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){n.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))},n.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();e&&this.error(e)},n.handleTechTextData_=function(){var e=1<arguments.length?arguments[1]:null;this.trigger("textdata",e)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(e,t){this.ready(function(){if(e in Sr)return n=this.middleware_,this.tech_[e](n.reduce(Ve(e),t));if(e in _r)return He(this.middleware_,this.tech_,e,t);var n;try{this.tech_&&this.tech_[e](t)}catch(n){throw _t(n),n}},!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in wr)return t=this.middleware_,n=this.tech_,t.reduceRight(Ve(e),n[e]());if(e in _r)return He(this.middleware_,this.tech_,e);var t,n;try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?_t("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t):"TypeError"===t.name?(_t("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1):_t(t),t}}},n.play=function(){var e=this;return new Promise(function(t){e.play_(t)})},n.play_=function(e){var t,n=this,e=(this.playCallbacks_.push(e=void 0===e?de:e),Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()))),r=Boolean(zt||Gt);this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),this.isReady_&&e?(t=this.techGet_("play"),r&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===t?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(t)):(this.waitToPlay_=function(e){n.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!e&&r&&this.load())},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||ie(0,0)},n.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){if(void 0===e)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_))},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=(e=parseFloat(e))<0?1/0:e)!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e;return e=(e=this.techGet_("buffered"))&&e.length?e:ie(0,0)},n.seekable=function(){var e;return e=(e=this.techGet_("seekable"))&&e.length?e:ie(0,0)},n.seeking=function(){return this.techGet_("seeking")},n.ended=function(){return this.techGet_("ended")},n.networkState=function(){return this.techGet_("networkState")},n.readyState=function(){return this.techGet_("readyState")},n.bufferedPercent=function(){return ce(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),e=e.end(e.length-1);return e=t<e?t:e},n.volume=function(e){var t;if(void 0===e)return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t;t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),0<t&&this.lastVolume_(t)},n.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.defaultMuted=function(e){return void 0!==e&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){var t;if(void 0===e)return this.isFullscreen_;t=this.isFullscreen_,this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_()},n.requestFullscreen=function(e){this.isInPictureInPicture()&&this.exitPictureInPicture();var t=this;return new Promise(function(n,r){function i(){t.off("fullscreenerror",a),t.off("fullscreenchange",o)}function o(){i(),n()}function a(e,t){i(),r(t)}t.one("fullscreenchange",o),t.one("fullscreenerror",a);var s=t.requestFullscreenHelper_(e);s&&(s.then(i,i),s.then(n,r))})},n.requestFullscreenHelper_=function(e){var t,n=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen)return(e=this.el_[this.fsApi_.requestFullscreen](t))&&e.then(function(){return n.isFullscreen(!0)},function(){return n.isFullscreen(!1)}),e;this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var e=this;return new Promise(function(t,n){function r(){e.off("fullscreenerror",o),e.off("fullscreenchange",i)}function i(){r(),t()}function o(e,t){r(),n(t)}e.one("fullscreenchange",i),e.one("fullscreenerror",o);var a=e.exitFullscreenHelper_();a&&(a.then(r,r),a.then(t,n))})},n.exitFullscreenHelper_=function(){var e,t=this;if(this.fsApi_.requestFullscreen)return(e=document[this.fsApi_.exitFullscreen]())&&de(e.then(function(){return t.isFullscreen(!1)})),e;this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,H(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow="hidden",g(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){"Escape"===e.key&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,V(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow=this.docOrigOverflow,y(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(e){if(void 0===e)return!!this.isInPictureInPicture_;this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_()},n.requestPictureInPicture=function(){var e,t=this;return this.options_.enableDocumentPictureInPicture&&window.documentPictureInPicture?((e=document.createElement(this.el().tagName)).classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(f("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),window.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(function(n){return I(n),t.el_.parentNode.insertBefore(e,t.el_),n.document.body.appendChild(t.el_),n.document.body.classList.add("vjs-pip-window"),t.player_.isInPictureInPicture(!0),t.player_.trigger({type:"enterpictureinpicture",pipWindow:n}),n.addEventListener("pagehide",function(n){n=n.target.querySelector(".video-js"),e.parentNode.replaceChild(n,e),t.player_.isInPictureInPicture(!1),t.player_.trigger("leavepictureinpicture")}),n})):"pictureInPictureEnabled"in document&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")},n.exitPictureInPicture=function(){return window.documentPictureInPicture&&window.documentPictureInPicture.window?(window.documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in document?document.exitPictureInPicture():void 0},n.handleKeyDown=function(e){var t,n,r=this.options_.userActions;r&&r.hotkeys&&(t=this.el_.ownerDocument.activeElement,n=t.tagName.toLowerCase(),t.isContentEditable||("input"===n?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(n))||("function"==typeof r.hotkeys?r.hotkeys.call(this,e):this.handleHotkeys(e)))},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,n=void 0===n?function(t){return"f"===e.key.toLowerCase()}:n,r=t.muteKey,r=void 0===r?function(t){return"m"===e.key.toLowerCase()}:r,t=t.playPauseKey,t=void 0===t?function(t){return"k"===e.key.toLowerCase()||" "===e.key.toLowerCase()}:t;n.call(this,e)?(e.preventDefault(),e.stopPropagation(),n=vn.getComponent("FullscreenToggle"),!1!==document[this.fsApi_.fullscreenEnabled]&&n.prototype.handleClick.call(this,e)):r.call(this,e)?(e.preventDefault(),e.stopPropagation(),vn.getComponent("MuteToggle").prototype.handleClick.call(this,e)):t.call(this,e)&&(e.preventDefault(),e.stopPropagation(),vn.getComponent("PlayToggle").prototype.handleClick.call(this,e))},n.canPlayType=function(e){for(var t=0,n=this.options_.techOrder;t<n.length;t++){var r=n[t],i=yr.getTech(r);if(i=i||vn.getComponent(r)){if(i.isSupported()&&(i=i.canPlayType(e)))return i}else _t.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){function t(e,t,n){var r;return e.some(function(e){return t.some(function(t){if(r=n(e,t))return!0})}),r}function n(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}}var r,i=this,o=this.options_.techOrder.map(function(e){return[e,yr.getTech(e)]}).filter(function(e){var t=e[0],e=e[1];return e?e.isSupported():(_t.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=this.options_.sourceOrder?t(e,o,(r=n,function(e,t){return r(t,e)})):t(o,e,n);return o||!1},n.handleSrc_=function(e,t){var n=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var r,i,o=Ke(e);o.length?(this.changingSrc_=!0,t||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),Fe(this,o[0],function(e,r){var i;if(n.middleware_=r,t||(n.cache_.sources=o),n.updateSourceCaches_(e),n.src_(e))return 1<o.length?n.handleSrc_(o.slice(1)):(n.changingSrc_=!1,n.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void n.triggerReady());i=n.tech_,r.forEach(function(e){return e.setTech&&e.setTech(i)})}),1<o.length&&(r=function(){n.error(null),n.handleSrc_(o.slice(1),!0)},i=function(){n.off("error",r)},this.one("error",r),this.one("playing",i),this.resetRetryOnError_=function(){n.off("error",r),n.off("playing",i)})):this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},n.src=function(e){return this.handleSrc_(e,!1)},n.src_=function(e){var t=this,n=this.selectSource([e]);return!n||(te(n.tech,this.techName_)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(function(){t.changingSrc_=!1})),!1)},n.load=function(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")},n.reset=function(){var e=this;this.paused()?this.doReset_():de(this.play().then(function(){return e.doReset_()}))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),hn(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){if(void 0===e)return this.techGet_("preload");this.techCall_("setPreload",e),this.options_.preload=e},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")},n.loop=function(e){if(void 0===e)return this.techGet_("loop");this.techCall_("setLoop",e),this.options_.loop=e},n.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){var e;(!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster&&(e=this.tech_.poster()||"")!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))},n.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){var t,n=this;if(void 0===e)return this.error_||null;ft("beforeerror").forEach(function(t){t=t(n,e),r(t)&&!Array.isArray(t)||"string"==typeof t||"number"==typeof t||null===t?e=t:n.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code?(this.options_.suppressNotSupportedError=!(t=function(){this.error(e)}),this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)})):null===e?(this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new le(e),this.addClass("vjs-error"),_t.error("(CODE:"+this.error_.code+" "+le.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),ft("error").forEach(function(e){return e(n,n.error_)}))},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;(e=!!e)!==this.userActive_&&(this.userActive_=e,this.userActive_?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")))},n.listenForUserActivity_=function(){function e(e){o(),this.clearInterval(t)}var t,n,r,i,o=cn(this,this.reportUserActivity),a=(this.on("mousedown",function(){o(),this.clearInterval(t),t=this.setInterval(o,250)}),this.on("mousemove",function(e){e.screenX===n&&e.screenY===r||(n=e.screenX,r=e.screenY,o())}),this.on("mouseup",e),this.on("mouseleave",e),this.getChild("controlBar"));!a||Gt||Ct||(a.on("mouseenter",function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),a.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o),this.setInterval(function(){var e;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(i),(e=this.options_.inactivityTimeout)<=0||(i=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e)))},250)},n.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.updatePlayerHeightOnAudioOnlyMode_=function(){var e=this.getChild("ControlBar");e&&this.audioOnlyCache_.controlBarHeight!==e.currentHeight()&&(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))},n.enableAudioOnlyUI_=function(){var e=this,t=(this.addClass("vjs-audio-only-mode"),this.children()),n=this.getChild("ControlBar"),r=n&&n.currentHeight();t.forEach(function(t){t!==n&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=r,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(r),this.trigger("audioonlymodechange")},n.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(function(e){return e.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},n.audioOnlyMode=function(e){var t=this;return"boolean"!=typeof e||e===this.audioOnlyMode_?this.audioOnlyMode_:(this.audioOnlyMode_=e)?(e=[],this.isInPictureInPicture()&&e.push(this.exitPictureInPicture()),this.isFullscreen()&&e.push(this.exitFullscreen()),this.audioPosterMode()&&e.push(this.audioPosterMode(!1)),Promise.all(e).then(function(){return t.enableAudioOnlyUI_()})):Promise.resolve().then(function(){return t.disableAudioOnlyUI_()})},n.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.audioPosterMode=function(e){var t=this;return"boolean"!=typeof e||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e)?(this.audioOnlyMode()?this.audioOnlyMode(!1):Promise.resolve()).then(function(){t.enablePosterModeUI_()}):Promise.resolve().then(function(){t.disablePosterModeUI_()})},n.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){var t=(t=(e=void 0===e?{}:e).track)||e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),hn(this))&&this.trigger("languagechange")},n.languages=function(){return o(t.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=o(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];(r=o(r)).player=void 0,e.tracks[n]=r}return e},n.createModal=function(e,t){var n=this,r=((t=t||{}).content=e||"",new An(this,t));return this.addChild(r),r.on("dispose",function(){n.removeChild(r)}),r.open(),r},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Nr.length;n++){var r=Nr[n];if(t<=this.breakpoints_[r]){if(e===r)return;e&&this.removeClass(Ur[e]),this.addClass(Ur[r]),this.breakpoint_=r;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0!==e&&(this.breakpoint_="",this.breakpoints_=rn({},Br,e),this.updateCurrentBreakpoint_()),rn(this.breakpoints_)},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return Ur[this.breakpoint_]||""},n.loadMedia=function(e,t){var n,r,i,a,s,u,c,l=this;e&&"object"==typeof e&&(n=this.crossOrigin(),this.reset(),this.cache_.media=o(e),r=(e=this.cache_.media).artist,i=e.description,a=e.poster,s=e.src,u=e.textTracks,c=e.title,!e.artwork&&a&&(this.cache_.media.artwork=[{src:a,type:kr(a)}]),n&&this.crossOrigin(n),s&&this.src(s),a&&this.poster(a),Array.isArray(u)&&u.forEach(function(e){return l.addRemoteTextTrack(e,!1)}),this.titleBar&&this.titleBar.update({title:c,description:i||r||""}),this.ready(t))},n.getMedia=function(){var e,t;return this.cache_.media?o(this.cache_.media):(e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})},e&&(t.poster=e,t.artwork=[{src:t.poster,type:kr(t.poster)}]),t)},t.getTagSettings=function(e){var t,n={sources:[],tracks:[]},r=b(e),i=r["data-setup"];if(p(e,"vjs-fill")&&(r.fill=!0),p(e,"vjs-fluid")&&(r.fluid=!0),null!==i&&(t=(i=_n(i||"{}"))[0],i=i[1],t&&_t.error(t),rn(r,i)),rn(n,r),e.hasChildNodes())for(var o=e.childNodes,a=0,s=o.length;a<s;a++){var u=o[a],c=u.nodeName.toLowerCase();"source"===c?n.sources.push(b(u)):"track"===c&&n.tracks.push(b(u))}return n},n.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(function(e){return"number"==typeof e})&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(vn),nr=(tr.names.forEach(function(e){var t=tr[e];Fr.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Fr.prototype.crossorigin=Fr.prototype.crossOrigin,Fr.players={},window.navigator),Hr=(Fr.prototype.options_={techOrder:yr.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","textTrackDisplay"],language:nr&&(nr.languages&&nr.languages[0]||nr.userLanguage||nr.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1},Dr.forEach(function(e){Fr.prototype["handleTech"+ee(e)+"_"]=function(){return this.trigger(e)}}),vn.registerComponent("Player",Fr),N(function(e){function t(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return e.exports=function(){return!!t},e.exports.__esModule=!0,(e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),Pn=(L(Hr),N(function(e){e.exports=function(e,t,n){var r;return Hr()?Reflect.construct.apply(null,arguments):((r=[null]).push.apply(r,t),t=new(e.bind.apply(e,r)),n&&mn(t,n.prototype),t)},e.exports.__esModule=!0,e.exports.default=e.exports})),Vr=L(Pn),Wr="plugin",Kr="activePlugins_",qr={},Gr=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),$(this),delete this.trigger,Q(this,this.constructor.defaultState),tt(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return(e=void 0===e?{}:e).name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return W(this.eventBusEl_,e,this.getEventHash(t=void 0===t?{}:t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Kr][e]=!1,this.player=this.state=null,t[e]=it(e,qr[e])},e.isBasic=function(t){return"function"==typeof(t="string"==typeof t?et(t):t)&&!e.prototype.isPrototypeOf(t.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(Ze(t))_t.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Fr.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return qr[t]=n,t!==Wr&&(e.isBasic(n)?Fr.prototype[t]=rt(t,n):Fr.prototype[t]=it(t,n)),n},e.deregisterPlugin=function(e){if(e===Wr)throw new Error("Cannot de-register base plugin.");Ze(e)&&(delete qr[e],delete Fr.prototype[e])},e.getPlugins=function(e){var t;return(e=void 0===e?Object.keys(qr):e).forEach(function(e){var n=et(e);n&&((t=t||{})[e]=n)}),t},e.getPluginVersion=function(e){return(e=et(e))&&e.VERSION||""},e}();return Gr.getPlugin=et,Gr.BASE_PLUGIN_NAME=Wr,Gr.registerPlugin(Wr,Gr),Fr.prototype.usingPlugin=function(e){return!!this[Kr]&&!0===this[Kr][e]},Fr.prototype.hasPlugin=function(e){return!!Ze(e)},In=Object.freeze({__proto__:null,clamp:function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))}}),st.hooks_=lt,st.hooks=ft,st.hook=function(e,t){ft(e,t)},st.hookOnce=function(e,t){ft(e,[].concat(t).map(function(t){return function n(){return dt(e,n),t.apply(void 0,arguments)}}))},st.removeHook=dt,!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&u()&&!(jn=Yt(".vjs-styles-defaults"))&&(jn=R("vjs-styles-defaults"),(Nn=Yt("head"))&&Nn.insertBefore(jn,Nn.firstChild),D(jn,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")),M(1,st),st.VERSION=ct,st.options=Fr.prototype.options_,st.getPlayers=function(){return Fr.players},st.getPlayer=function(e){var t=Fr.players;if("string"==typeof e){var n=at(e),r=t[n];if(r)return r;r=Yt("#"+n)}else r=e;if(c(r)&&(n=r,e=n.player,r=n.playerId,e||t[r]))return e||t[r]},st.getAllPlayers=function(){return Object.keys(Fr.players).map(function(e){return Fr.players[e]}).filter(Boolean)},st.players=Fr.players,st.getComponent=vn.getComponent,st.registerComponent=function(e,t){return yr.isTech(t)&&_t.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),vn.registerComponent.call(vn,e,t)},st.getTech=yr.getTech,st.registerTech=yr.registerTech,st.use=function(e,t){vr[e]=vr[e]||[],vr[e].push(t)},Object.defineProperty(st,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(st.middleware,"TERMINATOR",{value:br,writeable:!1,enumerable:!0}),st.browser=Xt,st.obj=Et,st.mergeOptions=ot(9,"videojs.mergeOptions","videojs.obj.merge",o),st.defineLazyProperty=ot(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",a),st.bind=ot(9,"videojs.bind","native Function.prototype.bind",cn),st.registerPlugin=Gr.registerPlugin,st.deregisterPlugin=Gr.deregisterPlugin,st.plugin=function(e,t){return _t.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Gr.registerPlugin(e,t)},st.getPlugins=Gr.getPlugins,st.getPlugin=Gr.getPlugin,st.getPluginVersion=Gr.getPluginVersion,st.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),st.options.languages=o(st.options.languages,((n={})[e]=t,n)),st.options.languages[e]},st.log=_t,st.createLogger=Tt,st.time=Dt,st.createTimeRange=ot(9,"videojs.createTimeRange","videojs.time.createTimeRanges",ie),st.createTimeRanges=ot(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",ie),st.formatTime=ot(9,"videojs.formatTime","videojs.time.formatTime",ue),st.setFormatTime=ot(9,"videojs.setFormatTime","videojs.time.setFormatTime",ae),st.resetFormatTime=ot(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",se),st.parseUrl=ot(9,"videojs.parseUrl","videojs.url.parseUrl",ye),st.isCrossOrigin=ot(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Bn),st.EventTarget=fn,st.any=q,st.on=H,st.one=K,st.off=V,st.trigger=W,st.xhr=Xn,st.TextTrack=Qn,st.AudioTrack=qn,st.VideoTrack=Hn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){st[e]=function(){return _t.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),$t[e].apply(null,arguments)}}),st.computedStyle=ot(9,"videojs.computedStyle","videojs.dom.computedStyle",P),st.dom=$t,st.fn=ln,st.num=In,st.str=qt,st.url=Fn,st.Error={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"},st})}).call(t,n(18))},function(e,t){e.exports={name:"@nagra/videojs-otvtoolkit",version:"0.0.0",description:"OpenTV Player plugin",main:"dist/videojs-otvtoolkit.cjs.js",module:"dist/videojs-otvtoolkit.es.js","generator-videojs-plugin":{version:"5.0.4"},"otv-resolution-capper-plugin":{version:"0.0.0"},scripts:{prebuild:"npm run clean",build:"npm-run-all -p build:*","build:css":"npm-run-all build:css:scss","build:css:scss":"sass src/controlbar.scss dist/videojs-otvtoolkit.css","build:test":"node scripts/buildUnitTests.js","build:lint":"npm run lint",devbuild:"npm-run-all build:css lint",clean:"rimraf dist test/dist",postclean:"mkdirp dist test/dist",lint:"eslint src",pretest:"npm run build:test",test:"karma start test/karma.conf.js",debugUnittest:"karma start test/karma.conf.js --browsers Chrome --single-run=false",version:"node scripts/version.js",prepublish:"npm run build"},keywords:["videojs","videojs-plugin"],author:"Nagra",license:"UNLICENSED",vjsstandard:{ignore:["dist","docs","test/dist","test/karma.conf.js"]},dependencies:{ajv:"5.5.2",global:"4.4.0"},devDependencies:{"@nagra/video.js":"8.17.3-nmp-1","@nagra/videojs-shaka":"0.5.0-nmp-36","@babel/core":"7.4.5","@procot/webostv":"1.2.3","babel-eslint":"6.1.2","babel-loader":"8.2.4","babel-plugin-istanbul":"4.1.6","@babel/preset-env":"7.7.5",bannerize:"1.1.4","conventional-changelog-cli":"1.3.22","conventional-changelog-videojs":"3.0.0","coverage-istanbul-loader":"3.0.5",doctoc:"1.4.0",eslint:"4.19.0","fs-extra":"4.0.3",glob:"7.1.6","google-protobuf":"3.9.1",husky:"0.13.4",jssha:"2.4.2",karma:"3.1.4","karma-chrome-launcher":"2.2.0","karma-coverage":"1.1.2","karma-coverage-istanbul-reporter":"3.0.3","karma-detect-browsers":"2.3.3","karma-edge-launcher":"0.4.2","karma-firefox-launcher":"1.0.1","karma-junit-reporter":"1.2.0","karma-qunit":"2.0.1","karma-safari-launcher":"1.0.0",lodash:"4.17.11",mkdirp:"0.5.1","node-static":"0.7.11","npm-run-all":"4.1.5",qunit:"2.11.0",rimraf:"2.7.1",sass:"1.54.9",semver:"5.7.1",sinon:"2.4.1","uglify-js":"3.6.2",webpack:"3.12.0","xhr-promise":"2.0.0"},repository:{type:"git",url:"https://gitlab.hq.k.grp/rndopy/product/browser/opy-sdk-browser-shaka.git"}}},function(e,t,n){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAAA+CAYAAADu4GOJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVBNEYxM0I3MDVDRDExRTQ5MkUwOUNGNjM0MkM4QUZEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVBNEYxM0I4MDVDRDExRTQ5MkUwOUNGNjM0MkM4QUZEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUE0RjEzQjUwNUNEMTFFNDkyRTA5Q0Y2MzQyQzhBRkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUE0RjEzQjYwNUNEMTFFNDkyRTA5Q0Y2MzQyQzhBRkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4ISt+NAAAJwUlEQVR42uxdCWwWVRDeUpBTgQJyiwXECxAQvNECgtGInAoaSBCPxqKCR4wheKCiiIGAiajBIBrESkIiEImIgAciQTnkEBURDBFEEFtboVz+fuM/qy/bPebt8ffXvi/5sv2Xt7NvZ2fnzZt3kJNKpSwDAydyjGEYGMMwMIZhYAzDwBiGgTEMA2MYBsYwDIxhGBjDMKgWhmEspZragjEMg1CG0c3oqFpis69h5OTk/O81gGeui0Mf8AqwE5gHngAPgzvBz8FPoIuj1cUqKtmBi8cY43P9N1DWOg/BN7GC/fA1rl/vU7l+OLQVPstyyNqv+fBn4fAoOAo8PaB4KbgAnIb77HGR1RGHqyK+jxJwN7gF90gJn+EaHPKF8ldA7k9hDOPvEw76oQRs4SF4cyoYM30qVp/lSzFTwyBywYng0ZQ+6JqnwJoOmWNS8eFH8G6qZ8Bz1AZ/0ZD7ko7HUKlrGIRFCRnGXZrK/B08Q/DAZ4DLY3h5q8FmCRmGjXe5mfN6llGa8srBxmEMo0YI9zcUFw5NoJkr0ixPTcHYgIeth8MH4IAY6lcAroLMPCs5DAJf9fn3cZry6oN3hqlIjZAPMBsKahRj4HN5yN7QfbjW7xneBC+N8cV1BotxzyQj9NGQ38dFR6Sfy0LIG+dsBpM0jObg9Cr0FjbagwM9jI2C6GEJvLj+Ib5cXTwYg7ew0Q4cnCnDIIzlXkRUb0Ht9i0RREzw6I5OS/DFPQk2SFB+P/UrZ+98W5w6CkLNiA8wB5XujC7RkSgGBp4Wpe1HHbqiDlscMpsJrqWu82vgViud8T2PmzRJU/EnOCtEfanLPCSgDBn2meA+JYVQL4KOroSOekJHX2olNjR7JU5MD9srofgA3B1DND/XIfcLwTUTEo4V/HS+WlC/9lyWck3fxaCj+Ul3V504BfYKaRg3xtTNqwDPtJsmQfnJVZhhbALuEui0PpfvH5OOjoOtpIZRM4ZnpThlbsh45R5BmVOcrq7jU6Y2WAg+DfYIkEfZ0ucUhRSHjPbDoqWg6dwEt/+HRmBOzWAFN0FeqMWyJmUixlC7cbpfDrnK6wVFyQUeERhREWQ+j2OHgHJLoPQK5XcLjtyzCa+zjtp69bocWAj+DI4PKFcImVMkY0A1qvDhCwVBHn0JU8EX2HP4gV7wCEGQ9oOV3fiWA2JbR7kCHT3F6YMTAWWbSns3VWIYsFpqFu6QfAmwbhq4o4GmYkF5+mKCvoYGWWwUh6jHguc9Bh1Rc3OXUEc0OLmXvWssXdewhvF9RAVQ3qKJ8EuwMVUg92Lw/IAyVzt+kwv+0YNx4KSw3A7wKrzgHfx7GHdZdXQ0zQqeaNVZlH8K2Su5J2RkPJPvuU5QttilrksF120XlOkp0Mu1MfUGnhGW2089FuX+aySDbi71XiS4bmlS3dV8cGsYwwC7C8t2d6n85cLucxB2gs19jKItuDdAxp8aulopLLuQ7981go56Ca6jup/jZxhhm5JUhJSzJOe/GC51k/Mkzv09syqG5pEm2VASbIg6B4LS0CAFZ1+AbQJkrNLQ1Z2C2IdwM9+/KIKOqO4rA66loP9+3wIhJwPnc7p2l0CBKt7g+KJuQLmN4F6fl3phzAHfdn7ui8DGwpd9qzAgzqcZYNDzA/h7hqB8Cecc6kfQEaUCugRcT3mS1qhbqe0x4ogxzuZrH9ZsSspS/w/Mp2FwTV3lCmOrTOIhLzsI7TH4KzidrbZhFnb9Sjn3EffEmoOc0KP08iaprlj5dN0GK9qgYZygnlcH1O+U0w4i5TEgsMzyn3FUlSBjnSNI+uiAZI3Ac/8SUl/bcHg2i3REGd9BSSW4ZsWs/DjRjWOaihhkHQeH4+WujiiHDGNbFuloQiKGAUXtE2bcqgLXceKoX8SEFTWXBXjWJTHoiz6i2630fI5sQG80Iz2SSolPt7IX9+JlrMWxK/cKdLxHBT9bZ+4qxwKeMDMjm72GW/BZIBC0zjFCSYEVDV3XyULDOKIucuLE1khOOVMKvZ5LN24N+D64wCuegBwac+kZRld8Pd13QEAqvTxDOqJmcq2vYVSHJYrKy8nlPEwTfhHU4zgIHZy0qhkkSxTNavfqCbMNgkGwYbjN4OpjdGTg5jHsFWblalvLwZZtSGWULfNpr8j6GgbIOSaZYsbZ1VxHHFQSog2lYM8v41geFFtAxj9jGGHq4JBFYz4d2UN/67aiPiA2slfrl6or5Xk9bw1JHXkyUD2uQ2mloMNjrKRAKdOfZxkTlrBAvxs2cpPD//aRzmp1j9nnNMPpM7CvhjLnBYwbFAhkDLYLRzCINlx3J5api6YDZKjjNI2U84XK+akCOWOUXQz0ht15XeliKz3iRxM8KPt3vAq822+cpNrPHoc2PVkRYjXcCf46nMxUT+Qtrjv1gCgxuIjzJTQxel4Eg6PR3tn8cybe0aORuyleHgO8CCyVeoqEPcYE5VxL8Cs+v0HTY0RRfiSPwVsy2OionO+rnM/T9Ri8Psf26C9LF1KF9Rg0w+dDkNqsZVXoKSoHRumddB7jnz14mv1/AeqHdaUySYjGX7ozdbd3os7CQvbor4BF0t15/OBnGLQbC003pyCzMFuMQsFG5e98jeuG44XscXBZhgyaJgXZW1WR5zqMe1OG9RHSM/59c4h9v6hpoolPNGZ1fxxGEWQYtfhIVv1iFn59x5S/czWuo15FOwdbZbDeg61/F1GRN6aBPgoUt8BIFtN2Spry7Nlw9AyPx1VJP8NYr7hrmhtZlGWGoU4pPKBx3dtWevqeyt4ZbAYPgKOV+5KO7VXotMHdaE2RC6x/R7cnum26ErdhUFQ7hSJ//j0DN+0S4mt2fo15LmXCwN4U5VcrvXpLiuPUv3ewLBNGQTOzeaY8raw7gfuuAZ/B35coTUwnTbH3WukJ1rv5fdK0w6ZR6+q3djVF7RVAcwe2soUX8z4LRwO+Ctrpjl7WudTu0bJ/K72HJu0LYa9z3aJZ19a83VAOf2mP8Pk5fsk2F7TwyFns0UwyucnYxnGE3wdjry89QEbCSbULrPS+GQTdJZT0nmijOtqi8lP+EKkHNjBSvCFMcI1Qzr8qlDvSJ5m0g5cphk1w2Vjrt8udZoLrSZ3uqgcGC2S85ti+oVT5vVuyt5lPgmuycn68QI5nd9XNY3zMxxLFA7zDq7d6kRfgXXS2BXgN8i5l3CRdysHsAU6STXKbo+CBL9W6MGhZIa3rmKfRW/pGeTY3SLzFoQAZhwQyCtkDj2FPQQEobdL6HviEMNVertRDTczRNhCUH2kN3gD903ySgz5yfmY5leZ9mP+WwsD9wzaGYWAMw8AYhoExDIME8JcAAwBHloxfTog8lAAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function r(e){var t=!1;return e&&(t="html5"===e.toLowerCase()),t}function i(e,t,n,i){var o="none";if(e&&e.system&&(o=e.system),o.includes("nagra-ssp")&&e.config.ssmServer){return new(_[o]||w.a)(e,t,n)}if(g.a.isSafari()&&("customer"!==o&&"customer-ssm"!==o&&"nagra-ssp"!==o&&"nagra-conax"!==o&&"nagra-conax-upfront"!==o||(o="".concat(o,"-fps"))),g.a.isNagraCONNECTCapable());else if(g.a.isTVKeyCapable()){var a=r(i);!a||"customer"!==o&&"nagra-ssp"!==o||(o="".concat(o,"-tvkey"))}return new(S[o]||w.a)(e,t,n)}var o=n(347),a=n(350),s=n(141),u=n(353),c=n(354),l=n(355),f=n(356),d=n(359),h=n(145),p=n(146),g=n(30),y=n(362),v=n(363),m=n(364),b=n(368),w=n(49),S={};S["nagra-conax"]=u.a,S["nagra-conax-fps"]=o.a,S["nagra-conax-upfront"]=c.a,S["nagra-conax-upfront-fps"]=l.a,S["nagra-ssp"]=a.a,S["nagra-ssp-fps"]=s.a,S["nagra-ssp-tvkey"]=m.a,S["nagra-ssp-nagraconnect"]=m.a,S["microsoft-azure"]=w.a,S.customer=h.a,S["customer-fps"]=p.a,S["customer-tvkey"]=b.a,S["customer-nagraconnect"]=b.a,S["customer-ssm"]=y.a,S["customer-ssm-fps"]=v.a;var _={};_["nagra-ssp"]=f.a,_["nagra-ssp-fps"]=d.a,t.a={createDRMController:i}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=h(t),l(e,d()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return m});var y=n(137),v=n(42),m=function(e){function t(e,n){var r;return i(this,t),r=c(this,t),r.conaxFairPlay=new y.a(e.system,e.config,n),r.conaxFairPlay.initialise(),r}return p(t,e),a(t,[{key:"ready",value:function(e){this.conaxFairPlay.setVideoElement(e)}},{key:"tearDown",value:function(){this.conaxFairPlay.tearDown()}}])}(v.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=f(e,"string");return"symbol"==r(t)?t:t+""}function f(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t,n){return t=y(t),h(e,g()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function h(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){var r=0,i=new ArrayBuffer(e.byteLength+_+t.byteLength+_+n.byteLength),o=new DataView(i);new Uint8Array(i,r,e.byteLength).set(e),r+=e.byteLength,o.setUint32(r,t.byteLength,!0),r+=_;var a=new Uint16Array(i,r,t.length);return a.set(t),r+=a.byteLength,o.setUint32(r,n.byteLength,!0),r+=_,new Uint8Array(i,r,n.byteLength).set(n),new Uint8Array(i,0,i.byteLength)}n.d(t,"a",function(){return T});var w=n(41),S=n(102),_=4,T=function(e){function t(e){var n;return s(this,t),n=d(this,t,[e]),n.keySystem="com.apple.fps.1_0",n.firstKey=!1,n.sessions=[],n}return v(t,e),c(t,[{key:"tearDown",value:function(){if(this.sessions.length){var e,t=i(this.sessions);try{for(t.s();!(e=t.n()).done;){e.value.close()}}catch(e){t.e(e)}finally{t.f()}this.sessions=[],this.videoElement.webkitSetMediaKeys(null)}}},{key:"_setEncryptedListener",value:function(e,t){e.addEventListener("webkitneedkey",t,!1)}},{key:"_removeEncryptedListener",value:function(e,t){e.removeEventListener("webkitneedkey",t,!1)}},{key:"_onVideoEncrypted",value:function(e){var t=this;this.logger.message("Function: onneedkey for ").addType().log();var n=e.initData;this._setWebkitKeys(),this.certificateRequester.getCertificate().then(function(e){var r=t._createFairPlayInitData(n,e),i=t._createKeySession(r);t.sessions.push(i),t._configureSessionListeners(i)})}},{key:"_supportKeySystem",value:function(){var e=window.WebKitMediaKeys&&window.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4");return e||this.logger.addType().message(" FairPlay Key System not supported by browser.").log(),e}},{key:"_setWebkitKeys",value:function(){if(this.videoElement.webkitKeys||this.videoElement.webkitSetMediaKeys(new WebKitMediaKeys(this.keySystem)),this.logger.message("Key system selected").log(),!this.videoElement.webkitKeys)throw new Error("Could not create MediaKeys.");this.logger.message("Media keys created").log()}},{key:"_createFairPlayInitData",value:function(e,t){var n=this._extractAssetId(e);return b(e,w.a.stringToArray(n),t)}},{key:"_createKeySession",value:function(e){var t=this.videoElement.webkitKeys.createSession("video/mp4",e);if(!t)throw new Error("Could not create key session.");return this.logger.message("Key session created").log(),t}},{key:"_extractAssetId",value:function(e){var t=w.a.arrayToString(e);this.logger.message("initData: "+t).debug();var n=window.atob(t.split("skd://")[1].split("?")[0]);return this.logger.message("Base64decoded: "+n),n}},{key:"_configureSessionListeners",value:function(e){var t=this;e.addEventListener("webkitkeymessage",function(e){t.firstKey=!0,t.licenceRequester.request(e.message,"license-request").then(function(t){e.target.update(t)}).catch(function(e){var t="Failed to retrieve licence.  Error: "+e;throw new Error(t)})},!1),e.addEventListener("webkitkeyadded",function(){return t._onKeyAdded()},!1),e.addEventListener("webkitkeyerror",function(e){return t._onKeyError(e)},!1)}},{key:"_onKeyAdded",value:function(){this.logger.message("Decryption key was added to session.").log()}},{key:"_onKeyError",value:function(e){var t="A decryption key error was encountered";if(e.target&&e.target.error&&(t=t+" - Event error code: "+e.target.error.code+" - Event error message: "+e.target.error.message),this.drmOptions.keyErrorHandler&&this.drmOptions.keyErrorHandler[e.target.error.code]&&this.drmOptions.keyErrorHandler[e.target.error.code](),this.firstKey)throw new Error(t);this.firstKey=!0}}])}(S.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=h(t),l(e,d()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return b});var y=n(102),v=[{initDataTypes:["skd"],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}],m=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}("renew"),b=function(e){function t(e){var n;return i(this,t),n=c(this,t,[e]),n.mediaKeySession=null,n}return p(t,e),a(t,[{key:"renewLicence",value:function(){this.mediaKeySession&&this.mediaKeySession.update(m)}},{key:"tearDown",value:function(){if(this.mediaKeySession){var e=this;this.mediaKeySession.close().finally(function(){e.mediaKeySession=void 0,e.videoElement.setMediaKeys(null),e._setEncryptedListener(e.videoElement,e.onVideoEncryptedHandle)})}}},{key:"_setEncryptedListener",value:function(e,t){e.addEventListener("encrypted",t,{once:!0})}},{key:"_removeEncryptedListener",value:function(e,t){e.removeEventListener("encrypted",t,{once:!0})}},{key:"_supportKeySystem",value:function(){var e=Boolean(navigator.requestMediaKeySystemAccess);return e||this.logger.addType().message(" FairPlay Key System not supported by browser.").log(),e}},{key:"_onVideoEncrypted",value:function(e){this.logger.message("Function: _onVideoEncrypted for ").addType().log();var t=e.initData,n=this;navigator.requestMediaKeySystemAccess("com.apple.fps",v).then(function(e){n.logger.message("Access to mediakeysystem granted").log(),e.createMediaKeys().then(function(e){n.logger.message("Keys created").log(),n.videoElement.setMediaKeys(e),n.certificateRequester.getCertificate().then(function(r){e.setServerCertificate(r).then(function(){n.logger.message("Server Certificate is set").log(),n.mediaKeySession=e.createSession(),n.logger.message("MediaKey session Created.").log(),n._configureSessionListeners(n.mediaKeySession),n.logger.message("Generating MediaKey session request").log(),n.mediaKeySession.generateRequest("skd",t).catch(function(e){var t=e.errorCode,r=e.message,i=t.systemCode;n.logger.message("Error: ".concat(r,", system: ").concat(i,"\n").concat(JSON.stringify(e)))})}).catch(function(e){console.log("Error setting server certificate: "+JSON.stringify(e))})})})})}},{key:"_configureSessionListeners",value:function(e){var t=this;e.addEventListener("message",function(e){t.logger.message("MediaKey message received.  Requesting licence").log(),t.licenceRequester.request(e.message,e.messageType).then(function(n){t.logger.message("Licence Key received").log(),e.target.update(n)}).catch(function(e){var t="Failed to retrieve licence.  Error: "+e;throw new Error(t)})},!1)}}])}(y.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=c(e,"string");return"symbol"==r(t)?t:t+""}function c(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(e,t,n){return t=v(t),f(e,h()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function f(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(e,t,n,r){var i=g(v(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=y(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},g.apply(null,arguments)}function y(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return E});var w=n(49),S=n(70),_=n(140),T=n(352),k=n(50),E=function(e){function t(e,n,r){var i;return o(this,t),i=l(this,t,[e,n,r]),i.vmp=i._makeVmp(e,n),i.requestFilterHandle=i._shakaRequestFilter.bind(i),i.responseFilterHandle=i._shakaResponseFilter.bind(i),i}return m(t,e),s(t,[{key:"ready",value:function(e){this.vjsPlayer.tech_.shaka_&&(this.drmDetails.config.multiSession?this.configureMultiSession_():this._configureSingleSession(),p(t,"ready",this,3)([e]))}},{key:"configureMultiSession_",value:function(){var e=this,t=this.vjsPlayer.tech_.shaka_;this.temporalPredelivery_=this._makeTemporalPreDelivery(t);var n=function(t,n){return e.temporalPredelivery_.licenceRequired(t,n)?[!1,!1]:[!0,!1]};t.setLicenceRequiredCallback(n)}},{key:"_configureDrm",value:function(){var e,t=this.vjsPlayer.tech_.shaka_,n=t.getNetworkingEngine();if(n.unregisterRequestFilter(this.requestFilterHandle),n.unregisterResponseFilter(this.responseFilterHandle),this.token){var r=this.drmDetails.config.tenantId,o=this.drmDetails.config.licenceServer,a=S.a.buildUrlWith(o,r,"Widevine","License"),s=S.a.buildUrlWith(o,r,"PlayReady","License"),u=S.a.buildUrlWith(o,r,"Tvkey","License"),c=S.a.buildUrlWith(o,r,"Nagra","License");e=i(i(i(i({},"com.microsoft.playready",s),"com.widevine.alpha",a),"com.tvkey.drm",u),"com.nagra.prm",c),n.registerRequestFilter(this.requestFilterHandle),n.registerResponseFilter(this.responseFilterHandle)}var l={drm:{servers:e}};this.vjsPlayer.otvtoolkit().techConfig.configure(k.b,l)}},{key:"_makeVmp",value:function(e,t){return new _.a(e,t)}},{key:"_makeTemporalPreDelivery",value:function(e){return new T.a(e,this.log)}},{key:"_shakaRequestFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if(this.log("request url: "+t.uris[0]),t.headers["nv-authorizations"]=this.token,t.uris[0].includes("wvls"))t.headers["Content-Type"]="application/octet-stream";else if(t.uris[0].includes("prls"))t.headers["Content-Type"]="text/xml; charset=utf-8";else if(t.uris[0].includes("tkls")){var n=shaka.util.StringUtils;t.headers["Content-Type"]="application/json";var r=JSON.parse(n.fromUTF8(t.body)),i={OttLicenseRequestMessage:r},o=JSON.stringify(i);this.log("TVKey connect license request payload: "+o),t.body=n.toUTF8(o)}else t.uris[0].includes("prmls")&&(t.headers["Content-Type"]="application/json")}},{key:"_shakaResponseFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE&&t.uri.includes("tkls")){var n=shaka.util.StringUtils.fromUTF8(t.data);this.log("tvkey license response payload: "+n)}}}])}(w.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(){}n.d(t,"a",function(){return d});var l=c;l.warn=c;var f=["49UM7340PVA"],d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;i(this,e),this._isSmartTV=t,this.log=n,this.discover()}return a(e,[{key:"getLGModelAndIdIfPossible",value:function(){var e=this;return new Promise(function(t){e._queryWebOSModelName().then(function(e){t(e)}).catch(function(){t(void 0)})})}},{key:"discover",value:function(){if(this._isSmartTV){var e=this;this.getLGModelAndIdIfPossible().then(function(t){e._modelName=t})}}},{key:"_queryWebOSModelName",value:function(){return new Promise(function(e,t){try{var n=setTimeout(function(){t(new Error("getSystemInfo timeout"))},1e3);webOS.service.request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["modelName","firmwareVersion","UHD","sdkVersion"]},onComplete:function(r){r.returnValue?(clearTimeout(n),e(r.modelName)):(clearTimeout(n),t(new Error("getSystemInfo error - "+r.errorCode+": "+r.errorText)))}})}catch(e){t(e)}})}},{key:"adjustDefault",value:function(e){var t=e;return f.includes(this._modelName)&&(console.warn("WVPersistentState: LG Model ".concat(this._modelName,' setting to "required"')),t="required"),t}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e){for(var t=atob(e),n="",r=0;r<t.length;r++){var i=t.charCodeAt(r).toString(16);n+=2===i.length?i:"0"+i}return n}function h(e){for(var t=atob(e),n=t.length,r=new ArrayBuffer(n),i=new Uint8Array(r),o=0;o<n;o++)i[o]=t.charCodeAt(o);var a=new DataView(r),s=a.getUint32(0,!0),u=a.getUint16(4,!0),l=a.getUint16(6,!0);a.setUint32(0,s,!1),a.setUint16(4,u,!1),a.setUint16(6,l,!1);var f,d="",h=c(i);try{for(h.s();!(f=h.n()).done;){var p=f.value;p=p.toString(16),1===p.length&&(p="0"+p),d+=p}}catch(e){h.e(e)}finally{h.f()}return d}n.d(t,"a",function(){return g});var p=function(){},g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;i(this,e),this.player=t,this.log=n}return a(e,[{key:"licenceRequired",value:function(e,t){var n=this._findKeyId(e),r="com.microsoft.playready"===this.player.keySystem()?h:d;return!n.every(function(e){var n=r(e);return"usable"===t[n]})}},{key:"_findKeyId",value:function(e){var t,n=this.player.keySystem();return"com.widevine.alpha"===n?t=this._parseKeyIdFromWidevineInitData(e):"com.microsoft.playready"===n&&(t=this._parseKeyIdFromPlayreadyInitData(e)),t}},{key:"_getPSSHData",value:function(e){var t=e.buffer,n=e.byteOffset,r=n+e.byteLength,i=new DataView(t);n+=8;var o=i.getUint8(n);return n+=20,o>0&&(n+=4+16*i.getUint32(n)),n+=4,t.slice(n,r)}},{key:"_parseKeyIdFromWidevineInitData",value:function(e){var t=this._getPSSHData(e);return proto.WidevinePsshData.deserializeBinary(t).getKeyIdsList_asB64()}},{key:"_parseKeyIdFromPlayreadyInitData",value:function(e){var t=this._getPSSHData(e),n=this._getPlayreadyHeaderData(t);return this._getPlayreadyKidList(n)}},{key:"_getPlayreadyHeaderData",value:function(e){var t=4,n=new DataView(e),r=n.getUint16(t,!0);t+=2;for(var i=[],o=0;o<r;o++){t+=2;var a=n.getUint16(t,!0);t+=2;var s=e.slice(t,t+a),u=new TextDecoder("utf-16le").decode(s);i.push(u),t+=a}return i}},{key:"_getPlayreadyKidList",value:function(e){var t,n=[],r=c(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(this._getKidFromRecord(i))}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"_getKidFromRecord",value:function(e){return this._fetchFromXML(e,"KID")}},{key:"_fetchFromXML",value:function(e,t){var n=new window.DOMParser,r="";try{r=n.parseFromString(e,"text/xml").getElementsByTagName(t)[0].childNodes[0].nodeValue}catch(e){return!1}return r}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){var r=e.config.licenceServer,i={Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:"Widevine-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}},o={serverURL:r,httpRequestHeaders:{"Conax-Custom-Data":JSON.stringify(i)}};return e.config.widevineServerCertificate&&!w.a.isSmartTV()&&(o.serverCertificate=e.config.widevineServerCertificate),[{name:"com.widevine.alpha",options:o}]}n.d(t,"a",function(){return _});var w=n(30),S=n(49),_=function(e){function t(e,n,r){var o;i(this,t),o=c(this,t,[e,n,r]),o.conaxApi=OTV.conax,o.drmDetails.config.system=e.system,o.cxDeviceId=o.conaxApi.getOrCreateCxDeviceId("HTML5.Widevine");var a=o.conaxApi.getOperator(),s=o.conaxApi.getOttAccount();return o.conaxApi.addDevice(e.config.portalURL+"/ottAccount/device/"+a,s,o.cxDeviceId,"HTML5.Widevine","HTML5.Widevine"),o.cxAuthToken=o.conaxApi.getToken(e.config.portalURL+"/authtoken/"+a,s,o.cxDeviceId),o}return v(t,e),a(t,[{key:"updateSourceData",value:function(e){return e.keySystemOptions=b(this.drmDetails,this.cxAuthToken,this.cxDeviceId),h(t,"updateSourceData",this,3)([e])}}])}(S.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){var n=e.config.licenceServer;return[{name:"com.microsoft.playready",options:{serverURL:n,httpRequestHeaders:{PreAuthorization:t,"Content-Type":"text/xml; charset=utf-8"}}},{name:"com.widevine.alpha",options:{serverURL:n,httpRequestHeaders:{Accept:"application/octet-stream","Content-Type":"application/octet-stream",PreAuthorization:t}}}]}n.d(t,"a",function(){return S});var w=n(49),S=function(e){function t(e,n,r){var o;return i(this,t),o=c(this,t,[e,n,r]),o.drmDetails.config.system=e.system,o}return v(t,e),a(t,[{key:"updateSourceData",value:function(e){return e.keySystemOptions=b(this.drmDetails,e.token),h(t,"updateSourceData",this,3)([e])}}])}(w.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return _});var b=n(42),w=n(137),S=n(30),_=function(e){function t(e,n){var r;return i(this,t),r=c(this,t),r.drmDetails=e,r.drmDetails.config.system=e.system,S.a.isSafari()&&(r.conaxFairPlay=new w.a(e.system,e.config,n),r.conaxFairPlay.initialise()),r}return v(t,e),a(t,[{key:"tearDown",value:function(){this.conaxFairPlay.tearDown()}},{key:"ready",value:function(e){this.conaxFairPlay.setVideoElement(e)}},{key:"updateSourceData",value:function(e){return e&&e.token&&this.conaxFairPlay.setSourceToken(e.token),h(t,"updateSourceData",this,3)([e])}}])}(b.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return e.split(",")[0]}n.d(t,"a",function(){return C});var w=n(143),S=n(140),_=n(357),T=n(144),k=n(41),E=n(50),A=n(70),x={drm:{servers:{"com.microsoft.playready":"http:callback-uri","com.widevine.alpha":"http:callback-uri","com.tvkey.drm":"http:callback-uri"}}},C=function(e){function t(e,n,r){var o;return i(this,t),o=c(this,t,[e,n,r]),o.vmp=o._makeVmp(e,n),o.sessionToken=null,o.isRenewal=!1,o.secureSession=o._makeSecureSessionMgr(e,n),o.setupPromise=o._makeSetupPromise(),o.teardownPromise=null,o.setupProcessed=!1,o}return v(t,e),a(t,[{key:"ready",value:function(e){this.vjsPlayer.tech_.shaka_&&(this.drmDetails.config.multiSession||this._configureSingleSession(),h(t,"ready",this,3)([e]))}},{key:"updateSourceData",value:function(e){var n=this;this.log("SspSsmController::updateSourceData Enter."),this.source=h(t,"updateSourceData",this,3)([e]);var r=this.secureSession.teardown();return r.catch(function(e){return n._tearDownError(e)}).finally(function(){n._setSessionToken(null)}),this.teardownPromise!==r&&(this.teardownPromise=r,this.setupProcessed=!1),this.source.token?(this.setupPromise=this._makeSetupPromise(),this.setupPromise.catch(function(){return null}),this.teardownPromise.catch(function(){return null}).finally(function(){if(n.setupProcessed)n.log("SspSsmController::updateSourceData Skip as SSM setup has been processed.");else if(n.log("SspSsmController::updateSourceData Start SSM setup after SSM teardown."),n.source&&n.source.token){var e=b(n.source.token);n._ssmSetup(e,n.setupResolve,n.setupReject)}else n.log("SspSsmController::updateSourceData source is not available.")})):this.teardownPromise=null,this.log("SspSsmController::updateSourceData Leave."),this.source}},{key:"_ssmSetup",value:function(e,t,n){var r=this;this.secureSession.setup(e).then(function(e){r.log("SspSsmController::_ssmSetup setup has been finished."),r._setSessionToken(e),t(e)}).catch(function(e){r.log("SspSsmController::_ssmSetup SSM session open failed: "+e),n("SspSsmController::_ssmSetup SSM setup failed: "+e),r._error("ssmsetuperror",e)}),this.setupProcessed=!0}},{key:"_makeSetupPromise",value:function(){var e=this;return new Promise(function(t,n){e.setupResolve=t,e.setupReject=n})}},{key:"tearDown",value:function(){var e=this;h(t,"tearDown",this,3)([]),this.log("SspSsmController::tearDown Enter"),(this.sessionToken||3===this.secureSession.getState())&&(this.secureSession.teardown().catch(function(t){return e._tearDownError(t)}),this._setSessionToken(null)),this.isRenewal=!1,this.log("SspSsmController::tearDown Leave")}},{key:"_configureDrm",value:function(){this.vjsPlayer.otvtoolkit().techConfig.configure(E.b,x);var e=this.vjsPlayer.tech_.shaka_,t=this._requestLicence.bind(this),n=this;e.getNetworkingEngine().registerRequestFilter(function(r,i){r===shaka.net.NetworkingEngine.RequestType.LICENSE&&(i.xSourceObject=n.source,i.xKeySystem=e.keySystem(),i.xCallback=t)})}},{key:"_makeSecureSessionMgr",value:function(e,t){return new T.a(e.config.ssmServer,t,this._heartbeatCallback.bind(this))}},{key:"_makeVmp",value:function(e,t){return new S.a(e,t)}},{key:"_setSessionToken",value:function(e){h(t,"_setSessionToken",this,3)([e]),this.sessionToken=e}},{key:"_heartbeatCallback",value:function(){var e=this;(this.isPlayReady||this.isTVKey)&&(this.isRenewal?this.renewLicence():this.secureSession.heartbeat().then(function(t){return e._setSessionToken(t)}).catch(function(t){return e._heartbeatError(t)}))}},{key:"_tearDownError",value:function(e){this._error("ssmteardownerror",e)}},{key:"_heartbeatError",value:function(e){this._error("ssmheartbeaterror",e)}},{key:"_error",value:function(e,t){this.vjsPlayer.trigger({type:e,reason:t})}},{key:"_requestLicence",value:function(e,t,n,r){var i=this;return new Promise(function(o,a){i.log("Need licence");var s={keySystem:e,source:t,requestPayload:n,requestType:r,resolve:o,reject:a};i._checkAndRequestLicense(s)})}},{key:"_checkAndRequestLicense",value:function(e){var t=this;this.log("SspSsmController::_checkAndRequestLicense Enter"),this.setupPromise.then(function(){if(e.source.src!==t.source.src){var n="SspSsmController::_checkAndRequestLicense Can't get license as source has been changed when SSM setup";t.log(n),e.reject(n)}else t.log("SspSsmController::_checkAndRequestLicense Requesting licence "+e.source.src),t._doRequestNow(e)}).catch(function(){t.log("Failed to setup"),e.reject("Can't get licence as setup failed")})}},{key:"_doRequestNow",value:function(e){"license-renewal"===e.requestType?(this.log("Renewing licence"),this._doLicenceRenew(e)):(this.log("Requesting licence"),this._doLicenceRequest(e))}},{key:"_isPlayready",value:function(e){return"com.microsoft.playready"===e}},{key:"_isTVKey",value:function(e){return"com.tvkey.drm"===e}},{key:"_makeLicenseServerUrl",value:function(){var e=this.drmDetails.config.licenceServer,t=this.drmDetails.config.tenantId,n="Widevine";this.isPlayReady?n="PlayReady":this.isTVKey&&(n="Tvkey");var r=A.a.buildUrlWith(e,t,n,"License");return this.isRenewal&&(r+="?renew=true"),r}},{key:"_makeHeaders",value:function(e){var t="application/octet-stream";this.isPlayReady?t="text/xml; charset=utf-8":this.isTVKey&&(t="application/json");var n=this.isRenewal?this.sessionToken:e.source.token+","+this.sessionToken;return this.log("nv-authorizations: "+n),{"Content-Type":t,"nv-authorizations":n}}},{key:"_doLicenceRequest",value:function(e){var t=this;this.isPlayReady=this._isPlayready(e.keySystem),this.isTVKey=this._isTVKey(e.keySystem);var n=this._makeLicenseServerUrl(),r=this._makeHeaders(e),i=new XMLHttpRequest;i.open("POST",n,!0),i.responseType="arraybuffer";for(var o in r)r.hasOwnProperty(o)&&i.setRequestHeader(o,r[o]);i.onload=function(){var n=!!t.isPlayReady&&t._getParsedPlayreadyResponse(i.response);if(200===i.status){if(n){var r=Boolean(n.proactive);if(r){var o=n.customData.sessionToken;t._setSessionToken(o),t.secureSession.updateSessionToken(o)}t.isRenewal=r}else if(t.isTVKey){var a=t._parseTVKeyResponse(new Uint8Array(i.response));t.log("Session token is : "+a),a?(t.isRenewal=!0,t._setSessionToken(a),t.secureSession.updateSessionToken(a)):t.log("SSM renewal is not supported.")}e.resolve(new Uint8Array(i.response))}else{if(t.isRenewal){var s=n?JSON.stringify(n.customData):k.a.arrayBufferToString(i.response),u=new Error(s);t._error("ssmrenewalerror",u)}t.isTVKey&&t.log.error("Server return error: "+shaka.util.StringUtils.fromUTF8(i.response)),t.log("HTTP "+i.status+" received"),e.reject("Failed to receive licence, HTTP status:"+i.status)}},i.onerror=function(){t.log("xhr error"),e.reject("Error on licence request")};var a=this.isTVKey?this._updateTVKeyRequestPayload(e.requestPayload):e.requestPayload;i.send(a)}},{key:"_parseTVKeyResponse",value:function(e){var t=shaka.util.StringUtils.fromUTF8(e);this.log("tvkey SSM license reponse payload: "+t);var n=JSON.stringify(t);if(n&&n.errorCode)this.log.error("tvkey ssm request license failure, error code :"+n.errorCode);else{var r=n.OttLicenseResponseMessage;r&&r.Application6}return""}},{key:"_updateTVKeyRequestPayload",value:function(e){var t=shaka.util.StringUtils,n=JSON.parse(t.fromUTF8(new Uint8Array(e)));if(!n.OttLicenseRequestMessage){var r={OttLicenseRequestMessage:n},i=JSON.stringify(r);return this.log("tvkey SSM license request payload: "+i),t.toUTF8(i)}return e}},{key:"_getParsedPlayreadyResponse",value:function(e){return new w.a.PlayReadyServerResponseParser(e)}},{key:"_doLicenceRenew",value:function(e){var t=this,n=this.drmDetails.config.ssmServer+"/renewal-license-wv",r={Accept:"application/json","Content-Type":"application/json","nv-authorizations":this.sessionToken},i=this._makeJsonPayload(e.requestPayload),o=new XMLHttpRequest;o.open("POST",n,!0),o.responseType="text";for(var a in r)r.hasOwnProperty(a)&&o.setRequestHeader(a,r[a]);o.onload=function(){if(200===o.status)try{var n=JSON.parse(o.response),r=n.sessionToken;t._setSessionToken(r),t.secureSession.updateSessionToken(r),t.log("Received new SSM session token from license renewal: "+r);for(var i=atob(n.license),a=new ArrayBuffer(i.length),s=new Uint8Array(a),u=0,c=i.length;u<c;u++)s[u]=i.charCodeAt(u);e.resolve(s)}catch(t){var l="Failed JSON response parse: "+t;e.reject(l)}else{var f;try{f=JSON.parse(o.response)}catch(e){f={}}f.code=o.status;var d=JSON.stringify(f),h=new Error(d);t._error("ssmrenewalerror",h);var p="Failed to receive licence, HTTP status:"+d;e.reject(p)}},o.onerror=function(){e.reject("Error on licence request")},o.send(i)}},{key:"_makeJsonPayload",value:function(e){return JSON.stringify({challenge:btoa(String.fromCharCode.apply(String,new Uint8Array(e)))})}}])}(_.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n,r){var i=a(v(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=s(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(null,arguments)}function s(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=d(e,"string");return"symbol"==r(t)?t:t+""}function d(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function h(e,t,n){return t=v(t),p(e,y()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function p(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return _});var w=n(49),S=n(11),_=function(e){function t(){return u(this,t),h(this,t,arguments)}return m(t,e),l(t,[{key:"_makeTimelineLogger",value:function(){return new T}},{key:"_setSessionToken",value:function(e){this.timeline.setSessionToken(e)}}])}(w.a),T=function(e){function t(){var e;return u(this,t),e=h(this,t),e.token="",e.sessionToken="",e.renewal=!1,e}return m(t,e),l(t,[{key:"tearDown",value:function(){this.renewal=!1,o(t,"tearDown",this,3)([])}},{key:"setSource",value:function(e){this.token=e.token||"",o(t,"setSource",this,3)([e])}},{key:"setSessionToken",value:function(e){this.sessionToken=e}},{key:"_shakaRequestFilter",value:function(e,n){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if("license-renewal"===n.licenseRequestType){this.renewal=!0,this.provision=!1;var r=JSON.stringify(i(i({},S.e.contentToken,this.token),S.e.sessionToken,this.sessionToken)),a=S.g.sessionManagement,s=S.d.renewalStart;OTV.eventTimeline.addToTimeline(a,s,r)}else this.renewal=!1,o(t,"_shakaRequestFilter",this,3)([e,n])}},{key:"_shakaResponseFilter",value:function(e,n){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE)if(this.renewal){var r,a=i(i({},S.e.contentToken,this.token),S.e.sessionToken,this.sessionToken);r=S.d.renewalSuccessful;var s=S.g.sessionManagement,u=JSON.stringify(a);OTV.eventTimeline.addToTimeline(s,r,u)}else o(t,"_shakaResponseFilter",this,3)([e,n])}},{key:"_onErrorEvent",value:function(e){if(6007===e.detail.code)if(this.renewal){var n,r=i(i({},S.e.contentToken,this.token),S.e.sessionToken,this.sessionToken);r[S.e.error]=e.detail.message,n=S.d.renewalFailure;var a=S.g.sessionManagement,s=JSON.stringify(r);OTV.eventTimeline.addToTimeline(a,n,s)}else o(t,"_onErrorEvent",this,3)([e])}}])}(w.b)},function(e,t,n){"use strict";function r(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=c(e,"string");return"symbol"==i(t)?t:t+""}function c(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var l=n(30),f=n(11),d=function(){},h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;o(this,e),this.ssmEndpointUrl=t,this.log=n,this.timeline=new p}return s(e,[{key:"doSetup",value:function(e){var t=this;return this.log("doSetup - authToken: "+e),this.timeline.logSetupStart(e),new Promise(function(n,r){t._requestSessionToken(t.ssmEndpointUrl+"/setup",e).then(function(e){var i=e.heartbeat,o=e.sessionToken;t.log("doSetup - received session token from ssm mgr:"),t.log("   heartbeat "+i),t.log("   sessionToken "+o),(!i||i<=0)&&r("doSetup - Invalid heartbeat period"),t.timeline.logSetupSuccessful(o),n({sessionToken:o,heartbeatPeriod:i})}).catch(function(e){t.timeline.logSetupFailure(e),r(e)})})}},{key:"tearDown",value:function(e){var t=this;return new Promise(function(n,r){t.log("tearDown - performing teardown for session token: ".concat(e," via ").concat(t.ssmEndpointUrl,"/teardown")),t.timeline.logTeardownStart(e);var i=!l.a.isSmartTV();t._ssmApiCall(t.ssmEndpointUrl+"/teardown",e,i).then(function(){t.log("tearDown - teared down session for sessionToken ".concat(e)),t.timeline.logTeardownSuccessful(e),n()}).catch(function(n){t.log("tearDown - tear down has failed session for sessionToken ".concat(e)),t.timeline.logTeardownFailure(e,n),r(n)})})}},{key:"heartbeat",value:function(e){var t=this,n=new Date;return this.log("Making heartbeat - ".concat(n.toISOString()," current session token = ").concat(e)),this.timeline.logHeartbeatStart(e),new Promise(function(n,r){t._requestSessionToken(t.ssmEndpointUrl+"/heartbeat",e).then(function(r){var i=r.sessionToken;t.log("Heartbeat - Refreshed sessionToken "+e+", is now "+i),t.timeline.logHeartbeatSuccessful(i),n(i)}).catch(function(n){t.log("Heartbeat - error while making heartbeat call, reason="+n),t.timeline.logHeartbeatFailure(e,n),r(n)})})}},{key:"_ssmApiCall",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={method:"POST",mode:"cors",redirect:"follow",headers:{"nv-authorizations":t,"content-type":"application/json; charset=utf-8"},body:"{}"};return r&&!l.a.isChrome()&&(i.keepalive=!0),new Promise(function(t,r){fetch(e,i).then(function(e){if(e.ok)t(e.json());else{var i=e.status;n.log(JSON.stringify(e)),e.text().then(function(e){var t;try{t=JSON.parse(e)}catch(e){t={}}t.code=i,r(Error(JSON.stringify(t)))})}}).catch(function(t){n.log("Error making request to "+e),r(t)})})}},{key:"_requestSessionToken",value:function(e,t){var n=this;return this.log("_requestSessionToken - trying to get sessionToken from "+e),new Promise(function(r,i){n._ssmApiCall(e,t).then(function(t){n.log("_requestSessionToken - got response from "+e),r(t)}).catch(function(e){n.log("_requestSessionToken - error API call, reason="+e),i(e)})})}}])}(),p=function(){function e(){o(this,e),this.contentToken=""}return s(e,[{key:"logSetupStart",value:function(e){this.contentToken=e;var t=JSON.stringify(r({},f.e.contentToken,e));OTV.eventTimeline.addToTimeline(f.g.sessionManagement,f.d.setupStart,t)}},{key:"logSetupSuccessful",value:function(e){var t=JSON.stringify(r(r({},f.e.sessionToken,e),f.e.contentToken,this.contentToken));OTV.eventTimeline.addToTimeline(f.g.sessionManagement,f.d.setupSuccessful,t)}},{key:"logSetupFailure",value:function(e){var t=JSON.stringify(r(r({},f.e.error,e),f.e.contentToken,this.contentToken));OTV.eventTimeline.addToTimeline(f.g.sessionManagement,f.d.setupFailure,t)}},{key:"logTeardownStart",value:function(e){var t=JSON.stringify(r(r({},f.e.sessionToken,e),f.e.contentToken,this.contentToken));OTV.eventTimeline.addToTimeline(f.g.sessionManagement,f.d.teardownStart,t)}},{key:"logTeardownSuccessful",value:function(e){var t=JSON.stringify(r(r({},f.e.sessionToken,e),f.e.contentToken,this.contentToken));OTV.eventTimeline.addToTimeline(f.g.sessionManagement,f.d.teardownSuccessful,t)}},{key:"logTeardownFailure",value:function(e,t){var n=JSON.stringify(r(r(r({},f.e.sessionToken,e),f.e.contentToken,this.contentToken),f.e.error,t));OTV.eventTimeline.addToTimeline(f.g.sessionManagement,f.d.teardownFailure,n)}},{key:"logHeartbeatStart",value:function(e){var t=JSON.stringify(r(r({},f.e.sessionToken,e),f.e.contentToken,this.contentToken));OTV.eventTimeline.addToTimeline(f.g.sessionManagement,f.d.heartbeatStart,t)}},{key:"logHeartbeatSuccessful",value:function(e){var t=JSON.stringify(r(r({},f.e.sessionToken,e),f.e.contentToken,this.contentToken));OTV.eventTimeline.addToTimeline(f.g.sessionManagement,f.d.heartbeatSuccessful,t)}},{key:"logHeartbeatFailure",value:function(e,t){var n=JSON.stringify(r(r(r({},f.e.sessionToken,e),f.e.contentToken,this.contentToken),f.e.error,t));OTV.eventTimeline.addToTimeline(f.g.sessionManagement,f.d.heartbeatFailure,n)}}])}();t.a={SsmInterface:h}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return _});var b=n(360),w=n(144),S=n(141),_=function(e){function t(e,n,r){var o;return i(this,t),o=c(this,t,[e,n]),o.log=n,o.vjsPlayer=r,o.drmDetails=e,o.heartbeatMode=!0,o.secureSession=new w.a(e.config.ssmServer,n,o._heartbeatCallback.bind(o)),o.teardownPromise=null,o.setupProcessed=!1,o}return v(t,e),a(t,[{key:"updateSourceData",value:function(e){var n=this;this.log("SspFpsSsmController::updateSourceData Enter."),this.source=h(t,"updateSourceData",this,3)([e]),this.heartbeatMode=!0;var r=this.secureSession.teardown();return r.catch(function(e){return n._tearDownError(e)}).finally(function(){n._setSessionToken(null)}),this.teardownPromise!==r&&(this.teardownPromise=r,this.setupProcessed=!1),this.source.token?this.teardownPromise.catch(function(){return null}).finally(function(){if(n.setupProcessed)n.log("SspFpsSsmController::updateSourceData Skip as SSM setup has been processed.");else if(n.log("SspFpsSsmController::updateSourceData Start SSM setup after SSM teardown."),n.source&&n.source.token){var e=n.sspFairPlay.licenceRequester.setupResolve;n._ssmSetup(n.source.token,e)}else n.log("SspFpsSsmController::updateSourceData source is not available.")}):this.teardownPromise=null,this.log("SspFpsSsmController::updateSourceData Leave."),this.source}},{key:"_ssmSetup",value:function(e,t){var n=this;this.secureSession.setup(e).then(function(e){n.log("SspFpsSsmController::_ssmSetup setup has been finished."),n._setSessionToken(e),t()}).catch(function(e){n.log("SspFpsSsmController::_ssmSetup SSM session open failed: "+e),n._error("ssmsetuperror",e)}),this.setupProcessed=!0}},{key:"tearDown",value:function(){var e=this;h(t,"tearDown",this,3)([]),this.log("SspFpsSsmController::tearDown Enter"),(this.sessionToken||3===this.secureSession.getState())&&(this.secureSession.teardown().catch(function(t){return e._tearDownError(t)}),this._setSessionToken(null)),this.log("SspFpsSsmController::tearDown Leave")}},{key:"renewLicence",value:function(){this.sspFairPlay.renewLicence()}},{key:"_makeFairPlaySystem",value:function(e,t,n){return new b.a(e,t,this._sessionUpdateCb.bind(this),n,this._error.bind(this))}},{key:"_heartbeatCallback",value:function(){var e=this;this.heartbeatMode?this.secureSession.heartbeat().then(function(t){return e._setSessionToken(t)}).catch(function(t){return e._heartbeatError(t)}):this.renewLicence()}},{key:"_setSessionToken",value:function(e){this.sessionToken=e,this.sspFairPlay.setSessionToken(e)}},{key:"_sessionUpdateCb",value:function(e){this.heartbeatMode=!1,this._setSessionToken(e),this.secureSession.updateSessionToken(e)}},{key:"_tearDownError",value:function(e){this._error("ssmteardownerror",e)}},{key:"_heartbeatError",value:function(e){this._error("ssmheartbeaterror",e)}},{key:"_error",value:function(e,t){this.vjsPlayer.trigger({type:e,reason:t})}}])}(S.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n,r){var i=a(v(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=s(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(null,arguments)}function s(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=d(e,"string");return"symbol"==r(t)?t:t+""}function d(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function h(e,t,n){return t=v(t),p(e,y()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function p(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return k});var w=n(142),S=n(100),_=n(41),T=n(11),k=function(e){function t(e,n,r,i,o){var a;return u(this,t),a=h(this,t,[e,n,i]),a.sessionToken=null,a.sessionCallback=r,a.errorCallback=o,a}return m(t,e),l(t,[{key:"setSessionToken",value:function(e){this.sessionToken=e,this.licenceRequester.setSessionToken(e)}},{key:"renewLicence",value:function(){this.videoDecryption.renewLicence()}},{key:"_makeLicenceRequester",value:function(e){return e.sessionCallback=this.sessionCallback,e.errorCallback=this.errorCallback,new E(e)}}])}(w.a.SSPFairPlaySystem),E=function(e){function t(e){var n;return u(this,t),n=h(this,t,[e]),n.sessionToken=null,n.sessionCallback=e.sessionCallback,n.errorCallback=e.errorCallback,n._makeSetupPromise(),n}return m(t,e),l(t,[{key:"setSessionToken",value:function(e){this.sessionToken=e,e?this.logger.message("SsmFairPlayLicenceRequester::setSessionToken Session token is avaiable now").debug():this._makeSetupPromise()}},{key:"request",value:function(e,n){var r=this;return new Promise(function(i,a){var s=r;r.setupPromise.then(function(){o(t,"request",r,3)([e,n]).then(function(e){return i(e)}).catch(function(e){"license-renewal"===n&&s.errorCallback&&s.errorCallback("ssmrenewalerror",e),a(e)})})})}},{key:"_makeSetupPromise",value:function(){var e=this;this.setupPromise=new Promise(function(t){e.setupResolve=t})}},{key:"_getTokenString",value:function(e){return this.sessionToken?"license-request"===e?"".concat(o(t,"_getTokenString",this,3)([]),",").concat(this.sessionToken):this.sessionToken:o(t,"_getTokenString",this,3)([])}},{key:"_getLicenceUri",value:function(e){var n=o(t,"_getLicenceUri",this,3)([]);return"license-request"!==e&&(n+="?renew=true"),n}},{key:"_getCkc",value:function(e){var t=JSON.parse(e);return t.sessionToken&&this.sessionCallback(t.sessionToken),this.logger.message("CkcMessage: "+t.CkcMessage).debug(),_.a.base64DecodeUint8Array(t.CkcMessage)}},{key:"_logKeyRequestStatTimelineEvent",value:function(e,n){if("license-request"===e)o(t,"_logKeyRequestStatTimelineEvent",this,3)([e,n]);else{var r=JSON.stringify(i(i({},T.e.contentToken,this.token),T.e.sessionToken,this.sessionToken)),a=T.g.sessionManagement,s=T.d.renewalStart;OTV.eventTimeline.addToTimeline(a,s,r)}}},{key:"_logKeyStatSuccessTimelineEvent",value:function(e,n){if("license-request"===e)o(t,"_logKeyStatSuccessTimelineEvent",this,3)([e,n]);else{var r=i(i({},T.e.contentToken,this.token),T.e.sessionToken,this.sessionToken),a=T.d.renewalSuccessful,s=T.g.sessionManagement,u=JSON.stringify(r);OTV.eventTimeline.addToTimeline(s,a,u)}}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e,n,r){if("license-request"===e)o(t,"_logKeyRequestStatFailureTimelineEvent",this,3)([e,n,r]);else{var a=i(i(i({},T.e.contentToken,this.token),T.e.sessionToken,this.sessionToken),T.e.error,r),s=T.d.renewalFailure,u=T.g.sessionManagement,c=JSON.stringify(a);OTV.eventTimeline.addToTimeline(u,s,c)}}}])}(S.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return c});var c=function(){function e(t){i(this,e),this.certificate=t}return a(e,[{key:"getCertificate",value:function(){return"function"==typeof this.certificate?this.certificate():Promise.resolve(this.certificate)}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t=p(t),u(e,l()?Reflect.construct(t,n||[],p(e).constructor):t.apply(e,n))}function u(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function f(e,t,n,r){var i=d(p(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=h(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},d.apply(null,arguments)}function h(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=b(e,"string");return"symbol"==r(t)?t:t+""}function b(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return T});var w=n(145),S=n(143),_=v(v(v(v({},"com.widevine.alpha","edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"),"com.microsoft.playready","9a04f079-9840-4286-ab92-e65be0885f95"),"com.tvkey.drm","adb41c24-2dbf-4a6d-958b-4457c0d27b95"),"com.nagra.prm","adb41c24-2dbf-4a6d-958b-4457c0d27b95"),T=function(e){function t(e,n,r){var o;return i(this,t),o=s(this,t,[e,n,r]),o.heartbeatTimer=0,o.isRenewal=!1,o}return g(t,e),a(t,[{key:"tearDown",value:function(){f(t,"tearDown",this,3)([]),this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=0),this.isRenewal=!1}},{key:"_getHttpCallback",value:function(){return this._onNeedLicence.bind(this)}},{key:"_onNeedLicence",value:function(e,t,n,r){var i=this,o=this,a=this._getRequestType(e,r),s=this._getContentProtectionScheme(e);return new Promise(function(t,r){s?i.drmDetails.config.customerSsmCallback.getLicence(s,n,a).then(function(n){o._gotLicence(e,a,n.licence,n.heartbeat);var r="com.widevine.alpha"===e?n.licence:new Uint8Array(n.licence);t(r)}).catch(function(e){r(e)}):r("Key system ".concat(e," not supported in this DRM mode"))})}},{key:"_getRequestType",value:function(e,t){return"com.microsoft.playready"!==e&&"com.tvkey.drm"!==e&&"com.nagra.prm"!==e||!this.isRenewal?t:"license-renewal"}},{key:"_heartbeat",value:function(){this.drmDetails.config.customerSsmCallback.heartbeat()}},{key:"_renewTimerTask",value:function(){this.isRenewal=!0,this.renewLicence()}},{key:"_gotLicence",value:function(e,t,n,r){var i="com.microsoft.playready"===e,o="com.tvkey.drm"===e,a="com.nagra.prm"===e;if((i||o||a)&&"license-request"===t&&!this.heartbeatTimer){var s=!1;if(i){s=this._parseLicence(n).proactive}else{this._parseTVKeyResponse(new Uint8Array(n))&&(s=!0)}var u=s?this._renewTimerTask.bind(this):this._heartbeat.bind(this);this.heartbeatTimer=this._makeTimer(r,u)}}},{key:"_parseTVKeyResponse",value:function(e){var t=shaka.util.StringUtils.fromUTF8(e);this.log("tvkey/Nagra PRM license response payload: "+t);var n=JSON.stringify(t);if(n&&n.errorCode)this.log.error("tvkey/Nagra PRM request license failure, error code :"+n.errorCode);else{var r=n.OttLicenseResponseMessage;r&&r.Application6}return""}},{key:"_parseLicence",value:function(e){return new S.a.PlayReadyServerResponseParser(e)}},{key:"_makeTimer",value:function(e,t){return setInterval(t,1e3*e)}},{key:"_getContentProtectionScheme",value:function(e){return _[e]}}])}(w.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t=p(t),u(e,l()?Reflect.construct(t,n||[],p(e).constructor):t.apply(e,n))}function u(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function f(e,t,n,r){var i=d(p(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=h(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},d.apply(null,arguments)}function h(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=m(e,"string");return"symbol"==r(t)?t:t+""}function m(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return _});var b=n(146),w=n(147),S=function(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"com.apple.fps.1_0","94CE86FB-07FF-4F43-ADB8-93D2FA968CA2"),_=function(e){function t(e,n){var r;return i(this,t),r=s(this,t,[e,n]),r.ssmHeartbeatInterval=null,r.enforcement=!0,r}return g(t,e),a(t,[{key:"setEnforcement",value:function(e){this.enforcement=Boolean(e)}},{key:"_heartbeat",value:function(){this.enforcement?this.renewLicence():this.config.customerSsmCallback.heartbeat()}},{key:"_licenceRequestWrapper",value:function(e,t,n,r){var i=this,o=this,a=this._getContentProtectionScheme(e);return new Promise(function(t,s){a?i.config.customerSsmCallback.getLicence(a,n,r).then(function(n){o._gotLicence(e,r,n.licence,n.heartbeat),t(n.licence)}).catch(function(e){s(e)}):s("Key system ".concat(e," not supported in this DRM mode"))})}},{key:"_gotLicence",value:function(e,t,n,r){if("com.apple.fps.1_0"===e&&!this.ssmHeartbeatInterval){var i=this._heartbeat.bind(this);this.ssmHeartbeatInterval=setInterval(i,1e3*r)}}},{key:"tearDown",value:function(){this.ssmHeartbeatInterval&&(clearInterval(this.ssmHeartbeatInterval),this.ssmHeartbeatInterval=null),f(t,"tearDown",this,3)([])}},{key:"_makeLicenceRequester",value:function(e,t,n){return new w.a(this._licenceRequestWrapper.bind(this),t,n)}},{key:"_getContentProtectionScheme",value:function(e){return S[e]}}])}(b.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return S});var b=n(365),w=n(42),S=function(e){function t(e,n){var r;return i(this,t),r=c(this,t),r.logger=n,r.tvkeyNative=r._makeTVKeyNative(e.system,e.config,n),r.readyEventCalled=!1,r}return v(t,e),a(t,[{key:"ready",value:function(e){if(this.logger("SSPTVKeyNativeController.ready() called."),this.readyEventCalled)return void this.logger("SSPTVKeyNativeController.ready() has been called. Skip.");this.tvkeyNative.setVideoElement(e),this.readyEventCalled=!0}},{key:"updateSourceData",value:function(e){return e&&e.token&&this.tvkeyNative.setSourceToken(e.token),h(t,"updateSourceData",this,3)([e])}},{key:"tearDown",value:function(){h(t,"tearDown",this,3)([]),this.readyEventCalled=!1}},{key:"_makeTVKeyNative",value:function(e,t,n){return new b.a.SSPTVKeyNative(e,t,n)}}])}(w.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c=n(57),l=n(366),f=n(148),d=n(70),h=function(){function e(t,n,r){i(this,e),n.system=t,this.logger=new c.a(r,t),this.token=void 0,this.videoDecryption=null,n.licenceServer=d.a.buildUrlWith(n.licenceServer,n.tenantId,"Tvkey","License"),this.drmOptions=n}return a(e,[{key:"initialise",value:function(){var e={drmOptions:this.drmOptions,logger:this.logger};this.licenceRequester=this._makeLicenceRequester(e);var t={drmOptions:this.drmOptions,logger:this.logger,licenceRequester:this.licenceRequester};this.videoDecryption=this._makeVideoDecryptionHandler(t)}},{key:"setVideoElement",value:function(e){this.videoDecryption.setVideoElement(e)}},{key:"setSourceToken",value:function(e){this.token=e,this.licenceRequester.setToken(e)}},{key:"_makeLicenceRequester",value:function(e){return new l.a(e)}},{key:"_makeVideoDecryptionHandler",value:function(e){return new f.a(e)}}])}();t.a={SSPTVKeyNative:h}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=c(e,"string");return"symbol"==r(t)?t:t+""}function c(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return d});var l=n(11),f=n(139),d=function(){function e(t){o(this,e),this.drmOptions=t.drmOptions,this.logger=t.logger,this.drmOptions.licenceServer||this.logger.addType().message(" TVKey licenceServer not configured!").warn(),this.drmImplementer=f.a.getDrmImplementation(this.drmOptions.system)}return s(e,[{key:"setToken",value:function(e){this.token=e}},{key:"request",value:function(e,t){var n=this;this.logger.message("Function: TVKeyLicenceRequester.request()").log();var r=this._getLicenceUri(t);return this._logKeyRequestStatTimelineEvent(t,r),new Promise(function(i,o){var a=new XMLHttpRequest;a.responseType="text";var s=n;a.addEventListener("load",function(e){s.logger.message("licence request loaded").log();var n=e.target;if(200===n.status){s.logger.message("Response: "+n.responseText).debug();var a=s._getLicence(n.responseText);s.logger.message("licence request loaded - updating key").log(),s._logKeyStatSuccessTimelineEvent(t,r),i(a)}else{var u="licence request failed: "+n.status+": "+n.responseText;s.logger.message(u).warn(),s.logger.message("licence response headers: "+n.getAllResponseHeaders()).log(),s._logKeyRequestStatFailureTimelineEvent(t,r,u),o(u)}},!1),a.addEventListener("error",function(e){var t="The licence request failed";e.target&&e.target.error&&(t=t+" - Event error code: "+e.target.error.code+" - Event error message: "+e.target.error.message),n._logKeyRequestStatFailureTimelineEvent(r,e.target.error.message),o(t)},!1),a.open("POST",r,!0),a.setRequestHeader("Content-type","application/json"),n.drmImplementer.setRequestHeaders(a,n._getTokenString(t),n.drmOptions.mode),n.logger.message("Sending licence request to: "+r).log(),a.send(n._getTVKeyRequestPayload(e))})}},{key:"_getTVKeyRequestPayload",value:function(e){var t=shaka.util.StringUtils,n=t.fromUTF8(e),r=JSON.parse(n);if(!r.OttLicenseRequestMessage){var i={OttLicenseRequestMessage:r},o=JSON.stringify(i);return this.logger.message("tvkey license request payload: "+o).log(),o}return n}},{key:"_getLicence",value:function(e){return this.logger.message("tvkey licence : "+e).log(),shaka.util.StringUtils.toUTF8(e)}},{key:"_getLicenceUri",value:function(){return this.drmOptions.licenceServer}},{key:"_getTokenString",value:function(){return this.token}},{key:"_logKeyRequestStatTimelineEvent",value:function(e,t){this._logTimelineEvent(l.a.keyRequestStart,t)}},{key:"_logKeyStatSuccessTimelineEvent",value:function(e,t){this._logTimelineEvent(l.a.keyRequestSuccessful,t)}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e,t,n){this._logTimelineEvent(l.a.keyRequestFailed,t,n)}},{key:"_logTimelineEvent",value:function(e,t,n){var r="";r=n?JSON.stringify(i(i({},l.e.url,t),l.e.error,n)):JSON.stringify(i({},l.e.url,t)),OTV.eventTimeline.addToTimeline(l.g.licenseRequest,e,r)}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return c});var c=function(){function e(t){i(this,e),this.psshBox=t,this.version=null,this.systemId=null,this.data=null,this._parse()}return a(e,[{key:"_parse",value:function(){if(this.psshBox&&!(this.psshBox.length<32)){var e=new DataView(this.psshBox.buffer),t=0;if(t+=4,1886614376===e.getUint32(t)&&(t+=4,this.version=e.getUint8(t),0===this.version||1===this.version)){t+=4,this.systemId="";for(var n=0;n<16;n++){var r=e.getUint8(t+n).toString(16);this.systemId+=1===r.length?"0"+r:r}this.systemId=this.systemId.toLowerCase(),t+=16,e.getUint32(t)>0&&(t+=4,this.data=e.buffer.slice(t))}}}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return k});var b=n(42),w=n(57),S=n(148),_=n(369),T="com.tvkey.drm",k=function(e){function t(e,n){var r;i(this,t),r=c(this,t),r.config=e.config,r.logger=new w.a(n,e.system),r.videoDecryption=null,r.readyEventCalled=!1,r.licenceRequester=r._makeLicenceRequester(r.config.requestLicenceCallback,T,r.logger);var o={drmOptions:r.config,logger:r.logger,licenceRequester:r.licenceRequester};return r.videoDecryption=r._makeVideoDecryptionHandler(o),r}return v(t,e),a(t,[{key:"ready",value:function(e){if(this.logger.message("DrmCustomerTVKeyNativeController.ready()").log(),this.readyEventCalled)return void this.logger.message("DrmCustomerTVKeyNativeController.ready() has been called. Skip.").log();this.videoDecryption.setVideoElement(e),this.readyEventCalled=!0}},{key:"updateSourceData",value:function(e){return this.src=e,this.licenceRequester.setSource(e),h(t,"updateSourceData",this,3)([e])}},{key:"tearDown",value:function(){h(t,"tearDown",this,3)([]),this.videoDecryption.tearDown(),this.readyEventCalled=!1}},{key:"_makeLicenceRequester",value:function(e,t,n){return new _.a(e,t,n)}},{key:"_makeVideoDecryptionHandler",value:function(e){return new S.a(e)}}])}(b.a)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=c(e,"string");return"symbol"==r(t)?t:t+""}function c(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return f});var l=n(11),f=function(){function e(t,n,r){o(this,e),this.callback=t,this.keysystem=n,this.logger=r}return s(e,[{key:"setSource",value:function(e){this.source=e}},{key:"request",value:function(e,t){var n=this;return new Promise(function(r,i){n._logKeyRequestStatTimelineEvent(),n.callback(n.keysystem,n.source,n._getTVKeyRequestPayload(e),t).then(function(e){n._logKeyStatSuccessTimelineEvent(),r(n._getLicence(e))}).catch(function(e){n._logKeyRequestStatFailureTimelineEvent(e),i(e)})})}},{key:"_getTVKeyRequestPayload",value:function(e){var t=shaka.util.StringUtils,n=t.fromUTF8(e),r=JSON.parse(n);if(!r.OttLicenseRequestMessage){var i={OttLicenseRequestMessage:r},o=JSON.stringify(i);return this.logger.message("tvkey license request payload: "+o).log(),o}return n}},{key:"_getLicence",value:function(e){return this.logger.message("tvkey licence : "+e).log(),shaka.util.StringUtils.toUTF8(e)}},{key:"_logKeyRequestStatTimelineEvent",value:function(){var e=l.g.licenseRequest,t=l.a.keyRequestStart;OTV.eventTimeline.addToTimeline(e,t)}},{key:"_logKeyStatSuccessTimelineEvent",value:function(){var e=l.g.licenseRequest,t=l.a.keyRequestSuccessful;OTV.eventTimeline.addToTimeline(e,t)}},{key:"_logKeyRequestStatFailureTimelineEvent",value:function(e){var t=l.g.licenseRequest,n=l.a.keyRequestFailed,r=JSON.stringify(i({},l.e.error,e));OTV.eventTimeline.addToTimeline(t,n,r)}}])}()},function(e,t,n){"use strict";function r(e,t){var n=e<0?0:e,r=Math.floor(n%a),i=Math.floor(n/a%a),o=Math.floor(n/(a*s)),c=Math.floor(t/a%a),l=Math.floor(t/(a*s));return(isNaN(n)||n===1/0)&&(o=i=r="0"),o=o>0||l>0?o+":":"",i=((o||c>=u)&&i<u?"0"+i:i)+":",r=r<u?"0"+r:r,o+i+r}function i(e){var t="-";return(e===1/0||e<1)&&(t=""),t}function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(n===1/0&&this.liveTracker&&this.liveTracker.isLive()){var o=this.liveTracker.liveWindow(),a=0;this.liveTracker.behindLiveEdge()&&(a=this.liveTracker.seekableEnd()-e+this.liveTracker.pastSeekEnd()),t=i(a)+r(a,o)}else t=r(e,n);return t}var a=60,s=60,u=10;t.a={liveFormatTime:o}},function(e,t,n){e.exports=n(372)},function(e,t,n){(function(t){null==t.Promise&&(t.Promise=n(373)),null==Object.assign&&Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n(376)}),e.exports=n(377)}).call(t,n(18))},function(e,t,n){(function(t,n,r){!function(t){"use strict";function i(e){if(!(this instanceof i))throw new TypeError("Zousan must be created with the new keyword");if("function"==typeof e){var t=this;try{e(function(e){t.resolve(e)},function(e){t.reject(e)})}catch(e){t.reject(e)}}else if(0<arguments.length)throw new TypeError("Zousan resolver "+e+" is not a function")}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(u,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function a(e,t){if("function"==typeof e.n)try{var n=e.n.call(u,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}var s,u,c="fulfilled",l="undefined",f=function(){function e(){for(;i.length-o;){try{i[o]()}catch(e){t.console&&t.console.error(e)}i[o++]=u,1024==o&&(i.splice(0,1024),o=0)}}var i=[],o=0,a=function(){if(typeof MutationObserver===l)return typeof n!==l&&"function"==typeof n.nextTick?function(){n.nextTick(e)}:typeof r!==l?function(){r(e)}:function(){setTimeout(e,0)};var t=document.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.setAttribute("a",0)}}();return function(e){i.push(e),i.length-o==1&&a()}}();i.prototype={resolve:function(e){if(this.state===s){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"==typeof e))try{var n=!0,r=e.then;if("function"==typeof r)return void r.call(e,function(e){n&&(n=!1,t.resolve(e))},function(e){n&&(n=!1,t.reject(e))})}catch(r){return void(n&&this.reject(r))}this.state=c,this.v=e,t.c&&f(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(this.state===s){var n=this;this.state="rejected",this.v=e;var r=this.c;f(r?function(){for(var t=0,n=r.length;t<n;t++)a(r[t],e)}:function(){n.handled||!i.suppressUncaughtRejectionError&&t.console&&i.warn("You upset Zousan. Please catch rejections: ",e,e?e.stack:null)})}},then:function(e,t){var n=new i,r={y:e,n:t,p:n};if(this.state===s)this.c?this.c.push(r):this.c=[r];else{var u=this.state,l=this.v;this.handled=!0,f(function(){u===c?o(r,l):a(r,l)})}return n},catch:function(e){return this.then(null,e)},finally:function(e){return this.then(e,e)},timeout:function(e,t){t=t||"Timeout";var n=this;return new i(function(r,i){setTimeout(function(){i(Error(t))},e),n.then(function(e){r(e)},function(e){i(e)})})}},i.resolve=function(e){var t=new i;return t.resolve(e),t},i.reject=function(e){var t=new i;return t.c=[],t.reject(e),t},i.all=function(e){for(var t=[],n=0,r=new i,o=0;o<e.length;o++)!function(o,a){o&&"function"==typeof o.then||(o=i.resolve(o)),o.then(function(i){t[a]=i,++n==e.length&&r.resolve(t)},function(e){r.reject(e)})}(e[o],o);return e.length||r.resolve(t),r},i.warn=console.warn,typeof e!=l&&e.exports&&(e.exports=i),t.define&&t.define.amd&&t.define([],function(){return i}),(t.Zousan=i).soon=f}(void 0!==t?t:this)}).call(t,n(18),n(149),n(374).setImmediate)},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(375),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(18))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[u]=r,s(u),u++}function i(e){delete c[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(l)setTimeout(a,0,e);else{var t=c[e];if(t){l=!0;try{o(t)}finally{i(e),l=!1}}}}if(!e.setImmediate){var s,u=1,c={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;s=function(t){var n=f.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(a,0,e)}}(),d.setImmediate=r,d.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(18),n(149))},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)o.call(n,l)&&(u[l]=n[l]);if(i){s=i(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){var r;r=n(378),e.exports=function(){function e(){}return e.DEFAULT_CONTENT_TYPE="application/x-www-form-urlencoded; charset=UTF-8",e.prototype.send=function(e){var t;return null==e&&(e={}),t={method:"GET",data:null,headers:{},async:!0,username:null,password:null,withCredentials:!1},e=Object.assign({},t,e),new Promise(function(t){return function(n,r){var i,o,a,s,u;if(!XMLHttpRequest)return void t._handleError("browser",r,null,"browser doesn't support XMLHttpRequest");if("string"!=typeof e.url||0===e.url.length)return void t._handleError("url",r,null,"URL is a required parameter");t._xhr=u=new XMLHttpRequest,u.onload=function(){var e;t._detachWindowUnload();try{e=t._getResponseText()}catch(e){return void t._handleError("parse",r,null,"invalid JSON response")}return n({url:t._getResponseUrl(),status:u.status,statusText:u.statusText,responseText:e,headers:t._getHeaders(),xhr:u})},u.onerror=function(){return t._handleError("error",r)},u.ontimeout=function(){return t._handleError("timeout",r)},u.onabort=function(){return t._handleError("abort",r)},t._attachWindowUnload(),u.open(e.method,e.url,e.async,e.username,e.password),e.withCredentials&&(u.withCredentials=!0),null==e.data||e.headers["Content-Type"]||(e.headers["Content-Type"]=t.constructor.DEFAULT_CONTENT_TYPE),a=e.headers;for(o in a)s=a[o],u.setRequestHeader(o,s);try{return u.send(e.data)}catch(e){return i=e,t._handleError("send",r,null,i.toString())}}}(this))},e.prototype.getXHR=function(){return this._xhr},e.prototype._attachWindowUnload=function(){if(this._unloadHandler=this._handleWindowUnload.bind(this),window.attachEvent)return window.attachEvent("onunload",this._unloadHandler)},e.prototype._detachWindowUnload=function(){if(window.detachEvent)return window.detachEvent("onunload",this._unloadHandler)},e.prototype._getHeaders=function(){return r(this._xhr.getAllResponseHeaders())},e.prototype._getResponseText=function(){var e;switch(e="string"==typeof this._xhr.responseText?this._xhr.responseText:"",(this._xhr.getResponseHeader("Content-Type")||"").split(";")[0]){case"application/json":case"text/javascript":e=JSON.parse(e+"")}return e},e.prototype._getResponseUrl=function(){return null!=this._xhr.responseURL?this._xhr.responseURL:/^X-Request-URL:/m.test(this._xhr.getAllResponseHeaders())?this._xhr.getResponseHeader("X-Request-URL"):""},e.prototype._handleError=function(e,t,n,r){return this._detachWindowUnload(),t({reason:e,status:n||this._xhr.status,statusText:r||this._xhr.statusText,xhr:this._xhr})},e.prototype._handleWindowUnload=function(){return this._xhr.abort()},e}()},function(e,t){var n=function(e){return e.replace(/^\s+|\s+$/g,"")},r=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};for(var t={},i=n(e).split("\n"),o=0;o<i.length;o++){var a=i[o],s=a.indexOf(":"),u=n(a.slice(0,s)).toLowerCase(),c=n(a.slice(s+1));void 0===t[u]?t[u]=c:r(t[u])?t[u].push(c):t[u]=[t[u],c]}return t}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){return"application/dash+xml"===t?new l.a.DashNetworkStatistics(e):new f.a.HlsNetworkStatistics(e)}var l=n(380),f=n(381),d=n(71),h=n(103),p=function(){function e(t){i(this,e),this.player=t,this.networkListenerList=new h.a.ListenerList}return a(e,[{key:"setSource",value:function(e){var t=this;if(this._resetImp(),e.type)this.impl=c(this.player,e.type),this._setupImpListeners();else{var n=new d.a.SourceBuilder,r=e.src?e.src:e,i=this;n.build(r).then(function(e){i.player&&(t.impl=c(t.player,e.type),t._setupImpListeners())})}}},{key:"getAdaptiveStreaming",value:function(){return this.impl?this.impl.getAdaptiveStreaming():null}},{key:"getContentServer",value:function(){return this.impl?this.impl.getContentServer():null}},{key:"getNetworkUsage",value:function(){return this.impl?this.impl.getNetworkUsage():null}},{key:"setNetworkListener",value:function(e){this.listener=e,this.impl&&this.impl.setListener(e)}},{key:"addNetworkListener",value:function(e){this.impl&&this.impl.addListener(e),this.networkListenerList.add(e)}},{key:"removeNetworkListener",value:function(e){this.impl&&this.impl.removeListener(e),this.networkListenerList.remove(e)}},{key:"dispose",value:function(){this._resetImp(),this.networkListenerList.clear(),this.networkListenerList=void 0,this.player=void 0}},{key:"_resetImp",value:function(){this.impl&&(this.impl.dispose(),this.impl=null)}},{key:"_setupImpListeners",value:function(){this.impl.setListener(this.listener);for(var e=0;e<this.networkListenerList.length();e++)this.impl.addListener(this.networkListenerList.get(e))}}])}();t.a={NetworkStatistics:p}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=c(e,"string");return"symbol"==r(t)?t:t+""}function c(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(e,t,n){return t=v(t),f(e,h()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function f(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(e,t,n,r){var i=g(v(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=y(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},g.apply(null,arguments)}function y(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var w=n(51),S=n(11),_=function(e){function t(e){var n;return o(this,t),n=l(this,t,[e]),n.setupShakaPlayerListenersHandle=n._setupShakaPlayerListeners.bind(n),n.videojs.on("loadstart",n.setupShakaPlayerListenersHandle),n.requestFilterHandle=n._shakaRequestFilter.bind(n),n.responseFilterHandle=n._shakaResponseFilter.bind(n),n.tracksChangedHandle=n._onTracksChangedEvent.bind(n),n.adaptationHandle=n._onAdaptationEvent.bind(n),n.variantHandle=n._onVariantChangedEvent.bind(n),n.errorHandle=n._onErrorEvent.bind(n),n}return m(t,e),s(t,[{key:"dispose",value:function(){this._clearShakaPlayerListeners(),this.videojs.off("loadstart",this.setupShakaPlayerListenersHandle),this.listener=void 0,p(t,"dispose",this,3)([])}},{key:"getAdaptiveStreaming",value:function(){var e=this._getShakaPlayerInstance();if(!e||0===e.getVariantTracks().length)return{selectedBitrate:NaN,availableBitrates:[]};for(var t=[],n=NaN,r=e.getVariantTracks(),i=0;i<r.length;i++){var o=r[i].videoBandwidth+r[i].audioBandwidth;-1===t.indexOf(o)&&t.push(o),r[i].active&&(n=o)}return t.sort(function(e,t){return e-t}),{selectedBitrate:n,availableBitrates:t}}},{key:"getContentServer",value:function(){return{url:this.videojs.currentSrc(),finalUrl:"",finalIpAddress:""}}},{key:"getNetworkUsage",value:function(){var e=this._getShakaPlayerInstance();if(!e)return{bytesDownloaded:NaN,downloadBitrate:NaN,downloadBitrateAverage:NaN};for(var t=NaN,n=e.getStats(),r=n.estimatedBandwidth,i=n.bytesDownloaded,o=n.switchHistory,a=o.length-1;a>=0;a--)if("variant"===o[a].type){t=this._getBandWidthById(e,o[a].id);break}return{bytesDownloaded:i,downloadBitrate:t,downloadBitrateAverage:r}}},{key:"_getBandWidthById",value:function(e,t){for(var n=NaN,r=e.getVariantTracks(),i=0;i<r.length;i++)if(r[i].id===t){n=r[i].videoBandwidth+r[i].audioBandwidth;break}return n}},{key:"_setupShakaPlayerListeners",value:function(){this._clearShakaPlayerListeners();var e=this._getShakaPlayerInstance();e&&(e.addEventListener("trackschanged",this.tracksChangedHandle),e.addEventListener("adaptation",this.adaptationHandle),e.addEventListener("variantchanged",this.variantHandle),e.addEventListener("error",this.errorHandle),e.getNetworkingEngine().registerRequestFilter(this.requestFilterHandle),e.getNetworkingEngine().registerResponseFilter(this.responseFilterHandle))}},{key:"_clearShakaPlayerListeners",value:function(){var e=this._getShakaPlayerInstance();e&&(e.removeEventListener("trackschanged",this.tracksChangedHandle),e.removeEventListener("adaptation",this.adaptationHandle),e.removeEventListener("variantchanged",this.variantHandle),e.removeEventListener("error",this.errorHandle),e.getNetworkingEngine().unregisterRequestFilter(this.requestFilterHandle),e.getNetworkingEngine().unregisterResponseFilter(this.responseFilterHandle))}},{key:"_shakaRequestFilter",value:function(e,t){var n=t.uris;if(Array.isArray(n)&&1===n.length&&(n=n[0]),e===shaka.net.NetworkingEngine.RequestType.MANIFEST){var r=JSON.stringify(i({},S.e.url,n));this._sendtoEventTimeline(S.g.manifestDl,S.b.networkStart,r)}else if(e===shaka.net.NetworkingEngine.RequestType.SEGMENT){var o=JSON.stringify(i({},S.e.url,n));this._sendtoEventTimeline(S.g.segmentDl,S.b.networkStart,o)}}},{key:"_shakaResponseFilter",value:function(e,t){if(e===shaka.net.NetworkingEngine.RequestType.MANIFEST){var n=t.uri,r=JSON.stringify(i({},S.e.url,n));this._sendtoEventTimeline(S.g.manifestDl,S.b.networkComplete,r)}else if(e===shaka.net.NetworkingEngine.RequestType.SEGMENT){var o=JSON.stringify(i({},S.e.url,t.uri));this._sendtoEventTimeline(S.g.segmentDl,S.b.networkComplete,o)}}},{key:"_onTracksChangedEvent",value:function(){var e=this.getAdaptiveStreaming();this.listener&&this.listener.availableBitratesChanged&&this.listener.availableBitratesChanged(e.availableBitrates);for(var t=0;t<this.eventListeners.length();t++){var n=this.eventListeners.get(t);n&&n.availableBitratesChanged&&n.availableBitratesChanged(e.availableBitrates)}}},{key:"_onAdaptationEvent",value:function(){this._fireSelectedBitrateChangedEvent()}},{key:"_onVariantChangedEvent",value:function(){this._fireSelectedBitrateChangedEvent()}},{key:"_fireSelectedBitrateChangedEvent",value:function(){var e=this.getAdaptiveStreaming();this.listener&&this.listener.selectedBitrateChanged&&this.listener.selectedBitrateChanged(e.selectedBitrate);for(var t=0;t<this.eventListeners.length();t++){var n=this.eventListeners.get(t);n&&n.selectedBitrateChanged&&n.selectedBitrateChanged(e.selectedBitrate)}}},{key:"_onErrorEvent",value:function(e){var t=NaN,n="";if(1001===e.detail.code){t=e.detail.data[1],n=e.detail.data[2]}else if(1002===e.detail.code){if(t=e.detail.code,n=e.detail.data[1],e.detail.data[2]===shaka.net.NetworkingEngine.RequestType.MANIFEST){var r=JSON.stringify(i({},S.e.url,e.detail.data[0]));this._sendtoEventTimeline(S.g.manifestDl,S.b.networkError,r)}else if(e.detail.data[2]===shaka.net.NetworkingEngine.RequestType.SEGMENT){var o=JSON.stringify(i({},S.e.url,e.detail.data[0]));this._sendtoEventTimeline(S.g.segmentDl,S.b.networkError,o)}}this.listener&&this.listener.errorChanged&&this.listener.errorChanged(t,n,e.detail);for(var a=0;a<this.eventListeners.length();a++){var s=this.eventListeners.get(a);s&&s.errorChanged&&s.errorChanged(t,n,e.detail)}}},{key:"_sendtoEventTimeline",value:function(e,t,n){OTV.eventTimeline.addToTimeline(e,t,n)}}])}(w.a.Statistics);t.a={DashNetworkStatistics:_}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b=n(51),w=function(e){function t(e){return i(this,t),c(this,t,[e])}return v(t,e),a(t,[{key:"dispose",value:function(){this.listener=void 0,h(t,"dispose",this,3)([])}},{key:"getAdaptiveStreaming",value:function(){return{selectedBitrate:0,availableBitrates:[]}}},{key:"getContentServer",value:function(){return{url:this.videojs.currentSrc()}}},{key:"getNetworkUsage",value:function(){return{bytesDownloaded:0,downloadBitrate:0,downloadBitrateAverage:0}}}])}(b.a.Statistics);t.a={HlsNetworkStatistics:w}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){return"application/dash+xml"===t?new l.a.DashPlaybackStatistics(e):new f.a.HlsPlaybackStatistics(e)}var l=n(383),f=n(384),d=n(71),h=n(103),p=function(){function e(t){i(this,e),this.player=t,this.playbackListenerList=new h.a.ListenerList}return a(e,[{key:"setSource",value:function(e){var t=this;if(this._resetImp(),e.type)this.impl=c(this.player,e.type),this._setupImpListeners(this.listener);else{var n=new d.a.SourceBuilder,r=e.src?e.src:e,i=this;n.build(r).then(function(e){i.player&&(t.impl=c(t.player,e.type),t._setupImpListeners(t.listener))})}}},{key:"getBufferedDuration",value:function(){return this.impl?this.impl.getBufferedDuration():null}},{key:"getStreamBitrate",value:function(){return this.impl?this.impl.getStreamBitrate():null}},{key:"getCodecs",value:function(){return this.impl?this.impl.getCodecs():""}},{key:"getAudioChannelConfig",value:function(){return this.impl?this.impl.getAudioChannelConfig():""}},{key:"getResolution",value:function(){return this.impl?this.impl.getResolution():{width:0,height:0}}},{key:"setPlaybackListener",value:function(e){this.listener=e,this.impl&&this.impl.setListener(e)}},{key:"addPlaybackListener",value:function(e){this.impl&&this.impl.addListener(e),this.playbackListenerList.add(e)}},{key:"removePlaybackListener",value:function(e){this.impl&&this.impl.removeListener(e),this.playbackListenerList.remove(e)}},{key:"dispose",value:function(){this._resetImp(),this.playbackListenerList.clear(),this.playbackListenerList=void 0,this.listener=void 0}},{key:"_resetImp",value:function(){this.impl&&(this.impl.dispose(),this.impl=null)}},{key:"_setupImpListeners",value:function(){this.impl.setListener(this.listener);for(var e=0;e<this.playbackListenerList.length();e++)this.impl.addListener(this.playbackListenerList.get(e))}}])}();t.a={PlaybackStatistics:p}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=f(e,"string");return"symbol"==r(t)?t:t+""}function f(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t,n){return t=b(t),h(e,g()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function h(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(e,t,n,r){var i=v(b(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=m(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},v.apply(null,arguments)}function m(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var _=n(51),T=function(e){function t(e){var n;return s(this,t),n=d(this,t,[e]),n.previousBitrate=0,n.videoWidth=0,n.videoHeight=0,n.addShakaPlayerListenerHandle=n._addShakaPlayerListener.bind(n),n.onStreamBitrateChangedHandle=n._onStreamBitrateChanged.bind(n),n.videojs.on("loadstart",n.addShakaPlayerListenerHandle),n}return w(t,e),c(t,[{key:"dispose",value:function(){this._removeShakaPlayerListener(),this.videojs.off("loadstart",this.addShakaPlayerListenerHandle),this.listener=void 0,y(t,"dispose",this,3)([])}},{key:"_removeShakaPlayerListener",value:function(){var e=this._getShakaPlayerInstance();e&&(e.removeEventListener("adaptation",this.onStreamBitrateChangedHandle),e.removeEventListener("variantchanged",this.onStreamBitrateChangedHandle))}},{key:"getResolution",value:function(){var e=this._getShakaPlayerInstance();if(!e)return{width:0,height:0};var t=e.getStats();return{width:t.width,height:t.height}}},{key:"getBufferedDuration",value:function(){var e=this._getShakaPlayerInstance();if(!e)return 0;var t=e.getBufferedInfo();if(!t.total||!t.total.length)return 0;var n=this.videojs.currentTime();return t.total[0].end-n}},{key:"getCodecs",value:function(){var e="",t=this._getShakaPlayerInstance();if(t){var n,r=t.getVariantTracks(),o=i(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.active){e=a.codecs;break}}}catch(e){o.e(e)}finally{o.f()}}return e}},{key:"getAudioChannelConfig",value:function(){var e="",t=this._getShakaPlayerInstance();if(t){var n,r=t.getVariantTracks(),o=i(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.active){e=a.audioChannelConfig;break}}}catch(e){o.e(e)}finally{o.f()}}return e}},{key:"getStreamBitrate",value:function(){var e=0,t=this._getShakaPlayerInstance();if(t){var n,r=t.getVariantTracks(),o=i(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.active){isNaN(a.videoBandwidth)||isNaN(a.audioBandwidth)||(e=a.videoBandwidth+a.audioBandwidth);break}}}catch(e){o.e(e)}finally{o.f()}}return e}},{key:"_addShakaPlayerListener",value:function(){this._removeShakaPlayerListener();var e=this._getShakaPlayerInstance();e&&(e.addEventListener("adaptation",this.onStreamBitrateChangedHandle),e.addEventListener("variantchanged",this.onStreamBitrateChangedHandle))}},{key:"_onStreamBitrateChanged",value:function(){this._checkResolutionChanged();var e=this.getStreamBitrate();this.previousBitrate!==e&&(this.previousBitrate=e,this._fireStreamBitrateChanged(e))}},{key:"_checkResolutionChanged",value:function(){var e=this.getResolution();e.width===this.videoWidth&&e.height===this.videoHeight||(this._fireResolutionChanged(e.width,e.height),this.videoWidth=e.width,this.videoHeight=e.height)}},{key:"_fireResolutionChanged",value:function(e,t){this.listener&&this.listener.resolutionChanged&&this.listener.resolutionChanged(e,t);for(var n=0;n<this.eventListeners.length();n++){var r=this.eventListeners.get(n);r&&r.resolutionChanged&&r.resolutionChanged(e,t)}}},{key:"_fireStreamBitrateChanged",value:function(e){this.listener&&this.listener.streamBitrateChanged&&this.listener.streamBitrateChanged(e);for(var t=0;t<this.eventListeners.length();t++){var n=this.eventListeners.get(t);n&&n.streamBitrateChanged&&n.streamBitrateChanged(e)}}}])}(_.a.Statistics);t.a={DashPlaybackStatistics:T}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b=n(51),w=function(e){function t(e){return i(this,t),c(this,t,[e])}return v(t,e),a(t,[{key:"dispose",value:function(){this.listener=void 0,h(t,"dispose",this,3)([])}},{key:"getResolution",value:function(){return{width:this.videojs.videoWidth(),height:this.videojs.videoHeight()}}},{key:"getBufferedDuration",value:function(){return 0}},{key:"getStreamBitrate",value:function(){return NaN}},{key:"getCodecs",value:function(){return""}},{key:"getAudioChannelConfig",value:function(){return""}}])}(b.a.Statistics);t.a={HlsPlaybackStatistics:w}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){return"application/dash+xml"===t?new l.a.DashRenderingStatistics(e):new f.a.HlsRenderingStatistics(e)}var l=n(386),f=n(387),d=n(71),h=function(){function e(t){i(this,e),this.player=t}return a(e,[{key:"setSource",value:function(e){var t=this;if(this._resetImp(),e.type)this.impl=c(this.player,e.type);else{var n=new d.a.SourceBuilder,r=e.src?e.src:e,i=this;n.build(r).then(function(e){i.player&&(t.impl=c(t.player,e.type))})}}},{key:"getFramesPerSecondNominal",value:function(){return this.impl?this.impl.getFramesPerSecondNominal():null}},{key:"getFramesPerSecond",value:function(){return this.impl?this.impl.getFramesPerSecond():null}},{key:"getFrameDrops",value:function(){return this.impl?this.impl.getFrameDrops():null}},{key:"getFrameDropsPerSecond",value:function(){return this.impl?this.impl.getFrameDropsPerSecond():null}},{key:"dispose",value:function(){this._resetImp(),this.player=void 0}},{key:"_resetImp",value:function(){this.impl&&(this.impl.dispose(),this.impl=null)}}])}();t.a={RenderingStatistics:h}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b=n(51),w=1e3,S=function(e){function t(e){var n;return i(this,t),n=c(this,t,[e]),n.intervalID=setInterval(n._intervalTask.bind(n),w),n.lastFrameDropCount=0,n.lastDecodedFramesCount=0,n.frameDropsPerSecond=0,n.framesPerSecond=0,n}return v(t,e),a(t,[{key:"dispose",value:function(){clearInterval(this.intervalID),h(t,"dispose",this,3)([])}},{key:"getFramesPerSecondNominal",value:function(){var e=this._getShakaPlayerInstance(),t=0;if(e)for(var n=e.getVariantTracks(),r=0;r<n.length;r++)if(n[r].active){isNaN(n[r].frameRate)||(t=n[r].frameRate);break}return t}},{key:"getFramesPerSecond",value:function(){return this.framesPerSecond}},{key:"getFrameDrops",value:function(){var e=this._getShakaPlayerInstance(),t=0;if(e){t=e.getStats().droppedFrames}return t}},{key:"getFrameDropsPerSecond",value:function(){return this.frameDropsPerSecond}},{key:"_intervalTask",value:function(){var e=this._getShakaPlayerInstance();if(e){var t=e.getStats(),n=t.droppedFrames;this.frameDropsPerSecond=n-this.lastFrameDropCount,this.lastFrameDropCount=n;var r=t.decodedFrames;this.framesPerSecond=r-this.lastDecodedFramesCount-this.frameDropsPerSecond,this.lastDecodedFramesCount=r}}}])}(b.a.Statistics);t.a={DashRenderingStatistics:S}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=y(t),l(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e,t,n,r){var i=p(y(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(null,arguments)}function g(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b=n(51),w=function(e){function t(e){return i(this,t),c(this,t,[e])}return v(t,e),a(t,[{key:"dispose",value:function(){h(t,"dispose",this,3)([])}},{key:"getFramesPerSecondNominal",value:function(){return 0}},{key:"getFramesPerSecond",value:function(){return 0}},{key:"getFrameDrops",value:function(){return 0}},{key:"getFrameDropsPerSecond",value:function(){return 0}}])}(b.a.Statistics);t.a={HlsRenderingStatistics:w}},function(e,t,n){"use strict";function r(e,t,n){if(o())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var a=new(e.bind.apply(e,r));return n&&i(a,n.prototype),a}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o=function(){return!!e})()}function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=f(e,"string");return"symbol"==a(t)?t:t+""}function f(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var d=n(56),h=n.n(d),p={},g=function(){function e(){s(this,e)}return c(e,null,[{key:"register",value:function(e,t){if("string"!=typeof e)throw new Error('Illegal component name, "'.concat(e,'", must be a string, was ').concat(a(e),"."));if(this.componentExists(e)&&h.a.log.warn('A component named "'.concat(e,'" already exists. You may want to avoid re-registering components!')),"function"!=typeof t)throw new Error('Illegal plugin for "'.concat(e,'", must be a function, was ').concat(a(t),"."));p[e]=t}},{key:"componentExists",value:function(e){return void 0!==p[e]}},{key:"deregister",value:function(e){this.componentExists(e)&&delete p[e]}},{key:"clearToolkit",value:function(e){for(var t in p)p.hasOwnProperty(t)&&this.clearComponent(e,t)}},{key:"clearComponent",value:function(e,t){e.hasOwnProperty(t)&&delete e[t]}},{key:"initialiseToolkit",value:function(e){for(var t in p)p.hasOwnProperty(t)&&this._addComponent(e,t)}},{key:"_addComponent",value:function(e,t){if(e.hasOwnProperty(t))throw new Error('Illegal components name, "'.concat(t,'", cannot share a name with an existing otvtoolkit method!'));e[t]=function(){for(var n=p[t],i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=r(n,[e].concat(0===o.length?{}:o));return e[t]=function(){return s},s}}}])}();t.a=g},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(){}var l=n(50),f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;i(this,e),this.player=t,this._log=n,this.selectedBandwidth=1/0,this.selectedResolution=[1/0,1/0],this.isInvalidMaxHeightSet=!1,this.isPendingSetMaxResolution=!1,this.userMaxHeight=1/0,this.userMaxWidth=1/0,this.setListenerOnShakaReady=!1,this.shakaOnStateChangeHandler=this._shakaOnStateChangeListener.bind(this),this.resetMaxHeightHandler=this._resetToUserMaxHeight.bind(this)}return a(e,[{key:"getMaxBandwidth",value:function(){return this.selectedBandwidth}},{key:"getMaxResolution",value:function(){return this.selectedResolution}},{key:"setMaxBandwidth",value:function(e){this.selectedBandwidth=e,this.player.otvtoolkit().techConfig.configure(l.b,"abr.restrictions.maxBandwidth",e),this.player.trigger("otvmaxbandwidthchange")}},{key:"setMaxResolution",value:function(e,t){if(this.selectedResolution=[Number(e),Number(t)],!1===this.isInvalidMaxHeightSet){var n={abr:{restrictions:{maxWidth:Number(e),maxHeight:Number(t)}}};this.player.otvtoolkit().techConfig.configure(l.b,n),this.isPendingSetMaxResolution=!1,this.player.trigger("otvmaxresolutionchange")}else this.isPendingSetMaxResolution=!0}},{key:"_resetToUserMaxHeight",value:function(){var e=this.player.otvtoolkit().getConfiguration().abr.restrictions.maxHeight;if(this._log("_resetToUserMaxHeight(): userMaxHeight:"+this.userMaxHeight+" currentMaxHeight:"+e),!0===this.isInvalidMaxHeightSet)if(this.isInvalidMaxHeightSet=!1,this.isPendingSetMaxResolution&&this.selectedResolution)this.setMaxResolution(this.selectedResolution[0],this.selectedResolution[1]);else if(e!==this.userMaxHeight){var t={abr:{restrictions:{maxWidth:Number(this.userMaxWidth),maxHeight:Number(this.userMaxHeight)}}};this.player.otvtoolkit().techConfig.configure(l.b,t)}}},{key:"_shakaOnStateChangeListener",value:function(e){if("load"===e.state&&!1===this.isInvalidMaxHeightSet){this.userMaxWidth=this.player.otvtoolkit().getConfiguration().abr.restrictions.maxWidth,this.userMaxHeight=this.player.otvtoolkit().getConfiguration().abr.restrictions.maxHeight;var t={abr:{restrictions:{maxWidth:Number(this.userMaxWidth),maxHeight:Number(1)}}};this.player.otvtoolkit().techConfig.configure(l.b,t),this.player.off("playing",this.resetMaxHeightHandler),this.player.one("playing",this.resetMaxHeightHandler),this.isInvalidMaxHeightSet=!0,this.isPendingSetMaxResolution=!1,this.player.tech_.shaka_.removeEventListener("onstatechange",this.shakaOnStateChangeHandler)}}},{key:"setShakaPlayToStartAtLowestBitrate",value:function(){this.player.tech_&&this.player.tech_.shaka_&&(this.player.tech_.shaka_.addEventListener("onstatechange",this.shakaOnStateChangeHandler),this.setListenerOnShakaReady=!0)}},{key:"resetShakaPlayToStartAtLowestBitrate",value:function(){this.player.tech_&&this.player.tech_.shaka_&&this.player.tech_.shaka_.removeEventListener("onstatechange",this.shakaOnStateChangeHandler),this.setListenerOnShakaReady=!1}},{key:"ready",value:function(){this.setListenerOnShakaReady&&this.setShakaPlayToStartAtLowestBitrate()}},{key:"dispose",value:function(){}}])}();t.a=f},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){return d(e)||f(e,t)||p(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function d(e){if(Array.isArray(e))return e}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n,r){return new Promise(function(i){var o=[{initDataTypes:U}];o[0][t]=n,void 0!==navigator.requestMediaKeySystemAccess?navigator.requestMediaKeySystemAccess(e,o).then(function(){r&&r(),i(!0)}).catch(function(){i(!1)}):i(!1)})}function v(e,t,n,r){var i=e.find(function(e){return e.name===t&&e.contentType===n});if(i)i.securityLevel=Math.max(i.securityLevel,r);else{var o={name:t,contentType:n,securityLevel:r};e.push(o)}}function m(e){return e.reduce(function(e,t){return e.concat(t)},[])}function b(e,t){return new Promise(function(n){var r,i=e+"Capabilities",o=[],a=[],s=h(B);try{for(s.s();!(r=s.n()).done;){var u=c(r.value,2),l=u[0],f=u[1],d=[{contentType:t,robustness:l}],p=v.bind(null,a,I,t,f),g=y(I,i,d,p);o.push(g)}}catch(e){s.e(e)}finally{s.f()}Promise.all(o).then(function(){n(a)})})}function w(e,t){return new Promise(function(n){var r,i=e+"Capabilities",o=[],a=[],s=[{contentType:t}],u=h(F);try{for(u.s();!(r=u.n()).done;){var l=c(r.value,2),f=l[0],d=l[1],p=j+f,g=v.bind(null,a,j,t,d),m=y(p,i,s,g);o.push(m)}}catch(e){u.e(e)}finally{u.f()}Promise.all(o).then(function(){n(a)})})}function S(){return new Promise(function(e){var t=[];E.a.isSafari()&&t.push({name:M,contentType:"",securityLevel:C}),e(t)})}function _(e,t){return new Promise(function(n){var r=e+"Capabilities",i=[{contentType:t}],o=[],a=v.bind(null,o,O,t,P);y(O,r,i,a).then(function(){n(o)})})}function T(e,t){return new Promise(function(n){var r=e+"Capabilities",i=[{contentType:t}],o=[],a=v.bind(null,o,R,t,P);y(R,r,i,a).then(function(){n(o)})})}function k(){}n.d(t,"a",function(){return H});var E=n(30),A=n(150),x=n(391),C=0,P=3,I="com.widevine.alpha",j="com.microsoft.playready",M="com.apple.fps.1_0",O="com.tvkey.drm",R="com.nagra.prm",D='video/mp4;codecs="avc1.640015"',L='video/mp4;codecs="avc1.640015"',N='video/mp4;codecs="avc1.640028"',U=["keyids","cenc"],B=new Map([["SW_SECURE_CRYPTO",1],["HW_SECURE_CRYPTO",2],["HW_SECURE_DECODE",P]]),F=new Map([["",1],[".hardware",P]]),H=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;i(this,e),this.videojsPlayer=t,this.log=r,this.widevinePromise=b("video",L),this.playreadyPromise=w("video",D),this.fairplayPromise=S(),this.tvkeyPromise=_("video",N),this.nagraPRMPromise=T("video",N),this.promises=[this.widevinePromise,this.playreadyPromise,this.fairplayPromise,this.tvkeyPromise,this.nagraPRMPromise],this.getDrmInfo().then(function(e){if(n.log(JSON.stringify(e)),n.getPreferredDrm())n.log("Preferred DRM set to customer choice: "+n.getPreferredDrm());else if(E.a.isSmartTV())n.setPreferredDrm(I),n.log("For smartTV preferred DRM set to "+I);else if(0===e.length)n.setPreferredDrm(I),n.log("DRM security unknown, setting preferred to: "+I);else{var t=e.reduce(function(e,t){return Math.max(e,t.securityLevel)},0),r=e.filter(function(e){return e.securityLevel===t}),i=r.find(function(e){return e.name===M})||r.find(function(e){return e.name===I})||r[0];n.setPreferredDrm(i.name),n.log("Preferred DRM set to most secure: "+i.name)}})}return a(e,[{key:"getDrmInfo",value:function(e,t,n){var r=this;return e===I?t&&n?b(t,n):this.widevinePromise:e===j?t&&n?w(t,n):this.playreadyPromise:e===M?this.fairplayPromise:e===O?t&&n?_(t,n):this.tvkeyPromise:e===R?t&&n?T(t,n):this.nagraPRMPromise:e?Promise.resolve([]):new Promise(function(e){Promise.all(r.promises).then(function(t){return e(m(t))})})}},{key:"setPreferredDrm",value:function(e){A.a.setPreference(e)}},{key:"getPreferredDrm",value:function(){return A.a.getPreference()}},{key:"dispose",value:function(){this.videojsPlayer=null,this.log=null}},{key:"getCurrentSelectedDrm",value:function(){if(E.a.isSafari())return M;var e;return this.videojsPlayer.tech_&&this.videojsPlayer.tech_.shaka_&&(e=this.videojsPlayer.tech_.shaka_.keySystem()),e||this.getPreferredDrm()}},{key:"activateTVKey",value:function(e){var t=this;this.getDrmInfo(O).then(function(n){if(0===n.length)t.log.warn("The device can not support tvkey in HBBTV.");else try{new x.a(e,t.log).processActivation()}catch(e){t.log.error("Got exception: "+e.message)}})}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c=function(){function e(t,n){i(this,e),this.operatorUUID=t.tvkeyOperatorUUID,this.serverURL=t.licenceServer+"/"+t.tenantId+"/tkap/v1/tvkey/activateDevice",this.log=n,this.oipfDrmAgent=this._createOipfDrmAgent()}return a(e,[{key:"_createOipfDrmAgent",value:function(){try{return window.oipfObjectFactory.createDrmAgentObject()}catch(e){return this.log.error("oipfDrmAgent object could not be created. error message: "+e.message),null}}},{key:"processActivation",value:function(){var e=this;this.checkActivationStatus().then(function(t){t?e.log("tvkey has been activated on this device."):(e.log("Start to activate tvkey on this device."),e.activateDevice().then(function(t){t?e.log("Activate tvkey successfully."):e.log.error("Activate tvkey failed.")}))}).catch(function(){e.log.error("check device activation failure.")})}},{key:"checkActivationStatus",value:function(){var e=this,t={type:"RequestLicenseStatus",OperatorUUID:this.operatorUUID};if(null===this.oipfDrmAgent)throw new Error("The OIPF Drm Agent is invalid.");return this._sendTvkeyMsg(t,"ProvideLicenseStatus").then(function(t){return new Promise(function(n,r){try{var i=JSON.parse(t);n(new Date(i.LicenseStatuses.ActivationRenewalDate).getTime()-6e4<Date.now()?!1:!0)}catch(t){r(t),e.log.error("Got error: "+t.message)}})}).catch(function(t){return e.log.error("get activation status failure: "+t),Promise.resolve(!1)})}},{key:"activateDevice",value:function(){var e=this;if(null===this.oipfDrmAgent)throw new Error("The OIPF Drm Agent is invalid.");return this._getActivationResquest().then(function(t){return e._postActivationPayload(t)}).then(function(t){return e._provideActivationResponse(t)}).catch(function(t){return e.log.error("Activation failure: "+t),Promise.resolve(!1)})}},{key:"_getActivationResquest",value:function(){var e={type:"RequestActivationRequestMessage",OperatorUUID:this.operatorUUID};return this._sendTvkeyMsg(e,"ProvideActivationRequestMessage").then(function(e){var t=JSON.parse(e);return Promise.resolve(JSON.stringify(t.Message))})}},{key:"_provideActivationResponse",value:function(e){var t=JSON.parse(e),n={type:"ProvideActivationResponseMessage",OperatorUUID:this.operatorUUID,Message:t.ActivationResponseMessage};return this._sendTvkeyMsg(n,"ActivationResponseParseResult").then(function(){return Promise.resolve(!0)})}},{key:"_sendTvkeyMsg",value:function(e,t){var n,r=this;return new Promise(function(i,o){function a(e){for(var t=e.toString(),n="",r=0;r<t.length&&"00"!==t.substr(r,u);r+=u)n+=String.fromCharCode(parseInt(t.substr(r,u),s));return n}var s=16,u=2;r.oipfDrmAgent.onDRMMessageResult=function(e,s,u){if(e===n)if(0===u)try{var c=a(s),l=JSON.parse(c);if(l.type===t)if(l.Success){var f=JSON.stringify(l.Result);i(f)}else r.log.error("Get error response: "+JSON.stringify(l.Result)),o(JSON.stringify(l.Result));else"ErrorResponse"===l.type&&(r.log.error("Get error response: "+c),o(c))}catch(e){r.log.error("Parse JSon object failed: "+e.message),o(e)}else r.log.error("Get Drm error code: "+u),o("resultCode: "+u)},n=r.oipfDrmAgent.sendDRMMessage("application/vnd.tvkey.cloud-json",function(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(Number(e.charCodeAt(n)).toString(s));return t.join("")}(JSON.stringify(e)),"urn:dvb:casystemid:19300")})}},{key:"_postActivationPayload",value:function(e){var t="",n=new XMLHttpRequest;if(n.open("POST",this.serverURL,!1),n.setRequestHeader("Accept","application/json"),n.send(e),200===n.status){t=n.responseText;return JSON.parse(t).ErrorCode?Promise.reject(t):Promise.resolve(t)}return Promise.reject(t)}}])}();t.a=c},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return m});var c=n(56),l=(n.n(c),n(393)),f=n.n(l),d="invalidconf",h="".concat("ng","-img"),p=-1,g=1,y=2,v=7,m=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.config=n,n.callbacks||(this.config.callbacks={});var r={tlValidation:this._tlValidationCb.bind(this),image:this._imageCb.bind(this),message:this._messageCb.bind(this),error:this._errorCb.bind(this)},o={callback:r};if("undefined"==typeof jswbwVersion||void 0===jswbwVersion.version)throw this._changeState(d),this._errorCb(p,"Quickmark module not loaded"),new Error("Quickmark module not loaded");if(this.cssClassName="dynamic-size",!n.player)throw this._changeState(d),this._errorCb(v,"no player provided"),new Error("QuickmarkInterface configuration is invalid, no player provided");if(this.player=n.player,!n.tlValidation&&!n.secret)throw this._changeState(d),this._errorCb(v,"Need a secret or a tlValidation"),new Error("QuickmarkInterface configuration is invalid.  Need a secret or a tlValidation");if(o.url=this._getUrl(n.url,n.service,n.tenant),o.token=n.token,o.apikey=n.apikey,o.url&&!n.token)throw this._changeState(d),this._errorCb(g,"Missing token"),new Error("QuickmarkInterface configuration is invalid.  Need token for pull mode");if(n.token&&!o.url){this._changeState(d);var a=n.service?"Missing tenant":"Missing service URL";throw this._errorCb(y,a),new Error("QuickmarkInterface configuration is invalid.  Need URL (or service and tenant) for pull mode")}this.waitingForPlaying=!1,this.player.on(this.player,"loadedmetadata",this._onPlay.bind(this)),this.fullscreenChangeHandler=function(){setTimeout(function(){t.resize()},0)},this.player.on("fullscreenchange",this.fullscreenChangeHandler),this.jswbw=new jswbw2(o),n.toolkit.addEventListener("pipon",function(){t.resize()}),n.toolkit.addEventListener("pipoff",function(){t.resize()}),window.addEventListener("resize",function(){t.resize()})}return a(e,[{key:"_changeState",value:function(e){this.state!==e&&("stopped"===e&&this.jswbw&&this.jswbw.pause(),"started"===e&&this.jswbw&&(this.jswbw.isStarted()?this.jswbw.resume():this.jswbw.start()),this.state=e,this._messageCb("Changing state to "+e))}},{key:"_getUrl",value:function(e,t,n){return e||(t&&n?"".concat(t,"/").concat(n,"/qm/v2/surfaces"):void 0)}},{key:"_onPlay",value:function(){this._log("QuickmarkInterface::_onPlay() loadedmetadata"),this.waitingForPlaying||(this.player.one("playing",this._onPlaying.bind(this)),this.waitingForPlaying=!0)}},{key:"_onPlaying",value:function(){this._log("QuickmarkInterface::_onPlaying() playing"),this.waitingForPlaying=!1,this.resize();var e=this.player.el_.getElementsByTagName("video")[0];e.removeEventListener("resize",this.resize.bind(this)),e.addEventListener("resize",this.resize.bind(this))}},{key:"_imageCb",value:function(e){this._log("A new marker is ready to display"),this.resize(),this.player.trigger("jswbwUpdate");var t=!0,n=document.getElementsByClassName("vjs-control-bar");n&&0!==n.length||(t=!1,n=document.getElementsByClassName("vjs-shaka"));var r=document.getElementById("ng"),i=document.getElementById(h);r?(r.removeChild(i),r.parentNode.removeChild(r)):r=document.createElement("div"),i=document.createElement("div"),i.id=h,i.style.backgroundImage="url('".concat(e,"')"),i.style.width="100%",i.style.height="100%",i.style.backgroundSize="100%",i.style.backgroundRepeat="round",r.id="ng",r.style.pointerEvents="none",r.classList.add("vjs-overlay"),r.classList.add("dynamic-size"),r.classList.add("vjs-overlay-background"),r.appendChild(i);var o=n[0];t||(o=n[0].nextSibling),n[0].parentNode.insertBefore(r,o),this.player.trigger("jswbwStart")}},{key:"_messageCb",value:function(e){this._log("QuickmarkInterface Message received: '"+e+"'"),this.config.callbacks.message&&this.config.callbacks.message(e)}},{key:"_errorCb",value:function(e,t){this._log("QuickmarkInterface Error "+e+" received: '"+t+"'"),this.config.callbacks.error&&this.config.callbacks.error(e,t)}},{key:"_tlValidationCb",value:function(e){if(this.config.tlValidation)return this._log("Calling customer tlvalidation"),this.config.tlValidation(e);if(this.config.secret){var t=this._makeShaObj();t.setHMACKey(this.config.secret,"BYTES"),t.update(e);return t.getHMAC("UINT8ARRAY")}return this._log("QuickmarkInterface tlValidation unable to calculate signature"),new Uint8Array}},{key:"_makeShaObj",value:function(){return new f.a("SHA-1","ARRAYBUFFER")}},{key:"resize",value:function(){var e=this.player.$("video"),t=this.videoDimensions(e),n="\n\t\t.dynamic-size {\n\t\t\theight: ".concat(t.height,";\n\t\t\tleft: ").concat(t.left,";\n\t\t\twidth: ").concat(t.width,";\n\t\t\ttop: ").concat(t.top,";\n\t\t\ttransform: translateY(").concat(t.translateY,");\n\t\t\t}\n\t\t"),r=null;document.getElementById(this.cssClassName)?(r=document.getElementById(this.cssClassName),r.innerHTML=n):(r=document.createElement("style"),r.id=this.cssClassName,r.type="text/css",r.innerHTML=n,document.head.appendChild(r)),this.player.isFullscreen_||0===e.offsetHeight||(this.preFullScreenSize=e.offsetHeight)}},{key:"_pixelPerfectRounding",value:function(e,t){var n=Math.ceil(e);return n===t-1&&(n=t),n}},{key:"videoDimensions",value:function(e){var t=0===e.offsetHeight?this.preFullScreenSize:e.offsetHeight,n={width:e.offsetWidth,height:t,ratio:this.player.videoWidth()/this.player.videoHeight(),elementOffsetWidth:e.offsetWidth,elementOffsetHeight:t,elementRatio:e.offsetWidth/t};n.elementRatio>n.ratio?n.width=this._pixelPerfectRounding(n.height*n.ratio,n.width):n.height=this._pixelPerfectRounding(n.width/n.ratio,n.height);var r=Math.ceil((n.elementOffsetWidth-n.width)/2),i=2*Math.round(n.height/2),o=Math.ceil(n.height/2),a=Math.ceil((n.elementOffsetHeight-n.height)/2),s="".concat(i,"px!important"),u="".concat(r,"px"),c="".concat(n.width,"px!important"),l="-".concat(o,"px");return{height:s,left:u,width:c,top:"".concat(o+a,"px"),translateY:l}}},{key:"getVersion",value:function(){return jswbwVersion.version}},{key:"update",value:function(e,t){return this._log("QuickmarkInterface::update()"),this.jswbw.update(e,t)}},{key:"setApiKey",value:function(e){this.jswbw&&this.jswbw.cnxHandler&&e&&(this._log("QuickmarkInterface: setting apiKey: "+e),this.config.apiKey=e,this.jswbw.cnxHandler.setApiKey(e))}},{key:"setToken",value:function(e){this.jswbw&&e&&(this._log("QuickmarkInterface: setting token: "+e),this.config.token=e,this.jswbw.setToken(e))}},{key:"setTenant",value:function(e){if(this.jswbw&&this.jswbw.cnxHandler&&e&&this.config.service&&!this.config.url){this._log("QuickmarkInterface: setting tenant: "+e),this.config.tenant=e;var t=this._getUrl(null,this.config.service,this.config.tenant);this.jswbw.cnxHandler.setUrl(t)}}},{key:"setURL",value:function(e){this.jswbw&&this.jswbw.cnxHandler&&e&&(this._log("QuickmarkInterface: setting url:"+e),this.config.url=e,this.jswbw.cnxHandler.setUrl(e))}},{key:"setMessageCallback",value:function(e){e&&(this.config.callbacks.message=e)}},{key:"setErrorCallback",value:function(e){e&&(this.config.callbacks.error=e)}},{key:"setTlValidationCallback",value:function(e){e&&(this.config.callbacks.tlValidation=e)}},{key:"setCallbacks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.setMessageCallback(e),this.setErrorCallback(t),this.setTlValidationCallback(n)}},{key:"start",value:function(){this._log("QuickmarkInterface: starting quickmark"),this._changeState("started")}},{key:"stop",value:function(){this._log("QuickmarkInterface: stopping quickmark"),this._changeState("stopped")}},{key:"_log",value:function(e){}}])}()},function(e,t,n){"use strict";var r;!function(i){function o(e,t,n){var r,i,o,a,s,g,y,v,m,b=0,w=[],S=0,_=!1,T=[],k=[],E=!1,A=!1,x=-1;if(n=n||{},r=n.encoding||"UTF8",(m=n.numRounds||1)!==parseInt(m,10)||1>m)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)s=512,g=F,y=H,a=160,v=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(g=function(t,n){return V(t,n,e)},y=function(t,n,r,i){var o,a;if("SHA-224"===e||"SHA-256"===e)o=15+(n+65>>>9<<4),a=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");o=31+(n+129>>>10<<5),a=32}for(;t.length<=o;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=r,t[o]=4294967295&n,t[o-1]=n/4294967296|0,r=t.length,n=0;n<r;n+=a)i=V(t.slice(n,n+a),i,e);if("SHA-224"===e)t=[i[0],i[1],i[2],i[3],i[4],i[5],i[6]];else if("SHA-256"===e)t=i;else if("SHA-384"===e)t=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");t=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b,i[6].a,i[6].b,i[7].a,i[7].b]}return t},v=function(e){return e.slice()},"SHA-224"===e)s=512,a=224;else if("SHA-256"===e)s=512,a=256;else if("SHA-384"===e)s=1024,a=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");s=1024,a=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var C=6;if(g=W,v=function(e){var t,n=[];for(t=0;5>t;t+=1)n[t]=e[t].slice();return n},x=1,"SHA3-224"===e)s=1152,a=224;else if("SHA3-256"===e)s=1088,a=256;else if("SHA3-384"===e)s=832,a=384;else if("SHA3-512"===e)s=576,a=512;else if("SHAKE128"===e)s=1344,a=-1,C=31,A=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");s=1088,a=-1,C=31,A=!0}y=function(e,t,n,r,i){n=s;var o,a=C,u=[],c=n>>>5,l=0,f=t>>>5;for(o=0;o<f&&t>=n;o+=c)r=W(e.slice(o,o+c),r),t-=n;for(e=e.slice(o),t%=n;e.length<c;)e.push(0);for(o=t>>>3,e[o>>2]^=a<<o%4*8,e[c-1]^=2147483648,r=W(e,r);32*u.length<i&&(e=r[l%5][l/5|0],u.push(e.b),!(32*u.length>=i));)u.push(e.a),0==64*(l+=1)%n&&(W(null,r),l=0);return u}}o=p(t,r,x),i=B(e),this.setHMACKey=function(t,n,o){var u;if(!0===_)throw Error("HMAC key already set");if(!0===E)throw Error("Cannot set HMAC key after calling update");if(!0===A)throw Error("SHAKE is not supported for HMAC");for(r=(o||{}).encoding||"UTF8",n=p(n,r,x)(t),t=n.binLen,n=n.value,u=s>>>3,o=u/4-1,u<t/8&&(n=y(n,t,0,B(e),a));n.length<=o;)n.push(0);for(t=0;t<=o;t+=1)T[t]=909522486^n[t],k[t]=1549556828^n[t];i=g(T,i),b=s,_=!0},this.update=function(e){var t,n,r,a=0,u=s>>>5;for(t=o(e,w,S),e=t.binLen,n=t.value,t=e>>>5,r=0;r<t;r+=u)a+s<=e&&(i=g(n.slice(r,r+u),i),a+=s);b+=a,w=n.slice(a>>>5),S=e%s,E=!0},this.getHash=function(t,n){var r,o,s,p;if(!0===_)throw Error("Cannot call getHash after setting HMAC key");if(s=h(n),!0===A){if(-1===s.shakeLen)throw Error("shakeLen must be specified in options");a=s.shakeLen}switch(t){case"HEX":r=function(e){return u(e,a,x,s)};break;case"B64":r=function(e){return c(e,a,x,s)};break;case"BYTES":r=function(e){return l(e,a,x)};break;case"ARRAYBUFFER":try{o=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}r=function(e){return f(e,a,x)};break;case"UINT8ARRAY":try{o=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}r=function(e){return d(e,a,x)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(p=y(w.slice(),S,b,v(i),a),o=1;o<m;o+=1)!0===A&&0!=a%32&&(p[p.length-1]&=16777215>>>24-a%32),p=y(p,a,0,B(e),a);return r(p)},this.getHMAC=function(t,n){var r,o,p,m;if(!1===_)throw Error("Cannot call getHMAC without first setting HMAC key");switch(p=h(n),t){case"HEX":r=function(e){return u(e,a,x,p)};break;case"B64":r=function(e){return c(e,a,x,p)};break;case"BYTES":r=function(e){return l(e,a,x)};break;case"ARRAYBUFFER":try{r=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}r=function(e){return f(e,a,x)};break;case"UINT8ARRAY":try{r=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}r=function(e){return d(e,a,x)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return o=y(w.slice(),S,b,v(i),a),m=g(k,B(e)),m=y(o,a,s,m,a),r(m)}}function a(e,t){this.a=e,this.b=t}function s(e,t,n,r){var i,o,a,s,u;for(t=t||[0],n=n||0,o=n>>>3,u=-1===r?3:0,i=0;i<e.length;i+=1)s=i+o,a=s>>>2,t.length<=a&&t.push(0),t[a]|=e[i]<<8*(u+s%4*r);return{value:t,binLen:8*e.length+n}}function u(e,t,n,r){var i="";t/=8;var o,a,s;for(s=-1===n?3:0,o=0;o<t;o+=1)a=e[o>>>2]>>>8*(s+o%4*n),i+="0123456789abcdef".charAt(a>>>4&15)+"0123456789abcdef".charAt(15&a);return r.outputUpper?i.toUpperCase():i}function c(e,t,n,r){var i,o,a,s,u="",c=t/8;for(s=-1===n?3:0,i=0;i<c;i+=3)for(o=i+1<c?e[i+1>>>2]:0,a=i+2<c?e[i+2>>>2]:0,a=(e[i>>>2]>>>8*(s+i%4*n)&255)<<16|(o>>>8*(s+(i+1)%4*n)&255)<<8|a>>>8*(s+(i+2)%4*n)&255,o=0;4>o;o+=1)u+=8*i+6*o<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6*(3-o)&63):r.b64Pad;return u}function l(e,t,n){var r="";t/=8;var i,o,a;for(a=-1===n?3:0,i=0;i<t;i+=1)o=e[i>>>2]>>>8*(a+i%4*n)&255,r+=String.fromCharCode(o);return r}function f(e,t,n){t/=8;var r,i,o,a=new ArrayBuffer(t);for(o=new Uint8Array(a),i=-1===n?3:0,r=0;r<t;r+=1)o[r]=e[r>>>2]>>>8*(i+r%4*n)&255;return a}function d(e,t,n){t/=8;var r,i,o=new Uint8Array(t);for(i=-1===n?3:0,r=0;r<t;r+=1)o[r]=e[r>>>2]>>>8*(i+r%4*n)&255;return o}function h(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function p(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,t,r){var i,o,a,s,u,c,l=e.length;if(0!=l%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],r=r||0,u=r>>>3,c=-1===n?3:0,i=0;i<l;i+=2){if(o=parseInt(e.substr(i,2),16),isNaN(o))throw Error("String of HEX type contains invalid characters");for(s=(i>>>1)+u,a=s>>>2;t.length<=a;)t.push(0);t[a]|=o<<8*(c+s%4*n)}return{value:t,binLen:4*l+r}};break;case"TEXT":e=function(e,r,i){var o,a,s,u,c,l,f,d,h=0;if(r=r||[0],i=i||0,c=i>>>3,"UTF8"===t)for(d=-1===n?3:0,s=0;s<e.length;s+=1)for(o=e.charCodeAt(s),a=[],128>o?a.push(o):2048>o?(a.push(192|o>>>6),a.push(128|63&o)):55296>o||57344<=o?a.push(224|o>>>12,128|o>>>6&63,128|63&o):(s+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(s)),a.push(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)),u=0;u<a.length;u+=1){for(f=h+c,l=f>>>2;r.length<=l;)r.push(0);r[l]|=a[u]<<8*(d+f%4*n),h+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(d=-1===n?2:0,a="UTF16LE"===t&&1!==n||"UTF16LE"!==t&&1===n,s=0;s<e.length;s+=1){for(o=e.charCodeAt(s),!0===a&&(u=255&o,o=u<<8|o>>>8),f=h+c,l=f>>>2;r.length<=l;)r.push(0);r[l]|=o<<8*(d+f%4*n),h+=2}return{value:r,binLen:8*h+i}};break;case"B64":e=function(e,t,r){var i,o,a,s,u,c,l,f,d=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(o=e.indexOf("="),e=e.replace(/\=/g,""),-1!==o&&o<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],r=r||0,c=r>>>3,f=-1===n?3:0,o=0;o<e.length;o+=4){for(u=e.substr(o,4),a=s=0;a<u.length;a+=1)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(u.charAt(a)),s|=i<<18-6*a;for(a=0;a<u.length-1;a+=1){for(l=d+c,i=l>>>2;t.length<=i;)t.push(0);t[i]|=(s>>>16-8*a&255)<<8*(f+l%4*n),d+=1}}return{value:t,binLen:8*d+r}};break;case"BYTES":e=function(e,t,r){var i,o,a,s,u,c;for(t=t||[0],r=r||0,a=r>>>3,c=-1===n?3:0,o=0;o<e.length;o+=1)i=e.charCodeAt(o),u=o+a,s=u>>>2,t.length<=s&&t.push(0),t[s]|=i<<8*(c+u%4*n);return{value:t,binLen:8*e.length+r}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,t,r){return s(new Uint8Array(e),t,r,n)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}e=function(e,t,r){return s(e,t,r,n)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function g(e,t){return e<<t|e>>>32-t}function y(e,t){return 32<t?(t-=32,new a(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0!==t?new a(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function v(e,t){return e>>>t|e<<32-t}function m(e,t){var n=null,n=new a(e.a,e.b);return n=32>=t?new a(n.a>>>t|n.b<<32-t&4294967295,n.b>>>t|n.a<<32-t&4294967295):new a(n.b>>>t-32|n.a<<64-t&4294967295,n.a>>>t-32|n.b<<64-t&4294967295)}function b(e,t){return 32>=t?new a(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new a(0,e.a>>>t-32)}function w(e,t,n){return e&t^~e&n}function S(e,t,n){return new a(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function _(e,t,n){return e&t^e&n^t&n}function T(e,t,n){return new a(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function k(e){return v(e,2)^v(e,13)^v(e,22)}function E(e){var t=m(e,28),n=m(e,34);return e=m(e,39),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function A(e){return v(e,6)^v(e,11)^v(e,25)}function x(e){var t=m(e,14),n=m(e,18);return e=m(e,41),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function C(e){return v(e,7)^v(e,18)^e>>>3}function P(e){var t=m(e,1),n=m(e,8);return e=b(e,7),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function I(e){return v(e,17)^v(e,19)^e>>>10}function j(e){var t=m(e,19),n=m(e,61);return e=b(e,6),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function M(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function O(e,t,n,r){var i=(65535&e)+(65535&t)+(65535&n)+(65535&r);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)&65535)<<16|65535&i}function R(e,t,n,r,i){var o=(65535&e)+(65535&t)+(65535&n)+(65535&r)+(65535&i);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)+(o>>>16)&65535)<<16|65535&o}function D(e,t){var n,r,i;return n=(65535&e.b)+(65535&t.b),r=(e.b>>>16)+(t.b>>>16)+(n>>>16),i=(65535&r)<<16|65535&n,n=(65535&e.a)+(65535&t.a)+(r>>>16),r=(e.a>>>16)+(t.a>>>16)+(n>>>16),new a((65535&r)<<16|65535&n,i)}function L(e,t,n,r){var i,o,s;return i=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&r.b),o=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(r.b>>>16)+(i>>>16),s=(65535&o)<<16|65535&i,i=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&r.a)+(o>>>16),o=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(r.a>>>16)+(i>>>16),new a((65535&o)<<16|65535&i,s)}function N(e,t,n,r,i){var o,s,u;return o=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&r.b)+(65535&i.b),s=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(r.b>>>16)+(i.b>>>16)+(o>>>16),u=(65535&s)<<16|65535&o,o=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&r.a)+(65535&i.a)+(s>>>16),s=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(r.a>>>16)+(i.a>>>16)+(o>>>16),new a((65535&s)<<16|65535&o,u)}function U(e,t){return new a(e.a^t.a,e.b^t.b)}function B(e){var t,n=[];if("SHA-1"===e)n=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":n=t;break;case"SHA-384":n=[new a(3418070365,n[0]),new a(1654270250,n[1]),new a(2438529370,n[2]),new a(355462360,n[3]),new a(1731405415,n[4]),new a(41048885895,n[5]),new a(3675008525,n[6]),new a(1203062813,n[7])];break;case"SHA-512":n=[new a(t[0],4089235720),new a(t[1],2227873595),new a(t[2],4271175723),new a(t[3],1595750129),new a(t[4],2917565137),new a(t[5],725511199),new a(t[6],4215389547),new a(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)n[e]=[new a(0,0),new a(0,0),new a(0,0),new a(0,0),new a(0,0)]}return n}function F(e,t){var n,r,i,o,a,s,u,c=[];for(n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=0;80>u;u+=1)c[u]=16>u?e[u]:g(c[u-3]^c[u-8]^c[u-14]^c[u-16],1),s=20>u?R(g(n,5),r&i^~r&o,a,1518500249,c[u]):40>u?R(g(n,5),r^i^o,a,1859775393,c[u]):60>u?R(g(n,5),_(r,i,o),a,2400959708,c[u]):R(g(n,5),r^i^o,a,3395469782,c[u]),a=o,o=i,i=g(r,30),r=n,n=s;return t[0]=M(n,t[0]),t[1]=M(r,t[1]),t[2]=M(i,t[2]),t[3]=M(o,t[3]),t[4]=M(a,t[4]),t}function H(e,t,n,r){var i;for(i=15+(t+65>>>9<<4);e.length<=i;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=n,e[i]=4294967295&t,e[i-1]=t/4294967296|0,t=e.length,i=0;i<t;i+=16)r=F(e.slice(i,i+16),r);return r}function V(e,t,n){var r,i,o,s,u,c,l,f,d,h,p,g,y,v,m,b,U,B,F,H,V,W,G,z=[];if("SHA-224"===n||"SHA-256"===n)h=64,g=1,W=Number,y=M,v=O,m=R,b=C,U=I,B=k,F=A,V=_,H=w,G=K;else{if("SHA-384"!==n&&"SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");h=80,g=2,W=a,y=D,v=L,m=N,b=P,U=j,B=E,F=x,V=T,H=S,G=q}for(n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],p=0;p<h;p+=1)16>p?(d=p*g,f=e.length<=d?0:e[d],d=e.length<=d+1?0:e[d+1],z[p]=new W(f,d)):z[p]=v(U(z[p-2]),z[p-7],b(z[p-15]),z[p-16]),f=m(l,F(s),H(s,u,c),G[p],z[p]),d=y(B(n),V(n,r,i)),l=c,c=u,u=s,s=y(o,f),o=i,i=r,r=n,n=y(f,d);return t[0]=y(n,t[0]),t[1]=y(r,t[1]),t[2]=y(i,t[2]),t[3]=y(o,t[3]),t[4]=y(s,t[4]),t[5]=y(u,t[5]),t[6]=y(c,t[6]),t[7]=y(l,t[7]),t}function W(e,t){var n,r,i,o,s=[],u=[];if(null!==e)for(r=0;r<e.length;r+=2)t[(r>>>1)%5][(r>>>1)/5|0]=U(t[(r>>>1)%5][(r>>>1)/5|0],new a(e[r+1],e[r]));for(n=0;24>n;n+=1){for(o=B("SHA3-"),r=0;5>r;r+=1){i=t[r][0];var c=t[r][1],l=t[r][2],f=t[r][3],d=t[r][4];s[r]=new a(i.a^c.a^l.a^f.a^d.a,i.b^c.b^l.b^f.b^d.b)}for(r=0;5>r;r+=1)u[r]=U(s[(r+4)%5],y(s[(r+1)%5],1));for(r=0;5>r;r+=1)for(i=0;5>i;i+=1)t[r][i]=U(t[r][i],u[r]);for(r=0;5>r;r+=1)for(i=0;5>i;i+=1)o[i][(2*r+3*i)%5]=y(t[r][i],G[r][i]);for(r=0;5>r;r+=1)for(i=0;5>i;i+=1)t[r][i]=U(o[r][i],new a(~o[(r+1)%5][i].a&o[(r+2)%5][i].a,~o[(r+1)%5][i].b&o[(r+2)%5][i].b));t[0][0]=U(t[0][0],z[n])}return t}var K,q,G,z;K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],q=[new a(K[0],3609767458),new a(K[1],602891725),new a(K[2],3964484399),new a(K[3],2173295548),new a(K[4],4081628472),new a(K[5],3053834265),new a(K[6],2937671579),new a(K[7],3664609560),new a(K[8],2734883394),new a(K[9],1164996542),new a(K[10],1323610764),new a(K[11],3590304994),new a(K[12],4068182383),new a(K[13],991336113),new a(K[14],633803317),new a(K[15],3479774868),new a(K[16],2666613458),new a(K[17],944711139),new a(K[18],2341262773),new a(K[19],2007800933),new a(K[20],1495990901),new a(K[21],1856431235),new a(K[22],3175218132),new a(K[23],2198950837),new a(K[24],3999719339),new a(K[25],766784016),new a(K[26],2566594879),new a(K[27],3203337956),new a(K[28],1034457026),new a(K[29],2466948901),new a(K[30],3758326383),new a(K[31],168717936),new a(K[32],1188179964),new a(K[33],1546045734),new a(K[34],1522805485),new a(K[35],2643833823),new a(K[36],2343527390),new a(K[37],1014477480),new a(K[38],1206759142),new a(K[39],344077627),new a(K[40],1290863460),new a(K[41],3158454273),new a(K[42],3505952657),new a(K[43],106217008),new a(K[44],3606008344),new a(K[45],1432725776),new a(K[46],1467031594),new a(K[47],851169720),new a(K[48],3100823752),new a(K[49],1363258195),new a(K[50],3750685593),new a(K[51],3785050280),new a(K[52],3318307427),new a(K[53],3812723403),new a(K[54],2003034995),new a(K[55],3602036899),new a(K[56],1575990012),new a(K[57],1125592928),new a(K[58],2716904306),new a(K[59],442776044),new a(K[60],593698344),new a(K[61],3733110249),new a(K[62],2999351573),new a(K[63],3815920427),new a(3391569614,3928383900),new a(3515267271,566280711),new a(3940187606,3454069534),new a(4118630271,4000239992),new a(116418474,1914138554),new a(174292421,2731055270),new a(289380356,3203993006),new a(460393269,320620315),new a(685471733,587496836),new a(852142971,1086792851),new a(1017036298,365543100),new a(1126000580,2618297676),new a(1288033470,3409855158),new a(1501505948,4234509866),new a(1607167915,987167468),new a(1816402316,1246189591)],z=[new a(0,1),new a(0,32898),new a(2147483648,32906),new a(2147483648,2147516416),new a(0,32907),new a(0,2147483649),new a(2147483648,2147516545),new a(2147483648,32777),new a(0,138),new a(0,136),new a(0,2147516425),new a(0,2147483658),new a(0,2147516555),new a(2147483648,139),new a(2147483648,32905),new a(2147483648,32771),new a(2147483648,32770),new a(2147483648,128),new a(0,32778),new a(2147483648,2147483658),new a(2147483648,2147516545),new a(2147483648,32896),new a(0,2147483649),new a(2147483648,2147516424)],G=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0!==(r=function(){return o}.call(t,n,t,e))&&(e.exports=r)}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c=function(){function e(t){i(this,e),this.player=t,this._initReadyEvent()}return a(e,[{key:"_onStreamingEvent",value:function(){var e=this.player.tech_.shaka_.getStats(),t=e.maxSegmentDuration,n=-1===this.vodTimeoutMultiplier&&-1===this.liveTimeoutMultiplier,r=0;r=this.player.tech_.shaka_.isLive()?-1===this.liveTimeoutMultiplier?1.5:this.liveTimeoutMultiplier:-1===this.vodTimeoutMultiplier?5:this.vodTimeoutMultiplier;var i=t*r*1e3;n&&(i=Math.max(6e3,Math.min(15e3,i))),this.player.tech_.shaka_.configure("streaming.retryParameters.timeout",i)}},{key:"_initReadyEvent",value:function(){var e=this;this.player.on("ready",function(){e.player.tech_.shaka_&&e.player.tech_.shaka_.addEventListener("streaming",function(){return e._onStreamingEvent()})})}},{key:"setVodTimeoutMultiplier",value:function(e){this.vodTimeoutMultiplier=e}},{key:"setLiveTimeoutMultiplier",value:function(e){this.liveTimeoutMultiplier=e}}])}();t.a={SegmentTimeoutController:c,USE_DEFAULT:-1}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return l});var c=[{width:350,name:"opy-tiny"},{width:550,name:"opy-xsmall"},{width:800,name:"opy-small"}],l=function(){function e(t,n){var r=this;i(this,e),this.player_=t,this.toolkit_=n,this.currentBreakpoint_=void 0,this.setBreakpoint_(),this.screenConfigChangeHandler=function(){setTimeout(function(){r.setBreakpoint_()},0)},this.toolkit_.addEventListener("pipon",this.screenConfigChangeHandler),this.toolkit_.addEventListener("pipoff",this.screenConfigChangeHandler),this.player_.on("fullscreenchange",this.screenConfigChangeHandler),this.player_.on("loadstart",function(){r.setBreakpoint_()}),window.addEventListener("resize",function(){r.setBreakpoint_()})}return a(e,[{key:"assignBreakpoint_",value:function(e){this.currentBreakpoint_=e,this.currentBreakpoint_&&this.addBp_(this.currentBreakpoint_)}},{key:"setBreakpoint_",value:function(){if(this.player_.el()){var e=this.player_.el().getElementsByTagName("video")[0];if(e&&e.parentElement){var t=e.parentElement.clientWidth,n=c.find(function(e){return t<e.width}),r=n?n.name:void 0;this.currentBreakpoint_?this.currentBreakpoint_!==r&&(this.removeBp_(this.currentBreakpoint_),this.assignBreakpoint_(r)):this.assignBreakpoint_(r)}}}},{key:"addBp_",value:function(e){this.player_.el().classList.add(e)}},{key:"removeBp_",value:function(e){this.player_.el().classList.remove(e)}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=c(e,"string");return"symbol"==r(t)?t:t+""}function c(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var l=n(11),f=function(){function e(t){o(this,e),this.extra="",this.player=t,this.onCanPlayHandle=this._onCanPlay.bind(this),this.onPlayHandle=this._onPlay.bind(this),this.onTimeUpdateHandle=this._onTimeUpdate.bind(this),this.onSeekingHandle=this._onSeeking.bind(this),this.onSeekedHandle=this._onSeeked.bind(this)}return s(e,[{key:"dispose",value:function(){this._removeListeners(),this.player=void 0}},{key:"onSetUrl",value:function(e){var t=e.src||e;this.extra=JSON.stringify(i({},l.e.url,t)),OTV.eventTimeline.addToTimeline(l.g.playback,l.c.setURL,this.extra),this._removeListeners(),this.player.one("canplay",this.onCanPlayHandle),this.player.one("play",this.onPlayHandle),this.player.on("seeking",this.onSeekingHandle),this.player.on("seeked",this.onSeekedHandle)}},{key:"onStop",value:function(){this.extra&&(OTV.eventTimeline.addToTimeline(l.g.playback,l.c.stop,this.extra),this.extra="",this._removeListeners())}},{key:"_removeListeners",value:function(){this.player&&(this.player.off("canplay",this.onCanPlayHandle),this.player.off("play",this.onPlayHandle),this.player.off("timeupdate",this.onTimeUpdateHandle),this.player.off("seeking",this.onSeekingHandle),this.player.off("seeked",this.onSeekedHandle))}},{key:"_onSeeking",value:function(){OTV.eventTimeline.addToTimeline(l.g.playback,l.c.seeking,this.extra)}},{key:"_onSeeked",value:function(){OTV.eventTimeline.addToTimeline(l.g.playback,l.c.seeked,this.extra)}},{key:"_onCanPlay",value:function(){OTV.eventTimeline.addToTimeline(l.g.playback,l.c.prepared,this.extra),this.player.one("timeupdate",this.onTimeUpdateHandle)}},{key:"_onPlay",value:function(){OTV.eventTimeline.addToTimeline(l.g.playback,l.c.start,this.extra)}},{key:"_onTimeUpdate",value:function(){OTV.eventTimeline.addToTimeline(l.g.playback,l.c.firstFrame,this.extra)}}])}();t.a=f},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=h(t),l(e,d()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y=n(151),v={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},m=function(e){function t(e){return i(this,t),c(this,t,[e])}return p(t,e),a(t,[{key:"_getPlayerInstance",value:function(){var e;if(this.videojs&&this.videojs.el_){e=this.videojs.el_.getElementsByClassName("vjs-tech")[0]}return e}},{key:"_onErrorEvent",value:function(e){var t=shaka.util.Error.Category.PLAYER,n=shaka.util.Error.Code.BAD_HTTP_STATUS;switch(console.log("".concat(JSON.stringify(e.target.error))),e.target.error.code){case v.MEDIA_ERR_ABORTED:t=shaka.util.Error.Category.STREAMING,n=shaka.util.Error.Code.BAD_HTTP_STATUS;break;case v.MEDIA_ERR_NETWORK:t=shaka.util.Error.Category.NETWORK,n=shaka.util.Error.Code.BAD_HTTP_STATUS;break;case v.MEDIA_ERR_DECODE:t=shaka.util.Error.Category.MEDIA,n=shaka.util.Error.Code.BAD_ENCODING;break;case v.MEDIA_ERR_SRC_NOT_SUPPORTED:t=shaka.util.Error.Category.MEDIA,n=shaka.util.Error.Code.DASH_UNSUPPORTED_CONTAINER}this.listener&&this.listener.errorChanged&&this.listener.errorChanged(shaka.util.Error.Severity.CRITICAL,t,n,e.target.error.message)}}])}(y.a.ErrorReporting);t.a={NativePlayerErrorReporting:m}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t,n){return t=h(t),l(e,d()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function l(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y=n(151),v=function(e){function t(e){return i(this,t),c(this,t,[e])}return p(t,e),a(t,[{key:"_getPlayerInstance",value:function(){var e;return this.videojs&&this.videojs.tech_&&(e=this.videojs.tech_.shaka_),e}}])}(y.a.ErrorReporting);t.a={ShakaPlayerErrorReporting:v}},function(e,t,n){"use strict";function r(e){var t=function(t){e&&o.a.log(t)};return t.error=function(e){return o.a.log.error(e)},t.warn=function(e){return o.a.log.warn(e)},t.debug=function(t){e&&"function"==typeof o.a.debug&&o.a.debug(t)},t}t.a=r;var i=n(56),o=n.n(i)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c=function(){function e(t){i(this,e),this.videojs=t}return a(e,[{key:"setDebugLevel",value:function(e){shaka.log.setLevel(e)}},{key:"setLogProvider",value:function(e){this.listener=e,e&&this._captureConsoleLogs()}},{key:"reset",value:function(){this.listener=void 0}},{key:"_captureConsoleLogs",value:function(){var e=this;void 0===console.everything&&(console.everything="",console.visible="",console.defaultInfo=console.info.bind(console),console.info=function(){var t="Info: ".concat(Array.from(arguments),"\n");console.defaultInfo.apply(console,arguments),e._onLogEvent(t)},console.defaultLog=console.log.bind(console),console.log=function(){var t="Log: ".concat(Array.from(arguments),"\n");console.defaultLog.apply(console,arguments),e._onLogEvent(t)},console.defaultError=console.error.bind(console),console.error=function(){var t="Error: ".concat(Array.from(arguments),"\n");console.defaultError.apply(console,arguments),e._onLogEvent(t)},console.defaultWarn=console.warn.bind(console),console.warn=function(){var t="Warning: ".concat(Array.from(arguments),"\n");console.defaultWarn.apply(console,arguments),e._onLogEvent(t)},console.defaultDebug=console.debug.bind(console),console.debug=function(){var t="Debug: ".concat(Array.from(arguments),"\n");console.defaultDebug.apply(console,arguments),e._onLogEvent(t)})}},{key:"_onLogEvent",value:function(e){if(this.listener&&this.listener.logProvider){var t=new Date;this.listener.logProvider("".concat(t,": ").concat(e))}}}])}();t.a={LogProvider:c}},function(e,t,n){"use strict";function r(e){var t=e;if(t&&t.config&&t.config.ssmServer){var n=t.config.ssmServer.match(/^(http(s)?):(\/\/.*?)(\/v1)?(\/)?$/);n&&(t.config.ssmServer="".concat(n[1],":").concat(n[3],"/v1"))}return t}t.a={homogeniseSsmUri:r}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return c});var c=function(){function e(t,n,r,o){i(this,e),this._drmSecurityLevel=n,this._pluginDrmConfig=t,this._configUtil=r,this._configType=o}return a(e,[{key:"setHwDecryption",value:function(){var e=this;this._pluginDrmConfig&&this._pluginDrmConfig.config.useHW&&this._drmSecurityLevel.getDrmInfo("com.widevine.alpha").then(function(t){if(t.find(function(e){return 3===e.securityLevel})){var n={drm:{advanced:{"com.widevine.alpha":{videoRobustness:"HW_SECURE_DECODE",audioRobustness:"HW_SECURE_CRYPTO"}}}};e._configUtil.configure(e._configType,n)}else{var r={drm:{advanced:{"com.widevine.alpha":{videoRobustness:"HW_SECURE_CRYPTO",audioRobustness:"HW_SECURE_CRYPTO"}}}};e._configUtil.configure(e._configType,r)}})}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(){}n.d(t,"a",function(){return l});var l=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;i(this,e),this._player=n,this._log=r,this._srcSetButNotLoaded=!1,this.onSeekingHandle=this._onSeeking.bind(this),this.onSeekedHandle=this._onSeeked.bind(this),this.onLoadedDataHandle=this._onLoadedData.bind(this),this.onPlayingHandle=this._onPlaying.bind(this),this._seekingTimerId=void 0,t.toLowerCase().includes("tizen")&&this._addEventListeners()}return a(e,[{key:"setSource",value:function(){this._log("NMP TIZEN - SeekMonitor - now Primed ready for seeking events"),this._srcSetButNotLoaded=!0,this._onEventTimerCancel()}},{key:"_onLoadedData",value:function(){this._log("NMP TIZEN - SeekMonitor - Loaded"),this._srcSetButNotLoaded=!1}},{key:"_onSeeking",value:function(){var e=this,t=this,n=function(){t._seekingTimerId=void 0;var n=t._player.currentTime();e._log("NMP TIZEN - SeekMonitor - Timer expired, current time: "+n),t._player.currentTime(n+1)};this._onEventTimerCancel(),this._srcSetButNotLoaded||(this._seekingTimerId=this._makeTimer(n,3e3),this._log("NMP TIZEN - SeekMonitor - Timer started"))}},{key:"_makeTimer",value:function(e,t){return setTimeout(e,t)}},{key:"_onEventTimerCancel",value:function(){this._seekingTimerId&&this._log("NMP TIZEN - SeekMonitor - Timer STOPPED"),clearTimeout(this._seekingTimerId),this._seekingTimerId=void 0}},{key:"_onPlaying",value:function(){this._onEventTimerCancel()}},{key:"_onSeeked",value:function(){this._onEventTimerCancel()}},{key:"dispose",value:function(){this._onEventTimerCancel(),this._removeEventListeners(),this._player=void 0}},{key:"_addEventListeners",value:function(){this._player&&(this._player.on("seeking",this.onSeekingHandle),this._player.on("seeked",this.onSeekedHandle),this._player.on("loadeddata",this.onLoadedDataHandle),this._player.on("playing",this.onPlayingHandle))}},{key:"_removeEventListeners",value:function(){this._player&&(this._player.off("seeking",this.onSeekingHandle),this._player.off("seeked",this.onSeekedHandle),this._player.off("loadeddata",this.onLoadedDataHandle),this._player.off("playing",this.onPlayingHandle))}}])}()},function(e,t,n){"use strict";function r(){var e=videojs.getComponent("MenuItem");return Boolean(e)}t.a=r},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=c(e,"string");return"symbol"==r(t)?t:t+""}function c(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var l=n(50),f=function(){function e(t,n,r){o(this,e),this.techConfig=t,this.browserUtils=n,this.pluginOptions=r}return s(e,[{key:"applyPlatformSpecificConfig",value:function(){this._stallSettings(),this._nagraCONNECT()}},{key:"_nagraCONNECT",value:function(){if(this.browserUtils.isNagraCONNECTCapable()){var e={manifest:{dash:{keySystemsByURI:{"urn:uuid:adb41c24-2dbf-4a6d-958b-4457c0d27b95":"com.nagra.prm"}}},drm:{advanced:i({},"com.nagra.prm",{sessionType:"persistent-license",individualizationServer:this.pluginOptions.drm.config.nagraConnectIndividualizationUri,serverCertificateUri:this.pluginOptions.drm.config.nagraConnectServerCertificateUri})}};this.techConfig.configure(l.b,e)}}},{key:"_stallSettings",value:function(){var e=this.browserUtils.getTizenVersion();isNaN(e)||5.5!==e||this.techConfig.configure(l.b,{streaming:{stallSkip:.2}})}}])}();t.a={PlatformSpecificConfig:f}},function(e,t,n){var r=n(407),i=r,o=Function("return this")();i.exportSymbol("proto.WidevinePsshData",null,o),i.exportSymbol("proto.WidevinePsshData.Algorithm",null,o),i.exportSymbol("proto.WidevinePsshData.EntitledKey",null,o),i.exportSymbol("proto.WidevinePsshData.Type",null,o),proto.WidevinePsshData=function(e){r.Message.initialize(this,e,0,-1,proto.WidevinePsshData.repeatedFields_,null)},i.inherits(proto.WidevinePsshData,r.Message),i.DEBUG&&!COMPILED&&(proto.WidevinePsshData.displayName="proto.WidevinePsshData"),proto.WidevinePsshData.EntitledKey=function(e){r.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.WidevinePsshData.EntitledKey,r.Message),i.DEBUG&&!COMPILED&&(proto.WidevinePsshData.EntitledKey.displayName="proto.WidevinePsshData.EntitledKey"),proto.WidevinePsshData.repeatedFields_=[2,13,14],r.Message.GENERATE_TO_OBJECT&&(proto.WidevinePsshData.prototype.toObject=function(e){return proto.WidevinePsshData.toObject(e,this)},proto.WidevinePsshData.toObject=function(e,t){var n,i={keyIdsList:t.getKeyIdsList_asB64(),contentId:t.getContentId_asB64(),cryptoPeriodIndex:null==(n=r.Message.getField(t,7))?void 0:n,protectionScheme:null==(n=r.Message.getField(t,9))?void 0:n,cryptoPeriodSeconds:null==(n=r.Message.getField(t,10))?void 0:n,type:r.Message.getFieldWithDefault(t,11,0),keySequence:null==(n=r.Message.getField(t,12))?void 0:n,groupIdsList:t.getGroupIdsList_asB64(),entitledKeysList:r.Message.toObjectList(t.getEntitledKeysList(),proto.WidevinePsshData.EntitledKey.toObject,e),algorithm:null==(n=r.Message.getField(t,1))?void 0:n,provider:null==(n=r.Message.getField(t,3))?void 0:n,trackType:null==(n=r.Message.getField(t,5))?void 0:n,policy:null==(n=r.Message.getField(t,6))?void 0:n,groupedLicense:t.getGroupedLicense_asB64()};return e&&(i.$jspbMessageInstance=t),i}),proto.WidevinePsshData.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.WidevinePsshData;return proto.WidevinePsshData.deserializeBinaryFromReader(n,t)},proto.WidevinePsshData.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var n=t.readBytes();e.addKeyIds(n);break;case 4:var n=t.readBytes();e.setContentId(n);break;case 7:var n=t.readUint32();e.setCryptoPeriodIndex(n);break;case 9:var n=t.readUint32();e.setProtectionScheme(n);break;case 10:var n=t.readUint32();e.setCryptoPeriodSeconds(n);break;case 11:var n=t.readEnum();e.setType(n);break;case 12:var n=t.readUint32();e.setKeySequence(n);break;case 13:var n=t.readBytes();e.addGroupIds(n);break;case 14:var n=new proto.WidevinePsshData.EntitledKey;t.readMessage(n,proto.WidevinePsshData.EntitledKey.deserializeBinaryFromReader),e.addEntitledKeys(n);break;case 1:var n=t.readEnum();e.setAlgorithm(n);break;case 3:var n=t.readString();e.setProvider(n);break;case 5:var n=t.readString();e.setTrackType(n);break;case 6:var n=t.readString();e.setPolicy(n);break;case 8:var n=t.readBytes();e.setGroupedLicense(n);break;default:t.skipField()}}return e},proto.WidevinePsshData.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.WidevinePsshData.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.WidevinePsshData.serializeBinaryToWriter=function(e,t){var n=void 0;n=e.getKeyIdsList_asU8(),n.length>0&&t.writeRepeatedBytes(2,n),n=r.Message.getField(e,4),null!=n&&t.writeBytes(4,n),n=r.Message.getField(e,7),null!=n&&t.writeUint32(7,n),n=r.Message.getField(e,9),null!=n&&t.writeUint32(9,n),n=r.Message.getField(e,10),null!=n&&t.writeUint32(10,n),n=r.Message.getField(e,11),null!=n&&t.writeEnum(11,n),n=r.Message.getField(e,12),null!=n&&t.writeUint32(12,n),n=e.getGroupIdsList_asU8(),n.length>0&&t.writeRepeatedBytes(13,n),n=e.getEntitledKeysList(),n.length>0&&t.writeRepeatedMessage(14,n,proto.WidevinePsshData.EntitledKey.serializeBinaryToWriter),n=r.Message.getField(e,1),null!=n&&t.writeEnum(1,n),n=r.Message.getField(e,3),null!=n&&t.writeString(3,n),n=r.Message.getField(e,5),null!=n&&t.writeString(5,n),n=r.Message.getField(e,6),null!=n&&t.writeString(6,n),null!=(n=r.Message.getField(e,8))&&t.writeBytes(8,n)},proto.WidevinePsshData.Type={SINGLE:0,ENTITLEMENT:1,ENTITLED_KEY:2},proto.WidevinePsshData.Algorithm={UNENCRYPTED:0,AESCTR:1},r.Message.GENERATE_TO_OBJECT&&(proto.WidevinePsshData.EntitledKey.prototype.toObject=function(e){return proto.WidevinePsshData.EntitledKey.toObject(e,this)},proto.WidevinePsshData.EntitledKey.toObject=function(e,t){var n={entitlementKeyId:t.getEntitlementKeyId_asB64(),keyId:t.getKeyId_asB64(),key:t.getKey_asB64(),iv:t.getIv_asB64(),entitlementKeySizeBytes:r.Message.getFieldWithDefault(t,5,32)};return e&&(n.$jspbMessageInstance=t),n}),proto.WidevinePsshData.EntitledKey.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.WidevinePsshData.EntitledKey;return proto.WidevinePsshData.EntitledKey.deserializeBinaryFromReader(n,t)},proto.WidevinePsshData.EntitledKey.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var n=t.readBytes();e.setEntitlementKeyId(n);break;case 2:var n=t.readBytes();e.setKeyId(n);break;case 3:var n=t.readBytes();e.setKey(n);break;case 4:var n=t.readBytes();e.setIv(n);break;case 5:var n=t.readUint32();e.setEntitlementKeySizeBytes(n);break;default:t.skipField()}}return e},proto.WidevinePsshData.EntitledKey.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.WidevinePsshData.EntitledKey.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.WidevinePsshData.EntitledKey.serializeBinaryToWriter=function(e,t){var n=void 0;n=r.Message.getField(e,1),null!=n&&t.writeBytes(1,n),n=r.Message.getField(e,2),null!=n&&t.writeBytes(2,n),n=r.Message.getField(e,3),null!=n&&t.writeBytes(3,n),n=r.Message.getField(e,4),null!=n&&t.writeBytes(4,n),null!=(n=r.Message.getField(e,5))&&t.writeUint32(5,n)},proto.WidevinePsshData.EntitledKey.prototype.getEntitlementKeyId=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.WidevinePsshData.EntitledKey.prototype.getEntitlementKeyId_asB64=function(){return r.Message.bytesAsB64(this.getEntitlementKeyId())},proto.WidevinePsshData.EntitledKey.prototype.getEntitlementKeyId_asU8=function(){return r.Message.bytesAsU8(this.getEntitlementKeyId())},proto.WidevinePsshData.EntitledKey.prototype.setEntitlementKeyId=function(e){r.Message.setField(this,1,e)},proto.WidevinePsshData.EntitledKey.prototype.clearEntitlementKeyId=function(){r.Message.setField(this,1,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasEntitlementKeyId=function(){return null!=r.Message.getField(this,1)},proto.WidevinePsshData.EntitledKey.prototype.getKeyId=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.WidevinePsshData.EntitledKey.prototype.getKeyId_asB64=function(){return r.Message.bytesAsB64(this.getKeyId())},proto.WidevinePsshData.EntitledKey.prototype.getKeyId_asU8=function(){return r.Message.bytesAsU8(this.getKeyId())},proto.WidevinePsshData.EntitledKey.prototype.setKeyId=function(e){r.Message.setField(this,2,e)},proto.WidevinePsshData.EntitledKey.prototype.clearKeyId=function(){r.Message.setField(this,2,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasKeyId=function(){return null!=r.Message.getField(this,2)},proto.WidevinePsshData.EntitledKey.prototype.getKey=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.WidevinePsshData.EntitledKey.prototype.getKey_asB64=function(){return r.Message.bytesAsB64(this.getKey())},proto.WidevinePsshData.EntitledKey.prototype.getKey_asU8=function(){return r.Message.bytesAsU8(this.getKey())},proto.WidevinePsshData.EntitledKey.prototype.setKey=function(e){r.Message.setField(this,3,e)},proto.WidevinePsshData.EntitledKey.prototype.clearKey=function(){r.Message.setField(this,3,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasKey=function(){return null!=r.Message.getField(this,3)},proto.WidevinePsshData.EntitledKey.prototype.getIv=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.WidevinePsshData.EntitledKey.prototype.getIv_asB64=function(){return r.Message.bytesAsB64(this.getIv())},proto.WidevinePsshData.EntitledKey.prototype.getIv_asU8=function(){return r.Message.bytesAsU8(this.getIv())},proto.WidevinePsshData.EntitledKey.prototype.setIv=function(e){r.Message.setField(this,4,e)},proto.WidevinePsshData.EntitledKey.prototype.clearIv=function(){r.Message.setField(this,4,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasIv=function(){return null!=r.Message.getField(this,4)},proto.WidevinePsshData.EntitledKey.prototype.getEntitlementKeySizeBytes=function(){return r.Message.getFieldWithDefault(this,5,32)},proto.WidevinePsshData.EntitledKey.prototype.setEntitlementKeySizeBytes=function(e){r.Message.setField(this,5,e)},proto.WidevinePsshData.EntitledKey.prototype.clearEntitlementKeySizeBytes=function(){r.Message.setField(this,5,void 0)},proto.WidevinePsshData.EntitledKey.prototype.hasEntitlementKeySizeBytes=function(){return null!=r.Message.getField(this,5)},proto.WidevinePsshData.prototype.getKeyIdsList=function(){return r.Message.getRepeatedField(this,2)},proto.WidevinePsshData.prototype.getKeyIdsList_asB64=function(){return r.Message.bytesListAsB64(this.getKeyIdsList())},proto.WidevinePsshData.prototype.getKeyIdsList_asU8=function(){return r.Message.bytesListAsU8(this.getKeyIdsList())},proto.WidevinePsshData.prototype.setKeyIdsList=function(e){r.Message.setField(this,2,e||[])},proto.WidevinePsshData.prototype.addKeyIds=function(e,t){r.Message.addToRepeatedField(this,2,e,t)},proto.WidevinePsshData.prototype.clearKeyIdsList=function(){this.setKeyIdsList([])},proto.WidevinePsshData.prototype.getContentId=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.WidevinePsshData.prototype.getContentId_asB64=function(){return r.Message.bytesAsB64(this.getContentId())},proto.WidevinePsshData.prototype.getContentId_asU8=function(){return r.Message.bytesAsU8(this.getContentId())},proto.WidevinePsshData.prototype.setContentId=function(e){r.Message.setField(this,4,e)},proto.WidevinePsshData.prototype.clearContentId=function(){r.Message.setField(this,4,void 0)},proto.WidevinePsshData.prototype.hasContentId=function(){return null!=r.Message.getField(this,4)},proto.WidevinePsshData.prototype.getCryptoPeriodIndex=function(){return r.Message.getFieldWithDefault(this,7,0)},proto.WidevinePsshData.prototype.setCryptoPeriodIndex=function(e){r.Message.setField(this,7,e)},proto.WidevinePsshData.prototype.clearCryptoPeriodIndex=function(){r.Message.setField(this,7,void 0)},proto.WidevinePsshData.prototype.hasCryptoPeriodIndex=function(){return null!=r.Message.getField(this,7)},proto.WidevinePsshData.prototype.getProtectionScheme=function(){return r.Message.getFieldWithDefault(this,9,0)},proto.WidevinePsshData.prototype.setProtectionScheme=function(e){r.Message.setField(this,9,e)},proto.WidevinePsshData.prototype.clearProtectionScheme=function(){r.Message.setField(this,9,void 0)},proto.WidevinePsshData.prototype.hasProtectionScheme=function(){return null!=r.Message.getField(this,9)},proto.WidevinePsshData.prototype.getCryptoPeriodSeconds=function(){return r.Message.getFieldWithDefault(this,10,0)},proto.WidevinePsshData.prototype.setCryptoPeriodSeconds=function(e){r.Message.setField(this,10,e)},proto.WidevinePsshData.prototype.clearCryptoPeriodSeconds=function(){r.Message.setField(this,10,void 0)},proto.WidevinePsshData.prototype.hasCryptoPeriodSeconds=function(){return null!=r.Message.getField(this,10)},proto.WidevinePsshData.prototype.getType=function(){return r.Message.getFieldWithDefault(this,11,0)},proto.WidevinePsshData.prototype.setType=function(e){r.Message.setField(this,11,e)},proto.WidevinePsshData.prototype.clearType=function(){r.Message.setField(this,11,void 0)},proto.WidevinePsshData.prototype.hasType=function(){return null!=r.Message.getField(this,11)},proto.WidevinePsshData.prototype.getKeySequence=function(){return r.Message.getFieldWithDefault(this,12,0)},proto.WidevinePsshData.prototype.setKeySequence=function(e){r.Message.setField(this,12,e)},proto.WidevinePsshData.prototype.clearKeySequence=function(){r.Message.setField(this,12,void 0)},proto.WidevinePsshData.prototype.hasKeySequence=function(){return null!=r.Message.getField(this,12)},proto.WidevinePsshData.prototype.getGroupIdsList=function(){return r.Message.getRepeatedField(this,13)},proto.WidevinePsshData.prototype.getGroupIdsList_asB64=function(){return r.Message.bytesListAsB64(this.getGroupIdsList())},proto.WidevinePsshData.prototype.getGroupIdsList_asU8=function(){return r.Message.bytesListAsU8(this.getGroupIdsList())},proto.WidevinePsshData.prototype.setGroupIdsList=function(e){r.Message.setField(this,13,e||[])},proto.WidevinePsshData.prototype.addGroupIds=function(e,t){r.Message.addToRepeatedField(this,13,e,t)},proto.WidevinePsshData.prototype.clearGroupIdsList=function(){this.setGroupIdsList([])},proto.WidevinePsshData.prototype.getEntitledKeysList=function(){return r.Message.getRepeatedWrapperField(this,proto.WidevinePsshData.EntitledKey,14)},proto.WidevinePsshData.prototype.setEntitledKeysList=function(e){r.Message.setRepeatedWrapperField(this,14,e)},proto.WidevinePsshData.prototype.addEntitledKeys=function(e,t){return r.Message.addToRepeatedWrapperField(this,14,e,proto.WidevinePsshData.EntitledKey,t)},proto.WidevinePsshData.prototype.clearEntitledKeysList=function(){this.setEntitledKeysList([])},proto.WidevinePsshData.prototype.getAlgorithm=function(){return r.Message.getFieldWithDefault(this,1,0)},proto.WidevinePsshData.prototype.setAlgorithm=function(e){r.Message.setField(this,1,e)},proto.WidevinePsshData.prototype.clearAlgorithm=function(){r.Message.setField(this,1,void 0)},proto.WidevinePsshData.prototype.hasAlgorithm=function(){return null!=r.Message.getField(this,1)},proto.WidevinePsshData.prototype.getProvider=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.WidevinePsshData.prototype.setProvider=function(e){r.Message.setField(this,3,e)},proto.WidevinePsshData.prototype.clearProvider=function(){r.Message.setField(this,3,void 0)},proto.WidevinePsshData.prototype.hasProvider=function(){return null!=r.Message.getField(this,3)},proto.WidevinePsshData.prototype.getTrackType=function(){return r.Message.getFieldWithDefault(this,5,"")},proto.WidevinePsshData.prototype.setTrackType=function(e){r.Message.setField(this,5,e)},proto.WidevinePsshData.prototype.clearTrackType=function(){r.Message.setField(this,5,void 0)},proto.WidevinePsshData.prototype.hasTrackType=function(){return null!=r.Message.getField(this,5)},proto.WidevinePsshData.prototype.getPolicy=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.WidevinePsshData.prototype.setPolicy=function(e){r.Message.setField(this,6,e)},proto.WidevinePsshData.prototype.clearPolicy=function(){r.Message.setField(this,6,void 0)},proto.WidevinePsshData.prototype.hasPolicy=function(){return null!=r.Message.getField(this,6)},proto.WidevinePsshData.prototype.getGroupedLicense=function(){return r.Message.getFieldWithDefault(this,8,"")},proto.WidevinePsshData.prototype.getGroupedLicense_asB64=function(){return r.Message.bytesAsB64(this.getGroupedLicense())},proto.WidevinePsshData.prototype.getGroupedLicense_asU8=function(){return r.Message.bytesAsU8(this.getGroupedLicense())},proto.WidevinePsshData.prototype.setGroupedLicense=function(e){r.Message.setField(this,8,e)},proto.WidevinePsshData.prototype.clearGroupedLicense=function(){r.Message.setField(this,8,void 0)},proto.WidevinePsshData.prototype.hasGroupedLicense=function(){return null!=r.Message.getField(this,8)},i.object.extend(t,proto)},function(module,exports,__webpack_require__){(function(global,Buffer){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{i:i,v:o}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,n,r){if(t){for(n=$jscomp.global,e=e.split("."),r=0;r<e.length-1;r++){var i=e[r];i in n||(n[i]={}),n=n[i]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.findIndex",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).i}},"es6","es3"),$jscomp.checkStringArgs=function(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.startsWith",function(e){return e||function(e,t){var n=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var r=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var o=0;o<i&&t<r;)if(n[t++]!=e[o++])return!1;return o>=i}},"es6","es3"),$jscomp.polyfill("String.prototype.endsWith",function(e){return e||function(e,t){var n=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var r=e.length;0<r&&0<t;)if(n[--t]!=e[--r])return!1;return 0>=r}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(e){return e||function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(e){return void 0!==e},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.exportPath_=function(e,t,n){e=e.split("."),n=n||goog.global,e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)!e.length&&goog.isDef(t)?n[r]=t:n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}},goog.define=function(e,t){if(!COMPILED){var n=goog.global.CLOSURE_UNCOMPILED_DEFINES,r=goog.global.CLOSURE_DEFINES;n&&void 0===n.nodeType&&Object.prototype.hasOwnProperty.call(n,e)?t=n[e]:r&&void 0===r.nodeType&&Object.prototype.hasOwnProperty.call(r,e)&&(t=r[e])}return goog.exportPath_(e,t),t},goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var n=e;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(e,t)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e].exports;if(!goog.implicitNamespaces_[e])return e=goog.getObjectByName(e),null!=e?e:null}return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&("function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath())},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(e in goog.loadedModules_)throw Error('Module with namespace "'+e+'" already exists.')}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.module.declareNamespace=goog.declareModuleId,goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var n=0;n<e.length;n++)if(t=t[e[n]],!goog.isDefAndNotNull(t))return null;return t},goog.globalize=function(e,t){t=t||goog.global;for(var n in e)t[n]=e[n]},goog.addDependency=function(e,t,n,r){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(e,t,n,r)},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(e),goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(e)}finally{goog.moduleLoaderState_=t}}return null}},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(e))var n=e.call(void 0,{});else{if(!goog.isString(e))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),n=goog.loadModuleFromSource_.call(void 0,e)}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof n&&null!=n&&Object.seal(n),goog.loadedModules_[r]={exports:n,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(a,b,c){var d=goog.global.$jscomp;d||(goog.global.$jscomp=d={});var e=d.transpile;if(!e){var f=goog.basePath+goog.TRANSPILER,g=goog.loadFileSync_(f);if(g){if(function(){eval(g+"\n//# sourceURL="+f)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,d=goog.global.$jscomp,e=d.transpile}}return e||(e=d.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}),e(a,b,c)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();t="array"==t?[]:{};for(var n in e)t[n]=goog.cloneObject(e[n]);return t}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,n=t.createElement("SCRIPT");n.type="text/javascript",n.defer=!1,n.appendChild(t.createTextNode(e)),t.head.appendChild(n),t.head.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var n=function(e){return goog.cssNameMapping_[e]||e},r=function(e){e=e.split("-");for(var t=[],r=0;r<e.length;r++)t.push(n(e[r]));return t.join("-")};return r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:r:function(e){return e},e=t?e+"-"+r(t):r(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}},goog.base=function(e,t,n){var r=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(void 0!==r.superClass_){for(var i=Array(arguments.length-1),o=1;o<arguments.length;o++)i[o-1]=arguments[o];return r.superClass_.constructor.apply(e,i)}if("string"!=typeof t&&"symbol"!=typeof t)throw Error("method names provided to goog.base must be a string or a symbol");for(i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];o=!1;for(var a=e.constructor;a;a=a.superClass_&&a.superClass_.constructor)if(a.prototype[t]===r)o=!0;else if(o)return a.prototype[t].apply(e,i);if(e[t]===r)return e.constructor.prototype[t].apply(e,i);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var n=t.constructor,r=t.statics;return n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),n=goog.defineClass.createSealingConstructor_(n,e),e&&goog.inherits(n,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(n.prototype,t),null!=r&&(r instanceof Function?r(n):goog.defineClass.applyProperties_(n,r)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var n=!goog.defineClass.isUnsealable_(t),r=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===r&&n&&Object.seal instanceof Function&&Object.seal(t),t};return r},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.isDocumentLoading_=function(){var e=goog.global.document;return e.attachEvent?"complete"!=e.readyState:"loading"==e.readyState},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)&&goog.isString(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var e=goog.global.document,t=e.currentScript;for(e=t?[t]:e.getElementsByTagName("SCRIPT"),t=e.length-1;0<=t;--t){var n=e[t].src,r=n.lastIndexOf("?");if(r=-1==r?n.length:r,"base.js"==n.substr(r-7,7)){goog.basePath=n.substr(0,r-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null,this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(t,n){e?d[t]=!0:n()?(c=t,d[t]=!1):e=d[t]=!0}function b(a){try{return!!eval(a)}catch(e){return!1}}var c="es3",d={es3:!1},e=!1,f=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",function(){return b("[1,].length==1")}),a("es6",function(){return!f.match(/Edge\/(\d+)(\.\d)*/i)&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')}),a("es6-impl",function(){return!0}),a("es7",function(){return b("2 ** 2 == 4")}),a("es8",function(){return b("async () => 1, true")}),a("es9",function(){return b("({...rest} = {}), true")}),a("es_next",function(){return!1}),{target:c,map:d}},goog.Transpiler.prototype.needsTranspile=function(e,t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!this.requiresTranspilation_){var n=this.createRequiresTranspilation_();this.requiresTranspilation_=n.map,this.transpilationTarget_=this.transpilationTarget_||n.target}if(e in this.requiresTranspilation_)return!!this.requiresTranspilation_[e]||!(!goog.inHtmlDocument_()||"es6"!=t||"noModule"in goog.global.document.createElement("script"));throw Error("Unknown language mode: "+e)},goog.Transpiler.prototype.transpile=function(e,t){return goog.transpile_(e,t,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={},this.idToPath_={},this.written_={},this.loadingDeps_=[],this.depsToLoad_=[],this.paused_=!1,this.factory_=new goog.DependencyFactory(goog.transpiler_),this.deferredCallbacks_={},this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(e,t){function n(){r&&(goog.global.setTimeout(r,0),r=null)}var r=t;if(e.length){t=[];for(var i=0;i<e.length;i++){var o=this.getPathFromDeps_(e[i]);if(!o)throw Error("Unregonized namespace: "+e[i]);t.push(this.dependencies_[o])}o=goog.require;var a=0;for(i=0;i<e.length;i++)o(e[i]),t[i].onLoad(function(){++a==e.length&&n()})}else n()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1)),this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(e,t){(e=this.getPathFromDeps_(e))&&(t||this.areDepsLoaded_(this.dependencies_[e].requires))&&(t=this.deferredCallbacks_[e])&&(delete this.deferredCallbacks_[e],t())},goog.DebugLoader_.prototype.setDependencyFactory=function(e){this.factory_=e},goog.DebugLoader_.prototype.load_=function(e){if(!this.getPathFromDeps_(e))throw e="goog.require could not find: "+e,goog.logToConsole_(e),Error(e);var t=this,n=[],r=function(e){var i=t.getPathFromDeps_(e);if(!i)throw Error("Bad dependency path or symbol: "+e);if(!t.written_[i]){for(t.written_[i]=!0,e=t.dependencies_[i],i=0;i<e.requires.length;i++)goog.isProvided_(e.requires[i])||r(e.requires[i]);n.push(e)}};r(e),e=!!this.depsToLoad_.length,this.depsToLoad_=this.depsToLoad_.concat(n),this.paused_||e||this.loadDeps_()},goog.DebugLoader_.prototype.loadDeps_=function(){for(var e=this,t=this.paused_;this.depsToLoad_.length&&!t;)!function(){var n=!1,r=e.depsToLoad_.shift(),i=!1;e.loading_(r);var o={pause:function(){if(n)throw Error("Cannot call pause after the call to load.");t=!0},resume:function(){n?e.resume_():t=!1},loaded:function(){if(i)throw Error("Double call to loaded.");i=!0,e.loaded_(r)},pending:function(){for(var t=[],n=0;n<e.loadingDeps_.length;n++)t.push(e.loadingDeps_[n]);return t},setModuleState:function(e){goog.moduleLoaderState_={type:e,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(e,t,n){n&&(goog.loadedModules_[n]={exports:t,type:goog.ModuleType.ES6,moduleId:n||""})},registerGoogModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.GOOG,moduleId:e}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(t){if(n)throw Error("Cannot register with defer after the call to load.");e.defer_(r,t)},areDepsLoaded:function(){return e.areDepsLoaded_(r.requires)}};try{r.load(o)}finally{n=!0}}();t&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(e){this.loadingDeps_.push(e)},goog.DebugLoader_.prototype.loaded_=function(e){for(var t=0;t<this.loadingDeps_.length;t++)if(this.loadingDeps_[t]==e){this.loadingDeps_.splice(t,1);break}for(t=0;t<this.deferredQueue_.length;t++)if(this.deferredQueue_[t]==e.path){this.deferredQueue_.splice(t,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);e.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(e){for(var t=0;t<e.length;t++){var n=this.getPathFromDeps_(e[t]);if(!n||!(n in this.deferredCallbacks_||goog.isProvided_(e[t])))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=function(e){return e in this.idToPath_?this.idToPath_[e]:e in this.dependencies_?e:null},goog.DebugLoader_.prototype.defer_=function(e,t){this.deferredCallbacks_[e.path]=t,this.deferredQueue_.push(e.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(e,t,n){},goog.LoadController.prototype.setModuleState=function(e){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(e){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(e,t,n,r,i){this.path=e,this.relativePath=t,this.provides=n,this.requires=r,this.loadFlags=i,this.loaded_=!1,this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var e=this.path,t=e.indexOf("://");return 0<=t&&(e=e.substring(t+3),0<=(t=e.indexOf("/"))&&(e=e.substring(t+1))),e},goog.Dependency.prototype.onLoad=function(e){this.loaded_?e():this.loadCallbacks_.push(e)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var e=this.loadCallbacks_;this.loadCallbacks_=[];for(var t=0;t<e.length;t++)e[t]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(e){var t=Math.random().toString(32);return goog.Dependency.callbackMap_[t]=e,t},goog.Dependency.unregisterCallback_=function(e){delete goog.Dependency.callbackMap_[e]},goog.Dependency.callback_=function(e,t){if(!(e in goog.Dependency.callbackMap_))throw Error("Callback key "+e+" does not exist (was base.js loaded more than once?).");for(var n=goog.Dependency.callbackMap_[e],r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);n.apply(void 0,r)},goog.Dependency.prototype.load=function(e){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document;if("complete"==t.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path))return void e.loaded();throw Error('Cannot write "'+this.path+'" after document load')}if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var n=goog.Dependency.registerCallback_(function(t){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=t.readyState||(goog.Dependency.unregisterCallback_(n),e.loaded())}),r=!goog.DebugLoader_.IS_OLD_IE_&&goog.getScriptNonce()?' nonce="'+goog.getScriptNonce()+'"':"";t.write('<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+n+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+r+"><\/script>")}else{var i=t.createElement("script");i.defer=goog.Dependency.defer_,i.async=!1,i.type="text/javascript",(r=goog.getScriptNonce())&&i.setAttribute("nonce",r),goog.DebugLoader_.IS_OLD_IE_?(e.pause(),i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(e.loaded(),e.resume())}):i.onload=function(){i.onload=null,e.loaded()},i.src=this.path,t.head.appendChild(i)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),e.loaded()):e.pause()},goog.Es6ModuleDependency=function(e,t,n,r,i){goog.Dependency.call(this,e,t,n,r,i)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(e){function t(e,t){t?r.write('<script type="module" crossorigin>'+t+"<\/script>"):r.write('<script type="module" crossorigin src="'+e+'"><\/script>')}function n(e,t){var n=r.createElement("script");n.defer=!0,n.async=!1,n.type="module",n.setAttribute("crossorigin",!0);var i=goog.getScriptNonce();i&&n.setAttribute("nonce",i),t?n.textContent=t:n.src=e,r.head.appendChild(n)}if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var r=goog.global.document,i=this;if(goog.isDocumentLoading_()){var o=t;goog.Dependency.defer_=!0}else o=n;var a=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(a),e.setModuleState(goog.ModuleType.ES6)});o(void 0,'goog.Dependency.callback_("'+a+'")'),o(this.path,void 0);var s=goog.Dependency.registerCallback_(function(t){goog.Dependency.unregisterCallback_(s),e.registerEs6ModuleExports(i.path,t,goog.moduleLoaderState_.moduleName)});o(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+s+'", m)');var u=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(u),e.clearModuleState(),e.loaded()});o(void 0,'goog.Dependency.callback_("'+u+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),e.pause()},goog.TransformedDependency=function(e,t,n,r,i){goog.Dependency.call(this,e,t,n,r,i),this.contents_=null,this.lazyFetch_=!(goog.inHtmlDocument_()&&"noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(e){function t(){r.contents_=goog.loadFileSync_(r.path),r.contents_&&(r.contents_=r.transform(r.contents_),r.contents_&&(r.contents_+="\n//# sourceURL="+r.path))}function n(){if(r.lazyFetch_&&t(),r.contents_){i&&e.setModuleState(goog.ModuleType.ES6);try{var n=r.contents_;if(r.contents_=null,goog.globalEval(n),i)var o=goog.moduleLoaderState_.moduleName}finally{i&&e.clearModuleState()}i&&goog.global.$jscomp.require.ensure([r.getPathName()],function(){e.registerEs6ModuleExports(r.path,goog.global.$jscomp.require(r.getPathName()),o)}),e.loaded()}}var r=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)t(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,e.loaded()):e.pause();else{var i=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||t();var o=1<e.pending().length,a=o&&goog.DebugLoader_.IS_OLD_IE_;if(o=goog.Dependency.defer_&&(o||goog.isDocumentLoading_()),a||o)e.defer(function(){n()});else{var s=goog.global.document;if(a=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global,i&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!a){goog.Dependency.defer_=!0,e.pause();var u=s.onreadystatechange;s.onreadystatechange=function(){"interactive"==s.readyState&&(s.onreadystatechange=u,n(),e.resume()),goog.isFunction(u)&&u.apply(void 0,arguments)}}else!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?function(){var e=goog.global.document,t=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(t),n()});e.write('<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+t+'");')+"<\/script>")}():n()}}},goog.TransformedDependency.prototype.transform=function(e){},goog.TranspiledDependency=function(e,t,n,r,i,o){goog.TransformedDependency.call(this,e,t,n,r,i),this.transpiler=o},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(e){return this.transpiler.transpile(e,this.getPathName())},goog.PreTranspiledEs6ModuleDependency=function(e,t,n,r,i){goog.TransformedDependency.call(this,e,t,n,r,i)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(e){return e},goog.GoogModuleDependency=function(e,t,n,r,i,o,a){goog.TransformedDependency.call(this,e,t,n,r,i),this.needsTranspile_=o,this.transpiler_=a},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(e){return this.needsTranspile_&&(e=this.transpiler_.transpile(e,this.getPathName())),goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(e,t,n,r){t=t||[],e=e.replace(/\\/g,"/");var i=goog.normalizePath_(goog.basePath+e);for(r&&"boolean"!=typeof r||(r=r?{module:goog.ModuleType.GOOG}:{}),n=this.factory_.createDependency(i,e,t,n,r,goog.transpiler_.needsTranspile(r.lang||"es3",r.module)),this.dependencies_[i]=n,n=0;n<t.length;n++)this.idToPath_[t[n]]=i;this.idToPath_[e]=i},goog.DependencyFactory=function(e){this.transpiler=e},goog.DependencyFactory.prototype.createDependency=function(e,t,n,r,i,o){return i.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(e,t,n,r,i,o,this.transpiler):o?new goog.TranspiledDependency(e,t,n,r,i,this.transpiler):i.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(e,t,n,r,i):new goog.Es6ModuleDependency(e,t,n,r,i):new goog.Dependency(e,t,n,r,i)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(e){goog.debugLoader_.setDependencyFactory(e)},goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(e,t){goog.debugLoader_.bootstrap(e,t)});var jspb={BinaryConstants:{},ConstBinaryMessage:function(){},BinaryMessage:function(){}};jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,n=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return n.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return n.FIXED64;case t.STRING:case t.MESSAGE:case t.BYTES:return n.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return n.FIXED32;default:return n.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1.401298464324817e-45,jspb.BinaryConstants.FLOAT32_MIN=1.1754943508222875e-38,jspb.BinaryConstants.FLOAT32_MAX=3.4028234663852886e38,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=2.2250738585072014e-308,jspb.BinaryConstants.FLOAT64_MAX=1.7976931348623157e308,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=0x8000000000000000,jspb.BinaryConstants.TWO_TO_64=0x10000000000000000,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){e=e.split("%s");for(var n="",r=e.length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");return n+e[r]},goog.asserts.doAssertFailure_=function(e,t,n,r){var i="Assertion failed";if(n){i+=": "+n;var o=r}else e&&(i+=": "+e,o=t);e=new goog.asserts.AssertionError(""+i,o||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,r){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=!1,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==n?e.length-1:n)}:function(e,t,n){if(n=null==n?e.length-1:n,0>n&&(n=Math.max(0,e.length+n)),goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,n):-1;for(;0<=n;n--)if(n in e&&e[n]===t)return n;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,n){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},goog.array.forEachRight=function(e,t,n){var r=e.length,i=goog.isString(e)?e.split(""):e;for(--r;0<=r;--r)r in i&&t.call(n,i[r],r,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=[],o=0,a=goog.isString(e)?e.split(""):e,s=0;s<r;s++)if(s in a){var u=a[s];t.call(n,u,s,e)&&(i[o++]=u)}return i},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=Array(r),o=goog.isString(e)?e.split(""):e,a=0;a<r;a++)a in o&&(i[a]=t.call(n,o[a],a,e));return i},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,n,r){return goog.asserts.assert(null!=e.length),r&&(t=goog.bind(t,r)),Array.prototype.reduce.call(e,t,n)}:function(e,t,n,r){var i=n;return goog.array.forEach(e,function(n,o){i=t.call(r,i,n,o,e)}),i},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,n,r){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),r&&(t=goog.bind(t,r)),Array.prototype.reduceRight.call(e,t,n)}:function(e,t,n,r){var i=n;return goog.array.forEachRight(e,function(n,o){i=t.call(r,i,n,o,e)}),i},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&t.call(n,i[o],o,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&!t.call(n,i[o],o,e))return!1;return!0},goog.array.count=function(e,t,n){var r=0;return goog.array.forEach(e,function(e,i,o){t.call(n,e,i,o)&&++r},n),r},goog.array.find=function(e,t,n){return t=goog.array.findIndex(e,t,n),0>t?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,n){for(var r=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&t.call(n,i[o],o,e))return o;return-1},goog.array.findRight=function(e,t,n){return t=goog.array.findIndexRight(e,t,n),0>t?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,n){var r=e.length,i=goog.isString(e)?e.split(""):e;for(--r;0<=r;r--)if(r in i&&t.call(n,i[r],r,e))return r;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,n){goog.array.splice(e,n,0,t)},goog.array.insertArrayAt=function(e,t,n){goog.partial(goog.array.splice,e,n,0).apply(null,t)},goog.array.insertBefore=function(e,t,n){var r;2==arguments.length||0>(r=goog.array.indexOf(e,n))?e.push(t):goog.array.insertAt(e,t,r)},goog.array.remove=function(e,t){t=goog.array.indexOf(e,t);var n;return(n=0<=t)&&goog.array.removeAt(e,t),n},goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,n){return 0<=(t=goog.array.findIndex(e,t,n))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(e,t,n){var r=0;return goog.array.forEachRight(e,function(i,o){t.call(n,i,o,e)&&goog.array.removeAt(e,o)&&r++}),r},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(goog.isArrayLike(r)){var i=e.length||0,o=r.length||0;e.length=i+o;for(var a=0;a<o;a++)e[i+a]=r[a]}else e.push(r)}},goog.array.splice=function(e,t,n,r){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,n){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)},goog.array.removeDuplicates=function(e,t,n){t=t||e;var r=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};n=n||r,r={};for(var i=0,o=0;o<e.length;){var a=e[o++],s=n(a);Object.prototype.hasOwnProperty.call(r,s)||(r[s]=!0,t[i++]=a)}t.length=i},goog.array.binarySearch=function(e,t,n){return goog.array.binarySearch_(e,n||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,n){return goog.array.binarySearch_(e,t,!0,void 0,n)},goog.array.binarySearch_=function(e,t,n,r,i){for(var o,a=0,s=e.length;a<s;){var u=a+s>>1,c=n?t.call(i,e[u],u,e):t(r,e[u]);0<c?a=u+1:(s=u,o=!c)}return o?a:~a},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]={index:r,value:e[r]};var i=t||goog.array.defaultCompare;for(goog.array.sort(n,function(e,t){return i(e.value,t.value)||e.index-t.index}),r=0;r<e.length;r++)e[r]=n[r].value},goog.array.sortByKey=function(e,t,n){var r=n||goog.array.defaultCompare;goog.array.sort(e,function(e,n){return r(t(e),t(n))})},goog.array.sortObjectsByKey=function(e,t,n){goog.array.sortByKey(e,function(e){return e[t]},n)},goog.array.isSorted=function(e,t,n){t=t||goog.array.defaultCompare;for(var r=1;r<e.length;r++){var i=t(e[r-1],e[r]);if(0<i||0==i&&n)return!1}return!0},goog.array.equals=function(e,t,n){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var r=e.length;n=n||goog.array.defaultCompareEquality;for(var i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0},goog.array.compare3=function(e,t,n){n=n||goog.array.defaultCompare;for(var r=Math.min(e.length,t.length),i=0;i<r;i++){var o=n(e[i],t[i]);if(0!=o)return o}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,n){return 0>(n=goog.array.binarySearch(e,t,n))&&(goog.array.insertAt(e,t,-(n+1)),!0)},goog.array.binaryRemove=function(e,t,n){return 0<=(t=goog.array.binarySearch(e,t,n))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,n){for(var r={},i=0;i<e.length;i++){var o=e[i],a=t.call(n,o,i,e);goog.isDef(a)&&(r[a]||(r[a]=[])).push(o)}return r},goog.array.toObject=function(e,t,n){var r={};return goog.array.forEach(e,function(i,o){r[t.call(n,i,o,e)]=i}),r},goog.array.range=function(e,t,n){var r=[],i=0,o=e;if(n=n||1,void 0!==t&&(i=e,o=t),0>n*(o-i))return[];if(0<n)for(e=i;e<o;e+=n)r.push(e);else for(e=i;e>o;e+=n)r.push(e);return r},goog.array.repeat=function(e,t){for(var n=[],r=0;r<t;r++)n[r]=e;return n},goog.array.flatten=function(e){for(var t=[],n=0;n<arguments.length;n++){var r=arguments[n];if(goog.isArray(r))for(var i=0;i<r.length;i+=8192){var o=goog.array.slice(r,i,i+8192);o=goog.array.flatten.apply(null,o);for(var a=0;a<o.length;a++)t.push(o[a])}else t.push(r)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(t%=e.length,0<t?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,n){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=n&&n<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,n,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],n=arguments[0].length,r=1;r<arguments.length;r++)arguments[r].length<n&&(n=arguments[r].length);for(r=0;r<n;r++){for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o][r]);t.push(i)}return t},goog.array.shuffle=function(e,t){t=t||Math.random;for(var n=e.length-1;0<n;n--){var r=Math.floor(t()*(n+1)),i=e[n];e[n]=e[r],e[r]=i}},goog.array.copyByIndex=function(e,t){var n=[];return goog.array.forEach(t,function(t){n.push(e[t])}),n},goog.array.concatMap=function(e,t,n){return goog.array.concat.apply([],goog.array.map(e,t,n))},goog.crypt={},goog.crypt.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);255<i&&(t[n++]=255&i,i>>=8),t[n++]=i}return t},goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",n=0;n<e.length;n+=8192){var r=goog.array.slice(e,n,n+8192);t+=String.fromCharCode.apply(null,r)}return t},goog.crypt.byteArrayToHex=function(e,t){return goog.array.map(e,function(e){return e=e.toString(16),1<e.length?e:"0"+e}).join(t||"")},goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substring(n,n+2),16));return t},goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);128>i?t[n++]=i:(2048>i?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(128>i)t[r++]=String.fromCharCode(i);else if(191<i&&224>i){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=e[n++];var a=e[n++],s=e[n++];i=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536,t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else o=e[n++],a=e[n++],t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return t.join("")},goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var n=[],r=0;r<e.length;r++)n.push(e[r]^t[r]);return n},goog.string={},goog.string.internal={},goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.internal.endsWith=function(e,t){var n=e.length-t.length;return 0<=n&&e.indexOf(t,n)==n},goog.string.internal.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.internal.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.internal.caseInsensitiveCompare=function(e,t){return e=String(e).toLowerCase(),t=String(t).toLowerCase(),e<t?-1:e==t?0:1},goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.internal.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.internal.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.internal.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.internal.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.internal.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())},goog.string.internal.compareVersions=function(e,t){var n=0;e=goog.string.internal.trim(String(e)).split("."),t=goog.string.internal.trim(String(t)).split(".");for(var r=Math.max(e.length,t.length),i=0;0==n&&i<r;i++){var o=e[i]||"",a=t[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;n=0==o[1].length?0:parseInt(o[1],10);var s=0==a[1].length?0:parseInt(a[1],10);n=goog.string.internal.compareElements_(n,s)||goog.string.internal.compareElements_(0==o[2].length,0==a[2].length)||goog.string.internal.compareElements_(o[2],a[2]),o=o[3],a=a[3]}while(0==n)}return n},goog.string.internal.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"�">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(e,t,n){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var r=e.toLowerCase().match(n),i=t.toLowerCase().match(n),o=Math.min(r.length,i.length),a=0;a<o;a++){n=r[a];var s=i[a];if(n!=s)return e=parseInt(n,10),!isNaN(e)&&(t=parseInt(s,10),!isNaN(t)&&e-t)?e-t:n<s?-1:1}return r.length!=i.length?r.length-i.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(e,t){return e=goog.string.internal.htmlEscape(e,t),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},r=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var i=n[e];return i||("#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(i=String.fromCharCode(t))),i||(r.innerHTML=e+" ",i=r.firstChild.nodeValue.slice(0,-1)),n[e]=i)})},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var n=t.length,r=0;r<n;r++){var i=1==n?t:t.charAt(r);if(e.charAt(0)==i&&e.charAt(e.length-1)==i)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,n){return n&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),n&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,n,r){if(n&&(e=goog.string.unescapeEntities(e)),r&&e.length>t){r>t&&(r=t);var i=e.length-r;e=e.substring(0,t-r)+"..."+e.substring(i)}else e.length>t&&(r=Math.floor(t/2),i=e.length-r,e=e.substring(0,r+t%2)+"..."+e.substring(i));return n&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],n=0;n<e.length;n++){var r=e.charAt(n),i=r.charCodeAt(0);t[n+1]=goog.string.specialEscapeChars_[r]||(31<i&&127>i?r:goog.string.escapeChar(r))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=goog.string.escapeChar(e.charAt(n));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e.charCodeAt(0);if(31<t&&127>t)var n=e;else 256>t?(n="\\x",(16>t||256<t)&&(n+="0")):(n="\\u",4096>t&&(n+="0")),n+=t.toString(16).toUpperCase();return goog.string.jsEscapeCache_[e]=n},goog.string.contains=goog.string.internal.contains;goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,n){var r=e;return 0<=t&&t<e.length&&0<n&&(r=e.substr(0,t)+e.substr(t+n,e.length-t-n)),r},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,"")},goog.string.replaceAll=function(e,t,n){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,n.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,n){return e=goog.isDef(n)?e.toFixed(n):String(e),n=e.indexOf("."),-1==n&&(n=e.length),goog.string.repeat("0",Math.max(0,t-n))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(e){for(var t=0,n=0;n<e.length;++n)t=31*t+e.charCodeAt(n)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){return t=goog.isString(t)?goog.string.regExpEscape(t):"\\s",e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),function(e,t,n){return t+n.toUpperCase()})},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),goog.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,n){e=e.split(t);for(var r=[];0<n&&e.length;)r.push(e.shift()),n--;return e.length&&r.push(e.join(t)),r},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var n=-1,r=0;r<t.length;r++)if(""!=t[r]){var i=e.lastIndexOf(t[r]);i>n&&(n=i)}return-1==n?e:e.slice(n+1)},goog.string.editDistance=function(e,t){var n=[],r=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var i=0;i<t.length+1;i++)n[i]=i;for(i=0;i<e.length;i++){r[0]=i+1;for(var o=0;o<t.length;o++)r[o+1]=Math.min(r[o]+1,n[o+1]+1,n[o]+Number(e[i]!=t[o]));for(o=0;o<n.length;o++)n[o]=r[o]}return r[t.length]},goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,n=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,r=[];t=n.exec(e);)r.push([t[1],t[2],t[3]||void 0]);return r},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.isGo2Phone=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?(t=/Windows (?:NT|Phone) ([0-9.]+)/,t=(e=t.exec(e))?e[1]:"0.0"):goog.labs.userAgent.platform.isIos()?(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,t=(e=t.exec(e))&&e[1].replace(/_/g,".")):goog.labs.userAgent.platform.isMacintosh()?(t=/Mac OS X ([0-9_.]+)/,t=(e=t.exec(e))?e[1].replace(/_/g,"."):"10"):goog.labs.userAgent.platform.isAndroid()?(t=/Android\s+([^\);]+)(\)|;)/,t=(e=t.exec(e))&&e[1]):goog.labs.userAgent.platform.isChromeOS()&&(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,t=(e=t.exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t},goog.object.forEach=function(e,t,n){for(var r in e)t.call(n,e[r],r,e)},goog.object.filter=function(e,t,n){var r,i={};for(r in e)t.call(n,e[r],r,e)&&(i[r]=e[r]);return i},goog.object.map=function(e,t,n){var r,i={};for(r in e)i[r]=t.call(n,e[r],r,e);return i},goog.object.some=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return!0;return!1},goog.object.every=function(e,t,n){for(var r in e)if(!t.call(n,e[r],r,e))return!1;return!0},goog.object.getCount=function(e){var t,n=0;for(t in e)n++;return n},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,n=[],r=0;for(t in e)n[r++]=e[t];return n},goog.object.getKeys=function(e){var t,n=[],r=0;for(t in e)n[r++]=t;return n},goog.object.getValueByKeys=function(e,t){var n=goog.isArrayLike(t),r=n?t:arguments;for(n=n?0:1;n<r.length;n++){if(null==e)return;e=e[r[n]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},goog.object.findKey=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},goog.object.findValue=function(e,t,n){return(t=goog.object.findKey(e,t,n))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var n;return(n=t in e)&&delete e[t],n},goog.object.add=function(e,t,n){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,n)},goog.object.get=function(e,t,n){return null!==e&&t in e?e[t]:n},goog.object.set=function(e,t,n){e[t]=n},goog.object.setIfUndefined=function(e,t,n){return t in e?e[t]:e[t]=n},goog.object.setWithReturnValueIfNotSet=function(e,t,n){return t in e?e[t]:(n=n(),e[t]=n)},goog.object.equals=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(n in t)if(!(n in e))return!1;return!0},goog.object.clone=function(e){var t,n={};for(t in e)n[t]=e[t];return n},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();t="array"==t?[]:{};for(var n in e)t[n]=goog.object.unsafeClone(e[n]);return t}return e},goog.object.transpose=function(e){var t,n={};for(t in e)n[e[t]]=t;return n},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var o=0;o<goog.object.PROTOTYPE_FIELDS_.length;o++)n=goog.object.PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var n={},r=0;r<t;r+=2)n[arguments[r]]=arguments[r+1];return n},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var n={},r=0;r<t;r++)n[arguments[r]]=!0;return n},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,n){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var r={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||n);){for(var i=Object.getOwnPropertyNames(e),o=0;o<i.length;o++)r[i[o]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(r)},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdge_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,r),n[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var n={};goog.array.forEach(t,function(e){n[e[0]]=e[1]});var r=goog.partial(goog.object.containsKey,n);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var n=/MSIE +([\d\.]+)/.exec(e);if(n&&n[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==n[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=n[1];return t},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,n,r){return r=r?r(t):t,Object.prototype.hasOwnProperty.call(e,r)?e[r]:e[r]=n(t)},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e);var t=goog.labs.userAgent.engine.getEngineTuple_(e);if(t)return"Gecko"==t[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):t[1];e=e[0];var n;if(e&&(n=e[2])&&(n=/Trident\/([^\s;]+)/.exec(n)))return n[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var n=e[t];if("Edge"==n[0])return n}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,function(e){return t==e[0]}))&&e[1]||""},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.ASSUME_GO2PHONE=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.GO2PHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_GO2PHONE:goog.labs.userAgent.platform.isGo2Phone(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e)?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){var e=goog.global.document,t=goog.userAgent.getDocumentMode_();if(e&&goog.userAgent.IE)return t||("CSS1Compat"==e.compatMode?parseInt(goog.userAgent.VERSION,10):5)}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox();goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.byteToCharMap_=null,goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.byteToCharMapWebSafe_=null,goog.crypt.base64.ENCODED_VALS_BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.ENCODED_VALS_BASE+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.ENCODED_VALS_BASE+"-_.",goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa,goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob,goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter"),goog.crypt.base64.init_(),t=t?goog.crypt.base64.byteToCharMapWebSafe_:goog.crypt.base64.byteToCharMap_;for(var n=[],r=0;r<e.length;r+=3){var i=e[r],o=r+1<e.length,a=o?e[r+1]:0,s=r+2<e.length,u=s?e[r+2]:0,c=i>>2;i=(3&i)<<4|a>>4,a=(15&a)<<2|u>>6,u&=63,s||(u=64,o||(a=64)),n.push(t[c],t[i],t[a],t[u])}return n.join("")},goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)},goog.crypt.base64.decodeString=function(e,t){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var n="";return goog.crypt.base64.decodeStringInternal_(e,function(e){n+=String.fromCharCode(e)}),n},goog.crypt.base64.decodeStringToByteArray=function(e,t){var n=[];return goog.crypt.base64.decodeStringInternal_(e,function(e){n.push(e)}),n},goog.crypt.base64.decodeStringToUint8Array=function(e){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=e.length,n=0;"="===e[t-2]?n=2:"="===e[t-1]&&(n=1);var r=new Uint8Array(Math.ceil(3*t/4)-n),i=0;return goog.crypt.base64.decodeStringInternal_(e,function(e){r[i++]=e}),r.subarray(0,i)},goog.crypt.base64.decodeStringInternal_=function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=goog.crypt.base64.charToByteMap_[n];if(null!=i)return i;if(!goog.string.isEmptyOrWhitespace(n))throw Error("Unknown base64 encoding at char: "+n)}return t}goog.crypt.base64.init_();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.byteToCharMap_){goog.crypt.base64.byteToCharMap_={},goog.crypt.base64.charToByteMap_={},goog.crypt.base64.byteToCharMapWebSafe_={};for(var e=0;e<goog.crypt.base64.ENCODED_VALS.length;e++)goog.crypt.base64.byteToCharMap_[e]=goog.crypt.base64.ENCODED_VALS.charAt(e),goog.crypt.base64.charToByteMap_[goog.crypt.base64.byteToCharMap_[e]]=e,goog.crypt.base64.byteToCharMapWebSafe_[e]=goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e),e>=goog.crypt.base64.ENCODED_VALS_BASE.length&&(goog.crypt.base64.charToByteMap_[goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e)]=e)}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=t,jspb.utils.split64High=e},jspb.utils.splitInt64=function(e){var t=0>e;e=Math.abs(e);var n=e>>>0;e=Math.floor((e-n)/jspb.BinaryConstants.TWO_TO_32),e>>>=0,t&&(e=~e>>>0,4294967295<(n=1+(~n>>>0))&&(n=0,4294967295<++e&&(e=0))),jspb.utils.split64Low=n,jspb.utils.split64High=e},jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e),jspb.utils.splitUint64(e),e=jspb.utils.split64Low;var n=jspb.utils.split64High;t&&(0==e?0==n?n=e=4294967295:(n--,e=4294967295):e--),jspb.utils.split64Low=e,jspb.utils.split64High=n},jspb.utils.splitFloat32=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(e))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(e>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|2139095040)>>>0;else if(e<jspb.BinaryConstants.FLOAT32_MIN)e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|e)>>>0;else{var n=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-n),e=8388607&Math.round(e*jspb.BinaryConstants.TWO_TO_23),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|n+127<<23|e)>>>0}},jspb.utils.splitFloat64=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){var n=e/Math.pow(2,-1074);e=n/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(t<<31|e)>>>0,jspb.utils.split64Low=n>>>0}else{var r=Math.floor(Math.log(e)/Math.LN2);1024==r&&(r=1023),n=e*Math.pow(2,-r),e=n*jspb.BinaryConstants.TWO_TO_20&1048575,n=n*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(t<<31|r+1023<<20|e)>>>0,jspb.utils.split64Low=n}},jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=e.charCodeAt(4),a=e.charCodeAt(5),s=e.charCodeAt(6);e=e.charCodeAt(7),jspb.utils.split64Low=t+(n<<8)+(r<<16)+(i<<24)>>>0,jspb.utils.split64High=o+(a<<8)+(s<<16)+(e<<24)>>>0},jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+e},jspb.utils.joinInt64=function(e,t){var n=2147483648&t;return n&&(e=1+~e>>>0,t=~t>>>0,0==e&&(t=t+1>>>0)),e=jspb.utils.joinUint64(e,t),n?-e:e},jspb.utils.joinZigzag64=function(e,t){var n=1&e;return e=(e>>>1|t<<31)>>>0,t>>>=1,n&&0==(e=e+1>>>0)&&(t=t+1>>>0),e=jspb.utils.joinUint64(e,t),n?-e:e},jspb.utils.joinFloat32=function(e,t){t=2*(e>>31)+1;var n=e>>>23&255;return e&=8388607,255==n?e?NaN:1/0*t:0==n?t*Math.pow(2,-149)*e:t*Math.pow(2,n-150)*(e+Math.pow(2,23))},jspb.utils.joinFloat64=function(e,t){var n=2*(t>>31)+1,r=t>>>20&2047;return e=jspb.BinaryConstants.TWO_TO_32*(1048575&t)+e,2047==r?e?NaN:1/0*n:0==r?n*Math.pow(2,-1074)*e:n*Math.pow(2,r-1075)*(e+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.joinUnsignedDecimalString=function(e,t){function n(e){for(var t=1e7,n=0;7>n;n++){t/=10;var r=e/t%10>>>0;(0!=r||o)&&(o=!0,a+=i[r])}}if(2097151>=t)return""+(jspb.BinaryConstants.TWO_TO_32*t+e);var r=(e>>>24|t<<8)>>>0&16777215;t=t>>16&65535,e=(16777215&e)+6777216*r+6710656*t,r+=8147497*t,t*=2,1e7<=e&&(r+=Math.floor(e/1e7),e%=1e7),1e7<=r&&(t+=Math.floor(r/1e7),r%=1e7);var i=jspb.utils.DIGITS,o=!1,a="";return(t||o)&&n(t),(r||o)&&n(r),(e||o)&&n(e),a},jspb.utils.joinSignedDecimalString=function(e,t){var n=2147483648&t;return n&&(e=1+~e>>>0,t=~t+(0==e?1:0)>>>0),e=jspb.utils.joinUnsignedDecimalString(e,t),n?"-"+e:e},jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var n=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(e,n):jspb.utils.joinUnsignedDecimalString(e,n)},jspb.utils.hash64ArrayToDecimalStrings=function(e,t){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]=jspb.utils.hash64ToDecimalString(e[r],t);return n},jspb.utils.decimalStringToHash64=function(e){function t(e,t){for(var n=0;8>n&&(1!==e||0<t);n++)t=e*r[n]+t,r[n]=255&t,t>>>=8}goog.asserts.assert(0<e.length);var n=!1;"-"===e[0]&&(n=!0,e=e.slice(1));for(var r=[0,0,0,0,0,0,0,0],i=0;i<e.length;i++)t(10,jspb.utils.DIGITS.indexOf(e[i]));return n&&(function(){for(var e=0;8>e;e++)r[e]=255&~r[e]}(),t(1,1)),goog.crypt.byteArrayToString(r)},jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))},jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0",t[1]="x";for(var n=0;8>n;n++){var r=e.charCodeAt(7-n);t[2*n+2]=jspb.utils.DIGITS[r>>4],t[2*n+3]=jspb.utils.DIGITS[15&r]}return t.join("")},jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase(),goog.asserts.assert(18==e.length),goog.asserts.assert("0"==e[0]),goog.asserts.assert("x"==e[1]);for(var t="",n=0;8>n;n++){var r=jspb.utils.DIGITS.indexOf(e[2*n+2]),i=jspb.utils.DIGITS.indexOf(e[2*n+3]);t=String.fromCharCode(16*r+i)+t}return t},jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var n=jspb.utils.split64High;return t?jspb.utils.joinInt64(e,n):jspb.utils.joinUint64(e,n)},jspb.utils.numberToHash64=function(e){return jspb.utils.splitInt64(e),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(e,t,n){for(var r=0,i=t;i<n;i++)r+=e[i]>>7;return n-t-r},jspb.utils.countVarintFields=function(e,t,n,r){var i=0;if(128>(r=8*r+jspb.BinaryConstants.WireType.VARINT))for(;t<n&&e[t++]==r;)for(i++;;){var o=e[t++];if(0==(128&o))break}else for(;t<n;){for(o=r;128<o;){if(e[t]!=(127&o|128))return i;t++,o>>=7}if(e[t++]!=o)break;for(i++;0!=(128&(o=e[t++])););}return i},jspb.utils.countFixedFields_=function(e,t,n,r,i){var o=0;if(128>r)for(;t<n&&e[t++]==r;)o++,t+=i;else for(;t<n;){for(var a=r;128<a;){if(e[t++]!=(127&a|128))return o;a>>=7}if(e[t++]!=a)break;o++,t+=i}return o},jspb.utils.countFixed32Fields=function(e,t,n,r){return jspb.utils.countFixedFields_(e,t,n,8*r+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(e,t,n,r){return jspb.utils.countFixedFields_(e,t,n,8*r+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(e,t,n,r){var i=0;for(r=8*r+jspb.BinaryConstants.WireType.DELIMITED;t<n;){for(var o=r;128<o;){if(e[t++]!=(127&o|128))return i;o>>=7}if(e[t++]!=o)break;i++;for(var a=0,s=1;o=e[t++],a+=(127&o)*s,s*=128,0!=(128&o););t+=a}return i},jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var n=0;n<e.length;n++)t+="\\x",16>e[n]&&(t+="0"),t+=e[n].toString(16)}return t+'"'},jspb.utils.debugScalarToTextFormat=function(e){return goog.isString(e)?goog.string.quote(e):e.toString()},jspb.utils.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++){var r=e.charCodeAt(n);if(255<r)throw Error("Conversion error: string contains codepoint outside of byte range");t[n]=r}return t},jspb.utils.byteSourceToUint8Array=function(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||void 0!==Buffer&&e.constructor===Buffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?goog.crypt.base64.decodeStringToUint8Array(e):(goog.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryIterator=function(e,t,n){this.elements_=this.nextMethod_=this.decoder_=null,this.cursor_=0,this.nextValue_=null,this.atEnd_=!0,this.init_(e,t,n)},jspb.BinaryIterator.prototype.init_=function(e,t,n){e&&t&&(this.decoder_=e,this.nextMethod_=t),this.elements_=n||null,this.cursor_=0,this.nextValue_=null,this.atEnd_=!this.decoder_&&!this.elements_,this.next()},jspb.BinaryIterator.instanceCache_=[],jspb.BinaryIterator.alloc=function(e,t,n){if(jspb.BinaryIterator.instanceCache_.length){var r=jspb.BinaryIterator.instanceCache_.pop();return r.init_(e,t,n),r}return new jspb.BinaryIterator(e,t,n)},jspb.BinaryIterator.prototype.free=function(){this.clear(),100>jspb.BinaryIterator.instanceCache_.length&&jspb.BinaryIterator.instanceCache_.push(this)},jspb.BinaryIterator.prototype.clear=function(){this.decoder_&&this.decoder_.free(),this.elements_=this.nextMethod_=this.decoder_=null,this.cursor_=0,this.nextValue_=null,this.atEnd_=!0},jspb.BinaryIterator.prototype.get=function(){return this.nextValue_},jspb.BinaryIterator.prototype.atEnd=function(){return this.atEnd_},jspb.BinaryIterator.prototype.next=function(){var e=this.nextValue_;return this.decoder_?this.decoder_.atEnd()?(this.nextValue_=null,this.atEnd_=!0):this.nextValue_=this.nextMethod_.call(this.decoder_):this.elements_&&(this.cursor_==this.elements_.length?(this.nextValue_=null,this.atEnd_=!0):this.nextValue_=this.elements_[this.cursor_++]),e},jspb.BinaryDecoder=function(e,t,n){this.bytes_=null,this.tempHigh_=this.tempLow_=this.cursor_=this.end_=this.start_=0,this.error_=!1,e&&this.setBlock(e,t,n)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(e,t,n){if(jspb.BinaryDecoder.instanceCache_.length){var r=jspb.BinaryDecoder.instanceCache_.pop();return e&&r.setBlock(e,t,n),r}return new jspb.BinaryDecoder(e,t,n)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(e,t,n){this.bytes_=jspb.utils.byteSourceToUint8Array(e),this.start_=goog.isDef(t)?t:0,this.end_=goog.isDef(n)?this.start_+n:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e},jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e,goog.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64_=function(){for(var e,t,n=0,r=0;4>r;r++)if(e=this.bytes_[this.cursor_++],n|=(127&e)<<7*r,128>e)return this.tempLow_=n>>>0,void(this.tempHigh_=0);if(e=this.bytes_[this.cursor_++],n|=(127&e)<<28,t=0|(127&e)>>4,128>e)this.tempLow_=n>>>0,this.tempHigh_=t>>>0;else{for(r=0;5>r;r++)if(e=this.bytes_[this.cursor_++],t|=(127&e)<<7*r+3,128>e)return this.tempLow_=n>>>0,void(this.tempHigh_=t>>>0);goog.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0}},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var e=this.bytes_,t=e[this.cursor_+0],n=127&t;return 128>t?(this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),n):(t=e[this.cursor_+1],n|=(127&t)<<7,128>t?(this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),n):(t=e[this.cursor_+2],n|=(127&t)<<14,128>t?(this.cursor_+=3,goog.asserts.assert(this.cursor_<=this.end_),n):(t=e[this.cursor_+3],n|=(127&t)<<21,128>t?(this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),n):(t=e[this.cursor_+4],n|=(15&t)<<28,128>t?(this.cursor_+=5,goog.asserts.assert(this.cursor_<=this.end_),n>>>0):(this.cursor_+=5,128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&goog.asserts.assert(!1),goog.asserts.assert(this.cursor_<=this.end_),n)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=jspb.BinaryDecoder.prototype.readUnsignedVarint32,jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(1&e)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64_(),jspb.utils.joinUint64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64_(),jspb.utils.joinUnsignedDecimalString(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64_(),jspb.utils.joinInt64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64_(),jspb.utils.joinSignedDecimalString(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64_(),jspb.utils.joinZigzag64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readZigzagVarint64().toString()},jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],n=this.bytes_[this.cursor_+2],r=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8|n<<16|r<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)},jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),e<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],n=this.bytes_[this.cursor_+2],r=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8|n<<16|r<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)},jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readFloat=function(){var e=this.readUint32();return jspb.utils.joinFloat32(e,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,n=this.cursor_;e=n+e;for(var r=[],i="";n<e;){var o=t[n++];if(128>o)r.push(o);else{if(192>o)continue;if(224>o){var a=t[n++];r.push((31&o)<<6|63&a)}else if(240>o){a=t[n++];var s=t[n++];r.push((15&o)<<12|(63&a)<<6|63&s)}else if(248>o){a=t[n++],s=t[n++];var u=t[n++];o=(7&o)<<18|(63&a)<<12|(63&s)<<6|63&u,o-=65536,r.push(55296+(o>>10&1023),56320+(1023&o))}}8192<=r.length&&(i+=String.fromCharCode.apply(null,r),r.length=0)}return i+=goog.crypt.byteArrayToString(r),this.cursor_=n,i},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)},jspb.BinaryDecoder.prototype.readBytes=function(e){if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,goog.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);return this.cursor_+=e,goog.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64_(),jspb.utils.joinHash64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3],a=e[t+4],s=e[t+5],u=e[t+6];return e=e[t+7],this.cursor_+=8,String.fromCharCode(n,r,i,o,a,s,u,e)},jspb.BinaryReader=function(e,t,n){this.decoder_=jspb.BinaryDecoder.alloc(e,t,n),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(e,t,n){if(jspb.BinaryReader.instanceCache_.length){var r=jspb.BinaryReader.instanceCache_.pop();return e&&r.decoder_.setBlock(e,t,n),r}return new jspb.BinaryReader(e,t,n)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(e,t,n){this.decoder_.setBlock(e,t,n),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return goog.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e=this.decoder_.readUnsignedVarint32(),t=e>>>3;return(e&=7)!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP?(goog.asserts.fail("Invalid wire type: %s (at position %s)",e,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=t,this.nextWireType_=e,!0)},jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(goog.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)goog.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(goog.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(goog.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var e=this.nextField_;;){if(!this.nextField()){goog.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=e&&(goog.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:goog.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(e,t){goog.isNull(this.readCallbacks_)&&(this.readCallbacks_={}),goog.asserts.assert(!this.readCallbacks_[e]),this.readCallbacks_[e]=t},jspb.BinaryReader.prototype.runReadCallback=function(e){return goog.asserts.assert(!goog.isNull(this.readCallbacks_)),e=this.readCallbacks_[e],goog.asserts.assert(e),e(this)},jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e);var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64();case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString();case t.GROUP:goog.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:goog.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes();case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32();case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:goog.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(e,t){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var n=this.decoder_.getEnd(),r=this.decoder_.readUnsignedVarint32();r=this.decoder_.getCursor()+r,this.decoder_.setEnd(r),t(e,this),this.decoder_.setCursor(r),this.decoder_.setEnd(n)},jspb.BinaryReader.prototype.readGroup=function(e,t,n){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),goog.asserts.assert(this.nextField_==e),n(t,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(goog.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},jspb.BinaryReader.prototype.getFieldDecoder=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),n=t+e;return e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e),this.decoder_.setCursor(n),e},jspb.BinaryReader.prototype.readInt32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},jspb.BinaryReader.prototype.readInt32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readInt64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readUint32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},jspb.BinaryReader.prototype.readUint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},jspb.BinaryReader.prototype.readSint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},jspb.BinaryReader.prototype.readSint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},jspb.BinaryReader.prototype.readFixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},jspb.BinaryReader.prototype.readFixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},jspb.BinaryReader.prototype.readSfixed32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},jspb.BinaryReader.prototype.readSfixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},jspb.BinaryReader.prototype.readDouble=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},jspb.BinaryReader.prototype.readBool=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readEnum=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readString=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)},jspb.BinaryReader.prototype.readBytes=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)},jspb.BinaryReader.prototype.readVarintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readFixedHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readPackedField_=function(e){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();t=this.decoder_.getCursor()+t;for(var n=[];this.decoder_.getCursor()<t;)n.push(e.call(this.decoder_));return n},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.Map=function(e,t){this.arr_=e,this.valueCtor_=t,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()};jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],n=t[0];this.map_[n.toString()]=new jspb.Map.Entry_(n,t[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e,t=this.map_;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e].valueWrapper;n&&n.toArray()}}}else{for(this.arr_.length=0,t=this.stringKeys_(),t.sort(),e=0;e<t.length;e++){var r=this.map_[t[e]];(n=r.valueWrapper)&&n.toArray(),this.arr_.push([r.key,r.value])}this.arrClean=!0}return this.arr_},jspb.Map.prototype.toObject=function(e,t){for(var n=this.toArray(),r=[],i=0;i<n.length;i++){var o=this.map_[n[i][0].toString()];this.wrapEntry_(o);var a=o.valueWrapper;a?(goog.asserts.assert(t),r.push([o.key,t(e,a)])):r.push([o.key,o.value])}return r},jspb.Map.fromObject=function(e,t,n){t=new jspb.Map([],t);for(var r=0;r<e.length;r++){var i=e[r][0],o=n(e[r][1]);t.set(i,o)}return t},jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0,this.arr_=e},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},"undefined"!=typeof Symbol&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);return delete this.map_[e],this.arrClean=!1,t},jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++){var r=this.map_[t[n]];e.push([r.key,r.value])}return e},jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++){var r=this.map_[t[n]];e.push([r.key,this.wrapEntry_(r)])}return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++)e.push(this.map_[t[n]].key);return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++)e.push(this.wrapEntry_(this.map_[t[n]]));return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.forEach=function(e,t){var n=this.stringKeys_();n.sort();for(var r=0;r<n.length;r++){var i=this.map_[n[r]];e.call(t,this.wrapEntry_(i),i.key,this)}},jspb.Map.prototype.set=function(e,t){var n=new jspb.Map.Entry_(e);return this.valueCtor_?(n.valueWrapper=t,n.value=t.toArray()):n.value=t,this.map_[e.toString()]=n,this.arrClean=!1,this},jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value},jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)},jspb.Map.prototype.has=function(e){return e.toString()in this.map_},jspb.Map.prototype.serializeBinary=function(e,t,n,r,i){var o=this.stringKeys_();o.sort();for(var a=0;a<o.length;a++){var s=this.map_[o[a]];t.beginSubMessage(e),n.call(t,1,s.key),this.valueCtor_?r.call(t,2,this.wrapEntry_(s),i):r.call(t,2,s.value),t.endSubMessage()}},jspb.Map.deserializeBinary=function(e,t,n,r,i,o){for(var a=void 0;t.nextField()&&!t.isEndGroup();){var s=t.getFieldNumber();1==s?o=n.call(t):2==s&&(e.valueCtor_?(goog.asserts.assert(i),a=new e.valueCtor_,r.call(t,a,i)):a=r.call(t))}goog.asserts.assert(void 0!=o),goog.asserts.assert(void 0!=a),e.set(o,a)},jspb.Map.prototype.stringKeys_=function(){var e,t=this.map_,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n},jspb.Map.Entry_=function(e,t){this.key=e,this.value=t,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(e,t,n,r,i){this.fieldIndex=e,this.fieldName=t,this.ctor=n,this.toObjectFn=r,this.isRepeated=i},jspb.ExtensionFieldBinaryInfo=function(e,t,n,r,i,o){this.fieldInfo=e,this.binaryReaderFn=t,this.binaryWriterFn=n,this.binaryMessageSerializeFn=r,this.binaryMessageDeserializeFn=i,this.isPacked=o},jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},jspb.Message=function(){},jspb.Message.GENERATE_TO_OBJECT=!0,jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array,jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},jspb.Message.getIndex_=function(e,t){return t+e.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(e,t){return t-e.arrayIndexOffset_},jspb.Message.initialize=function(e,t,n,r,i,o){if(e.wrappers_=null,t||(t=n?[n]:[]),e.messageId_=n?String(n):void 0,e.arrayIndexOffset_=0===n?-1:0,e.array=t,jspb.Message.initPivotAndExtensionObject_(e,r),e.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(e.repeatedFields=i),i)for(t=0;t<i.length;t++)n=i[t],n<e.pivot_?(n=jspb.Message.getIndex_(e,n),e.array[n]=e.array[n]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[n]=e.extensionObject_[n]||jspb.Message.EMPTY_LIST_SENTINEL_);if(o&&o.length)for(t=0;t<o.length;t++)jspb.Message.computeOneofCase(e,o[t])},jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(e){return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:goog.isArray(e)},jspb.Message.isExtensionObject_=function(e){return!(null===e||"object"!=typeof e||jspb.Message.isArray_(e)||jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(e,t){var n=e.array.length,r=-1;if(n&&(r=n-1,n=e.array[r],jspb.Message.isExtensionObject_(n)))return e.pivot_=jspb.Message.getFieldNumber_(e,r),void(e.extensionObject_=n);-1<t?(e.pivot_=Math.max(t,jspb.Message.getFieldNumber_(e,r+1)),e.extensionObject_=null):e.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(e){var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})},jspb.Message.toObjectList=function(e,t,n){for(var r=[],i=0;i<e.length;i++)r[i]=t.call(e[i],n,e[i]);return r},jspb.Message.toObjectExtension=function(e,t,n,r,i){for(var o in n){var a=n[o],s=r.call(e,a);if(null!=s){for(var u in a.fieldName)if(a.fieldName.hasOwnProperty(u))break;t[u]=a.toObjectFn?a.isRepeated?jspb.Message.toObjectList(s,a.toObjectFn,i):a.toObjectFn(i,s):s}}},jspb.Message.serializeBinaryExtensions=function(e,t,n,r){for(var i in n){var o=n[i],a=o.fieldInfo;if(!o.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var s=r.call(e,a);if(null!=s)if(a.isMessageType()){if(!o.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");o.binaryWriterFn.call(t,a.fieldIndex,s,o.binaryMessageSerializeFn)}else o.binaryWriterFn.call(t,a.fieldIndex,s)}},jspb.Message.readBinaryExtension=function(e,t,n,r,i){var o=n[t.getFieldNumber()];if(o){if(n=o.fieldInfo,!o.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(n.isMessageType()){var a=new n.ctor;o.binaryReaderFn.call(t,a,o.binaryMessageDeserializeFn)}else a=o.binaryReaderFn.call(t);n.isRepeated&&!o.isPacked?(t=r.call(e,n))?t.push(a):i.call(e,n,[a]):i.call(e,n,a)}else t.skipField()},jspb.Message.getField=function(e,t){if(t<e.pivot_){t=jspb.Message.getIndex_(e,t);var n=e.array[t];return n===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[t]=[]:n}if(e.extensionObject_)return n=e.extensionObject_[t],n===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:n},jspb.Message.getRepeatedField=function(e,t){return jspb.Message.getField(e,t)},jspb.Message.getOptionalFloatingPointField=function(e,t){return e=jspb.Message.getField(e,t),null==e?e:+e},jspb.Message.getBooleanField=function(e,t){return e=jspb.Message.getField(e,t),null==e?e:!!e},jspb.Message.getRepeatedFloatingPointField=function(e,t){var n=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var r=0;r<n.length;r++)n[r]=+n[r];e.convertedPrimitiveFields_[t]=!0}return n},jspb.Message.getRepeatedBooleanField=function(e,t){var n=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var r=0;r<n.length;r++)n[r]=!!n[r];e.convertedPrimitiveFields_[t]=!0}return n},jspb.Message.bytesAsB64=function(e){return null==e||goog.isString(e)?e:jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array?goog.crypt.base64.encodeByteArray(e):(goog.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e)),null)},jspb.Message.bytesAsU8=function(e){return null==e||e instanceof Uint8Array?e:goog.isString(e)?goog.crypt.base64.decodeStringToUint8Array(e):(goog.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e)),null)},jspb.Message.bytesListAsB64=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||goog.isString(e[0])?e:goog.array.map(e,jspb.Message.bytesAsB64)},jspb.Message.bytesListAsU8=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)},jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0]);goog.array.forEach(e,function(e){goog.typeOf(e)!=t&&goog.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)})}},jspb.Message.getFieldWithDefault=function(e,t,n){return e=jspb.Message.getField(e,t),null==e?n:e},jspb.Message.getBooleanFieldWithDefault=function(e,t,n){return e=jspb.Message.getBooleanField(e,t),null==e?n:e},jspb.Message.getFloatingPointFieldWithDefault=function(e,t,n){return e=jspb.Message.getOptionalFloatingPointField(e,t),null==e?n:e},jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,jspb.Message.getMapField=function(e,t,n,r){if(e.wrappers_||(e.wrappers_={}),t in e.wrappers_)return e.wrappers_[t];var i=jspb.Message.getField(e,t);if(!i){if(n)return;i=[],jspb.Message.setField(e,t,i)}return e.wrappers_[t]=new jspb.Map(i,r)},jspb.Message.setField=function(e,t,n){t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=n:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=n)},jspb.Message.setProto3IntField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,0)},jspb.Message.setProto3FloatField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,0)},jspb.Message.setProto3BooleanField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,!1)},jspb.Message.setProto3StringField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,"")},jspb.Message.setProto3BytesField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,"")},jspb.Message.setProto3EnumField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,0)},jspb.Message.setProto3StringIntField=function(e,t,n){jspb.Message.setFieldIgnoringDefault_(e,t,n,"0")},jspb.Message.setFieldIgnoringDefault_=function(e,t,n,r){n!==r?jspb.Message.setField(e,t,n):e.array[jspb.Message.getIndex_(e,t)]=null},jspb.Message.addToRepeatedField=function(e,t,n,r){e=jspb.Message.getRepeatedField(e,t),void 0!=r?e.splice(r,0,n):e.push(n)},jspb.Message.setOneofField=function(e,t,n,r){(n=jspb.Message.computeOneofCase(e,n))&&n!==t&&void 0!==r&&(e.wrappers_&&n in e.wrappers_&&(e.wrappers_[n]=void 0),jspb.Message.setField(e,n,void 0)),jspb.Message.setField(e,t,r)},jspb.Message.computeOneofCase=function(e,t){for(var n,r,i=0;i<t.length;i++){var o=t[i],a=jspb.Message.getField(e,o);null!=a&&(n=o,r=a,jspb.Message.setField(e,o,void 0))}return n?(jspb.Message.setField(e,n,r),n):0},jspb.Message.getWrapperField=function(e,t,n,r){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[n]){var i=jspb.Message.getField(e,n);(r||i)&&(e.wrappers_[n]=new t(i))}return e.wrappers_[n]},jspb.Message.getRepeatedWrapperField=function(e,t,n){return jspb.Message.wrapRepeatedField_(e,t,n),t=e.wrappers_[n],t==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[n]=[]),t},jspb.Message.wrapRepeatedField_=function(e,t,n){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[n]){for(var r=jspb.Message.getRepeatedField(e,n),i=[],o=0;o<r.length;o++)i[o]=new t(r[o]);e.wrappers_[n]=i}},jspb.Message.setWrapperField=function(e,t,n){e.wrappers_||(e.wrappers_={});var r=n?n.toArray():n;e.wrappers_[t]=n,jspb.Message.setField(e,t,r)},jspb.Message.setOneofWrapperField=function(e,t,n,r){e.wrappers_||(e.wrappers_={});var i=r?r.toArray():r;e.wrappers_[t]=r,jspb.Message.setOneofField(e,t,n,i)},jspb.Message.setRepeatedWrapperField=function(e,t,n){e.wrappers_||(e.wrappers_={}),n=n||[];for(var r=[],i=0;i<n.length;i++)r[i]=n[i].toArray();e.wrappers_[t]=n,jspb.Message.setField(e,t,r)},jspb.Message.addToRepeatedWrapperField=function(e,t,n,r,i){jspb.Message.wrapRepeatedField_(e,r,t);var o=e.wrappers_[t];return o||(o=e.wrappers_[t]=[]),n=n||new r,e=jspb.Message.getRepeatedField(e,t),void 0!=i?(o.splice(i,0,n),e.splice(i,0,n.toArray())):(o.push(n),e.push(n.toArray())),n},jspb.Message.toMap=function(e,t,n,r){for(var i={},o=0;o<e.length;o++)i[t.call(e[o])]=n?n.call(e[o],r,e[o]):e[o];return i},jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){var t=this.wrappers_[e];if(goog.isArray(t))for(var n=0;n<t.length;n++)t[n]&&t[n].toArray();else t&&t.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(e){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],function(t){return new e.ctor(t)})),this.wrappers_[t]}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}},jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var n=e.fieldIndex;return e.isRepeated?(t=t||[],e.isMessageType()?(this.wrappers_[n]=t,this.extensionObject_[n]=goog.array.map(t,function(e){return e.toArray()})):this.extensionObject_[n]=t):e.isMessageType()?(this.wrappers_[n]=t,this.extensionObject_[n]=t?t.toArray():t):this.extensionObject_[n]=t,this},jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var n=e.toArray();t=t.toArray();var r=[],i=0,o=n.length>t.length?n.length:t.length;for(e.getJsPbMessageId()&&(r[0]=e.getJsPbMessageId(),i=1);i<o;i++)jspb.Message.compareFields(n[i],t[i])||(r[i]=t[i]);return new e.constructor(r)},jspb.Message.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())},jspb.Message.compareExtensions=function(e,t){e=e||{},t=t||{};var n,r={};for(n in e)r[n]=0;for(n in t)r[n]=0;for(n in r)if(!jspb.Message.compareFields(e[n],t[n]))return!1;return!0},jspb.Message.compareFields=function(e,t){if(e==t)return!0;if(!goog.isObject(e)||!goog.isObject(t))return!!(goog.isNumber(e)&&isNaN(e)||goog.isNumber(t)&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}if(e.constructor===Array){var r=void 0,i=void 0,o=Math.max(e.length,t.length);for(n=0;n<o;n++){var a=e[n],s=t[n];if(a&&a.constructor==Object&&(goog.asserts.assert(void 0===r),goog.asserts.assert(n===e.length-1),r=a,a=void 0),s&&s.constructor==Object&&(goog.asserts.assert(void 0===i),goog.asserts.assert(n===t.length-1),i=s,s=void 0),!jspb.Message.compareFields(a,s))return!1}return!r&&!i||(r=r||{},i=i||{},jspb.Message.compareExtensions(r,i))}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")},jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)},jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))},jspb.Message.copyInto=function(e,t){goog.asserts.assertInstanceof(e,jspb.Message),goog.asserts.assertInstanceof(t,jspb.Message),goog.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type."),e=jspb.Message.clone(e);for(var n=t.toArray(),r=e.toArray(),i=n.length=0;i<r.length;i++)n[i]=r[i];t.wrappers_=e.wrappers_,t.extensionObject_=e.extensionObject_},jspb.Message.clone_=function(e){if(goog.isArray(e)){for(var t=Array(e.length),n=0;n<e.length;n++){var r=e[n];null!=r&&(t[n]="object"==typeof r?jspb.Message.clone_(goog.asserts.assert(r)):r)}return t}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);t={};for(n in e)null!=(r=e[n])&&(t[n]="object"==typeof r?jspb.Message.clone_(goog.asserts.assert(r)):r);return t},jspb.Message.registerMessageType=function(e,t){jspb.Message.registry_[e]=t,t.messageId=e},jspb.Message.registry_={},jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.arith={},jspb.arith.UInt64=function(e,t){this.lo=e,this.hi=t},jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi},jspb.arith.UInt64.prototype.add=function(e){return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(e){return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(e,t){var n=65535&e;e>>>=16;var r=65535&t,i=t>>>16;for(t=n*r+65536*(n*i&65535)+65536*(e*r&65535),n=e*i+(n*i>>>16)+(e*r>>>16);4294967296<=t;)t-=4294967296,n+=1;return new jspb.arith.UInt64(t>>>0,n>>>0)},jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);return e=jspb.arith.UInt64.mul32x32(this.hi,e),e.hi=e.lo,e.lo=0,t.add(e)},jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),n=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0);for(var r=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),r=r.leftShift();for(;!r.zero();)0>=e.cmp(n)&&(t=t.add(r),n=n.sub(e)),e=e.rightShift(),r=r.rightShift();return[t,n]},jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();){t=t.div(10);var n=t[0];e=t[1].lo+e,t=n}return""==e&&(e="0"),e},jspb.arith.UInt64.fromString=function(e){for(var t=new jspb.arith.UInt64(0,0),n=new jspb.arith.UInt64(0,0),r=0;r<e.length;r++){if("0">e[r]||"9"<e[r])return null;var i=parseInt(e[r],10);n.lo=i,t=t.mul(10).add(n)}return t},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(e,t){this.lo=e,this.hi=t},jspb.arith.Int64.prototype.add=function(e){return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(e){return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var e=0!=(2147483648&this.hi),t=new jspb.arith.UInt64(this.lo,this.hi);return e&&(t=new jspb.arith.UInt64(0,0).sub(t)),(e?"-":"")+t.toString()},jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=jspb.arith.UInt64.fromString(e))?null:(t&&(e=new jspb.arith.UInt64(0,0).sub(e)),new jspb.arith.Int64(e.lo,e.hi))},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;return this.buffer_=[],e},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){for(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(t==Math.floor(t)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(t==Math.floor(t)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(e),this.writeUint32(t)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){for(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(127&e|128),e>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){if(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(127&e|128),e>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((e<<1^e>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarint64(parseInt(e,10))},jspb.BinaryEncoder.prototype.writeUint8=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&256>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&65536>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(-128<=e&&128>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(-32768<=e&&32768>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(e){goog.asserts.assert(e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(e),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(e){goog.asserts.assert(e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(e){goog.asserts.assert(goog.isBoolean(e)||goog.isNumber(e)),this.buffer_.push(e?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(e)},jspb.BinaryEncoder.prototype.writeBytes=function(e){this.buffer_.push.apply(this.buffer_,e)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(e){for(var t=this.buffer_.length,n=0;n<e.length;n++){var r=e.charCodeAt(n);if(128>r)this.buffer_.push(r);else if(2048>r)this.buffer_.push(r>>6|192),this.buffer_.push(63&r|128);else if(65536>r)if(55296<=r&&56319>=r&&n+1<e.length){var i=e.charCodeAt(n+1);56320<=i&&57343>=i&&(r=1024*(r-55296)+i-56320+65536,this.buffer_.push(r>>18|240),this.buffer_.push(r>>12&63|128),this.buffer_.push(r>>6&63|128),this.buffer_.push(63&r|128),n++)}else this.buffer_.push(r>>12|224),this.buffer_.push(r>>6&63|128),this.buffer_.push(63&r|128)}return this.buffer_.length-t},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t),this.blocks_.push(e),this.totalLength_+=t.length+e.length},jspb.BinaryWriter.prototype.beginDelimited_=function(e){return this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),e=this.encoder_.end(),this.blocks_.push(e),this.totalLength_+=e.length,e.push(this.totalLength_),e},jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop();for(t=this.totalLength_+this.encoder_.length()-t,goog.asserts.assert(0<=t);127<t;)e.push(127&t|128),t>>>=7,this.totalLength_++;e.push(t),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,n){this.appendUint8Array_(e.subarray(t,n))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,n){null!=e&&null!=t&&null!=n&&this.writeSerializedMessage(e,t,n)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){goog.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,n=t.length,r=0,i=0;i<n;i++){var o=t[i];e.set(o,r),r+=o.length}return t=this.encoder_.end(),e.set(t,r),r+=t.length,goog.asserts.assert(r==e.length),this.blocks_=[e],e},jspb.BinaryWriter.prototype.getResultBase64String=function(e){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),e)},jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))},jspb.BinaryWriter.prototype.endSubMessage=function(){goog.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){goog.asserts.assert(1<=e&&e==Math.floor(e)),this.encoder_.writeUnsignedVarint32(8*e+t)},jspb.BinaryWriter.prototype.writeAny=function(e,t,n){var r=jspb.BinaryConstants.FieldType;switch(e){case r.DOUBLE:this.writeDouble(t,n);break;case r.FLOAT:this.writeFloat(t,n);break;case r.INT64:this.writeInt64(t,n);break;case r.UINT64:this.writeUint64(t,n);break;case r.INT32:this.writeInt32(t,n);break;case r.FIXED64:this.writeFixed64(t,n);break;case r.FIXED32:this.writeFixed32(t,n);break;case r.BOOL:this.writeBool(t,n);break;case r.STRING:this.writeString(t,n);break;case r.GROUP:goog.asserts.fail("Group field type not supported in writeAny()");break;case r.MESSAGE:goog.asserts.fail("Message field type not supported in writeAny()");break;case r.BYTES:this.writeBytes(t,n);break;case r.UINT32:this.writeUint32(t,n);break;case r.ENUM:this.writeEnum(t,n);break;case r.SFIXED32:this.writeSfixed32(t,n);break;case r.SFIXED64:this.writeSfixed64(t,n);break;case r.SINT32:this.writeSint32(t,n);break;case r.SINT64:this.writeSint64(t,n);break;case r.FHASH64:this.writeFixedHash64(t,n);break;case r.VHASH64:this.writeVarintHash64(t,n);break;default:goog.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))},jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt32String=function(e,t){null!=t&&(t=parseInt(t,10),goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(e,t))},jspb.BinaryWriter.prototype.writeInt64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint32String=function(e,t){null!=t&&(t=parseInt(t,10),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))},jspb.BinaryWriter.prototype.writeUint64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(e,t))},jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(e,t))},jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&(goog.asserts.assert(+t>=-jspb.BinaryConstants.TWO_TO_63&&+t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64String_(e,t))},jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))},jspb.BinaryWriter.prototype.writeFixed64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))},jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))},jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))},jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeFloat=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))},jspb.BinaryWriter.prototype.writeDouble=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))},jspb.BinaryWriter.prototype.writeBool=function(e,t){null!=t&&(goog.asserts.assert(goog.isBoolean(t)||goog.isNumber(t)),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))},jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeString=function(e,t){null!=t&&(e=this.beginDelimited_(e),this.encoder_.writeString(t),this.endDelimited_(e))},jspb.BinaryWriter.prototype.writeBytes=function(e,t){null!=t&&(t=jspb.utils.byteSourceToUint8Array(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),this.appendUint8Array_(t))},jspb.BinaryWriter.prototype.writeMessage=function(e,t,n){null!=t&&(e=this.beginDelimited_(e),n(t,this),this.endDelimited_(e))},jspb.BinaryWriter.prototype.writeMessageSet=function(e,t,n){null!=t&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e),e=this.beginDelimited_(3),n(t,this),this.endDelimited_(e),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(e,t,n){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),n(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(t))};jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSignedVarint32_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeInt32String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSignedVarint64_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeInt64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUnsignedVarint32_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUint32String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUnsignedVarint64_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUint64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarint32_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarint64_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarint64String_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixed32(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixed64(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixed64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSfixed32(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSfixed64(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSfixed64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFloat(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeDouble(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeBool(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeEnum(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeString(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeBytes(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,n){if(null!=t)for(var r=0;r<t.length;r++){var i=this.beginDelimited_(e);n(t[r],this),this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,n){if(null!=t)for(var r=0;r<t.length;r++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),n(t[r],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)},jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixedHash64(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeVarintHash64(e,t[n])},jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSignedVarint32(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSignedVarint32(parseInt(t[n],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSignedVarint64(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++){var r=jspb.arith.Int64.fromString(t[n]);this.encoder_.writeSplitVarint64(r.lo,r.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint32(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint32(parseInt(t[n],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint64(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++){var r=jspb.arith.UInt64.fromString(t[n]);this.encoder_.writeSplitVarint64(r.lo,r.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarint32(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarint64(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarint64(parseInt(t[n],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeUint32(t[e])},jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeUint64(t[e])},jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++){var n=jspb.arith.UInt64.fromString(t[e]);this.encoder_.writeSplitFixed64(n.lo,n.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeInt32(t[e])},jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64(t[e])},jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64String(t[e])},jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeFloat(t[e])},jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeDouble(t[e])},jspb.BinaryWriter.prototype.writePackedBool=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),e=0;e<t.length;e++)this.encoder_.writeBool(t[e])},jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeEnum(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeFixedHash64(t[e])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeVarintHash64(t[n]);this.endDelimited_(e)}},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf}).call(exports,__webpack_require__(18),__webpack_require__(408).Buffer)},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,n,r):"string"==typeof t?l(e,t,n):h(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return s(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function c(e,t){if(s(t),e=i(e,t<0?0:0|p(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=i(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function h(e,t){if(o.isBuffer(t)){var n=0|p(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Y(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&Q(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function y(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return K(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return j(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*a}else-1!==l&&(c-=c-l),l=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var f=!0,d=0;d<u;d++)if(o(e,c+d)!==o(t,d)){f=!1;break}if(f)return c}return-1}function S(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function _(e,t,n,r){return X(K(t,e.length-n),e,n,r)}function T(e,t,n,r){return X(q(t),e,n,r)}function k(e,t,n,r){return T(e,t,n,r)}function E(e,t,n,r){return X(z(t),e,n,r)}function A(e,t,n,r){return X(G(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,l,f;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[i+1],128==(192&u)&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return P(r)}function P(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function j(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function M(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=W(e[o]);return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function U(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,i){return i||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,i){return i||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,n,r,52,8),n+8}function H(e){if(e=V(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function G(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function z(e){return J.toByteArray(H(e))}function X(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Y(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var J=n(409),$=n(410),Q=n(411);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return u(null,e,t,n)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):v.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,u=Math.min(a,s),c=this.slice(r,i),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],s=l[f];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return S(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),$.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),$.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),$.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),$.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:K(new o(e,r).toString()),u=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(18))},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function o(e,t,n){return 3*(t+n)/4-n}function a(e){var t,n,i=r(e),a=i[0],s=i[1],u=new d(o(e,a,s)),c=0,l=s>0?a-4:a;for(n=0;n<l;n+=4)t=f[e.charCodeAt(n)]<<18|f[e.charCodeAt(n+1)]<<12|f[e.charCodeAt(n+2)]<<6|f[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=f[e.charCodeAt(n)]<<2|f[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===s&&(t=f[e.charCodeAt(n)]<<10|f[e.charCodeAt(n+1)]<<4|f[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u}function s(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function u(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join("")}function c(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(u(e,o,o+16383>a?a:o+16383));return 1===r?(t=e[n-1],i.push(l[t>>2]+l[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")),i.join("")}t.byteLength=i,t.toByteArray=a,t.fromByteArray=c;for(var l=[],f=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,g=h.length;p<g;++p)l[p]=h[p],f[h.charCodeAt(p)]=p;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?d/u:d*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){/*! @name @nagra/videojs-shaka @version 0.5.0-nmp-36 @license MIT */
!function(e,r){r(t,n(56))}(0,function(e,t){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function u(e,t){var n=e.xCallback(e.xKeySystem,e.xSourceObject,e.body,e.licenseRequestType),r=new Promise(function(e,r){n.then(function(n){e({uri:t,originalUri:t,data:n,headers:[],fromCache:!1})}).catch(function(e){var t=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,v,e);r(t)})});return shaka.util.AbortableOperation.notAbortable(r)}function c(e,t,n,r,i){return n===shaka.net.NetworkingEngine.RequestType.LICENSE&&"http:callback-uri"===e?u(t,e):shaka.net.HttpFetchPlugin.parse(e,t,n,r,i)}function l(e,t,n,r,i){return n===shaka.net.NetworkingEngine.RequestType.LICENSE&&"http:callback-uri"===e?u(t,e):shaka.net.HttpXHRPlugin.parse(e,t,n,r,i)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var f=function(){function e(e,t){this._player=e,this._shakaPlayer=t,this._trackDictionary=[],this._updateActiveTracksEventHandle=this._updateActiveShakaTextTrack.bind(this),this._handleTextTracksAdded(t.getTextTracks())}var t=e.prototype;return t.dispose=function(){this._player.textTracks().off("change",this._updateActiveTracksEventHandle),this._clearShakaTracks()},t._generateKindFromTrack=function(e){var t=e.roles;return t&&t.some(function(e){return"caption"===e})?"captions":"subtitles"},t._updateActiveShakaTextTrack=function(){for(var e,t=this._player.textTracks(),n=this,r=0;r<t.length;r+=1)!function(){var i=t[r];if("showing"===i.mode){var o=s(n._trackDictionary,function(e){return e.textTrack===i});e=o?o.shakaTrack:null}}();e?(this._shakaPlayer.selectTextTrack(e),this._shakaPlayer.setTextTrackVisibility(!0)):this._shakaPlayer.setTextTrackVisibility(!1)},t._attachShakaTextTracksToVideojs=function(e){var t=this,n=e.map(function(e){var n;return n=Array.isArray(e.labels)&&1===e.labels.length?e.labels[0].text:"application/cea-608"===e.mimeType&&"und"===e.language?e.originalTextId:e.language||e.label,{shakaTrack:e,trackConfig:{label:n,language:e.language,srclang:e.language,kind:t._generateKindFromTrack(e),roles:e.roles}}}).map(function(e){var n,r=e.trackConfig,i=e.shakaTrack,o=s(t._trackDictionary,function(e){var t=e.textTrack.language===r.language&&e.textTrack.kind===r.kind&&e.textTrack.label===r.label;return e.shakaTrack.roles.length>0&&(t=t&&e.shakaTrack.roles===r.roles),t});return o||(n=t._player.addRemoteTextTrack(r,!1),t._trackDictionary.push({textTrack:n.track,shakaTrack:i})),n});this._player.textTracks().on("change",this._updateActiveTracksEventHandle);var r=this._trackDictionary.find(function(e){e.track;return e.shakaTrack.active});return this._player.textTracks().tracks_.forEach(function(e){e.mode=r&&e===r.textTrack?"showing":"disabled"}),n},t._handleTextTracksAdded=function(e){this._clearShakaTracks(),e.length&&this._attachShakaTextTracksToVideojs(e)},t._clearShakaTracks=function(){var e=this;this._trackDictionary.forEach(function(t){e._player.removeRemoteTextTrack(t.textTrack)}),this._trackDictionary=[]},e}(),d={ShakaTextTrackHandler:f},h=function(){function e(e,t){this._player=e,this._shakaPlayer=t,this._updateActiveTracksEventHandle=this._updateActiveShakaTrack.bind(this),this._handleAudioTracksAdded()}var n=e.prototype;return n.dispose=function(){this._player.audioTracks().off("change",this._updateActiveTracksEventHandle),this._player.clearTracks(["audio"])},n._generateIdFromTrackIndex=function(e){return"dash-audio-"+e},n._generateKindFromTrack=function(e){var t="main";return e.roles.includes("dub")&&(t="translation"),e.accessibilityPurpose&&"visually impaired"===e.accessibilityPurpose&&(t="main-desc",e.roles.includes("dub")&&(t="descriptions")),t},n._isTracksEquivalentAccessibility=function(e,t){var n=!1;return e.accessibilityPurpose?"visually impaired"!==e.accessibilityPurpose||"main-desc"!==t.kind&&"descriptions"!==t.kind||(n=!0):"main"!==t.kind&&"translation"!==t.kind||(n=!0),n},n._generateLabelFromVariant=function(e){var t=e.language;return e.audioRoles&&e.audioRoles.length>0&&""!==e.audioRoles[0]&&(t+=" ("+e.audioRoles.join(",")+")"),t},n._generateLabelFromOurTrack=function(e){var t=e.language;return e.roles&&e.roles.length>0&&""!==e.roles[0]&&(t+=" ("+e.roles.join(",")+")"),t},n._findShakaAudioTrack=function(e){var t=this;return this.setOfTracksWithChannels.find(function(n){return t._generateLabelFromOurTrack(n)===e.label&&(!n.audioChannelConfig||n.audioChannelConfig===e.audioChannelConfig)&&n.audioCodec===e.audioCodec&&t._isTracksEquivalentAccessibility(n,e)})},n._handleAudioTracksAdded=function(){var e=this,n=this._player.audioTracks();n.length&&this._player.clearTracks(["audio"]);var r=this._shakaPlayer.getVariantTracks();this.setOfTracksWithChannels=[];for(var i,o,s=a(r);!(o=s()).done;)!function(){var t=o.value,n="und";t.language&&(n=shaka.util.LanguageUtils.normalize(t.language));var r=[];r="variant"===t.type?t.audioRoles:t.roles,r.length||(r=[""]);var a=e._generateLabelFromVariant(t),s={active:t.active,audioCodec:t.audioCodec,language:n,role:r.join(","),roles:r,accessibilityPurpose:t.accessibilityPurpose,channelsCount:t.channelsCount,audioChannelConfig:t.audioChannelConfig,label:a};e.setOfTracksWithChannels.find(function(e){return e.label===s.label&&e.language===s.language&&e.channelsCount===s.channelsCount&&e.role===s.role&&e.accessibilityPurpose===s.accessibilityPurpose})||e.setOfTracksWithChannels.push(s),t.active&&(i=s)}();for(var u,c=i?this.setOfTracksWithChannels.find(function(e){return e.label===i.label&&e.language===i.language&&e.channelsCount===i.channelsCount&&e.audioChannelConfig===i.audioChannelConfig&&(!e.role||i.roles.includes(e.role))}):this.setOfTracksWithChannels.find(function(e){return"main"===e.role})||this.setOfTracksWithChannels[0],l=0,f=a(this.setOfTracksWithChannels);!(u=f()).done;){var d=u.value;d===c&&this._player.trigger("shakaaudiotrackchange",{language:d.language}),n.addTrack(new t.AudioTrack({enabled:d===c,id:this._generateIdFromTrackIndex(l++),kind:this._generateKindFromTrack(d),label:d.label,language:d.language,audioCodec:d.audioCodec,audioChannelConfig:d.audioChannelConfig}))}this._player.audioTracks().on("change",this._updateActiveTracksEventHandle),this._shakaPlayer.addEventListener("unloading",function(){n.removeEventListener("change",e._updateActiveTracksEventHandle)})},n._updateActiveShakaTrack=function(){for(var e=this._player.audioTracks(),t=0;t<e.length;t++){var n=this._player.audioTracks()[t];if(n.enabled){var r=this._findShakaAudioTrack(n);if(r){this._player.trigger("shakaaudiotrackchange",{language:r.language}),this._shakaPlayer.selectAudioLanguage(r.language,r.role,r.channelsCount,r.audioChannelConfig,r.accessibilityPurpose);continue}}}},e}(),p={ShakaAudioTrackHandler:h},g=function(){function e(e,t){this._player=e,this._shakaPlayer=t,this._trackDictionary=[],this._loadedMetaListenerHandle=this._handlePlaybackMetadataLoadedForVideo.bind(this),this._player.one("loadedmetadata",this._loadedMetaListenerHandle),this._skipBandwidthRestrictions=!1,this._restrictionFromKeyStatusChangeApplied=!1,this._checkDeviceIfNeedWorkaround()&&(this._log("Apply workaround on Samsung Tizen TV."),this._enableVideoTrackWithLowestBandwidth())}var n=e.prototype;return n.dispose=function(){var e=this,t=[];this._trackDictionary.forEach(function(n){t.push(e._generateIdFromTrackIndex(n.track.id))}),this._trackDictionary=[],t.forEach(function(t){var n=e._player.videoTracks().getTrackById(t);n&&e._player.videoTracks().removeTrack(n)}),this._shakaPlayer.configure("restrictions",void 0)},n._checkDeviceIfNeedWorkaround=function(){var e=!1;return this._isMultiVideoStream()&&this._isEncryptedStream()&&this._isTizenTV()&&(e=!0),e},n._isMultiVideoStream=function(){var e=[];return this._shakaPlayer.getVariantTracks().forEach(function(t){e.includes(t.label)||e.push(t.label)}),e.length>1},n._isEncryptedStream=function(){return""!==this._shakaPlayer.keySystem()},n._isTizenTV=function(){return/Tizen/i.test(window.navigator&&window.navigator.userAgent||"")},n._enableVideoTrackWithLowestBandwidth=function(){for(var e=-1,t=1/0,n="",r=this._shakaPlayer.getVariantTracks(),i=0;i<r.length;i++){var o=r[i];o.active&&(n=o.label),o.bandwidth<t&&(t=o.bandwidth,e=i)}var a=r[e].label;if(e>=0&&n!==a){var s=this._shakaPlayer.getStats().estimatedBandwidth,u=e;r.length>1&&s>r[e].bandwidth&&(u=this._findBandwidthClosestVarantTrack(a,s)),this._shakaPlayer.selectVariantTrack(r[u],!0,0)}},n._findBandwidthClosestVarantTrack=function(e,t){for(var n=this._shakaPlayer.getVariantTracks(),r=0,i=0,o=0;o<n.length;o++){var a=n[o];a.label===e&&a.bandwidth>i&&a.bandwidth<=t&&(i=a.bandwidth,r=o)}return r},n._removeShakaListener=function(e,t){this._shakaPlayer.removeEventListener(e,t)},n._find=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},n._generateIdFromTrackIndex=function(e){return"shaka-video-"+e},n._generateKindFromTrack=function(e){if(e.roles){if(e.roles.some(function(e){return"main"===e}))return e.roles.some(function(e){return"caption"===e})?"captions":e.roles.some(function(e){return"subtitle"===e})?"subtitle":"main";if(e.roles.some(function(e){return"commentary"===e}))return"commentary";if(e.roles.some(function(e){return"alternate"===e}))return"alternate";if(e.roles.some(function(e){return"sign"===e}))return"sign"}return""},n._videoTracksChangeHandler=function(){this._skipBandwidthRestrictions?this._skipBandwidthRestrictions=!1:this._restrictBandwidth()},n._onShakaDrmSessionUpdate=function(){var e=this;if(!this._restrictionFromKeyStatusChangeApplied){window.setTimeout(function(){e._restrictBandwidth()},1e3),this._removeShakaListener("drmsessionupdate",this._onShakaDrmSessionUpdate.bind(this)),this._restrictionFromKeyStatusChangeApplied=!0}},n._restrictBandwidth=function(){for(var e,t=this._player.videoTracks(),n=0;n<t.length&&t.length>1;n++){var r=t[n];if(r.selected){var i=this._findShakaVideoTrack(r);if(i){var o=this._shakaPlayer.getConfiguration();o.restrictions&&o.restrictions.minBandwidth===i.track.minBandwidth&&o.restrictions.maxBandwidth===i.track.maxBandwidth?this._log("Skip to apply bandwidth restrictions due to no change."):e={minBandwidth:i.track.minBandwidth,maxBandwidth:i.track.maxBandwidth}}}}this._shakaPlayer.configure("restrictions",e)},n._isBandwidthRestrictionsApplied=function(){var e=!1,t=this._shakaPlayer.getConfiguration();return!t.restrictions||0===t.restrictions.minBandwidth&&t.restrictions.maxBandwidth===1/0||(e=!0),e},n._onShakaPlayerAdaptationEvent=function(){var e=this;if(this._isBandwidthRestrictionsApplied())this._removeShakaListener("adaptation",this._onShakaPlayerAdaptationEvent.bind(this));else{var t=[];this._trackDictionary.forEach(function(n){e._findVideoTrackWithLabel(n.label)||(t.push(n.label),e._log("remove video track with lable: "+n.label))});var n=[],r=!1;if(this._trackDictionary=this._trackDictionary.filter(function(i){var o=!t.includes(i.label);return o||(i.track.active&&(r=!0),n.push(e._generateIdFromTrackIndex(i.track.id))),o}),n.forEach(function(t){var n=e._player.videoTracks().getTrackById(t);n&&e._player.videoTracks().removeTrack(n)}),r){var i=this._findActiveTrackLabel(),o=this._findTrackIdWithLabel(i),a=this._player.videoTracks().getTrackById(o);a&&(this._log("Select new video track with label: "+i),a.selected=!0)}}},n._findTrackIdWithLabel=function(e){if(e)for(var t=0;t<this._trackDictionary.length;t++){var n=this._trackDictionary[t];if(n.label===e)return this._generateIdFromTrackIndex(n.track.id)}return null},n._findActiveTrackLabel=function(){for(var e=this._shakaPlayer.getVariantTracks(),t=0;t<e.length;t++)if(e[t].active)return e[t].label;return null},n._findShakaVideoTrack=function(e){var t=this;return this._find(this._trackDictionary,function(n){return t._generateIdFromTrackIndex(n.track.id)===e.id})},n._findVideoTrackWithLabel=function(e){for(var t=this._shakaPlayer.getVariantTracks(),n=0;n<t.length;n++)if(t[n].label&&t[n].label===e)return!0;return!1},n._isKPTStream=function(){return this._trackDictionary.length>1&&this._isEncryptedStream()},n._log=function(e){this._player.vjsPlayer.log((new Date).toISOString()+":"+e)},n._handlePlaybackMetadataLoadedForVideo=function(){var e=this,n=0;this._shakaPlayer.getVariantTracks().forEach(function(t){if(t.label){var r=e._find(e._trackDictionary,function(e){return e.label===t.label});r?(r.track.maxBandwidth=Math.max(r.track.maxBandwidth,t.bandwidth),r.track.minBandwidth=Math.min(r.track.minBandwidth,t.bandwidth),r.track.active=r.track.active||t.active):e._trackDictionary.push({label:t.label,track:{id:n++,roles:t.roles,language:t.language,accessibility:t.accessibility,minBandwidth:t.bandwidth,maxBandwidth:t.bandwidth,active:t.active}})}}),this._trackDictionary.forEach(function(n){var r=n.label;n.track.roles&&n.track.roles.length&&(r+=" ("+n.track.roles.join(", ")+")"),e._player.videoTracks().addTrack(new t.VideoTrack({selected:n.track.active,id:e._generateIdFromTrackIndex(n.track.id),kind:e._generateKindFromTrack(n),label:r,language:n.track.language}))}),this._tracksChangedListenerHandle=this._videoTracksChangeHandler.bind(this),this._player.videoTracks().addEventListener("change",this._tracksChangedListenerHandle),this._shakaPlayer.addEventListener("unloading",function(){e._player.videoTracks().removeEventListener("change",e._tracksChangedListenerHandle)}),this._isKPTStream()&&(this._log("Register listeners to handle Key Per Track stream."),this._shakaPlayer.addEventListener("adaptation",this._onShakaPlayerAdaptationEvent.bind(this)),this._shakaPlayer.addEventListener("drmsessionupdate",this._onShakaDrmSessionUpdate.bind(this)),this._skipBandwidthRestrictions=!0),this._player.videoTracks().trigger("change")},e}(),y={ShakaVideoTrackHandler:g},v=6999,m={xhrPlugin:l,fetchPlugin:c},b=t.getTech("Html5"),w=function(e){function r(n,r){var i;return i=e.call(this,n,r)||this,i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0),i.vjsPlayer=t(n.playerId),i.player_.ready(function(){i.player_.addClass("vjs-shaka")}),i._initLivePauseTimeUpdate(),i._initErrorClearing(),i._videoTrackHandler=null,i._textTrackHandler=null,i._previousError=null,i}n(r,e);var i=r.prototype;return i.createEl=function(){var e=this;return this.el_=b.prototype.createEl.apply(this,arguments),shaka.polyfill.installAll(),window.AbortController!==shaka.polyfill.AbortController&&shaka.net.HttpFetchPlugin.isSupported()&&(shaka.net.NetworkingEngine.registerScheme("http",m.fetchPlugin,shaka.net.NetworkingEngine.PluginPriority.PREFERRED),shaka.net.NetworkingEngine.registerScheme("https",m.fetchPlugin,shaka.net.NetworkingEngine.PluginPriority.PREFERRED)),shaka.net.NetworkingEngine.registerScheme("http",m.xhrPlugin,shaka.net.NetworkingEngine.PluginPriority.FALLBACK),shaka.net.NetworkingEngine.registerScheme("https",m.xhrPlugin,shaka.net.NetworkingEngine.PluginPriority.FALLBACK),this.shaka_=new shaka.Player,this.shaka_.attach(this.el_,!1),this.shaka_.addEventListener("buffering",function(t){e.vjsPlayer.el_&&(t.buffering?e.vjsPlayer.trigger("waiting"):e.vjsPlayer.paused()||e.vjsPlayer.trigger("playing"))}),this.shaka_.addEventListener("error",function(t){e.retriggerError(t.detail)}),this.el_.tech=this,this.el_},i.setSource=function(e){var t=this;this._audioTrackHandler&&this._audioTrackHandler.dispose(),this._videoTrackHandler&&this._videoTrackHandler.dispose(),this._textTrackHandler&&this._textTrackHandler.dispose();var n=void 0;this.vjsPlayer.cache_&&this.vjsPlayer.cache_.source&&this.vjsPlayer.cache_.source.type&&this.vjsPlayer.cache_.source.src===e.src&&(n=this.vjsPlayer.cache_.source.type),this.shaka_.load(e.src,e.startTime,n).then(function(){t.initShakaMenus(t)}).catch(t._reinjectErrorToListeners.bind(this))},i.duration=function(){var e=this.shaka_.seekRange(),t=e.end-e.start;return this.shaka_.isLive()?-t:t},i.seekable=function(){var e=this.shaka_.seekRange();return{length:1,start:function(){return e.start},end:function(){return e.end}}},i.dispose=function(){this.shaka_&&(this.shaka_.unload(),this.shaka_.destroy()),this._stopLivePauseTimeUpdates(),e.prototype.dispose.call(this)},i.initShakaMenus=function(e){e._textTrackHandler=new d.ShakaTextTrackHandler(e,e.shaka_),e._audioTrackHandler=new p.ShakaAudioTrackHandler(e,e.shaka_),e._videoTrackHandler=new y.ShakaVideoTrackHandler(e,e.shaka_)},i._httpErrorHandling=function(e){if(e.category===shaka.util.Error.Category.NETWORK&&this.vjsPlayer&&this.vjsPlayer.otvtoolkit()&&this.vjsPlayer.otvtoolkit().networkStatistics&&this.vjsPlayer.otvtoolkit().networkStatistics.networkListenerList){var t=NaN,n="";if(1001===e.code){t=e.data[1],n=e.data[2]}else if(1002===e.code){t=e.code,n=e.data[1]}for(var r=0;r<this.vjsPlayer.otvtoolkit().networkStatistics.networkListenerList.length();r++){var i=this.vjsPlayer.otvtoolkit().networkStatistics.networkListenerList.get(r);i&&i.errorChanged&&i.errorChanged(t,n,e)}}},i._reinjectErrorToListeners=function(e){this.vjsPlayer&&this.vjsPlayer.otvtoolkit()&&this.vjsPlayer.otvtoolkit().errorReporting&&this.vjsPlayer.otvtoolkit().errorReporting.listener&&this.vjsPlayer.otvtoolkit().errorReporting.listener.errorChanged(e.severity,e.category,e.code,e.message,e.data),this._httpErrorHandling(e),this.retriggerError(e)},i.retriggerError=function(e){var t;if(e.message&&(e.message.indexOf("UNSUPPORTED")>-1||e.message.indexOf("NOT_SUPPORTED")>-1))t=4;else switch(e.category){case shaka.util.Error.Category.NETWORK:t=2;break;case shaka.util.Error.Category.TEXT:case shaka.util.Error.Category.MEDIA:case shaka.util.Error.Category.MANIFEST:t=3;break;case shaka.util.Error.Category.STREAMING:t=1;break;case shaka.util.Error.Category.DRM:t=5;break;case shaka.util.Error.Category.PLAYER:case shaka.util.Error.Category.CAST:case shaka.util.Error.Category.STORAGE:t=0}if(e.severity===shaka.util.Error.Severity.CRITICAL){null!==this._previousError&&t!==this._previousError&&this._clearError(),this.vjsPlayer.error({code:t,message:e.code+" - "+e.message}),this._previousError=t;6007===e.code&&(this.vjsPlayer.pause(),this.vjsPlayer.otvtoolkit().reset())}},i._clearError=function(){this.vjsPlayer.error(null)},i._initLivePauseTimeUpdate=function(){this.vjsPlayer&&(this.vjsPlayer.on("play",this._stopLivePauseTimeUpdates.bind(this)),this.vjsPlayer.on("pause",this._startLivePauseTimeUpdates.bind(this)))},i._initErrorClearing=function(){this.vjsPlayer&&this.vjsPlayer.on("playing",this._clearError.bind(this))},i._startLivePauseTimeUpdates=function(){if(this.shaka_.isLive()){this.livePauseTimeUpdateInterval&&this._stopLivePauseTimeUpdates();var e=this.vjsPlayer;this.livePauseTimeUpdateInterval=this.vjsPlayer.setInterval(function(){e.trigger({type:"timeupdate",target:e,manuallyTriggered:!0})},250)}},i._stopLivePauseTimeUpdates=function(){this.vjsPlayer.clearInterval(this.livePauseTimeUpdateInterval)},r}(b);w.defaultState={},w.VERSION="0.5.0-nmp-36",w.isSupported=function(){return!!window.MediaSource},w.canPlaySource=function(e,t){return/^(application\/dash\+xml|application\/x-mpegURL)/i.test(e.type)?"probably":""};var S=window.navigator&&window.navigator.userAgent||"",_=/Tizen/i.test(S),T=/Web0S/i.test(S),k=/Edg/i.test(S),E=!k&&(/Chrome/i.test(S)||/CriOS/i.test(S)),A=/CriOS/i.test(navigator.userAgent)&&/iphone|ipod|ipad/i.test(navigator.userAgent),x=/iPod/i.test(S),C=/iPad/i.test(S)||M&&TOUCH_ENABLED&&!/iPhone/i.test(S),P=/iPhone/i.test(S)&&!C,I=P||C||x,j=/Android/i.test(S),M=/Safari/i.test(S)&&!E&&!j&&!k&&!_&&!T,O=(M||I)&&!E,R=t.getTech("Tech");try{if(void 0!==webapis){var D=webapis.productinfo.getFirmware().toLowerCase();(D.includes("nklc")||D.includes("nkm"))&&(console.info("Positive NKLC"),!0)}}catch(e){}var L=O||A;R.registerTech("Shaka",w,L),e.IS_ANDROID=j,e.IS_ANY_SAFARI=O,e.IS_CHROME=E,e.IS_CRIOS=A,e.IS_EDGE=k,e.IS_IOS=I,e.IS_IPAD=C,e.IS_IPHONE=P,e.IS_IPOD=x,e.IS_SAFARI=M,e.IS_TIZEN=_,e.IS_WEBOS=T,e.default=w,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){(function(t){e.exports=t.shaka=n(414)}).call(t,n(18))},function(e,t,n){(function(e){/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
!function(){var n="undefined"!=typeof window?window:e,r={};(function(e,t,n){function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function i(e,t){if(t)e:{var n=v_;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&null!=t&&y_(n,e,{configurable:!0,writable:!0,value:t})}}function o(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function a(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function s(e){if(!(e instanceof Array)){e=a(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function u(e,t){if(e.prototype=b_(t.prototype),e.prototype.constructor=e,T_)T_(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.dk=t.prototype}function c(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function l(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function f(e,t){e.i={rg:t,Cg:!0},e.g=e.m||e.j}function d(e,t,n){return e.g=n,{value:t}}function h(e){e.g=0}function p(e,t,n){e.m=t,void 0!=n&&(e.j=n)}function g(e,t){e.m=0,e.j=t||0}function y(e,t,n){e.g=t,e.m=n||0}function v(e,t){return e.m=t||0,t=e.i.rg,e.i=null,t}function m(e){e.A=[e.i],e.m=0,e.j=0}function b(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Cg?e.g=e.m||e.j:void 0!=n.u&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function w(e){this.g=new c,this.h=e}function S(e,t){l(e.g);var n=e.g.l;return n?_(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),T(e))}function _(e,t,n,r){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.o=!1,i;var o=i.value}catch(t){return e.g.l=null,f(e.g,t),T(e)}return e.g.l=null,r.call(e.g,o),T(e)}function T(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,f(e.g,t)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Cg)throw t.rg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function k(e){this.next=function(t){return l(e.g),e.g.l?t=_(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=T(e)),t},this.throw=function(t){return l(e.g),e.g.l?t=_(e,e.g.l.throw,t,e.g.s):(f(e.g,t),t=T(e)),t},this.return=function(t){return S(e,t)},this[Symbol.iterator]=function(){return this}}function E(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(r,i){function o(e){e.done?r(e.value):Promise.resolve(e.value).then(t,n).then(o,i)}o(e.next())})}function A(e){return E(new k(new w(e)))}function x(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function P(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}function I(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{Ag:i,v:o}}return{Ag:-1,v:void 0}}function j(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function M(e,t){e=e.split(".");var n=E_;e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||void 0===t?n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}:n[r]=t}/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function O(){}function R(){}function D(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function L(e){return e.h/(1-Math.pow(e.g,e.i))}function N(){this.h=new D(2),this.j=new D(5),this.g=0,this.i=128e3,this.l=16e3}function U(){}function B(){}function F(){}function H(e){var t=x.apply(1,arguments);x_.has(e)||(x_.add(e),F.apply(U,s(t)))}function V(){}function W(){}function K(){}function q(){}function G(){}function z(){}function X(e){function t(){}A_=e,V=1<=A_?console.error.bind(console):t,W=2<=A_?console.warn.bind(console):t,K=3<=A_?console.info.bind(console):t,q=4<=A_?console.log.bind(console):t,G=5<=A_?console.debug.bind(console):t,z=6<=A_?console.debug.bind(console):t}function Y(){e.console&&(F=function(){return console.warn.apply(console,s(x.apply(0,arguments)))},B=function(){return console.error.apply(console,s(x.apply(0,arguments)))},X(0))}function J(){this.g={}}function $(){this.g=new J}function Q(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=Z(e,r),this.target.addEventListener(t,n,this.g)}function Z(e,t){if(void 0==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),ee(e)?t:t.capture||!1}function ee(e){var t=C_;if(void 0==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(e){t=!1}C_=t}return t||!1}function te(t){if(P_.has(t))return P_.get(t);if(e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported(t);return P_.set(t,n),n}return!!e.MediaSource&&(n=MediaSource.isTypeSupported(t),P_.set(t,n),n)}function ne(){return!!e.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}function re(e,t){this.g=e,this.h=t}function ie(e,t){var n=new re(5,0),r=I_,i=r.g,o=n.h-i.h;(0<(n.g-i.g||o)?r.i:r.h)(r.g,n,e,t)}function oe(e,t,n,r){F([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function ae(e,t,n,r){B([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}function se(){}function ue(){}function ce(){}function le(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(fe(e)==fe(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=he(e);t=he(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function fe(e){return e instanceof ArrayBuffer?e:e.buffer}function de(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function he(e,t,n){return n=void 0===n?1/0:n,ye(e,void 0===t?0:t,n,Uint8Array)}function pe(e,t,n){return n=void 0===n?1/0:n,ye(e,void 0===t?0:t,n,Uint16Array)}function ge(e,t,n){return n=void 0===n?1/0:n,ye(e,void 0===t?0:t,n,DataView)}function ye(e,t,n,r){var i=fe(e),o=1;"BYTES_PER_ELEMENT"in r&&(o=r.BYTES_PER_ELEMENT);var a=((e.byteOffset||0)+e.byteLength)/o;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/o,a))),new r(i,e,Math.floor(Math.min(e+Math.max(n,0),a))-e)}function ve(){}function me(e){this.l=new ue,(e=j_[e.toLowerCase()])&&(this.l=e()),this.h=new se,(e=M_)&&(this.h=e())}function be(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function we(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function Se(e,t,n){if(n||(n=be),e.length!=t.length)return!1;t=t.slice();var r={};e=a(e);for(var i=e.next();!i.done;r={Ce:r.Ce},i=e.next()){if(r.Ce=i.value,-1==(i=t.findIndex(function(e){return function(t){return n(e.Ce,t)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function _e(e,t,n){if(n||(n=be),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Te(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Ae,this.position=null,this.positionAlign=O_,this.size=0,this.textAlign=R_,this.direction=U_,this.writingMode=B_,this.lineInterpretation=F_,this.line=null,this.lineHeight="",this.lineAlign=H_,this.displayAlign=L_,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=q_,this.fontStyle=G_,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Ub:32,rows:15}}function ke(e,t){return e=new Te(e,t,""),e.lineBreak=!0,e}function Ee(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!_e(e.nestedCues,t.nestedCues,Ee))return!1}else if("region"==n||"cellResolution"==n){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!_e(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}function Ae(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=X_,this.scroll=Y_}function xe(){}function Ce(e,t,n){J_[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ue:t}}function Pe(e,t){for(var n=e.toLowerCase().split(";")[0],r=a([eT,Z_,Q_,$_]),i=r.next();!i.done;i=r.next())if(i=J_[n+"-"+i.value]){var o=i.ue(),s=o.isSupported(e,t);if(o.destroy(),s)return i.ue}return null}/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
function Ie(e){var t;e instanceof Ie?(je(this,e.wb),this.qc=e.qc,Me(this,e.zb),Oe(this,e.Ic),this.Sa=e.Sa,Re(this,e.g.clone()),this.Vb=e.Vb):e&&(t=String(e).match(tT))?(je(this,t[1]||"",!0),this.qc=De(t[2]||""),Me(this,t[3]||"",!0),Oe(this,t[4]),this.Sa=De(t[5]||"",!0),Re(this,t[6]||"",!0),this.Vb=De(t[7]||"")):this.g=new Ue(null)}function je(e,t,n){e.wb=n?De(t,!0):t,e.wb&&(e.wb=e.wb.replace(/:$/,""))}function Me(e,t,n){e.zb=n?De(t,!0):t}function Oe(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Ic=t}else e.Ic=null}function Re(e,t,n){t instanceof Ue?e.g=t:(n||(t=Le(t,oT)),e.g=new Ue(t))}function De(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Le(e,t,n){return null!=e?(e=encodeURI(e).replace(t,Ne),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ne(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function Ue(e){this.g=e||null}function Be(e){if(!e.Fa&&(e.Fa={},e.ed=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];o=decodeURIComponent(o.replace(/\+/g," ")),i=i||"",e.add(o,decodeURIComponent(i.replace(/\+/g," ")))}}function Fe(e){return Be(e),e.ed}function He(e,t,n){var r=x.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1;var i,o=r="UNKNOWN";for(i in uT){uT[i]==this.category&&(r=i);for(var a in cT)cT[a]==this.code&&(o=a)}for(var s in cT)cT[s]==this.code&&(o=s);if(this.message="Shaka Error "+r+"."+o+" ("+this.data.toString()+")",sT)try{throw Error(this.message||"Shaka Error")}catch(e){this.stack=e.stack}for(var u in cT);}function Ve(e){this.h=e,this.g=void 0}function We(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function Ke(e){this.h=e,this.g=null}function qe(e){this.h=e,this.g=null}function Ge(){var t=e.ManagedMediaSource||e.MediaSource;return!(!t||!t.isTypeSupported)}function ze(e){return""!=ft().canPlayType(e)}function Xe(){return!!navigator.userAgent.match(/Edge?\//)}function Ye(){return lt("Xbox One")}function Je(){return lt("Tizen")}function $e(){return lt("Tizen 3")}function Qe(){return lt("Tizen 2")}function Ze(){return lt("Web0S")}function et(){return Ze()&&38===nt()}function tt(){return lt("CrKey")}function nt(){if(!lt("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function rt(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Je()&&!lt("PC=EOS")&&!lt("PC=APL")&&!lt("VirginMedia")&&!st()&&!ot()&&!lt("AFT")&&!lt("WPE")&&!lt("DT_STB_BCM")}function it(){return lt("PlayStation 5")}function ot(){return lt("PlayStation 4")}function at(){return lt("Hisense")||lt("VIDAA")}function st(){return lt("SOPOpenBrowser")}function ut(){if(!rt())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e?parseInt(e[1],10):(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function ct(){return navigator.userAgentData&&navigator.userAgentData.platform?"windows"==navigator.userAgentData.platform.toLowerCase():!!navigator.platform&&navigator.platform.toLowerCase().includes("windows")}function lt(e){return(navigator.userAgent||"").includes(e)}function ft(){return fT||(lT||(lT=new qe(function(){fT=null})),(fT=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(fT=document.createElement("video")),lT.X(1),fT)}function dt(t){return t?t===e.shakaMediaKeysPolyfill:!!e.shakaMediaKeysPolyfill}function ht(){var t,n,r,i,o,a,s,u,c,l,f,h,g,m;return A(function(b){switch(b.g){case 1:if(t={width:1/0,height:1/0},tt()){if(f=e.cast&&cast.__platform__&&cast.__platform__.canDisplayType,t.width=1280,t.height=720,p(b,15),!(h=f)){b.u(17);break}return d(b,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(Je()){t.width=1920,t.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(n=webapis.systeminfo.getMaxVideoResolution(),t.width=n.width,t.height=n.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(t.width=7680,t.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(t.width=3840,t.height=2160)}catch(e){lt("Tizen 8")?(t.width=3840,t.height=2160):F("Tizen: Error detecting screen size, default screen size 1920x1080.")}b.u(3);break}if(Ye()){r=new Windows.Media.Protection.ProtectionCapabilities,i=Windows.Media.Protection.ProtectionCapabilityResult,o=null;try{do{o=r.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation")}while(o===i.maybe)}catch(e){o=i.notSupported}o===i.probably?(t.width=3840,t.height=2160):(t.width=1920,t.height=1080),b.u(3);break}if(Ze()){try{a=JSON.parse(e.PalmSystem.deviceInfo),t.width=Math.max(1920,a.screenWidth),t.height=Math.max(1080,a.screenHeight)}catch(e){F("WebOS: Error detecting screen size, default screen size 1920x1080."),t.width=1920,t.height=1080}b.u(3);break}if(at()){e.Hisense_Get4KSupportState&&e.Hisense_Get4KSupportState()?(t.width=3840,t.height=2160):(t.width=1920,t.height=1080),b.u(3);break}if(!ot()&&!it()){b.u(3);break}return s=!1,p(b,9),d(b,e.msdk.device.getDisplayInfo(),11);case 11:u=b.h,s="4K"===u.resolution,y(b,10);break;case 9:return v(b),p(b,12),d(b,e.msdk.device.getDisplayInfoImmediate(),14);case 14:c=b.h,s="4K"===c.resolution,y(b,10);break;case 12:l=v(b),F("PlayStation: Failed to get the display info:",l);case 10:s?(t.width=3840,t.height=2160):(t.width=1920,t.height=1080),b.u(3);break;case 18:h=b.h;case 17:if(h){t.width=3840,t.height=2160,b.u(19);break}if(!(g=f)){b.u(20);break}return d(b,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:g=b.h;case 20:g&&(t.width=1920,t.height=1080);case 19:y(b,3);break;case 15:m=v(b),B("Failed to check canDisplayType:",m);case 3:return b.return(t)}})}function pt(){}function gt(t){if(!t)return"";if(t=he(t),239==t[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!ot())return t=(new TextDecoder).decode(t),t.includes("�")&&B('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",r=0;r<t.length;++r){var i=65533;if(0==(128&t[r])?i=t[r]:t.length>=r+2&&192==(224&t[r])&&128==(192&t[r+1])?(i=(31&t[r])<<6|63&t[r+1],r+=1):t.length>=r+3&&224==(240&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])?(i=(15&t[r])<<12|(63&t[r+1])<<6|63&t[r+2],r+=2):t.length>=r+4&&240==(241&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])&&128==(192&t[r+3])&&(i=(7&t[r])<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3],r+=3),65535>=i)n+=String.fromCharCode(i);else{i-=65536;var o=1023&i;n+=String.fromCharCode(55296+(i>>10)),n+=String.fromCharCode(56320+o)}}return n}function yt(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw V("Data has an incorrect length, must be even."),new He(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=ge(e);for(var i=0;i<n;i++)r[i]=e.getUint16(2*i,t);return wt(r)}function vt(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=he(e);if(239==n[0]&&187==n[1]&&191==n[2])return gt(n);if(254==n[0]&&255==n[1])return yt(n.subarray(2),!1);if(255==n[0]&&254==n[1])return yt(n.subarray(2),!0);if(q("Unable to find byte-order-mark, making an educated guess."),0==n[0]&&0==n[2])return yt(e,!1);if(0==n[1]&&0==n[3])return yt(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return gt(e);throw new He(2,2,2003)}function mt(t){if(e.TextEncoder&&!ot()){var n=new TextEncoder;return de(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var r=0;r<t.length;r++)n[r]=t[r].charCodeAt(0);return de(n)}function bt(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n}function wt(e){return dT.value()(e)}function St(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|#(0+)?39|nbsp|lrm|rlm);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(e){return t[e]||"'"}):e||""}function _t(){}function Tt(e){return e=wt(he(e)),btoa(e)}function kt(e,t){return t=void 0==t||t,e=Tt(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Et(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function At(t){for(var n=t.length/2,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.parseInt(t.substr(2*i,2),16);return r}function xt(e){var t=he(e);e="",t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),1==n.length&&(n="0"+n),e+=n;return e}function Ct(){for(var e=x.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var i=e[r];i instanceof Uint8Array?t.set(i,n):t.set(he(i),n),n+=i.byteLength}return t}function Pt(e,t){if(0==t.length)return e;if(1==e.length&&1==t.length){var n=new Ie(e[0]);return t=new Ie(t[0]),[n.resolve(t).toString()]}t=t.map(function(e){return new Ie(e)}),n=[],e=a(e);for(var r=e.next();!r.done;r=e.next()){r=new Ie(r.value);for(var i=a(t),o=i.next();!o.done;o=i.next())n.push(r.resolve(o.value).toString())}return n}function It(e,t,n){return{keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set}}function jt(t,n){n=void 0===n?"cenc":n;var r=[],i=[],o=[];t.forEach(function(e,t){var n=t;22!=n.length&&(n=kt(At(t),!1));var a=e;22!=a.length&&(a=kt(At(e),!1)),e={kty:"oct",kid:n,k:a},r.push(e),i.push(e.kid),o.push(t)}),t=JSON.stringify({keys:r});var a=JSON.stringify({kids:i});return a=[{initData:he(mt(a)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:n,licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:a,keyIds:new Set(o)}}function Mt(e,t){if(1==t.length)return t[0];if(null!=(e=Ot(e,t)))return e;throw new He(2,4,4025,t)}function Ot(e,t){for(var n=a(yT[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var i=a(t),o=i.next();!o.done;o=i.next())if(o=o.value,r.test(o.trim()))return o.trim()}return e==hT?"":null}function Rt(e,t){var n=[];e=a(yT[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var i=a(t),o=i.next();!o.done;o=i.next())o=o.value,r.test(o.trim())&&n.push(o.trim())}return n}function Dt(){}function Lt(e,t){var n=e;return t&&!mT.includes(e)&&(n+='; codecs="'+t+'"'),n}function Nt(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Ut(e,t,n){var r=Lt(e,t);return t=Nt(e,t),Pe(t)?(e=Pe(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?r.replace("video","audio"):r,n}function Bt(e,t,n){var r=[t];return vT.forEach(function(t,i){var o=e[i];"codecs"==i?mT.includes(e.mimeType)||r.push('codecs="'+n+'"'):o&&r.push(t+'="'+o+'"')}),"PQ"==e.hdr&&r.push('eotf="smpte2084"'),r.join(";")}function Ft(e){return e.split(";")[0].split("/")[1]}function Ht(e){var t=Gt(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi-hevc";case"dvav"===e:case"dva1"===e:return"dovi-avc";case"dav1"===e:return"dovi-av1"}return e}function Vt(e){var t=[];e=a(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Gt(n.value),t.push(n[0]);return t.sort().join(",")}function Wt(e){return e.split(";")[0]}function Kt(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function qt(e){return"application/x-mpegurl"===e||"application/vnd.apple.mpegurl"===e}function Gt(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}function zt(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function Xt(e){return!!bT[e]||("application/cea-608"==e||"application/cea-708"==e)&&!!M_}function Yt(e,t,n,r,i){var o,s,u,c,l,f,p;return A(function(g){if(1==g.g)return d(g,Promise.resolve(),2);if(!e.i||!e.j)return g.return();if(null==n||null==r)return e.i.parseInit(he(t)),g.return();for(o=e.B?n:e.s,s={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:o},u=e.i.parseMedia(he(t),s,i),c=a(u),l=c.next();!l.done;l=c.next())f=l.value,e.A(f,i||null,s);p=u.filter(function(t){return t.startTime>=e.l&&t.startTime<e.m}),e.j.append(p),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),h(g)})}function Jt(e,t,n){e.l=t,e.m=n}function $t(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=a(t.keys()),i=r.next();!i.done;i=r.next())(i=t.get(i.value).filter(function(e){return e.endTime<=n}))&&e.j.append(i)}function Qt(e,t,n){t.startTime+=n,t.endTime+=n,t=a(t.nestedCues);for(var r=t.next();!r.done;r=t.next())Qt(e,r.value,n)}function Zt(e,t,n,r,i){var o=n+" "+r,s=new Map;t=a(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value;u=c.stream,c=c.cue,s.has(u)||s.set(u,new Map),s.get(u).has(o)||s.get(u).set(o,[]),Qt(e,c,i),c.startTime>=e.l&&c.startTime<e.m&&(s.get(u).get(o).push(c),u==e.C&&e.j.append([c]))}for(i=a(s.keys()),o=i.next();!o.done;o=i.next())for(o=o.value,e.o.has(o)||e.o.set(o,new Map),t=a(s.get(o).keys()),u=t.next();!u.done;u=t.next())u=u.value,c=s.get(o).get(u),e.o.get(o).set(u,c);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}function en(e,t){return e.concat(t)}function tn(){}function nn(e){return null!=e}function rn(){}function on(e,t){return e=un(e),t=un(t),e.split("-")[0]==t.split("-")[0]}function an(e,t){return e=un(e),t=un(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function sn(e,t){return e=un(e),t=un(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function un(e){e=a(e.split("-x-"));var t=e.next().value;t=void 0===t?"":t,e=e.next().value,e=void 0===e?"":e;var n=a(t.split("-"));return t=n.next().value,t=void 0===t?"":t,n=n.next().value,n=void 0===n?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=wT.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function cn(e,t){return e=un(e),t=un(t),t==e?4:an(t,e)?3:sn(t,e)?2:an(e,t)?1:0}function ln(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=wT.get(e)||e}function fn(e){return e.language?un(e.language):e.audio&&e.audio.language?un(e.audio.language):e.video&&e.video.language?un(e.video.language):"und"}function dn(e,t){e=un(e);var n=new Set,r=a(t);for(t=r.next();!t.done;t=r.next())n.add(un(t.value));for(r=a(n),t=r.next();!t.done;t=r.next())if((t=t.value)==e)return t;for(r=a(n),t=r.next();!t.done;t=r.next())if(t=t.value,an(t,e))return t;for(r=a(n),t=r.next();!t.done;t=r.next())if(t=t.value,sn(t,e))return t;for(n=a(n),t=n.next();!t.done;t=n.next())if(t=t.value,an(e,t))return t;return null}function hn(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e||e.buffer instanceof ArrayBuffer)return e;if(n.has(e))return null;var r=e.constructor==Array;if(e.constructor!=Object&&!r)return null;n.add(e);var i,o=r?[]:{};for(i in e)o[i]=t(e[i]);return r&&(o.length=e.length),o}}var n=new WeakSet;return t(e)}function pn(e){var t,n={};for(t in e)n[t]=e[t];return n}function gn(){}function yn(e,t,n,r){var i=e.variants;if((t.length||n.length)&&(i=vn(i,t,n)),r.length){for(t=new J,n=a(i),i=n.next();!i.done;i=n.next())i=i.value,t.push(String(i.video.width||0),i);var o=[];t.forEach(function(e,t){e=0;var n=[],i={};t=a(t);for(var u=t.next();!u.done;i={ad:i.ad},u=t.next())i.ad=u.value,u=r.filter(function(e){return function(t){return e.ad.decodingInfos[0][t]}}(i)).length,u>e?(e=u,n=[i.ad]):u==e&&n.push(i.ad);o.push.apply(o,s(n))}),i=o}n=new Set,t=new Set;var u=a(i);for(i=u.next();!i.done;i=u.next())i=i.value,i.audio&&n.add(i.audio),i.video&&t.add(i.video);n=Array.from(n).sort(function(e,t){return e.bandwidth-t.bandwidth});var c=[];for(i=new Map,n=a(n),u=n.next();!u.done;u=n.next()){u=u.value;var l=u.language+(u.channelsCount||0)+(u.audioSamplingRate||0)+u.roles.join(",")+u.label+u.groupId+u.fastSwitching,f=i.get(l)||[];if(f.length){var d=f[f.length-1],h=Ht(d.codecs),p=Ht(u.codecs);h==p&&u.bandwidth>d.bandwidth&&(f.push(u),c.push(u.id))}else f.push(u),c.push(u.id);i.set(l,f)}n=Array.from(t).sort(function(e,t){return e.bandwidth&&t.bandwidth?e.bandwidth-t.bandwidth:e.width-t.width}),t=ne();var g=[];for(i=new Map,n=a(n),u=n.next();!u.done;u=n.next()){if(u=u.value,l=Math.round(u.frameRate||0)+(u.hdr||"")+u.fastSwitching,f=i.get(l)||[],f.length){if(d=f[f.length-1],!t&&(h=Ht(d.codecs),p=Ht(u.codecs),h!==p))continue;u.width>d.width||u.height>d.height?(f.push(u),g.push(u.id)):u.width==d.width&&u.height==d.height&&(h=Ht(d.codecs),p=Ht(u.codecs),h==p&&u.bandwidth>d.bandwidth&&(f.push(u),g.push(u.id)))}else f.push(u),g.push(u.id);i.set(l,f)}e.variants=e.variants.filter(function(e){var t=e.audio,n=e.video;return!(t&&!c.includes(t.id)||n&&!g.includes(n.id))||(q("Dropping Variant (better codec available)",e),!1)})}function vn(e,t,n){var r={};t=a(t);for(var i=t.next();!i.done;r={Ie:r.Ie},i=t.next())if(r.Ie=i.value,i=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.Ie)}}(r)),i.length){e=i;break}for(r={},n=a(n),t=n.next();!t.done;r={Be:r.Be},t=n.next())if(r.Be=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.Be)}}(r)),t.length){e=t;break}return e}function mn(e,t,n){e.variants=e.variants.filter(function(e){return bn(e,t,n)})}function bn(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;if(i&&i.width&&i.height){var o=i.width,s=i.height;if(s>o&&(s=a([s,o]),o=s.next().value,s=s.next().value),!r(o,t.minWidth,Math.min(t.maxWidth,n.width))||!r(s,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function wn(e,t,n){var r=!1;e=a(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var o=i.allowedByApplication;i.allowedByApplication=bn(i,t,n),o!=i.allowedByApplication&&(r=!0)}return r}function Sn(e,t,n){return n=void 0===n?[]:n,A(function(r){return 1==r.g?d(r,_n(e,t,0<t.offlineSessionIds.length,n),2):(jn(t),d(r,Mn(t),0))})}function _n(e,t,n,r){var i,o;return A(function(a){if(1==a.g)return d(a,xn(t.variants,n,!1,r),2);i=null,e&&(o=e.g)&&(i=o.keySystem),t.variants=t.variants.filter(function(e){var t=Tn(e,i);if(!t){var n=q,r=[];e.audio&&r.push(qn(e.audio)),e.video&&r.push(qn(e.video)),n("Dropping variant - not compatible with platform",r.join(", "))}return t}),h(a)})}function Tn(e,t){var n=Ye(),r=lt("Firefox")&&lt("Android"),i=e.video,o=i&&i.width||0,a=i&&i.height||0;if(n&&i&&(1920<o||1080<a)&&(i.codecs.includes("avc1.")||i.codecs.includes("avc3.")))return!1;if(i){if(n=In(i.codecs),i.codecs.includes(",")){if(o=i.codecs.split(","),n=Mt("video",o),n=In(n),o=Mt("audio",o),o=Pn(o,i.mimeType),a=Ut(i.mimeType,o,"audio"),!te(a))return!1;n=[n,o].join()}if(o=Ut(i.mimeType,n,"video"),!te(o))return!1;i.codecs=n}if(i=e.audio,r&&i&&i.encrypted&&i.codecs.toLowerCase().includes("opus"))return!1;if(i){if(r=Pn(i.codecs,i.mimeType),n=Ut(i.mimeType,r,"audio"),!te(n))return!1;i.codecs=r}return e.decodingInfos.some(function(e){return!(!e.supported||t&&(e=e.keySystemAccess)&&e.keySystem!=t)})}function kn(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=a(t);for(var r=t.next();!r.done;r=t.next()){var i=r.value;r=JSON.stringify(i),i=e[i],i instanceof Object?(i=kn(i),n.push(r+":"+i)):(i=JSON.stringify(i),n.push(r+":"+i))}return"{"+n.join(",")+"}"}function En(e,t){var n,r,i,o,s,u,c;return A(function(l){if(1==l.g){for(n=function(e,t){if(e){var n=pn(e);return n.supported=e.supported&&t.supported,n.powerEfficient=e.powerEfficient&&t.powerEfficient,n.smooth=e.smooth&&t.smooth,t.keySystemAccess&&!n.keySystemAccess&&(n.keySystemAccess=t.keySystemAccess),n}return t},r=null,i=[],o={},s=a(t),u=s.next();!u.done;o={Nc:o.Nc,tc:o.tc},u=s.next())c=u.value,o.tc=kn(c),o.Nc=ST,o.Nc[o.tc]?(z("Using cached results of mediaCapabilities.decodingInfo","for key",o.tc),r=n(r,o.Nc[o.tc])):i.push(An(c).then(function(e){return function(t){var i=null;t=a(t||[]);for(var o=t.next();!o.done;o=t.next())i=n(i,o.value);i&&(e.Nc[e.tc]=i,r=n(r,i))}}(o)));return d(l,Promise.all(i),2)}r&&e.decodingInfos.push(r),h(l)})}function An(e){var t=[""];e.video&&(t=Kt(e.video.contentType).split(","));var n=[""];e.audio&&(n=Kt(e.audio.contentType).split(","));var r=[];t=a(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;for(var o={},s=a(n),u=s.next();!u.done;o={Qb:o.Qb},u=s.next())u=u.value,o.Qb=hn(e),e.video&&(o.Qb.video.contentType=Lt(Wt(o.Qb.video.contentType),i)),e.audio&&(o.Qb.audio.contentType=Lt(Wt(o.Qb.audio.contentType),u)),r.push(new Promise(function(e){return function(t,n){navigator.mediaCapabilities.decodingInfo(e.Qb).then(function(e){t(e)}).catch(n)}}(o)))}return Promise.all(r).catch(function(t){return K("MediaCapabilities.decodingInfo() failed.",JSON.stringify(e),t),null})}function xn(e,t,n,r){var i,o,s,u,c,l,f,h,p,g,y,v,m,b,w,S,_;return A(function(T){switch(T.g){case 1:if(i=e.some(function(e){return e.decodingInfos.length}))return q("Already got the variants' decodingInfo."),T.return();o={},s=a(r),u=s.next();case 2:if(u.done){T.u(4);break}o.De=u.value,c=!1,l=a(e),f=l.next();case 5:if(f.done){T.u(7);break}h=f.value,p=Cn(h,t,n).filter(function(e){return function(t){return t=t[0],(t.keySystemConfiguration&&t.keySystemConfiguration.keySystem)===e.De}}(o)),g=a(p),y=g.next();case 8:if(y.done){T.u(10);break}return v=y.value,d(T,En(h,v),9);case 9:y=g.next(),T.u(8);break;case 10:h.decodingInfos.length&&(c=!0),f=l.next(),T.u(5);break;case 7:if(c)return T.return();o={De:o.De},u=s.next(),T.u(2);break;case 4:m=a(e),f=m.next();case 12:if(f.done){T.u(0);break}b=f.value,w=Cn(b,t,n).filter(function(e){return e=e[0],!(e=e.keySystemConfiguration&&e.keySystemConfiguration.keySystem)||!r.includes(e)}),S=a(w),y=S.next();case 15:if(y.done){f=m.next(),T.u(12);break}return _=y.value,d(T,En(b,_),16);case 16:y=S.next(),T.u(15)}})}function Cn(e,t,n){var r=e.audio,i=e.video,o=[],s=[];if(i)for(var u=a(i.fullMimeTypes),c=u.next();!c.done;c=u.next()){c=c.value;var l=Kt(c);if(l.includes(",")&&!r){var f=l.split(","),d=Wt(c);l=Mt("video",f),f=Mt("audio",f),f=Pn(f,d),d=Ut(d,f,"audio"),s.push({contentType:d,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(l=In(l),c={contentType:Ut(Wt(c),l,"video"),width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||1},i.hdr)switch(i.hdr){case"SDR":c.transferFunction="srgb";break;case"PQ":c.transferFunction="pq";break;case"HLG":c.transferFunction="hlg"}i.colorGamut&&(c.colorGamut=i.colorGamut),o.push(c)}if(r)for(u=a(r.fullMimeTypes),c=u.next();!c.done;c=u.next())l=c.value,c=Wt(l),l=Pn(Kt(l),c),c=Ut(c,l,"audio"),s.push({contentType:c,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(u=[],0==o.length&&o.push(null),0==s.length&&s.push(null),o=a(o),c=o.next();!c.done;c=o.next())for(c=c.value,l=a(s),d=l.next();!d.done;d=l.next())d=d.value,f={type:n?"file":"media-source"},c&&(f.video=c),d&&(f.audio=d),u.push(f);if(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!s.length)return[u];e=[],n=new Map,s=a(s);for(var h=s.next();!h.done;h=s.next())o=h.value,n.get(o.keySystem)||n.set(o.keySystem,[]),n.get(o.keySystem).push(o);for(s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],o=a(n.keys()),c=o.next();!c.done;c=o.next()){for(c=c.value,l=[],d=a(u),f=d.next();!f.done;f=d.next()){f=Object.assign({},f.value);var p=n.get(c),g={keySystem:c,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t};for(p=a(p),h=p.next();!h.done;h=p.next()){if(h=h.value,h.initData&&h.initData.length){for(var y=new Set,v=a(h.initData),m=v.next();!m.done;m=v.next())y.add(m.value.initDataType);1<y.size&&z("DrmInfo contains more than one initDataType,","and we use the initDataType of the first initData.",h),g.initDataType=h.initData[0].initDataType}h.distinctiveIdentifierRequired&&(g.distinctiveIdentifier="required"),h.persistentStateRequired&&(g.persistentState="required"),h.sessionType&&(g.sessionTypes=[h.sessionType]),r&&(g.audio?(g.audio.encryptionScheme=g.audio.encryptionScheme||h.encryptionScheme,g.audio.robustness=g.audio.robustness||h.audioRobustness):g.audio={encryptionScheme:h.encryptionScheme,robustness:h.audioRobustness},""==g.audio.robustness&&delete g.audio.robustness),i&&(g.video?(g.video.encryptionScheme=g.video.encryptionScheme||h.encryptionScheme,g.video.robustness=g.video.robustness||h.videoRobustness):g.video={encryptionScheme:h.encryptionScheme,robustness:h.videoRobustness},""==g.video.robustness&&delete g.video.robustness)}f.keySystemConfiguration=g,l.push(f)}e.push(l)}return e}function Pn(e,t){return"flac"==e.toLowerCase()?ut()?"fLaC":"flac":"opus"===e.toLowerCase()?ut()&&"mp4"==Ft(t)?"Opus":"opus":e}function In(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function jn(e){e.textStreams=e.textStreams.filter(function(e){var t=Lt(e.mimeType,e.codecs);return(t=Xt(t))||q("Dropping text stream. Is not supported by the platform.",e),t})}function Mn(e){var t,n,r,i,o,s,u,c;return A(function(l){switch(l.g){case 1:t=[],n=a(e.imageStreams),r=n.next();case 2:if(r.done){l.u(4);break}if(i=r.value,o=i.mimeType,"application/mp4"==o&&"mjpg"==i.codecs&&(o="image/jpg"),TT.has(o)){l.u(5);break}if(!(s=kT.get(o))){TT.set(o,!1),l.u(5);break}return d(l,On(s),7);case 7:u=l.h,TT.set(o,u);case 5:(c=TT.get(o))?t.push(i):q("Dropping image stream. Is not supported by the platform.",i),r=n.next(),l.u(2);break;case 4:e.imageStreams=t,h(l)}})}function On(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(2===n.height)}})}function Rn(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,i=n?n.mimeType:null,o=t?t.codecs:null,s=n?n.codecs:null,u=[];s&&u.push(s),o&&u.push(o);var c=[];n&&c.push(n.mimeType),t&&c.push(t.mimeType),c=c[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var f=new Set;if(t)for(var d=a(t.roles),h=d.next();!h.done;h=d.next())f.add(h.value);if(n)for(d=a(n.roles),h=d.next();!h.done;h=d.next())f.add(h.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:e.label,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:c,audioMimeType:r,videoMimeType:i,codecs:u.join(", "),audioCodec:o,videoCodec:s,primary:e.primary,roles:Array.from(f),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioChannelConfig=t.audioChannelConfig,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=e.label||t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Dn(e){return{id:e.id,active:!1,type:hT,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Ln(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var i=e.tilesLayout;return r&&(i=r.tilesLayout||i),i&&null!=t&&(t/=Number(i.split("x")[0])),i&&null!=n&&(n/=Number(i.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:i||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Nn(e){return e.__shaka_id||(e.__shaka_id=_T++),e.__shaka_id}function Un(e){var t=Fn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="unknown"),"subtitles"==e.kind&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function Bn(e){var t=Fn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Fn(e){var t=e.language;return{id:Nn(e),active:!1,type:"",bandwidth:0,language:un(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Hn(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function Vn(e){return e.filter(function(e){return Hn(e)})}function Wn(e,t,n,r){var i=e,o=e.filter(function(e){return e.primary});o.length&&(i=o);var a=i.length?i[0].language:"";if(i=i.filter(function(e){return e.language==a}),t){var s=dn(un(t),e.map(function(e){return e.language}));s&&(i=e.filter(function(e){return un(e.language)==s}))}if(i=i.filter(function(e){return e.forced==r}),n){if(e=Kn(i,n),e.length)return e;W("No exact match for the text role could be found.")}else if(e=i.filter(function(e){return 0==e.roles.length}),e.length)return e;return e=i.map(function(e){return e.roles}).reduce(en,[]),e.length?Kn(i,e[0]):i}function Kn(e,t){return e.filter(function(e){return e.roles.includes(t)})}function qn(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function Gn(){var e=this;this.A=null,this.j=!1,this.i=new N,this.F=new $,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new N,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.o=[],this.B=1,this.G=!1,this.h=this.m=this.g=this.s=null,this.C=new qe(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.l=null}function zn(e){if(z("Suggesting Streams..."),e.G){if(Date.now()-e.s<1e3*e.g.switchInterval)return void z("Still within switch interval...")}else{var t=e.i;if(!(t.g>=t.i))return void z("Still waiting for a good estimate...");e.G=!0}t=e.chooseVariant();var n=e.getBandwidthEstimate();n=Math.round(n/1e3),t&&(q("Calling switch_(), bandwidth="+n+" kbps"),e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Xn(e,t,n,r,i){if(e.l){var o=e.l.xg();o&&(n=n.filter(function(e){return!e.bandwidth||!o||e.bandwidth<=o}))}return t&&(n=n.filter(function(e){return bn(e,t,{width:i,height:r})})),n.sort(function(e,t){return e.bandwidth-t.bandwidth})}function Yn(e){var t=[];e=a(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(e,t){return e.width-t.width})}function Jn(e,t,n,r){for(n=void 0===n||n,r=void 0!==r&&r,this.h=e,this.g=new Set([e]),t=t||[],e=a(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}function $n(e,t,n,r){var i;if(!(i=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(i=e.audio&&t.audio)){i=e.audio;var o=t.audio;i=!!((!i.channelsCount||!o.channelsCount||2<i.channelsCount||2<o.channelsCount)&&i.channelsCount!=o.channelsCount||i.audioChannelConfig!=o.audioChannelConfig||i.accessibilityPurpose!=o.accessibilityPurpose||n&&!Qn(i,o)||!Zn(i.roles,o.roles)||r&&i.groupId!==o.groupId)}return!(r=i)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||Qn(e,t))&&Zn(e.roles,t.roles))),!r}function Qn(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map(function(e){return Vt(e)}),t=t.codecs.split(",").map(function(e){return Vt(e)}),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Zn(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=a(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function er(e,t,n){t=void 0===t?"reload":t,n=void 0!==n&&n,this.i=e,this.h=t,this.g=n,this.j=new tr(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n,e.audio&&e.audio.audioChannelConfig?e.audio.audioChannelConfig:"",e.audio&&e.audio.accessibilityPurpose?e.audio.accessibilityPurpose:void 0)}function tr(e,t,n,r,i,o,a,s,u,c,l,f){this.B=e,this.C=t,this.j=n,this.h=void 0===l?"":l,this.g=void 0===f?"":f,this.l=r,this.F=i,this.o=o,this.i=void 0===a?"":a,this.m=void 0===s?"":s,this.s=void 0===u?"reload":u,this.A=void 0!==c&&c}function nr(e,t){t=un(t);var n=dn(t,e.map(function(e){return fn(e)}));return n?e.filter(function(e){return n==fn(e)}):[]}function rr(e,t){return e.filter(function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)})}function ir(e,t){return e.filter(function(e){return!(!e.audio||!e.audio.label)&&e.audio.label.toLowerCase()==t.toLowerCase()})}function or(e,t){return e.filter(function(e){return!(!e.video||!e.video.label)&&e.video.label.toLowerCase()==t.toLowerCase()})}function ar(e,t){return e.filter(function(e){return!e.audio||!e.audio.channelsCount||e.audio.channelsCount==t})}function sr(e,t){return e.filter(function(e){return!e.audio||!e.audio.audioChannelConfig||e.audio.audioChannelConfig==t})}function ur(e,t){return e.filter(function(e){return!e.audio||e.audio.accessibilityPurpose==t})}function cr(t,n){return"AUTO"==n&&(n=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),t.filter(function(e){return!e.video||!e.video.hdr||e.video.hdr==n})}function lr(e,t){return e.filter(function(e){return!e.video||!e.video.videoLayout||e.video.videoLayout==t})}function fr(e,t){return e.filter(function(e){return!e.audio||e.audio.spatialAudio==t})}function dr(){this.g=xT,this.i=(new Map).set(xT,2).set(AT,1),this.h=0}function hr(e,t,n){e.i.set(xT,n).set(AT,t)}function pr(e,t){var n=yr();this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function gr(e){var t,n;return A(function(r){if(1==r.g){if(e.g>=e.l){if(!e.i)throw new He(2,7,1010);e.g=1,e.h=e.j}return t=e.g,(e.g++,0==t)?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),d(r,new Promise(function(e){new qe(e).X(n/1e3)}),2))}e.h*=e.m,h(r)})}function yr(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function vr(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function mr(e,t){this.promise=e,this.i=t,this.g=!1}function br(e){return new mr(Promise.reject(e),function(){return Promise.resolve()})}function wr(){var e=Promise.reject(new He(2,7,7001));return e.catch(function(){}),new mr(e,function(){return Promise.resolve()})}function Sr(e){return new mr(Promise.resolve(e),function(){return Promise.resolve()})}function _r(e){return new mr(e,function(){return e.catch(function(){})})}function Tr(e){return new mr(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function kr(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}function Er(t,n){if(n)if(n instanceof Map)for(var r=a(n.keys()),i=r.next();!i.done;i=r.next())i=i.value,Object.defineProperty(this,i,{value:n.get(i),writable:!0,enumerable:!0});else for(r in n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Ar(e){var t,n=new Er(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}function xr(){this.la=new J,this.pe=this}function Cr(){this.g=[]}function Pr(e,t){e.g.push(t.finally(function(){we(e.g,t)}))}function Ir(e,t,n,r,i,o){xr.call(this),this.i=!1,this.m=new Cr,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.A=n||null,this.B=r||null,this.F=i||null,this.C=o||null,this.o=this.s=!1}function jr(e,t,n,r){n=n||IT;var i=jT[e];(!i||n>=i.priority)&&(jT[e]={priority:n,ue:t,vi:void 0!==r&&r})}function Mr(e,t){for(var n=a(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(e=a(e.h),r=e.next();!r.done;r=e.next())t.h.add(r.value)}function Or(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function Rr(e,t,n,r){function i(e){o=o.xa(function(){return n.body&&(n.body=de(n.body)),e(t,n,r)})}var o=Sr(void 0);e.B&&i(e.B),e=a(e.g);for(var s=e.next();!s.done;s=e.next())i(s.value);return o.xa(void 0,function(e){if(e instanceof He&&7001==e.code)throw e;throw new He(2,1,1006,e)})}function Dr(e,t,n,r,i,o,a,s){e.s&&(n.uris[o]=n.uris[o].replace("https://","http://")),e.o&&(n.uris[o]=n.uris[o].replace("http://","https://")),0<o&&e.F&&e.F(t,r,n.uris[o],n.uris[o-1]);var u=new Ie(n.uris[o]),c=u.wb,l=!1;c||(c=location.protocol,c=c.slice(0,-1),je(u,c),n.uris[o]=u.toString()),c=c.toLowerCase();var f=(c=jT[c])?c.ue:null;if(!f)return br(new He(2,1,1e3,u));var d,h=c.vi,p=null,g=null,y=!1,v=!1;return _r(gr(i)).xa(function(){if(e.i)return wr();d=Date.now();var i=0;n.requestStartTime=Date.now();var a=f(n.uris[o],n,t,function(o,a,u){p&&p.stop(),g&&g.X(c/1e3),e.l&&t==PT&&(i++,n.packetNumber=i,e.l(o,a,Nr(r),n),l=!0,s.g=u)},function(r){e.j&&e.j(r,n,t),v=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!h)return a;var u=n.retryParameters.connectionTimeout;u&&(p=new qe(function(){y=!0,a.abort()}),p.X(u/1e3));var c=n.retryParameters.stallTimeout;return c&&(g=new qe(function(){y=!0,a.abort()})),a}).xa(function(r){p&&p.stop(),g&&g.stop(),void 0==r.timeMs&&(r.timeMs=Date.now()-d);var i={response:r,bi:l};return!v&&e.j&&e.j(r.headers,n,t),i},function(u){if(p&&p.stop(),g&&g.stop(),e.A){var c=null,l=0;u instanceof He&&(c=u,1001==u.code&&(l=u.data[1])),e.A(n,c,l,y)}if(e.i)return wr();if(y&&(u=new He(1,1,1003,n.uris[o],t)),u instanceof He){if(7001==u.code)throw u;if(1010==u.code)throw a;if(1==u.severity)return c=(new Map).set("error",u),c=new Er("retry",c),e.dispatchEvent(c),o=(o+1)%n.uris.length,Dr(e,t,n,r,i,o,u,s)}throw u})}function Lr(e,t,n,r){var i=Sr(void 0),o={};e=a(e.h);for(var s=e.next();!s.done;o={Fe:o.Fe},s=e.next())o.Fe=s.value,i=i.xa(function(e){return function(){var i=n.response;return i.data&&(i.data=de(i.data)),e.Fe(t,i,r)}}(o));return i.xa(function(){return n},function(e){var t=2;if(e instanceof He){if(7001==e.code)throw e;t=e.severity}throw new He(t,1,1007,e)})}function Nr(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.Bd)return!1}return!0}function Ur(){this.g=0}function Br(e,t,n){mr.call(this,e,t),this.h=n}function Fr(e){this.g=!1,this.h=new vr,this.i=e}function Hr(e,t){if(e.g){if(t instanceof He&&7003==t.code)throw t;throw new He(2,7,7003,t)}}function Vr(e,t){var n=[];e=a(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function Wr(e,t){e=a(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Kr(e){for(var t=new Map,n=a(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function qr(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}function Gr(e,t){this.h=ge(e),this.i=t==MT,this.g=0}function zr(){return new He(2,3,3e3)}function Xr(){this.i=[],this.h=[],this.g=!1}function Yr(e){for(var t=ni(e);e.reader.na()&&!e.parser.g;)e.parser.Hc(e.start+t,e.reader,e.partialOkay)}function Jr(e){for(var t=ni(e),n=e.reader.O(),r=0;r<n&&(e.parser.Hc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function $r(e){var t=ni(e);for(e.reader.skip(78);e.reader.na()&&!e.parser.g;)e.parser.Hc(e.start+t,e.reader,e.partialOkay)}function Qr(e){var t=ni(e);e.reader.skip(8);var n=e.reader.ka();for(e.reader.skip(6),2==n?e.reader.skip(48):e.reader.skip(12),1==n&&e.reader.skip(16);e.reader.na()&&!e.parser.g;)e.parser.Hc(e.start+t,e.reader,e.partialOkay)}function Zr(e){return function(t){e(t.reader.nb(t.reader.getLength()-t.reader.sa()))}}function ei(e){var t=0;e=a(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function ti(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function ni(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}function ri(e){var t=this;this.g=[],this.h=[],this.data=[],(new Xr).box("moov",Yr).box("moof",Yr).P("pssh",function(e){if(1<e.version)W("Unrecognized PSSH version found!");else{var n=he(e.reader.h,-12,e.size);if(t.data.push(n),t.g.push(xt(e.reader.nb(16))),0<e.version){n=e.reader.O();for(var r=0;r<n;r++){var i=xt(e.reader.nb(16));t.h.push(i)}}}}).parse(e),0==this.data.length&&z("No pssh box found!")}function ii(e,t,n,r){var i=e.length,o=t.length+16+i;0<r&&(o+=4+16*n.size);var s=new Uint8Array(o),u=ge(s),c=0;if(u.setUint32(c,o),c+=4,u.setUint32(c,1886614376),c+=4,1>r?u.setUint32(c,0):u.setUint32(c,16777216),c+=4,s.set(t,c),c+=t.length,0<r)for(u.setUint32(c,n.size),c+=4,t=a(n),n=t.next();!n.done;n=t.next())n=At(n.value),s.set(n,c),c+=n.length;return u.setUint32(c,i),s.set(e,c+4),s}/*
 @license
 tXml
 Copyright 2015 Tobias Nickel
 SPDX-License-Identifier: MIT
*/
function oi(e,t){return e=vt(e),ai(e,t)}function ai(e,t){return e=ui(e),!t&&e.length?e[0]:(e=e.find(function(e){return e.tagName===t}))?e:(V("parseXml root element not found!"),null)}function si(e){return DT.has(e)?DT.get(e):""}function ui(e){function t(i,o){o=void 0!==o&&o;for(var a=[];e[r];)if(60==e.charCodeAt(r)){if(47===e.charCodeAt(r+1)){o=r+2,r=e.indexOf(">",r),o=e.substring(o,r);var u=o.indexOf(i);if(-1==u){var c=i.indexOf(".");0<c&&(u=o.indexOf(i.substring(0,c)))}if(-1==u)throw i=e.substring(0,r).split("\n"),Error("Unexpected close tag\nLine: "+(i.length-1)+"\nColumn: "+(i[i.length-1].length+1)+"\nChar: "+e[r]);r+1&&(r+=1);break}if(33===e.charCodeAt(r+1)){if(45==e.charCodeAt(r+2)){for(;-1!==r&&(62!==e.charCodeAt(r)||45!=e.charCodeAt(r-1)||45!=e.charCodeAt(r-2)||-1==r);)r=e.indexOf(">",r+1);-1===r&&(r=e.length)}else if(91===e.charCodeAt(r+2)&&91===e.charCodeAt(r+8)&&"cdata"===e.substr(r+3,5).toLowerCase()){u=e.indexOf("]]>",r),-1==u?(a.push(e.substr(r+9)),r=e.length):(a.push(e.substring(r+9,u)),r=u+3);continue}r++;continue}e:{c=o,r++;var l=n(),f={};for(u=[];62!==e.charCodeAt(r)&&e[r];){var d=e.charCodeAt(r);if(64<d&&91>d||96<d&&123>d){d=n();for(var h=e.charCodeAt(r);h&&39!==h&&34!==h&&!(64<h&&91>h||96<h&&123>h)&&62!==h;)r++,h=e.charCodeAt(r);var p=r+1;if(r=e.indexOf(e[r],p),p=e.slice(p,r),39===h||34===h){if(-1===r){for(c={tagName:l,attributes:f,children:u,parent:null},l=0;l<u.length;l++)"string"!=typeof u[l]&&(u[l].parent=c);u=c;break e}}else p=null,r--;d.startsWith("xmlns:")&&DT.set(p,d.split(":")[1]),"tt"===l&&"xml:space"===d&&"preserve"===p&&(c=!0),f[d]=p}r++}for(47!==e.charCodeAt(r-1)?(r++,u=t(l,c)):r++,c={tagName:l,attributes:f,children:u,parent:null},l=u.length,f=0;f<l;f++)d=u[f],"string"!=typeof d?d.parent=c:f==l-1&&"\n"==d&&u.pop();u=c}if(a.push(u),"string"==typeof u)break;"?"===u.tagName[0]&&u.children&&(a.push.apply(a,s(u.children)),u.children=[])}else u=r,r=e.indexOf("<",r)-1,-2===r&&(r=e.length),u=e.slice(u,r+1),o?0<u.length&&a.push(u):a.length&&1==u.length&&"\n"==u[0]?a.push(u):0<u.trim().length&&a.push(u),r++;return a}function n(){for(var t=r;-1==="\r\n\t>/= ".indexOf(e[r])&&e[r];)r++;return e.slice(t,r)}var r=0;return t("")}function ci(e){return"string"==typeof e}function li(e){var t=[];if(!e.children)return[];e=a(e.children);for(var n=e.next();!n.done;n=e.next())"string"!=typeof(n=n.value)&&t.push(n);return t}function fi(e,t){var n=[];if(!e.children)return[];e=a(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function di(e){return"string"==typeof e?St(e):(e=e.children.reduce(function(e,t){return"string"==typeof t?e+t:e},""),""===e?null:St(e))}function hi(e){return Array.from(e.children).every(function(e){return"string"==typeof e})?((e=di(e))&&(e=e.trim()),e):null}function pi(e,t,n){if(n=void 0===n?[]:n,e.tagName===t&&n.push(e),e.children){e=a(e.children);for(var r=e.next();!r.done;r=e.next())pi(r.value,t,n)}return n}function gi(e,t){return e=fi(e,t),1!=e.length?null:e[0]}function yi(e,t,n){return e=bi(e,t,n),1!=e.length?null:e[0]}function vi(e,t,n,r){r=void 0===r?null:r;var i=null;return e=e.attributes[t],null!=e&&(i=n(e)),null==i?r:i}function mi(e,t,n){return t=si(t),e.attributes[t+":"+n]||null}function bi(e,t,n){t=si(t);var r=[];if(e.children){e=a(e.children);for(var i=e.next();!i.done;i=e.next())(i=i.value)&&i.tagName===t+":"+n&&r.push(i)}return r}function wi(e,t,n){t=a(t);for(var r=t.next();!r.done;r=t.next())if(r=mi(e,r.value,n))return r;return null}function Si(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function _i(e){if(!e)return null;var t=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);return t?(e=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(e)?e:null):(W("Invalid duration string:",e),null)}function Ti(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function ki(e){return e=Number(e),0==e%1?e:null}function Ei(e){return e=Number(e),0==e%1&&0<e?e:null}function Ai(e){return e=Number(e),0==e%1&&0<=e?e:null}function xi(e){return e=Number(e),isNaN(e)?null:e}function Ci(e){return!!e&&"true"===e.toLowerCase()}function Pi(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Ii(e){var t=[];e=St(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=a(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=n.match(/^([\w]+)/);if(r){var i=n.match(/(@id='(.*?)')/),o=n.match(/\[(\d+)\]/);t.push({name:r[0],id:i?i[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,position:o?Number(o[1])-1:null,Kb:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Kb=n.slice(1))}return t}function ji(e,t){var n=Ii(t.attributes.sel||"");if(n.length){var r=n[n.length-1],i=t.attributes.pos||null;n=r.position,null===n?n="prepend"===i?0:e.length:"prepend"===i?--n:"after"===i&&++n,i=t.tagName,(r=r.Kb)?Mi(e[n],i,r,hi(t)||""):("remove"!==i&&"replace"!==i||e.splice(n,1),"add"!==i&&"replace"!==i||e.splice.apply(e,[n,0].concat(s(t.children))))}}function Mi(e,t,n,r){"remove"===t?delete e.attributes[n]:"add"!==t&&"replace"!==t||(e.attributes[n]=r)}function Oi(e,t,n){t=void 0===t||t,n=void 0===n||n;var r,i=document.createElement(e.tagName);for(r in e.attributes)i.setAttribute(r,e.attributes[r]);if(t&&e.parent&&"?xml"!=e.parent.tagName&&Oi(e.parent,!0,!1).appendChild(i),n)for(e=a(e.children),t=e.next();!t.done;t=e.next())t=t.value,n=void 0,n="string"==typeof t?new Text(t):Oi(t,!1,!0),i.appendChild(n);return i}function Ri(e){var t=this;this.C=e,this.I=new Set,this.m=this.A=this.W=null,this.la=this.da=!1,this.J=0,this.g=null,this.B=new $,this.i=new Map,this.o=new Map,this.l=new vr,this.h=null,this.s=function(n){2==n.severity&&t.l.reject(n),e.onError(n)},this.aa=new Map,this.fa=new Map,this.L=new qe(function(){return ro(t)}),this.T=!1,this.N=[],this.$=!1,this.K=new qe(function(){lo(t)}),this.l.catch(function(){}),this.j=new Fr(function(){return Di(t)}),this.ba=!1,this.F=this.G=null}function Di(e){var t;return A(function(n){switch(n.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,d(n,ao(e),2);case 2:if(!e.m){n.u(3);break}return p(n,4),d(n,e.m.setMediaKeys(null),6);case 6:y(n,5);break;case 4:t=v(n),q("DrmEngine.destroyNow_ exception",t);case 5:e.m=null;case 3:e.g=null,e.I.clear(),e.A=null,e.o=new Map,e.h=null,e.s=function(){},e.C=null,e.ba=!1,e.G=null,h(n)}})}function Li(e,t,n){return e.la=!0,e.o=new Map,e.T=n,Bi(e,t)}function Ni(e,t,n){e.o=new Map,n=a(n);for(var r=n.next();!r.done;r=n.next())e.o.set(r.value,{initData:null,initDataType:null});for(n=a(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.o.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.T=0<e.o.size,Bi(e,t)}function Ui(e,t,n,r,i,o){var a=new Map;return i={audioCapabilities:i,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},i.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],a.set(t,i),zi(e,a,[])}function Bi(e,t){var n,r,i,o,s,u,c,l,f,h,p,g,y,v,m,b,w;return A(function(S){if(1==S.g){if(n=Ji(e))for(r=a(t),i=r.next();!i.done;i=r.next())o=i.value,o.video&&(o.video.drmInfos=[n]),o.audio&&(o.audio.drmInfos=[n]);for(s=t.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}),s||(u=Kr(e.h.servers),po(t,u)),c=new Set,l=a(t),i=l.next();!i.done;i=l.next())for(f=i.value,h=co(f),p=a(h),g=p.next();!g.done;g=p.next())y=g.value,c.add(y);for(v=a(c),g=v.next();!g.done;g=v.next())m=g.value,yo(m,Kr(e.h.servers),Kr(e.h.advanced||{}),e.h.keySystemsMapping);return d(S,xn(t,e.T,e.ba,e.h.preferredKeySystems),2)}return Hr(e.j),(b=s||Object.keys(e.h.servers).length)?(w=zi(e,void 0,t),S.return(s?w:w.catch(function(){}))):(e.da=!0,S.return(Promise.resolve()))})}function Fi(e){var t;return A(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return d(n,e.G,3);case 3:return Hr(e.j),n.return();case 2:return p(n,4),e.G=e.m.setMediaKeys(e.A),d(n,e.G,6);case 6:y(n,5);break;case 4:t=v(n),e.s(new He(2,6,6003,t.message));case 5:Hr(e.j),h(n)}})}function Hi(e,t){return A(function(n){if(1==n.g)return d(n,Fi(e),2);qi(e,t.initDataType,he(t.initData)),h(n)})}function Vi(e){var t,n,r,i,o,a;return A(function(s){switch(s.g){case 1:if(!e.A||!e.g)return s.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){s.u(2);break}return t=Or([e.g.serverCertificateUri],e.h.retryParameters),p(s,3),n=e.C.Db.request(5,t),d(s,n.promise,5);case 5:r=s.h,e.g.serverCertificate=he(r.data),y(s,4);break;case 3:throw i=v(s),new He(2,6,6017,i);case 4:if(e.j.g)return s.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(p(s,6),d(s,e.A.setServerCertificate(e.g.serverCertificate),8)):s.return();case 8:(o=s.h)||W("Server certificates are not supported by the key system.  The server certificate has been ignored."),y(s,0);break;case 6:throw a=v(s),new He(2,6,6004,a.message)}})}function Wi(e,t){var n,r,i;return A(function(o){return 1==o.g?d(o,Zi(e,t,{initData:null,initDataType:null}),2):3!=o.g?(n=o.h)?(r=[],(i=e.i.get(n))&&(i.gb=new vr,r.push(i.gb)),z("Attempting to remove session",t),r.push(n.remove()),d(o,Promise.all(r),3)):(z("Ignoring attempt to remove missing session",t),o.return()):(e.i.delete(n),void h(o))})}function Ki(e){var t,n,r,i,o;return A(function(s){if(1==s.g)return e.o.size?(e.o.forEach(function(t,n){Zi(e,n,t)}),d(s,e.l,3)):s.u(2);if(2!=s.g){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&ho(e))return s.return(e.l);e.l=new vr,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=a(n),i=r.next();!i.done;i=r.next())o=i.value,qi(e,o.initDataType,o.initData);return fo(e)&&e.l.resolve(),s.return(e.l)})}function qi(e,t,n){if(n.length){if(!Qe()){var r=!1;if(e.W){var i=HT.get(e.g.keySystem),o=new ri(n);if(0<=(i=o.g.indexOf(i))){r=o.data[i];var s=e.nd();s=a(e.W(r,s)),r=s.next().value,s=s.next().value}}if(r&&!s)return void q("Ignoring init data.");if(!r)for(r=e.i.values(),r=a(r),s=r.next();!s.done;s=r.next())if(le(n,s.value.initData))return void q("Ignoring duplicate init data.")}0<e.i.size&&fo(e)&&(e.l.resolve(),e.l=new vr,e.l.catch(function(){})),eo(e,t,n,e.g.sessionType)}}function Gi(e){return e=e.i.keys(),e=Vr(e,function(e){return e.sessionId}),Array.from(e)}function zi(e,t,n){var r,i,o,s,u,c,l,f,h,g,m,b,w,S,_;return A(function(T){switch(T.g){case 1:if(r=new Map,n.length){i=Xi(e,n,r),T.u(2);break}return d(T,Yi(e,t),3);case 3:i=T.h;case 2:if(!(o=i))throw new He(2,6,6001);for(Hr(e.j),p(T,4),e.I.clear(),s=o.getConfiguration(),z("Got MediaKeySystemAccess with configuration",s),u=s.audioCapabilities||[],c=s.videoCapabilities||[],l=a(u),f=l.next();!f.done;f=l.next())h=f.value,e.I.add(h.contentType.toLowerCase());for(g=a(c),f=g.next();!f.done;f=g.next())m=f.value,e.I.add(m.contentType.toLowerCase());if(n.length){var k=o.keySystem,E=r.get(o.keySystem),A=[],x=[],C=[],P=[],I=[],j=new Set;go(E,A,x,P,C,I,j),1<A.length&&W("Multiple unique encryption schemes found! Only the first will be used."),1<P.length&&W("Multiple unique server certificates found! Only the first will be used."),1<x.length&&W("Multiple unique license server URIs found! Only the first will be used."),1<C.length&&W("Multiple unique server certificate URIs found! Only the first will be used.");var M=e.T?"persistent-license":"temporary";for(k={keySystem:k,encryptionScheme:A[0],licenseServerUri:x[0],distinctiveIdentifierRequired:E[0].distinctiveIdentifierRequired,persistentStateRequired:E[0].persistentStateRequired,sessionType:E[0].sessionType||M,audioRobustness:E[0].audioRobustness||"",videoRobustness:E[0].videoRobustness||"",serverCertificate:P[0],serverCertificateUri:C[0],initData:I,keyIds:j},E=a(E),A=E.next();!A.done;A=E.next())A=A.value,A.distinctiveIdentifierRequired&&(k.distinctiveIdentifierRequired=A.distinctiveIdentifierRequired),A.persistentStateRequired&&(k.persistentStateRequired=A.persistentStateRequired);E=k}else E=o.keySystem,k=t.get(o.keySystem),A=[],x=[],C=[],P=[],I=[],j=new Set,go(k.drmInfos,A,x,P,C,I,j),1<A.length&&W("Multiple unique encryption schemes found! Only the first will be used."),1<P.length&&W("Multiple unique server certificates found! Only the first will be used."),1<C.length&&W("Multiple unique server certificate URIs found! Only the first will be used."),1<x.length&&W("Multiple unique license server URIs found! Only the first will be used."),E={keySystem:E,encryptionScheme:A[0],licenseServerUri:x[0],distinctiveIdentifierRequired:"required"==k.distinctiveIdentifier,persistentStateRequired:"required"==k.persistentState,sessionType:k.sessionTypes[0]||"temporary",audioRobustness:(k.audioCapabilities?k.audioCapabilities[0].robustness:"")||"",videoRobustness:(k.videoCapabilities?k.videoCapabilities[0].robustness:"")||"",serverCertificate:P[0],serverCertificateUri:C[0],initData:I,keyIds:j};if(e.g=E,!e.g.licenseServerUri)throw new He(2,6,6012,e.g.keySystem);return d(T,o.createMediaKeys(),6);case 6:if(b=T.h,Hr(e.j),K("Created MediaKeys object for key system",e.g.keySystem),e.A=b,!(""!=e.h.minHdcpVersion&&"getStatusForPolicy"in e.A)){T.u(7);break}return p(T,8),d(T,e.A.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if("usable"!=(w=T.h))throw new He(2,6,6018);Hr(e.j),y(T,7,4);break;case 8:if((S=v(T,4))instanceof He)throw S;throw new He(2,6,6019,S.message);case 7:return e.da=!0,d(T,Vi(e),11);case 11:Hr(e.j),y(T,0);break;case 4:if(_=v(T),Hr(e.j,_),e.g=null,e.I.clear(),_ instanceof He)throw _;throw new He(2,6,6002,_.message)}})}function Xi(e,t,n){for(var r=a(t),i=r.next();!i.done;i=r.next()){var o=a(co(i.value));for(i=o.next();!i.done;i=o.next())i=i.value,n.has(i.keySystem)||n.set(i.keySystem,[]),n.get(i.keySystem).push(i)}if(1==n.size&&n.has(""))throw new He(2,6,6e3);for(r={},e=a(e.h.preferredKeySystems),i=e.next();!i.done;r={Ee:r.Ee},i=e.next())for(r.Ee=i.value,o=a(t),i=o.next();!i.done;i=o.next())if(i=i.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.Ee}}(r)))return i.keySystemAccess;for(e=a([!0,!1]),i=e.next();!i.done;i=e.next())for(r=i.value,o=a(t),i=o.next();!i.done;i=o.next()){var s=a(i.value.decodingInfos);for(i=s.next();!i.done;i=s.next()){var u=i.value;if(u.supported&&u.keySystemAccess){i=n.get(u.keySystemAccess.keySystem);var c=a(i);for(i=c.next();!i.done;i=c.next())if(!!i.value.licenseServerUri==r)return u.keySystemAccess}}}return null}function Yi(e,t){var n,r,i,o,s,u,c,l,f,h,g,y,m,b,w,S,_;return A(function(T){switch(T.g){case 1:if(1==t.size&&t.has(""))throw new He(2,6,6e3);for(r=a(t.values()),i=r.next();!i.done;i=r.next())o=i.value,0==o.audioCapabilities.length&&delete o.audioCapabilities,0==o.videoCapabilities.length&&delete o.videoCapabilities;s=a(e.h.preferredKeySystems),u=s.next();case 2:if(u.done){T.u(4);break}if(c=u.value,!t.has(c)){T.u(3);break}return l=t.get(c),p(T,6),d(T,navigator.requestMediaKeySystemAccess(c,[l]),8);case 8:return n=T.h,T.return(n);case 6:f=v(T),z("Requesting",c,"failed with config",l,f);case 7:Hr(e.j);case 3:u=s.next(),T.u(2);break;case 4:h=a([!0,!1]),g=h.next();case 9:if(g.done){T.u(11);break}y=g.value,m=a(t.keys()),u=m.next();case 12:if(u.done){g=h.next(),T.u(9);break}if(b=u.value,w=t.get(b),(S=w.drmInfos.some(function(e){return!!e.licenseServerUri}))!=y){T.u(13);break}return p(T,15),d(T,navigator.requestMediaKeySystemAccess(b,[w]),17);case 17:return n=T.h,T.return(n);case 15:_=v(T),z("Requesting",b,"failed with config",w,_);case 16:Hr(e.j);case 13:u=m.next(),T.u(12);break;case 11:return T.return(n)}})}function Ji(e){return e=Kr(e.h.clearKeys),0==e.size?null:jt(e)}function $i(e){fo(e)&&e.l.resolve()}function Qi(e,t){new qe(function(){t.loaded=!0,$i(e)}).X(NT)}function Zi(e,t,n){var r,i,o,a,s,u,c;return A(function(l){switch(l.g){case 1:try{G("Attempting to load an offline session",t),r=e.A.createSession("persistent-license")}catch(t){return i=new He(2,6,6005,t.message),e.s(i),l.return(Promise.reject(i))}return e.B.D(r,"message",function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.$?e.N.push(t):to(e,t)}),e.B.D(r,"keystatuseschange",function(t){return no(e,t)}),o={initData:n.initData,initDataType:n.initDataType,loaded:!1,Bf:1/0,gb:null,type:"persistent-license"},e.i.set(r,o),p(l,2),d(l,r.load(t),4);case 4:return a=l.h,Hr(e.j),z("Loaded offline session",t,a),a||(e.i.delete(r),s=e.h.persistentSessionOnlinePlayback?1:2,e.s(new He(s,6,6013)),o.loaded=!0),Qi(e,o),$i(e),l.return(r);case 2:u=v(l),Hr(e.j,u),e.i.delete(r),c=e.h.persistentSessionOnlinePlayback?1:2,e.s(new He(c,6,6005,u.message)),o.loaded=!0,$i(e);case 3:return l.return(Promise.resolve())}})}function eo(e,t,n,r){try{K("Creating new",r,"session");var i=e.A.createSession(r)}catch(t){return void e.s(new He(2,6,6005,t.message))}e.B.D(i,"message",function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.$?e.N.push(t):to(e,t)}),e.B.D(i,"keystatuseschange",function(t){return no(e,t)}),e.i.set(i,{initData:n,initDataType:t,loaded:!1,Bf:1/0,gb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(n){return t=n,n instanceof He||(t=new He(2,6,6016,n)),void e.s(t)}e.h.logLicenseExchange&&(r=kt(n),K("EME init data: type=",t,"data=",r)),i.generateRequest(t,n).catch(function(t){if(!e.j.g){e.i.delete(i);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;0>r&&(r+=Math.pow(2,32)),r="0x"+r.toString(16)}e.s(new He(2,6,6006,t.message,t,r))}})}function to(e,t){var n,r,i,o,s,u,c,l,f,g,m,b,w,S,_,T;A(function(k){switch(k.g){case 1:if(n=t.target,G("Sending license request for session",n.sessionId,"of type",t.messageType),e.h.logLicenseExchange&&(r=kt(t.message),K("EME license request",r)),i=e.i.get(n),o=e.g.licenseServerUri,s=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&s&&s.individualizationServer&&(o=s.individualizationServer),u=Or([o],e.h.retryParameters),u.body=t.message,u.method="POST",u.licenseRequestType=t.messageType,u.sessionId=n.sessionId,u.drmInfo=e.g,i&&(u.initData=i.initData,u.initDataType=i.initDataType),s&&s.headers)for(c in s.headers)u.headers[c]=s.headers[c];if(We(e.g.keySystem)){var E=yt(u.body,!0,!0);if(E.includes("PlayReadyKeyMessage")){q("Unwrapping PlayReady request."),E=ai(E,"PlayReadyKeyMessage");var A=pi(E,"HttpHeader");A=a(A);for(var x=A.next();!x.done;x=A.next()){var C=x.value;x=pi(C,"name")[0],C=pi(C,"value")[0],u.headers[di(x)]=di(C)}E=pi(E,"Challenge")[0],u.body=Et(di(E))}else q("PlayReady request is already unwrapped."),u.headers["Content-Type"]="text/xml; charset=utf-8"}return l=Date.now(),p(k,2),g=e.C.Db.request(2,u),d(k,g.promise,4);case 4:f=k.h,y(k,3);break;case 2:return m=v(k),e.j.g?k.return():(b=new He(2,6,6007,m),1==e.i.size?(e.s(b),i&&i.gb&&i.gb.reject(b)):(i&&i.gb&&i.gb.reject(b),e.i.delete(n),fo(e)&&(e.l.resolve(),e.L.X(.1))),k.return());case 3:return e.j.g?k.return():(e.J+=(Date.now()-l)/1e3,e.h.logLicenseExchange&&(w=kt(f.data),K("EME license response",w)),p(k,5),G("Updating session",n.sessionId),d(k,n.update(f.data),7));case 7:y(k,6);break;case 5:return S=v(k),_=new He(2,6,6008,S.message),e.s(_),i&&i.gb&&i.gb.reject(_),k.return();case 6:if(e.j.g)return k.return();T=new Er("drmsessionupdate"),e.C.onEvent(T),i&&(i.gb&&i.gb.resolve(),Qi(e,i)),h(k)}})}function no(e,t){t=t.target,z("Key status changed for session",t.sessionId);var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(t,i){if("string"==typeof i){var o=i;i=t,t=o}if(We(e.g.keySystem)&&16==i.byteLength&&(Xe()||ot())){o=ge(i);var a=o.getUint32(0,!0),s=o.getUint16(4,!0),u=o.getUint16(6,!0);o.setUint32(0,a,!1),o.setUint16(4,s,!1),o.setUint16(6,u,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(r=!0),i=xt(i).slice(0,32),e.aa.set(i,t)});var i=t.expiration-Date.now();(0>i||r&&1e3>i)&&n&&!n.gb&&(q("Session has expired",t.sessionId),e.i.delete(t),t.close().catch(function(){})),fo(e)&&(e.l.resolve(),e.L.X(UT))}function ro(e){var t=e.aa,n=e.fa;n.clear(),t.forEach(function(e,t){return n.set(t,e)}),t=Array.from(n.values()),t.length&&t.every(function(e){return"expired"==e})&&e.s(new He(2,6,6014)),e.C.qe(qr(n))}function io(){var e,t,n,r,i,o,s,u,c,l,f,g,m,b,w,S,_,T,k,E,x,C,P,I,j,M;return A(function(O){if(1==O.g){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],n=["150","2000","3000"],r={"com.widevine.alpha":t,"com.microsoft.playready.recommendation":n},i=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],o=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],s={videoCapabilities:i,audioCapabilities:o,initDataTypes:["cenc","sinf","skd","keyids"]},u=[null,"cenc","cbcs","cbcs-1-9"],c=new Map,l=function(e,t){var n,r,i,o,a,s,u,l;return A(function(f){switch(f.g){case 1:return p(f,2),d(f,t.createMediaKeys(),4);case 4:y(f,3);break;case 2:return v(f),f.return();case 3:r=!!(n=t.getConfiguration().sessionTypes)&&n.includes("persistent-license"),$e()&&(r=!1),i=t.getConfiguration().videoCapabilities,o=t.getConfiguration().audioCapabilities,a={persistentState:r,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},c.has(e)&&c.get(e)?a=c.get(e):c.set(e,a),(s=i[0].encryptionScheme)&&!a.encryptionSchemes.includes(s)&&a.encryptionSchemes.push(s),(u=i[0].robustness)&&!a.videoRobustnessLevels.includes(u)&&a.videoRobustnessLevels.push(u),(l=o[0].robustness)&&!a.audioRobustnessLevels.includes(l)&&a.audioRobustnessLevels.push(l),h(f)}})},f=function(e,t,n,r){var i,o,u,c,f,g,m,b,w;return A(function(S){switch(S.g){case 1:for(p(S,2),i=hn(s),o=a(i.videoCapabilities),u=o.next();!u.done;u=o.next())c=u.value,c.encryptionScheme=t,c.robustness=n;for(f=a(i.audioCapabilities),u=f.next();!u.done;u=f.next())g=u.value,g.encryptionScheme=t,g.robustness=r;return m=hn(i),m.persistentState="required",m.sessionTypes=["persistent-license"],b=[m,i],d(S,navigator.requestMediaKeySystemAccess(e,b),4);case 4:return w=S.h,d(S,l(e,w),5);case 5:y(S,0);break;case 2:v(S),h(S)}})},g=function(e,t,n,r){var a,s,u;return A(function(c){switch(c.g){case 1:return p(c,2),a={type:"media-source",video:{contentType:i[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:o[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:e,video:{encryptionScheme:t,robustness:n},audio:{encryptionScheme:t,robustness:r}}},d(c,navigator.mediaCapabilities.decodingInfo(a),4);case 4:return s=c.h,u=s.keySystemAccess,d(c,l(e,u),5);case 5:y(c,0);break;case 2:v(c),h(c)}})},m=a(e),b=m.next();!b.done;b=m.next())w=b.value,c.set(w,null);for(S=[],_=a(u),T=_.next();!T.done;T=_.next())for(k=T.value,E=a(e),b=E.next();!b.done;b=E.next())"org.w3.clearkey"===(x=b.value)&&ut()||(S.push(f(x,k,"","")),S.push(g(x,k,"","")));for(C=a(e),b=C.next();!b.done;b=C.next())for(P=b.value,I=a(r[P]||[]),j=I.next();!j.done;j=I.next())M=j.value,S.push(f(P,null,M,"")),S.push(f(P,null,"",M)),S.push(g(P,null,M,"")),S.push(g(P,null,"",M));return d(O,Promise.all(S),2)}return O.return(qr(c))})}function oo(e){var t;return A(function(n){return 1==n.g?(t=new Promise(function(e,t){new qe(t).X(LT)}),p(n,2),d(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?y(n,0):(v(n),W("Timeout waiting for session close"),void h(n))})}function ao(e){var t;return A(function(n){return t=Array.from(e.i.entries()),e.i.clear(),d(n,Promise.all(t.map(function(t){t=a(t);var n,r=t.next().value,i=t.next().value;return A(function(t){return 1==t.g?(p(t,2),e.la||e.o.has(r.sessionId)||"persistent-license"!==i.type||e.h.persistentSessionOnlinePlayback?(G("Closing session",r.sessionId,i),d(t,oo(r),5)):(G("Removing session",r.sessionId),d(t,r.remove(),5))):2!=t.g?y(t,0):(n=v(t),V("Failed to close or remove the session",n),void h(t))})})),0)})}function so(e,t){return!e.length||!t.length||e===t||0<uo(e,t).length}function uo(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=a(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var i=a(t),o=i.next();!o.done;o=i.next())if(o=o.value,r.keySystem==o.keySystem){i=new Map;for(var u=a((r.initData||[]).concat(o.initData||[])),c=u.next();!c.done;c=u.next())c=c.value,i.set(c.keyId,c);i=Array.from(i.values()),u=r.keyIds&&o.keyIds?new Set([].concat(s(r.keyIds),s(o.keyIds))):r.keyIds||o.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||o.persistentStateRequired,videoRobustness:r.videoRobustness||o.videoRobustness,audioRobustness:r.audioRobustness||o.audioRobustness,serverCertificate:r.serverCertificate||o.serverCertificate,serverCertificateUri:r.serverCertificateUri||o.serverCertificateUri,initData:i,keyIds:u});break}}return n}function co(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function lo(e){e.i.forEach(function(t,n){var r=t.Bf,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.C.onExpirationUpdated(n.sessionId,i),t.Bf=i)})}function fo(e){return e=e.i.values(),Wr(e,function(e){return e.loaded})}function ho(e){for(var t=a(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.aa.get(n.value))return!1;return!0}function po(e,t){var n=[];for(t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=a(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function go(t,n,r,i,o,u,c){var l=[],f={};t=a(t);for(var d=t.next();!d.done;f={oa:f.oa},d=t.next()){if(f.oa=d.value,n.includes(f.oa.encryptionScheme)||n.push(f.oa.encryptionScheme),"org.w3.clearkey"==f.oa.keySystem&&f.oa.licenseServerUri.startsWith("data:application/json;base64,")?l.includes(f.oa.licenseServerUri)||l.push(f.oa.licenseServerUri):r.includes(f.oa.licenseServerUri)||r.push(f.oa.licenseServerUri),o.includes(f.oa.serverCertificateUri)||o.push(f.oa.serverCertificateUri),f.oa.serverCertificate&&(i.some(function(e){return function(t){return le(t,e.oa.serverCertificate)}}(f))||i.push(f.oa.serverCertificate)),f.oa.initData){d={};for(var h=a(f.oa.initData),p=h.next();!p.done;d={Kd:d.Kd},p=h.next())d.Kd=p.value,u.some(function(e){return function(t){var n=e.Kd;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&le(t.initData,n.initData)}}(d))||u.push(d.Kd)}if(f.oa.keyIds)for(d=a(f.oa.keyIds),h=d.next();!h.done;h=d.next())c.add(h.value)}if(1==l.length)r.push(l[0]);else if(0<l.length){for(n=[],l=a(l),i=l.next();!i.done;i=l.next())i=e.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),n.push.apply(n,s(i.keys));l=JSON.stringify({keys:n}),r.push("data:application/json;base64,"+e.btoa(l))}}function yo(t,n,r,i){var o=t.keySystem;!o||"org.w3.clearkey"==o&&t.licenseServerUri||(n.size&&(n=n.get(o)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(r=r.get(o))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate),r.sessionType&&(t.sessionType=r.sessionType),t.serverCertificateUri||(t.serverCertificateUri=r.serverCertificateUri)),i[o]&&(t.keySystem=i[o]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==o&&(t.keySystem="com.chromecast.playready"))}/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function vo(e,t,n){this.h=e,this.i=t,this.g=n}function mo(e,t){return A(function(n){if(1==n.g)return d(n,Sn(e.g,t,e.h.drm.preferredKeySystems),2);if(yn(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(Hn))throw new He(2,4,4032);return n.return(bo(e,t))})}function bo(e,t){var n=wn(t.variants,e.h.restrictions,e.i);if(t){var r=e.g?e.g.g:null;if(r&&e.g.A)for(var i=a(t.variants),o=i.next();!o.done;o=i.next())o=o.value,wo(e,r.keySystem,o.video),wo(e,r.keySystem,o.audio);So(e,t)}return n}function wo(e,t,n){if(n){n=a(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=a(r.initData||[]);for(var i=r.next();!i.done;i=r.next())i=i.value,qi(e.g,i.initDataType,i.initData)}}}function So(e,t){e=e.g?e.g.nd():{};var n=Object.keys(e);n=n.length&&"00"==n[0];var r=!1,i=!1,o=new Set,s=new Set;t=a(t.variants);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=[];u.audio&&c.push(u.audio),u.video&&c.push(u.video),c=a(c);for(var l=c.next();!l.done;l=c.next())if(l=l.value,l.keyIds.size){l=a(l.keyIds);for(var f=l.next();!f.done;f=l.next()){f=f.value;var d=e[n?"00":f];d?VT.includes(d)&&s.add(d):o.add(f)}}u.allowedByApplication?u.allowedByKeySystem&&(r=!0):i=!0}if(!r)throw e={hasAppRestrictions:i,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)},new He(2,4,4012,e)}function _o(){}function To(e,t){if(t){var n=WT[t.toLowerCase()];if(n)return n;W("Could not determine manifest type using MIME type ",t)}throw new He(2,4,4e3,e,t)}function ko(e,t){function n(){s=!0}function r(e){u.push(e),Yr(e)}var i,o=e=he(e),s=!1,u=[],c=[];if((new Xr).box("moov",r).box("trak",r).box("mdia",r).box("minf",r).box("stbl",r).P("stsd",function(e){i=e,u.push(e),Jr(e)}).P("encv",n).P("enca",n).P("dvav",function(e){c.push({box:e,Ra:1701733238})}).P("dva1",function(e){c.push({box:e,Ra:1701733238})}).P("dvh1",function(e){c.push({box:e,Ra:1701733238})}).P("dvhe",function(e){c.push({box:e,Ra:1701733238})}).P("hev1",function(e){c.push({box:e,Ra:1701733238})}).P("hvc1",function(e){c.push({box:e,Ra:1701733238})}).P("avc1",function(e){c.push({box:e,Ra:1701733238})}).P("avc3",function(e){c.push({box:e,Ra:1701733238})}).P("ac-3",function(e){c.push({box:e,Ra:1701733217})}).P("ec-3",function(e){c.push({box:e,Ra:1701733217})}).P("ac-4",function(e){c.push({box:e,Ra:1701733217})}).P("mp4a",function(e){c.push({box:e,Ra:1701733217})}).parse(e),s)return q("Init segment already indicates encryption."),e;if(0==c.length||!i)throw V("Failed to find boxes needed to fake encryption!"),z("Failed init segment (hex):",xt(e)),new He(2,3,3019,t);c.reverse(),t=a(c);for(var l=t.next();!l.done;l=t.next())l=l.value,q('Inserting "'+ti(l.Ra)+'" box into init segment.'),o=Eo(o,i,l.box,u,l.Ra);return Xe()&&ct()?(t=new Uint8Array(e.byteLength+o.byteLength),t.set(o),t.set(e,o.byteLength),t):o}function Eo(e,t,n,r,i){var o=KT.value(),s=e.subarray(n.start,n.start+n.size),u=ge(s),c=new Uint8Array(n.size+o.byteLength);for(c.set(s,0),s=ge(c),s.setUint32(4,i),c.set(o,n.size),i=u.getUint32(4),s.setUint32(n.size+16,i),Ao(c,0,c.byteLength),i=new Uint8Array(e.byteLength+c.byteLength),n=Ye()||Xe()?n.start:n.start+n.size,o=e.subarray(n),i.set(e.subarray(0,n)),i.set(c,n),i.set(o,n+c.byteLength),e=a(r),r=e.next();!r.done;r=e.next())r=r.value,Ao(i,r.start,r.size+c.byteLength);return c=ge(i,t.start),t=ni(t),e=c.getUint32(t),c.setUint32(t,e+1),i}function Ao(e,t,n){e=ge(e,t),0!=(t=e.getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}function xo(e,t,n,r,i,o,a){this.M=e,this.Ca=t,this.ma=n,this.yf=void 0===r?null:r,this.timescale=void 0===i?null:i,this.g=void 0===o?null:o,this.aesKey=void 0===a?null:a,this.mimeType=this.codecs=null}function Co(e,t){return e===t||(e&&t?e.ac()==t.ac()&&e.Yb()==t.Yb()&&_e(e.M().sort(),t.M().sort())&&le(e.pd(),t.pd()):e==t)}function Po(e,t,n,r,i,o,s,u,c,l,f,d,h,p,g,y){for(l=void 0===l?[]:l,p=void 0===p?qT:p,this.startTime=e,this.i=this.endTime=t,this.C=n,this.Ca=r,this.ma=i,this.ea=o,this.timestampOffset=s,this.appendWindowStart=u,this.appendWindowEnd=c,this.g=l,this.tilesLayout=void 0===f?"":f,this.A=void 0===d?null:d,this.h=void 0===h?null:h,this.status=p,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=void 0===g?null:g,this.s=null,this.j=0,this.o=void 0!==y&&y,this.fe=this.Bd=!1,e=a(this.g),t=e.next();!t.done;t=e.next())t.value.Gg();this.o&&this.g.length&&this.g[this.g.length-1].Fg(),this.B=this.mimeType=this.codecs=null}function Io(e,t){e.ea=t,e=a(e.g);for(var n=e.next();!n.done;n=e.next())Io(n.value,t)}function jo(e){return 1==e.length&&1e-4>e.end(0)-e.start(0)}function Mo(e){return!e||jo(e)?null:e.length?e.end(e.length-1):null}function Oo(e,t){return!(!e||!e.length||jo(e)||t>e.end(e.length-1))&&t>=e.start(0)}function Ro(e,t){if(!e||!e.length||jo(e))return 0;var n=0;e=a(Lo(e));for(var r=e.next();!r.done;r=e.next()){var i=r.value;r=i.start,i=i.end,i>t&&(n+=i-Math.max(r,t))}return n}function Do(e,t,n){return e&&e.length&&!jo(e)?(e=Lo(e).findIndex(function(e,r,i){return e.start>t&&(0==r||i[r-1].end-t<=n)}),0<=e?e:null):null}function Lo(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function No(){}function Uo(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Bo(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Fo(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]}function Ho(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===e.type){if(2>e.size)return null;if(3!==e.data[0])return W("Ignore frame with unrecognized character encoding"),null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var r=gt(he(e.data,1,n)),i=e.data[2+n],o=e.data.subarray(3+n).indexOf(0);if(-1===o)return null;var a,s=gt(he(e.data,3+n,o));return a="--\x3e"===r?gt(he(e.data,4+n+o)):de(e.data.subarray(4+n+o)),t.mimeType=r,t.pictureType=i,t.description=s,t.data=a,t}return"TXXX"===e.type?2>e.size?null:3!==e.data[0]?(W("Ignore frame with unrecognized character encoding"),null):-1===(r=e.data.subarray(1).indexOf(0))?null:(n=gt(he(e.data,1,r)),e=gt(he(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):"WXXX"===e.type?2>e.size?null:3!==e.data[0]?(W("Ignore frame with unrecognized character encoding"),null):-1===(r=e.data.subarray(1).indexOf(0))?null:(n=gt(he(e.data,1,r)),e=gt(he(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):"PRIV"===e.type?2>e.size?null:-1===(n=e.data.indexOf(0))?null:(n=gt(he(e.data,0,n)),t.description=n,"com.apple.streaming.transportStreamTimestamp"==n?(n=e.data.subarray(n.length+1),e=1&n[3],n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=47721858.84),t.data=n):(e=de(e.data.subarray(n.length+1)),t.data=e),t):"T"===e.type[0]?2>e.size?null:3!==e.data[0]?(W("Ignore frame with unrecognized character encoding"),null):(e=gt(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=gt(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(W("Unrecognized ID3 frame type:",e.type),t.data=de(e.data),t):null}function Vo(e){for(var t=0,n=[];Uo(e,t);){var r=Fo(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var i=e.subarray(t),o=Fo(i,4);i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:o,data:i.subarray(10,10+o)},(o=Ho(i))&&n.push(o),t+=i.size+10}Bo(e,t)&&(t+=10)}return n}function Wo(e,t){for(var n=t=void 0===t?0:t,r=0;Uo(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Fo(e,t+6),Bo(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}function Ko(e,t){var n=null,r=null,i=null,o=e.O();return 1&t&&(i=e.Jc()),2&t&&e.skip(4),8&t&&(n=e.O()),16&t&&(r=e.O()),{trackId:o,gd:n,Wd:r,Zj:i}}function qo(e,t){return 1==t?(t=e.O(),e=e.O(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.O()}}function Go(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.O(),e.skip(4),e=e.ka(),{timescale:t,language:String.fromCharCode(96+(e>>10))+String.fromCharCode(96+((960&e)>>5))+String.fromCharCode(96+(31&e))}}function zo(e,t,n){var r=e.O(),i=[],o=null;1&n&&(o=e.O()),4&n&&e.skip(4);for(var a=0;a<r;a++){var s={Mf:null,sampleSize:null,we:null};256&n&&(s.Mf=e.O()),512&n&&(s.sampleSize=e.O()),1024&n&&e.skip(4),2048&n&&(s.we=0==t?e.O():e.Lg()),i.push(s)}return{ck:r,Og:i,yh:o}}function Xo(e,t){1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.O();return 1==t?e.skip(8):e.skip(4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),t=e.ka()+e.ka()/16,e=e.ka()+e.ka()/16,{trackId:n,width:t,height:e}}function Yo(e){e.skip(6),e.skip(2),e.skip(8);var t=e.ka();return e.skip(2),e.skip(2),e.skip(2),e=e.ka()+e.ka()/65536,{channelCount:t,sampleRate:e}}function Jo(e){return e=e.O(),{Ha:ti(e)}}function $o(e){var t=null,n=null,r=e.nb(4),i=String.fromCharCode(r[0]);if(i+=String.fromCharCode(r[1]),i+=String.fromCharCode(r[2]),"nclx"===(i+=String.fromCharCode(r[3]))){switch(e.ka()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.ka(),e.ka(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,Hd:n}}function Qo(e,t){return t=void 0!==t&&t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Zo(e){return(10>e?"0":"")+e}function ea(e,t){if(this.j=e,void 0===t?0:t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&3==e[r]&&0==e[r-1]&&0==e[r-2]||(t[n]=e[r],n++);this.j=he(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function ta(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);0!==r&&(n.set(e.j.subarray(t,t+r)),e.h=new Gr(n,0).O(),e.g=8*r,e.i-=r)}function na(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,ta(e)}e.h<<=t,e.g-=t}function ra(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&ta(e),n=t-n,0<n?r<<n|ra(e,n):r}function ia(e){var t;for(t=0;t<e.g;++t)if(0!=(e.h&2147483648>>>t))return e.h<<=t,e.g-=t,t;return ta(e),t+ia(e)}function oa(e){na(e,1+ia(e))}function aa(e){return ra(e,ia(e)+1)-1}function sa(e){return e=aa(e),1&e?1+e>>>1:-1*(e>>>1)}function ua(e){return 1===ra(e,1)}function ca(e){return ra(e,8)}function la(e,t){for(var n=8,r=8,i=0;i<t;i++)0!==r&&(r=sa(e),r=(n+r+256)%256),n=0===r?n:r}function fa(e){return ca(e),aa(e),aa(e)}function da(){this.G=null,this.I=!1,this.m=this.J=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}function ha(e,t){if(1!=(t[0]<<16|t[1]<<8|t[2]))return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(192&r){var i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2;null==e.s&&(e.s=i),n.pts=ya(i,e.s),e.s=n.pts,n.dts=n.pts,64&r&&(r=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,null==e.o&&(e.o=r),n.dts=ya(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}function pa(e){var t={height:null,width:null,Ha:null};if(e=e.ae(),!e.length)return t;if(!(e=e.find(function(e){return 7==e.type})))return t;e=new ea(e.data);var n=ca(e),r=ca(e),i=ca(e);if(oa(e),zT.includes(n)){var o=aa(e);if(3===o&&na(e,1),oa(e),oa(e),na(e,1),ua(e)){o=3!==o?8:12;for(var a=0;a<o;a++)ua(e)&&(6>a?la(e,16):la(e,64))}}if(oa(e),0===(o=aa(e)))aa(e);else if(1===o)for(na(e,1),oa(e),oa(e),o=aa(e),a=0;a<o;a++)oa(e);oa(e),na(e,1),o=aa(e),a=aa(e);var s=ra(e,1);0===s&&na(e,1),na(e,1);var u=0,c=0,l=0,f=0;return ua(e)&&(u=aa(e),c=aa(e),l=aa(e),f=aa(e)),t.height=String((2-s)*(a+1)*16-2*l-2*f),t.width=String(16*(o+1)-2*u-2*c),t.Ha="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2),t}function ga(e){var t={height:null,width:null,Ha:null};if(e=e.ae(),!e.length)return t;if(!(e=e.find(function(e){return 33==e.type})))return t;var n=new ea(e.fullData,!0);ca(n),ca(n),ra(n,4);var r=ra(n,3);ua(n);var i=ra(n,2),o=ra(n,1),a=ra(n,5),s=ra(n,32);e=ca(n);for(var u=ca(n),c=ca(n),l=ca(n),f=ca(n),d=ca(n),h=ca(n),p=[],g=[],y=0;y<r;y++)p.push(ua(n)),g.push(ua(n));if(0<r)for(y=r;8>y;y++)ra(n,2);for(y=0;y<r;y++)p[y]&&ra(n,88),g[y]&&ca(n);aa(n),r=aa(n),3==r&&ra(n,1),p=aa(n),g=aa(n);var v=y=0,m=0,b=0;return ua(n)&&(y+=aa(n),v+=aa(n),m+=aa(n),b+=aa(n)),t.width=String(p-(y+v)*(1===r||2===r?2:1)),t.height=String(g-(m+b)*(1===r?2:1)),n=function(e){for(var t=0,n=0;32>n;n++)t|=(e>>n&1)<<31-n;return t>>>0}(s),o=1==o?"H":"L",i="hvc1."+["","A","B","C"][i]+a,i+="."+n.toString(16).toUpperCase(),i+="."+o+h,d&&(i+="."+d.toString(16).toUpperCase()),f&&(i+="."+f.toString(16).toUpperCase()),l&&(i+="."+l.toString(16).toUpperCase()),c&&(i+="."+c.toString(16).toUpperCase()),u&&(i+="."+u.toString(16).toUpperCase()),e&&(i+="."+e.toString(16).toUpperCase()),t.Ha=i,t}function ya(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function va(e){return!(0>(e=ma(e)))&&(0<e&&W("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),!0)}function ma(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}function ba(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if("undefined"==typeof libDPIModule&&F("Could not find LCEVC Library dependencies on this page"),"undefined"!=typeof LCEVCdec)this.h=LCEVCdec;else{if("undefined"==typeof LcevcDil){F("Could not find LCEVC Library on this page"),e=!1;break e}this.h=LcevcDil,this.j=!0,ie("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead")}void 0===this.h.SupportObject?(F("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||F(this.h.SupportObject.SupportError),e=void 0!==this.h&&"undefined"!=typeof libDPIModule&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function wa(e){e.g&&e.i.classList.add("shaka-hidden")}function Sa(e,t,n){var r=XT,i=ZT;switch(t.mimeType){case"video/webm":r=YT;break;case"video/mp4":r=JT}switch(n){case"DASH":i=QT;break;case"HLS":i=$T}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(i))}function _a(e,t,n,r){var i=this;this.i=e,this.W=n,this.F=null,this.C=t,this.h={},this.G={},this.ra={},this.g=null,this.ba=!1,this.T=r||null,this.j={},this.o=new $,this.m={},this.I=null,this.L=new vr,this.N="",this.da=!1,this.l=Ta(this,this.L),this.B=!1,this.J=new Fr(function(){return Ea(i)}),this.A=!1,this.aa="UNKNOWN",this.qa=this.wa=!1,this.la=new vr,this.s=!1,this.fa=!0,this.K=this.$=null}function Ta(t,n){if(e.ManagedMediaSource){t.i.disableRemotePlayback=!0;var r=new ManagedMediaSource;return t.o.D(r,"startstreaming",function(){t.fa=!0}),t.o.D(r,"endstreaming",function(){t.fa=!1}),t.o.ta(r,"sourceopen",function(){URL.revokeObjectURL(t.N),n.resolve()}),t.o.ta(t.i,"playing",function(){t.da=!0}),t.N=ek(r),t.i.src=t.N,r}return r=new MediaSource,t.o.ta(r,"sourceopen",function(){URL.revokeObjectURL(t.N),n.resolve()}),t.o.ta(t.i,"playing",function(){t.da=!0}),t.N=ek(r),t.i.src=t.N,r}function ka(e,t){var n,r,i,o,s,u,c,l,f,h,p;return A(function(g){if(1==g.g)return e.createSegmentIndex?d(g,e.createSegmentIndex(),2):g.u(2);if(!e.segmentIndex)return g.return(!1);if(0==e.segmentIndex.getNumReferences())return g.return(!0);for(n=pT,r=new Set,i=a(e.segmentIndex),o=i.next();!o.done;o=i.next())if(s=o.value,u=s.mimeType||e.mimeType||"",c=s.codecs||e.codecs||"",l=u+":"+c,!r.has(l))if(r.add(l),t==n.pa){if(f=Lt(u,c),!Xt(f))return g.return(!1)}else if(t==n.ga?c=In(c):t==n.V&&(c=Pn(c,u)),h=Bt(e,u,c),p=Nt(u,c),!te(h)&&!Pe(p))return g.return(!1);return g.return(!0)})}function Ea(e){var t,n,r,i,o,s,u,c;return A(function(l){if(1==l.g){t=[];for(n in e.j)for(r=e.j[n],i=r[0],e.j[n]=r.slice(0,1),i&&t.push(i.p.catch(tn)),o=a(r.slice(1)),s=o.next();!s.done;s=o.next())u=s.value,u.p.reject(new He(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.C&&t.push(e.C.destroy());for(c in e.m)t.push(e.m[c].destroy());return d(l,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.F=null,e.l=null,e.g=null,e.C=null,e.h={},e.m={},e.I=null,e.j={},e.T=null,e.K=null,e.W=null,h(l)})}function Aa(e,t,n,r){var i,o,a,s,u,c,l,f,p,g,y,v;return A(function(m){switch(m.g){case 1:return i=pT,o=O,a=R,d(m,ka(n,t),2);case 2:if(a.call(o,m.h,"Type negotiation should happen before MediaSourceEngine.init!"),s=Lt(n.mimeType,r),t==i.pa){xa(e,s,e.A,n.external),m.u(0);break}if(u=e.F.forceTransmux,(!te(s)||!e.A&&mT.includes(s))&&(u=!0),c=Nt(n.mimeType,r),!u){m.u(4);break}if(l=Ot(i.V,(r||"").split(",")),f=Ot(i.ga,(r||"").split(",")),!l||!f){m.u(5);break}return e.s=!0,d(m,Aa(e,i.V,n,l),6);case 6:return d(m,Aa(e,i.ga,n,f),7);case 7:return m.return();case 5:(p=Pe(c))&&(g=p(),e.m[t]=g,s=g.convertCodecs(t,c));case 4:y=es(e,s),Hr(e.J);try{v=e.l.addSourceBuffer(y)}catch(t){throw new He(2,3,3015,t,"The mediaSource_ status was "+e.l.readyState+" expected 'open'",null)}e.A&&(v.mode=tk),e.o.D(v,"error",function(){var n=e.j[t][0];n.p.reject(new He(2,3,3014,e.i.error?e.i.error.code:0,n.uri))}),e.o.D(v,"updateend",function(){return Wa(e,t)}),e.h[t]=v,e.G[t]=s,e.ra[t]=!!n.drmInfos.length,h(m)}})}function xa(e,t,n,r){e.g||(e.g=new zt(e.C),e.g&&(e.g.A=e.F.modifyCueCallback));var i=e.g;r=r||e.ba,e=e.aa,"application/cea-608"==t||"application/cea-708"==t?i.i=null:(i.i=(0,bT[t])(),i.i.setSequenceMode?i.i.setSequenceMode(n):ie("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),i.i.setManifestType?i.i.setManifestType(e):ie("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),i.B=r)}function Ca(e){return!e.B&&(!e.l||"ended"==e.l.readyState)}function Pa(e,t){return e.B||!Object.keys(e.h).length?e=null:t==hT?e=e.g.g:(e=Ma(e,t),e=!e||jo(e)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null),e}function Ia(e,t){return e.B?null:t==hT?e.g.h:Mo(Ma(e,t))}function ja(e,t,n){return e.B?0:t==hT?(e=e.g,null==e.h||e.h<n?0:e.h-Math.max(n,e.g)):(e=Ma(e,t),Ro(e,n))}function Ma(e,t){try{return e.h[t].buffered}catch(n){return t in e.h&&V("failed to get buffered range for "+t,n),null}}function Oa(e,t,n,r,i,o){var a=null,s=he(n);if(mT.includes(i))o=Vo(s),o.length&&r&&((t=o.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&t.data&&(a=Math.round(t.data)/1e3),e.W.re([{cueTime:r.startTime,data:s,frames:o,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(i.includes("/mp4")&&r&&0==r.timestampOffset&&r.ea&&r.ea.timescale){var u=r.ea.timescale;if(!isNaN(u)){var c=0,l=!1;(new Xr).box("moof",Yr).box("traf",Yr).P("tfdt",function(e){c=qo(e.reader,e.version).baseMediaDecodeTime/u,l=!0,e.parser.stop()}).parse(n,!0),l&&(a=c)}}else i.includes("/mp4")||i.includes("/webm")||!va(s)||(e.K?e.K.clearData():e.K=new da,s=e.K.parse(s),t=s.getStartTime(t),null!=t&&(a=t),s=s.getMetadata(),s.length&&e.W.re(s,o,r?r.endTime:null));return a}function Ra(e,t,n,r,i,o,a,s,u,c){a=void 0!==a&&a,s=void 0!==s&&s,u=void 0!==u&&u,c=void 0!==c&&c;var l,f,p,g,y,v,m,b,w,S,_;return A(function(T){switch(T.g){case 1:if(l=pT,t!=l.pa){T.u(2);break}if(!e.A){T.u(3);break}return d(T,e.la,4);case 4:f=T.h,e.g.s=f;case 3:return d(T,Yt(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.M()[0]:null),5);case 5:return T.return();case 2:if(c||!e.s){T.u(6);break}return d(T,Ra(e,l.V,n,r,i,o,a,s,u,!0),7);case 7:return d(T,Ra(e,l.ga,n,r,i,o,a,s,u,!0),8);case 8:return T.return();case 6:if(!e.h[t])return W("Attempted to restore a non-existent source buffer"),T.return();if(p=e.h[t].timestampOffset,g=e.G[t],e.m[t]&&(g=e.m[t].getOriginalMimeType()),r&&null!=(y=Oa(e,t,n,r,g,p))&&(v=r.startTime-y,m=Math.abs(p-v),(.001<=m||a||s)&&(!u||0<v||!p)&&(p=v,e.qa&&(Ka(e,t,function(){return Ha(e,t)},null),Ka(e,t,function(){return Va(e,t,p)},null))),b=t==l.ga||!(l.ga in e.h),e.A&&b&&e.la.resolve(p)),o&&t==l.ga&&(e.g||xa(e,"application/cea-608",e.A,!1),e.I||(w=g.split(";",1)[0],e.I=new me(w)),r?(S=e.I.i(n),S.length&&Zt(e.g,S,r.startTime,r.endTime,p)):e.I.init(n,s)),!e.m[t]){T.u(9);break}return d(T,e.m[t].transmux(n,i,r,e.l.duration,t),10);case 10:n=T.h;case 9:return n=Xa(e,n,r?r.startTime:null,t,r?r.M()[0]:null),r&&e.A&&t!=l.pa&&(a||s)&&(_=r.startTime,Ka(e,t,function(){return Ha(e,t)},null),Ka(e,t,function(){return Va(e,t,_)},null)),d(T,Ka(e,t,function(){var r=n;if("video"==t&&e.T){var i=e.T;i.g&&i.g.appendBuffer(r,"video",i.o,-p)}e.h[t].appendBuffer(r)},r?r.M()[0]:null),11);case 11:h(T)}})}function Da(e,t){var n=Ia(e,"video")||0;$t(e.g,t,n)}function La(e){e.g&&$t(e.g,"",0)}function Na(e,t){var n;return A(function(r){return 1==r.g?(n=pT,t==n.pa?e.g?d(r,e.g.remove(0,1/0),0):r.return():d(r,Ka(e,t,function(){return Fa(e,t,0,e.l.duration)},null),4)):e.s?d(r,Ka(e,n.V,function(){return Fa(e,n.V,0,e.l.duration)},null),0):r.u(0)})}function Ua(e,t,n,r,i,o,a,s,u){var c,l,f;return A(function(h){return 1==h.g?(c=pT,t==c.pa?(o||(e.g.s=n),Jt(e.g,r,i),h.return()):(l=[],d(h,Qa(e,t,a,s,u),2))):(f=h.h,f||(l.push(Ka(e,t,function(){return Ha(e,t)},null)),e.s&&l.push(Ka(e,c.V,function(){return Ha(e,c.V)},null))),o||(l.push(Ka(e,t,function(){return Va(e,t,n)},null)),e.s&&l.push(Ka(e,c.V,function(){return Va(e,c.V,n)},null))),l.push(Ka(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=i,e.h[t].appendWindowStart=r,Wa(e,t)},null)),e.s&&l.push(Ka(e,c.V,function(){var t=c.V;e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=i,e.h[t].appendWindowStart=r,Wa(e,t)},null)),d(h,Promise.all(l),0))})}function Ba(e,t,n){var r;return A(function(i){return 1==i.g?(r=pT,t==r.pa?i.return():(t==r.ga&&(e.la=new vr),Ka(e,t,function(){return Ha(e,t)},null),e.s&&Ka(e,r.V,function(){return Ha(e,r.V)},null),d(i,Ka(e,t,function(){return Va(e,t,n)},null),2))):e.s?d(i,Ka(e,r.V,function(){return Va(e,r.V,n)},null),0):i.u(0)})}function Fa(e,t,n,r){r<=n?Wa(e,t):e.h[t].remove(n,r)}function Ha(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,Wa(e,t)}function Va(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,Wa(e,t)}function Wa(e,t){if(!e.B){var n=e.j[t][0];n&&(n.p.resolve(),Ga(e,t))}}function Ka(e,t,n,r){return Hr(e.J),n={start:n,p:new vr,uri:r},e.j[t].push(n),1==e.j[t].length&&za(e,t),n.p}function qa(e,t){var n,r,i,o,a,s,u;return A(function(c){switch(c.g){case 1:Hr(e.J),n=[],r={};for(i in e.h)r.Sc=new vr,o={start:function(e){return function(){return e.Sc.resolve()}}(r),p:r.Sc,uri:null},e.j[i].push(o),n.push(r.Sc),1==e.j[i].length&&o.start(),r={Sc:r.Sc};return p(c,2),d(c,Promise.all(n),4);case 4:y(c,3);break;case 2:throw a=v(c);case 3:return p(c,5,6),d(c,t(),6);case 6:m(c);for(s in e.h)Ga(e,s);b(c,0);break;case 5:throw u=v(c),new He(2,3,3015,u,e.i.error||"No error in the media element",null)}})}function Ga(e,t){e.j[t].shift(),za(e,t)}function za(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new He(2,3,3017,t)):n.p.reject(new He(2,3,3015,r,e.i.error||"No error in the media element",n.uri)),Ga(e,t)}}function Xa(e,t,n,r,i){var o=null==n,a=e.ra[r];return n=e.W.Ih(),(o=e.F.insertFakeEncryptionInInit&&o&&a)&&(n=We(n),o=Je()||Ye()||st()||Xe()&&ct()&&n),o&&"mp4"==Ft(e.G[r])&&(q("Forcing fake encryption information in init segment."),t=ko(t,i)),t}function Ya(e,t,n,r){return Ka(e,t,function(){if(t===hT)q("Change not supported for "+t);else{if(q("Change Type: "+e.G[t]+" -> "+n),ne()){e.m[t]&&(e.m[t].destroy(),delete e.m[t]),r&&(e.m[t]=r);var i=es(e,n);e.h[t].changeType(i),e.G[t]=n}else q("Change Type not supported");Wa(e,t)}},null)}function Ja(e,t){var n,r,i,o,s,u,c,l,f,h,p,y,v,w,S,_,T,k,E,x,C,P,I,j;return A(function(A){switch(A.g){case 1:n=pT,e.B=!0,e.s=!1,r=e.i.currentTime,i=e.i.autoplay,o=e.i.paused,e.da&&(e.i.autoplay=!1),g(A,2),e.o.ob(),s=[];for(u in e.m)s.push(e.m[u].destroy());for(c in e.j)for(l=e.j[c],f=l[0],e.j[c]=l.slice(0,1),f&&s.push(f.p.catch(tn)),h=a(l.slice(1)),p=h.next();!p.done;p=h.next())y=p.value,y.p.reject(new He(2,7,7003,void 0));for(v in e.h){w=e.h[v];try{e.l.removeSourceBuffer(w)}catch(e){}}return d(A,Promise.all(s),4);case 4:return e.m={},e.h={},S=e.l.duration,e.L=new vr,e.l=Ta(e,e.L),d(A,e.L,5);case 5:!isNaN(S)&&S?e.l.duration=S:!isNaN(e.$)&&e.$&&(e.l.duration=e.$),_=new vr,T=e.l.sourceBuffers,k=t.size,E=0,x=function(){++E===k&&(_.resolve(),e.o.Hb(T,"addsourcebuffer",x))},e.o.D(T,"addsourcebuffer",x),C=a(t.keys()),P=C.next();case 6:return P.done?(e.i.currentTime=r,d(A,_,2)):(I=P.value,j=t.get(I),d(A,Aa(e,I,j,j.codecs),9));case 9:e.s?(e.j[n.V]=[],e.j[n.ga]=[]):e.j[I]=[],P=C.next(),A.u(6);break;case 2:m(A),e.B=!1,Hr(e.J),e.o.ta(e.i,"canplaythrough",function(){e.J.g||(e.i.autoplay=i,o||e.i.play())}),b(A,0)}})}function $a(e,t){return qa(e,function(){return Ja(e,t)})}function Qa(e,t,n,r,i){var o,a,s,u,c,l,f,h,p,g,y,v,m,b,w,S;return A(function(_){return 1==_.g?(o=pT,t==o.pa?_.return(!1):(a=Vt(Kt(e.G[t])),s=Wt(e.G[t]),c=!1,l=Lt(n,r),f=e.F.forceTransmux,(!te(l)||!e.A&&mT.includes(l))&&(f=!0),f&&(h=Nt(n,r),p=Pe(h))&&(u=p(),g=Ot(o.V,(r||"").split(",")),y=Ot(o.ga,(r||"").split(",")),g&&y?(c=!0,v=y,t==o.V&&(v=g),l=u.convertCodecs(t,Nt(n,v))):l=u.convertCodecs(t,h)),m=Kt(l),b=Vt(m),w=Wt(l),a===b&&s===w?_.return(!1):(S=!0,(e.s||c&&u&&!e.m[t])&&(S=!1),S&&"smooth"===e.F.codecSwitchingStrategy&&ne()?d(_,Ya(e,t,l,u),3):(u&&u.destroy(),d(_,$a(e,i),3))))):_.return(!0)})}function Za(e,t,n,r){if(t==hT)var i=!1;else{i=Vt(Kt(e.G[t]));var o=Wt(e.G[t]),a=Lt(n,r),s=e.F.forceTransmux;(!te(a)||!e.A&&mT.includes(a))&&(s=!0),n=Nt(n,r),s&&(s=Pe(n))&&(s=s(),a=s.convertCodecs(t,n),s.destroy()),t=Vt(Kt(a)),a=Wt(a),i=i!==t||o!==a}return!!i&&("smooth"!==e.F.codecSwitchingStrategy||!ne()||e.s)}function es(e,t){return e=t+e.F.addExtraFeaturesToSourceBuffer(t),q("Using full mime type",e),e}function ts(e,t,n){this.i=e,this.s=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.A=0,this.F=!0,this.G=0,this.C=void 0===n||n,this.I=0,this.m=!1,this.B=e}function ns(e,t,n){this.j=n,this.l=e,this.s=os(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}function rs(e,t){e.i=t}function is(e){this.g=e}function os(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime,e=a(Lo(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function as(e,t,n,r,i){var o=this;this.A=i,this.g=e,this.B=t,this.s=n,this.l=new $,this.j=!1,this.F=e.readyState,this.C=this.h=0,this.i=r,this.o=!1,this.l.D(e,"waiting",function(){return ss(o)}),this.m=new qe(function(){ss(o)}).Wa(this.s.gapJumpTimerTime)}function ss(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.h&&(e.g.autoplay||e.g.currentTime!=e.h)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.i)){t=e.i;var n=t.l,r=os(n),i=n.g.currentTime,o=Date.now()/1e3;t.g==i&&t.s==r||(t.m=o,t.g=i,t.s=r,t.h=!1),i=o-t.m,(r=i>=t.A&&r&&!t.h)&&(t.i(t.g,i),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Er("stalldetected"))),t=!r}t&&(t=e.g.currentTime,Je()&&0==t&&1<e.h?F("Samsung Tizen device avoid gap jump! currentTime:"+t+" startTime:"+e.h):(n=e.g.buffered,null==(r=Do(n,t,e.s.gapDetectionThreshold))||0==r&&!e.o||(i=n.start(r),(navigator.userAgent.match(/Edge\//)||Ye())&&(i=Math.ceil(100*(i+.01))/100),i>=e.B.ub()||.001>(o=i-t)||(0==r?K("Jumping forward",o,"seconds because of gap before start time of",i):K("Jumping forward",o,"seconds because of gap starting at",n.end(r-1),"and ending at",i),e.g.currentTime=i,t==e.h&&(e.h=i),e.C++,e.A(new Er("gapjumped"))))))}}}function us(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=nk.value().get(t),n.ta(e,t,r))}function cs(e,t,n,r){var i=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return null==i.l&&(i.l=r()),i.l},this.o=!1,this.h=new $,this.i=new ps(e),us(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){ds(i,i.j())})}function ls(e){return e.o?e.g.currentTime:e.j()}function fs(e,t){0<e.g.readyState?gs(e.i,t):us(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){ds(e,e.j())})}function ds(e,t){.001>Math.abs(e.g.currentTime-t)?hs(e):(e.h.ta(e.g,"seeking",function(){hs(e)}),gs(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function hs(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function ps(e){var t=this;this.h=e,this.m=10,this.l=this.i=this.j=0,this.g=new qe(function(){0>=t.j?(W(["Failed to move playhead from",t.i,"to",t.l].join(" ")),t.g.stop()):t.h.currentTime!=t.i?t.g.stop():(t.h.currentTime=t.l,t.j--)})}function gs(e,t){e.i=e.h.currentTime,e.l=t,e.j=e.m,e.h.currentTime=t,e.g.Wa(.1)}function ys(e){this.h=e,this.j=!1,this.g=null,this.i=new $}function vs(e,t,n,r,i,o){var a=this;this.i=e,this.g=t.presentationTimeline,this.C=t.minBufferTime||0,this.l=n,this.B=i,this.A=null,this.s=r,this.o=Ss(e,n,o),this.j=new as(e,t.presentationTimeline,n,this.o,o),this.h=new cs(e,function(){e:{var e=a.j;e.j=!0,e.o=!1,e=ls(a.h);var t=bs(a,e);if(.001<Math.abs(t-e)){var n=Date.now()/1e3;if(!a.A||a.A<n-1){a.A=n,fs(a.h,t),e=void 0;break e}}G("Seek to "+e),a.B(),e=void 0}return e},function(e){var t=a.j;t.g.seeking&&!t.j&&(t.j=!0,t.h=e)},function(){var e=r;return null==e?e=1/0>a.g.getDuration()?a.g.$b():a.g.ub():0>e&&(e=a.g.ub()+e),ms(a,ws(a,e))}),this.m=new qe(function(){if(0!=a.i.readyState&&!a.i.paused){var e=ls(a.h);if(Je()&&0==e&&0!=a.s)F("Samsung Tizen device avoid seek into future! currentTime:"+e+" startTime:"+a.s);else{var t=a.g.$b(),n=a.g.ub();3>n-t&&(t=n-3),e<t&&(t=bs(a,e),K("Jumping forward "+(t-e)+" seconds to catch up with the seek range."),a.i.currentTime=t)}}})}function ms(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function bs(e,t){var n=Math.max(e.C,e.l.rebufferingGoal),r=e.l.safeSeekOffset,i=e.g.$b(),o=e.g.ub(),a=e.g.getDuration();3>o-i&&(i=o-3);var s=e.g.od(n),u=e.g.od(r);return n=e.g.od(n+r),t>=a?(G("Playhead past duration."),ms(e,t)):t>o?(G("Playhead past end."),o):t<i?Oo(e.i.buffered,u)?(G("Playhead before start & start is buffered"),u):(G("Playhead before start & start is unbuffered"),n):t>=s||Oo(e.i.buffered,t)?(G("Playhead in safe region or in buffered region."),t):(G("Playhead outside safe region & in unbuffered region."),n)}function ws(e,t){var n=e.g.$b();return t<n?n:(e=e.g.ub(),t>e?e:t)}function Ss(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new ns(new is(e),t.stallThreshold,n),rs(t,function(t,n){q("Stall detected at "+t+" for "+n+" seconds."),r?(q("Seeking forward "+r+" seconds to break stall."),e.currentTime+=r):(q("Pausing and unpausing to break stall."),e.pause(),e.play())}),t}function _s(e){this.g=e,this.m=null,this.j=0,this.o=!1}function Ts(e,t,n){return e=new Po(e,e+t,function(){return n},0,null,null,e,e,e+t),new _s([e])}function ks(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}function Es(){_s.call(this,[]),this.h=[]}function As(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Zd(),this.h=new qe(function(){t.g.Hg(.25*t.i)})}function xs(e){e.h.stop();var t=e.j?0:e.i;if(G("Changing effective playback rate to",t),0<=t)try{return void(e.g.Zd()!=t&&e.g.Vf(t))}catch(e){}e.h.Wa(.25),0!=e.g.Zd()&&e.g.Vf(0)}function Cs(e){var t=this;this.h=e,this.g=new Set,this.i=new qe(function(){Ps(t,!1)}).Wa(.25)}function Ps(e,t){for(var n=a(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function Is(){this.g=null,this.h=[]}function js(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=a(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function Ms(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=a(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}function Os(){this.i=this.h=null,this.g=[]}function Rs(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Ds(){this.Rd=this.A=this.B=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.L=this.N=this.I=this.J=this.K=this.l=this.o=NaN,this.g=new Is,this.h=new Os}function Ls(e,t,n,r){this.m=e,this.g=t,this.l=n,this.i=new Map,this.j=new Map,this.h=null,this.o=r}function Ns(e,t){e.l=t,e=a(e.i.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function Us(e,t,n){n=void 0!==n&&n;var r=Gs(e.g);if(e.g.segmentIndex)if(e.h||(e.h=e.g.segmentIndex.Ab(t,!0,e.o)),e.h){for(n&&e.h.next();e.i.size<e.m&&(t=e.h.next().value)&&(n=!0,t.preload&&null!=t.ma&&(n=!1),2==t.bc()&&(n=!1),n&&t.ea&&Bs(e,t.ea),n&&!e.i.has(t)&&(n=new zs(e.l),Xs(n,t,e.g),e.i.set(t,n)),!(e.g.fastSwitching&&t.Bd&&t.fe)););Vs(e)}else q(r,"missing iterator");else q(r,"missing segmentIndex")}function Bs(e,t){var n=Gs(e.g);e.g.segmentIndex?Array.from(e.j.keys()).some(function(e){return Co(e,t)})||(n=new zs(e.l),Xs(n,t,e.g),e.j.set(t,n)):q(n,"missing segmentIndex")}function Fs(e,t){t=a(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&qs(e,n)}function Hs(e){Fs(e,e.i),Fs(e,e.j),e.h=null,q(Gs(e.g),"cleared all")}function Vs(e){for(var t=Array.from(e.i.keys()),n={},r=a(e.j.keys()),i=r.next();!i.done;n={Ld:n.Ld},i=r.next())n.Ld=i.value,t.some(function(e){return function(t){return Co(t.ea,e.Ld)}}(n))||qs(e,n.Ld)}function Ws(e,t){q(Gs(e.g),"resetting prefetch limit to",t),e.m=t;for(var n=Array.from(e.i.keys());n.length>t;){var r=n.pop();r&&qs(e,r)}Vs(e)}function Ks(e,t){t&&t!==e.g&&(Hs(e),e.g=t)}function qs(e,t){var n=Gs(e.g),r=e.i;t instanceof xo&&(r=e.j),e=r.get(t),r.delete(t),e&&(e.abort(),t instanceof Po?q(n,"pop and abort prefetched segment at time:",t.startTime):q(n,"pop and abort prefetched init segment"))}function Gs(e){return"SegmentPrefetch("+e.type+":"+e.id+")"}function zs(e){this.g=e,this.se=this.Wf=null}function Xs(e,t,n){var r=new Uint8Array(0);e.se=e.g(t,n,function(t){return A(function(n){if(1==n.g)return r=0<r.byteLength?Ct(r,t):t,e.Wf?d(n,e.Wf(r),3):n.u(0);r=new Uint8Array(0),h(n)})})}function Ys(e){xr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new qe(function(){for(var e=t.i(),n=a(t.g),r=n.next();!r.done;r=n.next())r=r.value,r.endTime<e.start&&(t.g.delete(r),r=new Er("regionremove",new Map([["region",r]])),t.dispatchEvent(r))}).Wa(2)}function Js(e){xr.call(this),this.g=new Map,this.h=e}function $s(e,t){var n=e.g.get(t);return n||(n={Dd:[],ng:null,contentType:t},e.g.set(t,n)),n}function Qs(e,t,n){var r=$s(e,t.contentType);Zs(e,r),e={yf:t,position:n},r=r.Dd,t=r.findIndex(function(e){return e.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}function Zs(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,i=t.Dd;t.Dd=i.filter(function(e,t){return!(e.position<=n&&t+1<i.length&&i[t+1].position<=n||e.position>=r)})}else t.Dd=[]}function eu(e,t,n,r,i){return e=Or(e,r,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function tu(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.B=1,this.s=this.j=null,this.I=0,this.F=!1,this.i=new Map,this.C=!1,this.J=null,this.A=!1,this.l=new Fr(function(){return nu(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null},this.N=0,this.L=1/0}function nu(e){var t,n,r,i,o,s,u;return A(function(c){if(1==c.g){for(t=[],n=a(e.i.values()),r=n.next();!r.done;r=n.next())i=r.value,ju(i),t.push(Mu(i)),i.S&&(Hs(i.S),i.S=null);for(o=a(e.o.values()),s=o.next();!s.done;s=o.next())u=s.value,Hs(u);return d(c,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.m=null,e.h=null,h(c)})}function ru(e,t,n){e.m.presentationTimeline.U()||(e.N=t,e.L=n)}function iu(e,t){var n,r,i,o,a,s,u;A(function(c){switch(c.g){case 1:return n=pT,e.I++,r=e.I,p(c,2),d(c,Na(e.g.Z,n.pa),4);case 4:y(c,3);break;case 2:i=v(c),e.g&&e.g.onError(i);case 3:o=Lt(t.mimeType,t.codecs),xa(e.g.Z,o,e.m.sequenceMode,t.external),a=e.g.Z.C,(s=a.isTextVisible()||e.h.alwaysStreamText)&&e.I==r&&(u=hu(e,t),e.i.set(n.pa,u),Iu(e,u,0)),h(c)}})}function ou(e){var t=e.i.get(hT);t&&(ju(t),Mu(t).catch(function(){}),e.i.delete(hT)),e.s=null}function au(e,t){for(var n=0>e.g.bb(),r=a(e.i.values()),i=r.next();!i.done;i=r.next())i=i.value,i.ca&&i.ca.Lc(n),i.S&&i.S.Lc(n);for(r=a(e.o.values()),i=r.next();!i.done;i=r.next())i.value.Lc(n);(n=e.i.get("video"))&&(r=n.stream)&&(q("setTrickPlay",t),t?(t=r.trickModeVideo)&&!n.lc&&(q("Engaging trick mode stream",t),cu(e,t,!1,0,!1),n.lc=r):(t=n.lc)&&(q("Restoring non-trick-mode stream",t),n.lc=null,cu(e,t,!0,0,!1)))}function su(e,t,n,r,i,o){n=void 0!==n&&n,r=void 0===r?0:r,i=void 0!==i&&i,o=void 0!==o&&o,e.j=t,e.C&&(t.video&&cu(e,t.video,n,r,i,o),t.audio&&cu(e,t.audio,n,r,i,o))}function uu(e,t){A(function(n){if(1==n.g)return e.s=t,e.C?t.segmentIndex?n.u(2):d(n,t.createSegmentIndex(),2):n.return();cu(e,t,!0,0,!1),h(n)})}function cu(e,t,n,r,i,o){var a=e.i.get(t.type);a||t.type!=hT?a&&(a.lc&&(q("switch during trick play mode",t),t.trickModeVideo?(a.lc=t,t=t.trickModeVideo,q("switch found trick play stream",t)):(a.lc=null,q("switch found no special trick play stream"))),a.stream!=t||i?(e.o.has(t)?a.S=e.o.get(t):a.S&&Ks(a.S,t),t.type==hT&&(i=Lt(t.mimeType,t.codecs),xa(e.g.Z,i,e.m.sequenceMode,t.external)),e.o.has(a.stream)||a.stream.closeSegmentIndex&&a.stream.closeSegmentIndex(),a.stream=t,a.ca=null,a.ig=!!o,q("switch: switching to Stream "+Lu(a)),n&&(a.cd?a.Ae=!0:a.Ta?(a.Pb=!0,a.Vd=r,a.Ae=!0):(ju(a),Pu(e,a,!0,r).catch(function(t){e.g&&e.g.onError(t)}))),lu(e,a).catch(function(t){e.g&&e.g.onError(t)})):q("switch: Stream "+Lu(a)+" already active")):iu(e,t)}function lu(e,t){var n,r;return A(function(i){if(1==i.g)return t.fb?(n=t.stream,r=t.fb,n.segmentIndex?i.u(2):d(i,n.createSegmentIndex(),2)):i.return();if(t.fb!=r||t.stream!=n)return i.return();var o=e.g.Yd(),a=Ia(e.g.Z,t.type),s=t.stream.segmentIndex.find(t.Qa?t.Qa.endTime:o),u=null==s?null:t.stream.segmentIndex.get(s);s=u&&u.ma?u.ma-u.Ca:null,u&&!s&&(s=(u.endTime-u.getStartTime())*(t.stream.bandwidth||0)/8),s?((u=u.ea)&&(s+=(u.ma?u.ma-u.Ca:null)||0),u=e.g.getBandwidthEstimate(),o=8*s/u<(a||0)-o-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.fb.h.g>s):o=!1,o&&(K("Aborting current segment request."),t.fb.abort()),h(i)})}function fu(e,t){var n=Lu(t);t.cd?q(n,"clear: already clearing the buffer"):t.Pb?q(n,"clear: already waiting"):t.Ta?(q(n,"clear: currently updating"),t.Pb=!0,t.Vd=0):null==Pa(e.g.Z,t.type)?(q(n,"clear: nothing buffered"),null==t.xb&&Iu(e,t,0)):(q(n,"clear: handling right now"),ju(t),Pu(e,t,!1,0).catch(function(t){e.g&&e.g.onError(t)}))}function du(e,t){var n,r,i,o,s,u,c,l,f,p;return A(function(g){if(1==g.g){if(n=pT,!e.j)throw V("init: no Streams chosen"),new He(2,5,5006);return r=new Map,i=new Set,e.j.audio&&(r.set(n.V,e.j.audio),i.add(e.j.audio)),e.j.video&&(r.set(n.ga,e.j.video),i.add(e.j.video)),e.s&&(r.set(n.pa,e.s),i.add(e.s)),o=e.g.Z,d(g,o.init(r,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(Hr(e.l),e.updateDuration(),s=a(r.keys()),u=s.next();!u.done;u=s.next())c=u.value,l=r.get(c),e.i.has(c)||(f=hu(e,l),t.has(l.id)&&(p=t.get(l.id),Ns(p,function(t,n,r){return Cu(t,n,r||null,e.h.retryParameters,e.g.Db)}),f.S=p),e.i.set(c,f),Iu(e,f,0));h(g)})}function hu(e,t){return{stream:t,type:t.type,ca:null,S:pu(e,t),Qa:null,fc:null,vf:null,tf:null,rf:null,lc:null,endOfStream:!1,Ta:!1,xb:null,Pb:!1,Vd:0,Ae:!1,cd:!1,Ed:!0,If:!1,sd:!1,fb:null}}function pu(e,t){if("video"===t.type&&e.h.disableVideoPrefetch||"audio"===t.type&&e.h.disableAudioPrefetch||t.type===hT&&("application/cea-608"==t.mimeType||"application/cea-708"==t.mimeType)||t.type===hT&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.S)&&t===n.g?n:0<e.h.segmentPrefetchLimit?new Ls(e.h.segmentPrefetchLimit,t,function(t,n,r){return Cu(t,n,r||null,e.h.retryParameters,e.g.Db)},0>e.g.bb()):null}function gu(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r={},i=a(e.m.variants),o=i.next();!o.done;r={Ja:r.Ja},o=i.next())if(r.Ja=o.value,r.Ja.audio)if(e.o.has(r.Ja.audio)){if(o=e.o.get(r.Ja.audio),Ws(o,t),!(0<t&&n.some(function(e){return function(t){return on(e.Ja.audio.language,t)}}(r)))){var s=e.i.get(r.Ja.audio.type);o!==(s&&s.S)&&Hs(o),e.o.delete(r.Ja.audio)}}else 0>=t||!n.some(function(e){return function(t){return on(e.Ja.audio.language,t)}}(r))||!(o=pu(e,r.Ja.audio))||(r.Ja.audio.segmentIndex||r.Ja.audio.createSegmentIndex(),e.o.set(r.Ja.audio,o))}function yu(e,t){var n,r,i,o,a,s;return A(function(u){switch(u.g){case 1:if(Hr(e.l),n=Lu(t),t.Ta||null==t.xb||t.cd)return u.return();if(t.xb=null,!t.Pb){u.u(2);break}return q(n,"skipping update and clearing the buffer"),d(u,Pu(e,t,t.Ae,t.Vd),3);case 3:return u.return();case 2:if(t.stream.segmentIndex){u.u(4);break}return r=t.stream,d(u,t.stream.createSegmentIndex(),5);case 5:if(r!=t.stream)return r.closeSegmentIndex&&r.closeSegmentIndex(),t.Ta||t.xb||Iu(e,t,0),u.return();case 4:p(u,6),i=vu(e,t),null!=i&&(Iu(e,t,i),t.sd=!1),y(u,7);break;case 6:return o=v(u),d(u,Ou(e,t,o),8);case 8:return u.return();case 7:if(a=Array.from(e.i.values()),!e.C||!a.every(function(e){return e.endOfStream})){u.u(0);break}return G(n,"calling endOfStream()..."),d(u,e.g.Z.endOfStream(),10);case 10:Hr(e.l),s=e.g.Z.getDuration(),0!=s&&s<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Va(s),h(u)}})}function vu(e,t){if(Au(t))return Da(e.g.Z,t.stream.originalId||""),null;if(t.type==hT&&La(e.g.Z),!e.g.Z.fa&&t.type!=hT)return e.h.updateIntervalSeconds/2;var n=Lu(t),r=e.g.Yd();if("audio"===t.type)for(var i=a(e.o.keys()),o=i.next();!o.done;o=i.next())o=e.o.get(o.value),o.Ia(r,!0),Us(o,r);i=t.Qa?t.Qa.endTime:r,z(n,"timeNeeded="+i),o=ja(e.g.Z,t.type,r),z(n,"update_:","presentationTime="+r,"bufferedAhead="+o);var s=Math.max(1,Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),u=e.m.presentationTimeline.getDuration()-i,c=Ia(e.g.Z,t.type);if(1e-6>u&&c)return q(n,"buffered to end of presentation"),t.endOfStream=!0,"video"==t.type&&(e=e.i.get(hT))&&Au(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,o>=s)return z(n,"buffering goal met"),e.h.updateIntervalSeconds/2;if(!(o=mu(e,t,r,c)))return e.h.updateIntervalSeconds;for(s=1/0,u=Array.from(e.i.values()),u=a(u),c=u.next();!c.done;c=u.next())c=c.value,Au(c)||c.ca&&!c.ca.current()||(s=Math.min(s,c.Qa?c.Qa.endTime:r));return i>=s+e.m.presentationTimeline.g?(z(n,"waiting for other streams to buffer"),e.h.updateIntervalSeconds):(t.S&&t.ca&&!e.o.has(t.stream)&&(t.S.Ia(r),Us(t.S,o.startTime)),bu(e,t,r,o).catch(function(){}),null)}function mu(e,t,n,r){var i=Lu(t);if(t.ca)return t.ca.current();if(t.Qa||r)return n=t.Qa?t.Qa.endTime:r,G(i,"looking up segment from new stream endTime:",n),t.ca=t.stream.segmentIndex.Ab(n,!1,0>e.g.bb()),t=t.ca&&t.ca.next().value,null==t&&W(i,"cannot find segment","endTime:",n),t;r=e.h.inaccurateManifestTolerance;var o=Math.max(n-r,0);G(i,"looking up segment","lookupTime:",o,"presentationTime:",n),e=0>e.g.bb();var a=null;return r&&(t.ca=t.stream.segmentIndex.Ab(o,!1,e),a=t.ca&&t.ca.next().value),a||(t.ca=t.stream.segmentIndex.Ab(n,!1,e),a=t.ca&&t.ca.next().value),null==a&&W(i,"cannot find segment","lookupTime:",o,"presentationTime:",n),a}function bu(t,n,r,i){var o,a,s,u,c,l,f,g,m,b,w,S,_,T,k,E,x,C;return A(function(P){switch(P.g){case 1:if(o=pT,a=Lu(n),G(a,"fetchAndAppend_:","presentationTime="+r,"reference.startTime="+i.startTime,"reference.endTime="+i.endTime),s=n.stream,u=n.ca,n.Ta=!0,p(P,2),2==i.bc())throw new He(1,1,1011);return d(P,Tu(t,n,i),4);case 4:return Hr(t.l),t.A?P.return():(z(a,"fetching segment"),c="video/mp4"==s.mimeType||"audio/mp4"==s.mimeType,l=e.ReadableStream,t.h.lowLatencyMode&&l&&c&&("HLS"!=t.m.type||i.m)?(m=new Uint8Array(0),w=b=!1,_=function(e){var o,a,u,c;return A(function(l){switch(l.g){case 1:if(b)return l.return();if(w=!0,Hr(t.l),t.A)return l.return();if(p(l,2),m=Su(m,e),o=!1,a=0,(new Xr).box("mdat",function(e){a=e.size+e.start,o=!0}).parse(m,!1,!0),!o){l.u(4);break}return u=m.subarray(0,a),m=m.subarray(a),d(l,ku(t,n,r,s,i,u,!0),5);case 5:n.S&&n.ca&&Us(n.S,i.startTime,!0);case 4:y(l,0);break;case 2:S=c=v(l),h(l)}})},d(P,xu(t,n,i,_),9)):(t.h.lowLatencyMode&&!l&&W("Low latency streaming mode is enabled, but ReadableStream is not supported by the browser."),f=xu(t,n,i),d(P,f,7)));case 7:return g=P.h,(Hr(t.l),t.A)?P.return():(Hr(t.l),n.Pb?(K(a,"waitingToClearBuffer, skip append"),n.Ta=!1,Iu(t,n,0),P.return()):d(P,ku(t,n,r,s,i,g),6));case 9:if(T=P.h,S)throw S;if(w){P.u(10);break}return b=!0,Hr(t.l),t.A?P.return():n.Pb?(K(a,"waitingToClearBuffer, skip append"),n.Ta=!1,Iu(t,n,0),P.return()):d(P,ku(t,n,r,s,i,T),10);case 10:n.S&&n.ca&&Us(n.S,i.startTime,!0);case 6:if(Hr(t.l),t.A)return P.return();n.Qa=i,k=u.next().value,z(a,"advancing to next segment",k),n.Ta=!1,n.If=!1,E=t.g.Z.sb(),x=E[n.type],G(a,"finished fetch and append",JSON.stringify(x)),n.Pb||t.g.Cf(i,n.stream),Iu(t,n,0),y(P,0);break;case 2:if(C=v(P),Hr(t.l,C),t.A)return P.return();if(n.Ta=!1,7001==C.code)n.Ta=!1,ju(n),Iu(t,n,0),P.u(0);else if(n.type==o.pa&&t.h.ignoreTextStreamFailures)1001==C.code?W(a,"Text stream failed to download. Proceeding without it."):W(a,"Text stream failed to parse. Proceeding without it."),t.i.delete(o.pa),P.u(0);else{if(3017!=C.code)return V(a,"failed fetch and append: code="+C.code),n.sd=!0,1==C.category&&n.S&&qs(n.S,i),C.severity=2,d(P,Ou(t,n,C),0);_u(t,n,C),P.u(0)}}})}function wu(t,n,r){var i,o,a,s,u;return A(function(c){if(1==c.g)return i=n,i.cryptoKey?c.u(2):d(c,i.fetchKey(),3);if(!(o=i.iv))for(o=he(new ArrayBuffer(16)),a=i.firstMediaSequenceNumber+r,s=o.byteLength-1;0<=s;s--)o[s]=255&a,a>>=8;return u="CBC"==n.blockCipherMode?{name:"AES-CBC",iv:o}:{name:"AES-CTR",counter:o,length:64},c.return(e.crypto.subtle.decrypt(u,i.cryptoKey,t))})}function Su(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function _u(e,t,n){var r=Lu(t);if(Array.from(e.i.values()).some(function(e){return e!=t&&e.If}))q(r,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{if(0<e.h.maxDisabledTime&&e.g.Xd(t.stream,e.h.maxDisabledTime))return;var i=Math.round(100*e.B);if(20<i)e.B-=.2;else{if(!(4<i))return V(r,"MediaSource threw QuotaExceededError too many times"),t.sd=!0,e.A=!0,void e.g.onError(n);e.B-=.04}W(r,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*e.B))+"%"),t.If=!0}Iu(e,t,4)}function Tu(e,t,n){var r,i,o,a,s,u,c,l,f,h,g,m,b,w;return A(function(S){switch(S.g){case 1:if(r=pT,i=Lu(t),o=[],a=Math.max(0,Math.max(n.appendWindowStart,e.N)-.1),s=Math.min(n.appendWindowEnd,e.L)+.01,u=Vt(t.stream.codecs),c=Wt(t.stream.mimeType),(l=n.timestampOffset)==t.vf&&a==t.tf&&s==t.rf&&u==t.uf&&c==t.Dg){S.u(2);break}if(G(i,"setting timestamp offset to "+l),G(i,"setting append window start to "+a),G(i,"setting append window end to "+s),!(f=t.uf&&t.Dg&&Za(e.g.Z,t.type,c,u))){S.u(3);break}if(h=null,t.type===r.ga?h=e.i.get(r.V):t.type===r.V&&(h=e.i.get(r.ga)),!h){S.u(3);break}return d(S,Mu(h).catch(function(){}),5);case 5:h.fc=null,fu(e,h);case 3:return g=function(){var i,o,f;return A(function(h){if(1==h.g)return i=new Map,e.j.audio&&i.set(r.V,e.j.audio),e.j.video&&i.set(r.ga,e.j.video),p(h,2),t.tf=a,t.rf=s,t.uf=u,t.Dg=c,t.vf=l,o=e.m.sequenceMode||"HLS"==e.m.type,d(h,Ua(e.g.Z,t.type,l,a,s,o,n.mimeType||t.stream.mimeType,n.codecs||t.stream.codecs,i),4);if(2!=h.g)return y(h,0);throw f=v(h),t.tf=null,t.rf=null,t.uf=null,t.vf=null,f})},d(S,g(),2);case 2:return Co(n.ea,t.fc)||(t.fc=n.ea,n.l&&n.ea&&(G(i,"fetching init segment"),m=xu(e,t,n.ea),b=function(){var o,a,s,u,c,l,f;return A(function(h){switch(h.g){case 1:return p(h,2),d(h,m,4);case 4:return o=h.h,Hr(e.l),a=null,s=new Map,u={projection:null,hfov:null},c=new Xr,c.box("moov",Yr).box("trak",Yr).box("mdia",Yr).P("mdhd",function(e){a=Go(e.reader,e.version).timescale}).box("hdlr",function(e){switch(e=e.reader,e.skip(8),e.jc()){case"soun":s.set(r.V,a);break;case"vide":s.set(r.ga,a)}a=null}).box("minf",Yr).box("stbl",Yr).P("stsd",Jr).box("encv",$r).box("avc1",$r).box("avc3",$r).box("hev1",$r).box("hvc1",$r).box("dvav",$r).box("dva1",$r).box("dvh1",$r).box("dvhe",$r).box("vexu",Yr).box("proj",Yr).P("prji",function(e){e=e.reader.jc(),u.projection=e}).box("hfov",function(e){e=e.reader.O()/1e3,u.hfov=e}).parse(o),Du(e,u),s.has(t.type)?n.ea.timescale=s.get(t.type):null!=a&&(n.ea.timescale=a),G(i,"appending init segment"),l=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,d(h,e.g.kg(t.type,o),5);case 5:return d(h,Ra(e.g.Z,t.type,o,null,t.stream,l),6);case 6:y(h,0);break;case 2:throw f=v(h),t.fc=null,f}})},e.g.si(n.startTime,n.ea),o.push(b()))),e.m.sequenceMode&&(w=t.Qa?t.Qa.j:null,n.j!=w&&o.push(Ba(e.g.Z,t.type,n.startTime))),d(S,Promise.all(o),0)}})}function ku(e,t,n,r,i,o,a){a=void 0!==a&&a;var s,u,c,l,f,p,g;return A(function(y){switch(y.g){case 1:return s=Lu(t),u=r.closedCaptions&&0<r.closedCaptions.size,l=null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,f=e.h.parsePrftBox&&!e.F,(l||f)&&(c=new Xr),l&&c.P("emsg",function(t){var n=r.emsgSchemeIdUris;if(0===t.version)var o=t.reader.jc(),a=t.reader.jc(),s=t.reader.O(),u=t.reader.O(),c=t.reader.O(),l=t.reader.O(),f=i.startTime+u/s;else s=t.reader.O(),f=t.reader.Jc()/s+i.timestampOffset,u=f-i.startTime,c=t.reader.O(),l=t.reader.O(),o=t.reader.jc(),a=t.reader.jc();t=t.reader.nb(t.reader.getLength()-t.reader.sa()),(n&&n.includes(o)||e.h.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==o?e.g.ti():(n=(new Map).set("detail",{startTime:f,endTime:f+c/s,schemeIdUri:o,value:a,timescale:s,presentationTimeDelta:u,eventDuration:c,id:l,messageData:t}),n=new Er("emsg",n),n.cancelable=!0,e.g.onEvent(n),n.defaultPrevented||"https://aomedia.org/emsg/ID3"!=o&&"https://developer.apple.com/streaming/emsg-id3"!=o||(o=Vo(t),o.length&&i&&e.g.re([{cueTime:i.startTime,data:t,frames:o,dts:i.startTime,pts:i.startTime}],0,i.endTime))))}),f&&c.P("prft",function(t){if(!e.F&&i.ea.timescale){var n=t.reader,r=t.version;n.O(),t=n.O();t=1e3*t+n.O()/Math.pow(2,32)*1e3,0===r?n=n.O():(r=n.O(),n=n.O(),n=r*Math.pow(2,32)+n),t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+t).getTime(),n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/i.ea.timescale*1e3)}),n=new Er("prft",n),e.g.onEvent(n),e.F=!0}}),(l||f)&&c.parse(o),d(y,Eu(e,t,n),2);case 2:return Hr(e.l),p=t.Ed,t.Ed=!1,g=t.ig,t.ig=!1,d(y,e.g.kg(t.type,o),3);case 3:return d(y,Ra(e.g.Z,t.type,o,i,r,u,p,g,a),4);case 4:Hr(e.l),z(s,"appended media segment"),h(y)}})}function Eu(e,t,n){var r,i,o,a,s;return A(function(u){if(1==u.g)return r=Lu(t),z(r,"checking buffer length"),i=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),null==(o=Pa(e.g.Z,t.type))?(z(r,"buffer behind okay because nothing buffered:","presentationTime="+n,"bufferBehind="+i),u.return()):(a=n-o,(s=a-i)<=e.h.evictionGoal?(z(r,"buffer behind okay:","presentationTime="+n,"bufferedBehind="+a,"bufferBehind="+i,"evictionGoal="+e.h.evictionGoal,"underflow="+Math.abs(s)),u.return()):(G(r,"buffer behind too large:","presentationTime="+n,"bufferedBehind="+a,"bufferBehind="+i,"evictionGoal="+e.h.evictionGoal,"overflow="+s),d(u,e.g.Z.remove(t.type,o,o+s),2)));Hr(e.l),G(r,"evicted "+s+" seconds"),h(u)})}function Au(e){return e&&e.type==hT&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function xu(e,t,n,r){var i,o,a,s,u;return A(function(c){switch(c.g){case 1:if(i=n.pd())return c.return(i);if(o=null,t.S){var l=t.S,f=Gs(l.g),h=l.i;n instanceof xo&&(h=l.j),h.has(n)?(l=h.get(n),r&&(l.Wf=r),n instanceof Po?q(f,"reused prefetched segment at time:",n.startTime,"mapSize",h.size):q(f,"reused prefetched init segment at time, mapSize",h.size),o=l.se):(n instanceof Po?q(f,"missed segment at time:",n.startTime,"mapSize",h.size):q(f,"missed init segment at time, mapSize",h.size),o=null)}return o||(o=Cu(n,t.stream,r||null,e.h.retryParameters,e.g.Db)),a=0,t.ca&&(a=t.ca.h),t.fb=o,d(c,o.promise,2);case 2:if(s=c.h,t.fb=null,u=s.data,!n.aesKey){c.u(3);break}return d(c,wu(u,n.aesKey,a),4);case 4:u=c.h;case 3:return c.return(u)}})}function Cu(e,t,n,r,i){var o=e instanceof Po?e:void 0,a=o?1:0;return n=eu(e.M(),e.Ca,e.ma,r,n),n.contentType=t.type,z("fetching: reference=",e),i.request(PT,n,{type:a,stream:t,segment:o})}function Pu(e,t,n,r){var i,o,a;return A(function(s){return 1==s.g?(i=Lu(t),t.Pb=!1,t.Ae=!1,t.Vd=0,t.cd=!0,t.Qa=null,t.fc=null,t.ca=null,q(i,"clearing buffer"),t.S&&!e.o.has(t.stream)&&Hs(t.S),r?(o=e.g.Yd(),a=e.g.Z.getDuration(),d(s,e.g.Z.remove(t.type,o+r,a),3)):d(s,Na(e.g.Z,t.type),4)):3!=s.g?(Hr(e.l),n?d(s,e.g.Z.flush(t.type),3):s.u(3)):(Hr(e.l),q(i,"cleared buffer"),t.cd=!1,t.endOfStream=!1,t.Ta||t.xb||Iu(e,t,0),void h(s))})}function Iu(e,t,n){var r=Lu(t),i=t.type;i!=hT||e.i.has(i)?(z(r,"updating in "+n+" seconds"),t.xb=new Ke(function(){var n;return A(function(r){return 1==r.g?(p(r,2),d(r,yu(e,t),4)):2!=r.g?y(r,0):(n=v(r),e.g&&e.g.onError(n),void h(r))})}).X(n)):G(r,"Text stream is unloaded. No update is needed.")}function ju(e){null!=e.xb&&(e.xb.stop(),e.xb=null)}function Mu(e){return A(function(t){return e.fb?d(t,e.fb.abort(),0):t.u(0)})}function Ou(e,t,n){var r;return A(function(i){if(1==i.g)return d(i,gr(e.J),2);Hr(e.l),r=0===e.h.maxDisabledTime&&1011==n.code?1:e.h.maxDisabledTime,1===n.category&&0<r&&(n.handled=e.g.Xd(t.stream,r),n.handled&&(n.severity=1)),n.handled&&1011==n.code||e.g.onError(n),n.handled||e.h.failureCallback(n),h(i)})}function Ru(e){var t,n,r,i,o,a;return A(function(s){return 1==s.g?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?s.return(!1):(e.K=t,r=pT,(i=e.i.get(r.V))&&(i.fc=null,fu(e,i),Mu(i).catch(function(){})),(o=e.i.get(r.ga))&&(o.fc=null,fu(e,o),Mu(o).catch(function(){})),a=new Map,e.j.audio&&a.set(r.V,e.j.audio),e.j.video&&a.set(r.ga,e.j.video),d(s,$a(e.g.Z,a),2))):s.return(!0)})}function Du(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(null!=t.projection||null!=t.hfov){var n=(new Map).set("detail",t);n=new Er("spatialvideoinfo",n)}else n=new Er("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function Lu(e){return"("+e.type+":"+e.stream.id+")"}function Nu(){}function Uu(e,t,n,r,i){var o,a=i in r,s=a?n.constructor==Object&&0==Object.keys(r).length:n.constructor==Object&&0==Object.keys(n).length,u=a||s,c=!0;for(o in t){var l=i+"."+o,f=a?r[i]:n[o];u||o in n?void 0===t[o]?void 0===f||u?delete e[o]:e[o]=hn(f):s?e[o]=t[o]:f.constructor==Object&&t[o]&&t[o].constructor==Object?(e[o]||(e[o]=hn(f)),l=Uu(e[o],t[o],f,r,l),c=c&&l):typeof t[o]!=typeof f||null==t[o]||"function"!=typeof t[o]&&t[o].constructor!=f.constructor?(B("Invalid config, wrong type for "+l),c=!1):("function"==typeof n[o]&&n[o].length!=t[o].length&&F("Unexpected number of arguments for "+l),e[o]=t[o]):(B("Invalid config, unrecognized key "+l),c=!1)}return c}function Bu(e,t){for(var n={},r=n,i=0,o=0;!(0>(i=e.indexOf(".",i)));)0!=i&&"\\"==e[i-1]||(o=e.substring(o,i).replace(/\\\./g,"."),r[o]={},r=r[o],o=i+1),i+=1;return r[e.substring(o).replace(/\\\./g,".")]=t,n}function Fu(e,t){return e&&t}function Hu(e,t){function n(e){for(var t=a(Object.keys(e)),r=t.next();!r.done;r=t.next())r=r.value,o(e[r])&&0===Object.keys(e[r]).length?delete e[r]:i(e[r])?delete e[r]:"function"==typeof e[r]?delete e[r]:o(e[r])&&n(e[r])}function r(e,t){return Object.keys(e).reduce(function(n,a){var s=e[a];return t.hasOwnProperty(a)?o(s)&&o(t[a])?(s=r(s,t[a]),(0<Object.keys(s).length||!o(s))&&(n[a]=s)):i(s)&&i(t[a])||s!==t[a]&&(n[a]=s):n[a]=s,n},{})}function i(e){return Array.isArray(e)&&0===e.length}function o(e){return e&&"object"==typeof e&&!Array.isArray(e)}return e=r(e,t),n(e),e}function Vu(){}function Wu(e){return e=vt(e),new Ie(e).zb}function Ku(e,t,n){function r(e){ge(o).setUint32(a,e.byteLength,!0),a+=4,o.set(he(e),a),a+=e.byteLength}if(!n||!n.byteLength)throw new He(2,6,6015);var i;i="string"==typeof t?bt(t,!0):t,e=vt(e),e=bt(e,!0);var o=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),a=0;return r(e),r(i),r(n),o}function qu(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,n=vt(e).split("skd://").pop(),Ku(e,n,t))}function Gu(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")}function zu(){}function Xu(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:yr(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(e,t,n){return dt()&&"skd"==t&&(t=n.serverCertificate,n=Wu(e),e=Ku(e,n,t)),e},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Ye(),minHdcpVersion:"",ignoreDuplicateInitData:!Qe()};(Ye()||ot())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;Qe()||$e()||lt("Tizen 4")||lt("Tizen 5")||lt("Tizen 6")||et()||Ze()&&53===nt()||Ze()&&68===nt()||!(!tt()||tt()&&lt("Android")||tt()&&lt("Fuchsia"))||ct()&&Xe()||(n="smooth",r=!0),r={retryParameters:yr(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:uuid:adb41c24-2dbf-4a6d-958b-4457c0d27b95":"com.tvkey.drm"},manifestPreprocessor:$u,manifestPreprocessorTXml:Qu,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!($e()||Qe()||et()||ot()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:$u,manifestPreprocessorTXml:Qu,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var i={retryParameters:yr(),failureCallback:function(e){return V("Unhandled streaming error",e),Fu([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:!1,liveSyncTargetLatencyTolerance:.5,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:.95,liveSyncPanicMode:!1,liveSyncPanicThreshold:60,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:ot()||it()};(Ze()||Je()||tt()||at())&&(i.stallSkip=0);var o={trackSelectionCallback:function(e){return A(function(t){return t.return(e)})},downloadSizeCallback:function(e){var t;return A(function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?d(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))})},progressCallback:function(e,t){return Fu([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(e){return Fu([e],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(e,t){return Fu([e,t])}};var a=!1,s=!1,u=!0;(Je()||Ze()||Ye()||ot()||it()||lt("AFT")||lt("PC=EOS")||lt("PC=APL")||lt("VirginMedia")||st()||lt("WPE")||tt()||at()||lt("DT_STB_BCM"))&&(s=a=!0,u=!1);var c={drm:t,manifest:r,streaming:i,mediaSource:n,offline:o,abrFactory:function(){return new Gn},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredAudioChannelConfig:"2",preferredAudioAccessibilityPurpose:"",preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:a,skipPlayDetection:s,supportsMultipleMediaElements:u}};return o.trackSelectionCallback=function(e){return A(function(t){return t.return(Ju(e,c.preferredAudioLanguage,c.preferredVideoHdrLevel))})},c}function Yu(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return Uu(e,t,n||Xu(),r,"")}function Ju(t,n,r){var i=r;"AUTO"==i&&(i=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var o=t.filter(function(e){return!("variant"!=e.type||e.hdr&&e.hdr!=i)});r=[];var s=dn(n,o.map(function(e){return e.language}));s&&(r=o.filter(function(e){return un(e.language)==s})),0==r.length&&(r=o.filter(function(e){return e.primary})),0==r.length&&(1<new Set(o.map(function(e){return e.language})).size&&W("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),r=o);var u=r.filter(function(e){return e.height&&480>=e.height});for(u.length&&(u.sort(function(e,t){return t.height-e.height}),r=u.filter(function(e){return e.height==u[0].height})),n=[],r.length&&(o=Math.floor(r.length/2),r.sort(function(e,t){return e.bandwidth-t.bandwidth}),n.push(r[o])),t=a(t),r=t.next();!r.done;r=t.next())r=r.value,r.type!=hT&&"image"!=r.type||n.push(r);return n}function $u(e){return Fu([e],e)}function Qu(e){return Fu([e],e)}function Zu(e,t,n,r,i){xr.call(this),this.K=e,this.T=t,this.Ka=i.networkingEngine,this.W=r,this.o=null,this.qb=n,this.wa=0,this.hb=i.xc,this.B=i.mi,this.ib=i.ni,this.g=i.config,this.j=this.C=this.h=null,this.da=!1,this.F=i.xi,this.qa=!1,this.l=null,this.ba=!1,this.i=this.A=null,this.aa=!1,this.J=new Map,this.ra=!1,this.La=i.wi,this.$=new Ds,this.m=new vr,this.L=null,this.s=!1,this.Ya=i.ph,this.fa=null,this.Za=i.oh,this.N=!1,this.I=[],this.G=[]}function ec(e,t,n){(e=t?e.G:e.I)?e.push(n):n()}function tc(e){if(e.G)for(var t=a(e.G),n=t.next();!n.done;n=t.next())(n=n.value)();e.G=null}function nc(e,t){if(e.L=t,e.N=!0,e.I){t=a(e.I);for(var n=t.next();!n.done;n=t.next())(n=n.value)()}e.I=null}function rc(e){return e.aa=!0,e.i}function ic(e){return e.da=!0,e.j}function oc(e){return e.qa=!0,e.F}function ac(e){return e.ba=!0,e.l}function sc(e){return e.ra=!0,e.J}function uc(e){if(e.s)throw new He(2,7,7003)}function cc(e,t){e.dispatchEvent(new Er("onstatechange",(new Map).set("state",t)))}function lc(e){var t,n,r,i,o;return A(function(a){if(1==a.g)return cc(e,"manifest-parser"),e.j||(e.C=To(e.K,e.T),e.j=e.C(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,cc(e,"manifest"),e.h?a.u(2):(n=e,d(a,e.j.start(e.K,e.ib),3));if(2!=a.g&&(n.h=a.h),r=new Er("manifestparsed",void 0),e.dispatchEvent(r),0==e.h.variants.length)throw new He(2,4,4036);hc(e.h),i=Date.now()/1e3,o=i-t,e.$.F=o,h(a)})}function fc(e){var t,n,r,i,o;return A(function(a){switch(a.g){case 1:cc(e,"drm-engine"),e.wa=Date.now()/1e3,e.l=e.hb(),e.B.g=e.l,e.l.configure(e.g.drm);var s=e.B;if(!(t=wn(e.h.variants,s.h.restrictions,s.i))){a.u(2);break}return n=new Er("trackschanged",void 0),d(a,Promise.resolve(),3);case 3:uc(e),e.dispatchEvent(n);case 2:return r=Vn(e.h.variants),d(a,Ni(e.l,r,e.h.offlineSessionIds),4);case 4:return uc(e),d(a,mo(e.B,e.h),5);case 5:if(!(i=a.h)){a.u(0);break}return o=new Er("trackschanged",void 0),d(a,Promise.resolve(),7);case 7:e.dispatchEvent(o),h(a)}})}function dc(e,t,n){var r,i,o,a,s;A(function(u){if(1==u.g)return r=e.g.streaming.segmentPrefetchLimit||2,i=new Ls(r,t,function(t,n,r){return Cu(t,n,r||null,e.g.streaming.retryParameters,e.Ka)},!1),e.J.set(t.id,i),d(u,t.createSegmentIndex(),2);o=e.W||0,(s=(a=t.segmentIndex.Ab(o))?a.current():null)||(s=t.segmentIndex.get(0)),s&&(n?s.ea&&Bs(i,s.ea):Us(i,s.startTime)),h(u)})}function hc(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(q("Found variant with audio and video content, so filtering out audio-only content."),e.variants=e.variants.filter(t))}function pc(e,t){xr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{sc:null,rc:ik,dc:function(e,t){return gc(n,"enter",e,t)}},{sc:rk,rc:ik,dc:function(e,t){return gc(n,"enter",e,t)}},{sc:ok,rc:ik,dc:function(e,t){return gc(n,"enter",e,t)}},{sc:ik,rc:rk,dc:function(e,t){return gc(n,"exit",e,t)}},{sc:ik,rc:ok,dc:function(e,t){return gc(n,"exit",e,t)}},{sc:rk,rc:ok,dc:function(e,t){return gc(n,"skip",e,t)}},{sc:ok,rc:rk,dc:function(e,t){return gc(n,"skip",e,t)}}],this.h=new $,this.h.D(this.i,"regionremove",function(e){n.g.delete(e.region)})}function gc(e,t,n,r){t=new Er(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}function yc(e,t,n){var r,i,o,a,s,u,c;return A(function(l){switch(l.g){case 1:var f=new Ie(e).Sa.split("/").pop().split(".");return r=1==f.length?"":f.pop().toLowerCase(),(i=ak[r])?l.return(i):(o=0,a=Or([e],n),p(l,2),a.method="HEAD",d(l,t.request(o,a).promise,4));case 4:s=l.h,i=s.headers["content-type"],y(l,3);break;case 2:if(!(u=v(l))||1002!=u.code&&1001!=u.code){l.u(3);break}return a.method="GET",d(l,t.request(o,a).promise,6);case 6:c=l.h,i=c.headers["content-type"];case 3:return l.return(i?i.toLowerCase().split(";").shift():"")}})}function vc(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(t){return vc(t,e)}).join("");var n=[],r=700<=e.fontWeight,i="italic"==e.fontStyle,o=e.textDecoration.includes("underline");return r&&n.push(["b"]),i&&n.push(["i"]),o&&n.push(["u"]),i=e.color,""==i&&t&&(i=t.color),r="",(i=mc(i))&&(r+="."+i),i=e.backgroundColor,""==i&&t&&(i=t.backgroundColor),(t=mc(i))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(e,t){var n=a(t);return t=n.next().value,n=n.next().value,"<"+t+(void 0===n?"":n)+">"+e+"</"+t+">"},e.payload)}function mc(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(256|parseInt(t[1],10)).toString(16).slice(1)+(256|parseInt(t[2],10)).toString(16).slice(1)+(256|parseInt(t[3],10)).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function bc(e,t){var n=[];e=a(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,s(bc(r.nestedCues,r)));else{var i=r.clone();i.nestedCues=[],i.payload=vc(r,t),n.push(i)}return n}function wc(e,t){this.g=null;for(var n=a(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.mode="disabled",r.label==t&&(this.g=r);this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}function Sc(e){if(e.startTime>=e.endTime)return W("Invalid cue times: "+e.startTime+" - "+e.endTime),null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function _c(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=a(Array.from(e.cues)),i=r.next();!i.done;i=r.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=n}function Tc(){}function kc(){}function Ec(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Ac(t,n,r){var i=this;this.m=!1,this.h=[],this.A=t,this.s=n,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),r&&r.captionsUpdatePeriod||ie("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new qe(function(){i.A.paused||Pc(i)}).Wa(r&&r.captionsUpdatePeriod?r.captionsUpdatePeriod:.25),this.i=new Map,this.j=new $,this.j.D(document,"fullscreenchange",function(){Pc(i,!0)}),this.j.D(this.A,"seeking",function(){Pc(i,!0)}),this.j.D(this.A,"resize",function(){var e=i.A,t=e.videoWidth;e=e.videoHeight,i.l=t&&e?t/e:null}),this.o=null,"ResizeObserver"in e&&(this.o=new ResizeObserver(function(){Pc(i,!0)}),this.o.observe(this.g)),this.B=new Map}function xc(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function Cc(e,t,n,r,i){var o=!1,s=[],u=[];t=a(t);for(var c=t.next();!c.done;c=t.next()){c=c.value,i.push(c);var l=e.i.get(c),f=c.startTime<=r&&c.endTime>r,d=l?l.eh:null;l&&(s.push(l.Se),l.kc&&s.push(l.kc),f||(o=!0,e.i.delete(c),l=null)),f&&(u.push(c),l?xc(e,d)||(o=!0):(Ic(e,c,i),l=e.i.get(c),d=l.eh,o=!0)),0<c.nestedCues.length&&d&&Cc(e,c.nestedCues,d,r,i),i.pop()}if(o){for(r=a(s),i=r.next();!i.done;i=r.next())i=i.value,i.parentElement&&!i.id.includes("shaka-text-region")&&i.parentElement.removeChild(i);for(u.sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),u=a(u),c=u.next();!c.done;c=u.next())r=e.i.get(c.value),r.kc?(r.kc.contains(n)&&r.kc.removeChild(n),n.appendChild(r.kc),r.kc.appendChild(r.Se)):n.appendChild(r.Se)}}function Pc(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||(void 0===t?0:t)){t=a(e.B.values());for(var r=t.next();!r.done;r=t.next())Ec(r.value);Ec(e.g),e.i.clear(),e.B.clear()}e.m&&Cc(e,e.h,e.g,n,[])}}function Ic(e,t,n){var r=1<n.length,i=r?"span":"div";t.lineBreak&&(i="br"),t.rubyTag&&(i=t.rubyTag),r=!r&&0<t.nestedCues.length;var o=document.createElement(i);if("br"!=i&&Mc(e,o,t,n,r),n=null,t.region&&t.region.id){n=t.region,i=e.l===4/3?2.5:1.9;var a=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==X_?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==X_?"%":"px");if(e.B.has(a))n=e.B.get(a);else{var s=document.createElement("span"),u=n.heightUnits==X_?"%":"px",c=n.widthUnits==X_?"%":"px",l=n.viewportAnchorUnits==X_?"%":"px";s.id="shaka-text-region---"+a,s.classList.add("shaka-text-region"),s.style.position="absolute",2===n.heightUnits&&2===n.widthUnits?(s.style.height=5.33*n.height+"%",s.style.width=n.width*i+"%"):(s.style.height=n.height+u,s.style.width=n.width+c),2===n.viewportAnchorUnits?(u=n.viewportAnchorY/75*100,c=n.viewportAnchorX/(e.l===4/3?160:210)*100,u-=n.regionAnchorY*n.height*5.33/100,c-=n.regionAnchorX*n.width*i/100,s.style.top=u+"%",s.style.left=c+"%"):(s.style.top=n.viewportAnchorY-n.regionAnchorY*n.height/100+l,s.style.left=n.viewportAnchorX-n.regionAnchorX*n.width/100+l),s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="center",s.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.B.set(a,s),n=s}}i=o,r&&(i=document.createElement("span"),i.classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,i.style.lineHeight="normal",o.appendChild(i)),e.i.set(t,{Se:o,eh:i,kc:n})}function jc(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==O_?n:"left"===e||"start"===e&&t===U_||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===U_?"line-right":"center"}function Mc(e,t,n,r,i){var o=t.style,a=0==n.nestedCues.length,s=1<r.length;o.whiteSpace="pre-wrap";var u=n.payload.replace(/\s+$/g,function(e){return" ".repeat(e.length)});if(o.webkitTextStrokeColor=n.textStrokeColor,o.webkitTextStrokeWidth=n.textStrokeWidth,o.color=n.color,o.direction=n.direction,o.opacity=n.opacity,o.paddingLeft=Oc(n.linePadding,n,e.s),o.paddingRight=Oc(n.linePadding,n,e.s),o.textCombineUpright=n.textCombineUpright,o.textShadow=n.textShadow,n.backgroundImage)o.backgroundImage="url('"+n.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",o.width="100%",o.height="100%";else{if(n.nestedCues.length)var c=t;else c=document.createElement("span"),t.appendChild(c);n.border&&(c.style.border=n.border),!i&&((t=Rc(r,function(e){return e.backgroundColor}))?c.style.backgroundColor=t:u&&(c.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=Rc(r,function(e){return e.fontFamily}))&&(c.style.fontFamily=t),u&&(c.textContent=u)}s&&!r[r.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",o.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),a||(o.margin="0"),o.fontFamily=n.fontFamily,o.fontWeight=n.fontWeight.toString(),o.fontStyle=n.fontStyle,o.letterSpacing=n.letterSpacing,o.fontSize=Oc(n.fontSize,n,e.s),r=n.line,null!=r&&(a=n.lineInterpretation,a==F_&&(a=1,s=16,e.l&&1>e.l&&(s=32),r=0>r?100+r/s*100:r/s*100),1==a&&(o.position="absolute",n.writingMode==B_?(o.width="100%",n.lineAlign==H_?o.top=r+"%":"end"==n.lineAlign&&(o.bottom=100-r+"%")):"vertical-lr"==n.writingMode?(o.height="100%",n.lineAlign==H_?o.left=r+"%":"end"==n.lineAlign&&(o.right=100-r+"%")):(o.height="100%",n.lineAlign==H_?o.right=r+"%":"end"==n.lineAlign&&(o.left=100-r+"%")))),o.lineHeight=n.lineHeight,null!=n.position&&(n.writingMode==B_?o.paddingLeft=n.position:o.paddingTop=n.position),e=jc(n),"line-left"==e?o.cssFloat="left":"line-right"==e&&(o.cssFloat="right"),o.textAlign=n.textAlign,o.textDecoration=n.textDecoration.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==B_?o.width=n.size+"%":o.height=n.size+"%")}function Oc(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var i=r.value;switch(r.unit){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return e}}function Rc(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||0===r)return r}return null}function Dc(e,t){function n(e){for(var n=e,r=a(t),i=r.next();!i.done;i=r.next())i=i.value,i.end&&i.start<e&&(n+=i.end-i.start);return e=Math.floor(n/3600),r=Math.floor(n/60%60),i=Math.floor(n%60),n=Math.floor(1e3*n%1e3),(10>e?"0":"")+e+":"+(10>r?"0":"")+r+":"+(10>i?"0":"")+i+"."+(100>n?10>n?"00":"0":"")+n}var r=bc(e);e="WEBVTT\n\n",r=a(r);for(var i=r.next();!i.done;i=r.next())i=i.value,e+=n(i.startTime)+" --\x3e "+n(i.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case R_:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(i)+"\n",e+=i.payload+"\n\n";return e}function Lc(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}function Nc(e){e.i=!1,e.l=!0,e.j=!1}function Uc(e,t,n){try{if(!e.g.enabled)return t;var r=Bc(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var i=uk;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":i=lk;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":i=sk;break e}i=void 0}r.ot=i,r.su=!0;var o=Gc(r);return Xc(t,o)}catch(e){return H("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}function Bc(t){return t.g.sessionId||(t.g.sessionId=e.crypto.randomUUID()),{v:1,sf:t.m,sid:t.g.sessionId,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function Fc(e,t,n){n=void 0===n?{}:n;var r=void 0===r?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,Bc(e)),n.pr=e.h.bb();var i=n.ot===ck||n.ot===lk;if(e.j&&i&&(n.bs=!0,n.su=!0,e.j=!1),null==n.su&&(n.su=e.l),e=Hc(e,n),r)r=zc(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var o=Gc(e);o&&(t.uris=t.uris.map(function(e){return Xc(e,o)}))}}}function Hc(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(e,r){return n.includes(r)&&(e[r]=t[r]),e},{}):t}function Vc(e){if(0===e.type)return fk;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?lk:ck;if("audio"==t)return uk;if("text"==t)return"application/mp4"===e.mimeType?hk:dk}}function Wc(e,t){if(t=e.h.sb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):NaN}function Kc(e,t){if(t=e.h.sb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):0}function qc(e,t){var n=e.h.cc();if(!n.length)return NaN;e=n[0],n=a(n);for(var r=n.next();!r.done;r=n.next())r=r.value,"variant"===r.type&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case ck:return e.videoBandwidth||NaN;case uk:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Gc(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}var r=[],i={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},o=Object.keys(e||{}).sort();o=a(o);for(var s=o.next();!s.done;s=o.next()){s=s.value;var u=e[s];if(function(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}(u)&&("v"!==s||1!==u)&&("pr"!=s||1!==u)){var c=i[s];c&&(u=c(u)),c=typeof u;var l=void 0;l="string"===c&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(u):"boolean"===c?s:"symbol"===c?s+"="+u.description:s+"="+u,r.push(l)}}return r.join(",")}function zc(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=a(t);for(var s=t.next();!s.done;s=t.next())s=s.value,i[null!=o[s]?o[s]:1][s]=e[s];for(e=0;e<i.length;e++)(o=Gc(i[e]))&&(n["CMCD-"+r[e]]=o);return n}function Xc(e,t){return!t||e.includes("offline:")?e:(e=new Ie(e),e.g.set("CMCD",t),e.toString())}function Yc(e){this.h=e,this.g=null}function Jc(e){return!e||"false"!==e.toLowerCase()&&(/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}function $c(){this.g=null,this.h=[]}function Qc(e,t){return A(function(n){if(1==n.g)return z(t+" has requested mutex"),e.g?d(n,new Promise(function(t){return e.h.push(t)}),2):n.u(2);e.g=t,z(t+" has acquired mutex"),h(n)})}function Zc(t,n){xr.call(this);var r=this;this.fh=null,this.l=bk,this.ee=this.h=null,this.da=!1,this.te=new $,this.jd=new $,this.m=new $,this.La=new $,this.hd=new $,this.C=this.F=this.s=this.G=null,this.ve=0,this.W=new $c,this.fa=this.Gf=this.$=this.i=this.Za=this.J=this.j=this.qb=this.K=this.gh=this.aa=this.N=this.fd=this.L=this.he=this.I=this.ib=null,this.hb=!1,this.wa=this.o=null,this.bg=1e9,this.xd=[],this.T=NaN,this.g=Ul(this),this.ba={width:1/0,height:1/0},this.de=new vo(this.g,this.ba,null),this.Lf=[],this.A=null,this.Ka=new tr(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,this.g.preferredAudioChannelConfig,this.g.preferredAudioAccessibilityPurpose),this.Ya=this.g.preferredTextLanguage,this.td=this.g.preferredTextRole,this.qd=this.g.preferForcedSubs,this.kd=[],n&&n(this),this.N=xl(this),this.aa=new Yc(this.g.cmsd),this.G=Sl(this),this.G.Sf(this.g.streaming.forceHTTP),this.G.Tf(this.g.streaming.forceHTTPS),this.fg=this.qa=this.B=null,this.eg=new qe(function(){return A(function(e){return 1==e.g?r.qa?d(e,r.wc(r.fg,!0),3):e.u(0):4!=e.g?d(e,r.load(r.qa),4):(r.fg.play(),r.qa=null,void h(e))})}),kk&&(this.B=kk(),this.B.configure(this.g.ads),this.hd.D(this.B,"ad-started",function(e){var t,n,i;return A(function(o){if(1==o.g)return r.g.ads.supportsMultipleMediaElements?o.return():(t=e.originalEvent)?(n=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,t.type!=n?o.return():(r.eg.stop(),r.qa?o.u(0):(r.fg=r.h,i=r,d(o,r.pg(!0),3)))):o.return();i.qa=o.h,h(o)})}),this.hd.D(this.B,"ad-stopped",function(e){r.g.ads.supportsMultipleMediaElements||(e=e.originalEvent)&&e.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&r.eg.X(.1)})),this.te.D(e,"online",function(){of(r),r.Kf()}),this.ne=new qe(function(){return Xl(r)}),this.ra=null,t&&(ie("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.wc(t,!0))}function el(e){null!=e.K&&(wa(e.K),e.K.release(),e.K=null)}function tl(e,t){t.lcevc.enabled?(el(e),null==e.K&&(e.K=new ba(e.h,e.gh,t.lcevc),e.F&&(e.F.T=e.K))):el(e)}function nl(e,t){return new Er(e,t)}function rl(e,t){e.dispatchEvent(nl("onstatechange",(new Map).set("state",t)))}function il(e,t){var n;return A(function(r){return 1==r.g?(n=++e.ve,d(r,Qc(e.W,t),2)):n!=e.ve?(e.W.release(),r.return(!0)):r.return(!1)})}function ol(e){for(var t=a(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(e){return e.audio})}function al(e){var t,n,r;return A(function(i){if(1==i.g)return t=null,e.i&&e.J&&e.Za&&e.$?(n=e.h.currentTime,e.U()&&(n=null),r=Date.now()/1e3,d(i,ul(e,e.$,n,e.Gf,r,!0,!1,!1),3)):i.u(2);if(2!=i.g){var o=t=i.h,a=e.J,s=e.Za;o.h=e.i,o.j=a,o.C=s,o=t,a=e.wa,o.i=e.o,o.A=a,t.o=e.Ka,t.start(),e.i=null,e.J=null,e.Za=null,e.o=null,e.wa=null}return i.return(t)})}function sl(e,t,n,r,i){i=void 0!==i&&i;var o,a,s,u;return A(function(c){return 1==c.g?(o=Date.now()/1e3,r?c.u(2):d(c,cl(e,t),3)):(2!=c.g&&(r=c.h),(a=ll(e,r))?c.return(null):(s=!1,u=!0,i&&(e.o&&e.wa==e.g.abrFactory&&(u=!1),e.h&&"AUDIO"===e.h.nodeName&&(s=!0)),c.return(ul(e,t,n,r||null,o,!i,s,u))))})}function ul(e,t,n,r,i,o,s,u){o=void 0===o||o,s=void 0!==s&&s,u=void 0===u||u;var c,l,f,p,g,y,v,m,b,w,S,_,T,k,E;return A(function(x){return 1==x.g?(c=null,l=hn(e.g),s&&(l.manifest.disableVideo=!0),f=function(){return c.N&&c.s?null:c},p=function(){return f()?f().getConfiguration():e.g},g=function(t,n){f()?c.configure(t,n):e.configure(t,n)},1/0!=e.ba.width||1/0!=e.ba.height?x.u(2):d(x,ht(),3)):(2!=x.g&&(y=x.h,e.ba.width=y.width,e.ba.height=y.height),v=new vo(l,e.ba,null),m={networkingEngine:e.G,filter:function(e){var t,n;return A(function(r){return 1==r.g?d(r,mo(v,e),2):4!=r.g?(t=r.h)?(n=nl("trackschanged"),d(r,Promise.resolve(),4)):r.u(0):(c.dispatchEvent(n),void h(r))})},makeTextStreamsForClosedCaptions:function(t){return Bl(e,t)},onTimelineRegionAdded:function(e){var t=c.F;e:{for(var n=a(t.g),r=n.next();!r.done;r=n.next())if(r=r.value,r.schemeIdUri==e.schemeIdUri&&r.id==e.id&&r.startTime==e.startTime&&r.endTime==e.endTime){n=r;break e}n=null}null==n&&(t.g.add(e),e=new Er("regionadd",new Map([["region",e]])),t.dispatchEvent(e))},onEvent:function(e){return c.dispatchEvent(e)},onError:function(e){return c.onError(e)},isLowLatencyMode:function(){return p().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return p().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){g("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&c.N&&e.j.updateDuration()},newDrmInfo:function(e){var t=c.l,n=t?t.g:null;n&&t.A&&wo(v,n.keySystem,e)},onManifestUpdated:function(){var t=(new Map).set("isLive",e.U());c.dispatchEvent(nl("manifestupdated",t)),ec(c,!1,function(){e.B&&e.B.onManifestUpdated(e.U())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()}},b=new Ys(function(){return e.Nb()}),b.addEventListener("regionadd",function(t){var n=t.region;sf(e,"timelineregionadded",n,c),ec(c,!1,function(){e.B&&e.B.onDashTimedMetadata(n)})}),w=null,l.streaming.observeQualityChanges&&(w=new Js(function(){return e.sb()}),w.addEventListener("qualitychange",function(t){var n=t.quality;t=t.position,n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t),e.dispatchEvent(nl("mediaqualitychanged",n))})),S=!0,_={Db:e.G,onError:function(e){return c.onError(e)},qe:function(t){ec(c,!0,function(){var n=t,r=nl("keystatuschanged");e.dispatchEvent(r);var i=Object.keys(n);0==i.length&&W("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),1==i.length&&""==i[0]&&(i=["00"],n={"00":n[""]}),(r=1==i.length&&"00"==i[0])&&W("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var o=!1;if(i.length){i=a(e.i.variants);for(var s=i.next();!s.done;s=i.next()){s=s.value;var u=[];s.audio&&u.push(s.audio),s.video&&u.push(s.video),u=a(u);for(var c=u.next();!c.done;c=u.next()){var l=c.value;if(c=s.allowedByKeySystem,l.keyIds.size){s.allowedByKeySystem=!0,l=a(l.keyIds);for(var f=l.next();!f.done;f=l.next())f=f.value,((f=n[r?"00":f])||e.s.F)&&(s.allowedByKeySystem=s.allowedByKeySystem&&!!f&&!VT.includes(f))}c!=s.allowedByKeySystem&&(o=!0)}}}o&&(Zl(e),!Gl(e))||(n=e.j.j)&&!n.allowedByKeySystem&&(q("Choosing new streams after key status changed"),Yl(e))})},onExpirationUpdated:function(e,t){var n=nl("expirationupdated");c.dispatchEvent(n),(n=c.j)&&n.onExpirationUpdated&&n.onExpirationUpdated(e,t)},onEvent:function(t){c.dispatchEvent(t),"drmsessionupdate"==t.type&&S&&(S=!1,t=Date.now()/1e3-c.wa,(e.A||c.getStats()).j=t,e.K&&wa(e.K))}},T=Sl(e,f),Mr(e.G,T),k=function(){return e.xc(_)},E={config:l,ni:m,xi:b,wi:w,xc:k,mi:v,networkingEngine:T,ph:o,oh:u},c=new Zu(t,r,i,n,E),e.Lf.push(c),x.return(c))})}function cl(e,t){var n,r;return A(function(i){return 1==i.g?(n=e.g.manifest.retryParameters,d(i,yc(t,e.G,n),2)):(r=i.h,"application/x-mpegurl"==r&&rt()&&(r="application/vnd.apple.mpegurl"),i.return(r))})}function ll(e,t){if(!Ge())return!0;if(t){if(""==(e.h||ft()).canPlayType(t))return!1;if(!(Ge()&&t in WT))return!0;if(qt(t)){if(e.g.streaming.preferNativeHls)return!0;if(rt()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"]))return e.g.streaming.useNativeHlsForFairPlay;if(rt())return e.g.streaming.useNativeHlsOnSafari}}return!1}function fl(e){var t,n,r,i,o;return A(function(a){if(1==a.g)return rl(e,"media-source"),t=e.g.textDisplayFactory,n=t(),n.configure?n.configure(e.g.textDisplayer):ie("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.Yf=t,r=Al(e.h,n,{Ih:function(){return e.keySystem()},re:function(t,n,r){ml(e,t,n,r)}},e.K),r.configure(e.g.mediaSource),i=e.g.manifest,o=i.segmentRelativeVttTiming,r.ba=o,d(a,r.L,2);e.F=r,h(a)})}function dl(e,t,n,r){var i,o,s,u,c,l,f,p,g,y,v,m,b,w,S,_,T,k,E,x,C,P,I;return A(function(j){switch(j.g){case 1:for(rl(e,"load"),i=e.h,e.I=new As({Zd:function(){return i.playbackRate},Xb:function(){return i.defaultPlaybackRate},Vf:function(e){i.playbackRate=e},Hg:function(e){i.currentTime+=e}}),o=function(){return Wl(e)},s=function(){return Vl(e)},e.m.D(i,"playing",o),e.m.D(i,"pause",o),e.m.D(i,"ended",o),e.m.D(i,"ratechange",s),tl(e,e.g),e.Ya=e.g.preferredTextLanguage,e.td=e.g.preferredTextRole,e.qd=e.g.preferForcedSubs,cf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(t,n,r){n=void 0!==n&&n,r=void 0===r?0:r,q("switch_"),e.i&&e.j&&t!=e.j.j&&Jl(e,t,!0,n,r)}),e.o.setMediaElement(i),e.o.setCmsdManager(e.aa),e.j=Cl(e),e.j.configure(e.g.streaming),e.l=wk,i.textTracks&&e.m.D(i.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"chapters":wl(e,t)}}),e.dispatchEvent(nl("streaming")),u=n,(c=e.j.j)||u||(u=zl(e,!0)),l=[],f=c||u,p=a([f.video,f.audio]),g=p.next();!g.done;g=p.next())(y=g.value)&&!y.segmentIndex&&l.push(y.createSegmentIndex());if(!(0<l.length)){j.u(2);break}return d(j,Promise.all(l),2);case 2:if(e.J&&e.J.onInitialVariantChosen&&e.J.onInitialVariantChosen(f),cf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),ru(e.j,e.g.playRangeStart,e.g.playRangeEnd),v=function(t){e.C=_l(e,t),e.ib=Tl(e,t),kl(e,i,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||v(e.fa),c){j.u(4);break}if(!e.g.streaming.startAtSegmentBoundary){j.u(5);break}return m=e.i.presentationTimeline,b=e.fa||e.h.currentTime,w=m.$b(),S=m.ub(),b<w?b=w:b>S&&(b=S),d(j,Fl(u,b),6);case 6:_=j.h,v(_);case 5:Jl(e,u,!0,!1,0);case 4:return e.C.Ke(),T=e.Cc().find(function(e){return e.active}),T||((k=Wn(e.i.textStreams,e.Ya,e.td,e.qd)[0]||null)&&Rs(e.A.h,k,!0),u&&(k?(u.audio&&Ql(e,u.audio,k)&&(e.da=!0),e.da&&e.F.C.setTextVisibility(!0),nf(e)):e.da=!1),k&&(e.g.streaming.alwaysStreamText||e.qf())&&uu(e.j,k)),d(j,e.j.start(r),7);case 7:e.g.abr.enabled&&(e.o.enable(),rf(e)),Zl(e),Gl(e),E=e.i.variants.some(function(e){return e.primary}),e.g.preferredAudioLanguage||E||W("No preferred audio language set.  We have chosen an arbitrary language initially"),((x=e.U())&&(e.g.streaming.liveSync||e.i.serviceDescription||e.g.streaming.liveSyncPanicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(C=function(){return Kl(e)},e.m.D(i,"timeupdate",C)),x||(P=function(){return ql(e)},e.m.D(i,"timeupdate",P),ql(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(I=function(){var t,n;return A(function(r){if(1==r.g)return t=e.h.duration-e.h.currentTime,!isNaN(t)&&t<=e.g.streaming.preloadNextUrlWindow?(e.m.Hb(i,"timeupdate",I),n=e,d(r,e.preload(e.i.nextUrl),4)):r.u(0);n.ra=r.h,h(r)})},e.m.D(i,"timeupdate",I)),e.m.D(i,"ended",function(){e.load(e.ra||e.i.nextUrl)}))),e.B&&e.B.onManifestUpdated(x),e.hb=!0,e.m.ta(i,"loadedmetadata",function(){e.A.m=Date.now()/1e3-t}),h(j)}})}function hl(e,t){var n,r,i,o,a;return A(function(s){return 1==s.g?(n=pT,r=Date.now()/1e3,i=!0,e.s=e.xc({Db:e.G,onError:function(t){af(e,t)},qe:function(){},onExpirationUpdated:function(){var t=nl("expirationupdated");e.dispatchEvent(t)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&i&&(i=!1,e.A.j=Date.now()/1e3-r)}}),e.s.configure(e.g.drm),e.s.xe(e.fh),o={id:0,language:"und",disabledUntilTime:0,primary:!1,label:null,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},a={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Wt(t):"",codecs:t?Kt(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ga,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},a.fullMimeTypes.add(Lt(a.mimeType,a.codecs)),t.startsWith("audio/")?(a.type=n.V,o.audio=a):o.video=a,e.s.ba=!0,d(s,Ni(e.s,[o],[]),2)):d(s,e.s.wc(e.h),0)})}function pl(e,t,n){var r,i,o,a,s,u,c,l,f,p,g;return A(function(y){if(1==y.g)return rl(e,"src-equals"),r=e.h,e.C=new ys(r),i=!1,e.kd.push(function(){i=!0}),null!=e.fa&&e.C.Le(e.fa),e.I=new As({Zd:function(){return r.playbackRate},Xb:function(){return r.defaultPlaybackRate},Vf:function(e){r.playbackRate=e},Hg:function(e){r.currentTime+=e}}),o=e.g.streaming.rebufferingGoal,kl(e,r,o),a=function(){return Wl(e)},s=function(){return Vl(e)},e.m.D(r,"playing",a),e.m.D(r,"pause",a),e.m.D(r,"ended",a),e.m.D(r,"ratechange",s),"none"!=r.preload&&e.m.ta(r,"loadedmetadata",function(){e.A.m=Date.now()/1e3-t}),r.audioTracks&&(e.m.D(r.audioTracks,"addtrack",function(){return Zl(e)}),e.m.D(r.audioTracks,"removetrack",function(){return Zl(e)}),e.m.D(r.audioTracks,"change",function(){return Zl(e)})),r.textTracks&&(e.m.D(r.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":vl(e,t);break;case"chapters":wl(e,t);break;default:Zl(e)}}),e.m.D(r.textTracks,"removetrack",function(){return Zl(e)}),e.m.D(r.textTracks,"change",function(){return Zl(e)})),r.src=Uc(e.N,e.$,n),(Je()||Ze())&&r.load(),"none"!=r.preload&&!r.autoplay&&qt(n)&&ut()&&r.load(),e.l=Sk,e.dispatchEvent(nl("streaming")),u=new vr,us(r,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.Ke(),u.resolve()}),us(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var t;return A(function(n){return 1==n.g?(gl(e),t=jl(e),t.find(function(e){return"disabled"!=e.mode})?(0<t.length&&(e.da=!0),n.u(2)):d(n,new Promise(function(t){e.m.ta(r.textTracks,"change",t),new qe(t).X(1)}),2)):i?n.return():(yl(e),void h(n))})}),r.error?u.reject(uf(e)):"none"==r.preload&&(F('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),u.resolve()),e.m.ta(r,"error",function(){u.reject(uf(e))}),c=new Promise(function(t,n){new qe(n).X(e.g.streaming.loadTimeout)}),d(y,Promise.race([u,c]),2);((l=e.U())&&(e.g.streaming.liveSync||e.g.streaming.liveSyncPanicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(f=function(){return Kl(e)},e.m.D(r,"timeupdate",f)),l||(p=function(){return ql(e)},e.m.D(r,"timeupdate",p),ql(e)),e.B&&(e.B.onManifestUpdated(l),l&&(g=e.Nb().end,e.m.D(r,"progress",function(){var t=e.Nb().end;g!=t&&(e.B.onManifestUpdated(e.U()),g=t)}))),e.hb=!0,h(y)})}function gl(e){var t=e.g.preferredAudioLanguage;""!=t&&e.Pg(t,e.g.preferredVariantRole)}function yl(e){var t=e.g.preferredTextLanguage;""!=t&&e.Of(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function vl(e,t){if("metadata"==t.kind){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues)for(var n=a(t.activeCues),r=n.next();!r.done;r=n.next())r=r.value,bl(e,r.startTime,r.endTime,r.type,r.value),e.B&&e.B.onCueMetadataChange(r.value)});var n=new qe(function(){var t=Ml(e);t=a(t);for(var n=t.next();!n.done;n=t.next())n.value.mode="hidden"}).oc().X(.5);e.kd.push(function(){n.stop()})}}function ml(e,t,n,r){t=a(t);for(var i=t.next();!i.done;i=t.next())if(i=i.value,i.data&&i.cueTime&&i.frames){var o=i.cueTime+n,s=r;s&&o>s&&(s=o);for(var u=a(i.frames),c=u.next();!c.done;c=u.next())bl(e,o,s,"org.id3",c.value);e.B&&e.B.onHlsTimedMetadata(i,o)}}function bl(e,t,n,r,i){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",i),e.dispatchEvent(nl("metadata",t))}function wl(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new qe(function(){t.mode="hidden"}).oc().X(.5);e.kd.push(function(){n.stop()})}}function Sl(e,t){function n(n){t()?t().dispatchEvent(n):e.dispatchEvent(n)}function r(e){t()?ec(t(),!0,e):e()}return t||(t=function(){return null}),new Ir(function(n,r,i,o){var a=t()?t().i:e.o;a&&a.segmentDownloaded(n,r,i,o)},function(t,i,o){i=(new Map).set("headers",t).set("request",i).set("requestType",o),n(nl("downloadheadersreceived",i)),r(function(){if(e.aa){var n=e.aa;if(n.h.enabled){var r=t["cmsd-static"];if(r)try{var i=new Map,o=r.split(",");for(r=0;r<o.length;r++){var a=o[r].split("=");i.set(a[0],Jc(a[1]))}}catch(e){W("Failed to parse CMSD-Static response header value:",e)}if(i=t["cmsd-dynamic"]){try{var s=new Map,u=i.split(";");for(i=1;i<u.length;i++){var c=u[i].split("=");s.set(c[0],Jc(c[1]))}var l=s}catch(e){W("Failed to parse CMSD-Dynamic response header value:",e),l=null}l&&(n.g=l)}}}})},function(e,t,r,i){e=(new Map).set("request",e).set("error",t).set("httpResponseCode",r).set("aborted",i),n(nl("downloadfailed",e))},function(t,n,i){r(function(){var r=e.N,o=i;if(o=void 0===o?{}:o,r.g.enabled)if("HEAD"===n.method)Fc(r,n);else switch(t){case 0:try{if(r.g.enabled){if(o.type){e:{switch(o.type){case 4:var a="d";break e;case 3:case 2:a="h";break e;case 5:a="s";break e}a=void 0}r.m=a}Fc(r,n,{ot:sk,su:!r.i})}}catch(e){H("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}break;case PT:try{if(r.g.enabled){var s=o.segment;a=0,s&&(a=s.endTime-s.startTime);var u={d:1e3*a,st:r.h.U()?"l":"v"};u.ot=Vc(o);var c=u.ot===ck||u.ot===uk||u.ot===lk||u.ot===hk,l=o.stream;if(l){var f=r.h.bb();if(c&&(u.bl=Wc(r,l.type),u.ot!==hk)){var d=Kc(r,l.type);u.dl=f?d/Math.abs(f):d}if(l.bandwidth&&(u.br=l.bandwidth/1e3),l.segmentIndex&&s){var h=l.segmentIndex.Ab(s.endTime,!0,0>f);if(h){var p=h.next().value;if(p&&p!=s){if(!_e(s.M(),p.M())){var g=p.M()[0],y=n.uris[0],v=new URL(g),m=new URL(y);if(v.origin!==m.origin)var b=g;else{for(var w=v.pathname.split("/").slice(1),S=m.pathname.split("/").slice(1,-1);w[0]===S[0];)w.shift(),S.shift();for(;S.length;)S.shift(),w.unshift("..");b=w.join("/")}u.nor=b}if((p.Ca||p.ma)&&(s.Ca!=p.Ca||s.ma!=p.ma)){var _=p.Ca+"-";p.ma&&(_+=p.ma),u.nrr=_}}}var T=r.h.bb()||1,k=Kc(r,l.type)||500,E=l.bandwidth,A=E?E*(s.endTime-s.startTime)/1e3/(k/T/1e3)*r.g.rtpSafetyFactor:NaN;isNaN(A)||(u.rtp=A)}}c&&u.ot!==hk&&(u.tb=qc(r,u.ot)/1e3),Fc(r,n,u)}}catch(e){H("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}break;case 2:case 5:case 6:Fc(r,n,{ot:"k"});break;case 4:Fc(r,n,{ot:"o"})}})},function(n,r,i,o){(n=t()?t().j:e.J)&&n.banLocation&&n.banLocation(o)},function(n,r){r.data&&(n=r.data.byteLength,r=t()?t().getStats():e.A)&&(r.Rd=isNaN(r.Rd)?n:r.Rd+n)})}function _l(e,t){return new vs(e.h,e.i,e.g.streaming,t,function(){e.ib&&Ps(e.ib,!0),e.j&&e.j.Ed(),e.L&&El(e)},function(t){return e.dispatchEvent(t)})}function Tl(e,t){t=new pc(e.fd,e.U()||0<t),t.addEventListener("enter",function(t){sf(e,"timelineregionenter",t.region)}),t.addEventListener("exit",function(t){sf(e,"timelineregionexit",t.region)}),t.addEventListener("skip",function(t){var n=t.region;t.seeking||(sf(e,"timelineregionenter",n),sf(e,"timelineregionexit",n))});var n=new Cs(e.h);return n.g.add(t),e.qb&&n.g.add(e.qb),n}function kl(e,t,n){e.L=new dr,e.L.g=AT,hr(e.L,n,Math.min(.5,n/2)),Hl(e),e.he=new qe(function(){El(e)}).Wa(.25),e.m.D(t,"waiting",function(){return El(e)}),e.m.D(t,"stalled",function(){return El(e)}),e.m.D(t,"canplaythrough",function(){return El(e)}),e.m.D(t,"progress",function(){return El(e)})}function El(e){switch(e.l){case Sk:if(e.h.ended)var t=!0;else{var n=Mo(e.h.buffered);t=null!=n&&n>=e.h.duration-1}break;case wk:e:if(e.h.ended||Ca(e.F))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.Mb();var r=Mo(e.h.buffered);if(null!=r&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=Ro(e.h.buffered,e.h.currentTime),n=e.L;var i=t,o=n.i.get(n.g);t=n.g,r=i||r>=o?xT:AT,n.g=r,(t=t!=r)&&r===xT&&(n.h=Date.now()),t&&Hl(e)}function Al(e,t,n,r){return new _a(e,t,n,r)}function xl(e){return new Lc({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},sb:function(){return e.sb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},bb:function(){return e.bb()},Zb:function(){return e.Zb()},cc:function(){return e.cc()},U:function(){return e.U()}},e.g.cmcd)}function Cl(e){return new tu(e.i,{Yd:function(){return e.C?e.C.Qd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},bb:function(){return e.bb()},Z:e.F,Db:e.G,onError:function(t){return af(e,t)},onEvent:function(t){return e.dispatchEvent(t)},ti:function(){e.J&&e.J.update&&e.J.update()},Cf:function(t,n){var r=t.startTime,i=t.endTime,o=n.type,a=n.codecs.includes(",");if(e.C){e.C.Ig();var s=Pa(e.F,o);!e.U()&&e.h.paused&&null!=s&&0<s&&e.C.Qd()<s&&e.C.Le(s)}El(e),r=(new Map).set("start",r).set("end",i).set("contentType",o).set("isMuxed",a),e.dispatchEvent(nl("segmentappended",r)),e.o&&n.fastSwitching&&t.Bd&&t.fe&&e.o.trySuggestStreams()},si:function(t,n){(n=n.yf)&&e.qb&&Qs(e.qb,n,t)},kg:function(t,n){var r=e.s;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){n=new ri(he(n));var i=0,o=a(n.data);for(t=o.next();!t.done;t=o.next())i+=t.value.length;if(0==i)r=Promise.resolve();else{for(i=new Uint8Array(i),o=0,n=a(n.data),t=n.next();!t.done;t=n.next())t=t.value,i.set(t,o),o+=t.length;qi(r,"cenc",i),r=r.l}}else r=Promise.resolve();return r},re:function(t,n,r){ml(e,t,n,r)},Xd:function(t,n){return e.Xd(t,n)}})}function Pl(e){if(e.de=new vo(e.g,e.ba,e.s),e.J){var t=hn(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(t.disableVideo=!0),e.J.configure(t)}if(e.s&&e.s.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.l!=mk&&bo(e.de,e.i)&&Zl(e)}catch(t){af(e,t)}e.o&&Gl(e),!(t=e.j.j)||t.allowedByApplication&&t.allowedByKeySystem||(q("Choosing new variant after changing configuration"),Yl(e))}if(e.G&&(e.G.Sf(e.g.streaming.forceHTTP),e.G.Tf(e.g.streaming.forceHTTPS)),e.F)if(e.F.configure(e.g.mediaSource),e.F.ba=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.Yf!=t){var n=t();n.configure?n.configure(e.g.textDisplayer):ie("Text displayer w/ configure",'Text displayer should have a "configure" method!');var r=e.F,i=r.C;r.C=n,i&&(n.setTextVisibility(i.isTextVisible()),i.destroy()),r.g&&(r.g.j=n),e.Yf=t,e.j&&(t=e.j,(n=t.i.get(hT))&&cu(t,n.stream,!0,0,!0))}else t=e.F.C,t.configure&&t.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),rf(e)),e.L&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),hr(e.L,t,Math.min(.5,t/2))),e.i&&cf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.B&&e.B.configure(e.g.ads),e.N&&e.N.configure(e.g.cmcd),e.aa&&e.aa.configure(e.g.cmsd)}function Il(e){return e?(e=/(\d+)x(\d+)/.exec(e),e?{Ub:parseInt(e[1],10),rows:parseInt(e[2],10)}:(W("Tiles layout does not contain a valid format  (columns x rows)"),null)):null}function jl(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function Ml(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"==e.kind})}function Ol(e){return Array.from(e.h.textTracks).filter(function(e){return"chapters"==e.kind})}function Rl(e,t){var n;return A(function(r){switch(r.g){case 1:return p(r,2),d(r,yc(t,e.G,e.g.streaming.retryParameters),4);case 4:n=r.h,y(r,3);break;case 2:v(r);case 3:if(n)return r.return(n);throw V("The mimeType has not been provided and it could not be deduced from its uri."),new He(1,2,2011,t)}})}function Dl(e,t,n,r,i,o,a){var s,u,c,l;return A(function(f){if(1==f.g)return"text/vtt"!=i||a.length?d(f,Ll(e,t,e.G,e.g.streaming.retryParameters),3):f.u(2);2!=f.g&&(s=f.h,u=Nl(e,s,i,a),c=new Blob([u],{type:"text/vtt"}),t=ek(c),i="text/vtt"),l=document.createElement("track");var h=e.N,p=t;try{if(h.g.enabled){var g=Bc(h);g.ot=dk,g.su=!0;var y=Gc(g),v=Xc(p,y)}else v=p}catch(e){H("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),v=p}return l.src=v,l.label=o,l.kind=r,l.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(l),f.return(l)})}function Ll(e,t,n,r){var i,o,a;return A(function(s){if(1==s.g){i=PT,o=Or([t],r),o.method="GET";var u=e.N;try{u.g.enabled&&Fc(u,o,{ot:dk,su:!0})}catch(e){H("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return d(s,n.request(i,o).promise,2)}return a=s.h,s.return(a.data)})}function Nl(e,t,n,r){var i=bT[n];if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=he(t),t=n.parseMedia(t,e,null),Dc(t,r);throw new He(2,2,2014,n)}function Ul(e){var t=Xu();return t.streaming.failureCallback=function(t){if(e.U()){var n=null;1001==t.code||1002==t.code?(n=1,e.g.streaming.lowLatencyMode&&(n=.1)):1003==t.code&&(n=.1),null!=n&&(t.severity=1,W("Live streaming error.  Retrying automatically..."),e.Kf(n))}},t.textDisplayFactory=function(){if(e.ee){var t=e.getConfiguration();return new Ac(e.h,e.ee,t.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new wc(e.h,"Shaka Player TextTrack"):(W("Text tracks are not supported by the browser, disabling."),new Tc)},t}function Bl(e,t){for(var n=new Set,r=a(t.textStreams),i=r.next();!i.done;i=r.next())i=i.value,"application/cea-608"!=i.mimeType&&"application/cea-708"!=i.mimeType||n.add(i.originalId);for(r=a(t.variants),i=r.next();!i.done;i=r.next())if((i=i.value.video)&&i.closedCaptions)for(var o=a(i.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(s=s.value,!n.has(s)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",c=new Es,l=i.closedCaptions.get(s);u={id:e.bg++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:c,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:hT,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Lt(u,"")])},t.textStreams.push(u),n.add(s)}}function Fl(e,t){var n,r,i,o,a;return A(function(s){return 1==s.g?(n=e.audio,r=e.video,i=function(e,t){var n,r,i;return A(function(o){return 1==o.g?e?d(o,e.createSegmentIndex(),2):o.return(null):(r=(n=e.segmentIndex.Ab(t))?n.next().value:null)?(i=r.startTime,o.return(i)):o.return(null)})},d(s,i(n,t),2)):3!=s.g?(o=s.h,d(s,i(r,t),3)):(a=s.h,null!=a&&null!=o?s.return(Math.max(a,o)):null!=a?s.return(a):null!=o?s.return(o):s.return(t))})}function Hl(e){var t=e.pf();if(z("Player changing buffering state to",t),e.A&&e.L&&e.C){var n=e.I;n.j=t,xs(n),e.N&&(n=e.N,t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t),Wl(e)}t=(new Map).set("buffering",t),e.dispatchEvent(nl("buffering",t))}function Vl(e){var t=e.h.playbackRate;0!=t&&(e.I&&e.I.set(t),t=nl("ratechange"),e.dispatchEvent(t))}function Wl(e){if(e.A&&e.L){var t=e.A.g,n="playing";e.L.g==AT?n="buffering":e.h.paused?n="paused":e.h.ended&&(n="ended");var r=n;if(null==t.g)G("Changing Player state to",r),t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var i=Date.now()/1e3;t.g.duration=i-t.g.timestamp,t.g.state==r?t=!1:(G("Changing Player state to",r),t.h.push(t.g),t.g={timestamp:i,state:r,duration:0},t=!0)}t&&(n=(new Map).set("newstate",n),e.dispatchEvent(nl("statechanged",n)))}}function Kl(e){var t=e.h.playbackRate,n=e.U();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,i=e.ug(),o=e.g.streaming.vodDynamicPlaybackRateBufferRatio;i<=o?t!=r&&(q("Buffer fullness ratio ("+i+") is less than the vodDynamicPlaybackRateBufferRatio ("+o+"). Updating playbackRate to "+r),e.Gd(r)):1==i&&t!==e.I.Xb()&&(q("Buffer is full. Cancel trick play."),e.bd())}if(n&&(i=e.Nb(),Number.isFinite(i.end)&&!(e.h.currentTime<i.start))){if(e.g.streaming.liveSync)var a=e.g.streaming.liveSyncMaxLatency,s=e.g.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(a=e.g.streaming.liveSyncMaxLatency,null!=e.i.serviceDescription.targetLatency?a=e.i.serviceDescription.targetLatency+e.g.streaming.liveSyncTargetLatencyTolerance:null!=e.i.serviceDescription.maxLatency&&(a=e.i.serviceDescription.maxLatency),s=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSyncPlaybackRate);if(e.g.streaming.liveSync)var u=e.g.streaming.liveSyncMinLatency,c=e.g.streaming.liveSyncMinPlaybackRate;else e.i&&e.i.serviceDescription&&(u=e.g.streaming.liveSyncMinLatency,null!=e.i.serviceDescription.targetLatency?u=e.i.serviceDescription.targetLatency-e.g.streaming.liveSyncTargetLatencyTolerance:null!=e.i.serviceDescription.minLatency&&(u=e.i.serviceDescription.minLatency),c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSyncMinPlaybackRate);n=i.end-e.h.currentTime,r=0,e.l==Sk&&(o=e.h.buffered,0<o.length&&(r=o.end(o.length-1),r=Math.max(s,r-i.end))),i=e.g.streaming.liveSyncPanicMode,o=1e3*e.g.streaming.liveSyncPanicThreshold;var l=Date.now()-e.L.h;i&&!c&&(c=e.g.streaming.liveSyncMinPlaybackRate),i&&c&&l<=o?t!=c&&(q("Time since last rebuffer ("+l+"s) is less than the liveSyncPanicThreshold ("+o+"s). Updating playbackRate to "+c),e.Gd(c)):a&&s&&n-r>a?t!=s&&(q("Latency ("+n+"s) is greater than liveSyncMaxLatency ("+a+"s). Updating playbackRate to "+s),e.Gd(s)):u&&c&&n-r<u?t!=c&&(q("Latency ("+n+"s) is smaller than liveSyncMinLatency ("+u+"s). Updating playbackRate to "+c),e.Gd(c)):t!==e.I.Xb()&&e.bd()}}function ql(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.T)?(e.T=n,t=!0):(n=Math.max(e.T,n),e.T!=n&&(e.T=n,t=!0))),t){var r;0==e.T?r=nl("started"):25==e.T?r=nl("firstquartile"):50==e.T?r=nl("midpoint"):75==e.T?r=nl("thirdquartile"):100==e.T&&(r=nl("complete")),r&&e.dispatchEvent(r)}}}function Gl(e){try{So(e.de,e.i)}catch(t){return af(e,t),!1}var t=Vn(e.i.variants);return t=e.Ka.create(t),e.o.setVariants(Array.from(t.values())),!0}function zl(e,t){return t=void 0!==t&&t,Gl(e)?e.o.chooseVariant(t):null}function Xl(e){for(var t=Date.now()/1e3,n=!1,r=a(e.i.variants),i=r.next();!i.done;i=r.next())i=i.value,0<i.disabledUntilTime&&i.disabledUntilTime<=t&&(i.disabledUntilTime=0,n=!0,z("Re-enabled variant with "+function(e){var t="";return e.video&&(t+="video:"+e.video.id),e.audio&&(t=t+(t?"&":"")+"audio:"+e.audio.id),t}(i)));e.i.variants.every(function(e){return 0===e.disabledUntilTime})&&e.ne.stop(),n&&Yl(e,!0,void 0,!1,!1)}function Yl(e,t,n,r,i){t=void 0===t||t,n=void 0===n?0:n,r=void 0!==r&&r,i=void 0===i||i;var o=zl(e);o&&Jl(e,o,i,t,n,r)}function Jl(e,t,n,r,i,o){o=void 0!==o&&o;var a=e.j.j;if(t==a)q("Variant already selected."),r&&su(e.j,t,r,i,!0);else{var s=e.A.h;s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),su(e.j,t,r,i,o,n),r=null,a&&(r=Rn(a)),t=Rn(t),n?(n=(new Map).set("oldTrack",r).set("newTrack",t),e.K&&Sa(e.K,t,e.kf()),n=nl("adaptation",n),lf(e,n)):ef(e,r,t)}}function $l(e,t){var n=Array.from(e.h.audioTracks).find(function(e){return e.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=Bn(n),t=Bn(t),ef(e,n,t))}function Ql(e,t,n){if(0==e.g.autoShowText)return!1;if(1==e.g.autoShowText)return!0;var r=un(e.g.preferredTextLanguage);return n=un(n.language),2==e.g.autoShowText?on(n,r):3==e.g.autoShowText?(e=un(t.language),on(n,r)&&!on(e,n)):(F("Invalid autoShowText setting!"),!1)}function Zl(e){lf(e,nl("trackschanged"))}function ef(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.K&&Sa(e.K,n,e.kf()),n=nl("variantchanged",t),lf(e,n)}function tf(e){lf(e,nl("textchanged"))}function nf(e){lf(e,nl("texttrackvisibility"))}function rf(e){e.g.abr.enabled||of(e),lf(e,nl("abrstatuschanged",(new Map).set("newStatus",e.g.abr.enabled)))}function of(e,t){if(t=void 0===t||t,e.l==wk){z("Restoring all disabled streams..."),e.ne.stop();for(var n=a(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&Gl(e)}}function af(e,t){var n,r,i;return A(function(o){switch(o.g){case 1:if(e.l==mk)return o.return();if(n=!0,!(e.hb&&e.i&&e.j)||3016!=t.code&&3014!=t.code&&3015!=t.code&&3018!=t.code){o.u(2);break}return p(o,3),d(o,Ru(e.j),5);case 5:r=o.h,n=!r,y(o,2);break;case 3:v(o),n=!0;case 2:if(!n)return o.return();2===t.severity&&of(e,!1),i=nl("error",(new Map).set("detail",t)),e.dispatchEvent(i),i.defaultPrevented&&(t.handled=!0),h(o)}})}function sf(e,t,n,r){r=void 0===r?e:r,e=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(nl(t,e))}function uf(e){if(!e.h.error)return null;var t=e.h.error.code;if(1==t)return null;var n=e.h.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new He(2,3,3016,t,n,e.h.error.message)}function cf(e,t,n){0<t&&(e.U()?W("|playRangeStart| has been configured for live content. Ignoring the setting."):e.Yg(t)),t=e.getDuration(),n<t&&(e.U()?W("|playRangeEnd| has been configured for live content. Ignoring the setting."):e.Va(n))}function lf(e,t){A(function(n){if(1==n.g)return d(n,Promise.resolve(),2);e.l!=mk&&e.dispatchEvent(t),h(n)})}function ff(e){var t=new Set;e=a(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(un(n.language)):t.add("und");return t}function df(e){var t=new Map,n=new Map;e=a(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var i="und",o=[];r.language&&(i=un(r.language)),o="variant"==r.type?r.audioRoles:r.roles,o&&o.length||(o=[""]),t.has(i)||t.set(i,new Set),o=a(o);for(var s=o.next();!s.done;s=o.next())s=s.value,t.get(i).add(s),r.label&&(n.has(i)||n.set(i,new Map),n.get(i).set(s,r.label))}var u=[];return t.forEach(function(e,t){e=a(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var i=null;n.has(t)&&n.get(t).has(r)&&(i=n.get(t).get(r)),u.push({language:t,role:r,label:i})}}),u}function hf(){this.h=[],this.j=this.i=this.g=0}function pf(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new $,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}function gf(e,t,n,r,i){var o=this;this.o=e,this.i=t,this.F=!1,this.A=this.s=null,this.G=NaN,this.m=i,this.j=null,this.h=new $,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.o,this.i),this.C.initialize(),this.l=new google.ima.AdsLoader(this.C),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("4.9.11-nmp-8"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){vf(o,e)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){yf(o,e)}),this.h.D(this.i,"ended",function(){o.l.contentComplete()}),this.h.ta(this.i,"play",function(){o.F=!0})}function yf(e,t){W("There was an ad error from the IMA SDK: "+t.getError()),W("Resuming playback."),t=(new Map).set("originalEvent",t),e.m(new Er("ad-error",t)),Sf(e,null),e.m(new Er("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function vf(t,n){if(t.m(new Er("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.G))),t.s.customPlayheadTracker){var r={currentTime:t.i.currentTime};t.g=n.getAdsManager(r,t.B),t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume),t.h.D(t.i,"timeupdate",function(){t.i.duration&&(r.currentTime=t.i.currentTime)}),t.h.D(t.i,"volumechange",function(){t.j&&(t.j.setVolume(t.i.volume),t.i.muted&&t.j.setMuted(!0))})}else t.g=n.getAdsManager(t.i,t.B);t.m(new Er("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){n=[],i=a(i);for(var o=i.next();!o.done;o=i.next())n.push({start:o.value,end:null});t.m(new Er("ad-cue-points-changed",(new Map).set("cuepoints",n)))}bf(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,mf(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.D(t.i,"loadeddata",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,mf(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in e?(t.A=new ResizeObserver(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,mf(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.A.observe(t.i)):t.h.D(document,"fullscreenchange",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,mf(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.F||t.s.skipPlayDetection?t.g.start():t.h.ta(t.i,"play",function(){t.F=!0,t.g.start()})}catch(e){Sf(t,null)}}function mf(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,!!e.webkitSupportsFullscreen&&e.webkitDisplayingFullscreen)}function bf(e){function t(t,n){t=(new Map).set("originalEvent",t),e.m(new Er(n,t))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(t){yf(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){wf(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(t){wf(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){t(e,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(e){t(e,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){t(e,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(e){t(e,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(t){Sf(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(t){Sf(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(e){t(e,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){t(e,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){t(e,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(e){t(e,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(e){t(e,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(e){t(e,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(e){t(e,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){t(e,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(e){t(e,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(e){t(e,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t(e,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){t(e,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(e){t(e,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(e){t(e,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){t(e,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(e){t(e,"ad-interaction")})}function wf(e,t){var n=t.getAd();n?(e.j=new pf(n,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new Er("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):F("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Sf(e,t){e.m(new Er("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function _f(e){this.h=e||"",this.g=0}function Tf(e){kf(e,/[ \t]+/gm)}function kf(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=null==t?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function Ef(e){return e.g==e.h.length?null:(e=kf(e,/[^ \t\n]*/gm))?e[0]:null}function Af(e,t,n,r,i){if(this.h=e,e=this.h.skipOffset)if(null==(e=kf(new _f(e),Ek)))e=null;else{var o=Number(e[2]),a=Number(e[3]);e=59<o||59<a?null:(Number(e[4])||0)/1e3+a+60*o+3600*(Number(e[1])||0)}else e=null;this.j=e,this.g=i,this.i=t,this.l=n,this.o=r,this.m=!1}function xf(e,t,n,r){this.B=e,this.K=t,this.h=n,this.l=null,this.W=NaN,this.i=r,this.J=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.T=!0,this.I="",this.o=new $}function Cf(e,t,n){var r,i,o,a,s,u,c,l,f,g,m;A(function(b){if(1==b.g)return r=Or([t],yr()),r.method="POST",n&&(i=JSON.stringify(n),r.body=mt(i)),o=e.K.request(7,r),p(b,2),d(b,o.promise,4);if(2!=b.g){if(a=b.h,s=gt(a.data),u=JSON.parse(s),!u.manifestUrl||!u.trackingUrl)throw Error("Insufficient data from MediaTailor.");return c=new Ie(t),l=new Ie(u.trackingUrl),e.G=c.resolve(l).toString(),f=Date.now()/1e3,g=f-e.W,e.i(new Er("ads-loaded",(new Map).set("loadTime",g))),m=new Ie(u.manifestUrl),e.l.resolve(c.resolve(m).toString()),e.l=null,y(b,0)}if(v(b),!e.I.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,b.return();W("MediaTailor request returned an error. Falling back to the backup asset uri."),e.l.resolve(e.I),e.l=null,h(b)})}function Pf(e,t,n){var r,i,o,s,u,c,l,f,g,m,b,w,S,_,T;A(function(k){if(1==k.g)return r=Or([t],yr()),i=e.K.request(7,r),p(k,2),d(k,i.promise,4);if(2!=k.g){if(o=k.h,s=[],u=gt(o.data),c=JSON.parse(u),0<c.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(c.avails)){for(e.j=c.avails,l=a(e.j),f=l.next();!f.done;f=l.next())for(g=f.value,m=a(g.nonLinearAdsList),b=m.next();!b.done;b=m.next())for(w=b.value,S=a(w.nonLinearAdList),_=S.next();!_.done;_=S.next())T=_.value,If(e,T);s=e.getCuePoints(),e.i(new Er("ad-cue-points-changed",(new Map).set("cuepoints",s)))}}else e.j.length&&e.i(new Er("ad-cue-points-changed",(new Map).set("cuepoints",s))),Df(e),e.j=[];return n&&(e.J||0<s.length)&&Mf(e),y(k,0)}v(k),h(k)})}function If(e,t){var n,r,i,o,a,s,u,c;A(function(l){return 1==l.g?t.staticResource?(n=jf(t),(r=e.F.get(n))?l.return():(i=Or([t.staticResource],yr()),o=e.K.request(7,i),p(l,2),e.F.set(n,[]),d(l,o.promise,4))):l.return():2!=l.g?(a=l.h,s=gt(a.data),u=JSON.parse(s),c=u.apps,e.F.set(n,c),y(l,0)):(v(l),e.F.delete(n),void h(l))})}function jf(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function Mf(e){Rf(e),e.J||(Of(e),e.o.D(e.h,"seeked",function(){Of(e)}),e.o.D(e.h,"ended",function(){Df(e)})),e.o.D(e.h,"timeupdate",function(){Rf(e)})}function Of(e){var t=e.h.currentTime;if(0!=t&&null==e.A){for(var n,r,i=a(e.j),o=i.next();!o.done;o=i.next()){o=o.value;for(var s=a(o.ads),u=s.next();!u.done;u=s.next())if(u=u.value,r){if(u.startTimeInSeconds<t&&u.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=u,n=o;break}}else u.startTimeInSeconds<t&&(r=u,n=o)}n&&r&&!e.N.includes(r.adId)&&(K("Seeking back to the start of the ad break at "+n.startTimeInSeconds+" and will return to "+t),e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function Rf(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.C,i=r.startTimeInSeconds+.5*r.durationInSeconds,o=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),Nf(e,"firstQuartile")):t>=i&&!e.s.includes("midpoint")?(e.s.push("midpoint"),Nf(e,"midpoint")):t>=o&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),Nf(e,"thirdQuartile")),r=e.g.getRemainingTime(),i=e.g.getDuration(),e.g.canSkipNow()&&0<r&&0<i&&Nf(e,"skipStateChanged"),0<i&&(0>=r||r>i)&&Df(e)}if(!e.g||!e.g.isLinear()){e:for(r=a(e.j),i=r.next();!i.done&&(i=i.value,!e.g||!e.g.isLinear());i=r.next())for(o=0;o<i.ads.length;o++){var s=i.ads[o],u=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&u>t){if(e.N.includes(s.adId)){if(e.h.ended)continue;e.h.currentTime=u;break e}Df(e),e.L=i,e.g=new Af(s,o+1,i.ads.length,!0,e.h),e.C=s,0===o&&Nf(e,"breakStart"),Lf(e);break}}if(!e.g)for(r=a(e.j),i=r.next();!i.done&&(i=i.value,!e.g);i=r.next())for(o=0;o<i.nonLinearAdsList.length;o++)if(s=i.nonLinearAdsList[o],s.nonLinearAdList.length){u=i.startTimeInSeconds;var c=e.F.get(jf(s.nonLinearAdList[0]));if(u<=t&&c&&c.length){Df(e),u=e,c=a(c);for(var l=c.next();!l.done;l=c.next())if(l=l.value,l.data.source.length){var f=document.createElement("img");f.src=l.data.source[0].url,f.style.top=(l.placeholder.top||0)+"%",f.style.height=100-(l.placeholder.top||0)+"%",f.style.left=(l.placeholder.left||0)+"%",f.style.maxWidth=100-(l.placeholder.left||0)+"%",f.style.objectFit="contain",f.style.position="absolute",u.B.appendChild(f)}e.L=i,e.g=new Af(s,o+1,i.ads.length,!1,e.h),e.C=s,0===o&&Nf(e,"breakStart"),Lf(e);break}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function Df(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.J||e.N.push(e.C.adId);var t=e.g.m;(void 0===t?0:t)?Nf(e,"skip"):Nf(e,"complete"),t=a(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.Hb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&Nf(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function Lf(e){var t=!1;e.h.paused?t=!0:(Nf(e,"impression"),Nf(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&Nf(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||Nf(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(Nf(e,"impression"),Nf(e,"start"),t=!1):Nf(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){Nf(e,"pause")}});for(var n=a(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function Nf(e,t){var n=e.C.trackingEvents.find(function(e){return e.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(e){return e.eventType==t})),n){n=a(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&""!=r&&(r=Or([r],yr()),r.method="POST",e.K.request(7,r))}switch(t){case"impression":e.i(new Er("ad-impression"));break;case"start":e.i(new Er("ad-started",(new Map).set("ad",e.g)));break;case"mute":e.i(new Er("ad-muted"));break;case"unmute":e.i(new Er("ad-volume-changed"));break;case"resume":e.i(new Er("ad-resumed"));break;case"pause":e.i(new Er("ad-paused"));break;case"firstQuartile":e.i(new Er("ad-first-quartile"));break;case"midpoint":e.i(new Er("ad-midpoint"));break;case"thirdQuartile":e.i(new Er("ad-third-quartile"));break;case"complete":e.i(new Er("ad-complete")),e.i(new Er("ad-stopped"));break;case"skip":e.i(new Er("ad-skipped")),e.i(new Er("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new Er("ad-skip-state-changed"))}}function Uf(e,t){this.g=e,this.i=null,this.h=t}function Bf(e,t,n,r){var i=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new $,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Er("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){K("Ad SS Loaded"),Ff(i,e)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){K("Ad SS Error"),i.B.length?(W("IMA stream request returned an error. Falling back to the backup asset uri."),i.j.resolve(i.B)):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){K("Ad Break Started")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){K("Ad Started"),e=e.getAd(),i.m=new Uf(e,i.l),i.A&&(i.m.i=i.A),i.i(new Er("ad-started",(new Map).set("ad",i.m))),i.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){K("Ad Break Ended"),i.s.removeAttribute("ad-active");var e=i.l.currentTime;i.o&&i.o>e&&(i.l.currentTime=i.o,i.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){i.A=e.getStreamData().adProgressData,i.m&&(i.m.i=i.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){K("Ad event: First Quartile"),i.i(new Er("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){K("Ad event: Midpoint"),i.i(new Er("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){K("Ad event: Third Quartile"),i.i(new Er("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){K("Ad event: Complete"),i.i(new Er("ad-complete")),i.i(new Er("ad-stopped")),i.s.removeAttribute("ad-active"),i.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){K("Ad event: Skipped"),i.i(new Er("ad-skipped")),i.i(new Er("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){K("Ad event: Cue points changed");var t=e.getStreamData();e=[],t=a(t.cuepoints);for(var n=t.next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});i.C=e,i.i(new Er("ad-cue-points-changed",(new Map).set("cuepoints",e)))})}function Ff(e,t){e.i(new Er("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(K("Seeking back to the start of the ad break at "+n.start+" and will return to "+t),e.o=t,e.l.currentTime=n.start)}})}function Hf(){xr.call(this),this.g=this.h=this.i=null,this.j=new hf,this.m=navigator.language,this.l=null}function Vf(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}function Wf(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Er){var n={};for(r in t)(e=t[r])&&"object"==typeof e?"detail"==r&&(n[r]=e):r in Event||(n[r]=e);return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(e=a(Object.getOwnPropertyNames(t)),n=e.next();!n.done;n=e.next())r.add(n.value);for(e={},r=a(r),n=r.next();!n.done;n=r.next())n=n.value,e[n]=t[n];t={__type__:"Error",contents:e}}else if(t instanceof TimeRanges){for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},t=a(Lo(t)),n=t.next();!n.done;n=t.next())n=n.value,e=n.end,r.start.push(n.start),r.end.push(e);t=r}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}})}function Kf(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=qf(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){e=t.contents,t=Error(e.message);for(n in e)t[n]=e[n];n=t}else n=t;return n})}function qf(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}function Gf(e,t,n,r,i,o,a){var s=this;this.G=e,this.K=a,this.j=new qe(t),this.L=n,this.A=!1,this.s=r,this.F=i,this.N=o,this.h=this.m=!1,this.J="",this.o=null,this.B=function(){return Qf(s)},this.C=function(e,t){switch(e=Kf(t),z("CastSender: message",e),e.type){case"event":var n=e.targetName,r=Ar(e.event);s.s(n,r);break;case"update":n=e.update;for(r in n){e=s.g[r]||{};for(var i in n[r])e[i]=n[r][i]}s.A&&(s.L(),s.A=!1);break;case"asyncComplete":if(r=e.id,i=e.error,e=s.i[r],delete s.i[r],e)if(i){r=new He(i.severity,i.category,i.code);for(n in i)r[n]=i[n];e.reject(r)}else e.resolve()}},this.g={video:{},player:{}},this.I=0,this.i={},this.l=null,Hk.add(this)}function zf(e){e.h&&chrome.cast.requestSession(function(t){return Xf(e,t)},function(t){return Yf(e,t)})}function Xf(e,t){q("CastSender: onSessionInitiated");var n=e.N();Bk=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),Qf(e),ed(e,{type:"init",initState:n,appData:e.o}),e.l.resolve()}function Yf(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new He(2,8,n,t))}function Jf(e,t){q("CastSender: onExistingSessionJoined"),e.l=new vr,e.A=!0,Xf(e,t)}function $f(e){var t=Bk;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function Qf(e){var t=!!Bk&&"connected"==Bk.status;if(q("CastSender: connection status",t),e.h&&!t){e.F();for(var n in e.g)e.g[n]={};Zf(e)}e.h=t,e.J=t?Bk.receiver.friendlyName:"",e.j.oc()}function Zf(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new He(1,7,7e3))}}function ed(e,t){t=Wf(t);var n=Bk;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},V)}catch(r){throw V("Cast session sendMessage threw",r),t=new He(2,8,8005,r),n=new Er("error",(new Map).set("detail",t)),e.s("player",n),e.Ac(),t}}function td(t){if(Fk?e.__onGCastApiAvailable=Fk:delete e.__onGCastApiAvailable,Fk=null,t)for(var n=a(Hk),r=n.next();!r.done;r=n.next())r.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function nd(e,t,n,r){r=void 0!==r&&r,xr.call(this);var i=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new Gf(n,function(){return sd(i)},function(){return ud(i)},function(e,t){return dd(i,e,t)},function(){return cd(i)},function(){return ad(i)},r),rd(this)}function rd(e){e.g.init(),e.m=new $;for(var t=a(Ak),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(t){e.g.Ba()||(t=Ar(t),e.j.dispatchEvent(t))});for(var r in CT)e.m.D(e.h,CT[r],function(t){e.g.Ba()||e.o.dispatchEvent(t)});e.l={},t={};for(var i in e.i)t.Qc=i,Object.defineProperty(e.l,t.Qc,{configurable:!1,enumerable:!0,get:function(t){return function(){return ld(e,t.Qc)}}(t),set:function(t){return function(n){var r=t.Qc;e.g.Ba()?e.g.set("video",r,n):e.i[r]=n}}(t)}),t={Qc:t.Qc};e.s={},od(e,function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return fd(e,t)}})}),id(e),e.j=new xr,e.j.pe=e.l,e.o=new xr,e.o.pe=e.s}function id(e){var t=new Map;od(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function od(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!o.has(e)}var r,i=e.h,o=new Set;for(r in i)n(r)&&(o.add(r),t(r,i[r]));for(e=Object.getPrototypeOf(i),r=Object.getPrototypeOf({});e&&e!=r;){for(var s=a(Object.getOwnPropertyNames(e)),u=s.next();!u.done;u=s.next())u=u.value,n(u)&&(o.add(u),t(u,i[u]));e=Object.getPrototypeOf(e)}}function ad(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Bc(),startTime:null};e.i.pause();for(var n=a(Ck),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=a(Ok),r=n.next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.h[i[0]](),t.player[r]=i}for(n=a(Rk),r=n.next();!r.done;r=n.next())i=r.value,r=i[1],i=e.h[i[0]](),t.playerAfterLoad[r]=i;return t}function sd(e){var t=new Er("caststatuschanged");e.dispatchEvent(t)}function ud(e){var t=new Er(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function cd(e){for(var t=a(Ok),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var i=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var o=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var s;(r=e.g.get("player","getTextTracks")())&&r.length&&(s=r.find(function(e){return e.active}));var u=e.g.get("player","isTextTrackVisible")();i&&(e.i.autoplay=!1,t=e.h.load(i,n));var c={};for(n=a(Ck),r=n.next();!r.done;r=n.next())r=r.value,c[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var t=a(Ck),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=c[n];for(t=a(Rk),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}e.h.Vg(u),s&&e.h.Of(s.language,s.roles,s.forced),e.i.autoplay=o,i&&e.i.play()}},function(t){t=(new Map).set("detail",t),t=new Er("error",t),e.h.dispatchEvent(t)})}function ld(e,t){if("addEventListener"==t)return function(t,n,r){return e.j.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.j.removeEventListener(t,n,r)};if(e.g.Ba()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.Ba()?e.g.get("video",t):(t=e.i[t],"function"==typeof t&&(t=t.bind(e.i)),t)}function fd(e,t){if(e.A.has(t)&&(t=e.A.get(t)),"addEventListener"==t)return function(t,n,r){return e.o.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.o.removeEventListener(t,n,r)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return W("Can't share configuration across a network. Returning copy."),e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return e.g.Ba()&&W("NOTE: getNetworkingEngine() is always local!"),function(){return e.h.Zb()};if("getDrmEngine"==t)return e.g.Ba()&&W("NOTE: getDrmEngine() is always local!"),function(){return e.h.s};if("getAdManager"==t)return e.g.Ba()&&W("NOTE: getAdManager() is always local!"),function(){return e.h.tg()};if("setVideoContainer"==t)return e.g.Ba()&&W("NOTE: setVideoContainer() is always local!"),function(t){return e.h.Zg(t)};if(e.g.Ba()){if("getManifest"==t||"drmInfo"==t)return function(){return F(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return F(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ba()&&0==Object.keys(e.g.g.video).length&&(Ik[t]||jk[t])||!e.g.Ba()?e.h[t].bind(e.h):e.g.get("player",t)}function dd(e,t,n){e.g.Ba()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function hd(e,t,n,r){xr.call(this);var i=this;this.g=e,this.h=t,this.j=new $,this.I={video:e,player:t},this.C=n||function(){},this.J=r||function(e){return e},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.G=new qe(function(){bd(i)}),pd(this)}function pd(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return gd(e)},t.onSenderDisconnected=function(){return gd(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Ed(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),Ed(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(t){return Td(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return _d(e,t)},t.start(),t=a(Ak);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(t){return md(e,"video",t)});for(var r in CT)e.j.D(e.h,CT[r],function(t){return md(e,"player",t)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,yd(e)}),e.j.D(e.g,"playing",function(){e.o=!1,yd(e)}),e.j.D(e.g,"pause",function(){yd(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,yd(e)}),e.j.D(e.g,"ended",function(){new qe(function(){e.g&&e.g.ended&&(e.o=!0,yd(e))}).X(Wk)})}function gd(e){e.m=0,e.A=!0,e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,yd(e)}function yd(e){var t;A(function(n){return 1==n.g?d(n,Promise.resolve(),2):e.h?(t=new Er("caststatuschanged"),e.dispatchEvent(t),wd(e)||Ad(e),void h(n)):n.return()})}function vd(e,t,n){var r,i,o,a,s,u,c,l,f,g;A(function(m){switch(m.g){case 1:for(r in t.player)i=t.player[r],e.h[r](i);return e.C(n),o=e.g.autoplay,t.manifest?(e.g.autoplay=!1,p(m,5),d(m,e.h.load(t.manifest,t.startTime),7)):d(m,Promise.resolve(),3);case 7:y(m,3);break;case 5:return a=v(m),s=(new Map).set("detail",a),u=new Er("error",s),e.h&&e.h.dispatchEvent(u),m.return();case 3:if(!e.h)return m.return();for(c in t.video)l=t.video[c],e.g[c]=l;for(f in t.playerAfterLoad)g=t.playerAfterLoad[f],e.h[f](g);e.g.autoplay=o,t.manifest&&(e.g.play(),Ad(e)),h(m)}})}function md(e,t,n){e.h&&(bd(e),Ed(e,{type:"event",targetName:t,event:n},e.l))}function bd(e){e.G.X(Vk);for(var t={video:{},player:{}},n=a(xk),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.U())for(var i in Mk)0==e.m%Mk[i]&&(t.player[i]=e.h[i]());for(var o in Ik)0==e.m%Ik[o]&&(t.player[o]=e.h[o]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Ed(e,{type:"update",update:t},e.l);for(var s in jk)0==e.m%jk[s]&&(t={player:{}},t.player[s]=e.h[s](),Ed(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),wd(e)}function wd(e){return!(!e.A||!e.g.duration&&!e.h.U())&&(Sd(e),e.A=!1,!0)}function Sd(e,t){var n={contentId:e.h.Bc(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),Ad(e,void 0===t?0:t,n)}function _d(e,t){var n=Kf(t.data);switch(q("CastReceiver: message",n),n.type){case"init":e.m=0,e.B=!1,e.A=!0,vd(e,n.initState,n.appData),bd(e);break;case"appData":e.C(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,"video"==r){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==i){t.setSystemVolumeLevel(n);break}if("muted"==i){t.setSystemVolumeMuted(n);break}}e.I[r][i]=n;break;case"call":r=e.I[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,i=n.methodName,"player"==r&&"load"==i&&(e.m=0,e.B=!1);var o=n.id,a=t.senderId;t=e.I[r],n=t[i].apply(t,n.args),"player"==r&&"load"==i&&(n=n.then(function(){e.A=!0})),n.then(function(){return kd(e,a,o,null)},function(t){return kd(e,a,o,t)})}}function Td(e,t){var n=Kf(t.data);switch(q("CastReceiver: message",n),n.type){case"PLAY":e.g.play(),Ad(e);break;case"PAUSE":e.g.pause(),Ad(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;null!=t&&(e.g.currentTime=Number(t)),r&&"PLAYBACK_START"==r?(e.g.play(),Ad(e)):r&&"PLAYBACK_PAUSE"==r&&(e.g.pause(),Ad(e));break;case"STOP":e.h.pc().then(function(){e.h&&Ad(e)});break;case"GET_STATUS":Sd(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var i=e.g.volume,o=e.g.muted;null!=t&&(e.g.volume=Number(t)),null!=r&&(e.g.muted=r),i==e.g.volume&&o==e.g.muted||Ad(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,i=e.J(t.contentId),o=n.autoplay||!0,e.C(t.customData),o&&(e.g.autoplay=!0),e.h.load(i,r).then(function(){e.h&&Sd(e)}).catch(function(t){var r="LOAD_FAILED";7==t.category&&7e3==t.code&&(r="LOAD_CANCELLED"),Ed(e,{requestId:Number(n.requestId),type:r},e.s)});break;default:W("Unrecognized message type from the generic Chromecast controller!",n.type),Ed(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function kd(e,t,n,r){e.h&&Ed(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function Ed(e,t,n,r){e.F&&(e=Wf(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Ad(e,t,n){n=void 0===n?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?Kk:e.h.pf()?Gk:e.g.paused?zk:qk,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),Ed(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}function xd(e,t,n,r,i){if(r>=i)return null;for(var o=-1,a=-1,s=0;s<n.length;s++)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){o=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){a=s;break}if(-1===o||-1===a)return null;for(var u=s=!1,c="white",l="black",f=Cd(r,i,s,u,c,l);o<=a;o++){for(var d=n[o],h=-1,p=-1,g=0;g<d.length;g++)if(null!=d[g]&&""!==d[g].g.trim()){h=g;break}for(g=d.length-1;0<=g;g--)if(null!=d[g]&&""!==d[g].g.trim()){p=g;break}if(-1===h||-1===p)d=Pd(r,i),e.nestedCues.push(d);else{for(;h<=p;h++)if(g=d[h]){var y=g.l,v=g.i,m=g.j,b=g.h;y==s&&v==u&&m==c&&b==l||(f.payload&&e.nestedCues.push(f),f=Cd(r,i,y,v,m,b),s=y,u=v,c=m,l=b),f.payload+=g.g}else f.payload+=" ";f.payload&&e.nestedCues.push(f),o!==a&&(f=Pd(r,i),e.nestedCues.push(f)),f=Cd(r,i,s,u,c,l)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Cd(e,t,n,r,i,o){return e=new Te(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=i,e.backgroundColor=o,e}function Pd(e,t){return e=new Te(e,t,""),e.lineBreak=!0,e}function Id(e,t,n,r,i){this.g=e,this.l=t,this.i=n,this.h=r,this.j=i}function jd(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Od(this)}function Md(e,t,n){var r="CC"+(1+(e.A<<1|e.s)),i=new Te(t,n,"");i.lineInterpretation=1;var o=nE.get(e.g);return o&&(i.line=o),xd(i,r,e.i,t,n)}function Od(e){Ld(e,0,15),e.g=1}function Rd(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case Xk:r=Qk.has(n)?Qk.get(n):String.fromCharCode(n);break;case Yk:r=Zk.get(n);break;case Jk:e.i[e.g].pop(),r=eE.get(n);break;case $k:e.i[e.g].pop(),r=tE.get(n)}r&&e.i[e.g].push(new Id(r,e.m,e.j,e.o,e.l))}}function Dd(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(e){return e});else for(var i=0;i<r;i++)e.i[t+i]=e.i[n+i].map(function(e){return e})}function Ld(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}function Nd(e,t){this.h=rE,this.o=new jd(e,t),this.i=new jd(e,t),this.g=this.j=new jd(e,t),this.l=0,this.m=null}function Ud(e,t,n){e.g=e.i;var r=e.g,i=null;return e.h!==oE&&e.h!==aE&&(i=Md(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,Ld(n,0,15),n=e.j,n.g=0<n.h?n.h:0,Ld(n,0,15),r.g=15),e.h=oE,r.h=t,i}function Bd(e){e.h=iE,e.g=e.j,e.g.h=0}function Fd(e){H("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=aE}function Hd(e,t){this.J=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.I=0,this.F=fE,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",Vd(this)}function Vd(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Wd())}function Wd(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Kd(e,t){qd(e)&&(e.i[e.h][e.g]=new Id(t,e.C,e.A,e.s,e.B),e.g++)}function qd(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}function Gd(e,t,n){var r=new Te(e.j,t,"");r.textAlign=e.F===cE?"left":e.F===lE?"right":R_;var i=r.region;switch(e.J&&(i.id+="svc"+e.J),i.id+="win"+e.N,i.height=e.o,i.width=e.m,i.heightUnits=2,i.widthUnits=2,i.viewportAnchorX=e.I,i.viewportAnchorY=e.L,i.viewportAnchorUnits=e.K?X_:2,e.G){case dE:i.regionAnchorX=0,i.regionAnchorY=0;break;case hE:i.regionAnchorX=50,i.regionAnchorY=0;break;case pE:i.regionAnchorX=100,i.regionAnchorY=0;break;case gE:i.regionAnchorX=0,i.regionAnchorY=50;break;case yE:i.regionAnchorX=50,i.regionAnchorY=50;break;case vE:i.regionAnchorX=100,i.regionAnchorY=50;break;case mE:i.regionAnchorX=0,i.regionAnchorY=100;break;case bE:i.regionAnchorX=50,i.regionAnchorY=100;break;case wE:i.regionAnchorX=100,i.regionAnchorY=100}return(n=xd(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function zd(){this.i=[],this.h=null,this.g=0}function Xd(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new Yd(e.h)),e.h=null,e.g=0))}function Yd(e){this.g=0,this.h=e}function Jd(e){if(!e.na())throw new He(2,2,3e3);return e.h[e.g++]}function $d(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Qd(e,t,n,r){if(128<=n&&135>=n)r=7&n,e.h[r]&&(e.g=e.h[r]);else{if(136===n){n=Jd(t).value,t=null,n=a(Zd(e,n));for(var i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()&&(t=Gd(i,r,e.i)),Vd(i);return t}if(137===n)for(t=Jd(t).value,t=a(Zd(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(138===n){for(n=Jd(t).value,t=null,n=a(Zd(e,n)),i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()&&(t=Gd(i,r,e.i)),i.l=!1;return t}if(139===n){for(n=Jd(t).value,t=null,n=a(Zd(e,n)),i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()?t=Gd(i,r,e.i):i.j=r,i.l=!i.l;return t}if(140===n)return t=Jd(t).value,eh(e,t,r);if(143===n)return r=eh(e,255,r),th(e),r;if(144===n)t.skip(1),r=Jd(t).value,e.g&&(e.g.A=0<(128&r),e.g.C=0<(64&r));else if(145===n)r=Jd(t).value,n=Jd(t).value,t.skip(1),e.g&&(t=nh((48&n)>>4,(12&n)>>2,3&n),e.g.B=nh((48&r)>>4,(12&r)>>2,3&r),e.g.s=t);else if(146===n)r=Jd(t).value,t=Jd(t).value,e.g&&(e=e.g,e.h=15&r,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),r=Jd(t).value,t.skip(1),e.g&&(e.g.F=3&r);else if(152<=n&&159>=n){if(n=(15&n)-8,!(i=null!==e.h[n])){var o=new Hd(n,e.i);o.j=r,e.h[n]=o}r=Jd(t).value,o=Jd(t).value;var s=Jd(t).value,u=Jd(t).value,c=Jd(t).value;t=Jd(t).value,i&&0==(7&t)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(32&r),t.L=127&o,t.I=s,t.G=(240&u)>>4,t.K=0<(128&o),t.o=1+(15&u),t.m=1+(63&c),e.g=e.h[n]}}}return null}function Zd(e,t){for(var n=[],r=0;8>r;r++)1==(1&t)&&e.h[r]&&n.push(r),t>>=1;return n}function eh(e,t,n){var r=null;t=a(Zd(e,t));for(var i=t.next();!i.done;i=t.next()){i=i.value;var o=e.h[i];o.isVisible()&&(r=Gd(o,n,e.i)),e.h[i]=null}return r}function th(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function nh(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],_E[e<<2|t<<1|n]}function rh(){this.h=[],this.g=[],this.i=new zd,this.l=0,this.m=new Map([["CC1",new Nd(0,0)],["CC2",new Nd(0,1)],["CC3",new Nd(1,0)],["CC4",new Nd(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,ih(this)}function ih(e){q("Resetting CEA decoder"),e.o=0,e.s=0;for(var t=a(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=rE,n.g=n.j,n.m=null,Od(n.i),Od(n.j),Od(n.o);e.B=!0}function oh(e,t){var n=t.type;if(16==(112&t.$a)){var r=t.$a>>3&1;0===n?e.o=r:e.s=r}if(r="CC"+(1+(n<<1|(n?e.s:e.o))),n=e.m.get(r),255===t.$a&&255===t.yb||!t.$a&&!t.yb||!sh(t.$a)||!sh(t.yb))return 45<=++e.l&&ih(e),null;e.l=0,t.$a&=127,t.yb&=127;var i=t.$a;if(1<=i&&15>=i||!t.$a&&!t.yb)return null;if(i=null,16==(112&t.$a))e:{if(e.A.add(r),r=t.$a,e=t.yb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,16==(240&r)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&r)<<1|e>>5&1];var o=(30&e)>>1;r="white",i=!1,7>o?r=uE[o]:7===o&&(i=!0),e=1==(1&e),n.h!==aE&&(o=n.g,n.h===oE&&t!==o.g&&(n=1+t-o.h,Dd(o,n,1+o.g-o.h,o.h),Ld(o,0,n-1),Ld(o,t+1,15-t)),o.g=t,o.m=e,o.j=i,o.l=r,o.o="black")}else if(17==(247&r)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",Rd(n.g,Xk,32),r=!1,t=uE[(14&e)>>1],"white_italics"===t&&(t="white",r=!0),n.g.m=1==(1&e),n.g.j=r,n.g.l=t;else if(16==(247&r)&&32==(240&e)||23==(247&r)&&45==(255&e))t="black",0==(7&r)&&(t=sE[(14&e)>>1]),n.g.o=t;else if(17==(247&r)&&48==(240&e))Rd(n.g,Yk,e);else if(18==(246&r)&&32==(224&e))Rd(n.g,1&r?$k:Jk,e);else if(20==(246&r)&&32==(240&e)){switch(e=t.pts,r=null,t.yb){case 32:Bd(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=Ud(n,2,e);break;case 38:r=Ud(n,3,e);break;case 39:r=Ud(n,4,e);break;case 40:Rd(n.g,Xk,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Od(n.o),Fd(n);break;case 43:Fd(n);break;case 44:t=n.i,r=null,n.h!==aE&&(r=Md(t,n.l,e)),Ld(t,0,15);break;case 45:t=n.g,n.h!==oE?r=null:(r=Md(t,n.l,e),i=t.g-t.h+1,Dd(t,i-1,i,t.h),Ld(t,0,i-1),Ld(t,t.g,15-t.g),n.l=e);break;case 46:Ld(n.j,0,15);break;case 47:t=null,n.h!==aE&&(t=Md(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,Bd(n),n.l=e,r=t}i=r;break e}i=null}else e=t.yb,Rd(n.g,Xk,t.$a),Rd(n.g,Xk,e);return i}function ah(e,t){var n=[];try{for(;t.na();){var r=Jd(t).value,i=(224&r)>>5,o=31&r;if(7===i&&0!=o&&(i=63&Jd(t).value),0!=i){e.A.add("svc"+i),e.j.has(i)||e.j.set(i,new $d(i));for(var a=e.j.get(i),s=t.sa();t.sa()-s<o;){i=t;var u=Jd(i),c=u.value,l=u.pts;if(16===c){c=c<<16|Jd(i).value}if(0<=c&&31>=c){var f=l;if(a.g){var d=a.g;switch(i=null,c){case 8:!qd(d)||0>=d.g&&0>=d.h||(0>=d.g?(d.g=d.m-1,d.h--):d.g--,d.i[d.h][d.g]=null);break;case 13:if(d.isVisible()&&(i=Gd(d,f,a.i)),d.h+1>=d.o){f=d;for(var h=0,p=1;16>p;p++,h++)f.i[h]=f.i[p];for(p=0;1>p;p++,h++)f.i[h]=Wd()}else d.h++;d.g=0;break;case 14:d.isVisible()&&(i=Gd(d,f,a.i)),d.i[d.h]=Wd(),d.g=0;break;case 12:d.isVisible()&&(i=Gd(d,f,a.i)),Vd(d),f=d,f.h=0,f.g=0}var g=i}else g=null}else if(128<=c&&159>=c)g=Qd(a,i,c,l);else{if(4096<=c&&4127>=c)f=255&c,8<=f&&15>=f?i.skip(1):16<=f&&23>=f?i.skip(2):24<=f&&31>=f&&i.skip(3);else if(4224<=c&&4255>=c)f=255&c,128<=f&&135>=f?i.skip(4):136<=f&&143>=f&&i.skip(5);else if(32<=c&&127>=c)i=c,a.g&&(127===i?Kd(a.g,"♪"):Kd(a.g,String.fromCharCode(i)));else if(160<=c&&255>=c)a.g&&Kd(a.g,String.fromCharCode(c));else if(4128<=c&&4223>=c){if(i=255&c,a.g)if(SE.has(i)){var y=SE.get(i);Kd(a.g,y)}else Kd(a.g,"_")}else 4256<=c&&4351>=c&&a.g&&(160!=(255&c)?Kd(a.g,"_"):Kd(a.g,"[CC]"));g=null}(i=g)&&n.push(i)}}}}catch(e){if(!(e instanceof He&&3e3===e.code))throw e;H("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function sh(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function uh(e){for(var t=[],n=e,r=e=0;r<n.length;)2==e&&3==n[r]?(e=0,n=[].concat(s(n)),n.splice(r,1),n=new Uint8Array(n)):0==n[r]?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;255==e[r];)n+=255,r++;n+=e[r++];for(var i=0;255==e[r];)i+=255,r++;i+=e[r++],4==n&&t.push(e.subarray(r,r+i)),r+=i}return t}function ch(){this.j=new Map,this.i=this.h=0,this.g=TE}function lh(e,t,n,r,i,o,u,c,l){var f=0,d=o,h=c.map(function(e){return e.Og});for(h=[].concat.apply([],s(h)),h.length&&(d=h[0].sampleSize||o),t.skip(u+c[0].yh);t.na();){u=t.O();var p=t.R(),g=null;switch(g=!1,c=1,e.g){case kE:g=31&p,g=6==g;break;case EE:c=2,t.skip(1),g=p>>1&63,g=39==g||40==g;break;default:return}if(g)for(p=0,f<h.length&&(p=h[f].we||0),p=(n+p)/r,c=a(uh(t.nb(u-c))),g=c.next();!g.done;g=c.next())l.push({packet:g.value,pts:p});else try{t.skip(u-c)}catch(e){break}d-=u+4,0==d&&(n=f<h.length?n+(h[f].Mf||i):n+i,f++,d=f<h.length?h[f].sampleSize||o:o)}}function fh(){this.g=null}function dh(e,t,n){var r=mh(e),i=null;e=[];var o=[],s=null,u=new Set(r.map(function(e){return e.keyId}));u.delete(null);var c="cenc";if(1<u.size)throw new He(2,4,4010);if(!t){if(o=r.filter(function(e){return"urn:mpeg:dash:sea:2012"==e.mc}),1<o.length)throw new He(2,4,4050);o.length&&(s=wh(o[0])),(o=r.find(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.mc}))&&o.encryptionScheme&&(c=o.encryptionScheme),o=r.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.mc?(i=e.init||i,!1):"urn:mpeg:dash:sea:2012"!=e.mc}),o.length&&(e=vh(i,c,o,n,u),0==e.length&&(e=[It("",c,i)]))}if(r.length&&!s&&(t||!o.length))for(e=[],t=a(Object.values(n)),n=t.next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(It(n,c,i));if(u=Array.from(u)[0]||null)for(c=a(e),t=c.next();!t.done;t=c.next())for(t=a(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=u;return{og:u,$j:i,drmInfos:e,Me:s,sg:!0}}function hh(e,t,n,r){var i=dh(e,n,r);if(t.sg)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==i.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=i.drmInfos),t.sg=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(e){return i.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==t.drmInfos.length))throw new He(2,4,4008);return i.og||t.og}function ph(e){var t=0,n=ge(e),r=n.getUint32(t,!0);if(t+=4,r!=e.byteLength)return W("PlayReady Object with invalid length encountered."),[];e:{for(e=t+2,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,0!=(1&i)||i+e>n.byteLength){W("Malformed MS PRO object"),n=[];break e}var o=he(n,e,i);t.push({type:r,value:o}),e+=i}n=t}return n}function gh(e){e=a(pi(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=a(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,"LA_URL"==n.tagName)return di(n)}return""}function yh(e){var t=yi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=di(t))?t:(e=yi(e.node,"urn:microsoft:playready","pro"))&&di(e)?(e=di(e),e=Et(e),(e=ph(e).filter(function(e){return e.type===xE})[0])?(e=yt(e.value,!0),(e=ai(e,"WRMHEADER"))?gh(e):""):""):""}function vh(e,t,n,r,i){var o=[];n=a(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;var u=r[s.mc];if(u){var c;if((c=yi(s.node,"urn:microsoft:playready","pro"))&&di(c)){c=di(c),c=Et(c);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);c=[{initData:ii(c,l,new Set,0),initDataType:"cenc",keyId:s.keyId}]}else c=null;if(l=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===s.mc)if(l=i,0==l.size)l=null;else{var f=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),d=new Uint8Array([]);l=[{initData:ii(d,f,l,1),initDataType:"cenc",keyId:s.keyId}]}c=It(u,t,s.init||e||c||l),(u=CE.get(u))&&(c.licenseServerUri=u(s)),o.push(c)}}return o}function mh(e){var t=[];e=a(e);for(var n=e.next();!n.done;n=e.next())(n=bh(n.value))&&t.push(n);return t}function bh(e){var t=e.attributes.schemeIdUri,n=mi(e,"urn:mpeg:cenc:2013","default_KID"),r=bi(e,"urn:mpeg:cenc:2013","pssh").map(hi),i=e.attributes.value;if(!t)return V("Missing required schemeIdUri attribute on","ContentProtection element",e),null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new He(2,4,4009);var o=[];if("urn:uuid:adb41c24-2dbf-4a6d-958b-4457c0d27b95"===t&&(null===r||0===r.length)){var a=Sh(e);if(null!==a)return o.push({initDataType:"cenc",initData:a,keyId:null}),{node:e,mc:t,keyId:n,init:o,encryptionScheme:i}}try{o=r.map(function(e){return{initDataType:"cenc",initData:Et(e),keyId:null}})}catch(e){throw new He(2,4,4007)}return{node:e,mc:t,keyId:n,init:0<o.length?o:null,encryptionScheme:i}}function wh(t){if(!e.crypto||!e.crypto.subtle)throw F("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new He(2,4,4042);var n=yi(t.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!n)throw new He(2,4,4051);if("urn:mpeg:dash:sea:aes128-cbc:2013"!=n.attributes.schemeIdUri)throw new He(2,4,4051);if(!(n=yi(t.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod")))throw new He(2,4,4051);if(t=n.attributes.IV,n=St(n.attributes.keyUriTemplate),!t||!n)throw new He(2,4,4051);if(t=At(t.substr(2)),16!=t.byteLength)throw new He(2,4,4048);return{ki:n,iv:t}}function Sh(e){if(null!==(e=gi(e,"prm:PRM"))){var t=gi(e,"prm:PRMSignalization");if(null!==t){e=new Uint8Array([173,180,28,36,45,191,74,109,149,139,68,87,192,210,123,149]);var n=hi(t);if(null!==n)return t=new Set,n=mt(n),n=he(n),ii(n,e,t,0)}}return null}function _h(t,n,r,i,o,a){var s={RepresentationID:n,Number:r,SubNumber:i,Bandwidth:o,Time:a};return t.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(n,r,i,o){if("$$"==n)return"$";var a=s[r];if(null==a)return W("URL template does not have an available substitution for ",'identifier "'+r+'":',t),n;switch("RepresentationID"==r&&i&&(W("URL template should not contain a width specifier for identifier",'"RepresentationID":',t),i=void 0),"Time"==r&&"bigint"!=typeof a&&(.2<=Math.abs(a-Math.round(a))&&F("Calculated $Time$ values must be close to integers"),a=Math.round(a)),o){case void 0:case"d":case"i":case"u":n=a.toString();break;case"o":n=a.toString(8);break;case"x":n=a.toString(16);break;case"X":n=a.toString(16).toUpperCase();break;default:n=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-n.length)+1).join("0")+n})}function Th(e,t){var n=Eh(e,t,"timescale"),r=1;n&&(r=Ei(n)||1),n=Eh(e,t,"duration"),(n=Ei(n||""))&&(n/=r);var i=Eh(e,t,"startNumber"),o=Number(Eh(e,t,"presentationTimeOffset"))||0,a=Ai(i||"");if(null!=i&&null!=a||(a=1),i=null,t=Ah(e,t,"SegmentTimeline")){t=fi(t,"S"),i=r,e=e.ha.duration||1/0;for(var s=a,u=[],c=-o,l=0;l<t.length;++l){var f=t[l],d=t[l+1],h=vi(f,"t",Ai),p=vi(f,"d",Ai),g=vi(f,"r",ki),y=vi(f,"k",ki)||0;if(null!=h&&(h-=o),p){if(h=null!=h?h:c,0>(g=g||0))if(d){if(null==(d=vi(d,"t",Ai))){W('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',f);break}if(h>=d){W('An "S" element cannot have a negative repeatif its start ','time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',f);break}g=Math.ceil((d-h)/p)-1}else{if(1/0==e){W('The last "S" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "S" element.',f);break}if(h/i>=e){W('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',f);break}g=Math.ceil((e*i-h)/p)-1}for(0<u.length&&h!=c&&(Math.abs((h-c)/i)>=gT&&W("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",f),u[u.length-1].end=h/i),f=0;f<=g;++f)c=h+p,u.push({start:h/i,end:c/i,dg:h,vb:y,Ki:u.length+s}),h=c}else W('"S" element must have a duration: ignoring this element.',f)}i=u}return{timescale:r,Ga:n,Fd:a,Fb:o/r||0,cg:o,timeline:i}}function kh(e,t){return[t(e.H),t(e.ja),t(e.ua)].filter(nn)}function Eh(e,t,n){t=kh(e,t),e=null,t=a(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function Ah(e,t,n){t=kh(e,t),e=null,t=a(t);for(var r=t.next();!r.done&&!(e=gi(r.value,n));r=t.next());return e}function xh(e,t,n,r,i,o){for(var s=mi(e,"http://www.w3.org/1999/xlink","href"),u=mi(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",c=a(Object.keys(e.attributes)),l=c.next();!l.done;l=c.next()){l=l.value;var f=l.split(":"),d=si("http://www.w3.org/1999/xlink");f[0]==d&&delete e.attributes[l]}if(5<=o)return br(new He(2,4,4028));if("onLoad"!=u)return br(new He(2,4,4027));var h=Pt([r],[s]);return i.request(0,Or(h,t)).xa(function(r){if(!(r=oi(r.data,e.tagName)))return br(new He(2,4,4001,s));for(e.children=[];r.children.length;){var u=r.children.shift();u.tagName&&(u.parent=e),e.children.push(u)}u=a(Object.keys(r.attributes));for(var c=u.next();!c.done;c=u.next())c=c.value,e.attributes[c]=r.attributes[c];return Ch(e,t,n,h[0],i,o+1)})}function Ch(e,t,n,r,i,o){if(o=void 0===o?0:o,mi(e,"http://www.w3.org/1999/xlink","href")){var s=xh(e,t,n,r,i,o);return n&&(s=s.xa(void 0,function(){return Ch(e,t,n,r,i,o)})),s}s=[];for(var u={},c=a(li(e)),l=c.next();!l.done;u={uc:u.uc},l=c.next())u.uc=l.value,"urn:mpeg:dash:resolve-to-zero:2013"==mi(u.uc,"http://www.w3.org/1999/xlink","href")?e.children=e.children.filter(function(e){return function(t){return t!==e.uc}}(u)):"SegmentTimeline"!=u.uc.tagName&&s.push(Ch(u.uc,t,n,r,i,o));return Tr(s).xa(function(){return e})}function Ph(e,t,n,r,i,o,a){var s,u=(new Xr).P("sidx",function(e){s=Ih(t,r,i,o,a,n,e)});if(e&&u.parse(e),s)return s;throw V('Invalid box type, expected "sidx".'),new He(2,3,3004)}function Ih(e,t,n,r,i,o,a){var s=[];a.reader.skip(4);var u=a.reader.O();if(0==u)throw V("Invalid timescale."),new He(2,3,3005);if(0==a.version)var c=a.reader.O(),l=a.reader.O();else c=a.reader.Jc(),l=a.reader.Jc();a.reader.skip(2);var f=a.reader.ka();for(e=e+a.size+l,l=0;l<f;l++){var d=a.reader.O(),h=(2147483648&d)>>>31;d&=2147483647;var p=a.reader.O();if(a.reader.skip(4),1==h)throw V("Heirarchical SIDXs are not supported."),new He(2,3,3006);s.push(new Po(c/u+n,(c+p)/u+n,function(){return o},e,e+d-1,t,n,r,i)),c+=p,e+=d}return a.parser.stop(),s}function jh(e){this.h=ge(e),this.g=new Gr(this.h,0)}function Mh(e){var t=Oh(e);if(7<t.length)throw new He(2,3,3002);var n=0;t=a(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=Oh(e);e:{r=a(PE);for(var i=r.next();!i.done;i=r.next())if(le(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.sa();else{if(8==t.length&&224&t[1])throw new He(2,3,3001);for(i=r=0;i<t.length;i++){var o=t[i];r=0==i?o&(1<<8-t.length)-1:256*r+o}t=r}return t=e.g.sa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.sa(),r=ge(e.h,e.g.sa(),t),e.g.skip(t),new Rh(n,r)}function Oh(e){var t=e.g.sa(),n=e.g.R();if(0==n)throw new He(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),he(e.h,t,n)}function Rh(e,t){this.id=e,this.g=t}function Dh(e){if(8<e.g.byteLength)throw new He(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new He(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){t=256*t+e.g.getUint8(n)}return t}function Lh(e,t,n,r,i,o,a,s,u){function c(){return i}var l=[];e=new jh(e.g);for(var f=null,d=null;e.na();){var h=Mh(e);if(187==h.id){var p=Nh(h);p&&(h=n*p.Wi,p=t+p.Ai,null!=f&&l.push(new Po(f+a,h+a,c,d,p-1,o,a,s,u)),f=h,d=p)}}return null!=f&&l.push(new Po(f+a,r+a,c,d,null,o,a,s,u)),l}function Nh(e){var t=new jh(e.g);if(e=Mh(t),179!=e.id)throw W("Not a CueTime element."),new He(2,3,3013);if(e=Dh(e),t=Mh(t),183!=t.id)throw W("Not a CueTrackPositions element."),new He(2,3,3012);t=new jh(t.g);for(var n=0;t.na();){var r=Mh(t);if(241==r.id){n=Dh(r);break}}return{Wi:e,Ai:n}}function Uh(e,t,n){if(!(t=Ah(e,t,"Initialization")))return null;var r=e.H.Aa(),i=t.attributes.sourceURL;i&&(r=Pt(r,[St(i)])),i=0;var o=null;return(t=vi(t,"range",Ti))&&(i=t.start,o=t.end),n=new xo(function(){return r},i,o,qh(e),null,null,n),n.codecs=e.H.codecs,n.mimeType=e.H.mimeType,n}function Bh(e,t,n){var r=Number(Eh(e,Hh,"presentationTimeOffset"))||0,i=Eh(e,Hh,"timescale"),o=1;i&&(o=Ei(i)||1);var a=r/o||0,s=Uh(e,Hh,n);Wh(e,s);var u=pn(e);return{Wb:function(){var e=Ah(u,Hh,"RepresentationIndex"),n=u.H.Aa();return e&&(e=St(e.attributes.sourceURL))&&(n=Pt(n,[e])),e=Vh(u),Fh(u,t,s,n,e.start,e.end,a)}}}function Fh(e,t,n,r,i,o,s){var u,c,l,f,h,p,g,y,v,m,b,w,S,_,T,k,E,x;return A(function(A){if(1==A.g)return u=e.presentationTimeline,c=!e.rb||!e.ha.wd,l=e.ha.start,f=e.ha.duration,h=e.H.mimeType.split("/")[1],p=t,g=null,y=[p(r,i,o,!1),"webm"==h?p(n.M(),n.Ca,n.ma,!0):null],p=null,d(A,Promise.all(y),2);if(v=A.h,m=v[0],b=v[1]||null,w=null,S=l-s,_=l,T=f?l+f:1/0,"mp4"==h)var C=Ph(m,i,r,n,S,_,T);else{if(C=new jh(b),440786851!=Mh(C).id)throw V("Not an EBML element."),new He(2,3,3008);var P=Mh(C);if(408125543!=P.id)throw V("Not a Segment element."),new He(2,3,3009);C=P.g.byteOffset,P=new jh(P.g);for(var I=null;P.na();){var j=Mh(P);if(357149030==j.id){I=j;break}}if(!I)throw V("Not an Info element."),new He(2,3,3010);for(I=new jh(I.g),j=1e6,P=null;I.na();){var M=Mh(I);if(2807729==M.id)j=Dh(M);else if(17545==M.id)if(4==M.g.byteLength)P=M.g.getFloat32(0);else{if(8!=M.g.byteLength)throw new He(2,3,3003);P=M.g.getFloat64(0)}}if(null==P)throw new He(2,3,3011);if(I=j/1e9,P*=I,j=Mh(new jh(m)),475249515!=j.id)throw V("Not a Cues element."),new He(2,3,3007);C=Lh(j,C,I,P,r,n,S,_,T)}for(w=C,k=a(w),E=k.next();!E.done;E=k.next())x=E.value,x.codecs=e.H.codecs,x.mimeType=e.H.mimeType;return u.zd(w),g=new _s(w),c&&g.yc(_,T,!0),A.return(g)})}function Hh(e){return e.Kc}function Vh(e){var t=Ah(e,Hh,"RepresentationIndex");return e=Eh(e,Hh,"indexRange"),e=Ti(e||""),t&&(e=vi(t,"range",Ti,e)),e}function Wh(e,t){if(Kh(e,t),!Vh(e))throw V("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",e.H),new He(2,4,4002)}function Kh(e,t){var n=e.H.mimeType.split("/")[1];if(e.H.contentType!=hT&&"mp4"!=n&&"webm"!=n)throw V("SegmentBase specifies an unsupported container type.",e.H),new He(2,4,4006);if("webm"==n&&!t)throw V("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",e.H),new He(2,4,4005)}function qh(e){var t=e.H;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Gc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function Gh(e,t,n){var r=Uh(e,zh,n),i=Xh(e);Yh(e,i);var o=null,a=null;e.ua.id&&e.H.id&&(a=t[e.ua.id+","+e.H.id])&&(o=a.segmentIndex);var s=Jh(e.ha.start,e.ha.duration,e.H.Aa,i,r,n,e.H.mimeType,e.H.codecs);return t=!o,o?o.yd(s,e.presentationTimeline.jb()):o=new _s(s),e.presentationTimeline.zd(s),e.rb&&e.ha.wd||o.yc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),a&&(a.segmentIndex=o),{Wb:function(){return o&&0!=o.getNumReferences()||o.ke(s),Promise.resolve(o)}}}function zh(e){return e.Gb}function Xh(e){var t=$h(e);e=Th(e,zh);var n=e.Fd;0==n&&(W("SegmentList@startNumber must be > 0"),n=1);var r=0;return e.Ga?r=e.Ga*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Ga:e.Ga,startTime:r,Fd:n,Fb:e.Fb,timeline:e.timeline,hc:t}}function Yh(e,t){if(!t.Ga&&!t.timeline&&1<t.hc.length)throw W("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",e.H),new He(2,4,4002);if(!t.Ga&&!e.ha.duration&&!t.timeline&&1==t.hc.length)throw W("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",e.H),new He(2,4,4002);if(t.timeline&&0==t.timeline.length)throw W("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",e.H),new He(2,4,4002)}function Jh(e,t,n,r,i,o,a,s){var u=r.hc.length;r.timeline&&r.timeline.length!=r.hc.length&&(u=Math.min(r.timeline.length,r.hc.length),W("The number of items in the segment timeline and the number of ","segment URLs do not match, truncating",r.hc.length,"to",u));for(var c=e-r.Fb,l=t?e+t:1/0,f=[],d=r.startTime,h={},p=0;p<u;h={Zc:h.Zc,Uc:h.Uc},p++){h.Uc=r.hc[p];var g=d;d=void 0,d=null!=r.Ga?g+r.Ga:r.timeline?r.timeline[p].end:g+t,h.Zc=null,g=new Po(e+g,e+d,function(e){return function(){return null==e.Zc&&(e.Zc=Pt(n(),[e.Uc.ri])),e.Zc}}(h),h.Uc.start,h.Uc.end,i,c,e,l,[],"",null,null,qT,o),g.codecs=s,g.mimeType=a,f.push(g)}return f}function $h(e){return[e.H.Gb,e.ja.Gb,e.ua.Gb].filter(nn).map(function(e){return fi(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){t.attributes.indexRange&&!e.nf&&(e.nf=!0,W("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate."));var n=St(t.attributes.media);return t=vi(t,"mediaRange",Ti,{start:0,end:null}),{ri:n,start:t.start,end:t.end}})}function Qh(e,t,n,r,i,o,a,s,u){u||e.H.Ec||(e.H.Ec=Eh(e,Zh,"initialization"));var c=e.H.Ec?rp(e,a):null,l=ep(e);tp(e,l);var f=pn(e);if(l.ud)return Kh(e,c),{Wb:function(){var e=_h(l.ud,f.H.id,null,null,f.bandwidth||null,null);return e=Pt(f.H.Aa(),[e]),Fh(f,t,c,e,0,null,l.Fb)}};if(l.Ga)return r||"image"===e.ja.contentType||(e.presentationTimeline.zf(l.Ga),e.presentationTimeline.oe(e.ha.start)),{Wb:function(){return np(f,l,i,c,o,a,s)}};var d=null;r=r=null,e.ua.id&&e.H.id&&(r=e.ua.id+","+e.H.id,r=n[r])&&(d=r.segmentIndex);var h=e.ha.start,p=e.ha.duration?h+e.ha.duration:1/0;q("New manifest "+h+" - "+p);var g=!(e.rb&&e.ha.wd);return d?(n=d,op(n,l,h,p,g,c),n.Ia(e.presentationTimeline.jb())):(q("Creating TSI with end "+p),d=new ip(l,e.H.id,e.bandwidth,e.H.Aa,h,p,c,g,a,e.H.Nf)),l.timeline&&"image"!==e.ja.contentType&&e.presentationTimeline.Jg(l.timeline,h),r&&e.rb&&(r.segmentIndex=d),{Wb:function(){return d instanceof ip&&0==d.getNumReferences()&&op(d,l,h,p,g,c),Promise.resolve(d)}}}function Zh(e){return e.Ob}function ep(e){var t=Th(e,Zh),n=Eh(e,Zh,"media"),r=Eh(e,Zh,"index");return{Ga:t.Ga,timescale:t.timescale,Fd:t.Fd,Fb:t.Fb,cg:t.cg,timeline:t.timeline,Fc:n&&St(n),ud:r,mimeType:e.H.mimeType,codecs:e.H.codecs}}function tp(e,t){var n=t.ud?1:0;if(n+=t.timeline?1:0,0==(n+=t.Ga?1:0))throw V("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",e.H),new He(2,4,4002);if(1!=n&&(W("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",e.H),t.ud?(K("Using the index URL template by default."),t.timeline=null):K("Using the SegmentTimeline by default."),t.Ga=null),!t.ud&&!t.Fc)throw V("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",e.H),new He(2,4,4002)}function np(t,n,r,i,o,s,u){function c(r){var o=(r-v)*y,a=o+n.Fb,u=o+h;return o=u+y,u=new Po(u,Math.min(o,f()),function(){var t=a*m;return"BigInt"in e&&t>Number.MAX_SAFE_INTEGER&&(t=BigInt(a)*BigInt(m)),t=_h(b,S,r,null,w,t),Pt(_(),[t])},0,null,i,T,h,f(),[],"",null,null,qT,s),u.codecs=t.H.codecs,u.mimeType=t.H.mimeType,u.i=o,u}function l(){var e=[Math.max(d.jb(),h),Math.min(d.Mb(),f())].map(function(e){return e-h});return e=[Math.ceil(e[0]/y),Math.ceil(e[1]/y)-1],t.H.Da&&e[1]++,e.map(function(e){return e+v})}function f(){var e=null!=p&&o[p]||g;return e?h+e:1/0}var d=t.presentationTimeline,h=t.ha.start,p=t.ua.id,g=t.ha.duration,y=n.Ga,v=n.Fd,m=n.timescale,b=n.Fc,w=t.bandwidth||null,S=t.H.id,_=t.H.Aa,T=h-n.Fb,k=l();r=t.rb?Math.max(k[0],k[1]-r+1):k[0],u=u||k[1],k=[];for(var E=r;E<=u;++E){var A=c(E);k.push(A)}var x=new _s(k);if(k=d.Mb()<f(),E=d.U(),k||E){var C=Math.max(r,u+1);r=y,t.H.Da&&(r=.1),x.ze(r,function(){var e=d.jb();x.Ia(e);var t=a(l());t.next(),t=t.next().value;for(var n=[];C<=t;){var r=c(C);n.push(r),C++}return e>f()&&!n.length?null:n})}return Promise.resolve(x)}function rp(e,t){var n=e.H.Ec;if(n||(n=Eh(e,Zh,"initialization")),!n)return null;n=St(n);var r=e.H.id,i=e.bandwidth||null,o=e.H.Aa;return t=new xo(function(){var e=_h(n,r,null,null,i,null);return Pt(o(),[e])},0,null,qh(e),null,null,t),t.codecs=e.H.codecs,t.mimeType=e.H.mimeType,t}function ip(e,t,n,r,i,o,a,s,u,c){_s.call(this,[]),this.h=e,this.A=t,this.C=n,this.F=r,this.i=i,this.l=o,this.s=a,this.B=u,this.G=c,s&&sp(this)}function op(e,t,n,r,i,o){if(ap(e,o),e.h){if(n=e.h.timeline,e.h.Fc=t.Fc,n.length){var a=n[n.length-1];t=t.timeline.filter(function(e){return e.start>=a.end})}else t=t.timeline.slice();0<t.length&&(q("Appending "+t.length+" entries"),e.h.timeline.push.apply(e.h.timeline,s(t))),e.l!==r&&(e.l=r)}else e.h=t,e.i=n,e.l=r;i&&sp(e)}function ap(e,t){if(e.s!==t){e.s=t,e=a(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&Io(n,t)}}function sp(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.Ia(e.i)}}function up(e,t,n,r,i,o,a){return e=_h(e,t,n,o,r||null,i),Pt(a(),[e]).map(function(e){return e.toString()})}function cp(e){var t=Wt(e),n=t.split("/")[0];return e=Kt(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Hd:null,colorGamut:null}}function lp(e,t){function n(e){o=e.name,$r(e)}function r(e){var t=Yo(e.reader);p=t.channelCount,g=t.sampleRate,i(e.name)}function i(e){switch(e=e.toLowerCase()){case"avc1":case"avc3":u.push(e+".42E01E"),l=!0;break;case"hev1":case"hvc1":u.push(e+".1.6.L93.90"),l=!0;break;case"dvh1":case"dvhe":u.push(e+".05.04"),l=!0;break;case"vp09":u.push(e+".00.10.08"),l=!0;break;case"av01":u.push(e+".0.01M.08"),l=!0;break;case"mp4a":s.push("mp4a.40.2"),c=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":s.push(e),c=!0}}var o,s=[],u=[],c=!1,l=!1,f=null,d=null,h=null,p=null,g=null,y=null,v=null;if((new Xr).box("moov",Yr).box("trak",Yr).P("tkhd",function(e){e=Xo(e.reader,e.version),d=String(e.height),h=String(e.width)}).box("mdia",Yr).P("mdhd",function(e){f=Go(e.reader,e.version).language}).box("minf",Yr).box("stbl",Yr).P("stsd",Jr).box("mp4a",function(e){var t=Yo(e.reader);p=t.channelCount,g=t.sampleRate,e.reader.na()?Yr(e):i(e.name)}).box("esds",function(e){e=e.reader;for(var t,n,r="mp4a";e.na();){t=e.R();for(var i=e.R();128&i;)i=e.R();if(3==t)e.ka(),i=e.R(),128&i&&e.ka(),64&i&&e.skip(e.R()),32&i&&e.ka();else if(4==t)n=e.R(),e.skip(12);else if(5==t)break}n&&(r+="."+Qo(n),5==t&&e.na()&&(t=e.R(),n=(248&t)>>3,31===n&&e.na()&&(n=32+((7&t)<<3)+((224&e.R())>>5)),r+="."+n)),s.push(r),c=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(e){var t=o||"";switch(o){case"dvav":t="avc3";break;case"dva1":t="avc1"}e=e.reader,e.skip(1),e=t+"."+Qo(e.R())+Qo(e.R())+Qo(e.R()),u.push(e),l=!0}).box("hvcC",function(e){var t=o||"";switch(o){case"dvh1":t="hvc1";break;case"dvhe":t="hev1"}var n=e.reader;n.skip(1),e=n.R();var r=["","A","B","C"][e>>6],i=31&e,a=n.O(),s=(32&e)>>5?"H":"L";e=[n.R(),n.R(),n.R(),n.R(),n.R(),n.R()],n=n.R();for(var c=0,f=0;32>f&&(c|=1&a,31!=f);f++)c<<=1,a>>=1;for(t=t+"."+r+i+"."+Qo(c,!0),t+="."+s+n,r="",i=e.length;i--;)((s=e[i])||r)&&(r="."+s.toString(16).toUpperCase()+r);t+=r,u.push(t),l=!0}).box("dvcC",function(e){var t=o||"";switch(o){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav"}var n=e.reader;n.skip(2),e=n.R(),n=n.R(),u.push(t+"."+Zo(e>>1&127)+"."+Zo(e<<5&32|n>>3&31)),l=!0}).P("vpcC",function(e){var t=o||"",n=e.reader;e=n.R();var r=n.R();n=n.R()>>4&15,u.push(t+"."+Zo(e)+"."+Zo(r)+"."+Zo(n)),l=!0}).box("av1C",function(e){var t=o||"",n=e.reader;n.skip(1),e=n.R(),n=n.R();var r=e>>>5,i=(64&n)>>6;u.push(t+"."+r+"."+Zo(31&e)+(n>>>7?"H":"M")+"."+Zo(2===r&&i?(32&n)>>5?12:10:i?10:8)+"."+((16&n)>>4)+"."+((8&n)>>3)+((4&n)>>2)+(3&n)+"."+Zo(1)+"."+Zo(1)+"."+Zo(1)+".0"),l=!0}).box("enca",Qr).box("encv",$r).box("sinf",Yr).box("frma",function(e){e=Jo(e.reader).Ha,i(e)}).box("colr",function(e){u=u.map(function(t){if(t.startsWith("av01.")){var n=e.reader,r=n.sa(),i=n.nb(4),o=String.fromCharCode(i[0]);if(o+=String.fromCharCode(i[1]),o+=String.fromCharCode(i[2]),"nclx"===(o+=String.fromCharCode(i[3]))){i=n.ka(),o=n.ka();var a=n.ka(),s=n.R()>>7,u=t.split(".");10==u.length&&(u[6]=Zo(i),u[7]=Zo(o),u[8]=Zo(a),u[9]=String(s),t=u.join("."))}n.seek(r)}return t});var t=$o(e.reader),n=t.colorGamut;y=t.Hd,v=n}).parse(e||t,!0),!s.length&&!u.length)return null;var m=c&&!l,b=new Map;if(l){var w=new me("video/mp4");for(e&&w.init(e),w.i(t),e=a(w.j()),t=e.next();!t.done;t=e.next())t=t.value,b.set(t,t);w.g()}return{type:m?"audio":"video",mimeType:m?"audio/mp4":"video/mp4",codecs:fp(s.concat(u)).join(", "),language:f,height:d,width:h,channelCount:p,sampleRate:g,closedCaptions:b,Hd:y,colorGamut:v}}function fp(e){var t=new Set,n=[];e=a(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var i=Vt(r);t.has(i)?q("Ignoring duplicate codec"):(n.push(r),t.add(i))}return t=Rt("audio",n),r=Rt("video",n),e=Rt(hT,n),r=dp(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function dp(e){if(1>=e.length)return e;var t=e.find(function(e){return e.startsWith("dvh1.")||e.startsWith("dvhe.")||e.startsWith("dav1.")});return t?te('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(e){return e!=t}):e}function hp(e){var t=null;return(new Xr).box("moov",Yr).box("trak",Yr).box("mdia",Yr).box("minf",Yr).box("stbl",Yr).P("stsd",Jr).box("encv",$r).box("enca",Qr).box("sinf",Yr).box("schi",Yr).P("tenc",function(e){e=e.reader,e.R(),e.R(),e.R(),e.R(),t=xt(e.nb(16))}).parse(e,!0),t}function pp(e){this.o=null,this.A=e,this.G=new Cr,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}function gp(e,t){var n,r,i,o,a,s,u;return A(function(c){return 1==c.g?(n=Pt(e.i,[yp(e,t)]),r=Or(n,e.o.retryParameters),i=e.A.networkingEngine.request(8,r),Pr(e.G,i),p(c,2),d(c,i.promise,4)):2!=c.g?(o=c.h,a=gt(o.data),s=JSON.parse(a),1==s.VERSION&&vp(e,s,o.uri),y(c,0)):(u=v(c))&&7001==u.code?c.return():(null!=e.g&&(e.g.stop(),e.g=null),e.g=new qe(function(){gp(e,t)}),e.g.X(e.C),void h(c))})}function yp(e,t){if(!e.m.length)return t;t=new Ie(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),i=t.g;return"DASH"==e.s?(i.add("_DASH_pathway",n),i.add("_DASH_throughput",String(r))):"HLS"==e.s&&(i.add("_HLS_pathway",n),i.add("_HLS_throughput",String(r))),Fe(i)&&Re(t,i),t.toString()}function vp(e,t,n){null!=e.g&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new qe(function(){gp(e,r)}),(n=t.TTL)&&(e.C=n),e.g.X(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function mp(e,t,n,r){var i=e.l.get(t);i||(i=new Map),i.set(n,r),e.l.set(t,i)}function bp(e,t,n){n=void 0!==n&&n,t=e.l.get(t)||new Map;for(var r=[],i={},o=a(e.m),s=o.next();!s.done;i={Tb:i.Tb},s=o.next())if(i.Tb=s.value,s=t.get(i.Tb))r.push({Ff:i.Tb,location:s});else if(s=e.F.find(function(e){return function(t){return t.oj==e.Tb}}(i))){var u=t.get(s["BASE-ID"]);u&&(s["URI-REPLACEMENT"].hh?(u=new Ie(u),Me(u,s["URI-REPLACEMENT"].hh),r.push({Ff:i.Tb,location:u.toString()})):r.push({Ff:i.Tb,location:u}))}for(i=Date.now(),o=a(e.j.keys()),s=o.next();!s.done;s=o.next())s=s.value,u=e.j.get(s),i>u&&e.j.delete(s);if(r=r.filter(function(t){for(var n=a(e.j.keys()),r=n.next();!r.done;r=n.next())if(r.value.includes(new Ie(t.location).zb))return!1;return!0}),r.length&&(e.B=r[0].Ff),r=r.map(function(e){return e.location}),!r.length&&e.h)for(i=a(e.h.split(",")),s=i.next();!s.done;s=i.next())(o=t.get(s.value))&&(e.B=e.h,r.push(o));if(!r.length)for(t=a(t.values()),i=t.next();!i.done;i=t.next())r.push(i.value);return n?r:Pt(e.i,r)}function wp(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.s=this.o=!1,this.m=new Set}function Sp(e,t){var n=[],r=[],i=[],o=[];e=a(e);for(var s=e.next();!s.done;s=e.next()){var u=s.value;s=new Map(u.audioStreams.map(function(e){return[Xp(e),e]}));var c=new Map(u.videoStreams.map(function(e){return[zp(e),e]})),l=new Map(u.textStreams.map(function(e){return[Yp(e),e]}));if(u=new Map(u.imageStreams.map(function(e){return[Jp(e),e]})),t){var f=Wp(hT);l.set(Yp(f),f),f=Wp("image"),u.set(Jp(f),f)}n.push(s),r.push(c),i.push(l),o.push(u)}return{jg:n,dh:r,$g:i,Bg:o}}function _p(e){var t,n,r,i,o,s,u,c,l,f,h,p,g,y,v,m,b,w,S,_,T,k,E,x,C,P,I,j,M,O;return A(function(A){switch(A.g){case 1:if(t=pT,1==e.length)return A.return(e[0]);for(n=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.V}).map(function(e){return[Xp(e),e]}))}),r=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.ga}).map(function(e){return[zp(e),e]}))}),i=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.pa}).map(function(e){return[Yp(e),e]}))}),o=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.Je}).map(function(e){return[Jp(e),e]}))}),s=a(i),u=s.next();!u.done;u=s.next())c=u.value,l=Vp(t.pa),c.set(Yp(l),l);for(f=a(o),h=f.next();!h.done;h=f.next())p=h.value,g=Vp(t.Je),p.set(Jp(g),g);return y=new wp,d(A,Tp(y,[],n,0,Pp,jp,0),2);case 2:return v=A.h,d(A,Tp(y,[],r,0,Pp,jp,0),3);case 3:return m=A.h,d(A,Tp(y,[],i,0,Pp,jp,0),4);case 4:return b=A.h,d(A,Tp(y,[],o,0,Pp,jp,0),5);case 5:if(w=A.h,S=0,m.length&&v.length)for(x=a(v),C=x.next();!C.done;C=x.next())for(P=C.value,I=a(m),j=I.next();!j.done;j=I.next())M=j.value,O=S++,M.variantIds.push(O),P.variantIds.push(O);else for(_=m.concat(v),T=a(_),k=T.next();!k.done;k=T.next())E=k.value,E.variantIds=[S++];return A.return(m.concat(v).concat(b).concat(w))}})}function Tp(e,t,n,r,i,o,s){var u,c,l,f,h,p,g,y,v,m,b,w,S,_,T,k,E,x;return A(function(A){switch(A.g){case 1:for(u=[],c=0;c<n.length;c++)c>=r?u.push(new Set(n[c].values())):u.push(new Set);l=a(t),f=l.next();case 2:if(f.done){A.u(4);break}return h=f.value,d(A,kp(e,h,n,r,o,u,s),5);case 5:if(!(p=A.h))throw new He(2,4,4037);f=l.next(),A.u(2);break;case 4:for(g=a(u),y=g.next();!y.done;y=g.next())for(v=y.value,m=a(v),b=m.next();!b.done;b=m.next())w=b.value,(S=Ap(e,w,n,i,o,u))&&t.push(S);for(_=a(u),y=_.next();!y.done;y=_.next())for(T=y.value,k={},E=a(T),b=E.next();!b.done;k={Vc:k.Vc},b=E.next())if(k.Vc=b.value,!Gp(k.Vc)&&(x=t.some(function(t){return function(n){return Dp(e,t.Vc,n)}}(k))))throw V("Unused stream in period-flattening!",k.Vc,t),new He(2,4,4037);return A.return(t)}})}function kp(e,t,n,r,i,o,a){return A(function(s){return 1==s.g?(Mp(e,n,t,0<a),t.matchedStreams?t.segmentIndex?d(s,Ep(t,r+a),2):s.u(2):(V("No matches extending output stream!",t,n),s.return(!1))):(xp(t,r,i,o,a),s.return(!0))})}function Ep(e,t){var n,r,i,o,s,u,c;return A(function(l){if(1==l.g){for(n=[],r=e.matchedStreams,i=a(r),o=i.next();!o.done;o=i.next())s=o.value,n.push(s.createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex());return d(l,Promise.all(n),2)}if(e.segmentIndex instanceof Es)for(u=t;u<r.length;u++)c=r[u],c.segmentIndex&&e.segmentIndex.h.push(c.segmentIndex);h(l)})}function Ap(e,t,n,r,i,o){if(Gp(t))return null;var a=r(t);return Mp(e,n,a),a.createSegmentIndex&&(a.createSegmentIndex=function(){return A(function(e){return a.segmentIndex?e.u(0):(a.segmentIndex=new Es,d(e,Ep(a,0),0))})}),a.matchedStreams&&a.matchedStreams.length?(xp(a,0,i,o,0),a):null}function xp(e,t,n,r,i){var o=e.matchedStreams;for(t+=i;t<o.length;t++){var s=o[t];n(e,s);var u=!0;if("audio"==e.type&&0==cn(e.language,s.language)&&(u=!1),u&&(r[t-i].delete(s),s.fullMimeTypes))for(s=a(s.fullMimeTypes.values()),u=s.next();!u.done;u=s.next())e.fullMimeTypes.add(u.value)}}function Cp(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=a(t.matchedStreams),n=e.next();!n.done;n=e.next())n=n.value,n.segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Pp(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Ip(e,t){function n(e,t){e||(e=[]),t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,e.includes(n)||e.push(n);return e}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=a(t.keyIds),i=r.next();!i.done;i=r.next())e.keyIds.add(i.value);if(null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=uo(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new He(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=a(t.closedCaptions),i=r.next();!i.done;i=r.next()){var o=a(i.value);i=o.next().value,o=o.next().value,e.closedCaptions.set(i,o)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Cp(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Ip(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Ip(e.trickModeVideo,t)}function jp(e,t){var n=e.roles;n||(n=[]);for(var r=a(t.roles),i=r.next();!i.done;i=r.next())i=i.value,n.includes(i)||n.push(i);for(e.roles=n,n=a(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,s(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=a(t.closedCaptions),n=t.next();!n.done;n=t.next())r=a(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function Mp(e,t,n,r){r=(void 0===r?0:r)?n.matchedStreams:[],t=a(t);for(var i=t.next();!i.done;i=t.next()){if(!(i=Op(e,i.value,n)))return;r.push(i)}n.matchedStreams=r}function Op(e,t,n){var r={audio:Xp,video:zp,text:Yp,image:Jp}[n.type],i=null,o=r(n);if(t.has(o))i=t.get(o);else{o={audio:function(t,n){return Dp(e,t,n)},video:function(t,n){return Dp(e,t,n)},text:Lp,image:Np}[n.type];for(var s={audio:Up,video:Bp,text:Fp,image:Hp}[n.type],u=a(t.values()),c=u.next();!c.done;c=u.next())c=c.value,!o(n,c)||n.fastSwitching!=c.fastSwitching||i&&!s(n,i,c)||(i=c)}return e.s&&!Gp(i)&&t.delete(r(i)),i}function Rp(e,t){function n(e){if(!OE.has(e)){var t=Ht(e);OE.set(e,t)}return OE.get(e)}return e.mimeType==t.mimeType&&n(e.codecs)==n(t.codecs)}function Dp(e,t,n){return!(!Rp(t,n)&&!e.o||t.drmInfos&&!so(t.drmInfos,n.drmInfos))}function Lp(e,t){return!t.language||e.forced===t.forced&&0!=cn(e.language,t.language)&&t.kind==e.kind}function Np(){return!0}function Up(e,t,n){var r=Rp(e,t),i=Rp(e,n);if(r&&!i)return!1;if(!r&&i)return!0;if(r=cn(e.language,t.language),(i=cn(e.language,n.language))>r)return!0;if(i<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(r=t.roles.filter(function(t){return e.roles.includes(t)}),i=n.roles.filter(function(t){return e.roles.includes(t)}),i.length>r.length||!(i.length<r.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((r=Kp(e.channelsCount,t.channelsCount,n.channelsCount))==IE||r!=ME&&((r=Kp(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==IE||r!=ME&&!(!e.bandwidth||qp(e.bandwidth,t.bandwidth,n.bandwidth)!=IE))))}function Bp(e,t,n){var r=Rp(e,t),i=Rp(e,n);if(r&&!i)return!1;if(!r&&i)return!0;if((r=Kp(e.width*e.height,t.width*t.height,n.width*n.height))==IE)return!0;if(r==ME)return!1;if(e.frameRate){if((r=Kp(e.frameRate,t.frameRate,n.frameRate))==IE)return!0;if(r==ME)return!1}return!(!e.bandwidth||qp(e.bandwidth,t.bandwidth,n.bandwidth)!=IE)}function Fp(e,t,n){var r=cn(e.language,t.language),i=cn(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(t){return e.roles.includes(t)}),i=n.roles.filter(function(t){return e.roles.includes(t)}),i.length>r.length)return!0;if(i.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Hp(e,t,n){return Kp(e.width*e.height,t.width*t.height,n.width*n.height)==IE}function Vp(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Wp(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new _s([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Kp(e,t,n){if(t==e&&e!=n)return ME;if(n==e&&e!=t)return IE;if(t>e){if(n<=e||n-e<t-e)return IE;if(n-e>t-e)return ME}else{if(n>e)return ME;if(e-n<e-t)return IE;if(e-n>e-t)return ME}return jE}function qp(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?IE:t<e?ME:jE}function Gp(e){switch(e.type){case hT:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function zp(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function Xp(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Yp(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Jp(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function $p(e,t){var n=new DOMParser,r=RE.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(e){return V("XML parsing exception:",e),null}if(!(n=e.documentElement))return V("XML document was empty!"),null;if(r=n.getElementsByTagName("parsererror"),r.length)return V("XML parser error found:",r[0]),null;if(n.tagName!=t)return V('XML tag name does not match expected "'+t+'":',n.tagName),null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return V("XML document embeds unsafe content!"),null;return n}function Qp(e,t){try{return $p(vt(e),t)}catch(e){return V("parseXmlString threw!",e),null}}function Zp(){var e=this;this.i=this.g=null,this.A=[],this.l=null,this.T=1,this.B=[],this.j={me:"",type:"",profiles:[],Cb:null,Da:0,Aa:null,Cd:0},this.o=new Map,this.s={},this.L={},this.m=new wp,this.F=0,this.N=new D(5),this.G=new qe(function(){gg(e)}),this.K=new Cr,this.I=null,this.W=[],this.J=1/0,this.C=!1,this.h=null}function eg(e){var t,n,r,i,o,a,s,u,c;return A(function(l){return 1==l.g?(t="MPD",n=xg(e),r=e.A,n.length?(r=n,t="Patch"):1<e.A.length&&e.h&&(i=bp(e.h,"Location",!0),i.length&&(r=i)),o=Or(r,e.g.retryParameters),a=Date.now(),d(l,Ag(e,o,0,{type:4}),2)):3!=l.g?(s=l.h,e.i?(s.uri&&s.uri!=s.originalUri&&!e.A.includes(s.uri)&&e.A.unshift(s.uri),d(l,tg(e,s.data,s.uri,t),3)):l.return(0)):(u=Date.now(),c=(u-a)/1e3,e.N.sample(1,c),l.return(c))})}function tg(e,t,n,r){var i,o,a,s,u,c,l,f,h,p,g;return A(function(y){if(1==y.g){if(i=t,o=e.g.dash.manifestPreprocessor,a=$u,o!=a){if(ie("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),!(s=Qp(i,r)))throw new He(2,4,4001,n);o(s),i=mt(s.outerHTML)}if(!(u=oi(i,r)))throw new He(2,4,4001,n);return c=e.g.dash.manifestPreprocessorTXml,(l=Qu,c!=l&&c(u),"Patch"===r)?y.return(ig(e,u)):(f=e.g.dash.disableXlinkProcessing)?y.return(ng(e,u,n)):(h=e.g.dash.xlinkFailGracefully,p=Ch(u,e.g.retryParameters,h,n,e.i.networkingEngine),Pr(e.K,p),d(y,p.promise,2))}return g=y.h,y.return(ng(e,g,n))})}function ng(e,t,n){var r,i,o,s,u,c,l,f,p,g,y,v,m,b,w,S,_,T,k,E,x,C,P,I,j,M,O,R,D,L,N,U,B,H,V,W,K,q,G,z,X,Y,J,$,Q,Z,ee,te,ne,re,ie,oe,ae,se,ue,ce;return A(function(A){switch(A.g){case 1:for(e.h&&e.h.l.clear(),r=[n],i=[],o=new Map,s=fi(t,"Location"),u=a(s),c=u.next();!c.done;c=u.next())l=c.value,f=l.attributes.serviceLocation,(p=hi(l))&&(g=Pt(r,[p])[0],f&&(e.h?mp(e.h,"Location",f,g):o.set(f,g)),i.push(g));if(e.h?(y=bp(e.h,"Location",!0),0<y.length&&(r=e.A=y)):i.length&&(r=e.A=i),e.j.me=t.attributes.id||"",e.j.Cd=vi(t,"publishTime",Si)||0,e.B=fi(t,"PatchLocation"),v=Promise.resolve(),(m=gi(t,"ContentSteering"))&&e.i)for(b=m.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=b):(e.h=new pp(e.i),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=b,(w=hi(m))&&((S=vi(m,"queryBeforeStart",Ci,!1))?v=gp(e.h,w):gp(e.h,w))),_=a(o.keys()),T=_.next();!T.done;T=_.next())k=T.value,E=o.get(k),mp(e.h,"Location",k,E);if(x=fi(t,"BaseURL"),P=!1,e.h)for(I=a(x),j=I.next();!j.done;j=I.next())M=j.value,O=M.attributes.serviceLocation,R=hi(M),O&&R&&(mp(e.h,"BaseURL",O,R),P=!0);if(P&&e.h||(D=x.map(hi),C=Pt(r,D)),L=function(){return e.h&&P?bp(e.h,"BaseURL"):C||[]},e.j.Aa=L,N=0,x&&x.length&&(N=vi(x[0],"availabilityTimeOffset",xi)||0),e.j.Da=N,U=e.g.dash.ignoreMinBufferTime,B=0,U||(B=vi(t,"minBufferTime",_i)||0),e.F=vi(t,"minimumUpdatePeriod",_i,-1),H=vi(t,"availabilityStartTime",Si),V=vi(t,"timeShiftBufferDepth",_i),W=e.g.dash.ignoreSuggestedPresentationDelay,K=null,W||(K=vi(t,"suggestedPresentationDelay",_i)),q=e.g.dash.ignoreMaxSegmentDuration,G=null,q||(G=vi(t,"maxSegmentDuration",_i)),z=t.attributes.type||"static",e.j.type=z,e.l)for(X=e.l.presentationTimeline,Y=a(Object.values(e.s)),J=Y.next();!J.done;J=Y.next())$=J.value,$.segmentIndex&&$.segmentIndex.Ia(X.jb());else Q=e.g.defaultPresentationDelay||1.5*B,Z=null!=K?K:Q,X=new ts(H,Z,e.g.dash.autoCorrectDrift);return X.nc("static"==z),(ee=X.U())&&!isNaN(e.g.availabilityWindowOverride)&&(V=e.g.availabilityWindowOverride),null==V&&(V=1/0),X.ye(V),te=t.attributes.profiles||"",e.j.profiles=te.split(","),ne={rb:"static"!=z,presentationTimeline:X,ua:null,ha:null,ja:null,H:null,bandwidth:0,nf:!1,Da:N,Cb:null,profiles:te.split(",")},re=cg(e,ne,L,t),ie=re.duration,oe=re.periods,"static"!=z&&re.qg||X.Va(ie||1/0),e.J&&!e.C&&(ae=e.i.isAutoLowLatencyMode())&&(e.i.enableLowLatencyMode(),e.C=e.i.isLowLatencyMode()),e.C?X.Sg(e.J):e.J&&F("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),X.zf(G||1),d(A,v,2);case 2:return e.C&&(B=0,se=null!=K?K:e.g.defaultPresentationDelay,X.Rf(se)),e.l?d(A,rg(e,re.periods,!1),4):d(A,e.m.Qe(oe,ne.rb),6);case 6:if(e.l={presentationTimeline:X,variants:e.m.j,textStreams:e.m.lf(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:B||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:sg(t),nextUrl:ug(t)},!X.bh()){A.u(7);break}return ue=fi(t,"UTCTiming"),d(A,_g(e,L,ue),8);case 8:if(ce=A.h,!e.i)return A.return();X.Tg(ce);case 7:X.ge();case 4:e.i.makeTextStreamsForClosedCaptions(e.l),h(A)}})}function rg(e,t,n){var r;return A(function(i){if(1==i.g)return d(i,e.m.Qe(t,!0,n),2);e.l.variants=e.m.j,r=e.m.lf(),0<r.length&&(e.l.textStreams=r),e.l.imageStreams=e.m.i,e.i.filter(e.l),h(i)})}function ig(e,t){var n,r,i,o,u,c,l,f,p,g,y,v,m,b,w,S,_,T,k,E,x,C,P,I,j,M;return A(function(A){if(1==A.g){if(n=t.attributes.mpdId,r=vi(t,"originalPublishTime",Si),!n||n!==e.j.me||r!==e.j.Cd)throw e.B=[],new He(1,4,4052);for(i=[],o=[],u=new Set,c=a(li(t)),l=c.next();!l.done;l=c.next()){if(f=l.value,p=!0,g=Ii(f.attributes.sel||""),y=g[g.length-1],v=hi(f)||"","MPD"===y.name)if("mediaPresentationDuration"===y.Kb){m=hi(f)||"";var O=_i(m);if(null!=O){e.j.Cb=O;for(var R=a(e.o.values()),D=R.next();!D.done;D=R.next())D.value.Cb=O}}else if("type"===y.Kb){for(e.l.presentationTimeline.nc("static"==v),e.j.type=v,O=a(e.o.values()),R=O.next();!R.done;R=O.next())R.value.rb="dynamic"==v;"static"==v&&(e.F=-1)}else"publishTime"===y.Kb?e.j.Cd=Si(v)||0:null===y.Kb&&"add"===f.tagName?o.push(f):p=!1;else if("PatchLocation"===y.name)ji(e.B,f);else if("Period"===y.name){if("add"===f.tagName)o.push(f);else if("remove"===f.tagName&&y.id)for(O=y.id,R=a(e.o.keys()),D=R.next();!D.done;D=R.next())if(D=D.value,D.startsWith(O)){var L=e.o.get(D);Ah(L,Zh,"SegmentTimeline").children=[],ag(e,D),e.o.delete(D)}}else if("SegmentTemplate"===y.name){if(R=Ii(f.attributes.sel||""),O=R[R.length-1],O.Kb){R=og(e,R),D=hi(f)||"",L=a(R);for(var N=L.next();!N.done;N=L.next())N=e.o.get(N.value),Mi(N.H.Ob,f.tagName,O.Kb,D);O=R}else O=[];for(b=O,w=a(b),S=w.next();!S.done;S=w.next())_=S.value,u.add(_)}else if("SegmentTimeline"===y.name||"S"===y.name){for(O=Ii(f.attributes.sel||""),O=og(e,O),R=a(O),D=R.next();!D.done;D=R.next())D=e.o.get(D.value),D=Ah(D,Zh,"SegmentTimeline"),L=fi(D,"S"),ji(L,f),D.children=L;for(T=O,k=a(T),S=k.next();!S.done;S=k.next())E=S.value,u.add(E)}else p=!1;p||W("Unhandled "+f.tagName+" operation",f.attributes.sel)}for(x=a(u),S=x.next();!S.done;S=x.next())C=S.value,ag(e,C);for(P=a(o),I=P.next();!I.done;I=P.next())j=I.value,i.push.apply(i,s(cg(e,{rb:"dynamic"==e.j.type,presentationTimeline:e.l.presentationTimeline,ua:null,ha:null,ja:null,H:null,bandwidth:0,nf:!1,Da:e.j.Da,profiles:e.j.profiles,Cb:e.j.Cb},e.j.Aa,j).periods));return i.length?d(A,rg(e,i,!0),2):A.u(2)}"static"==e.j.type&&(M=e.j.Cb,e.l.presentationTimeline.Va(M||1/0)),h(A)})}function og(e,t){var n="",r="",i="";t=a(t);for(var o=t.next();!o.done;o=t.next())o=o.value,"Period"===o.name?n=o.id:"AdaptationSet"===o.name?r=o.id:"Representation"===o.name&&(i=o.id);if(t=[],i)t.push(n+","+i);else for(e=a(e.o.values()),i=e.next();!i.done;i=e.next())i=i.value,i.ua.id===n&&i.ja.id===r&&i.H.id&&t.push(n+","+i.H.id);return t}function ag(e,t){var n=e.o.get(t),r=e.s[t];r.segmentIndex&&r.segmentIndex.Ia(e.l.presentationTimeline.jb());try{var i=Qh(n,function(t,n,r,i){return kg(e,t,n,r,i)},e.s,!0,e.g.dash.initialSegmentLimit,e.L,n.H.aesKey,null,!0);r.createSegmentIndex=function(){var e;return A(function(t){if(1==t.g)return r.segmentIndex?t.u(0):(e=r,d(t,i.Wb(),3));e.segmentIndex=t.h,h(t)})}}catch(e){if((t=n.H.contentType)!=hT&&"application"!=t&&"image"!=t||4002!=e.code)throw e}}function sg(e){var t=gi(e,"ServiceDescription");if(!t)return null;if(e=gi(t,"Latency"),t=gi(t,"PlaybackRate"),!e&&!t)return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function ug(e){if(e=fi(e,"SupplementalProperty"),!e.length)return null;e=a(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,"urn:mpeg:dash:chaining:2016"==t.attributes.schemeIdUri)return t.attributes.value;return null}function cg(e,t,n,r){var i=t.Cb;i||(i=vi(r,"mediaPresentationDuration",_i),e.j.Cb=i);var o=[],a=0;r=fi(r,"Period");for(var s=0;s<r.length;s++){var u=r[s],c=r[s+1],l=vi(u,"start",_i,a),f=u.attributes.id,d=vi(u,"duration",_i),h=null;if(c){var p=vi(c,"start",_i);null!=p&&(h=p-l)}else null!=i&&(h=i-l);if(p=gT,h&&d&&Math.abs(h-d)>p&&W("There is a gap/overlap between Periods",u),null==h&&(h=d),null!==e.I&&null!==f&&null!==l&&l<e.I&&!e.W.includes(f)&&s+1!=r.length)q("Skipping Period with ID "+f+" as its start time is smaller than the largest period start time that has been seen, and ID is unseen before");else{if(null!==l&&(null===e.I||l>e.I)&&(e.I=l),a=lg(e,t,n,{start:l,duration:h,node:u,wd:null==h||!c}),o.push(a),t.ua.id&&h&&(e.L[t.ua.id]=h),null==h){c&&W("Skipping Period",s+1,"and any subsequent Periods:","Period",s+1,"does not have a valid start time.",c),a=null;break}a=l+h}}return e.W=o.map(function(e){return e.id}),null!=i?(a!=i&&W("@mediaPresentationDuration does not match the total duration of ","all Periods."),{periods:o,duration:i,qg:!1}):{periods:o,duration:a,qg:!0}}function lg(e,t,n,r){t.ua=vg(e,r.node,null,n),t.ha=r,t.ua.Da=t.Da,t.ua.id||(K("No Period ID given for Period with start time "+r.start+",  Assigning a default"),t.ua.id="__shaka_period_"+r.start);var i=fi(r.node,"EventStream");n=t.presentationTimeline.jb(),i=a(i);for(var o=i.next();!o.done;o=i.next())Tg(e,r.start,r.duration,o.value,n);if(n=fi(r.node,"AdaptationSet").map(function(n){return dg(e,t,n)}).filter(nn),t.rb){for(r=[],i=a(n),o=i.next();!o.done;o=i.next()){o=a(o.value.Ei);for(var s=o.next();!s.done;s=o.next())r.push(s.value)}if(r.length!=new Set(r).size)throw new He(2,4,4018)}for(r=n.filter(function(e){return!e.ag}),n=n.filter(function(e){return e.ag}),n=a(n),i=n.next();!i.done;i=n.next()){i=i.value,o=i.ag.split(" "),s=a(r);for(var u=s.next();!u.done;u=s.next()){var c=u.value;if(o.includes(c.id)){u={},c=a(c.streams);for(var l=c.next();!l.done;u={Pd:u.Pd},l=c.next())u.Pd=l.value,u.Pd.trickModeVideo=i.streams.find(function(e){return function(t){return Ht(e.Pd.codecs)==Ht(t.codecs)}}(u))}}}if(n=fg(e.g.disableAudio,r,"audio"),i=fg(e.g.disableVideo,r,"video"),o=fg(e.g.disableText,r,hT),r=fg(e.g.disableThumbnails,r,"image"),0===i.length&&0===n.length)throw new He(2,4,4004);return{id:t.ua.id,audioStreams:n,videoStreams:i,textStreams:o,imageStreams:r}}function fg(e,t,n){return e||!t.length?[]:t.reduce(function(e,t){return t.contentType!=n?e:(e.push.apply(e,s(t.streams)),e)},[])}function dg(e,t,n){function r(e){switch(e){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function i(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ja=vg(e,n,t.ua,null);var o=!1,u=fi(n,"Role"),c=u.map(function(e){return e.attributes.value}).filter(nn),l=void 0,f=t.ja.contentType==hT;f&&(l="subtitle"),u=a(u);for(var d=u.next();!d.done;d=u.next()){d=d.value;var h=d.attributes.schemeIdUri;if(null==h||"urn:mpeg:dash:role:2011"==h)switch(d=d.attributes.value){case"main":o=!0;break;case"caption":case"subtitle":l=d}}var p,g;h=fi(n,"EssentialProperty"),u=null;var y=!1;d=!1,h=a(h);for(var v=h.next();!v.done;v=h.next()){v=v.value;var m=v.attributes.schemeIdUri;"http://dashif.org/guidelines/trickmode"==m?u=v.attributes.value:"urn:mpeg:mpegB:cicp:TransferCharacteristics"==m?p=i(parseInt(v.attributes.value,10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"==m?g=r(parseInt(v.attributes.value,10)):"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=m&&("urn:mpeg:dash:ssr:2023"==m&&e.g.dash.enableFastSwitching?y=!0:d=!0)}var b=null;for(h=fi(n,"SupplementalProperty"),h=a(h),v=h.next();!v.done;v=h.next())v=v.value,m=v.attributes.schemeIdUri,"http://dashif.org/guidelines/last-segment-number"==m?b=parseInt(v.attributes.value,10)-1:"urn:mpeg:mpegB:cicp:TransferCharacteristics"==m?p=i(parseInt(v.attributes.value,10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"==m&&(g=r(parseInt(v.attributes.value,10)));h=fi(n,"Accessibility");var w,S=new Map;for(h=a(h),v=h.next();!v.done;v=h.next())if(m=v.value,v=m.attributes.schemeIdUri,m=m.attributes.value,"urn:scte:dash:cc:cea-608:2015"==v)if(v=1,null!=m){m=m.split(";");for(var _=a(m),T=_.next();!T.done;T=_.next()){var k=T.value,E=T=void 0;k.includes("=")?(k=k.split("="),T=k[0].startsWith("CC")?k[0]:"CC"+k[0],E=k[1]||"und"):(T="CC"+v,2==m.length?v+=2:v++,E=k),S.set(T,un(E))}}else S.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==v)if(v=1,null!=m)for(m=a(m.split(";")),T=m.next();!T.done;T=m.next())T=T.value,k=_=void 0,T.includes("=")?(T=T.split("="),_="svc"+T[0],k=T[1].split(",")[0].split(":").pop()):(_="svc"+v,v++,k=T),S.set(_,un(k));else S.set("svc1","und");else"urn:mpeg:dash:role:2011"==v?null!=m&&(c.push(m),"captions"==m&&(l="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==v&&("1"==m?w="visually impaired":"2"==m&&(w="hard of hearing"));if(d)return null;d=fi(n,"ContentProtection");var A=dh(d,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),x=un(t.ja.language||"und"),C=n.attributes.label;if((d=fi(n,"Label"))&&d.length?(d=di(d[0]))&&(C=d):null!=t.ja.id&&(C=t.ja.id.toString()),d=fi(n,"Representation"),n=d.map(function(n){return(n=hg(e,t,A,l,x,C,o,c,S,n,w,b))&&(n.hdr=n.hdr||p,n.colorGamut=n.colorGamut||g,n.fastSwitching=y),n}).filter(function(e){return!!e}),0==n.length){if(u="image"==t.ja.contentType,e.g.dash.ignoreEmptyAdaptationSet||f||u)return null;throw new He(2,4,4003)}if(!t.ja.contentType||"application"==t.ja.contentType)for(t.ja.contentType=Eg(n[0].mimeType,n[0].codecs),f=a(n),v=f.next();!v.done;v=f.next())v.value.type=t.ja.contentType;for(f=t.ja.id||"__fake__"+e.T++,h=a(n),v=h.next();!v.done;v=h.next()){for(v=v.value,m=a(A.drmInfos),_=m.next();!_.done;_=m.next())_=_.value,_.keyIds=_.keyIds&&v.keyIds?new Set([].concat(s(_.keyIds),s(v.keyIds))):_.keyIds||v.keyIds;e.g.dash.enableAudioGroups&&(v.groupId=f)}return d=d.map(function(e){return e.attributes.id}).filter(nn),{id:f,contentType:t.ja.contentType,language:x,ak:o,streams:n,drmInfos:A.drmInfos,ag:u,Ei:d}}function hg(t,n,r,i,o,a,s,u,c,l,f,p){n.H=vg(t,l,n.ja,null);var g=n.H.id;if(t.J=Math.min(t.J,n.H.Da),!wg(n.H))return W("Skipping Representation",n.H),null;var y=n.ha.start;n.bandwidth=vi(l,"bandwidth",Ei)||0;var v=n.H.contentType,m=v==hT||"application"==v;v="image"==v;try{var b=void 0;if(r.Me){var w=n.H.Aa,S=Pt(w(),[r.Me.ki]),_=Or(S,t.g.retryParameters);b={bitsKey:128,blockCipherMode:"CBC",iv:r.Me.iv,firstMediaSequenceNumber:0,fetchKey:function(){var n,r,i;return A(function(o){if(1==o.g)return d(o,Ag(t,_,6),2);if(3!=o.g){if(n=o.h,!n.data||16!=n.data.byteLength)throw new He(2,4,4049);return r={name:"AES-CBC"},i=b,d(o,e.crypto.subtle.importKey("raw",n.data,r,!0,["decrypt"]),3)}i.cryptoKey=o.h,b.fetchKey=void 0,h(o)})}}}if(n.H.aesKey=b,w=function(e,n,r,i){return kg(t,e,n,r,i)},n.H.Kc)var T=Bh(n,w,b);else if(n.H.Gb)T=Gh(n,t.s,b);else if(n.H.Ob)T=Qh(n,w,t.s,!!t.l,t.g.dash.initialSegmentLimit,t.L,b,p,!1);else{var k=n.ha.duration||0,E=n.H.Aa;T={Wb:function(){var e=Ts(y,k,E());return e.zc(function(e){e.mimeType=n.H.mimeType,e.codecs=n.H.codecs}),Promise.resolve(e)}}}}catch(e){if((m||v)&&4002==e.code)return null;throw e}p=fi(l,"ContentProtection"),p=hh(p,r,t.g.dash.ignoreDrmInfo,t.g.dash.keySystemsByURI),p=new Set(p?[p]:[]),w=!1,fi(l,"SupplementalProperty").some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.attributes.schemeIdUri&&"JOC"==e.attributes.value})&&(w=!0),S=!1,m&&(S=u.includes("forced_subtitle")||u.includes("forced-subtitle"));var x;if(v&&((l=fi(l,"EssentialProperty").find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.attributes.schemeIdUri)}))&&(x=l.attributes.value),!x))return null;var C;l=n.H.codecs,n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(C="PQ"),m=n.H.id?n.ua.id+","+n.H.id:"",t.B.length&&g&&t.o.set(n.ua.id+","+g,pg(n));var P=m&&t.s[m]?t.s[m]:{id:t.T++,originalId:n.H.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){P.segmentIndex&&(P.segmentIndex.release(),P.segmentIndex=null)},segmentIndex:null,mimeType:n.H.mimeType,codecs:l,frameRate:n.H.frameRate,pixelAspectRatio:n.H.pixelAspectRatio,bandwidth:n.bandwidth,width:n.H.width,height:n.H.height,kind:i,encrypted:0<r.drmInfos.length,drmInfos:r.drmInfos,keyIds:p,language:o,originalLanguage:n.ja.language,label:a,type:n.ja.contentType,primary:s,trickModeVideo:null,emsgSchemeIdUris:n.H.emsgSchemeIdUris,roles:u,forced:S,channelsCount:n.H.Gc,audioChannelConfig:n.H.audioChannelConfig,audioSamplingRate:n.H.audioSamplingRate,spatialAudio:w,closedCaptions:c,hdr:C,colorGamut:void 0,videoLayout:void 0,tilesLayout:x,accessibilityPurpose:f,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Lt(n.H.mimeType,n.H.codecs)])};return P.createSegmentIndex=function(){var e;return A(function(t){if(1==t.g)return P.segmentIndex?t.u(0):(e=P,d(t,T.Wb(),3));e.segmentIndex=t.h,h(t)})},m&&n.rb&&!t.s[m]&&(t.s[m]=P),P}function pg(e){for(var t={},n=a(Object.keys(e)),r=n.next();!r.done;r=n.next())if(r=r.value,["period","adaptationSet","representation"].includes(r)){var i=e[r];t[r]={Kc:null,Gb:null,Ob:i.Ob,Aa:i.Aa,width:i.width,height:i.height,contentType:i.contentType,mimeType:i.mimeType,language:i.language,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,emsgSchemeIdUris:i.emsgSchemeIdUris,id:i.id,Gc:i.Gc,audioSamplingRate:i.audioSamplingRate,Da:i.Da,Ec:i.Ec}}else"periodInfo"==r?(i=e[r],t[r]={start:i.start,duration:i.duration,node:null,wd:i.wd}):t[r]=e[r];return t}function gg(e){var t,n;A(function(r){switch(r.g){case 1:return K("Updating manifest..."),t=0,p(r,2),d(r,eg(e),4);case 4:t=r.h,y(r,3);break;case 2:if(n=v(r),e.i){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),r.return();n.severity=1,e.i.onError(n)}case 3:if(!e.i)return r.return();e.i.onManifestUpdated(),yg(e,t),h(r)}})}function yg(e,t){if(!(0>e.F)){var n=e.F;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.G.X(Math.max(n-t,L(e.N)))}}function vg(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Gc:null,audioSamplingRate:null,Da:0,Nf:0},r=r||n.Aa;var i,o=t.attributes.id,s=fi(t,"BaseURL"),u=!1;if(e.h)for(var c=a(s),l=c.next();!l.done;l=c.next()){var f=l.value;l=f.attributes.serviceLocation,f=hi(f),l&&f&&(mp(e.h,o,l,f),u=!0)}u&&e.h||(i=s.map(hi)),c=t.attributes.contentType||n.contentType,l=t.attributes.mimeType||n.mimeType,f=[t.attributes.codecs||n.codecs];var d=mi(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");d&&f.push(d),f=fp(f).join(","),d=vi(t,"frameRate",Pi)||n.frameRate;var h=t.attributes.sar||n.pixelAspectRatio,p=mg(fi(t,"InbandEventStream"),n.emsgSchemeIdUris),g=fi(t,"AudioChannelConfiguration"),y=a(bg(g));g=y.next().value,y=y.next().value,g||(g=n.Gc),y||(y=n.audioChannelConfig);var v=vi(t,"audioSamplingRate",Ai)||n.audioSamplingRate;c||(c=Eg(l,f));var m=gi(t,"SegmentBase"),b=gi(t,"SegmentTemplate"),w=m?vi(m,"availabilityTimeOffset",xi)||0:0,S=b?vi(b,"availabilityTimeOffset",xi)||0:0,_=s&&s.length?vi(s[0],"availabilityTimeOffset",xi)||0:0;return w=n.Da+_+w+S,S=null,(_=gi(t,"SegmentSequenceProperties"))&&(_=gi(_,"SAP"))&&(S=vi(_,"cadence",ki)),{Aa:function(){return Pt(r(),s.length?e.h&&u?bp(e.h,o):i||[]:[])},Kc:m||n.Kc,Gb:gi(t,"SegmentList")||n.Gb,Ob:b||n.Ob,width:vi(t,"width",Ai)||n.width,height:vi(t,"height",Ai)||n.height,contentType:c,mimeType:l,codecs:f,frameRate:d,pixelAspectRatio:h,emsgSchemeIdUris:p,id:o,language:t.attributes.lang,Gc:g,audioChannelConfig:y,audioSamplingRate:v,Da:w,Ec:null,Nf:S||n.Nf}}function mg(e,t){t=t.slice(),e=a(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function bg(e){e=a(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return[n.trim().split(/ +/).length,n];case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var r=parseInt(n,10);if(!r){W("Channel parsing failure! Ignoring scheme and value",t,n);continue}return[r,n];case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(r=parseInt(n,16))){W("Channel parsing failure! Ignoring scheme and value",t,n);continue}for(e=0;r;)1&r&&++e,r>>=1;return[e,n];case"urn:mpeg:mpegB:cicp:ChannelConfiguration":r=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14];var i=parseInt(n,10);if(!i){W("Channel parsing failure! Ignoring scheme and value",t,n);continue}if(0<i&&i<r.length)return[r[i],n];continue;default:W("Unrecognized audio channel scheme:",t,n)}}return[null,null]}function wg(e){var t=e.Kc?1:0;return t+=e.Gb?1:0,0==(t+=e.Ob?1:0)?e.contentType==hT||"application"==e.contentType||(W("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',e),!1):(1!=t&&(W("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",e),e.Kc?(K("Using SegmentBase by default."),e.Gb=null):K("Using SegmentList by default."),e.Ob=null),!0)}function Sg(e,t,n,r){var i,o,a,s,u,c,l;return A(function(f){if(1==f.g)return i=[St(n)],o=Pt(t(),i),a=Or(o,e.g.retryParameters),a.method=r,s=e.i.networkingEngine.request(4,a),Pr(e.K,s),d(f,s.promise,2);if(u=f.h,"HEAD"==r){if(!u.headers||!u.headers.date)return W("UTC timing response is missing","expected date header"),f.return(0);c=u.headers.date}else c=gt(u.data);return l=Date.parse(c),isNaN(l)?(W("Unable to parse date from UTC timing response"),f.return(0)):f.return(l-Date.now())})}function _g(e,t,n){var r,i,o,s,u,c,l,f,h;return A(function(g){switch(g.g){case 1:r=n.map(function(e){return{scheme:e.attributes.schemeIdUri,value:e.attributes.value}}),i=e.g.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),o=a(r),s=o.next();case 2:if(s.done){g.u(4);break}switch(u=s.value,p(g,5),c=u.scheme,l=u.value,c){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return g.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return g.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return f=Date.parse(l),g.return(isNaN(f)?0:f-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":F("NTP UTCTiming scheme is not supported");break;default:F("Unrecognized scheme in UTCTiming element",c)}g.u(9);break;case 7:return d(g,Sg(e,t,l,"HEAD"),10);case 10:return g.return(g.h);case 8:return d(g,Sg(e,t,l,"GET"),11);case 11:return g.return(g.h);case 9:y(g,3);break;case 5:h=v(g),W("Error fetching time from UTCTiming elem",h.message);case 3:s=o.next(),g.u(2);break;case 4:return F("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),g.return(0)}})}function Tg(e,t,n,r,i){var o=r.attributes.schemeIdUri||"",s=r.attributes.value||"",u=vi(r,"timescale",Ai)||1;r=a(fi(r,"Event"));for(var c=r.next();!c.done;c=r.next()){c=c.value;var l=vi(c,"presentationTime",Ai)||0,f=vi(c,"duration",Ai)||0;l=l/u+t,f=l+f/u,null!=n&&(l=Math.min(l,t+n),f=Math.min(f,t+n)),f<i||(c={schemeIdUri:o,value:s,startTime:l,endTime:f,id:c.attributes.id||"",eventElement:Oi(c),eventNode:c},e.i.onTimelineRegionAdded(c))}}function kg(e,t,n,r,i){var o,a,s,u;return A(function(c){return 1==c.g?(o=PT,a=i?0:1,s=eu(t,n,r,e.g.retryParameters),d(c,Ag(e,s,o,{type:a}),2)):(u=c.h,c.return(u.data))})}function Eg(e,t){return t=Lt(e,t),Xt(t)?hT:e.split("/")[0]}function Ag(e,t,n,r){return t=e.i.networkingEngine.request(n,t,r),Pr(e.K,t),t.promise}function xg(e){var t=e.j.Cd;if(!e.j.me||!t||!e.B.length)return[];var n=Date.now()/1e3,r=e.B.filter(function(e){return!(e=Ai(e.attributes.ttl))||t+e>n}).map(hi).filter(nn);return r.length?Pt(e.A,r):[]}function Cg(){}function Pg(e,t,n){this.type=e,this.g=t,this.segments=n||null}function Ig(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=void 0===r?null:r}function jg(e){var t=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}function Mg(e,t){return e=e.attributes.filter(function(e){return e.name==t}),e.length?e[0]:null}function Og(e,t,n){return(e=Mg(e,t))?e.value:n||null}function Rg(e,t){if(!(e=Mg(e,t)))throw new He(2,4,4023,t);return e.value}function Dg(e,t,n){n=void 0===n?[]:n,this.g=t,this.h=e,this.vb=n}function Lg(e,t){this.name=e,this.value=t}function Ng(e,t){return e.filter(function(e){return e.name==t})}function Ug(e,t){return e.filter(function(e){return Rg(e,"TYPE")==t})}function Bg(e,t){e=a(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Fg(e,t,n){return n=void 0===n?0:n,(e=Bg(e,t))?Number(e.value):n}function Hg(e,t,n){return t?Vg(e,[t],n):[]}function Vg(e,t,n){if(!t.length)return[];t=Pt(e,t),e=[],t=a(t);for(var r=t.next();!r.done;r=t.next()){var i=e,o=i.push,s=r.value;if((r=n)&&r.size){s=String(s).replace(/%7B/g,"{").replace(/%7D/g,"}");var u=s.match(/{\$\w*}/g);if(u){u=a(u);for(var c=u.next();!c.done;c=u.next()){c=c.value;var l=c.slice(2,c.length-1),f=r.get(l);if(!f)throw V("A variable has been found that is not declared",l),new He(2,4,4039,l);s=s.replace(c,f)}}r=s}else r=s;o.call(i,r)}return e}function Wg(){this.g=0}function Kg(e,t){t=gt(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new He(2,4,4015);t=0;for(var r=!0,i=a(n),o=i.next();!o.done;o=i.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=qg(e,o),--e.g,UE.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(r=!0)}for(i=[],r=!0,o=0;o<n.length;o++){var s=n[o],u=n[o+1];if(/^#(?!EXT)/m.test(s)||r)r=!1;else{if(s=qg(e,s),BE.includes(s.name)){if(1!=t)throw new He(2,4,4017);s=n.splice(o,n.length-o),n=[],r=[],o=[],u=null,s=a(s);for(var c=s.next();!c.done;c=s.next())c=c.value,/^(#EXT)/.test(c)?(c=qg(e,c),UE.includes(c.name)?i.push(c):"EXT-X-MAP"==c.name?u=c:"EXT-X-PART"==c.name?o.push(c):"EXT-X-PRELOAD-HINT"==c.name?"PART"==Og(c,"TYPE")?null!=Og(c,"BYTERANGE-START")?null!=Og(c,"BYTERANGE-LENGTH")&&o.push(c):o.push(c):"MAP"==Og(c,"TYPE")&&(c.name="EXT-X-MAP",u=c):r.push(c)):/^#(?!EXT)/m.test(c)||(c=c.trim(),u&&r.push(u),n.push(new Dg(c,r,o)),r=[],o=[]);return o.length&&(u&&r.push(u),n.push(new Dg("",r,o))),new Pg(t,i,n)}i.push(s),"EXT-X-STREAM-INF"==s.name&&(s.attributes.push(new Lg("URI",u)),r=!0)}}return new Pg(t,i)}function qg(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new He(2,4,4016,t);t=n[1];var r=n[2];n=[];var i;if(r){r=new _f(r);var o;(o=kf(r,/^([^,=]+)(?:,|$)/g))&&(i=o[1]);for(var a=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=kf(r,a);)n.push(new Lg(o[1],o[2]||o[3])),Tf(r)}return new Ig(e,t,n,i)}function Gg(){}function zg(e){try{var t=Xg(e);return Sr({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return br(e)}}function Xg(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw V("Bad data URI, failed to parse scheme"),new He(2,1,1004,t);if(n=n.slice(1).join(":").split(","),2>n.length)throw V("Bad data URI, failed to extract encoding and MIME type"),new He(2,1,1004,t);var r=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=r.split(";"),r=n[0];var i=!1;1<n.length&&"base64"==n[n.length-1]&&(i=!0,n.pop());var o;return o=i?Et(t):mt(t),{data:o,contentType:r}}function Yg(){var e=this;this.g=this.i=null,this.C=1,this.s=new Map,this.J=new Map,this.N=new Map,this.N.set("video",new Map),this.N.set("audio",new Map),this.N.set(hT,new Map),this.N.set("image",new Map),this.Ya=new Set,this.h=new Map,this.j=null,this.L="",this.La=new Wg,this.A=-1,this.aa=1/0,this.$=this.qb=!1,this.B=new qe(function(){zy(e)}),this.ra=WE,this.o=null,this.Za=0,this.m=1/0,this.Ka=this.wa=this.T=0,this.W=new Cr,this.G=new Map,this.I=new Map,this.ba=new Map,this.fa=new Map,this.K=new Map,this.la=new Map,this.qa=new Map,this.ib=this.F=!1,this.hb=new D(5),this.l=null,this.da=!0}function Jg(e,t){return Xy(e)?e.N.get(t.type):t.je}function $g(e,t){var n,r,i,o,u,c,l,f,p,g,y,v,m,b,w,S,_,T,k,E,x,C,P,I,j,M,O,R,D,L;return A(function(A){if(1==A.g){for(n=[],r=a(t.M()),i=r.next();!i.done;i=r.next())o=i.value,u=new Ie(o),c=u.g,t.Td&&(0<=t.lb&&c.add("_HLS_msn",String(t.lb)),0<=t.mb&&c.add("_HLS_part",String(t.mb))),t.Ud&&c.add("_HLS_skip","YES"),Fe(c)&&Re(u,c),n.push(u.toString());return d(A,Gy(e,n,!0),2)}if(3!=A.g){if(l=A.h,!t.stream.segmentIndex)return A.return();if(f=Kg(e.La,l.data),1!=f.type)throw new He(2,4,4017);return p=l.uri,p==l.originalUri||t.M().includes(p)||t.Mg.push(p),g=Ng(f.g,"EXT-X-DEFINE"),y=oy(e,g,p),v=t.stream,m=Jg(e,t),d(A,Oy(e,f,v.mimeType,t.M,y),3)}b=A.h,w=b.keyIds,S=b.drmInfos,_=function(e,t){return e.size===t.size&&[].concat(s(e)).every(function(e){return t.has(e)})},_(v.keyIds,w)||(v.keyIds=w,v.drmInfos=S,e.i.newDrmInfo(v)),T=Hy(e,f,m,y,t.M,t.type),k=T.segments,(E=T.bandwidth)&&(v.bandwidth=E),v.segmentIndex.yd(k,e.j.jb()),k.length&&(x=Fg(f.g,"EXT-X-MEDIA-SEQUENCE",0),P=(C=Bg(f.g,"EXT-X-SKIP"))?Number(Og(C,"SKIPPED-SEGMENTS")):0,I=jy(x,k),j=I.lb,M=I.mb,t.lb=j+P,t.mb=M,O=m.get(x),v.segmentIndex.Ia(O)),R=v.segmentIndex.g[0]||null,t.ic=R.startTime,D=k[k.length-1],t.Bb=D.endTime,(L=Bg(f.g,"EXT-X-ENDLIST"))&&(t.rd=!0),Dy(e,f),h(A)})}function Qg(e,t){for(var n=-1==e.A,r=a(t),i=r.next();!i.done;i=r.next()){i=i.value;var o=i.stream.segmentIndex,s=Jg(e,i);if(o=o.g[0]||null){s=a(s);for(var u=s.next();!u.done;u=s.next()){u=a(u.value);var c=u.next().value;if(u.next().value==o.startTime){n&&(e.A=Math.max(e.A,c)),i.Te=c;break}}}}if(!(0>e.A))for(q("Syncing HLS streams against base sequence number:",e.A),t=a(t),i=t.next();!i.done;i=t.next())n=i.value,Cy(e,n.type)&&(r=n.stream.segmentIndex)&&0<(i=e.A-n.Te)&&(r.g.splice(0,i),r=r.g[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),ey(e,n,r))}function Zg(e,t){if(1/0==e.aa){t=a(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value.stream.segmentIndex.g[0]||null;null!=r&&null!=r.h&&(e.aa=Math.min(e.aa,r.h))}}if(t=e.aa,1/0!=t)for(q("Syncing HLS streams against base time:",t),r=a(e.h.values()),n=r.next();!n.done;n=r.next())if(n=n.value,!Cy(e,n.type)){var i=n.stream.segmentIndex;if(null!=i){var o=i.g[0]||null;if(null==o.h)B("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.M(),"Expect AV sync issues!");else for(ey(e,n,o.h-t-o.startTime),n=a(i),i=n.next();!i.done;i=n.next())i.value.Xf(t)}}}function ey(e,t,n){t.ic+=n,t.Bb+=n,e=Jg(e,t);for(var r=a(e),i=r.next();!i.done;i=r.next()){var o=a(i.value);i=o.next().value,o=o.next().value,e.set(i,o+n)}q("Offset",n,"applied to",t.M())}function ty(e,t,n){var r,i,o,s,u,c,l,f,h,p,g,y,v,m,b,w,S,_,T,k,E,x,C,P,I,j,M,O,R,D,L,N,U,B,F,H,V,W,K;return A(function(A){switch(A.g){case 1:return r=Kg(e.La,t),(i=Ng(r.g,"EXT-X-DEFINE"),o=[],s=[],u=[],e.j=new ts(null,0),e.j.nc(!0),c=function(){return[n]},1==r.type)?(e.da=!1,m=Ng(r.g,"EXT-X-DEFINE"),b=oy(e,m,e.L),d(A,ny(e,r,c,b),7)):(iy(e,i),l=Ng(r.g,"EXT-X-MEDIA"),f=Ng(r.g,"EXT-X-STREAM-INF"),h=Ng(r.g,"EXT-X-IMAGE-STREAM-INF"),p=Ng(r.g,"EXT-X-I-FRAME-STREAM-INF"),g=Ng(r.g,"EXT-X-SESSION-KEY"),y=Ng(r.g,"EXT-X-SESSION-DATA"),v=Ng(r.g,"EXT-X-CONTENT-STEERING"),sy(e,y),d(A,uy(e,v),4));case 4:return ay(e,f),wy(e,l),d(A,hy(e,f,g,l,c,e.s),5);case 5:return o=A.h,s=cy(e,l),d(A,fy(e,h,p),6);case 6:u=A.h,A.u(3);break;case 7:return w=A.h,S=w.type,_=w.mimeType,T=w.codecs,k=w.language,E=w.height,x=w.width,C=w.channelCount,P=w.sampleRate,I=w.closedCaptions,j=w.Hd,M=w.colorGamut,d(A,Iy(e,e.C++,b,r,c,T,S,k,!0,"Media Playlist",C,I,null,!1,P,!1,_),8);case 8:O=A.h,e.h.set(n,O),"video"==S&&qy(O.stream,x,E,null,j,null,M),o.push({id:0,language:un(k||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==S?O.stream:null,video:"video"==S?O.stream:null,bandwidth:O.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[],label:null});case 3:if(!e.i)throw new He(2,7,7001);if(1==r.type&&(Xy(e)&&(Ly(e,r),R=e.m,e.B.X(R)),D=Array.from(e.h.values()),xy(e,D),ry(e)),e.o={presentationTimeline:e.j,variants:o,textStreams:s,imageStreams:u,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null},e.$||!e.g.hls.disableCodecGuessing){A.u(9);break}for(L=[],N=a(e.o.variants),U=N.next();!U.done;U=N.next())B=U.value,B.audio&&""===B.audio.codecs&&L.push(B.audio.createSegmentIndex()),B.video&&""===B.video.codecs&&L.push(B.video.createSegmentIndex());return d(A,Promise.all(L),9);case 9:if(e.i.makeTextStreamsForClosedCaptions(e.o),1==o.length){for(F=[],H=o[0],V=a([H.video,H.audio]),W=V.next();!W.done;W=V.next())(K=W.value)&&!K.segmentIndex&&F.push(K.createSegmentIndex());if(0<F.length)return d(A,Promise.all(F),0)}A.u(0)}})}function ny(e,t,n,r){var i,o,s,u,c,l,f,h,p,g,y,v,m,b,w,S,_,T,k,E,x;return A(function(A){switch(A.g){case 1:if(i=cp(e.g.hls.mediaPlaylistFullMimeType),!t.segments.length)return A.return(i);if(o=t.segments[0],s=Hg(n(),o.h,r),u=s[0],c=new Ie(u),l=c.Sa.split(".").pop(),f=FE[l])return A.return(cp(f));if(h=PT,p=null,g=Ny(e,t,o.g,n,r),e.ba.clear(),!g){A.u(2);break}return y=eu(g.M(),g.ac(),g.Yb(),e.g.retryParameters),d(A,Jy(e,y,h,{type:0}),3);case 3:v=A.h,p=v.data;case 2:return m=0,b=null,(w=Bg(o.g,"EXT-X-BYTERANGE"))&&(S=a(Fy(null,w.value)),m=S.next().value,b=S.next().value),_=eu(s,m,b,e.g.retryParameters),d(A,Jy(e,_,h,{type:1}),4);case 4:if(T=A.h,(k=T.headers["content-type"])&&(k=k.split(";")[0].toLowerCase()),"ts"==l||"video/mp2t"==k){var C=T.data,P=he(C);P=(new da).parse(P);var I=P.ld();P=P.mf();var j=[],M=!1,O=!1;switch(I.audio){case"aac":case"aac-loas":j.push("mp4a.40.2"),M=!0;break;case"mp3":j.push("mp4a.40.34"),M=!0;break;case"ac3":j.push("ac-3"),M=!0;break;case"ec3":j.push("ec-3"),M=!0;break;case"opus":j.push("opus"),M=!0}switch(I.video){case"avc":P.Ha?j.push(P.Ha):j.push("avc1.42E01E"),O=!0;break;case"hvc":P.Ha?j.push(P.Ha):j.push("hvc1.1.6.L93.90"),O=!0;break;case"av1":j.push("av01.0.01M.08"),O=!0}if(j.length){if(I=M&&!O,M=new Map,O){O=new me("video/mp2t"),O.i(C),C=a(O.j());for(var R=C.next();!R.done;R=C.next())R=R.value,M.set(R,R);O.g()}P={type:I?"audio":"video",mimeType:"video/mp2t",codecs:j.join(", "),language:null,height:P.height,width:P.width,channelCount:null,sampleRate:null,closedCaptions:M,Hd:null,colorGamut:null}}else P=null;if(E=P)return A.return(E)}else if(("mp4"==l||"cmfv"==l||"m4s"==l||"fmp4"==l||"video/mp4"==k||"audio/mp4"==k||"video/iso.segment"==k)&&(x=lp(p,T.data)))return A.return(x);return A.return(i)}})}function ry(e){if(Xy(e)){if(e.ra==qE){for(var t,n=t=1/0,r=a(e.h.values()),i=r.next();!i.done;i=r.next())i=i.value,i.stream.segmentIndex&&"text"!=i.stream.type&&(t=Math.min(t,i.Bb),n=Math.min(n,i.ic));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.j.s),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.j.ye(t)}if(!e.j.m)for(t=a(e.h.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||"audio"!=n.type&&"video"!=n.type||(n=n.stream.segmentIndex.get(0))&&n.h&&e.j.Uf(n.h)}else e.j.Va(Ey(e));if(!e.j.m)for(t=a(e.h.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||"audio"!=n.type&&"video"!=n.type||(n=n.stream.segmentIndex.get(0))&&n.h&&e.j.Uf(n.h);e.j.ge()}function iy(e,t){var n=new Ie(e.L).g;t=a(t);for(var r=t.next();!r.done;r=t.next()){var i=r.value;r=Og(i,"NAME");var o=Og(i,"VALUE");i=Og(i,"QUERYPARAM"),r&&o&&(e.s.has(r)||e.s.set(r,o)),i&&(r=n.get(i)[0])&&!e.s.has(r)&&e.s.set(i,r)}}function oy(e,t,n){n=new Ie(n).g;var r=new Map;t=a(t);for(var i=t.next();!i.done;i=t.next()){var o=i.value,s=Og(o,"NAME"),u=Og(o,"VALUE");i=Og(o,"QUERYPARAM"),o=Og(o,"IMPORT"),s&&u&&(r.has(s)||r.set(s,u)),i&&(s=n.get(i)[0])&&!r.has(s)&&r.set(i,s),o&&(i=e.s.get(o))&&r.set(o,i)}return r}function ay(e,t){t=a(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,i=Og(r,"AUDIO");n=Og(r,"VIDEO");var o=Og(r,"SUBTITLES");if(r=gy(e,r),o){var s=Ot(hT,r);e.I.set(o,s),we(r,s)}i&&(o=Ot("audio",r),o||(o=e.g.hls.defaultAudioCodec),e.I.set(i,o)),n&&(i=Ot("video",r),i||(i=e.g.hls.defaultVideoCodec),e.I.set(n,i))}}function sy(e,t){t=a(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,i=Og(r,"DATA-ID");n=Og(r,"URI");var o=Og(r,"LANGUAGE");r=Og(r,"VALUE"),i=(new Map).set("id",i),n&&i.set("uri",Hg([e.L],n,e.s)[0]),o&&i.set("language",o),r&&i.set("value",r),n=new Er("sessiondata",i),e.i&&e.i.onEvent(n)}}function uy(e,t){var n,r,i,o,s,u;return A(function(c){if(!e.i||!e.g)return c.return();for(r=a(t),i=r.next();!i.done;i=r.next())if(o=i.value,s=Og(o,"PATHWAY-ID"),u=Og(o,"SERVER-URI"),s&&u){e.l=new pp(e.i),e.l.configure(e.g),e.l.i=[e.L],e.l.setManifestType("HLS"),e.l.h=s,n=gp(e.l,u);break}return d(c,n,0)})}function cy(e,t){var n=Ug(t,"SUBTITLES");t=n.map(function(t){if(e.g.disableText)return null;try{return Sy(e,[t],new Map).stream}catch(t){if(e.g.hls.ignoreTextStreamFailures)return null;throw t}}),n=a(n);for(var r=n.next();!r.done;r=n.next()){var i=Rg(r.value,"GROUP-ID");if((r=e.I.get(i))&&(i=e.J.get(i))){i=a(i);for(var o=i.next();!o.done;o=i.next())o=o.value,o.stream.codecs=r,o.stream.mimeType=Vy(hT,r)||Wy(hT),ly(o.stream)}}return t.filter(function(e){return e})}function ly(e){e.fullMimeTypes=new Set([Lt(e.mimeType,e.codecs)])}function fy(e,t,n){var r,i;return A(function(o){return 1==o.g?(r=t.map(function(t){var n,r,i;return A(function(o){if(1==o.g)return(n=e.g.disableThumbnails)?o.return(null):(p(o,2),d(o,_y(e,t),4));if(2!=o.g)return r=o.h,o.return(r.stream);if(i=v(o),e.g.hls.ignoreImageStreamFailures)return o.return(null);throw i})}).concat(n.map(function(t){if(e.g.disableThumbnails)return null;try{var n=Rg(t,"URI"),r=Og(t,"CODECS")||"";if(e.h.has(n))var i=e.h.get(n);else{var o=Og(t,"LANGUAGE"),s=Og(t,"NAME"),u=Og(t,"CHARACTERISTICS"),c=ky(e,e.C++,[n],r,"image",o,!1,s,null,null,u,!1,null,!1),l=Og(t,"RESOLUTION"),f=a(l?l.split("x"):[null,null]),d=f.next().value,h=f.next().value;c.stream.width=Number(d)||void 0,c.stream.height=Number(h)||void 0;var p=Og(t,"BANDWIDTH");p&&(c.stream.bandwidth=Number(p)),e.h.set(n,c),i=c}return t=i,"mjpg"!==t.stream.codecs?null:t.stream}catch(t){if(e.g.hls.ignoreImageStreamFailures)return null;throw t}})),d(o,Promise.all(r),2)):(i=o.h,o.return(i.filter(function(e){return e})))})}function dy(e,t,n){t=t.filter(function(e){var t=Og(e,"URI")||"";return"SUBTITLES"!=Og(e,"TYPE")&&""!=t});var r={};t=a(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;var o=jg(i);r[o]?r[o].push(i):r[o]=[i]}for(var s in r)Sy(e,r[s],n)}function hy(e,t,n,r,i,o){var u,c,l,f,h,p,g,y,v,m,b,w,S,_,T,k,E,x,C,P,I,j,M,O,R,D,L,N,U,B,F,H,V,K,q;return A(function(A){switch(A.g){case 1:if(u=[],c=new Set,!(0<n.length)){A.u(2);break}l=a(n),f=l.next();case 3:if(f.done){A.u(2);break}if(h=f.value,p=Rg(h,"METHOD"),g=Og(h,"KEYFORMAT")||"identity",y=null,"NONE"==p){A.u(4);break}if($y(p)){v=Hg(i(),Rg(h,"URI"),o),m=v.sort().join(""),e.K.has(m)||(b=Or(v,e.g.retryParameters),w=Jy(e,b,6),e.K.set(m,w)),A.u(4);break}if("identity"!=g){y=(S=VE[g])?S(h,""):null,A.u(6);break}return d(A,Qy(e,h,"",i,null,o),9);case 9:y=A.h;case 6:if(y){if(y.keyIds)for(_=a(y.keyIds),T=_.next();!T.done;T=_.next())k=T.value,c.add(k);u.push(y)}else W("Unsupported HLS KEYFORMAT",g);case 4:f=l.next(),A.u(3);break;case 2:for(E={},x=a(t),C=x.next();!C.done;C=x.next())P=C.value,I=jg(P),E[I]?E[I].push(P):E[I]=[P];j=[];for(M in E)O=E[M],R=O[0],D=Og(R,"FRAME-RATE"),L=Number(Og(R,"AVERAGE-BANDWIDTH"))||Number(Rg(R,"BANDWIDTH")),N=Og(R,"RESOLUTION"),U=a(N?N.split("x"):[null,null]),B=U.next().value,F=U.next().value,H=Og(R,"VIDEO-RANGE"),(V=Og(R,"REQ-VIDEO-LAYOUT"))&&V.includes(",")&&(K=V.split(",").filter(function(e){return"CH-STEREO"==e||"CH-MONO"==e}),V=K[0]),V=V||"CH-MONO",q=py(e,O,r,L),j.push.apply(j,s(by(e,q.audio,q.video,L,B,F,D,H,V,u,c)));return A.return(j.filter(function(e){return null!=e}))}})}function py(e,t,n,r){for(var i={audio:[],video:[]},o=new Map,u=[],c=!1,l=!1,f=a(t),d=f.next();!d.done;d=f.next()){d=d.value;var h=Og(d,"AUDIO"),p=Og(d,"VIDEO"),g=h||p;if(g){u.includes(g)||u.push(g);var y=Og(d,"PATHWAY-ID");y&&o.set(g,y),h?c=!0:p&&(l=!0),q("Guessing stream type for",d.toString())}}u.length&&n.length&&(f=n.filter(function(e){return u.includes(Rg(e,"GROUP-ID"))}),dy(e,f,o)),f=(o=u.sort().join(","))&&e.J.has(o)?e.J.get(o):[],c?i.audio.push.apply(i.audio,s(f)):l&&i.video.push.apply(i.video,s(f)),d=!1;var v=t.map(function(e){return Rg(e,"URI")});return l=i.audio.find(function(e){return e&&e.M().find(function(e){return v.includes(e)})}),c=gy(e,t[0]),h=Ot("video",c),(p=Ot("audio",c))&&!h?(l="audio",q("Guessing audio-only."),d=0<i.audio.length):!i.audio.length&&!i.video.length&&p&&h?(q("Guessing multiplexed audio+video."),l="video",c=[[h,p].join()]):i.audio.length&&l?(q("Guessing audio-only."),l="audio",d=!0):i.video.length&&!i.audio.length?(q("Guessing audio-only."),l="audio"):(q("Guessing video-only."),l="video"),d||(y=g=p=h=d=null,!f.length&&(n=n.find(function(e){var t=Og(e,"URI")||"",n=Og(e,"TYPE");return e=Rg(e,"GROUP-ID"),"SUBTITLES"!=n&&""==t&&u.includes(e)}))&&(d=Og(n,"LANGUAGE"),h=Og(n,"NAME"),p=yy(n),my(n),g=Og(n,"CHARACTERISTICS"),y=vy(n)),e=Ty(e,t,c,l,d,h,p,g,y),o&&(e.stream.groupId=o),f.length||(e.stream.bandwidth=r),i[e.stream.type]=[e]),i}function gy(e,t){var n=Og(t,"CODECS")||"";return t=Og(t,"SUPPLEMENTAL-CODECS"),e.$=0<n.length,e.$||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),e.push.apply(e,s(t))),fp(e)}function yy(e){return(e=Og(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function vy(e){return(e=Og(e,"SAMPLE-RATE"))?parseInt(e,10):null}function my(e){return!!(e=Og(e,"CHANNELS"))&&e.includes("/JOC")}function by(e,t,n,r,i,o,s,u,c,l,f){for(var d=a(n),h=d.next();!h.done;h=d.next())qy(h.value.stream,i,o,s,u,c,null);for(i=e.g.disableAudio,t.length&&!i||(t=[null]),i=e.g.disableVideo,n.length&&!i||(n=[null]),i=[],t=a(t),o=t.next();!o.done;o=t.next())for(o=o.value,s=a(n),u=s.next();!u.done;u=s.next()){var p=u.value;(u=o?o.stream:null)&&(u.drmInfos=l,u.keyIds=f),(c=p?p.stream:null)&&(c.drmInfos=l,c.keyIds=f),d=o?o.stream.drmInfos:null,h=p?p.stream.drmInfos:null,p=p?p.M().sort().join(","):"";var g=o?o.M().sort().join(","):"";p=p+" - "+g,u&&c&&!so(d,h)?W("Incompatible DRM info in HLS variant.  Skipping."):e.Ya.has(p)?q("Skipping variant which only differs in text streams."):(u={id:e.C++,language:u?u.language:"und",disabledUntilTime:0,primary:!!u&&u.primary||!!c&&c.primary,audio:u,video:c,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[],label:null},i.push(u),e.Ya.add(p))}return i}function wy(e,t){t=Ug(t,"CLOSED-CAPTIONS"),e.da=0==t.length,t=a(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,i=Og(r,"LANGUAGE");n=un(i||"und"),i||(i=Og(r,"NAME"))&&(n=i),i=Rg(r,"GROUP-ID"),r=Rg(r,"INSTREAM-ID").replace("SERVICE","svc"),e.G.get(i)||e.G.set(i,new Map),e.G.get(i).set(r,n)}}function Sy(e,t,n){for(var r=[],i=[],o=new Map,s=a(t),u=s.next();!u.done;u=s.next()){var c=u.value;u=Rg(c,"URI"),c=Rg(c,"GROUP-ID"),r.push(u),i.push(c),o.set(c,u)}if(s=i.sort().join(","),u=t[0],t="",c=Rg(u,"TYPE").toLowerCase(),"subtitles"==c&&(c=hT),c==hT)t=Og(u,"CODECS")||"";else{i=a(i);for(var l=i.next();!l.done;l=i.next())if(l=l.value,e.I.has(l)){t=e.I.get(l);break}}if(i=r.sort().join(","),e.h.has(i))return e.h.get(i);if(l=e.C++,e.l){o=a(o);for(var f=o.next();!f.done;f=o.next()){var d=a(f.value);f=d.next().value,d=d.next().value,(f=n.get(f))&&mp(e.l,l,f,d)}}n=Og(u,"LANGUAGE"),o=Og(u,"NAME"),f="YES"==Og(u,"DEFAULT"),d="audio"==c?yy(u):null;var h="audio"==c&&my(u),p=Og(u,"CHARACTERISTICS"),g="YES"==Og(u,"FORCED");return u="audio"==c?vy(u):null,r=ky(e,l,r,t,c,n,f,o,d,null,p,g,u,h),r.stream&&(r.stream.groupId=s),e.J.has(s)?e.J.get(s).push(r):e.J.set(s,[r]),e.h.set(i,r),r}function _y(e,t){var n,r,i,o,a,s,u,c,l,f;return A(function(h){return 1==h.g?(n=Rg(t,"URI"),r=Og(t,"CODECS","jpeg")||"",e.h.has(n)?h.return(e.h.get(n)):(i=Og(t,"LANGUAGE"),o=Og(t,"NAME"),a=Og(t,"CHARACTERISTICS"),s=ky(e,e.C++,[n],r,"image",i,!1,o,null,null,a,!1,null,!1),(u=Og(t,"RESOLUTION"))?d(h,s.stream.createSegmentIndex(),3):h.u(2))):(2!=h.g&&(c=s.stream.segmentIndex.get(0),l=c.tilesLayout)&&(s.stream.width=Number(u.split("x")[0])*Number(l.split("x")[0]),s.stream.height=Number(u.split("x")[1])*Number(l.split("x")[1])),(f=Og(t,"BANDWIDTH"))&&(s.stream.bandwidth=Number(f)),e.h.set(n,s),h.return(s))})}function Ty(e,t,n,r,i,o,s,u,c){for(var l=e.C++,f=[],d=a(t),h=d.next();!h.done;h=d.next()){var p=h.value;h=Rg(p,"URI"),p=Og(p,"PATHWAY-ID"),e.l&&p&&mp(e.l,l,p,h),f.push(h)}if(d=f.sort().join(","),e.h.has(d))return e.h.get(d);e:{if(t=Og(t[0],"CLOSED-CAPTIONS"),"video"==r)if(t){if("NONE"!=t){t=e.G.get(t);break e}e.da=!1}else if(!t&&e.G.size)for(t=a(e.G.keys()).next();!t.done;){t=e.G.get(t.value);break e}t=null}return n=Mt(r,n),r=ky(e,l,f,n,r,i,!1,o,s,t,u,!1,c,!1),e.h.set(d,r),r}function ky(e,t,n,r,i,o,s,u,c,l,f,p,g,y){function v(t){var n,v,_,T,k,E,x,C,P,I,j,M,O,R,D,L,N,U,B,F,H,V;return A(function(A){switch(A.g){case 1:return n=pT,v=S.M(),d(A,Gy(e,S.M(),!0),2);case 2:if(_=A.h,t.aborted)return A.return();if(T=_.uri,T==_.originalUri||v.includes(T)||w.push(T),k=Kg(e.La,_.data),1!=k.type)throw new He(2,4,4017);if(E=Ng(k.g,"EXT-X-DEFINE"),x=oy(e,E,T),C=void 0,P=!1,!(!e.$&&e.g.hls.disableCodecGuessing||e.da&&i==n.ga&&!e.g.hls.disableClosedCaptionsDetection)){A.u(3);break}if((I=0<k.segments.length)&&(j=k.segments[0],Bg(j.g,"EXT-X-GAP")&&(I=!1)),!I){A.u(3);break}return e.da=!1,d(A,ny(e,k,m,x),5);case 5:M=A.h,!M.closedCaptions.size||l&&l.size==M.closedCaptions.size||(l=M.closedCaptions,P=!0),!e.$&&e.g.hls.disableCodecGuessing&&(C=M.mimeType,r=M.codecs);case 3:return O=Xy(e),d(A,Iy(e,0,x,k,m,r,i,o,s,u,c,l,f,p,g,y,C),6);case 6:if(R=A.h,t.aborted)return A.return();if(D=R.stream,Xy(e)&&!O&&Ly(e,k),S.ic=R.ic,S.Bb=R.Bb,S.Ud=R.Ud,S.Td=R.Td,S.rd=R.rd,S.je=R.je,S.lb=R.lb,S.mb=R.mb,S.wf=!0,b.segmentIndex=D.segmentIndex,b.encrypted=D.encrypted,b.drmInfos=D.drmInfos,b.keyIds=D.keyIds,b.mimeType=D.mimeType,b.bandwidth=b.bandwidth||D.bandwidth,b.codecs=b.codecs||D.codecs,b.closedCaptions=b.closedCaptions||D.closedCaptions,ly(b),b.drmInfos.length&&e.i.newDrmInfo(b),e.o&&P&&e.i.makeTextStreamsForClosedCaptions(e.o),i==n.ga||i==n.V)for(L=a(e.h.values()),N=L.next();!N.done;N=L.next())U=N.value,U.wf||U.type!=i||(U.stream.mimeType=D.mimeType,ly(U.stream));i==n.pa&&(B=D.segmentIndex.get(0))&&B.ea&&(b.mimeType="application/mp4",ly(b)),Py(e)&&(e.qb?xy(e,[S]):(e.qb=!0,F=Array.from(e.h.values()),H=F.filter(function(e){return e.stream.segmentIndex}),xy(e,H),ry(e),0<(V=e.m)&&e.B.X(V))),h(A)}})}function m(){return e.l&&1<n.length?bp(e.l,t):w.concat(Vg([e.L],n,e.s))}var b=My(e,r,i,o,s,u,c,l,f,p,g,y),w=[],S={stream:b,type:i,Mg:w,M:m,ic:0,Bb:0,je:new Map,Ud:!1,Td:!1,rd:!1,Te:-1,lb:-1,mb:-1,wf:!1},_=null,T=new AbortController;return b.createSegmentIndex=function(){return _||(T=new AbortController,_=new Promise(function(e){e(v(T.signal))}))},b.closeSegmentIndex=function(){_&&!b.segmentIndex&&T.abort(),b.segmentIndex&&(b.segmentIndex.release(),b.segmentIndex=null),_=null},S}function Ey(e){var t=1/0;e=a(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&"text"!=n.stream.type&&(t=Math.min(t,n.Bb));return t}function Ay(e,t){var n=[];t=a(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.zc(function(e){n.push(e)});e.j.zd(n)}function xy(e,t){if(!Xy(e))for(var n=Ey(e),r=a(t),i=r.next();!i.done;i=r.next())i.value.stream.segmentIndex.yc(0,n);Ay(e,t.map(function(e){return e.stream})),e.g.hls.ignoreManifestProgramDateTime?Qg(e,t):(Zg(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&Qg(e,t))}function Cy(e,t){return!!e.g.hls.ignoreManifestProgramDateTime||e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function Py(e){if(!e.o)return!1;var t=[],n=[];e=a(e.o.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(e){return e.segmentIndex})||0<n.length&&!n.some(function(e){return e.segmentIndex}))}function Iy(e,t,n,r,i,o,a,s,u,c,l,f,h,p,g,y,v){var m,b,w,S,_,T,k,E,x,C,P,I,j,M,O,R,D,L,N,U,B;return A(function(t){switch(t.g){case 1:var A=Bg(r.g,"EXT-X-PLAYLIST-TYPE"),F=Bg(r.g,"EXT-X-ENDLIST");if(F=A&&"VOD"==A.value||F,A=A&&"EVENT"==A.value&&!F,A=!F&&!A,F?Yy(e,WE):A?Yy(e,qE):Yy(e,KE),Xy(e)&&Dy(e,r),m=Xy(e)?e.N.get(a):new Map,b=Hy(e,r,m,n,i,a),w=b.segments,S=b.bandwidth,v){t.u(2);break}return d(t,Ky(e,a,o,w),3);case 3:v=t.h;case 2:return d(t,Oy(e,r,v,i,n),4);case 4:if(_=t.h,T=_.drmInfos,k=_.keyIds,E=_.encrypted,x=_.nh,E&&!T.length&&!x)throw new He(2,4,4026);return C=My(e,o,a,s,u,c,l,f,h,p,g,y),C.encrypted=E,C.drmInfos=T,C.keyIds=k,C.mimeType=v,S&&(C.bandwidth=S),ly(C),Xy(e)&&Dy(e,r),P=w[0].startTime,I=w[w.length-1],j=I.endTime,M=new _s(w),C.segmentIndex=M,R=!!(O=Bg(r.g,"EXT-X-SERVER-CONTROL"))&&null!=Mg(O,"CAN-SKIP-UNTIL"),D=!!O&&null!=Mg(O,"CAN-BLOCK-RELOAD"),L=Fg(r.g,"EXT-X-MEDIA-SEQUENCE",0),N=jy(L,w),U=N.lb,B=N.mb,t.return({stream:C,type:a,Mg:[],M:i,ic:P,Bb:j,Ud:R,Td:D,rd:!1,Te:-1,lb:U,mb:B,je:m,wf:!1})}})}function jy(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{lb:e,mb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].preload||(e++,n=0),{lb:e,mb:n}):(e++,t.m&&(n=0),{lb:e,mb:n})}function My(e,t,n,r,i,o,s,u,c,l,f,d){var h=Vy(n,t)||Wy(n),p=[];if(c){c=a(c.split(","));for(var g=c.next();!g.done;g=c.next())p.push(g.value)}return c=void 0,g=null,n==hT?c=p.includes("public.accessibility.transcribes-spoken-dialog")&&p.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":p.includes("public.accessibility.describes-video")&&(g="visually impaired"),p.length||"subtitle"!==c||p.push("subtitle"),e={id:e.C++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:h,codecs:t,kind:n==hT?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:un(r||"und"),originalLanguage:r,label:o,type:n,primary:i,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:p,forced:l,channelsCount:s,audioChannelConfig:null,audioSamplingRate:f,spatialAudio:d,closedCaptions:u,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:g,external:!1,fastSwitching:!1,fullMimeTypes:new Set},ly(e),e}function Oy(e,t,n,r,i){var o,s,u,c,l,f,h,p,g,y,v,m,b,w,S,_,T,k,E,x,C,P,I,j,M,O,R,D;return A(function(A){switch(A.g){case 1:if(o=new Map,t.segments)for(s=a(t.segments),u=s.next();!u.done;u=s.next())if(c=u.value,l=Ng(c.g,"EXT-X-KEY"),f=null,l.length)for(f=Ny(e,t,c.g,r,i),h=a(l),p=h.next();!p.done;p=h.next())g=p.value,o.set(g,f);v=y=!1,m=[],b=new Set,w=a(o),S=w.next();case 2:if(S.done){A.u(4);break}if(_=S.value,T=a(_),k=T.next().value,E=T.next().value,x=k,C=E,"NONE"==(P=Rg(x,"METHOD"))){A.u(3);break}if(y=!0,I=Og(x,"KEYFORMAT")||"identity",j=null,$y(P)){v=!0,A.u(3);break}if("identity"!=I){j=(M=VE[I])?M(x,n):null,A.u(6);break}return d(A,Qy(e,x,n,r,C,i),8);case 8:j=A.h;case 6:if(j){if(j.keyIds)for(O=a(j.keyIds),R=O.next();!R.done;R=O.next())D=R.value,b.add(D);m.push(j)}else W("Unsupported HLS KEYFORMAT",I);case 3:S=w.next(),A.u(2);break;case 4:return A.return({drmInfos:m,keyIds:b,encrypted:y,nh:v})}})}function Ry(t,n,r,i,o){if(!e.crypto||!e.crypto.subtle)throw F("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new He(2,4,4042);var a=0,s=Og(n,"IV","");if(s){var u=At(s.substr(2));if(16!=u.byteLength)throw new He(2,4,4048)}else a=Fg(r.g,"EXT-X-MEDIA-SEQUENCE",0);if(r=n.toString()+"-"+a,!t.fa.has(r)){var c={bitsKey:128,blockCipherMode:"CBC",iv:u,firstMediaSequenceNumber:a};switch(Rg(n,"METHOD")){case"AES-256":c.bitsKey=256;break;case"AES-256-CTR":c.bitsKey=256,c.blockCipherMode="CTR"}c.fetchKey=function(){var r,a,s,u,l,f,p;return A(function(g){if(1==g.g)return r=Hg(i(),Rg(n,"URI"),o),a=r.sort().join(""),t.K.has(a)||(s=Or(r,t.g.retryParameters),u=Jy(t,s,6),t.K.set(a,u)),d(g,t.K.get(a),2);if(3!=g.g){if(l=g.h,!l.data||l.data.byteLength!=c.bitsKey/8)throw new He(2,4,4049);return f={name:"CTR"==c.blockCipherMode?"AES-CTR":"AES-CBC",length:c.bitsKey},p=c,d(g,e.crypto.subtle.importKey("raw",l.data,f,!0,["decrypt"]),3)}p.cryptoKey=g.h,c.fetchKey=void 0,h(g)})},t.fa.set(r,c)}return t.fa.get(r)}function Dy(e,t){var n=1/0,r=t.segments;if(r.length)for(var i=r.length-1;0<=i;){var o=Bg(r[i].g,"EXTINF");if(o){n=Number(o.value.split(",")[0]);break}i--}if(!(r=Bg(t.g,"EXT-X-TARGETDURATION")))throw new He(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(i=Bg(t.g,"EXT-X-PART-INF"))&&(e.T=Number(Rg(i,"PART-TARGET"))),t=Bg(t.g,"EXT-X-SERVER-CONTROL"),e.F&&e.T?(e.m=e.ib?5*e.T<=n?Math.min(e.T,e.m):Math.min(n,e.m):Math.min(e.T,e.m),e.Ka=t?Number(Rg(t,"PART-HOLD-BACK")):0):(e.m=Math.min(n,e.m),n=t?Mg(t,"HOLD-BACK"):null,e.wa=n?Number(n.value):0),e.Za=Math.max(r,e.Za)}function Ly(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.Ka)t=e.Ka;else if(e.wa)t=e.wa;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.Za*n}e.j.Ug(0),e.j.Rf(t),e.j.nc(!1)}function Ny(e,t,n,r,i){var o=Bg(n,"EXT-X-MAP");if(!o)return null;var s=Rg(o,"URI"),u=Hg(r(),s,i);if(s=[u.toString(),Og(o,"BYTERANGE","")].join("-"),!e.ba.has(s)){var c=void 0,l=null;n=a(n);for(var f=n.next();!f.done;f=n.next())f=f.value,"EXT-X-KEY"==f.name?$y(Rg(f,"METHOD"))&&f.id<o.id&&(c=Ry(e,f,t,r,i)):"EXT-X-BYTERANGE"==f.name&&f.id<o.id&&(l=f);t=Uy(u,o,l,c),e.ba.set(s,t)}return e.ba.get(s)}function Uy(e,t,n,r){var i=0,o=null;return t=Og(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(i=t.split("@"),o=Number(i[0]),i=Number(i[1]),o=i+o-1,r&&(n=o+1-i)%16&&(o+=16-n%16)),new xo(function(){return e},i,o,null,null,null,r)}function By(t,n,r,i,o,s,u,c,l){var f=i.g,d=Bg(f,"EXTINF"),h=0,p=0,g=null;i.vb.length&&!t.F&&F("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var y=null;if(!t.g.hls.ignoreManifestProgramDateTime){var v=Bg(f,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(y=Si(v.value))}var m=qT;if(Bg(f,"EXT-X-GAP")&&(m=2),!d){if(0==i.vb.length)throw new He(2,4,4024,"EXTINF");if(!t.F)return null}var b=[];v=!1;var w=null,S=!1,_=!1;if(t.F&&i.vb.length){h=n&&e.ReadableStream&&t.g.hls.allowLowLatencyByteRangeOptimization;for(var T=y,k={},E=0;E<i.vb.length;k={Xc:k.Xc,Nd:k.Nd},E++){var A=i.vb[E],x=0==E?r:b[b.length-1],C=0==E?o:x.endTime,P=Number(Og(A,"DURATION"))||t.T;if(P){var I=C+P,j=0,M=null;if("EXT-X-PRELOAD-HINT"==A.name?(j=(j=Og(A,"BYTERANGE-START"))?Number(j):0,(x=Og(A,"BYTERANGE-LENGTH"))?M=j+Number(x)-1:j&&(M=Number.MAX_SAFE_INTEGER)):(j=Og(A,"BYTERANGE"),M=a(Fy(x,j)),j=M.next().value,M=M.next().value),k.Nd=Og(A,"URI"),k.Nd){x=qT,"YES"==Og(A,"GAP")&&(x=2,S=!0),k.Xc=null;var O=function(e){return function(){return null==e.Xc&&(e.Xc=Hg(c(),e.Nd,s)),e.Xc}}(k);h&&0<=j&&null!=M&&(w=O,v=!0),C=new Po(C,I,O,j,M,n,0,0,1/0,[],"",null,T,x,l),"EXT-X-PRELOAD-HINT"==A.name&&(C.xf(),_=!0),"YES"!=Og(A,"INDEPENDENT")&&0<E&&C.ie(),b.push(C),T&&(T+=P)}}}}if(d){if(0==(d=Number(d.value.split(",")[0])))return null;h=o+d}else{if(!b.length)return null;h=b[b.length-1].endTime}v&&(S||0!=b[0].Ca?(v=!1,w=null):b=[]),(d=Bg(f,"EXT-X-BYTERANGE"))?(g=a(Fy(r,d.value)),p=g.next().value,g=g.next().value):b.length&&(p=b[0].Ca,g=b[b.length-1].ma),r="",d=null,"image"==u&&(r="1x1",u=Bg(f,"EXT-X-TILES"))&&(r=Rg(u,"LAYOUT"),(u=Og(u,"DURATION"))&&(d=Number(u)));var R=null;return n=new Po(o,h,function(){return w?w():(null==R&&(R=Hg(c(),i.h,s)),R||[])},p,g,n,0,0,1/0,b,r,d,y,m,l,0<b.length&&!!i.h),v&&(t.ib=!0,n.Eg(),_&&n.xf()),n}function Fy(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.ma+1,r=n+t-1),[n,r]}function Hy(e,t,n,r,i,o){var s=t.segments,u=void 0,c=Fg(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),l=Fg(t.g,"EXT-X-MEDIA-SEQUENCE",0),f=Bg(t.g,"EXT-X-SKIP"),d=f?Number(Og(f,"SKIPPED-SEGMENTS")):0,h=l+d,p=0;Xy(e)&&n.has(h)&&(p=n.get(h)),0===p&&e.ra==qE&&0<n.size&&!n.has(h)&&(p=e.j.jb());var g=[],y=null;f=[];for(var v=0;v<s.length;v++){var m=s[v],b=0==v?p:y.endTime;h=l+d+v,Bg(m.g,"EXT-X-DISCONTINUITY")&&c++;for(var w=a(m.g),S=w.next();!S.done;S=w.next())S=S.value,"EXT-X-KEY"==S.name&&(u=$y(Rg(S,"METHOD"))?Ry(e,S,t,i,r):void 0);n.set(h,b),w=Ny(e,t,m.g,i,r),!e.F&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.F=e.i.isLowLatencyMode()),(b=By(e,w,y,m,b,r,o,i,u))&&((y=Fg(m.g,"EXT-X-BITRATE"))?f.push({bitrate:y,duration:b.endTime-b.startTime}):f.length&&(y=f.pop(),y.duration+=b.endTime-b.startTime,f.push(y)),y=b,b.j=c,Cy(e,o)&&null!=e.A&&h<e.A||g.push(b))}if(t=void 0,f.length&&(t=f.reduce(function(e,t){return e+t.duration},0),t=Math.round(f.reduce(function(e,t){return e+t.bitrate*t.duration},0)/t*1e3)),f=g.some(function(e){return null!=e.h}))for(n={},r=0;r<g.length;n={Pc:n.Pc,Oc:n.Oc,Id:n.Id,Ib:n.Ib,Mc:n.Mc},r++)if(n.Ib=g[r],null==n.Ib.h)for(n.Oc=0,n.Pc=r,i=function(e){return function(){var t=g[e.Pc];if(t){if(null!=t.h)return t.h+e.Oc;e.Oc-=t.endTime-t.startTime,e.Pc+=1}return null}}(n),n.Mc=0,n.Id=r,s=function(e){return function(){var t=g[e.Id];if(t){if(t!=e.Ib&&(e.Mc+=t.endTime-t.startTime),null!=t.h)return t.h+e.Mc;--e.Id}return null}}(n);null==n.Ib.h;)n.Ib.h=s(),null==n.Ib.h&&(n.Ib.h=i());if(f)for(n=a(g),r=n.next();!r.done;r=n.next())for(i=r.value,r=i.h,i=a(i.g),s=i.next();!s.done;s=i.next())s=s.value,s.h=r,r+=s.endTime-s.startTime;if(n=e.aa,f&&1/0!=n&&!Cy(e,o))for(e=a(g),r=e.next();!r.done;r=e.next())r.value.Xf(n);return{segments:g,bandwidth:t}}function Vy(e,t){if(e==hT){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":"mjpg"==t?"application/mp4":null:"image/jpeg"}function Wy(e){return e==hT?"text/vtt":HE[e].mp4}function Ky(e,t,n,r){var i,o,a,s,u,c,l,f,h,g,m,b,w,S;return A(function(_){switch(_.g){case 1:for(i=PT,o=Math.trunc((r.length-1)/2),a=r[o];2==a.status&&o<r.length;)o++,a=r[o];return 2==a.status?_.return(Wy(t)):(s=a.M(),u=new Ie(s[0]),c=u.Sa.split(".").pop(),l=HE[t],(f=l[c])||(f=FE[c])||(f=Vy(t,n))?_.return(f):(g=1,m=Or(s,e.g.retryParameters),p(_,2),m.method="HEAD",d(_,Jy(e,m,i,{type:g}),4)));case 4:b=_.h,h=b.headers["content-type"],y(_,3);break;case 2:if(!(w=v(_))||1002!=w.code&&1001!=w.code){_.u(3);break}return m.method="GET",d(_,Jy(e,m,i,{type:g}),6);case 6:S=_.h,h=S.headers["content-type"];case 3:return h?_.return(h.toLowerCase().split(";")[0]):_.return(Wy(t))}})}function qy(e,t,n,r,i,o,a){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=i||void 0,e.videoLayout=o||void 0,e.colorGamut=a||void 0)}function Gy(e,t,n){return Jy(e,Or(t,e.g.retryParameters),0,{type:n?2:3})}function zy(e){var t,n,r,i,o,a;A(function(s){switch(s.g){case 1:return K("Updating manifest..."),e.i?(p(s,2),t=Date.now(),d(s,e.update(),4)):s.return();case 4:n=Date.now(),Xy(e)&&(r=(n-t)/1e3,e.hb.sample(1,r),i=e.m,o=Math.max(0,i-L(e.hb)),e.B.X(o)),y(s,3);break;case 2:if(a=v(s),!e.i)return s.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(a),s.return();a.severity=1,e.i.onError(a),e.B.X(.1);case 3:if(!e.i)return s.return();e.i.onManifestUpdated(),h(s)}})}function Xy(e){return e.ra!=WE}function Yy(e,t){e.ra=t,e.j&&e.j.nc(!Xy(e)),Xy(e)||e.B.stop()}function Jy(e,t,n,r){if(!e.W)throw new He(2,7,7001);return t=e.i.networkingEngine.request(n,t,r),Pr(e.W,t),t.promise}function $y(e){return"AES-128"==e||"AES-256"==e||"AES-256-CTR"==e}function Qy(e,t,n,r,i,o){var a,s,u,c,l,f,h,p,g,y,v,m,b,w,S;return A(function(_){switch(_.g){case 1:if("video/mp2t"==n)throw new He(2,4,4040);if(dt())throw new He(2,4,4041);if(a=Rg(t,"METHOD"),s=["SAMPLE-AES","SAMPLE-AES-CTR"],!s.includes(a))return V("Identity (ClearKey) in HLS is only supported with [",s.join(", "),"], not",a),_.return(null);if(u=Hg(r(),Rg(t,"URI"),o),u[0].startsWith("data:text/plain;base64,")){c=xt(Et(u[0].split("data:text/plain;base64,").pop())),_.u(2);break}return l=u.sort().join(""),e.la.has(l)||(f=Or(u,e.g.retryParameters),h=Jy(e,f,6),e.la.set(l,h)),d(_,e.la.get(l),3);case 3:p=_.h,c=xt(p.data);case 2:if(g="00000000000000000000000000000000",!i){_.u(4);break}if(e.qa.has(i)){y=e.qa.get(i),_.u(5);break}return v=eu(i.M(),i.ac(),i.Yb(),e.g.retryParameters),m=PT,d(_,Jy(e,v,m,{type:0}),6);case 6:b=_.h,y=hp(b.data),e.qa.set(i,y);case 5:y&&(g=y);case 4:return w=new Map,w.set(g,c),S="cenc","SAMPLE-AES"==a&&(S="cbcs"),_.return(jt(w,S))}})}function Zy(e){var t=0,n=ge(e),r=n.getUint32(t,!0);if(t+=4,r!=e.byteLength)return W("PlayReady Object with invalid length encountered."),[];e:{for(e=t+2,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,0!=(1&i)||i+e>n.byteLength){W("Malformed MS PRO object"),n=[];break e}var o=he(n,e,i);t.push({type:r,value:o}),e+=i}n=t}return n}function ev(e){if(e=tv(e))e:{e=a(pi(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=gi(t.value,"LA_URL")){e=di(t);break e}e=""}else e="";return e}function tv(e){return e=Et(di(e)),(e=Zy(e).filter(function(e){return e.type===zE})[0])?(e=yt(e.value,!0),(e=ai(e,"WRMHEADER"))?e:null):null}function nv(e){if(!YE){YE=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);sA=dv("ftyp",t,r,t,n),t=dv("dref",uA),cA=dv("dinf",t)}this.g=e}function rv(e){for(var t=[],n=a(e.g),r=n.next();!r.done;r=n.next()){var i=t,o=i.push,u=r.value;r=dv;var c=u.id+1,l=u.stream.width||0,f=u.stream.height||0;"audio"==u.type&&(f=l=0);var d=u.duration*u.timescale,h=Math.floor(d/(JE+1));switch(d=Math.floor(d%(JE+1)),c=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(s(lv(c,4)),[0,0,0,0],s(lv(h,4)),s(lv(d,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],s(lv(l,2)),[0,0],s(lv(f,2)),[0,0])),c=dv("tkhd",c),l=dv,h=u.duration*u.timescale,f=Math.floor(h/(JE+1)),h=Math.floor(h%(JE+1)),d=u.stream.language,d=d.charCodeAt(0)-96<<10|d.charCodeAt(1)-96<<5|d.charCodeAt(2)-96,f=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(s(lv(u.timescale,4)),s(lv(f,4)),s(lv(h,4)),s(lv(d,2)),[0,0])),f=dv("mdhd",f),h=u,d=new Uint8Array([]),h.type){case"video":d=QE;break;case"audio":d=ZE}h=dv("hdlr",d);e:{switch(u.type){case"video":u=dv("minf",dv("vmhd",iA),cA,iv(u));break e;case"audio":u=dv("minf",dv("smhd",oA),cA,iv(u));break e}u=new Uint8Array([])}u=l("mdia",f,h,u),r=r("trak",c,u),o.call(i,r)}for(t=Ct.apply(_t,s(t)),o=e.g[0],n=dv,r=o.duration*o.timescale,i=Math.floor(r/(JE+1)),r=Math.floor(r%(JE+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(s(lv(o.timescale,4)),s(lv(i,4)),s(lv(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),i=dv("mvhd",i),r=[],e=a(e.g),l=e.next();!l.done;l=e.next())u=r,c=u.push,l=new Uint8Array([0,0,0,0].concat(s(lv(l.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),l=dv("trex",l),c.call(u,l);if(e=Ct.apply(_t,s(r)),e=dv("mvex",e),r=[],o.encrypted){for(o=a(o.stream.drmInfos),u=o.next();!u.done;u=o.next())if(u=u.value,u.initData)for(u=a(u.initData),c=u.next();!c.done;c=u.next())r.push(c.value.initData);o=Ct.apply(_t,s(r))}else o=new Uint8Array([]);return e=n("moov",i,t,e,o),t=new Uint8Array(sA.byteLength+e.byteLength),t.set(sA),t.set(e,sA.byteLength),t}function iv(e){var t=dv,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.va.byteLength)var i=dv("avcC",e.va);else{i=dv;for(var o=7,a=[],u=[],c=0,l=0,f=0,d=0;d<e.Xa.length;d++){var h=fv(e.Xa[d]);switch(31&h[0]){case 7:a.push(h),o+=h.length+2;break;case 8:u.push(h),o+=h.length+2}}for(0<a.length&&(c=a[0][1],f=a[0][2],l=a[0][3]),o=new Uint8Array(o),d=0,o[d++]=1,o[d++]=c,o[d++]=f,o[d++]=l,o[d++]=255,o[d++]=224|a.length,c=0;c<a.length;c++)o[d++]=(65280&a[c].length)>>8,o[d++]=255&a[c].length,o.set(a[c],d),d+=a[c].length;for(o[d++]=u.length,a=0;a<u.length;a++)o[d++]=(65280&u[a].length)>>8,o[d++]=255&u[a].length,o.set(u[a],d),d+=u[a].length;i=i("avcC",o)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(s(lv(n,2)),s(lv(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",u=ov(e),a=new Uint8Array([]),e.encrypted&&(a=sv(e),r="encv"),n=dv(r,n,i,u,a)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,i=e.stream.height||0,n=new Uint8Array([]),0<e.va.byteLength&&(n=dv("hvcC",e.va)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(s(lv(r,2)),s(lv(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="hvc1",u=ov(e),a=new Uint8Array([]),e.encrypted&&(a=sv(e),i="encv"),n=dv(i,r,n,u,a));break;case"audio":e.codecs.includes("mp3")?e=dv(".mp3",av(e)):e.codecs.includes("ac-3")?(n=dv("dac3",e.ia),r="ac-3",i=new Uint8Array([]),e.encrypted&&(i=sv(e),r="enca"),e=dv(r,av(e),n,i)):e.codecs.includes("ec-3")?(n=dv("dec3",e.ia),r="ec-3",i=new Uint8Array([]),e.encrypted&&(i=sv(e),r="enca"),e=dv(r,av(e),n,i)):e.codecs.includes("opus")?(n=dv("dOps",e.ia),r="Opus",i=new Uint8Array([]),e.encrypted&&(i=sv(e),r="enca"),e=dv(r,av(e),n,i)):(0<e.ia.byteLength?n=dv("esds",e.ia):(n=dv,r=e.id+1,i=e.stream.channelsCount||2,a=e.stream.audioSamplingRate||44100,c=Mt("audio",e.codecs.split(",")),l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},u=l[a],"mp4a.40.5"!==c&&"mp4a.40.29"!==c||(u=l[2*a]),a=parseInt(c.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(s(lv(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,a<<3|u>>>1,u<<7|i<<3,6,1,2])),n=n("esds",r)),r="mp4a",i=new Uint8Array([]),e.encrypted&&(i=sv(e),r="enca"),e=dv(r,av(e),n,i)),n=e}return e=dv("stsd",aA,n),t("stbl",e,dv("stts",eA),dv("stsc",tA),dv("stsz",rA),dv("stco",nA))}function ov(e){if(!e.ya&&!e.za)return new Uint8Array([]);var t=e.za;return e=new Uint8Array([].concat(s(lv(e.ya,4)),s(lv(t,4)))),dv("pasp",e)}function av(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(s(lv(e.stream.audioSamplingRate||44100,2)),[0,0]))}function sv(e){for(var t=dv,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,i=0;i<n.length;i+=1)r|=n.charCodeAt(i)<<8*(n.length-i-1);n=new Uint8Array([].concat(s(lv(r,4)))),n=dv("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=dv("schm",r),i=dv;var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=a(e.stream.drmInfos);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&u.keyIds&&u.keyIds.size){u=a(u.keyIds);for(var c=u.next();!c.done;c=u.next())o=fv(c.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),o=dv("tenc",e,o),t("sinf",n,r,i("schi",o))}function uv(e){var t=[];e=a(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,i=r.apply,o=dv,u=new Uint8Array([0,0,0,0].concat(s(lv(n.data?n.data.pb:0,4))));u=dv("mfhd",u);var c,l=n.data?n.data.Ua:[],f=new Uint8Array(4+l.length);for(c=0;c<l.length;c++){var d=l[c].flags;f[c+4]=d.Na<<4|d.Pa<<2|d.Oa}l=dv("sdtp",f);var h=l.length+92;f=dv,c=new Uint8Array([0,0,0,58].concat(s(lv(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),c=dv("tfhd",c),d=n.data?n.data.baseMediaDecodeTime:0;var p=Math.floor(d%(JE+1));d=new Uint8Array([1,0,0,0].concat(s(lv(Math.floor(d/(JE+1)),4)),s(lv(p,4)))),d=dv("tfdt",d);var g=h;h=n.data?n.data.Ua:[],p=h.length;var y=12+16*p,v=new Uint8Array(y);for(g+=8+y,v.set(["video"===n.type?1:0,0,15,1].concat(s(lv(p,4)),s(lv(g,4))),0),g=0;g<p;g++){var m=h[g];y=lv(m.duration,4);var b=lv(m.size,4),w=m.flags;m=lv(m.ab,4),v.set([].concat(s(y),s(b),[w.cb<<2|w.Na,w.Pa<<6|w.Oa<<4|w.eb,61440&w.Ma,15&w.Ma],s(m)),12+16*g)}h=dv("trun",v),l=f("traf",c,d,h,l),o=o("moof",u,l),i.call(r,t,[o,cv(n)])}return Ct.apply(_t,s(t))}function cv(e){return e=(e.data?e.data.Ua:[]).map(function(e){return e.data}),e=Ct.apply(_t,s(e)),dv("mdat",e)}function lv(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function fv(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function dv(e){var t=x.apply(1,arguments),n=$E[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],$E[e]=n);for(var r=8,i=t.length-1;0<=i;i--)r+=t[i].byteLength;for(i=new Uint8Array(r),i[0]=r>>24&255,i[1]=r>>16&255,i[2]=r>>8&255,i[3]=255&r,i.set(n,4),n=0,r=8;n<t.length;n++)i.set(t[n],r),r+=t[n].byteLength;return i}function hv(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new D(5),this.o=new qe(function(){pv(e)}),this.A=new Cr,this.m=new Map}function pv(e){var t;A(function(n){switch(n.g){case 1:return K("Updating manifest..."),p(n,2),d(n,gv(e),4);case 4:y(n,3);break;case 2:t=v(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();h(n)}})}function gv(e){var t,n,r,i,o,u,c;return A(function(l){if(1==l.g)return t=Or(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),i=n.request(0,t,{type:5}),Pr(e.A,i),d(l,i.promise,2);if(o=l.h,!e.h)return l.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var f=o.uri,p=o.data,g=e.g.mss.manifestPreprocessor;if(g!=$u){if(ie("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),!(p=Qp(p,"SmoothStreamingMedia")))throw new He(2,4,4046,f);g(p),p=mt(p.outerHTML)}var y=oi(p,"SmoothStreamingMedia");if(!y)throw new He(2,4,4046,f);if(f=e.g.mss.manifestPreprocessorTXml,f!=Qu&&f(y),e.i||(e.i=new ts(null,0)),f=vi(y,"IsLive",Ci,!1))throw new He(2,4,4047);e.i.nc(!f),g=vi(y,"TimeScale",Ai,1e7),p=vi(y,"DVRWindowLength",Ai),f&&(0===p||isNaN(p))&&(p=1/0);var v=vi(y,"CanSeek",Ci,!1);0===p&&v&&(p=1/0),v=null,p&&0<p&&(v=p/g),f&&!isNaN(e.g.availabilityWindowOverride)&&(v=e.g.availabilityWindowOverride),null==v&&(v=1/0),e.i.ye(v),p=vi(y,"Duration",Ai,1/0),f||e.i.Va(p/g),f={variants:[],textStreams:[],timescale:g,duration:p/g},v=fi(y,"Protection");var m;for(g=e.g.mss.keySystemsBySystemId,p=[],v=a(v),m=v.next();!m.done;m=v.next())p=p.concat(fi(m.value,"ProtectionHeader"));if(p.length){for(v=[],m=0;m<p.length;m++){var b=p[m],w=b.attributes.SystemID.toLowerCase(),S=g[w];if(S){var _=tv(b);if(_)e:{_=a(pi(_,"DATA"));for(var T=_.next();!T.done;T=_.next())if(T=gi(T.value,"KID")){_=Et(di(T)),_=new Uint8Array([_[3],_[2],_[1],_[0],_[5],_[4],_[7],_[6]].concat(s(_.slice(8)))),_=xt(_);break e}_=null}else _=null;T=Et(di(b)),w=At(w.replace(/-/g,"")),w=[{initData:ii(T,w,new Set,0),initDataType:"cenc",keyId:_}],w=It(S,"cenc",w),_&&w.keyIds.add(_),(S=XE.get(S))&&(w.licenseServerUri=S(b)),v.push(w)}}g=v}else g=[];for(m=g,v=[],g=[],p=[],y=fi(y,"StreamIndex"),y=a(y),b=y.next();!b.done;b=y.next()){b=b.value,S=fi(b,"QualityLevel"),w=f.timescale,_=f.duration,T=fi(b,"c");for(var k=[],E=0,A=0;A<T.length;++A){var x=T[A],C=T[A+1],P=vi(x,"t",Ai),I=vi(x,"d",Ai),j=vi(x,"r",ki);if(!I){W('"c" element must have a duration:','ignoring the remaining "c" elements.',x);break}if(P=null!=P?P:E,0>(j=j||0))if(C){if(null==(C=vi(C,"t",Ai))){W('An "c" element cannot have a negative repeat','if the next "c" element does not have a valid start time:','ignoring the remaining "c" elements.',x);break}if(P>=C){W('An "c" element cannot have a negative repeatif its start ','time exceeds the next "c" element\'s start time:','ignoring the remaining "c" elements.',x);break}j=Math.ceil((C-P)/I)-1}else{if(1/0==_){W('The last "c" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "c" element.',x);break}if(P/w>=_){W('The last "c" element cannot have a negative repeat',"if its start time exceeds the duration:",'igoring the last "c" element.',x);break}j=Math.ceil((_*w-P)/I)-1}for(x=0;x<=j;++x)E=P+I,k.push({start:P/w,end:E/w,dg:P}),P=E}for(w=k,S=a(S),_=S.next();!_.done;_=S.next())(_=yv(e,b,_.value,w,m,f))&&("audio"!=_.type||e.g.disableAudio?"video"!=_.type||e.g.disableVideo?_.type!=hT||e.g.disableText||p.push(_):g.push(_):v.push(_))}for(y=[],v=a(0<v.length?v:[null]),m=v.next();!m.done;m=v.next())for(m=m.value,b=a(0<g.length?g:[null]),_=b.next();!_.done;_=b.next())S=y,w=S.push,_=_.value,T=0,m&&m.bandwidth&&0<m.bandwidth&&(T+=m.bandwidth),_&&_.bandwidth&&0<_.bandwidth&&(T+=_.bandwidth),_={id:e.s++,language:m?m.language:"und",disabledUntilTime:0,primary:!!m&&m.primary||!!_&&_.primary,audio:m,video:_,bandwidth:T,label:null,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},w.call(S,_);f.variants=y,f.textStreams=p,e.j?(e.j.variants=f.variants,e.j.textStreams=f.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:f.variants,textStreams:f.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null},e.i.ge()),Promise.resolve(),u=Date.now(),c=(u-r)/1e3,e.B.sample(1,c),h(l)})}function yv(e,t,n,r,i,o){var a=t.attributes.Type;if("audio"!==a&&"video"!==a&&"text"!==a)return F("Ignoring unrecognized type:",a),null;var s=t.attributes.Language,u=e.s++,c=vi(n,"Bitrate",Ei),l=vi(n,"MaxWidth",Ei),f=vi(n,"MaxHeight",Ei),d=vi(n,"Channels",Ei),h=vi(n,"SamplingRate",Ei),p=o.duration;r.length&&(p=r[r.length-1].end-r[0].start);var g=e.i.getDuration();e.i.Va(Math.min(p,g));var y={id:u,originalId:t.attributes.Name||String(u),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:c||0,width:l||void 0,height:f||void 0,kind:"",encrypted:0<i.length,drmInfos:i,keyIds:new Set,language:un(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:d,audioChannelConfig:null,audioSamplingRate:h,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:p,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((i=t.attributes.Subtype)&&((i=fA[i])&&y.roles.push(i),"main"===i&&(y.primary=!0)),i=n.attributes.FourCC,null!==i&&""!==i||(i=t.attributes.FourCC),!i)if("audio"===a)i="AAC";else if("video"===a)return F('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!lA.includes(i.toUpperCase()))return F("Codec not supported:",i),null;switch(n=vv(n,a,i,y),y.mssPrivateData.codecPrivateData=n,a){case"audio":if(!n)return F("Quality unsupported without CodecPrivateData",a),null;y.type="audio",y.mimeType="mss/audio/mp4",y.codecs=mv(i,n);break;case"video":if(!n)return F("Quality unsupported without CodecPrivateData",a),null;y.type="video",y.mimeType="mss/video/mp4",y.codecs=bv(n);break;case"text":y.type=hT,y.mimeType="application/mp4",("TTML"===i||"DFXP"===i)&&(y.codecs="stpp")}return y.fullMimeTypes.add(Lt(y.mimeType,y.codecs)),y.createSegmentIndex=function(){if(y.segmentIndex)return Promise.resolve();if(e.m.has(y.id))var n=e.m.get(y.id);else n=[],"video"==y.type&&(n=y.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n={id:y.id,type:y.type,codecs:y.codecs,encrypted:y.encrypted,timescale:y.mssPrivateData.timescale,duration:y.mssPrivateData.duration,Xa:n,ia:new Uint8Array([]),va:new Uint8Array([]),ya:0,za:0,data:null,stream:y},n=rv(new nv([n])),e.m.set(y.id,n);return n=wv(e,new xo(function(){return[]},0,null,null,void 0,n),y,t,r),y.segmentIndex=new _s(n),Promise.resolve()},y.closeSegmentIndex=function(){y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null)},y}function vv(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if("audio"!==t)return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=i[e],"AACH"===n?(n=new Uint8Array(4),e=i[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function mv(e,t){var n=0;return"AACH"===e&&(n=5),t?0===n&&(n=(248&parseInt(t.substr(0,2),16))>>3):(n=2,"AACH"===e&&(n=5)),"mp4a.40."+n}function bv(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function wv(e,t,n,r,i){var o=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[];var s={};i=a(i);for(var u=i.next();!u.done;s={Wc:s.Wc},u=i.next())s.Wc=u.value,r.push(new Po(s.Wc.start,s.Wc.end,function(t){return function(){return Pt(e.l,[o.replace("{start time}",String(t.Wc.dg))])}}(s),0,null,t,0,0,n.mssPrivateData.duration));return r}function Sv(e,t,n,r,i,o){if(200<=n&&299>=n&&202!=n)return{uri:i||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var a=null;try{a=vt(t)}catch(e){}throw q("HTTP error text:",a),new He(401==n||403==n?2:1,1,1001,r,n,a,e,o,i||r)}function _v(){}function Tv(e,t,n,r,i){var o=new gA;Kr(t.headers).forEach(function(e,t){o.append(t,e)});var a=new hA,s={lg:!1,ah:!1};if(e=kv(e,n,{body:t.body||void 0,headers:o,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,r,i,t.streamDataCallback),e=new mr(e,function(){return s.lg=!0,a.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var u=new qe(function(){s.ah=!0,a.abort()});u.X(t/1e3),e.finally(function(){u.stop()})}return e}function kv(e,t,n,r,i,o,a){var s,u,c,l,f,g,m,b,w,S,_,T,k;return A(function(E){switch(E.g){case 1:return s=dA,u=pA,g=f=0,m=Date.now(),p(E,2),d(E,s(e,n),4);case 4:if(c=E.h,o(Ev(c.headers)),"HEAD"==n.method){E.u(5);break}return b=c.clone().body.getReader(),S=(w=c.headers.get("Content-Length"))?parseInt(w,10):0,_=function(e){function t(){var n,r,o,s;return A(function(u){switch(u.g){case 1:return p(u,2),d(u,b.read(),4);case 4:n=u.h,y(u,3);break;case 2:return r=v(u),G("error reading from stream",r.message),u.return();case 3:if(n.done){u.u(5);break}if(f+=n.value.byteLength,!a){u.u(5);break}return d(u,a(n.value),5);case 5:o=Date.now(),(100<o-m||n.done)&&(s=n.done?0:S-f,i(o-m,f-g,s),g=f,m=o),n.done?e.close():(e.enqueue(n.value),t()),h(u)}})}t()},new u({start:_}),d(E,c.arrayBuffer(),6);case 6:l=E.h;case 5:y(E,3);break;case 2:if(T=v(E),r.lg)throw new He(1,1,7001,e,t);if(r.ah)throw new He(1,1,1003,e,t);throw new He(1,1,1002,e,T,t);case 3:return k=Ev(c.headers),E.return(Sv(k,l,c.status,e,c.url,t))}})}function Ev(e){var t={};return e.forEach(function(e,n){t[n.trim()]=e}),t}function Av(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!!e.Response&&(!!new Response("").body&&!(!e.fetch||"polyfill"in e.fetch||!e.AbortController))}function xv(){}function Cv(e,t,n,r,i){var o=new yA,a=Date.now(),s=0;return new mr(new Promise(function(u,c){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials,o.onabort=function(){c(new He(1,1,7001,e,n))};var l=!1;o.onreadystatechange=function(){if(2==o.readyState&&!l){var e=Pv(o);i(e),l=!0}},o.onload=function(t){var i=Pv(o),l=o.response;try{r(Date.now()-a,t.loaded-s,0);var f=Sv(i,l,o.status,e,o.responseURL,n);u(f)}catch(e){c(e)}},o.onerror=function(t){c(new He(1,1,1002,e,t,n))},o.ontimeout=function(){c(new He(1,1,1003,e,n))},o.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(r(t-a,e.loaded-s,4==o.readyState?0:e.total-e.loaded),s=e.loaded,a=t)};for(var f in t.headers)o.setRequestHeader(f.toLowerCase(),t.headers[f]);o.send(t.body)}),function(){return o.abort(),Promise.resolve()})}function Pv(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}function Iv(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function jv(e){return e.M().map(function(e){return"{"+encodeURI(e)+"}"}).join("")+":"+e.Ca+":"+e.ma}function Mv(e,t){return eu(e.g.M(),e.g.Ca,e.g.ma,t.streaming.retryParameters)}function Ov(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Rv(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function Dv(e){var t=this;this.o=e,this.j=new Map,this.i=new Fr(function(){return Nv(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new Ov}function Lv(e,t,n){e.m=t,e.l=n}function Nv(e){var t=e.h.map(function(e){return e()});return e.h=[],Promise.all(t)}function Uv(e,t,n,r,i,o){Hr(e.i);var a=(e.j.get(t)||Promise.resolve()).then(function(){var t,a,s,u,c,l,f;return A(function(h){if(1==h.g)return d(h,Fv(e,n),2);if(t=h.h,e.i.g)throw new He(2,9,7001);if(i)for(u in a=he(t),s=new ri(a),s.data)c=Number(u),l=s.data[c],f=s.g[c],e.l(l,f);e.g.close(r,t.byteLength);var p=e.g;return e.m(0==p.i?0:p.j/p.i,e.g.h),h.return(o(t))})});e.j.set(t,a)}function Bv(e){return A(function(t){return 1==t.g?d(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function Fv(e,t){var n,r,i,o;return A(function(a){return 1==a.g?(n=PT,r=e.o.request(n,t),i=function(){return r.abort()},e.h.push(i),d(a,r.promise,2)):(o=a.h,we(e.h,i),a.return(o.data))})}function Hv(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new vr,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function Vv(e,t){return new Promise(function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(){var e;return A(function(r){if(1==r.g)return null==i.result?(n(),r.return()):(e=i.result,d(r,t(e.key,e.value,e),2));e.continue(),h(r)})}})}function Wv(e){this.h=e,this.g=[]}function Kv(e,t){return qv(e,t,"readwrite")}function qv(e,t,n){n=e.h.transaction([t],n);var r=new Hv(n,t);return e.g.push(r),r.promise().then(function(){we(e.g,r)},function(){we(e.g,r)}),r}function Gv(e,t,n){this.h=new Wv(e),this.i=t,this.g=n}function zv(e,t,n){e=Kv(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}function Xv(e){return Promise.reject(new He(2,9,9011,"Cannot add new value to "+e))}function Yv(e,t,n,r){e=Kv(e.h,t),t=e.store();var i={};n=a(n);for(var o=n.next();!o.done;i={Md:i.Md},o=n.next())i.Md=o.value,t.delete(i.Md).onsuccess=function(e){return function(){return r(e.Md)}}(i);return e.promise()}function Jv(e,t,n){var r,i,o,s,u,c,l;return A(function(f){if(1==f.g){for(r=qv(e.h,t,"readonly"),i=r.store(),o={},s=[],u={},c=a(n),l=c.next();!l.done;u={Tc:u.Tc,Rc:u.Rc},l=c.next())u.Rc=l.value,u.Tc=i.get(u.Rc),u.Tc.onsuccess=function(e){return function(){void 0==e.Tc.result&&s.push(e.Rc),o[e.Rc]=e.Tc.result}}(u);return d(f,r.promise(),2)}if(s.length)throw new He(2,9,9012,"Could not find values for "+s);return f.return(n.map(function(e){return o[e]}))})}function $v(e){this.g=new Wv(e)}function Qv(){this.g=new Map}function Zv(e){var t=null;if(e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){e.hasFixedKeySpace()||t||(t={path:{kb:n,Ea:r},Ea:e})})}),t)return t;throw new He(2,9,9013,"Could not find a cell that supports add-operations")}function em(e,t){e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){t({kb:n,Ea:r},e)})})}function tm(e,t,n){if(!(e=e.g.get(t)))throw new He(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new He(2,9,9013,"Could not find cell with name "+n);return t}function nm(e,t){e.g.forEach(function(e){t(e.getEmeSessionCell())})}function rm(e){var t=Array.from(e.g.keys());if(!t.length)throw new He(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function im(e){var t,n,r;return A(function(i){return 1==i.g?(t=Array.from(e.g.values()),n=0<t.length,n||(r=vA,r.forEach(function(e){(e=e())&&t.push(e)})),d(i,Promise.all(t.map(function(e){return e.erase()})),2)):n?i.u(0):d(i,Promise.all(t.map(function(e){return e.destroy()})),0)})}function om(e,t){vA.set(e,t)}function am(){Gv.apply(this,arguments)}function sm(e,t){lm(e);for(var n=a(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(n){return um(n,e.startTime,t)})}function um(e,t,n){var r=e.initSegmentUri?cm(e.initSegmentUri):null,i=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){var n=cm(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:o,timestampOffset:i,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function cm(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new He(2,9,9004,"Could not parse uri "+e)}function lm(e){var t=e.streams.filter(function(e){return"audio"==e.contentType});if(e=e.streams.filter(function(e){return"video"==e.contentType}),!t.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){for(var n=a(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=a(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){q("Found video-only content. Creating variants for video.");var i=n++,o=a(e);for(r=o.next();!r.done;r=o.next())r.value.variantIds.push(i)}if(!e.length&&t.length)for(q("Found audio-only content. Creating variants for audio."),i=n++,o=a(t),r=o.next();!r.done;r=o.next())r.value.variantIds.push(i);if(e.length&&t.length)for(q("Found audio-video content. Creating variants."),t=a(t),r=t.next();!r.done;r=t.next())for(r=r.value,i=a(e),o=i.next();!o.done;o=i.next()){o=o.value;var s=n++;r.variantIds.push(s),o.variantIds.push(s)}}}function fm(){Gv.apply(this,arguments)}function dm(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function hm(){Gv.apply(this,arguments)}function pm(){this.m=this.j=this.i=this.h=this.g=this.l=null}function gm(){var t=new vr,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(e){W("Deleting","shaka_offline_db","is being blocked",e)},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new He(2,9,9001,n.error)),e.preventDefault()},t}function ym(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}function vm(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new ym(t,n,r,Number(e[4])):null}function mm(e,t){this.h=e,this.g=t}function bm(e,t){var n=new ts(null,0);n.Va(t.duration);var r=t.streams.filter(function(e){return"audio"==e.type}),i=t.streams.filter(function(e){return"video"==e.type});r=wm(e,r,i,n),i=t.streams.filter(function(e){return e.type==hT}).map(function(t){return Sm(e,t,n)});var o=t.streams.filter(function(e){return"image"==e.type}).map(function(t){return Sm(e,t,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=a(r.values()),c=u.next();!c.done;c=u.next())c=c.value,c.audio&&c.audio.encrypted&&(c.audio.drmInfos=s),c.video&&c.video.encrypted&&(c.video.drmInfos=s);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null}}function wm(e,t,n,r){for(var i=new Set,o=a(t),s=o.next();!s.done;s=o.next()){var u=a(s.value.variantIds);for(s=u.next();!s.done;s=u.next())i.add(s.value)}for(o=a(n),s=o.next();!s.done;s=o.next())for(u=a(s.value.variantIds),s=u.next();!s.done;s=u.next())i.add(s.value);for(o=new Map,i=a(i),s=i.next();!s.done;s=i.next())s=s.value,o.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,label:null,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=a(t),i=t.next();!i.done;i=t.next())for(i=i.value,s=Sm(e,i,r),u=a(i.variantIds),i=u.next();!i.done;i=u.next())i=o.get(i.value),i.language=s.language,i.primary=i.primary||s.primary,i.audio=s;for(n=a(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=Sm(e,i,r),s=a(i.variantIds),i=s.next();!i.done;i=s.next())i=o.get(i.value),i.primary=i.primary||t.primary,i.video=t;return o}function Sm(e,t,n){var r=t.segments.map(function(n){return _m(e,n,t)});return n.zd(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new _s(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioChannelConfig:null,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Lt(t.mimeType,t.codecs)])}}function _m(e,t,n){var r=new ym("segment",e.h,e.g,t.dataKey);return e=new Po(t.startTime,t.endTime,function(){return[r.toString()]},0,null,null!=t.initSegmentKey?Tm(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function Tm(e,t){var n=new ym("segment",e.h,e.g,t);return new xo(function(){return[n.toString()]},0,null)}function km(){this.g=null}function Em(){}function Am(e){var t=vm(e);return t&&"manifest"==t.g?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Sr(e)):e=t&&"segment"==t.g?xm(t.key(),t):br(new He(2,1,9004,e)),e}function xm(e,t){var n=new Qv;return Sr(void 0).xa(function(){return n.init()}).xa(function(){return tm(n,t.kb(),t.Ea())}).xa(function(e){return e.getSegments([t.key()])}).xa(function(e){return{uri:t,data:e[0].data,headers:{}}}).finally(function(){return n.destroy()})}function Cm(e,t,n){var r,i,o,s,u,c;return A(function(l){switch(l.g){case 1:r=[];for(var f=[],h=a(n),p=h.next();!p.done;p=h.next()){p=p.value;for(var g=!1,y=a(f),v=y.next();!v.done;v=y.next())if(v=v.value,Im(v.info,p)){v.sessionIds.push(p.sessionId),g=!0;break}g||f.push({info:p,sessionIds:[p.sessionId]})}i=a(f),o=i.next();case 2:if(o.done){l.u(4);break}return s=o.value,u=Pm(e,t,s),d(l,u,5);case 5:c=l.h,r=r.concat(c),o=i.next(),l.u(2);break;case 4:return l.return(r)}})}function Pm(e,t,n){var r,i,o;return A(function(a){switch(a.g){case 1:return r=new Ri({Db:t,onError:function(){},qe:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),p(a,2),r.configure(e),d(a,Ui(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:y(a,3);break;case 2:return i=v(a),W("Error initializing EME",i),d(a,r.destroy(),5);case 5:return a.return([]);case 3:return o=[],d(a,Promise.all(n.sessionIds.map(function(e){var t;return A(function(n){return 1==n.g?(p(n,2),d(n,Wi(r,e),4)):2!=n.g?(o.push(e),y(n,0)):(t=v(n),W("Error deleting offline session",t),void h(n))})})),6);case 6:return d(a,r.destroy(),7);case 7:return a.return(o)}})}function Im(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Se(e.audioCapabilities,t.audioCapabilities,n)&&Se(e.videoCapabilities,t.videoCapabilities,n)}function jm(e,t,n){var r=t.presentationTimeline.getDuration();return t=Om(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function Mm(e,t){var n=bm(new mm(e.kb(),e.Ea()),t),r=t.appMetadata||{};return n=Om(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function Om(e){var t=[],n=Vn(e.variants);n=a(n);for(var r=n.next();!r.done;r=n.next())t.push(Rn(r.value));for(e=a(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Dn(n.value));return t}function Rm(){this.g={}}function Dm(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,o=r.bandwidth||t.bandwidth-i;0>=o&&(W("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),o=t.bandwidth),e.g[n.id]=i,e.g[r.id]=o}}function Lm(e,t){e.g[t.id]=t.bandwidth||2048}function Nm(e,t){return e=e.g[t],null==e&&(e=0,V("Asking for bitrate of stream not given to the estimator")),0==e&&W("Using bitrate of 0, this stream won't affect progress"),e}function Um(e){var t=this;if(e&&e.constructor!=Zc)throw new He(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Zb()):(this.h=Xu(),this.g=new Ir),this.i=[],this.j=[];var n=!e;this.l=new Fr(function(){var e,r,i,o,s;return A(function(u){switch(u.g){case 1:return d(u,Promise.all(t.j.map(function(e){return Nv(e)})),2);case 2:for(e=function(){},r=[],i=a(t.i),o=i.next();!o.done;o=i.next())s=o.value,r.push(s.then(e,e));return d(u,Promise.all(r),3);case 3:if(!n){u.u(4);break}return d(u,t.g.destroy(),4);case 4:t.h=null,t.g=null,h(u)}})})}function Bm(){if(Ge())e:{for(var e=a(vA.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Fm(e,t,n,r,i,o){var a,s,u,c,l,f,h,g,y,w,S,_,T,k;return A(function(E){switch(E.g){case 1:return ab(),s=a=null,u=new Qv,f=l=c=null,p(E,2,3),d(E,r(),5);case 5:return a=E.h,d(E,tb(e,t,a,i),6);case 6:if(h=E.h,ob(e),!(g=!h.presentationTimeline.U()&&!h.presentationTimeline.ec()))throw new He(2,9,9005,t);return d(E,e.xc(h,function(e){f=f||e},i),7);case 7:if(s=E.h,ob(e),f)throw f;return d(E,Km(h,s,i),8);case 8:return d(E,u.init(),9);case 9:return ob(e),d(E,Zv(u),10);case 10:return c=E.h,ob(e),y=qm(s,h,t,n,i,o),w=y.li,S=y.$f,d(E,c.Ea.addManifests([w]),11);case 11:if(_=E.h,ob(e),l=_[0],ob(e),f)throw f;return d(E,Hm(e,S,l,w,o,i,c.Ea,h,s),12);case 12:return ob(e),Xm(h,w,s,i),d(E,c.Ea.updateManifest(l,w),13);case 13:return ob(e),T=new ym("manifest",c.path.kb,c.path.Ea,l),E.return(Mm(T,w));case 3:return m(E),d(E,u.destroy(),14);case 14:if(!a){E.u(15);break}return d(E,a.stop(),15);case 15:if(!s){E.u(17);break}return d(E,s.destroy(),17);case 17:b(E,0);break;case 2:if(k=v(E),null==l){E.u(19);break}return d(E,Vm(l),19);case 19:throw f||k}})}function Hm(e,t,n,r,i,o,s,u,c){var l,f,g,m,b,w,S,_,T,k;return A(function(E){switch(E.g){case 1:if(l={},f=0,g=function(t,p){var g,y,v,m,b,w,S;return A(function(_){if(1==_.g){for(g={},y=a(t),v=y.next();!v.done;g={Sb:g.Sb},v=y.next())g.Sb=v.value,m=Mv(g.Sb,o),b=g.Sb.i,w=g.Sb.h,S=function(t){return function(n){var r,i,o;return A(function(a){if(1==a.g)return d(a,s.addSegments([{data:n}]),2);r=a.h,ob(e),i=t.Sb.g,o=jv(i),l[o]=r[0],f+=n.byteLength,h(a)})}}(g),Uv(i,g.Sb.groupId,m,b,w,S);return d(_,Bv(i),2)}return p?(ob(e),Xm(u,r,c,o),d(_,s.updateManifest(n,r),0)):_.u(0)})},m=!1,p(E,2),!Gm(u)||!m||zm(u)){E.u(4);break}return d(E,g(t.filter(function(e){return e.h}),!0),5);case 5:return ob(e),t=t.filter(function(e){return!e.h}),b=l,w=f,l={},f=0,d(E,Wm(s,n,r,b,w,function(){return ob(e)}),6);case 6:ob(e);case 4:if(m){E.u(7);break}return d(E,g(t,!1),8);case 8:return ob(e),S=l,_=f,l={},f=0,d(E,Wm(s,n,r,S,_,function(){return ob(e)}),9);case 9:ob(e);case 7:y(E,0);break;case 2:return T=v(E),k=Object.values(l),d(E,s.removeSegments(k,function(){}),10);case 10:throw T}})}function Vm(e){var t,n,r,i;return A(function(o){switch(o.g){case 1:return t=new Qv,d(o,t.init(),2);case 2:return d(o,Zv(t),3);case 3:return n=o.h,r=new ym("manifest",n.path.kb,n.path.Ea,e),d(o,t.destroy(),4);case 4:return i=new Um,d(o,i.remove(r.toString()),0)}})}function Wm(e,t,n,r,i,o){var s,u,c,l,f,h,g,m,b,w,S;return A(function(_){switch(_.g){case 1:for(s=!1,p(_,2),u=!0,c=a(n.streams),l=c.next();!l.done;l=c.next())for(f=l.value,h=a(f.segments),g=h.next();!g.done;g=h.next())m=g.value,b=m.pendingSegmentRefId?r[m.pendingSegmentRefId]:null,null!=b&&(m.dataKey=b,m.pendingSegmentRefId=void 0),b=m.pendingInitSegmentRefId?r[m.pendingInitSegmentRefId]:null,null!=b&&(m.initSegmentKey=b,m.pendingInitSegmentRefId=void 0),m.pendingSegmentRefId&&(u=!1),m.pendingInitSegmentRefId&&(u=!1);return n.size+=i,u&&(n.isIncomplete=!1),d(_,e.updateManifest(t,n),4);case 4:s=!0,o(),y(_,0);break;case 2:return w=v(_),d(_,Vm(t),5);case 5:if(s){_.u(6);break}return S=Object.values(r),d(_,e.removeSegments(S,function(){}),6);case 6:throw w}})}function Km(e,t,n){var r,i,o,s,u,c,l,f,g,m,b,w,S,_,T,k,E,x,C,P,I,j,M,O,R,D,L,N;return A(function(A){switch(A.g){case 1:return r={width:1/0,height:1/0},mn(e,n.restrictions,r),d(A,_n(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(i=[],o=n.preferredDecodingAttributes,s=n.preferredVideoCodecs,u=n.preferredAudioCodecs,yn(e,s,u,o),c=a(e.variants),l=c.next();!l.done;l=c.next())f=l.value,i.push(Rn(f));for(g=a(e.textStreams),m=g.next();!m.done;m=g.next())b=m.value,i.push(Dn(b));for(w=a(e.imageStreams),S=w.next();!S.done;S=w.next())_=S.value,i.push(Ln(_));return d(A,n.offline.trackSelectionCallback(i),3);case 3:for(T=A.h,k=e.presentationTimeline.getDuration(),E=0,x=a(T),C=x.next();!C.done;C=x.next())P=C.value,I=P.bandwidth*k/8,E+=I;return p(A,4),d(A,n.offline.downloadSizeCallback(E),6);case 6:if(!(j=A.h))throw new He(2,9,9014);y(A,5);break;case 4:if((M=v(A))instanceof He)throw M;throw W("downloadSizeCallback has produced an unexpected error",M),new He(2,9,9015);case 5:for(O=new Set,R=new Set,D=new Set,L=a(T),C=L.next();!C.done;C=L.next())N=C.value,"variant"==N.type&&O.add(N.id),"text"==N.type&&R.add(N.id),"image"==N.type&&D.add(N.id);e.variants=e.variants.filter(function(e){return O.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return R.has(e.id)}),e.imageStreams=e.imageStreams.filter(function(e){return D.has(e.id)}),db(e),h(A)}})}function qm(e,t,n,r,i,o){var s=jm(n,t,r),u=i.offline.progressCallback;Lv(o,function(e,t){s.size=t,u(s,e)},function(t,n){c&&i.offline.usePersistentLicense&&l==n&&qi(e,"cenc",t)});var c=Gm(t)&&!zm(t),l=null;c&&(l=mA.get(e.g.keySystem));for(var f=new Rm,d=a(t.textStreams),h=d.next();!h.done;h=d.next())f.g[h.value.id]=52;for(d=a(t.imageStreams),h=d.next();!h.done;h=d.next())Lm(f,h.value);for(h=a(t.variants),d=h.next();!d.done;d=h.next())Dm(f,d.value);return f=nb(o,f,t,i),o=f.streams,f=f.$f,h=e.g,d=i.offline.usePersistentLicense,h&&d&&(h.initData=[]),{li:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.md(),streams:o,sessionIds:d?Gi(e):[],drmInfo:h,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},$f:f}}function Gm(e){return e.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})}function zm(e){return e.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})})}function Xm(e,t,n,r){if(t.expiration=n.md(),n=Gi(n),t.sessionIds=r.offline.usePersistentLicense?n:[],Gm(e)&&r.offline.usePersistentLicense&&!n.length)throw new He(2,9,9007)}function Ym(e,t){var n,r,i,o,a,s;return A(function(u){switch(u.g){case 1:if(ab(),null==(n=vm(t))||"manifest"!=n.g)throw new He(2,9,9004,t);return r=n,i=new Qv,g(u,2),d(u,i.init(),4);case 4:return d(u,tm(i,r.kb(),r.Ea()),5);case 5:return o=u.h,d(u,o.getManifests([r.key()]),6);case 6:return a=u.h,s=a[0],d(u,Promise.all([$m(e,s,i),Qm(o,r,s)]),2);case 2:return m(u),d(u,i.destroy(),8);case 8:b(u,0)}})}function Jm(e,t){for(var n=[],r=a(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&"video"==i.type?n.push({contentType:Lt(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||n.push({contentType:Lt(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function $m(e,t,n){return A(function(r){return d(r,lb(e.g,e.h.drm,n,t),0)})}function Qm(e,t,n){function r(){}var i=cb(n);return Mm(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}function Zm(e){var t,n,r,i,o,s,u,c,l,f;return A(function(h){switch(h.g){case 1:return ab(),t=e.g,n=e.h.drm,r=new Qv,i=!1,g(h,2),d(h,r.init(),4);case 4:o=[],nm(r,function(e){return o.push(e)}),s=a(o),u=s.next();case 5:if(u.done){h.u(2);break}return c=u.value,d(h,c.getAll(),8);case 8:return l=h.h,d(h,Cm(n,t,l),9);case 9:return f=h.h,d(h,c.remove(f),10);case 10:f.length!=l.length&&(i=!0),u=s.next(),h.u(5);break;case 2:return m(h),d(h,r.destroy(),11);case 11:b(h,3);break;case 3:return h.return(!i)}})}function eb(){var e,t,n;return A(function(r){switch(r.g){case 1:return ab(),e=[],t=new Qv,g(r,2),d(r,t.init(),4);case 4:return n=Promise.resolve(),em(t,function(t,r){n=n.then(function(){var n;return A(function(i){if(1==i.g)return d(i,r.getAllManifests(),2);n=i.h,n.forEach(function(n,r){n=Mm(new ym("manifest",t.kb,t.Ea,r),n),e.push(n)}),h(i)})})}),d(r,n,2);case 2:return m(r),d(r,t.destroy(),6);case 6:b(r,3);break;case 3:return r.return(e)}})}function tb(e,t,n,r){var i,o,a,s,u;return A(function(c){if(1==c.g)return i=null,o=e.g,a={networkingEngine:o,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate}},n.configure(r.manifest),ob(e),d(c,n.start(t,a),2);if(3!=c.g)return s=c.h,ob(e),u=fb(s),d(c,Promise.all(Vr(u,function(e){return e.createSegmentIndex()})),3);if(ob(e),i)throw i;return c.return(s)})}function nb(e,t,n,r){var i=new Map,o=fb(n),s=new Map;o=a(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var c=rb(e,t,n,u,r,i);s.set(u.id,c)}for(e=a(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),$f:Array.from(i.values())}}function rb(e,t,n,r,i,o){var a={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},s=i.offline.numberOfParallelDownloads,u=0;return ib(r,n.presentationTimeline.jb(),function(n){var i=jv(n),c=void 0;if(!o.has(i)){var l=n.endTime-n.startTime;l=Nm(t,r.id)*l,l=Rv(e.g,l),o.set(i,new Iv(n,l,u,!1))}n.ea&&(c=jv(n.ea),o.has(c)||(l=.5*Nm(t,r.id),l=Rv(e.g,l),o.set(c,new Iv(n.ea,l,u,!0)))),a.segments.push({pendingInitSegmentRefId:c,initSegmentKey:c?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:i,dataKey:0,mimeType:n.mimeType,codecs:n.codecs}),u=(u+1)%s}),a}function ib(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function ob(e){if(e.l.g)throw new He(2,9,7001)}function ab(){if(!Bm())throw new He(2,9,9e3)}function sb(e,t){return A(function(n){return 1==n.g?(e.i.push(t),g(n,2),d(n,t,4)):2!=n.g?n.return(n.h):(m(n),we(e.i,t),b(n,0))})}function ub(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){we(e.i,n)})}function cb(e){var t=new Set;e=a(e.streams);for(var n=e.next();!n.done;n=e.next()){n=a(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,null!=r.initSegmentKey&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function lb(e,t,n,r){var i,o,a;return A(function(s){return 1==s.g?r.drmInfo?(i=rm(n),o=r.sessionIds.map(function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Jm(r,!1),videoCapabilities:Jm(r,!0)}}),d(s,Cm(t,e,o),2)):s.return():3!=s.g?(a=s.h,d(s,i.remove(a),3)):d(s,i.add(o.filter(function(e){return!a.includes(e.sessionId)})),0)})}function fb(e){for(var t=new Set,n=a(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=a(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=a(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function db(e){var t=new Set(e.variants.map(function(e){return e.video})),n=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams,1<t.size&&W("Multiple video tracks selected to be stored"),t=a(n);for(var r=t.next();!r.done;r=t.next()){r=r.value;for(var i=a(n),o=i.next();!o.done;o=i.next())o=o.value,r!=o&&r.language==o.language&&W("Similar audio tracks were selected to be stored",r.id,o.id)}for(n=a(e),t=n.next();!t.done;t=n.next())for(t=t.value,r=a(e),i=r.next();!i.done;i=r.next())i=i.value,t!=i&&t.language==i.language&&W("Similar text tracks were selected to be stored",t.id,i.id)}function hb(){}function pb(e,t){for(e={priority:t||0,callback:e},t=0;t<bA.length;t++)if(bA[t].priority<e.priority)return void bA.splice(t,0,e);bA.push(e)}function gb(){this.g=new vb}function yb(){e.AbortController||(e.AbortController=gb,e.AbortSignal=vb)}function vb(){xr.call(this),this.h=!1,this.g=void 0,this.onabort=null}function mb(){}function bb(){if(Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))K("Using native ARIAMixin interface.");else{K("ARIAMixin interface not detected. Installing polyfill.");for(var e=a(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())wb(t.value)}}function wb(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||void 0==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function Sb(){}function _b(){p_()}function Tb(){}function kb(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Eb),document.addEventListener("webkitfullscreenerror",Eb),document.addEventListener("mozfullscreenchange",Eb),document.addEventListener("mozfullscreenerror",Eb),document.addEventListener("MSFullscreenChange",Eb),document.addEventListener("MSFullscreenError",Eb)}}function Eb(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function Ab(){}function xb(){var e=!0;!tt()||tt()&&lt("Android")||tt()&&lt("Fuchsia")||(e=!1),(rt()||it()||ot()||Ze()||Je()||lt("PC=EOS")||at())&&(e=!1),e&&navigator.mediaCapabilities?K("MediaCapabilities: Native mediaCapabilities support found."):(K("MediaCapabilities: install"),navigator.mediaCapabilities||(navigator.mediaCapabilities={}),wA=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Cb)}function Cb(e){var t,n,r,i,o,a,s,u,c,l,f;return A(function(h){switch(h.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,r=e.audio,"media-source"!=e.type){if("file"!=e.type)return h.return(t);if(n&&(i=n.contentType,!(o=ze(i)))||r&&(a=r.contentType,!(s=ze(a))))return h.return(t);h.u(2);break}if(!Ge())return h.return(t);if(!n){h.u(3);break}return d(h,Pb(n),4);case 4:if(!(u=h.h))return h.return(t);case 3:if(r){var p=r.contentType;if(tt()&&r.spatialRendering&&(p+="; spatialRendering=true"),!(c=te(p)))return h.return(t)}case 2:return e.keySystemConfiguration?(l=e.keySystemConfiguration,d(h,Ib(n,r,l),6)):(t.supported=!0,h.return(t));case 6:(f=h.h)&&(t.supported=!0,t.keySystemAccess=f);case 5:return h.return(t)}})}function Pb(e){var t,n;return A(function(r){return 1==r.g?tt()?d(r,jb(e),3):Je()?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width,t+="; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.bitrate&&(t+="; bitrate="+e.bitrate),r.return(te(t))):r.u(2):2!=r.g?(n=r.h,r.return(n)):r.return(te(e.contentType))})}function Ib(e,t,n){var r,i,o,a,s,u,c,l,f;return A(function(h){switch(h.g){case 1:if(r=[],i=[],n.audio&&(o={robustness:n.audio.robustness||"",contentType:t.contentType},Je()&&t.contentType.includes('codecs="ac-3"')&&(o.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(o.encryptionScheme=n.audio.encryptionScheme),r.push(o)),n.video&&(a={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(a.encryptionScheme=n.video.encryptionScheme),i.push(a)),s={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(s.audioCapabilities=r),i.length&&(s.videoCapabilities=i),u=e?e.contentType:"",c=t?t.contentType:"",l=n.keySystem,f=null,p(h,2),FT.has(u+"#"+c+"#"+l)){f=FT.get(u+"#"+c+"#"+l)||null,h.u(4);break}return d(h,navigator.requestMediaKeySystemAccess(n.keySystem,[s]),5);case 5:f=h.h,FT.set(u+"#"+c+"#"+l,f);case 4:y(h,3);break;case 2:v(h),K("navigator.requestMediaKeySystemAccess failed.");case 3:return h.return(f)}})}function jb(t){var n,r;return A(function(i){return 1==i.g?e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(n=t.contentType,t.width&&t.height&&(n+="; width="+t.width+"; height="+t.height),t.framerate&&(n+="; framerate="+t.framerate),"pq"===t.transferFunction&&(n+="; eotf=smpte2084"),r=!1,n in SA?(r=SA[n],i.u(2)):d(i,cast.__platform__.canDisplayType(n),3)):(W("Expected cast APIs to be available! Falling back to shaka.media.Capabilities.isTypeSupported() for type support."),i.return(te(t.contentType))):(2!=i.g&&(r=i.h,SA[n]=r),i.return(r))})}function Mb(){}function Ob(){q("MediaSource.install");var t=ut();e.MediaSource||e.ManagedMediaSource?t?10>=t?(K("Blacklisting MSE on Safari <= 10."),e.MediaSource=null):12>=t?(K("Patching Safari 11 & 12 MSE bugs."),Rb(),Db()):15>=t&&(K("Patching Safari 13 & 14 & 15 MSE bugs."),Rb()):lt("DT_STB_BCM")?(Rb(),Db()):Qe()||$e()||lt("Tizen 4")?(K("Rejecting Opus."),Nb()):K("Using native MSE as-is."):K("No MSE implementation available."),(e.MediaSource||e.ManagedMediaSource)&&Lb(),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&(K("Patching vp09 support queries."),Ub())}function Rb(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,x.apply(0,arguments));return t.abort=function(){},t}}function Db(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function Lb(){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(e){return"mp2t"!=Ft(e)&&t(e)},e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"mp2t"!=Ft(e)&&n(e)}}}function Nb(){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(e){return"opus"!=Vt(e)&&t(e)},e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"opus"!=Vt(e)&&n(e)}}}function Ub(){var e=MediaSource.isTypeSupported;Ze()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(e){return e.startsWith("codecs=")});if(0>r)return e(t);var i=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=i.findIndex(function(e){return e.startsWith("vp09")});return 0<=o&&(i[o]="vp9",n[r]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}function Bb(){}function Fb(){screen.orientation&&screen.orientation.unlock?K("Using native screen.orientation"):void 0!=screen.orientation?Hb():void 0!=e.orientation&&Vb()}function Hb(){void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return K("screen.orientation.lock is a no-op"),Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){K("screen.orientation.unlock is a no-op")})}function Vb(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new Wb;screen.orientation=n,t(),e.addEventListener("orientationchange",function(){t();var e=new Er("change");n.dispatchEvent(e)})}function Wb(){xr.call(this),this.type="",this.angle=0}function Kb(){}function qb(e,t){q("PatchedMediaKeysApple.requestMediaKeySystemAccess");try{var n=new Xb(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Gb(e){q("PatchedMediaKeysApple.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&Jb(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Jb(e,this):Promise.resolve()}function zb(e){if(q("PatchedMediaKeysApple.onWebkitNeedKey_",e),e=he(e.initData),ge(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=yt(e.subarray(4),!0),e=mt(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=de(e),this.dispatchEvent(t)}function Xb(e,t){if(q("PatchedMediaKeysApple.MediaKeySystemAccess"),this.keySystem=e,e.startsWith("com.apple.fps"))for(e=a(t),t=e.next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,i=!1;if(n.audioCapabilities)for(var o=a(n.audioCapabilities),s=o.next();!s.done;s=o.next())s=s.value,s.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),i=!0));if(n.videoCapabilities)for(n=a(n.videoCapabilities),s=n.next();!s.done;s=n.next())o=s.value,o.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),i=!0));r||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=i?t:null}if(t)return void(this.g=t)}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Yb(e){q("PatchedMediaKeysApple.MediaKeys"),this.h=new WebKitMediaKeys(e),this.g=new $}function Jb(e,t){if(e.g.ob(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",zb);try{return us(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(e){return Promise.reject(e)}}function $b(e){q("PatchedMediaKeysApple.MediaKeySession"),xr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new $,this.sessionId="",this.expiration=NaN,this.closed=new vr,this.keyStatuses=new Zb}function Qb(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.g=t,t=new Er("keystatuseschange"),e.dispatchEvent(t)}function Zb(){this.size=0,this.g=void 0}function ew(){}function tw(){e.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||$e()||lt("Tizen 4")||lt("Tizen 5.0")||et())&&(K("Patching MediaKeys.setServerCertificate"),MediaKeys.prototype.setServerCertificate=nw)}function nw(){return q("PatchedMediaKeysCert.setServerCertificate"),Promise.resolve(!1)}function rw(){}function iw(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(K("EME not available."),navigator.requestMediaKeySystemAccess=ow,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=aw,e.MediaKeys=sw,e.MediaKeySystemAccess=uw,e.shakaMediaKeysPolyfill=PA)}function ow(){return q("PatchedMediaKeysNop.requestMediaKeySystemAccess"),Promise.reject(Error("The key system specified is not supported."))}function aw(e){return q("PatchedMediaKeysNop.setMediaKeys"),null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function sw(){throw new TypeError("Illegal constructor.")}function uw(){throw this.keySystem="",new TypeError("Illegal constructor.")}function cw(){}function lw(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)K("Using webkit-prefixed EME v0.1b"),IA="webkit";else{if(!HTMLMediaElement.prototype.generateKeyRequest)return;K("Using nonprefixed EME v0.1b")}navigator.requestMediaKeySystemAccess=dw,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=hw,e.MediaKeys=gw,e.MediaKeySystemAccess=pw,e.shakaMediaKeysPolyfill=jA}}function fw(e){var t=IA;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function dw(e,t){q("PatchedMediaKeysWebkit.requestMediaKeySystemAccess");try{var n=new pw(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function hw(e){q("PatchedMediaKeysWebkit.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&yw(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&yw(e,this),Promise.resolve()}function pw(e,t){q("PatchedMediaKeysWebkit.MediaKeySystemAccess"),this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video"),t=a(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var c=a(o.audioCapabilities),l=c.next();!l.done;l=c.next())l=l.value,l.contentType&&(u=!0,i.canPlayType(l.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(l),r=!0));if(o.videoCapabilities)for(c=a(o.videoCapabilities),l=c.next();!l.done;l=c.next())l=l.value,l.contentType&&(u=!0,i.canPlayType(l.contentType,this.g)&&(s.videoCapabilities.push(l),r=!0));if(u||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r)return void(this.h=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function gw(e){q("PatchedMediaKeysWebkit.MediaKeys"),this.l=e,this.h=null,this.g=new $,this.i=[],this.j=new Map}function yw(e,t){e.h=t,e.g.ob();var n=IA;t&&(e.g.D(t,n+"needkey",function(t){q("PatchedMediaKeysWebkit.onWebkitNeedKey_",t);var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=de(t.initData),e.h.dispatchEvent(n)}),e.g.D(t,n+"keymessage",function(t){q("PatchedMediaKeysWebkit.onWebkitKeyMessage_",t);var n=vw(e,t.sessionId);n?(t=(new Map).set("messageType",void 0==n.keyStatuses.bc()?"licenserequest":"licenserenewal").set("message",t.message),t=new Er("message",t),q("PatchedMediaKeysWebkit.MediaKeySession.generated"),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t)):V("Session not found",t.sessionId)}),e.g.D(t,n+"keyadded",function(t){q("PatchedMediaKeysWebkit.onWebkitKeyAdded_",t),(t=vw(e,t.sessionId))&&(q("PatchedMediaKeysWebkit.MediaKeySession.ready"),Sw(t,"usable"),t.g&&t.g.resolve(),t.g=null)}),e.g.D(t,n+"keyerror",function(t){q("PatchedMediaKeysWebkit.onWebkitKeyError_",t);var n=vw(e,t.sessionId);if(n){q("PatchedMediaKeysWebkit.MediaKeySession.handleError",t);var r=Error("EME v0.1b key error"),i=t.errorCode;i.systemCode=t.systemCode,r.errorCode=i,!t.sessionId&&n.h?(45==t.systemCode&&(r.message="Unsupported session type."),n.h.reject(r),n.h=null):t.sessionId&&n.g?(n.g.reject(r),n.g=null):(r=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Sw(n,"output-restricted"):1==r?Sw(n,"expired"):Sw(n,"internal-error"))}}))}function vw(e,t){var n=e.j.get(t);return n?(q("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):(n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),q("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):null}function mw(e,t,n){q("PatchedMediaKeysWebkit.MediaKeySession"),xr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new vr,this.keyStatuses=new _w}function bw(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var r=he(mt("LOAD_SESSION|"+n));else{var i=mt("PERSISTENT|");r=Ct(i,t)}else r=he(t)}catch(e){return Promise.reject(e)}e.h=new vr;var o=fw("generateKeyRequest");try{e.j[o](e.i,r)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new qe(function(){try{e.j[o](e.i,r)}catch(t){e.h.reject(t),e.h=null}}).X(.01)}return e.h}function ww(e,t,n){if(e.g)e.g.then(function(){return ww(e,t,n)}).catch(function(){return ww(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var r=gt(n),i=JSON.parse(r);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Et(i.keys[0].k),i=Et(i.keys[0].kid)}else r=he(n),i=null;var o=fw("addKey");try{e.j[o](e.i,r,i,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function Sw(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.g=t,t=new Er("keystatuseschange"),e.dispatchEvent(t)}function _w(){this.size=0,this.g=void 0}function Tw(){}function kw(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(q("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Aw,Object.defineProperty(t,"disablePictureInPicture",{get:Cw,set:Pw,enumerable:!0,configurable:!0}),document.exitPictureInPicture=xw,document.addEventListener("webkitpresentationmodechanged",Ew,!0))}}function Ew(e){if(e=e.target,"picture-in-picture"==e.webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Aw(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function xw(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Cw(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Pw(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function Iw(){}function jw(){q("randomUUID.install"),e.crypto?"randomUUID"in e.crypto?q("RandomUUID: Native window.crypto.randomUUID() support found."):e.crypto.randomUUID=Mw:q("window.crypto must be available to install randomUUID polyfill.")}function Mw(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function Ow(){}function Rw(){q("Symbol.install");var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:Dw})}function Dw(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function Lw(){}function Nw(){if(q("VideoPlayPromise.install"),e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e}}}function Uw(){}function Bw(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||et())&&(t.getVideoPlaybackQuality=Fw)}}function Fw(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Hw(){}function Vw(){if(e.VTTCue)K("Using native VTTCue.");else if(e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)K("Using VTTCue polyfill from 3 argument TextTrackCue."),t=Ww;else if(6==n)K("Using VTTCue polyfill from 6 argument TextTrackCue."),t=Kw;else{try{var r=!!Ww(1,2,"")}catch(e){r=!1}r&&(K("Using VTTCue polyfill from 3 argument TextTrackCue."),t=Ww)}t?e.VTTCue=function(e,n,r){return t(e,n,r)}:V("No recognized signature for TextTrackCue found!")}else V("VTTCue not available.")}function Ww(t,n,r){return new e.TextTrackCue(t,n,r)}function Kw(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function qw(){}function Gw(){}function zw(e,t,n,r,i,o,s,u,c,l,f,d){var h=l;if(ci(e)){if(!f)return null;var p={tagName:"span",children:[di(e)],attributes:{},parent:null}}else p=e;for(var g=null,y=a(XA),v=y.next();!v.done&&!(g=eS(p,"backgroundImage",r,"#",v.value)[0]);v=y.next());y=null;var m=wi(p,XA,"backgroundImage");if(d&&m&&!m.startsWith("#")&&(v=new Ie(d),m=new Ie(m),(v=v.resolve(m).toString())&&(y=v)),("p"==e.tagName||g||y)&&(f=!0),e=f,v="default"==(p.attributes["xml:space"]||(u?"default":"preserve")),m=p.children.every(ci),u=[],!m)for(var b=a(p.children),w=b.next();!w.done;w=b.next())(w=zw(w.value,t,n,r,i,o,s,v,c,p,f,d))&&u.push(w);if(r=null!=l,d=di(p),d=p.children.length&&d&&/\S/.test(d),!((w=p.attributes.begin||p.attributes.end||p.attributes.dur)||d||"br"==p.tagName||0!=u.length||r&&!v))return null;for(b=nS(p,n),d=b.start,b=b.end;h&&h.tagName&&"tt"!=h.tagName;)b=tS(h,n,d,b),d=b.start,b=b.end,h=h.parent;if(null==d&&(d=0),d+=t.periodStart,b=null==b?1/0:b+t.periodStart,d=Math.max(d,t.segmentStart),b=Math.min(b,t.segmentEnd),!w&&0<u.length)for(d=1/0,b=0,t=a(u),n=t.next();!n.done;n=t.next())n=n.value,d=Math.min(d,n.startTime),b=Math.max(b,n.endTime);if("br"==p.tagName)return i=new Te(d,b,""),i.lineBreak=!0,i;if(t="",m&&(t=St(di(p)||""),v&&(t=t.replace(/\s+/g," "))),t=new Te(d,b,t),t.nestedCues=u,f||(t.isContainer=!0),c&&(t.cellResolution=c),c=eS(p,"region",o,"")[0],p.attributes.region&&c&&c.attributes["xml:id"]){var S=c.attributes["xml:id"];t.region=s.filter(function(e){return e.id==S})[0]}return s=c,l&&r&&!p.attributes.region&&!p.attributes.style&&(s=eS(l,"region",o,"")[0]),Xw(t,p,s,g,y,i,e,0==u.length),t}function Xw(e,t,n,r,i,o,a,s){if(a=a||s,"rtl"==Jw(t,n,o,"direction",a)&&(e.direction="rtl"),s=Jw(t,n,o,"writingMode",a),"tb"==s||"tblr"==s?e.writingMode="vertical-lr":"tbrl"==s?e.writingMode="vertical-rl":"rltb"==s||"rl"==s?e.direction="rtl":s&&(e.direction=U_),(s=Jw(t,n,o,"textAlign",!0))?(e.positionAlign=qA[s],e.lineAlign=KA[s],e.textAlign=D_[s.toUpperCase()]):e.textAlign=R_,(s=Jw(t,n,o,"displayAlign",!0))&&(e.displayAlign=N_[s.toUpperCase()]),(s=Jw(t,n,o,"color",a))&&(e.color=s),(s=Jw(t,n,o,"backgroundColor",a))&&(e.backgroundColor=s),(s=Jw(t,n,o,"border",a))&&(e.border=s),s=Jw(t,n,o,"fontFamily",a))switch(s){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=s}switch((s=Jw(t,n,o,"fontWeight",a))&&"bold"==s&&(e.fontWeight=700),s=Jw(t,n,o,"wrapOption",a),e.wrapLine=!s||"noWrap"!=s,(s=Jw(t,n,o,"lineHeight",a))&&s.match(LA)&&(e.lineHeight=s),(s=Jw(t,n,o,"fontSize",a))&&(s.match(LA)||s.match(DA))&&(e.fontSize=s),(s=Jw(t,n,o,"fontStyle",a))&&(e.fontStyle=z_[s.toUpperCase()]),r?(i=r.attributes.imageType||r.attributes.imagetype,s=r.attributes.encoding,r=di(r).trim(),"PNG"==i&&"Base64"==s&&r&&(e.backgroundImage="data:image/png;base64,"+r)):i&&(e.backgroundImage=i),(r=Jw(t,n,o,"textOutline",a))&&(r=r.split(" "),r[0].match(LA)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(LA)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=Jw(t,n,o,"letterSpacing",a))&&r.match(LA)&&(e.letterSpacing=r),(r=Jw(t,n,o,"linePadding",a))&&r.match(LA)&&(e.linePadding=r),(r=Jw(t,n,o,"opacity",a))&&(e.opacity=parseFloat(r)),(r=$w(n,o,"textDecoration"))&&Yw(e,r),(r=Qw(t,o,"textDecoration"))&&Yw(e,r),(r=Jw(t,n,o,"textCombine",a))&&(e.textCombineUpright=r),Jw(t,n,o,"ruby",a)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function Yw(e,t){t=a(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&we(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&we(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&we(e.textDecoration,"overline")}}function Jw(e,t,n,r,i){return i=void 0===i||i,(e=Qw(e,n,r))?e:i?$w(t,n,r):null}function $w(e,t,n){if(!e)return null;var r=wi(e,zA,n);return r||Zw(e,t,n)}function Qw(e,t,n){var r=wi(e,zA,n);return r||Zw(e,t,n)}function Zw(e,t,n){e=eS(e,"style",t,"");for(var r=null,i=0;i<e.length;i++){var o=mi(e[i],"urn:ebu:tt:style",n);o||(o=wi(e[i],zA,n)),o||(o=Qw(e[i],t,n)),o&&(r=o)}return r}function eS(e,t,n,r,i){var o=[];if(!e||1>n.length)return o;var s=e;for(e=null;!e&&!(e=i?mi(s,i,t):s.attributes[t])&&(s=s.parent););if(t=e)for(t=a(t.split(" ")),i=t.next();!i.done;i=t.next())for(i=i.value,e=a(n),s=e.next();!s.done;s=e.next())if(s=s.value,r+s.attributes["xml:id"]==i){o.push(s);break}return o}function tS(e,t,n,r){return e=nS(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==r?r=e.end:null!=e.start&&(r+=e.start),{start:n,end:r}}function nS(e,t){var n=rS(e.attributes.begin,t),r=rS(e.attributes.end,t);return e=rS(e.attributes.dur,t),null==r&&null!=e&&(r=n+e),{start:n,end:r}}function rS(e,t){var n=null;if(UA.test(e)){e=UA.exec(e),n=Number(e[1]);var r=Number(e[2]),i=Number(e[3]),o=Number(e[4]);o+=(Number(e[5])||0)/t.h,i+=o/t.frameRate,n=i+60*r+3600*n}else if(BA.test(e))n=iS(BA,e);else if(FA.test(e))n=iS(FA,e);else if(HA.test(e))e=HA.exec(e),n=Number(e[1])/t.frameRate;else if(VA.test(e))e=VA.exec(e),n=Number(e[1])/t.g;else if(WA.test(e))n=iS(WA,e);else if(e)throw new He(2,2,2001,"Could not parse cue time range in TTML");return n}function iS(e,t){return e=e.exec(t),null==e||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function oS(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function aS(){this.g=new Gw}function sS(){this.h=!1,this.g="UNKNOWN"}function uS(e){for(var t=a(Object.entries(W_)),n=t.next();!n.done;n=t.next()){var r=a(n.value);n=r.next().value,r=r.next().value;var i=new Te(0,0,"");i.color=r,e.set("."+n,i)}for(t=a(Object.entries(K_)),n=t.next();!n.done;n=t.next())r=a(n.value),n=r.next().value,r=r.next().value,i=new Te(0,0,""),i.backgroundColor=r,e.set("."+n,i)}function cS(e,t,n){if(e.includes("<")){0===n.size&&uS(n);var r=e;e=[];for(var i=-1,o=0;o<r.length;o++)"<"===r[o]?i=o+1:">"===r[o]&&0<i&&(i=r.substr(i,o-i),i.match(YA)&&e.push(i),i=-1);for(e=a(e),o=e.next();!o.done;o=e.next())o=o.value,r=r.replace("<"+o+">",'<div time="'+o+'">'),r+="</div>";e=r;e:{o=e,i=[];var s=-1;e="",r=!1;for(var u=0;u<o.length;u++)if("/"===o[u]){var c=o.indexOf(">",u);if(-1===c){e=o;break e}if((c=o.substring(u+1,c))&&"v"==c){r=!0;var l=null;if(i.length&&(l=i[i.length-1]),l){if(l===c)e+="/"+c+">";else{if(!l.startsWith("v")){e+=o[u];continue}e+="/"+l+">"}u+=c.length+1}else e+=o[u]}else e+=o[u]}else"<"===o[u]?(s=u+1,"v"!=o[s]&&(s=-1)):">"===o[u]&&0<s&&(i.push(o.substr(s,u-s)),s=-1),e+=o[u];for(o=a(i),i=o.next();!i.done;i=o.next())i=i.value,s=i.replace(" ",".voice-"),e=e.replace("<"+i+">","<"+s+">"),e=e.replace("</"+i+">","</"+s+">"),r||(e+="</"+s+">")}e=lS(e);try{var f=ai("<span>"+e+"</span>","span")}catch(e){W("cue parse fail: ",e)}if(f)if(f=f.children,1!=f.length||f[0].tagName)for(f=a(f),e=f.next();!e.done;e=f.next())dS(e.value,t,n);else t.payload=St(e);else W("The cue's markup could not be parsed: ",e),t.payload=St(e)}else t.payload=St(e)}function lS(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(e){return t[e]||""}):e||""}function fS(e,t){return e&&0<e.length?e:t}function dS(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Ae,r.position=null,r.size=0,e.tagName)for(var i=a(e.tagName.split(/(?=[ .])+/g)),o=i.next();!o.done;o=i.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]',n.has(s)||(s="v[voice="+u+"]")}switch(n.has(s)&&(s=n.get(s))&&(r.backgroundColor=fS(s.backgroundColor,r.backgroundColor),r.color=fS(s.color,r.color),r.fontFamily=fS(s.fontFamily,r.fontFamily),r.fontSize=fS(s.fontSize,r.fontSize),r.textShadow=fS(s.textShadow,r.textShadow),r.fontWeight=s.fontWeight,r.fontStyle=s.fontStyle,r.opacity=s.opacity,r.rubyTag=s.rubyTag,r.textCombineUpright=s.textCombineUpright,r.wrapLine=s.wrapLine),o){case"br":return r=ke(r.startTime,r.endTime),void t.nestedCues.push(r);case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(o=e.attributes.color)&&(r.color=o);break;case"div":if(!(o=e.attributes.time))break;(o=gS(new _f(o)))&&(r.startTime=o);break;case"ruby":case"rp":case"rt":r.rubyTag=o}}if(i=e.children,ci(e)||1==i.length&&ci(i[0]))for(n=di(e).split("\n"),e=!0,n=a(n),i=n.next();!i.done;i=n.next())i=i.value,e||(e=ke(r.startTime,r.endTime),t.nestedCues.push(e)),0<i.length&&(e=r.clone(),e.payload=St(i),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=a(i),e=t.next();!e.done;e=t.next())dS(e.value,r,n)}function hS(e,t,n){var r;if(r=/^align:(start|middle|center|end|left|right)$/.exec(t))t=r[1],e.textAlign="middle"==t?R_:D_[t.toUpperCase()];else if(r=/^vertical:(lr|rl)$/.exec(t))e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl";else if(r=/^size:([\d.]+)%$/.exec(t))e.size=Number(r[1]);else if(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":O_);else{if(!(r=/^region:(.*)$/.exec(t))){e:{if(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=V_[n[2].toUpperCase()]);else{if(!(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))){e=!1;break e}e.lineInterpretation=F_,e.line=Number(n[1]),n[2]&&(e.lineAlign=V_[n[2].toUpperCase()])}e=!0}return e}(t=pS(n,r[1]))&&(e.region=t)}return!0}function pS(e,t){return e=e.filter(function(e){return e.id==t}),e.length?e[0]:(W("VTT parser could not find a region with id: ",t," The region will be ignored."),null)}function gS(e){if(null==(e=kf(e,YA)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function yS(){this.g=null}function vS(e,t,n){var r,i,o;return(new Xr).box("payl",Zr(function(e){r=gt(e)})).box("iden",Zr(function(e){i=gt(e)})).box("sttg",Zr(function(e){o=gt(e)})).parse(e),r?mS(r,i,o,t,n):null}function mS(e,t,n,r,i){if(r=new Te(r,i,""),cS(e,r,new Map),t&&(r.id=t),n)for(e=new _f(n),t=Ef(e);t;)hS(r,t,[])||W("VTT parser encountered an invalid VTT setting: ",t," The setting will be ignored."),Tf(e),t=Ef(e);return r}function bS(){}function wS(e){if(null==(e=kf(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function SS(){this.g=new sS}function _S(e){var t="WEBVTT\n\n";if(""==e)return t;e=e.replace(/\r+/g,""),e=e.trim(),e=a(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}function TS(){}function kS(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=ES(n))&&(e.color=n),(n=t.BackColour)&&(n=ES(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=L_,e.textAlign="start";break;case 2:e.displayAlign=L_,e.textAlign=R_;break;case 3:e.displayAlign=L_,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=R_;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=R_;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function ES(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function AS(e){return e=ZA.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}function xS(e,t){var n=1&e[t+1]?7:9;return t+n<=e.length&&0<(e=((3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5)-n)?{be:n,Y:e}:null}function CS(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(60&e[t+2])>>>2;if(r>n.length-1)return null;var i=1+((192&e[t+2])>>>6),o=(1&e[t+2])<<2;return o|=(192&e[t+3])>>>6,{sampleRate:n[r],channelCount:o,Ha:"mp4a.40."+i}}function PS(e,t){if(t+1<e.length&&255===e[t]&&240==(246&e[t+1])){var n=1&e[t+1]?7:9;if(t+n>=e.length)return!1;var r=(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5;return!(r<=n)&&((t+=r)===e.length||t+1<e.length&&255===e[t]&&240==(246&e[t+1]))}return!1}function IS(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function jS(e){this.i=e,this.h=0,this.g=new Map}function MS(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(3<=n)return null;var r=63&e[t+4],i=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+i>e.length)return null;var o=e[t+6]>>5,a=0;2===o?a+=2:(1&o&&1!==o&&(a+=2),4&o&&(a+=2)),a=(e[t+6]<<8|e[t+7])>>12-a&1;var s=7&e[t+5];return e=new Uint8Array([n<<6|e[t+5]>>3<<1|s>>2,(3&s)<<6|o<<3|a<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][o]+a,ia:e,Y:i}}function OS(e,t){if(11===e[t]&&119===e[t+1]){var n=0,r=5;t+=r;for(var i,o;0<r;){o=e[t];var a=Math.min(r,8),s=8-a;i=4278190080>>>24+s<<s,i=(o&i)>>s,n=n?n<<a|i:i,t+=1,r-=a}if(16>n)return!0}return!1}function RS(e){this.i=e,this.h=0,this.g=new Map}function DS(e,t){if(t+8>e.length||2935!=(e[t]<<8|e[t+1]<<0))return null;var n=new ea(e.subarray(t+2));na(n,2),na(n,3);var r=ra(n,11)+1<<1,i=ra(n,2);if(3==i){i=ra(n,2),i=[24e3,22060,16e3][i];var o=3}else i=[48e3,44100,32e3][i],o=ra(n,2);var a=ra(n,3),s=ra(n,1);return n=ra(n,5),t+r>e.byteLength?null:(e=Math.floor(r*i/(16*[1,2,3,6][o])),e=new Uint8Array([(8160&e)>>5,(31&e)<<3,i<<6|n<<1|0,0|a<<1|s<<0,0]),{sampleRate:i,channelCount:[2,1,2,3,3,4,4,5][a]+s,ia:e,Y:r})}function LS(e){this.i=e,this.h=0,this.g=new Map}function NS(e){if(!e.length)return null;var t=e.find(function(e){return 7==e.type});if(e=e.find(function(e){return 8==e.type}),!t||!e)return null;var n=new ea(t.data),r=ca(n);if(ca(n),ca(n),oa(n),ex.includes(r)&&(r=aa(n),3===r&&na(n,1),oa(n),oa(n),na(n,1),ua(n))){r=3!==r?8:12;for(var i=0;i<r;i++)ua(n)&&(6>i?la(n,16):la(n,64))}if(oa(n),0===(r=aa(n)))aa(n);else if(1===r)for(na(n,1),oa(n),oa(n),r=aa(n),i=0;i<r;i++)oa(n);oa(n),na(n,1);var o=aa(n),a=aa(n),u=ra(n,1);0===u&&na(n,1),na(n,1);var c=0,l=0,f=0,d=0;if(ua(n)&&(c=aa(n),l=aa(n),f=aa(n),d=aa(n)),i=r=1,ua(n)&&ua(n)){var h=ca(n),p=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],g=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<h&&16>=h?(r=p[h-1],i=g[h-1]):255===h&&(r=ra(n,16),i=ra(n,16))}return n=(2-u)*(a+1)*16-2*f-2*d,o=16*(o+1)-2*c-2*l,c=[],t=t.fullData,c.push(t.byteLength>>>8&255),c.push(255&t.byteLength),c=c.concat.apply(c,s(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(255&e.byteLength),t=t.concat.apply(t,s(e)),e=new Uint8Array([1,c[3],c[4],c[5],255,225].concat(c,[1],t)),{height:n,width:o,va:e,ya:r,za:i}}function US(e){var t=!1,n=[],r=e.find(function(e){return 7==e.type}),i=!1;e=a(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var u=!1;switch(o.type){case 1:u=i=!0;var c=o.data;r&&4<c.length&&(2===(c=fa(new ea(c)))||4===c||7===c||9===c)&&(t=!0);break;case 5:t=u=i=!0;break;case 6:case 7:case 8:u=!0;break;case 9:i=u=!0;break;case 12:u=!0;break;default:u=!1}i&&u&&(u=o.fullData.byteLength,c=new Uint8Array(4),c[0]=u>>24&255,c[1]=u>>16&255,c[2]=u>>8&255,c[3]=255&u,n.push(c),n.push(o.fullData))}return n.length?{data:Ct.apply(_t,s(n)),vd:t}:null}function BS(e){if(!e.length)return null;var t=e.find(function(e){return 32==e.type}),n=e.find(function(e){return 33==e.type}),r=e.find(function(e){return 34==e.type});if(!t||!n||!r)return null;var i=FS(t.fullData);e=HS(n.fullData);var o=VS(r.fullData);return t=WS(t.fullData,n.fullData,r.fullData,{Af:i.Af,Zf:i.Zf,ff:e.ff,gf:e.gf,$e:e.$e,ef:e.ef,af:e.af,bf:e.bf,cf:e.cf,df:e.df,Ue:e.Ue,Ve:e.Ve,We:e.We,Xe:e.Xe,Ye:e.Ye,Ze:e.Ze,Re:e.Re,le:e.le,Pe:e.Pe,Oe:e.Oe,Ne:e.Ne,Df:o.Df}),{height:e.height,width:e.width,va:t,ya:e.Ji,za:e.Ii}}function FS(e){var t=new ea(e,!0);return ca(t),ca(t),ra(t,4),ra(t,2),ra(t,6),e=ra(t,3),t=ua(t),{Af:e+1,Zf:t}}function HS(e){e=new ea(e,!0),ca(e),ca(e);var t=0,n=0,r=0,i=0;ra(e,4);var o=ra(e,3);ua(e);for(var a=ra(e,2),s=ra(e,1),u=ra(e,5),c=ca(e),l=ca(e),f=ca(e),d=ca(e),h=ca(e),p=ca(e),g=ca(e),y=ca(e),v=ca(e),m=ca(e),b=ca(e),w=[],S=[],_=0;_<o;_++)w.push(ua(e)),S.push(ua(e));if(0<o)for(_=o;8>_;_++)ra(e,2);for(_=0;_<o;_++)w[_]&&ra(e,88),S[_]&&ca(e);aa(e),w=aa(e),3==w&&ra(e,1),S=aa(e),_=aa(e),ua(e)&&(t+=aa(e),n+=aa(e),r+=aa(e),i+=aa(e));var T=aa(e),k=aa(e),E=aa(e);if(ua(e))for(var A=0;A<=o;A++)aa(e),aa(e),aa(e);else aa(e),aa(e),aa(e);if(aa(e),aa(e),aa(e),aa(e),aa(e),aa(e),ua(e)&&ua(e))for(A=0;4>A;A++)for(var x=0;x<(3===A?2:6);x++)if(ua(e)){var C=Math.min(64,1<<4+(A<<1));1<A&&sa(e);for(var P=0;P<C;P++)sa(e)}else aa(e);for(ua(e),ua(e),ua(e)&&(ca(e),aa(e),aa(e),ua(e)),A=aa(e),C=x=0;C<A;C++)if(P=!1,0!==C&&(P=ua(e)),P){C===A&&aa(e),ua(e),aa(e);for(var I=P=0;I<=x;I++){var j=ua(e),M=!1;j||(M=ua(e)),(j||M)&&P++}x=P}else{for(I=aa(e),P=aa(e),x=I+P,j=0;j<I;j++)aa(e),ua(e);for(I=0;I<P;I++)aa(e),ua(e)}if(ua(e))for(A=aa(e),x=0;x<A;x++){for(C=0;C<E+4;C++)ra(e,1);ra(e,1)}if(A=E=1,x=0,ua(e),ua(e),ua(e)){if(ua(e)&&(C=ca(e),P=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],I=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<C&&16>=C?(E=P[C-1],A=I[C-1]):255===C&&(E=ra(e,16),A=ra(e,16))),ua(e)&&ua(e),ua(e)&&(ra(e,3),ua(e),ua(e)&&(ca(e),ca(e),ca(e))),ua(e)&&(aa(e),aa(e)),ua(e),ua(e),ua(e),(C=ua(e))&&(aa(e),aa(e),aa(e),aa(e)),ua(e)&&(ra(e,32),ra(e,32),ua(e)&&aa(e),ua(e)))for(I=!1,C=ua(e),P=ua(e),(C||P)&&((I=ua(e))&&(ca(e),ra(e,5),ua(e),ra(e,5)),ra(e,4),ra(e,4),I&&ra(e,4),ra(e,5),ra(e,5),ra(e,5)),j=0;j<=o;j++){var O=!0;M=1,ua(e)||(O=ua(e));var R=!1;if(O?aa(e):R=ua(e),R||(M=aa(e)+1),C){for(O=0;O<M;O++)aa(e),aa(e),I&&(aa(e),aa(e));ua(e)}if(P){for(O=0;O<M;O++)aa(e),aa(e),I&&(aa(e),aa(e));ua(e)}}ua(e)&&(ua(e),ua(e),ua(e),x=aa(e),aa(e),aa(e),aa(e),aa(e))}return{$e:b,ff:a,gf:s,ef:u,af:c,bf:l,cf:f,df:d,Ue:h,Ve:p,We:g,Xe:y,Ye:v,Ze:m,le:x,Re:0,Pe:w,Oe:T,Ne:k,width:S-(t+n)*(1===w||2===w?2:1),height:_-(r+i)*(1===w?2:1),Ji:E,Ii:A}}function VS(e){var t=new ea(e,!0);ca(t),ca(t),aa(t),aa(t),ua(t),ua(t),ra(t,3),ua(t),ua(t),aa(t),aa(t),sa(t),ua(t),ua(t),ua(t)&&aa(t),sa(t),sa(t),ua(t),ua(t),ua(t),ua(t),e=ua(t),t=ua(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Df:n}}function WS(e,t,n,r){var i=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return i[0]=1,i[1]=(3&r.ff)<<6|(r.gf?1:0)<<5|31&r.ef,i[2]=r.af,i[3]=r.bf,i[4]=r.cf,i[5]=r.df,i[6]=r.Ue,i[7]=r.Ve,i[8]=r.We,i[9]=r.Xe,i[10]=r.Ye,i[11]=r.Ze,i[12]=r.$e,i[13]=240|(3840&r.le)>>8,i[14]=255&r.le,i[15]=252|3&r.Df,i[16]=252|3&r.Pe,i[17]=248|7&r.Oe,i[18]=248|7&r.Ne,i[19]=0,i[20]=0,i[21]=(3&r.Re)<<6|(7&r.Af)<<3|(r.Zf?1:0)<<2|3,i[22]=3,i[23]=160,i[24]=0,i[25]=1,i[26]=(65280&e.byteLength)>>8,i[27]=(255&e.byteLength)>>0,i.set(e,28),i[23+(5+e.byteLength)]=161,i[e.byteLength+29]=0,i[e.byteLength+30]=1,i[e.byteLength+31]=(65280&t.byteLength)>>8,i[e.byteLength+32]=(255&t.byteLength)>>0,i.set(t,e.byteLength+33),i[23+(e.byteLength+10+t.byteLength)]=162,i[e.byteLength+10+t.byteLength+24]=0,i[e.byteLength+10+t.byteLength+25]=1,i[e.byteLength+10+t.byteLength+26]=(65280&n.byteLength)>>8,i[e.byteLength+10+t.byteLength+27]=(255&n.byteLength)>>0,i.set(n,e.byteLength+10+t.byteLength+28),i}function KS(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,o=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==o){var a=e[t+3]>>6;i=1e3*tx[14*(3===n?3-r:3===r?3:4)+i-1],o=nx[3*(3===n?0:2===n?1:2)+o],n=rx[n][r];var s=ix[r],u=Math.floor(n*i/o+(e[t+2]>>1&1))*s,c=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(c=c?parseInt(c[1],10):0)&&87>=c&&2===r&&224e3<=i&&0===a&&(e[t+3]|=128),{sampleRate:o,channelCount:3===a?1:2,Y:u,Hi:8*n*s}}return null}function qS(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function GS(e,t){if(t+1<e.length&&qS(e,t)){var n=KS(e,t),r=4;return n&&n.Y&&(r=n.Y),(t+=r)===e.length||t+1<e.length&&qS(e,t)}return!1}function zS(e){this.i=e,this.h=0,this.g=new Map}function XS(e){this.h=e,this.g=null}/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/
function YS(e){this.h=e,(this.g=NE.get("ISOBoxer")())&&JS(this)}function JS(e){function t(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var e=!0,n=0;16>n;n++)this.usertype[n]!==ox[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))})}function $S(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}function QS(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function ZS(){}function e_(){ux||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(ux=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=t_,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function t_(e,t){var n,r=this;return A(function(i){return 1==i.g?(navigator,d(i,ux.call(r,e,t),2)):(n=i.h,f_(n)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=ux,i.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=n_,i.return(n_.call(r,e,t))))})}function n_(e,t){var n,r,i,o,s,u,c,l,f,h,p,g,y=this;return A(function(v){if(1==v.g){for(navigator,n=l_(e),r=[],i=a(t),o=i.next();!o.done;o=i.next())s=o.value,u=r_(s.videoCapabilities,n),c=r_(s.audioCapabilities,n),s.videoCapabilities&&s.videoCapabilities.length&&!u.length||s.audioCapabilities&&s.audioCapabilities.length&&!c.length||(l=Object.assign({},s),l.videoCapabilities=u,l.audioCapabilities=c,r.push(l));if(!r.length)throw f=Error("Unsupported keySystem or supportedConfigurations."),f.name="NotSupportedError",f.code=DOMException.NOT_SUPPORTED_ERR,f;return d(v,ux.call(y,e,r),2)}return h=v.h,g=p=null,r[0]&&(r[0].videoCapabilities&&(p=r[0].videoCapabilities[0].encryptionScheme),r[0].audioCapabilities&&(g=r[0].audioCapabilities[0].encryptionScheme)),v.return(new c_(h,p,g))})}function r_(e,t){return e?e.filter(function(e){return d_(e.encryptionScheme,t)}):e}function i_(){}function o_(){cx||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(cx=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=a_,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function a_(e){var t,n,r,i=this;return A(function(o){switch(o.g){case 1:return navigator.mediaCapabilities,d(o,cx.call(i,e),2);case 2:if(t=o.h,!e.keySystemConfiguration)return o.return(t);if((n=t.keySystemAccess)&&f_(n))return navigator.mediaCapabilities.decodingInfo=cx,o.return(t);if(navigator.mediaCapabilities.decodingInfo=s_,n){o.u(3);break}return r=t,d(o,u_(e),4);case 4:return r.keySystemAccess=o.h,o.return(t);case 3:return o.return(s_.call(i,e))}})}function s_(e){var t,n,r,i,o,a,s,u,c=this;return A(function(l){switch(l.g){case 1:return navigator.mediaCapabilities,n=t=null,!e.keySystemConfiguration||(r=e.keySystemConfiguration,i=r.keySystem,n=r.audio&&r.audio.encryptionScheme,t=r.video&&r.video.encryptionScheme,o=l_(i),a={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},d_(n,o)&&d_(t,o))?d(l,cx.call(c,e),2):l.return(a);case 2:if(s=l.h,s.keySystemAccess){s.keySystemAccess=new c_(s.keySystemAccess,t,n),l.u(3);break}if(!e.keySystemConfiguration){l.u(3);break}return u=s,d(l,u_(e),5);case 5:u.keySystemAccess=l.h;case 3:return l.return(s)}})}function u_(e){var t,n;return A(function(r){if(1==r.g){var i=e.keySystemConfiguration,o=[],a=[];return i.audio&&o.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:i.audio.encryptionScheme}),i.video&&a.push({robustness:i.video.robustness||"",contentType:e.video.contentType,encryptionScheme:i.video.encryptionScheme}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},o.length&&(i.audioCapabilities=o),a.length&&(i.videoCapabilities=a),t=i,d(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}function c_(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}function l_(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":e.startsWith("com.tvkey")?"cenc":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function f_(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function d_(e,t){return!e||e==t||!("cbcs"!=e&&"cbcs-1-9"!=e||!fx&&!lx)}function h_(){}function p_(){e_(),o_()}var g_,y_="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype?e:(e[t]=n.value,e)},v_=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var r=0;r<n.length;++r){var i=n[r];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);i("Symbol",function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(e||"")+"_"+i++,e)}function n(e,t){this.g=e,y_(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return t}),i("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=v_[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&y_(i.prototype,e,{configurable:!0,writable:!0,value:function(){return o(r(this))}})}return e});var m_,b_="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)m_=Object.setPrototypeOf;else{var w_;e:{var S_={a:!0},__={};try{__.__proto__=S_,w_=__.a;break e}catch(e){}w_=!1}m_=w_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var T_=m_;c.prototype.s=function(e){this.h=e},c.prototype.return=function(e){this.i={return:e},this.g=this.j},c.prototype.u=function(e){this.g=e},i("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var i=v_.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.I(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.C(e):this.m(e)}},t.prototype.C=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.J(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.A()},t.prototype.G=function(){var e=this;i(function(){if(e.B()){var t=v_.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var e=v_.CustomEvent,t=v_.Event,n=v_.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=v_.document.createEvent("CustomEvent"),e.initCustomEvent("unhandledrejection",!1,!0,e)),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.I=function(e){var t=this.j();e.Sd(t.resolve,t.reject)},t.prototype.J=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t(function(e,t){i=e,o=t});return this.Sd(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Sd=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=a(e),o=i.next();!o.done;o=i.next())r(o.value).Sd(t,n)})},t.all=function(e){var n=a(e),i=n.next();return i.done?r([]):new t(function(e,t){var o=[],a=0;do{o.push(void 0),a++,r(i.value).Sd(function(t){return function(n){o[t]=n,0==--a&&e(o)}}(o.length-1),t),i=n.next()}while(!i.done)})},t}),i("WeakMap",function(e){function t(e){if(this.g=(u+=Math.random()+1).toString(),e){e=a(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!C(e,s)){var t=new n;y_(e,s,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&i(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(i(e),!C(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.g]=t,this},t.prototype.get=function(e){return r(e)&&C(e,s)?e[s][this.g]:void 0},t.prototype.has=function(e){return r(e)&&C(e,s)&&C(e[s],this.g)},t.prototype.delete=function(e){return!!(r(e)&&C(e,s)&&C(e[s],this.g))&&delete e[s][this.g]},t}),i("Map",function(e){function t(){var e={};return e.Eb=e.next=e.head=e}function n(e,t){var n=e.g;return o(function(){if(n){for(;n.head!=e.g;)n=n.Eb;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?s.has(t)?n=s.get(t):(n=""+ ++u,s.set(t,n)):n="p_"+t;var r=e.h[n];if(r&&C(e.h,n))for(e=0;e<r.length;e++){var i=r[e];if(t!==t&&i.key!==i.key||t===i.key)return{id:n,list:r,index:e,entry:i}}return{id:n,list:r,index:-1,entry:void 0}}function i(e){if(this.h={},this.g=t(),this.size=0,e){e=a(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(a([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&(i=r.next(),!(i.done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done))}catch(e){return!1}}())return e;var s=new WeakMap;i.prototype.set=function(e,t){e=0===e?0:e;var n=r(this,e);return n.list||(n.list=this.h[n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this.g,Eb:this.g.Eb,head:this.g,key:e,value:t},n.list.push(n.entry),this.g.Eb.next=n.entry,this.g.Eb=n.entry,this.size++),this},i.prototype.delete=function(e){return e=r(this,e),!(!e.entry||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.entry.Eb.next=e.entry.next,e.entry.next.Eb=e.entry.Eb,e.entry.head=null,this.size--,!0)},i.prototype.clear=function(){this.h={},this.g=this.g.Eb=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).entry},i.prototype.get=function(e){return(e=r(this,e).entry)&&e.value},i.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},i.prototype.keys=function(){return n(this,function(e){return e.key})},i.prototype.values=function(){return n(this,function(e){return e.value})},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var u=0;return i}),i("Set",function(e){function t(e){if(this.g=new Map,e){e=a(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(a([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(i=r.next(),!i.done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach(function(r){return e.call(t,r,r,n)})},t)}),i("Array.prototype.keys",function(e){return e||function(){return P(this,function(e){return e})}}),i("Array.prototype.findIndex",function(e){return e||function(e,t){return I(this,e,t).Ag}}),i("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}}),i("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}}),i("String.prototype.includes",function(e){return e||function(e,t){return-1!==j(this,e,"includes").indexOf(e,t||0)}}),i("Array.prototype.find",function(e){return e||function(e,t){return I(this,e,t).v}}),i("String.prototype.startsWith",function(e){return e||function(e,t){var n=j(this,e,"startsWith"),r=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var o=0;o<i&&t<r;)if(n[t++]!=e[o++])return!1;return o>=i}}),i("WeakSet",function(e){function t(e){if(this.g=new WeakMap,e){e=a(e);for(var t;!(t=e.next()).done;)this.add(t.value)}}return function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([t]);return!(!r.has(t)||r.has(n))&&(r.delete(t),r.add(n),!r.has(t)&&r.has(n))}catch(e){return!1}}()?e:(t.prototype.add=function(e){return this.g.set(e,!0),this},t.prototype.has=function(e){return this.g.has(e)},t.prototype.delete=function(e){return this.g.delete(e)},t)}),i("Array.from",function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var o=0;!(i=e.next()).done;)r.push(t.call(n,i.value,o++))}else for(i=e.length,o=0;o<i;o++)r.push(t.call(n,e[o],o));return r}});var k_="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)C(r,i)&&(e[i]=r[i])}return e};i("Object.assign",function(e){return e||k_}),i("Array.prototype.values",function(e){return e||function(){return P(this,function(e,t){return t})}}),i("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),i("Array.prototype.entries",function(e){return e||function(){return P(this,function(e,t){return[e,t]})}}),i("String.prototype.repeat",function(e){return e||function(e){var t=j(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),i("Number.isNaN",function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),i("Number.isFinite",function(e){return e||function(e){return"number"==typeof e&&(!isNaN(e)&&1/0!==e&&-1/0!==e)}}),i("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)C(e,t)&&n.push(e[t]);return n}}),i("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}}),i("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),i("Math.trunc",function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}}),i("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)C(e,t)&&n.push([t,e[t]]);return n}});var E_=this||self;D.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},N.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},N.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},N.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(L(this.h),L(this.j))};var A_;M("shaka.log",U),U.alwaysWarn=F,U.alwaysError=B,U.error=V,U.warning=W,U.info=K,U.debug=q,U.v1=G,U.v2=z,U.Level={NONE:0,ERROR:1,Yj:2,pj:3,ej:4,Uj:5,Vj:6},U.MAX_LOG_LEVEL=0;var x_=new Set;U.setLevel=X,U.init=Y,Y(),g_=J.prototype,g_.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},g_.get=function(e){return(e=this.g[e])?e.slice():null},g_.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(e){return e!=t}),0==this.g[e].length&&delete this.g[e])},g_.forEach=function(e){for(var t in this.g)e(t,this.g[t])},g_.size=function(){return Object.keys(this.g).length},g_.keys=function(){return Object.keys(this.g)},g_=$.prototype,g_.release=function(){this.ob(),this.g=null},g_.D=function(e,t,n,r){this.g&&(e=new Q(e,t,n,r),this.g.push(t,e))},g_.ta=function(e,t,n,r){function i(r){o.Hb(e,t,i),n(r)}var o=this;this.D(e,t,i,r)},g_.Hb=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=a(r);for(var i=r.next();!i.done;i=r.next())i=i.value,i.target!=e||n!=i.listener&&n||(i.Hb(),this.g.remove(t,i))}},g_.ob=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,s(t.g[e]));for(t=a(n),n=t.next();!n.done;n=t.next())n.value.Hb();this.g.g={}}},M("shaka.util.EventManager",$),$.prototype.removeAll=$.prototype.ob,$.prototype.unlisten=$.prototype.Hb,$.prototype.listenOnce=$.prototype.ta,$.prototype.listen=$.prototype.D,$.prototype.release=$.prototype.release,Q.prototype.Hb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var C_=void 0,P_=new Map;re.prototype.toString=function(){return"v"+this.g+"."+this.h};var I_=null;se.prototype.extract=function(){},se.prototype.decode=function(){return[]},se.prototype.clear=function(){},se.prototype.getStreams=function(){return[]},ue.prototype.init=function(){},ue.prototype.parse=function(){return[]},M("shaka.util.BufferUtils",ce),ce.toDataView=ge,ce.toUint16=pe,ce.toUint8=he,ce.toArrayBuffer=de,ce.equal=le,ve.prototype.init=function(){},ve.prototype.i=function(){},ve.prototype.g=function(){},ve.prototype.j=function(){},M("shaka.media.IClosedCaptionParser",ve),me.prototype.init=function(e,t){t=void 0!==t&&t,q("Passing new init segment to CEA parser"),t||(this.g(),this.l.init(e))},me.prototype.i=function(e){e=this.l.parse(e),e=a(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=he(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},me.prototype.g=function(){this.h.clear()},me.prototype.j=function(){return this.h.getStreams()},M("shaka.media.ClosedCaptionParser",me),me.findDecoder=function(){return M_},me.unregisterDecoder=function(){M_=null},me.registerDecoder=function(e){M_=e},me.findParser=function(e){return j_[e]},me.unregisterParser=function(e){delete j_[e]},me.registerParser=function(e,t){j_[e]=t};var j_={},M_=null;Te.prototype.clone=function(){var e,t=new Te(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},M("shaka.text.Cue",Te),Te.equal=Ee,Te.prototype.clone=Te.prototype.clone;var O_="auto";Te.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:O_};var R_="center",D_={LEFT:"left",RIGHT:"right",CENTER:R_,START:"start",END:"end"};Te.textAlign=D_;var L_="after",N_={BEFORE:"before",CENTER:"center",AFTER:L_};Te.displayAlign=N_;var U_="ltr";Te.direction={HORIZONTAL_LEFT_TO_RIGHT:U_,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var B_="horizontal-tb";Te.writingMode={HORIZONTAL_TOP_TO_BOTTOM:B_,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var F_=0;Te.lineInterpretation={LINE_NUMBER:F_,PERCENTAGE:1};var H_="start",V_={CENTER:"center",START:H_,END:"end"};Te.lineAlign=V_;var W_={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Te.defaultTextColor=W_;var K_={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Te.defaultTextBackgroundColor=K_;var q_=400;Te.fontWeight={NORMAL:q_,BOLD:700};var G_="normal",z_={NORMAL:G_,ITALIC:"italic",OBLIQUE:"oblique"};Te.fontStyle=z_,Te.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},M("shaka.text.CueRegion",Ae);var X_=1;Ae.units={PX:0,PERCENTAGE:X_,LINES:2};var Y_="";Ae.scrollMode={NONE:Y_,UP:"up"},xe.prototype.destroy=function(){},M("shaka.transmuxer.TransmuxerEngine",xe),xe.findTransmuxer=Pe,xe.unregisterTransmuxer=function(e,t){delete J_[e.toLowerCase().split(";")[0]+"-"+t]},xe.registerTransmuxer=Ce,xe.prototype.destroy=xe.prototype.destroy;var J_={},$_=1,Q_=2,Z_=3,eT=4;xe.PluginPriority={FALLBACK:$_,PREFERRED_SECONDARY:Q_,PREFERRED:Z_,APPLICATION:eT};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
var tT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");g_=Ie.prototype,g_.wb="",g_.qc="",g_.zb="",g_.Ic=null,g_.Sa="",g_.Vb="",g_.toString=function(){var e=[],t=this.wb;if(t&&e.push(Le(t,nT,!0),":"),t=this.zb){e.push("//");var n=this.qc;n&&e.push(Le(n,nT,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Ic,null!=t&&e.push(":",String(t))}return(t=this.Sa)&&(this.zb&&"/"!=t.charAt(0)&&e.push("/"),e.push(Le(t,"/"==t.charAt(0)?iT:rT,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Vb)&&e.push("#",Le(t,aT)),e.join("")},g_.resolve=function(e){var t=this.clone();"data"===t.wb&&(t=new Ie);var n=!!e.wb;n?je(t,e.wb):n=!!e.qc,n?t.qc=e.qc:n=!!e.zb,n?Me(t,e.zb):n=null!=e.Ic;var r=e.Sa;if(n)Oe(t,e.Ic);else if(n=!!e.Sa){if("/"!=r.charAt(0))if(this.zb&&!this.Sa)r="/"+r;else{var i=t.Sa.lastIndexOf("/");-1!=i&&(r=t.Sa.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}r=o.join("/")}}return n?t.Sa=r:n=""!==e.g.toString(),n?Re(t,e.g.clone()):n=!!e.Vb,n&&(t.Vb=e.Vb),t},g_.clone=function(){return new Ie(this)};var nT=/[#\/\?@]/g,rT=/[#\?:]/g,iT=/[#\?]/g,oT=/[#\?@]/g,aT=/#/g;g_=Ue.prototype,g_.Fa=null,g_.ed=null,g_.add=function(e,t){Be(this),this.g=null;var n=this.Fa.hasOwnProperty(e)?this.Fa[e]:null;return n||(this.Fa[e]=n=[]),n.push(t),this.ed++,this},g_.set=function(e,t){return Be(this),this.g=null,this.Fa.hasOwnProperty(e)?this.Fa[e]=[t]:this.add(e,t),this},g_.get=function(e){return Be(this),this.Fa[e]||[]},g_.toString=function(){if(this.g)return this.g;if(!this.Fa)return"";var e,t=[];for(e in this.Fa)for(var n=encodeURIComponent(e),r=this.Fa[e],i=0;i<r.length;i++){var o=n;""!==r[i]&&(o+="="+encodeURIComponent(r[i])),t.push(o)}return this.g=t.join("&")},g_.clone=function(){var e=new Ue;if(e.g=this.g,this.Fa){var t,n={};for(t in this.Fa)n[t]=this.Fa[t].concat();e.Fa=n,e.ed=this.ed}return e},He.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},M("shaka.util.Error",He);var sT=!0;He.Severity={RECOVERABLE:1,CRITICAL:2};var uT={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10};He.Category=uT;var cT={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};He.Code=cT,Ve.prototype.value=function(){return void 0==this.g&&(this.g=this.h()),this.g},Ke.prototype.X=function(t){var n=this;this.stop();var r=!0,i=null;return this.g=function(){e.clearTimeout(i),r=!1},i=e.setTimeout(function(){r&&n.h()},1e3*t),this},Ke.prototype.stop=function(){this.g&&(this.g(),this.g=null)},qe.prototype.oc=function(){return this.stop(),this.h(),this},qe.prototype.X=function(e){var t=this;return this.stop(),this.g=new Ke(function(){t.h()}).X(e),this},qe.prototype.Wa=function(e){var t=this;return this.stop(),this.g=new Ke(function(){t.g.X(e),t.h()}).X(e),this},qe.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},M("shaka.util.Timer",qe),qe.prototype.stop=qe.prototype.stop,qe.prototype.tickEvery=qe.prototype.Wa,qe.prototype.tickAfter=qe.prototype.X,qe.prototype.tickNow=qe.prototype.oc;var lT=null,fT=null;M("shaka.util.StringUtils",pt),pt.resetFromCharCode=function(){dT.g=void 0},pt.toUTF16=bt,pt.toUTF8=mt,pt.fromBytesAutoDetect=vt,pt.fromUTF16=yt,pt.fromUTF8=gt;var dT=new Ve(function(){for(var e={Jb:65536};0<e.Jb;e={Jb:e.Jb},e.Jb/=2)if(function(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}(e.Jb))return function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.Jb)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.Jb));return n}}(e);return null});M("shaka.util.Uint8ArrayUtils",_t),_t.concat=Ct,_t.toHex=xt,_t.fromHex=At,_t.fromBase64=Et,_t.toBase64=kt,_t.toStandardBase64=Tt;var hT="text",pT={ga:"video",V:"audio",pa:hT,Je:"image",Zi:"application"},gT=1/15,yT={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};M("shaka.util.MimeUtils",Dt),Dt.getFullTypeWithAllCodecs=Nt,Dt.getFullType=Lt;var vT=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),mT=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];zt.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()},zt.prototype.remove=function(e,t){var n=this;return A(function(r){if(1==r.g)return d(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),h(r)})},M("shaka.text.TextEngine",zt),zt.prototype.destroy=zt.prototype.destroy,zt.findParser=function(e){return bT[e]},zt.unregisterParser=function(e){delete bT[e]},zt.registerParser=function(e,t){bT[e]=t};var bT={};M("shaka.util.LanguageUtils",rn),rn.findClosestLocale=dn,rn.getLocaleForVariant=fn,rn.getLocaleForText=function(e){return un(e.language||"und")},rn.getBase=ln,rn.relatedness=cn,rn.areSiblings=function(e,t){var n=ln(e),r=ln(t);return e!=n&&t!=r&&n==r},rn.normalize=un,rn.isSiblingOf=sn,rn.isParentOf=an,rn.areLanguageCompatible=on,rn.areLocaleCompatible=function(e,t){return e=un(e),t=un(t),e==t};var wT=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);M("shaka.util.StreamUtils",gn),gn.meetsRestrictions=bn;var ST={},_T=0,TT=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),kT=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");g_=Gn.prototype,g_.stop=function(){this.A=null,this.j=!1,this.o=[],this.B=1,this.m=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.l=null},g_.release=function(){this.F.release(),this.C=null},g_.init=function(e){this.A=e},g_.chooseVariant=function(t){t=void 0!==t&&t;var n=1/0,r=1/0;if(this.g.restrictToScreenSize&&(r=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,n=e.screen.height*r,r*=e.screen.width),this.h&&this.g.restrictToElementSize){var i=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio;n=Math.min(n,this.m.clientHeight*i),r=Math.min(r,this.m.clientWidth*i)}var o=this.o.filter(function(e){return!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)});if(o.length||(o=this.o),i=o,t&&o.length!=this.o.length&&(i=this.o.filter(function(e){return!!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})),t=Xn(this,this.g.restrictions,i,1/0,1/0),1/0!=n||1/0!=r){for(t=Yn(t),t=a(t),o=t.next();!o.done;o=t.next())if(o=o.value,o.height>=n&&o.width>=r){n=o.height,r=o.width;break}t=Xn(this,this.g.restrictions,i,n,r)}for(n=this.getBandwidthEstimate(),i.length&&!t.length&&(W("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),t=Xn(this,null,i,1/0,1/0),t=[t[0]]),r=t[0]||null,i=0;i<t.length;i++){o=t[i];for(var s=isNaN(this.B)?1:Math.abs(this.B),u=s*o.bandwidth,c=u/this.g.bandwidthDowngradeTarget,l={bandwidth:1/0},f=i+1;f<t.length;f++)if(o.bandwidth!=t[f].bandwidth){l=t[f];break}s=s*l.bandwidth/this.g.bandwidthUpgradeTarget,z("Bandwidth ranges:",(u/1e6).toFixed(3),(c/1e6).toFixed(3),(s/1e6).toFixed(3)),n>=c&&n<=s&&(r.bandwidth!=o.bandwidth||r.bandwidth==o.bandwidth&&r.video&&o.video&&(r.video.width<o.video.width||r.video.height<o.video.height))&&(r=o)}return this.s=Date.now(),r},g_.enable=function(){this.j=!0},g_.disable=function(){this.j=!1},g_.segmentDownloaded=function(e,t,n,r){e<this.g.cacheLoadThreshold||(z("Segment downloaded:","contentType="+(r&&r.contentType),"deltaTimeMs="+e,"numBytes="+t,"lastTimeChosenMs="+this.s,"enabled="+this.j),this.i.sample(e,t),n&&null!=this.s&&this.j&&zn(this))},g_.trySuggestStreams=function(){null!=this.s&&this.j&&zn(this)},g_.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.l?this.l.getBandwidthEstimate(e):e},g_.setVariants=function(e){this.o=e},g_.playbackRateChanged=function(e){this.B=e},g_.setMediaElement=function(t){var n=this;this.m=t,this.h&&(this.h.disconnect(),this.h=null),this.m&&"ResizeObserver"in e&&(this.h=new ResizeObserver(function(){n.C.X(ET)}),this.h.observe(this.m))},g_.setCmsdManager=function(e){this.l=e},g_.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},M("shaka.abr.SimpleAbrManager",Gn),Gn.prototype.configure=Gn.prototype.configure,Gn.prototype.setCmsdManager=Gn.prototype.setCmsdManager,Gn.prototype.setMediaElement=Gn.prototype.setMediaElement,Gn.prototype.playbackRateChanged=Gn.prototype.playbackRateChanged,Gn.prototype.setVariants=Gn.prototype.setVariants,Gn.prototype.getBandwidthEstimate=Gn.prototype.getBandwidthEstimate,Gn.prototype.trySuggestStreams=Gn.prototype.trySuggestStreams,Gn.prototype.segmentDownloaded=Gn.prototype.segmentDownloaded,Gn.prototype.disable=Gn.prototype.disable,Gn.prototype.enable=Gn.prototype.enable,Gn.prototype.chooseVariant=Gn.prototype.chooseVariant,Gn.prototype.init=Gn.prototype.init,Gn.prototype.release=Gn.prototype.release,Gn.prototype.stop=Gn.prototype.stop;var ET=1;M("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),M("shaka.config.CodecSwitchingStrategy",{Cj:"reload",ih:"smooth"}),Jn.prototype.add=function(e,t,n){return $n(this.h,e,void 0===t||t,void 0!==n&&n)?(this.g.add(e),!0):(W("Rejecting variant - not compatible with root."),!1)},Jn.prototype.values=function(){return this.g.values()},er.prototype.create=function(e){var t=this,n="smooth"==this.h&&ne(),r=e.filter(function(e){return $n(t.i,e,!n,t.g)});return r.length?new Jn(r[0],r,!n,this.g):this.j.create(e)},tr.prototype.create=function(e){var t=[];t=nr(e,this.B);var n=e.filter(function(e){return e.primary});return t=t.length?t:n.length?n:e,e=rr(t,this.C),e.length?t=e:W("No exact match for variant role could be found."),this.o&&(e=lr(t,this.o),e.length?t=e:W("No exact match for the video layout could be found.")),this.l&&(e=cr(t,this.l),e.length?t=e:W("No exact match for the hdr level could be found.")),this.j&&(e=ar(t,this.j),e.length?t=e:W("No exact match for the channel count could be found.")),this.h&&(e=sr(t,this.h),e.length?t=e:W("No exact match for the channel config could be found.")),this.g&&(e=ur(t,this.g),e.length?t=e:W("No exact match for the accessibility purpose could be found.")),this.i&&(e=ir(t,this.i),e.length?t=e:W("No exact match for audio label could be found.")),this.m&&(e=or(t,this.m),e.length?t=e:W("No exact match for video label could be found.")),e=fr(t,this.F),e.length?t=e:W("No exact match for spatial audio could be found."),new Jn(t[0],t,!("smooth"==this.s&&ne()),this.A)};var AT=0,xT=1;vr.prototype.resolve=function(){},vr.prototype.reject=function(){},mr.prototype.abort=function(){return this.g=!0,this.i()},mr.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},mr.prototype.xa=function(e,t){function n(n){return function(s){if(i.g&&n)o.reject(a);else{var u=n?e:t;u?r=kr(u,s,o):(n?o.resolve:o.reject)(s)}}}function r(){return o.reject(a),i.abort()}var i=this,o=new vr,a=new He(2,7,7001);return this.promise.then(n(!0),n(!1)),new mr(o,function(){return r()})},M("shaka.util.AbortableOperation",mr),mr.prototype.chain=mr.prototype.xa,mr.prototype.finally=mr.prototype.finally,mr.all=Tr,mr.prototype.abort=mr.prototype.abort,mr.notAbortable=_r,mr.completed=Sr,mr.aborted=wr,mr.failed=br,Er.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Er.prototype.stopImmediatePropagation=function(){this.g=!0},Er.prototype.stopPropagation=function(){},M("shaka.util.FakeEvent",Er);var CT={aj:"abrstatuschanged",bj:"adaptation",cj:"buffering",dj:"complete",fj:"downloadfailed",gj:"downloadheadersreceived",hj:"drmsessionupdate",jj:"emsg",Bj:"prft",Error:"error",kj:"expirationupdated",lj:"firstquartile",mj:"gapjumped",qj:"keystatuschanged",sj:"loaded",tj:"loading",vj:"manifestparsed",wj:"manifestupdated",xj:"mediaqualitychanged",Metadata:"metadata",yj:"midpoint",zj:"nospatialvideoinfo",Aj:"onstatechange",Dj:"ratechange",Ej:"segmentappended",Fj:"sessiondata",Gj:"spatialvideoinfo",Hj:"stalldetected",Ij:"started",Jj:"statechanged",Kj:"streaming",Lj:"textchanged",Mj:"texttrackvisibility",Nj:"thirdquartile",Oj:"timelineregionadded",Pj:"timelineregionenter",Qj:"timelineregionexit",Rj:"trackschanged",Tj:"unloading",Xj:"variantchanged"};xr.prototype.addEventListener=function(e,t){this.la&&this.la.push(e,t)},xr.prototype.removeEventListener=function(e,t){this.la&&this.la.remove(e,t)},xr.prototype.dispatchEvent=function(e){if(!this.la)return!0;var t=this.la.get(e.type)||[],n=this.la.get("All");for(n&&(t=t.concat(n)),t=a(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.pe,e.currentTarget=this.pe;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){V("Uncaught exception in event handler",e,e?e.message:null,e?e.stack:null)}if(e.g)break}return e.defaultPrevented},xr.prototype.release=function(){this.la=null},Cr.prototype.destroy=function(){for(var e=[],t=a(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},u(Ir,xr),g_=Ir.prototype,g_.Sf=function(e){this.s=e},g_.Tf=function(e){this.o=e},g_.yi=function(e){this.g.add(e)},g_.Ui=function(e){this.g.delete(e)},g_.uh=function(){this.g.clear()},g_.zi=function(e){this.h.add(e)},g_.Vi=function(e){this.h.delete(e)},g_.vh=function(){this.h.clear()},g_.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),xr.prototype.release.call(this),this.m.destroy()},g_.request=function(e,t,n){var r=this,i=new Ur;if(this.i){var o=Promise.reject(new He(2,7,7001));return o.catch(function(){}),new Br(o,function(){return Promise.resolve()},i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?hn(t.retryParameters):yr(),t.uris=hn(t.uris),o=Rr(this,e,t,n);var a=o.xa(function(){return Dr(r,e,t,n,new pr(t.retryParameters,!1),0,null,i)}),s=a.xa(function(t){return Lr(r,e,t,n)}),u=Date.now(),c=0;o.promise.then(function(){c=Date.now()-u},function(){});var l=0;a.promise.then(function(){l=Date.now()},function(){});var f=s.xa(function(i){var o=Date.now()-l,a=i.response;return a.timeMs+=c,a.timeMs+=o,i.bi||!r.l||a.fromCache||"HEAD"==t.method||e!=PT||r.l(a.timeMs,a.data.byteLength,Nr(n)),r.C&&r.C(e,a,n),a},function(e){throw e&&(e.severity=2),e});return o=new Br(f.promise,function(){return f.abort()},i),Pr(this.m,o),o},M("shaka.net.NetworkingEngine",Ir),Ir.prototype.request=Ir.prototype.request,Ir.prototype.destroy=Ir.prototype.destroy,Ir.makeRequest=Or,Ir.defaultRetryParameters=function(){return yr()},Ir.prototype.clearAllResponseFilters=Ir.prototype.vh,Ir.prototype.unregisterResponseFilter=Ir.prototype.Vi,Ir.prototype.registerResponseFilter=Ir.prototype.zi,Ir.prototype.clearAllRequestFilters=Ir.prototype.uh,Ir.prototype.unregisterRequestFilter=Ir.prototype.Ui,Ir.prototype.registerRequestFilter=Ir.prototype.yi,Ir.unregisterScheme=function(e){delete jT[e]},Ir.registerScheme=jr,Ir.prototype.setForceHTTPS=Ir.prototype.Tf,Ir.prototype.setForceHTTP=Ir.prototype.Sf,Ir.NumBytesRemainingClass=Ur,u(Br,mr),Ir.PendingRequest=Br;var PT=1;Ir.RequestType={MANIFEST:0,SEGMENT:PT,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Ir.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var IT=3;Ir.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:IT};var jT={};Fr.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},g_=Gr.prototype,g_.na=function(){return this.g<this.h.byteLength},g_.sa=function(){return this.g},g_.getLength=function(){return this.h.byteLength},g_.R=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(e){throw zr()}},g_.ka=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(e){throw zr()}},g_.O=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(e){throw zr()}},g_.Lg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(e){throw zr()}},g_.Jc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(e){throw zr()}if(2097151<t)throw new He(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},g_.nb=function(e){if(this.g+e>this.h.byteLength)throw zr();var t=he(this.h,this.g,e);return this.g+=e,t},g_.skip=function(e){if(this.g+e>this.h.byteLength)throw zr();this.g+=e},g_.Gi=function(e){if(this.g<e)throw zr();this.g-=e},g_.seek=function(e){if(0>e||e>this.h.byteLength)throw zr();this.g=e},g_.jc=function(){for(var e=this.g;this.na()&&0!=this.h.getUint8(this.g);)this.g+=1;return e=he(this.h,e,this.g-e),this.g+=1,gt(e)},M("shaka.util.DataViewReader",Gr),Gr.prototype.readTerminatedString=Gr.prototype.jc,Gr.prototype.seek=Gr.prototype.seek,Gr.prototype.rewind=Gr.prototype.Gi,Gr.prototype.skip=Gr.prototype.skip,Gr.prototype.readBytes=Gr.prototype.nb,Gr.prototype.readUint64=Gr.prototype.Jc,Gr.prototype.readInt32=Gr.prototype.Lg,Gr.prototype.readUint32=Gr.prototype.O,Gr.prototype.readUint16=Gr.prototype.ka,Gr.prototype.readUint8=Gr.prototype.R,Gr.prototype.getLength=Gr.prototype.getLength,Gr.prototype.getPosition=Gr.prototype.sa,Gr.prototype.hasMoreData=Gr.prototype.na;var MT=1;Gr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:MT},g_=Xr.prototype,g_.box=function(e,t){return e=ei(e),this.i[e]=OT,this.h[e]=t,this},g_.P=function(e,t){return e=ei(e),this.i[e]=RT,this.h[e]=t,this},g_.stop=function(){this.g=!0},g_.parse=function(e,t,n){for(e=new Gr(e,0),this.g=!1;e.na()&&!this.g;)this.Hc(0,e,t,n)},g_.Hc=function(e,t,n,r){var i=t.sa();if(r&&i+8>t.getLength())this.g=!0;else{var o=t.O(),a=t.O(),s=ti(a),u=!1;switch(z("Parsing MP4 box",s),o){case 0:o=t.getLength()-i;break;case 1:if(r&&t.sa()+8>t.getLength())return void(this.g=!0);o=t.Jc(),u=!0}var c=this.h[a];if(c){var l=null,f=null;if(this.i[a]==RT){if(r&&t.sa()+4>t.getLength())return void(this.g=!0);f=t.O(),l=f>>>24,f&=16777215}a=i+o,n&&a>t.getLength()&&(a=t.getLength()),r&&a>t.getLength()?this.g=!0:(r=a-t.sa(),t=0<r?t.nb(r):new Uint8Array(0),t=new Gr(t,0),c({name:s,parser:this,partialOkay:n||!1,version:l,flags:f,reader:t,size:o,start:i+e,has64BitSize:u}))}else t.skip(Math.min(i+o-t.sa(),t.getLength()-t.sa()))}},M("shaka.util.Mp4Parser",Xr),Xr.headerSize=ni,Xr.typeToString=ti,Xr.allData=Zr,Xr.audioSampleEntry=Qr,Xr.visualSampleEntry=$r,Xr.sampleDescription=Jr,Xr.children=Yr,Xr.prototype.parseNext=Xr.prototype.Hc,Xr.prototype.parse=Xr.prototype.parse,Xr.prototype.stop=Xr.prototype.stop,Xr.prototype.fullBox=Xr.prototype.P,Xr.prototype.box=Xr.prototype.box;var OT=0,RT=1,DT=new Map([]);g_=Ri.prototype,g_.destroy=function(){return this.j.destroy()},g_.configure=function(e){this.h=e,this.K&&this.K.Wa(this.h.updateExpirationTime)},g_.xe=function(e){this.W=e},g_.wc=function(e){var t=this;return A(function(n){if(1==n.g)return t.A?(t.m=e,t.B.ta(t.m,"play",function(){for(var e=a(t.N),n=e.next();!n.done;n=e.next())to(t,n.value);t.$=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return ao(t)}),t.F=t.g?t.g.initData.find(function(e){return 0<e.initData.length})||null:null,t.F||"com.apple.fps"!==t.g.keySystem||t.o.size?d(n,Fi(t),2):n.u(2)):(t.B.ta(e,"encrypted",function(){t.s(new He(2,6,6010))}),n.return());Ki(t).catch(function(){}),t.F||t.o.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(e){return Hi(t,e)}),h(n)})},g_.Jf=function(){for(var e=this,t=(this.g?this.g.initData:[])||[],n=a(t),r=n.next();!r.done;r=n.next())r=r.value,eo(this,r.initDataType,r.initData,this.g.sessionType);return this.o.size&&this.o.forEach(function(t,n){Zi(e,n,t)}),t.length||this.o.size||this.l.resolve(),this.l},g_.hf=function(){var e=this,t=this.i.keys();return t=Vr(t,function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}}),Array.from(t)},g_.md=function(){var e=1/0,t=this.i.keys();t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},g_.nd=function(){return qr(this.fa)};var LT=1,NT=5,UT=.5,BT=new Ve(function(){return de(new Uint8Array([0]))}),FT=new Map,HT=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb"),VT=["output-restricted","internal-error"];M("shaka.media.ManifestParser",_o),_o.unregisterParserByMime=function(e){delete WT[e]},_o.registerParserByMime=function(e,t){WT[e]=t},_o.registerParserByExtension=function(){ie("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},_o.AccessibilityPurpose={Wj:"visually impaired",nj:"hard of hearing"};var WT={},KT=new Ve(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});xo.prototype.ac=function(){return this.Ca},xo.prototype.Yb=function(){return this.ma},xo.prototype.pd=function(){return this.g},M("shaka.media.InitSegmentReference",xo),xo.prototype.getEndByte=xo.prototype.Yb,xo.prototype.getStartByte=xo.prototype.ac,g_=Po.prototype,g_.M=function(){return this.C()},g_.getStartTime=function(){return this.startTime},g_.Eh=function(){return this.endTime},g_.ac=function(){return this.Ca},g_.Yb=function(){return this.ma},g_.Xh=function(){return this.tilesLayout},g_.Wh=function(){return this.A},g_.bc=function(){return this.status},g_.oi=function(){this.status=GT},g_.xf=function(){this.preload=!0},g_.ii=function(){return this.preload},g_.ie=function(){this.l=!1},g_.fi=function(){return this.l},g_.Gg=function(){this.Bd=!0},g_.hi=function(){return this.Bd},g_.Fg=function(){this.fe=!0},g_.gi=function(){return this.fe},g_.Eg=function(){this.m=!0},g_.ci=function(){return this.m},g_.Wg=function(e){this.s=e},g_.Vh=function(){return this.s},g_.offset=function(e){this.startTime+=e,this.endTime+=e,this.i+=e;for(var t=a(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.i+=e},g_.Xf=function(e){null==this.h?B("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},g_.Ri=function(e){this.B=e},g_.pd=function(){return this.B},M("shaka.media.SegmentReference",Po),Po.prototype.getSegmentData=Po.prototype.pd,Po.prototype.setSegmentData=Po.prototype.Ri,Po.prototype.syncAgainst=Po.prototype.Xf,Po.prototype.offset=Po.prototype.offset,Po.prototype.getThumbnailSprite=Po.prototype.Vh,Po.prototype.setThumbnailSprite=Po.prototype.Wg,Po.prototype.hasByterangeOptimization=Po.prototype.ci,Po.prototype.markAsByterangeOptimization=Po.prototype.Eg,Po.prototype.isLastPartial=Po.prototype.gi,Po.prototype.markAsLastPartial=Po.prototype.Fg,Po.prototype.isPartial=Po.prototype.hi,Po.prototype.markAsPartial=Po.prototype.Gg,Po.prototype.isIndependent=Po.prototype.fi,Po.prototype.markAsNonIndependent=Po.prototype.ie,Po.prototype.isPreload=Po.prototype.ii,Po.prototype.markAsPreload=Po.prototype.xf,Po.prototype.markAsUnavailable=Po.prototype.oi,Po.prototype.getStatus=Po.prototype.bc,Po.prototype.getTileDuration=Po.prototype.Wh,Po.prototype.getTilesLayout=Po.prototype.Xh,Po.prototype.getEndByte=Po.prototype.Yb,Po.prototype.getStartByte=Po.prototype.ac,Po.prototype.getEndTime=Po.prototype.Eh,Po.prototype.getStartTime=Po.prototype.getStartTime,Po.prototype.getUris=Po.prototype.M;var qT=0,GT=1;Po.Status={$i:qT,Sj:GT,uj:2},M("shaka.util.Id3Utils",No),No.getID3Data=Wo,No.getID3Frames=Vo,M("shaka.util.ExpGolomb",ea),g_=da.prototype,g_.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},g_.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,ma(e)),n=e.length-(e.length+t)%188,r=!1,i=t;i<n;i+=188)if(71==e[i]){var o=!!(64&e[i+1]),a=((31&e[i+1])<<8)+e[i+2];if(1<(48&e[i+3])>>4){var s=i+5+e[i+4];if(s==i+188)continue}else s=i+4;switch(a){case 0:o&&(s+=e[s]+1),this.G=(31&e[s+10])<<8|e[s+11];break;case 17:case 8191:break;case this.G:o&&(s+=e[s]+1),o=e,a={audio:-1,video:-1,ce:-1,audioCodec:"",videoCodec:""};var u=s+3+((15&o[s+1])<<8|o[s+2])-4;for(s+=12+((15&o[s+10])<<8|o[s+11]);s<u;){var c=(31&o[s+1])<<8|o[s+2],l=(15&o[s+3])<<8|o[s+4];switch(o[s]){case 6:if(0<l)for(var f=s+5,d=l;2<d;){var h=o[f+1]+2;switch(o[f]){case 5:var p=wt(o.subarray(f+2,f+h));-1==a.audio&&"Opus"===p?(a.audio=c,a.audioCodec="opus"):-1==a.video&&"AV01"===p&&(a.video=c,a.videoCodec="av1");break;case 106:-1==a.audio&&(a.audio=c,a.audioCodec="ac3");break;case 122:-1==a.audio&&(a.audio=c,a.audioCodec="ec3");break;case 124:-1==a.audio&&(a.audio=c,a.audioCodec="aac");break;case 127:"opus"==a.audioCodec&&(p=null,128===o[f+2]&&(p=o[f+3]),null!=p&&(this.F={channelCount:0==(15&p)?2:15&p,th:p,sampleRate:48e3}))}f+=h,d-=h}break;case 15:-1==a.audio&&(a.audio=c,a.audioCodec="aac");break;case 17:-1==a.audio&&(a.audio=c,a.audioCodec="aac-loas");break;case 21:-1==a.ce&&(a.ce=c);break;case 27:-1==a.video&&(a.video=c,a.videoCodec="avc");break;case 3:case 4:-1==a.audio&&(a.audio=c,a.audioCodec="mp3");break;case 36:-1==a.video&&(a.video=c,a.videoCodec="hvc");break;case 129:-1==a.audio&&(a.audio=c,a.audioCodec="ac3");break;case 132:case 135:-1==a.audio&&(a.audio=c,a.audioCodec="ec3")}s+=l+5}o=a,-1!=o.video&&(this.J=o.video,this.m=o.videoCodec),-1!=o.audio&&(this.B=o.audio,this.A=o.audioCodec),-1!=o.ce&&(this.C=o.ce),r&&!this.I&&(q("reparse from beginning"),r=!1,i=t-188),this.I=!0;break;case this.J:s=e.subarray(s,i+188),o?this.j.push([s]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(s);break;case this.B:s=e.subarray(s,i+188),o?this.i.push([s]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(s);break;case this.C:s=e.subarray(s,i+188),o?this.l.push([s]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(s);break;default:r=!0}}else W("Found TS packet that do not start with 0x47");return this},g_.ui=function(e){return ie("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Ef(e)},g_.Ef=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var i=e.byteLength,o=1;"hvc"==this.m&&(o=2);for(var a,s=n||0,u=[],c=-1,l=0,f=0;f<i;++f){var d=e[f];if(d){if(2<=s&&1==d){if(t&&!u.length&&-1==c&&(d=f-(3<s?3:s),n&&0!=d&&(d=e.subarray(0,d),t.data=Ct(t.data,d),t.fullData=Ct(t.fullData,d))),0<=c?(s=f-((3<s?3:s)+1),u.push({data:e.subarray(c+o,s+1),fullData:e.subarray(c,s+1),type:l,time:r})):t&&!u.length&&0<(c=f-s)&&(c=e.subarray(0,c),t.data=Ct(t.data,c),t.fullData=Ct(t.fullData,c)),f>=i-o)return W("Malformed TS, incomplete NALU, ignoring."),u;f++,c=f,l="hvc"==this.m?e[f]>>1&63:31&e[f]}s=0}else s++;f>=i-1&&0<=c&&0<=s&&(a={data:e.subarray(c+o,i),fullData:e.subarray(c,i),type:l,time:r})}return a&&u.push(a),!u.length&&t&&(t.data=Ct(t.data,e),t.fullData=Ct(t.fullData,e)),u},g_.getMetadata=function(){for(var e=[],t=a(this.l),n=t.next();!n.done;n=t.next())n=Ct.apply(_t,s(n.value)),(n=ha(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Vo(n.data),dts:n.dts,pts:n.pts});return e},g_.Lb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=a(this.i),n=t.next();!n.done;n=t.next()){var r=Ct.apply(_t,s(n.value)),i=ha(this,r);n=this.h.length?this.h[this.h.length-1]:null,i&&null!=i.pts&&null!=i.dts&&(!n||n.pts!=i.pts&&n.dts!=i.dts)?(this.h.length&&i.dts<(n.dts||0)&&(e=!0),this.h.push(i)):this.h.length&&(r=i?i.data:r)&&(n=this.h.pop(),n.data=Ct(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(e,t){var n=(e.pts||0)-(t.pts||0);return(e.dts||0)-(t.dts||0)||n}))}return this.h},g_.Dc=function(e){if(e=void 0===e||e,this.j.length&&!this.g.length){for(var t=!1,n=a(this.j),r=n.next();!r.done;r=n.next()){var i=Ct.apply(_t,s(r.value)),o=ha(this,i);r=this.g.length?this.g[this.g.length-1]:null,o&&null!=o.pts&&null!=o.dts&&(!r||r.pts!=o.pts&&r.dts!=o.dts)?(this.g.length&&o.dts<(r.dts||0)&&(t=!0),this.g.push(o)):this.g.length&&(i=o?o.data:i)&&(r=this.g.pop(),r.data=Ct(r.data,i),this.g.push(r))}if(e){var u;for(n=a(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.nalus=this.Ef(r,u,void 0),r.nalus.length&&(u=r.nalus[r.nalus.length-1]);this.g=this.g.filter(function(e){return e.nalus.length})}t&&(this.g=this.g.sort(function(e,t){var n=(e.pts||0)-(t.pts||0);return(e.dts||0)-(t.dts||0)||n}))}return e?this.g:(e=this.g,this.g=[],e)},g_.getStartTime=function(e){if("audio"==e){e=null;var t=this.Lb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return"video"==e?(e=null,t=this.Dc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},g_.ld=function(){return{audio:this.A,video:this.m}},g_.ae=function(){for(var e=[],t=a(this.Dc()),n=t.next();!n.done;n=t.next())e.push.apply(e,s(n.value.nalus));return e},g_.$h=function(){ie("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.mf();return{height:e.height,width:e.width}},g_.mf=function(){return"hvc"==this.m?ga(this):pa(this)},M("shaka.util.TsParser",da),da.syncOffset=ma,da.probe=va,da.prototype.getVideoInfo=da.prototype.mf,da.prototype.getVideoResolution=da.prototype.$h,da.prototype.getVideoNalus=da.prototype.ae,da.prototype.getCodecs=da.prototype.ld,da.prototype.getStartTime=da.prototype.getStartTime,da.prototype.getVideoData=da.prototype.Dc,da.prototype.getAudioData=da.prototype.Lb,da.prototype.getMetadata=da.prototype.getMetadata,da.prototype.parseNalus=da.prototype.Ef,da.prototype.parseAvcNalus=da.prototype.ui,da.prototype.parse=da.prototype.parse,da.prototype.clearData=da.prototype.clearData,da.Timescale=9e4;var zT=[100,110,122,244,44,83,86,118,128,138,139,134];ba.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},M("shaka.lcevc.Dec",ba),ba.prototype.release=ba.prototype.release;var XT=0,YT=1,JT=2,$T=0,QT=1,ZT=-1;g_=_a.prototype,g_.destroy=function(){return this.J.destroy()},g_.init=function(e,t,n,r){t=void 0!==t&&t,n=void 0===n?"UNKNOWN":n,r=void 0!==r&&r;var i,o,s,u,c,l=this;return A(function(f){switch(f.g){case 1:return i=pT,d(f,l.L,2);case 2:l.A=t,l.aa=n,l.wa=r,l.qa=!l.A&&"HLS"==l.aa&&!l.wa,l.K=null,o=a(e.keys()),s=o.next();case 3:if(s.done){f.u(0);break}return u=s.value,c=e.get(u),d(f,Aa(l,u,c,c.codecs),6);case 6:l.s?(l.j[i.V]=[],l.j[i.ga]=[]):l.j[u]=[],s=o.next(),f.u(3)}})},g_.configure=function(e){this.F=e,this.g&&(this.g.A=e.modifyCueCallback)},g_.sb=function(){var e={total:this.B?[]:Lo(this.i.buffered),audio:this.B?[]:Lo(Ma(this,"audio")),video:this.B?[]:Lo(Ma(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},g_.remove=function(e,t,n){var r,i=this;return A(function(o){return 1==o.g?(r=pT,e==r.pa?d(o,i.g.remove(t,n),0):d(o,Ka(i,e,function(){return Fa(i,e,t,n)},null),4)):i.s?d(o,Ka(i,r.V,function(){return Fa(i,r.V,t,n)},null),0):o.u(0)})},g_.flush=function(e){var t,n=this;return A(function(r){return 1==r.g?(t=pT,e==t.pa?r.return():d(r,Ka(n,e,function(){n.i.currentTime-=.001,Wa(n,e)},null),2)):n.s?d(r,Ka(n,t.V,function(){var e=t.V;n.i.currentTime-=.001,Wa(n,e)},null),0):r.u(0)})},g_.endOfStream=function(e){var t=this;return A(function(n){return d(n,qa(t,function(){Ca(t)||"closed"===t.l.readyState||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},g_.Va=function(e){var t=this;return A(function(n){return d(n,qa(t,function(){if(e<t.l.duration)for(var n in t.h){var r={start:function(){},p:new vr,uri:null};t.j[n].unshift(r)}t.l.duration=e,t.$=e}),0)})},g_.getDuration=function(){return this.l.duration};var ek=e.URL.createObjectURL,tk="sequence";g_=ts.prototype,g_.getDuration=function(){return this.j},g_.Lh=function(){return this.g},g_.Ug=function(e){this.i=e},g_.Va=function(e){this.j=e},g_.Qh=function(){return this.i},g_.Tg=function(e){this.A=e},g_.nc=function(e){this.F=e},g_.ye=function(e){this.o=e},g_.$d=function(){return this.o},g_.Rf=function(e){this.s=e},g_.Dh=function(){return this.s},g_.Jg=function(e,t){if(0!=e.length){var n=e[e.length-1].end+t;this.oe(e[0].start+t),this.g=e.reduce(function(e,t){return Math.max(e,t.end-t.start)},this.g),this.h=Math.max(this.h,n),null!=this.i&&this.C&&!this.m&&(this.i=(Date.now()+this.A)/1e3-this.h-this.g),G("notifySegments:","maxSegmentDuration="+this.g)}},g_.zd=function(e){if(0!=e.length){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.A)/1e3;e=a(e);for(var i=e.next();!i.done;i=e.next())i=i.value,r<i.startTime||(t=Math.min(t,i.startTime),n=Math.max(n,i.endTime),this.g=Math.max(this.g,i.endTime-i.startTime));this.oe(t),this.h=Math.max(this.h,n),null!=this.i&&this.C&&!this.m&&(this.i=r-this.h-this.g),G("notifySegments:","maxSegmentDuration="+this.g)}},g_.ge=function(){this.m=!0},g_.ji=function(){return this.m},g_.Uf=function(e){this.B=e},g_.Hh=function(){return this.B},g_.oe=function(e){this.l=null==this.l?e:Math.min(this.l,e)},g_.zf=function(e){this.g=Math.max(this.g,e),G("notifyNewSegmentDuration:","maxSegmentDuration="+this.g)},g_.offset=function(e){null!=this.l&&(this.l+=e),null!=this.h&&(this.h+=e)},g_.U=function(){return 1/0==this.j&&!this.F},g_.ec=function(){return 1/0!=this.j&&!this.F},g_.jb=function(){return Math.max(this.G,this.Mb()-this.o)},g_.Yg=function(e){this.G=e},g_.Mb=function(){return this.U()||this.ec()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.g-this.i)+this.I,this.j):this.h?Math.min(this.h,this.j):this.j},g_.od=function(e){var t=Math.max(this.l,this.G);return 1/0==this.o?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Mb()-this.o+e,this.ub()))},g_.$b=function(){return this.od(0)},g_.ub=function(){return Math.max(0,this.Mb()-(this.U()||this.ec()?this.s:0))},g_.bh=function(){return!(null==this.i||null!=this.h&&this.C)},g_.Sg=function(e){this.I=e},M("shaka.media.PresentationTimeline",ts),ts.prototype.setAvailabilityTimeOffset=ts.prototype.Sg,ts.prototype.usingPresentationStartTime=ts.prototype.bh,ts.prototype.getSeekRangeEnd=ts.prototype.ub,ts.prototype.getSeekRangeStart=ts.prototype.$b,ts.prototype.getSafeSeekRangeStart=ts.prototype.od,ts.prototype.getSegmentAvailabilityEnd=ts.prototype.Mb,ts.prototype.setUserSeekStart=ts.prototype.Yg,ts.prototype.getSegmentAvailabilityStart=ts.prototype.jb,ts.prototype.isInProgress=ts.prototype.ec,ts.prototype.isLive=ts.prototype.U,ts.prototype.offset=ts.prototype.offset,ts.prototype.notifyMaxSegmentDuration=ts.prototype.zf,ts.prototype.notifyMinSegmentStartTime=ts.prototype.oe,ts.prototype.getInitialProgramDateTime=ts.prototype.Hh,ts.prototype.setInitialProgramDateTime=ts.prototype.Uf,ts.prototype.isStartTimeLocked=ts.prototype.ji,ts.prototype.lockStartTime=ts.prototype.ge,ts.prototype.notifySegments=ts.prototype.zd,ts.prototype.notifyTimeRange=ts.prototype.Jg,ts.prototype.getDelay=ts.prototype.Dh,ts.prototype.setDelay=ts.prototype.Rf,ts.prototype.getSegmentAvailabilityDuration=ts.prototype.$d,ts.prototype.setSegmentAvailabilityDuration=ts.prototype.ye,ts.prototype.setStatic=ts.prototype.nc,ts.prototype.setClockOffset=ts.prototype.Tg,ts.prototype.getPresentationStartTime=ts.prototype.Qh,ts.prototype.setDuration=ts.prototype.Va,ts.prototype.setPresentationStartTime=ts.prototype.Ug,ts.prototype.getMaxSegmentDuration=ts.prototype.Lh,ts.prototype.getDuration=ts.prototype.getDuration,ns.prototype.release=function(){this.j=this.l=null,this.i=function(){}},as.prototype.release=function(){this.l&&(this.l.release(),this.l=null),null!=this.m&&(this.m.stop(),this.m=null),this.i&&(this.i.release(),this.i=null),this.g=this.B=this.A=null},as.prototype.Cf=function(){this.o=!0,ss(this)};var nk=new Ve(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});cs.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},ps.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},g_=ys.prototype,g_.Ke=function(){function e(){if(null==t.g||0==t.g&&1/0!=t.h.duration)t.j=!0;else{var e=t.h.currentTime,n=t.g;0>t.g&&(n=Math.max(0,e+t.g)),e!=n?(t.i.ta(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=n):t.j=!0}}var t=this;us(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},g_.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},g_.Le=function(e){this.g=this.j?this.g:e},g_.Qd=function(){return(this.j?this.h.currentTime:this.g)||0},g_.hg=function(){return 0},g_.gg=function(){return 0},g_.Ig=function(){},g_=vs.prototype,g_.Ke=function(){this.m.Wa(.25)},g_.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.B=function(){}},g_.Le=function(e){this.s=e,fs(this.h,e)},g_.Qd=function(){var e=ls(this.h);return 0<this.i.readyState&&!this.i.paused?ws(this,e):e},g_.hg=function(){return this.o?this.o.o:0},g_.gg=function(){return this.j.C},g_.Ig=function(){this.j.Cf()},g_=_s.prototype,g_.getNumReferences=function(){return this.g.length},g_.getNumEvicted=function(){return this.j},g_.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},g_.pi=function(){this.o=!0},g_.zc=function(e){for(var t=a(this.g),n=t.next();!n.done;n=t.next())e(n.value)},g_.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],i=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<i)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},g_.get=function(e){return 0==this.g.length?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},g_.offset=function(e){if(!this.o)for(var t=a(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},g_.ke=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(e){return Math.round(1e3*e.startTime)/1e3<t}),this.g.push.apply(this.g,s(e))}},g_.yd=function(e,t){var n=this;e=e.filter(function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)}),this.ke(e),this.Ia(t)},g_.Ia=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(t){return t.endTime>e}),this.j+=t-this.g.length}},g_.yc=function(e,t,n){if(n=void 0!==n&&n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;0!=this.g.length&&(e=this.g[this.g.length-1],t=new Po(e.startTime,t,e.C,e.Ca,e.ma,e.ea,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.A,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.j=e.j,this.g[this.g.length-1]=t)}},g_.ze=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new qe(function(){var e=t();e?n.g.push.apply(n.g,s(e)):(n.m.stop(),n.m=null)}),this.m.Wa(e))},_s.prototype[Symbol.iterator]=function(){return this.Ab(0)},_s.prototype.Ab=function(e,t,n){t=void 0!==t&&t,n=void 0!==n&&n;var r=this.find(e);if(null==r)return null;var i=this.get(r);n?r++:r--;var o=-1;if(i&&0<i.g.length)for(var a=i.g.length-1;0<=a;--a){var s=i.g[a];if(e>=s.startTime&&e<s.endTime){if(!t){for(;a&&!s.l;)a--,s=i.g[a];if(!s.l)return B("No independent partial segment found!"),null}n?r--:r++,o=a-1;break}}return new ks(this,r,o,n)},M("shaka.media.SegmentIndex",_s),_s.forSingleSegment=Ts,_s.prototype.getIteratorForTime=_s.prototype.Ab,_s.prototype.updateEvery=_s.prototype.ze,_s.prototype.fit=_s.prototype.yc,_s.prototype.evict=_s.prototype.Ia,_s.prototype.mergeAndEvict=_s.prototype.yd,_s.prototype.offset=_s.prototype.offset,_s.prototype.get=_s.prototype.get,_s.prototype.find=_s.prototype.find,_s.prototype.markImmutable=_s.prototype.pi,_s.prototype.release=_s.prototype.release,_s.prototype.getNumEvicted=_s.prototype.getNumEvicted,_s.prototype.getNumReferences=_s.prototype.getNumReferences,ks.prototype.Lc=function(e){this.reverse=e},ks.prototype.xh=function(){return this.h},ks.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},ks.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?0>--this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},M("shaka.media.SegmentIterator",ks),ks.prototype.next=ks.prototype.next,ks.prototype.current=ks.prototype.current,ks.prototype.currentPosition=ks.prototype.xh,ks.prototype.setReverse=ks.prototype.Lc,u(Es,_s),g_=Es.prototype,g_.clone=function(){var e=new Es;return e.h=this.h.slice(),e},g_.release=function(){for(var e=a(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},g_.zc=function(e){for(var t=a(this.h),n=t.next();!n.done;n=t.next())n.value.zc(e)},g_.find=function(e){for(var t=0,n=a(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.find(e);if(null!=i)return i+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},g_.get=function(e){for(var t=0,n=a(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.get(e-t);if(i)return i;i=r.getNumReferences(),t+=r.getNumEvicted()+i}return null},g_.offset=function(){},g_.ke=function(){},g_.Ia=function(){},g_.yd=function(){},g_.yc=function(){},g_.ze=function(){},M("shaka.media.MetaSegmentIndex",Es),Es.prototype.updateEvery=Es.prototype.ze,Es.prototype.fit=Es.prototype.yc,Es.prototype.mergeAndEvict=Es.prototype.yd,Es.prototype.evict=Es.prototype.Ia,Es.prototype.merge=Es.prototype.ke,Es.prototype.offset=Es.prototype.offset,Es.prototype.get=Es.prototype.get,Es.prototype.find=Es.prototype.find,Es.prototype.forEachTopLevelReference=Es.prototype.zc,Es.prototype.release=Es.prototype.release,As.prototype.release=function(){this.set(this.Xb()),this.h&&(this.h.stop(),this.h=null),this.g=null},As.prototype.set=function(e){this.i=e,xs(this)},As.prototype.Xb=function(){return this.g.Xb()},Cs.prototype.release=function(){this.i.stop();for(var e=a(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},Ls.prototype.Ia=function(e,t){t=void 0!==t&&t;for(var n=a(this.i.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&qs(this,r);t&&Vs(this)},Ls.prototype.Lc=function(e){this.o=e,this.h&&this.h.Lc(e)},zs.prototype.abort=function(){this.se&&this.se.abort()},u(Ys,xr),Ys.prototype.release=function(){this.g.clear(),this.h.stop(),xr.prototype.release.call(this)},u(Js,xr),Js.prototype.release=function(){this.g.clear(),xr.prototype.release.call(this)},Js.prototype.j=function(e){for(var t=a(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var r=n.Dd,i=r.length-1;0<=i;i--){var o=r[i];if(o.position<=e){r=o.yf;break e}}r=null}if((i=r)&&(i=n.ng,i=!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width)),i)e:{if(i=e,o=r.contentType,(o=this.h()[o])&&0<o.length){var s=o[o.length-1].end;if(i>=o[0].start&&i<s){i=!0;break e}}i=!1}i&&(n.ng=r,q("Media quality changed at position "+e+" "+JSON.stringify(r)),n=new Er("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}},g_=tu.prototype,g_.destroy=function(){return this.l.destroy()},g_.configure=function(e){if(this.h=e,this.J=new pr({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.S&&(Hs(t.S),t.S=null),t=a(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,Hs(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(hT))&&t.S&&(Hs(t.S),t.S=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.S&&(Hs(t.S),t.S=null),t=a(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.S?(Ws(n.S,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(Hs(n.S),n.S=null)):0<e.segmentPrefetchLimit&&(n.S=pu(this,n.stream));e.disableAudioPrefetch||gu(this)},g_.start=function(e){var t=this;return A(function(n){if(1==n.g)return d(n,du(t,e||new Map),2);Hr(t.l),q("init: completed initial Stream setup"),t.C=!0,h(n)})},g_.Ed=function(){if(this.g){for(var e=this.g.Yd(),t=!1,n=a(this.i.keys()),r=n.next();!r.done;r=n.next()){var i=r.value;r=this.i.get(i);var o=Lu(r),s=null;if(r.ca&&(s=r.ca.current()),r.S&&(r.S.h=null),"audio"===r.type)for(var u=a(this.o.values()),c=u.next();!c.done;c=u.next())c.value.h=null;(!s||s.startTime>e||s.endTime<e)&&(r.ca=null),s=this.g.Z,s.B?s=!1:i==hT?(s=s.g,s=null!=s.g&&null!=s.h&&(e>=s.g&&e<s.h)):(s=Ma(s,i),s=Oo(s,e)),s||((null!=Ia(this.g.Z,i)||r.Ta)&&(fu(this,r),t=!0),r.fb&&(r.fb.abort(),q(o,"Aborting operation due to seek"),r.fb=null),i===hT&&(i=this.g.Z,i.I&&i.I.g()),r.Ed=!0)}t||q("(all): seeked: buffered seek: presentationTime="+e)}},g_.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.Z.Va(e):this.g.Z.Va(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))},M("shaka.util.ConfigUtils",Nu),Nu.getDifferenceFromConfigObjects=Hu,Nu.convertToConfigObject=Bu,Nu.mergeConfigObjects=Uu,M("shaka.util.FairPlayUtils",Vu),Vu.commonFairPlayResponse=function(e,t){if(2===e){try{var n=gt(t.data)}catch(e){return}e=!1,n=n.trim(),"<ckc>"===n.substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(e){}e&&(t.data=de(Et(n)))}},Vu.expressplayFairPlayRequest=function(e,t){Gu(e,t)},Vu.conaxFairPlayRequest=function(e,t){Gu(e,t)},Vu.ezdrmFairPlayRequest=function(e,t){Gu(e,t)},Vu.verimatrixFairPlayRequest=function(e,t){2===e&&(e=he(t.body),e=kt(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=mt("spc="+e))},Vu.expressplayInitDataTransform=function(e,t,n){return qu(e,t,n)},Vu.conaxInitDataTransform=function(t,n,r){if("skd"!==n)return t;n=r.serverCertificate,r=vt(t).split("skd://").pop().split("?").shift(),r=e.atob(r);var i=new ArrayBuffer(2*r.length);i=pe(i);for(var o=0,a=r.length;o<a;o++)i[o]=r.charCodeAt(o);return Ku(t,i,n)},Vu.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,n=vt(e).split(";").pop(),Ku(e,n,t))},Vu.verimatrixInitDataTransform=function(e,t,n){return qu(e,t,n)},Vu.initDataTransform=Ku,Vu.defaultGetContentId=Wu,Vu.isFairPlaySupported=function(){var e;return A(function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},p(t,2),d(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(v(t),t.return(!1))})},M("shaka.util.PlayerConfiguration",zu),zu.mergeConfigObjects=Yu,zu.createDefault=Xu,u(Zu,xr),g_=Zu.prototype,g_.getStartTime=function(){return this.W},g_.Bc=function(){return this.K},g_.jf=function(){return this.h},g_.getStats=function(){return this.$},g_.start=function(){var e=this;!function(){var t;A(function(n){switch(n.g){case 1:return d(n,Promise.resolve(),2);case 2:return p(n,3),d(n,lc(e),5);case 5:return uc(e),d(n,fc(e),6);case 6:if(uc(e),e.o||(e.o=new tr(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups,e.g.preferredAudioChannelConfig,e.g.preferredAudioAccessibilityPurpose)),e.Za){var r=e.g.abrFactory;e.A=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Ya){r=e.h.presentationTimeline.U();var i=Vn(e.h.variants);i=e.o.create(i),e.i.configure(e.g.abr),e.i.setVariants(Array.from(i.values())),(i=e.i.chooseVariant(!0))&&(e.fa=i,i.video&&dc(e,i.video,r),i.audio&&dc(e,i.audio,r))}return d(n,void 0,7);case 7:uc(e),e.m.resolve(),y(n,0);break;case 3:t=v(n),e.m.reject(t),h(n)}})}()},g_.dispatchEvent=function(e){return this.L?this.L.dispatchEvent(e):xr.prototype.dispatchEvent.call(this,e)},g_.onError=function(e){2===e.severity&&(this.m.reject(e),this.destroy());var t=(new Map).set("detail",e);t=new Er("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)},g_.configure=function(e,t){e=Bu(e,t),Yu(this.g,e)},g_.getConfiguration=function(){return hn(this.g)},g_.Yi=function(){return this.m},g_.destroy=function(){var e,t,n,r=this;return A(function(i){switch(i.g){case 1:if(r.s=!0,!r.j||r.da){i.u(2);break}return d(i,r.j.stop(),2);case 2:if(!r.i||r.aa){i.u(4);break}return d(i,r.i.stop(),4);case 4:if(r.F&&!r.qa&&r.F.release(),!r.l||r.ba){i.u(6);break}return d(i,r.l.destroy(),6);case 6:if(0<r.J.size&&!r.ra)for(e=a(r.J.values()),t=e.next();!t.done;t=e.next())n=t.value,Hs(n);h(i)}})},M("shaka.media.PreloadManager",Zu),Zu.prototype.destroy=Zu.prototype.destroy,Zu.prototype.waitForFinish=Zu.prototype.Yi,u(pc,xr),pc.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,xr.prototype.release.call(this)},pc.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=a(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.g.get(r),o=e<r.startTime?rk:e>r.endTime?ok:ik;this.g.set(r,o);for(var s=a(this.m),u=s.next();!u.done;u=s.next())u=u.value,u.sc==i&&u.rc==o&&u.dc(r,t)}}};var rk=1,ik=2,ok=3,ak={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};g_=wc.prototype,g_.configure=function(){},g_.remove=function(e,t){return!!this.g&&(_c(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},g_.append=function(e){var t=bc(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var r={};t=a(t);for(var i=t.next();!i.done;r={vc:r.vc},i=t.next())r.vc=i.value,e.some(function(e){return function(t){return t.startTime==e.vc.startTime&&t.endTime==e.vc.endTime&&t.text==e.vc.payload}}(r))||(i=Sc(r.vc))&&n.push(i);e=n.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)}),e=a(e);for(r=e.next();!r.done;r=e.next())this.g.addCue(r.value)},g_.destroy=function(){return this.g&&(_c(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},g_.isTextVisible=function(){return"showing"==this.g.mode},g_.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},M("shaka.text.SimpleTextDisplayer",wc),wc.prototype.setTextVisibility=wc.prototype.setTextVisibility,wc.prototype.isTextVisible=wc.prototype.isTextVisible,wc.prototype.destroy=wc.prototype.destroy,wc.prototype.append=wc.prototype.append,wc.prototype.remove=wc.prototype.remove,wc.prototype.configure=wc.prototype.configure,g_=Tc.prototype,g_.configure=function(){},g_.remove=function(){},g_.append=function(){},g_.destroy=function(){},g_.isTextVisible=function(){return!1},g_.setTextVisibility=function(){},M("shaka.text.StubTextDisplayer",Tc),Tc.prototype.setTextVisibility=Tc.prototype.setTextVisibility,Tc.prototype.isTextVisible=Tc.prototype.isTextVisible,Tc.prototype.destroy=Tc.prototype.destroy,Tc.prototype.append=Tc.prototype.append,Tc.prototype.remove=Tc.prototype.remove,Tc.prototype.configure=Tc.prototype.configure,M("shaka.util.Dom",kc),kc.removeAllChildren=Ec,g_=Ac.prototype,g_.configure=function(e){this.C&&this.C.Wa(e.captionsUpdatePeriod)},g_.append=function(e){var t=[].concat(s(this.h)),n={};e=a(e);for(var r=e.next();!r.done;n={Jd:n.Jd},r=e.next())n.Jd=r.value,t.some(function(e){return function(t){return Ee(t,e.Jd)}}(n))||this.h.push(n.Jd);Pc(this)},g_.destroy=function(){return this.g?(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null),Promise.resolve()):Promise.resolve()},g_.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(n){return n.startTime<e||n.endTime>=t}),Pc(this,n>this.h.length),!0},g_.isTextVisible=function(){return this.m},g_.setTextVisibility=function(e){this.m=e},M("shaka.text.UITextDisplayer",Ac),Ac.prototype.setTextVisibility=Ac.prototype.setTextVisibility,Ac.prototype.isTextVisible=Ac.prototype.isTextVisible,Ac.prototype.remove=Ac.prototype.remove,Ac.prototype.destroy=Ac.prototype.destroy,Ac.prototype.append=Ac.prototype.append,Ac.prototype.configure=Ac.prototype.configure,M("shaka.text.WebVttGenerator",function(){}),Lc.prototype.configure=function(e){this.g=e};var sk="m",uk="a",ck="v",lk="av",fk="i",dk="c",hk="tt";M("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",ih:"s",OTHER:"o"}),g_=Yc.prototype,g_.configure=function(e){this.h=e},g_.xg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(gk)?1e3*this.g.get(gk):null},g_.wg=function(){return this.h.enabled&&this.g&&this.g.has(pk)?1e3*this.g.get(pk):null},g_.Rh=function(){return this.h.enabled&&this.g&&this.g.has(yk)?this.g.get(yk):null},g_.Sh=function(){return this.h.enabled&&this.g&&this.g.has(vk)?this.g.get(vk):null},g_.getBandwidthEstimate=function(e){var t=this.wg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e},M("shaka.util.CmsdManager",Yc),Yc.prototype.getBandwidthEstimate=Yc.prototype.getBandwidthEstimate,Yc.prototype.getRoundTripTime=Yc.prototype.Sh,Yc.prototype.getResponseDelay=Yc.prototype.Rh,Yc.prototype.getEstimatedThroughput=Yc.prototype.wg,Yc.prototype.getMaxBitrate=Yc.prototype.xg;var pk="etp",gk="mb",yk="rd",vk="rtt";$c.prototype.release=function(){z(this.g+" has released mutex"),0<this.h.length?this.h.shift()():this.g=null},u(Zc,xr),g_=Zc.prototype,g_.destroy=function(){var e,t,n,r,i,o=this;return A(function(s){switch(s.g){case 1:return o.l==mk?s.return():(el(o),e=o.detach(),o.l=mk,d(s,e,2));case 2:for(t=[],n=a(o.Lf),r=n.next();!r.done;r=n.next())i=r.value,i.s||t.push(i.destroy());return o.Lf=[],d(s,Promise.all(t),3);case 3:if(o.te&&(o.te.release(),o.te=null),o.jd&&(o.jd.release(),o.jd=null),o.m&&(o.m.release(),o.m=null),o.La&&(o.La.release(),o.La=null),o.hd&&(o.hd.release(),o.hd=null),o.wa=null,o.g=null,o.A=null,o.ee=null,o.N=null,o.aa=null,!o.G){s.u(4);break}return d(s,o.G.destroy(),5);case 5:o.G=null;case 4:o.o&&(o.o.release(),o.o=null),xr.prototype.release.call(o),h(s)}})},g_.wc=function(e,t){t=void 0===t||t;var n,r,i,o=this;return A(function(a){switch(a.g){case 1:if(o.l==mk)throw new He(2,7,7e3);if(n=o.h&&o.h==e,!o.h||o.h==e){a.u(2);break}return d(a,o.detach(),2);case 2:return d(a,il(o,"attach"),4);case 4:if(a.h)return a.return();if(p(a,5,6),n||(rl(o,"attach"),r=function(){var e=uf(o);e&&af(o,e)},o.jd.D(e,"error",r),o.h=e),!t||!Ge()||o.F){a.u(6);break}return d(a,fl(o),6);case 6:m(a),o.W.release(),b(a,0);break;case 5:return i=v(a),d(a,o.detach(),10);case 10:throw i}})},g_.qh=function(e){this.gh=e},g_.detach=function(e){e=void 0!==e&&e;var t=this;return A(function(n){if(1==n.g){if(t.l==mk)throw new He(2,7,7e3);return d(n,t.pc(!1,e),2)}if(3!=n.g)return d(n,il(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.jd.ob(),t.h=null),rl(t,"detach"),t.B&&!e&&t.B.release()}finally{t.W.release()}h(n)})},g_.pc=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,r,i,o,s,u,c,l,f,h=this;return A(function(p){switch(p.g){case 1:return h.l!=mk&&(h.l=bk),d(p,il(h,"unload"),2);case 2:return p.h?p.return():(g(p,3),h.hb=!1,rl(h,"unload"),e&&!Ge()&&(e=!1),el(h),n=h.kd.map(function(e){return e()}),h.kd=[],d(p,Promise.all(n),5));case 5:if(h.dispatchEvent(nl("unloading")),h.fd&&(h.fd.release(),h.fd=null),h.h&&(h.m.ob(),h.La.ob()),h.ne.stop(),h.ib&&(h.ib.release(),h.ib=null),h.he&&(h.he.stop(),h.he=null),!h.J){p.u(6);break}return d(p,h.J.stop(),7);case 7:h.J=null,h.Za=null;case 6:if(!h.o){p.u(8);break}return d(p,h.o.stop(),8);case 8:if(!h.j){p.u(10);break}return d(p,h.j.destroy(),11);case 11:h.j=null;case 10:if(h.I&&(h.I.release(),h.I=null),h.C&&(h.C.release(),h.C=null),!dt("webkit")||!h.s){p.u(12);break}return d(p,h.s.destroy(),13);case 13:h.s=null;case 12:if(!h.F){p.u(14);break}return d(p,h.F.destroy(),15);case 15:h.F=null;case 14:if(h.B&&!t&&h.B.onAssetUnload(),h.qa&&!t&&(h.qa.destroy(),h.qa=null),t||h.eg.stop(),h.N&&Nc(h.N),h.aa&&(h.aa.g=null),h.h&&Ec(h.h),!h.h||!h.h.src){p.u(16);break}return d(p,new Promise(function(e){return new qe(e).X(.1)}),17);case 17:h.h.removeAttribute("src"),h.h.load();case 16:if(!h.s){p.u(18);break}return d(p,h.s.destroy(),19);case 19:h.s=null;case 18:if(h.ra&&h.$!=h.ra.Bc()&&(h.ra.s||h.ra.destroy(),h.ra=null),h.$=null,h.Gf=null,h.L=null,h.i){for(r=a(h.i.variants),i=r.next();!i.done;i=r.next())for(o=i.value,s=a([o.audio,o.video]),u=s.next();!u.done;u=s.next())(c=u.value)&&c.segmentIndex&&c.segmentIndex.release();for(l=a(h.i.textStreams),u=l.next();!u.done;u=l.next())f=u.value,f.segmentIndex&&f.segmentIndex.release()}h.g.streaming.clearDecodingCache&&(ST={},FT.clear()),h.i=null,h.A=new Ds,h.Yf=null,h.xd=[],h.T=NaN,Hl(h);case 3:m(p),h.W.release(),b(p,4);break;case 4:if(e&&Ge()&&!h.F)return d(p,fl(h),0);p.u(0)}})},g_.Xi=function(e){this.fa=e},g_.load=function(e,t,n){t=void 0===t?null:t;var r,i,o,a,s,u,c,l,f,y,w,S,_,T=this;return A(function(k){switch(k.g){case 1:if(T.l==mk)throw new He(2,7,7e3);return r=null,i="",e instanceof Zu?(r=e,i=r.Bc()||""):i=e||"",d(k,Qc(T.W,"load"),2);case 2:if(T.W.release(),!T.h)throw new He(2,7,7002);if(!T.$){k.u(3);break}return T.$=i,d(k,T.pc(!1),3);case 3:if(o=++T.ve,a=function(){return A(function(e){if(1==e.g)return T.ve==o?e.u(0):r?d(e,r.destroy(),3):e.u(3);throw new He(2,7,7e3)})},s=function(e,t){return A(function(n){switch(n.g){case 1:return g(n,2),d(n,Qc(T.W,t),4);case 4:return d(n,a(),5);case 5:return d(n,e(),6);case 6:return d(n,a(),7);case 7:r&&T.g&&(r.g=T.g);case 2:m(n),T.W.release(),b(n,0)}})},p(k,5,6),null==t&&r&&(t=r.getStartTime()),T.fa=t,T.hb=!1,T.dispatchEvent(nl("loading")),r){n=r.T,k.u(8);break}if(n){k.u(8);break}return d(k,s(function(){return A(function(e){if(1==e.g)return d(e,cl(T,i),2);n=e.h,h(e)})},"guessMimeType_"),8);case 8:if(u=!!r,r){nc(r,T),T.A=r.getStats(),k.u(11);break}return d(k,sl(T,i,t,n,!0),12);case 12:(r=k.h)?(nc(r,T),T.A=r.getStats(),r.start(),r.m.catch(function(){})):T.A=new Ds;case 11:if(c=!r,l=r?r.qb:Date.now()/1e3,T.A=r?r.getStats():new Ds,T.$=i,T.Gf=n||null,c)return d(k,s(function(){return A(function(e){return d(e,hl(T,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(T.F){k.u(15);break}return d(k,s(function(){return A(function(e){return d(e,fl(T),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return d(k,s(function(){return A(function(e){return d(e,r.m,0)})},"waitForFinish"),17);case 17:return T.g=r.getConfiguration(),T.de=r.B,T.Za=r.C,T.J=ic(r),T.fd=oc(r),T.qb=r.La,T.i=r.jf(),(f=r.o)&&(T.Ka=f),u&&T.h&&"AUDIO"===T.h.nodeName&&(ol(T),T.configure("manifest.disableVideo",!0)),T.s=ac(r),d(k,s(function(){return A(function(e){return d(e,T.s.wc(T.h),0)})},"drmEngine_.attach"),18);case 18:return!(y=r.A)||T.wa&&T.wa==y||(T.o=rc(r),T.wa=r.A,"function"!=typeof T.o.setMediaElement&&(ie("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),T.o.setMediaElement=function(){}),"function"!=typeof T.o.setCmsdManager&&(ie("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),T.o.setCmsdManager=function(){}),"function"!=typeof T.o.trySuggestStreams&&(ie("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),T.o.trySuggestStreams=function(){})),w=sc(r),S=r.fa,d(k,s(function(){return A(function(e){return d(e,dl(T,l,S,w),0)})},"loadInner_"),19);case 19:tc(r),k.u(14);break;case 20:return d(k,s(function(){return A(function(e){return d(e,pl(T,l,n),0)})},"srcEqualsInner_"),14);case 14:T.dispatchEvent(nl("loaded"));case 6:if(m(k),!r){k.u(22);break}return d(k,r.destroy(),22);case 22:T.ra=null,b(k,0);break;case 5:if(_=v(k),7e3==_.code){k.u(24);break}return d(k,T.pc(!1),24);case 24:throw _}})},g_.Ti=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,r=this;return A(function(i){return 1==i.g?d(i,al(r),2):3!=i.g?(n=i.h,d(i,r.pc(e,t),3)):i.return(n)})},g_.pg=function(e){e=void 0!==e&&e;var t,n=this;return A(function(r){return 1==r.g?d(r,al(n),2):3!=r.g?(t=r.h,d(r,n.detach(e),3)):r.return(t)})},g_.preload=function(e,t,n){t=void 0===t?null:t;var r,i=this;return A(function(o){return 1==o.g?d(o,sl(i,e,t,n),2):((r=o.h)?r.start():af(i,new He(2,7,7005)),o.return(r))})},g_.Bi=function(){for(var e=this.W;e.g;)e.release()},g_.xc=function(e){return new Ri(e)},g_.configure=function(e,t){if(2==arguments.length&&"string"==typeof e&&(e=Bu(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(ie("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(ie("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&ie("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){ie("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var n=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return n},delete e.mediaSource.sourceBufferExtraFeatures}e.streaming&&e.streaming.lowLatencyMode&&(void 0==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),void 0==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01),void 0==e.streaming.segmentPrefetchLimit&&(e.streaming.segmentPrefetchLimit=2),void 0==e.streaming.updateIntervalSeconds&&(e.streaming.updateIntervalSeconds=.1),void 0==e.streaming.maxDisabledTime&&(e.streaming.maxDisabledTime=1),void 0==e.streaming.retryParameters&&(e.streaming.retryParameters={}),void 0==e.streaming.retryParameters.baseDelay&&(e.streaming.retryParameters.baseDelay=100),void 0==e.manifest&&(e.manifest={}),void 0==e.manifest.dash&&(e.manifest.dash={}),void 0==e.manifest.dash.autoCorrectDrift&&(e.manifest.dash.autoCorrectDrift=!1),void 0==e.manifest.retryParameters&&(e.manifest.retryParameters={}),void 0==e.manifest.retryParameters.baseDelay&&(e.manifest.retryParameters.baseDelay=100),void 0==e.drm&&(e.drm={}),void 0==e.drm.retryParameters&&(e.drm.retryParameters={}),void 0==e.drm.retryParameters.baseDelay&&(e.drm.retryParameters.baseDelay=100));var r=Yu(this.g,e,Ul(this));return Pl(this),r},g_.getConfiguration=function(){var e=Ul(this);return Yu(e,this.g,Ul(this)),e},g_.Nh=function(){return Yu(Ul(this),this.g,Ul(this)),Hu(this.g,Ul(this))},g_.ug=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Nb().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},g_.Fi=function(){for(var e in this.g)delete this.g[e];Yu(this.g,Ul(this),Ul(this)),Pl(this)},g_.Jh=function(){return this.l},g_.kf=function(){return this.i?this.i.type:null},g_.Mh=function(){return this.h},g_.Zb=function(){return this.G},g_.Bc=function(){return this.$},g_.tg=function(){return this.B?this.B:null},g_.U=function(){return this.i?this.i.presentationTimeline.U():!(!this.h||!this.h.src)&&1/0==this.h.duration},g_.ec=function(){return!!this.i&&this.i.presentationTimeline.ec()},g_.di=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.h||!this.h.src)&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},g_.Nb=function(){if(this.i){if(!this.hb&&"HLS"==this.i.type)return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.$b(),end:e.ub()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},g_.ai=function(){this.U()?this.h.currentTime=this.Nb().end:W("goToLive is for live streams!")},g_.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},g_.drmInfo=function(){return this.s?this.s.g:null},g_.md=function(){return this.s?this.s.md():1/0},g_.hf=function(){return this.s?this.s.hf():[]},g_.nd=function(){return this.s?this.s.nd():{}},g_.pf=function(){return!!this.L&&this.L.g==AT},g_.bb=function(){return this.h?this.I?this.I.i:1:0},g_.Gd=function(e){var t=this;0==e?F("A trick play rate of 0 is unsupported!"):(this.La.ob(),this.h.paused&&this.h.play(),this.I.set(e),this.l==wk&&(this.o.playbackRateChanged(e),au(this.j,1<Math.abs(e))),this.U()&&this.La.D(this.h,"timeupdate",function(){var n=t.h.currentTime,r=t.Nb(),i=t.g.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.bd():Math.floor(n)<=Math.floor(r.start+i)&&t.bd()}))},g_.bd=function(){var e=this.I.Xb();this.l==Sk&&this.I.set(e),this.l==wk&&(this.I.set(e),this.o.playbackRateChanged(e),au(this.j,!1)),this.La.ob()},g_.cc=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=a(this.i.variants),i=r.next();!i.done;i=r.next())if(i=i.value,Hn(i)){var o=Rn(i);o.active=i==e,o.active||1==n||null==e||i.video!=e.video||i.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(e){return Bn(e)}):[]},g_.Cc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=a(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var i=Dn(r);i.active=r==e,t.push(i)}return t}return this.h&&this.h.src&&this.h.textTracks?jl(this).map(function(e){return Un(e)}):[]},g_.Gh=function(){var e=this.xd;return this.i&&(e=this.i.imageStreams),e.map(function(e){return Ln(e)})},g_.zh=function(e){var t,n,r,i,o=this;return A(function(a){return 1==a.g?o.l!=wk&&o.l!=Sk?a.return(null):(t=o.xd,o.i&&(t=o.i.imageStreams),(n=t.find(function(t){return t.id==e}))?n.segmentIndex?a.u(2):d(a,n.createSegmentIndex(),2):a.return(null)):4!=a.g?(r=[],n.segmentIndex.zc(function(t){var i=Il(t.tilesLayout||n.tilesLayout);if(i){i=i.rows*i.Ub;for(var a=t.i-t.startTime,s=0;s<i;s++)r.push(o.zg(e,t.startTime+a*s/i))}}),d(a,Promise.all(r),4)):(i=a.h,a.return(i.filter(function(e){return e})))})},g_.zg=function(e,t){var n,r,i,o,a,s,u,c,l,f,h,p,g,y,v,m,b,w,S=this;return A(function(_){return 1==_.g?S.l!=wk&&S.l!=Sk?_.return(null):(n=S.xd,S.i&&(n=S.i.imageStreams),(r=n.find(function(t){return t.id==e}))?r.segmentIndex?_.u(2):d(_,r.createSegmentIndex(),2):_.return(null)):null==(i=r.segmentIndex.find(t))?_.return(null):(o=r.segmentIndex.get(i),(a=Il(o.tilesLayout||r.tilesLayout))?(s=r.width||0,u=r.height||0,c=s/a.Ub,l=u/a.rows,f=a.Ub*a.rows,h=o.i-o.startTime,p=o.A||h/f,g=o.startTime,v=y=0,1<f&&(m=Math.floor((t-o.startTime)/p),g=o.startTime+m*p,y=m%a.Ub*c,v=Math.floor(m/a.Ub)*l),b=!1,(w=o.s)&&(b=!0,l=w.height,y=w.positionX,v=w.positionY,c=w.width),_.return({segment:o,imageHeight:u,imageWidth:s,height:l,positionX:y,positionY:v,startTime:g,duration:p,uris:o.M(),width:c,sprite:b})):_.return(null))})},g_.Qg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(t){return t.id==e.id});t?t==this.j.s?q("Text track already selected."):(Rs(this.A.h,t,!1),uu(this.j,t),tf(this),this.Ya=t.language):V("No stream with id",e.id)}else if(this.h&&this.h.src&&this.h.textTracks){t=jl(this),t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,Nn(n)==e.id?n.mode=this.da?"showing":"hidden":n.mode="disabled";tf(this)}},g_.Pf=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){this.g.abr.enabled&&F("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.i.variants.find(function(t){return t.id==e.id});r?Hn(r)?(Jl(this,r,!1,t,n),this.Ka=new er(r,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Gl(this)):V("Unable to switch to restricted track",e.id):V("No variant with id",e.id)}else if(this.h&&this.h.audioTracks)for(t=Array.from(this.h.audioTracks),t=a(t),n=t.next();!n.done;n=t.next())if(n=n.value,Nn(n)==e.id){$l(this,n);break}},g_.Bh=function(){return df(this.cc())},g_.Uh=function(){return df(this.Cc())},g_.Ah=function(){return Array.from(ff(this.cc()))},g_.Th=function(){return Array.from(ff(this.Cc()))},g_.Pg=function(e,t,n,r,i,o){if(n=void 0===n?0:n,r=void 0===r?"":r,o=void 0===o?0:o,this.i&&this.C){for(this.Ka=new tr(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,r,i),e=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},t=this.j.j,r=this.Ka.create(this.i.variants),n=null,r=a(r.values()),i=r.next();!i.done;i=r.next())i=i.value,(!n||e(n,t)>e(i,t))&&(n=i);n?(e=Rn(n),this.Pf(e,!0,o)):Yl(this)}else this.h&&this.h.audioTracks&&(o=Wn(this.cc(),e,t||"",!1)[0])&&this.Pf(o)},g_.Of=function(e,t,n){n=void 0!==n&&n,this.i&&this.C?(this.Ya=e,this.td=t||"",this.qd=n,(e=Wn(this.i.textStreams,this.Ya,this.td,this.qd)[0]||null)&&(e==this.j.s?q("Text track already selected."):(Rs(this.A.h,e,!1),(this.g.streaming.alwaysStreamText||this.qf())&&(uu(this.j,e),tf(this))))):(e=Wn(this.Cc(),e,t||"",n)[0])&&this.Qg(e)},g_.Li=function(e,t,n){if(t=void 0===t||t,n=void 0===n?0:n,this.i&&this.C){for(var r=null,i=a(this.i.variants),o=i.next();!o.done;o=i.next())if(o=o.value,o.audio.label==e){r=o;break}null==r?W("No variants were found with label: "+e+". Ignoring the request to switch."):(this.Ka=new tr(r.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Yl(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=a(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&$l(this,t)}},g_.qf=function(){var e=this.da;return this.F&&this.l==wk?this.F.C.isTextVisible():this.h&&this.h.src&&this.h.textTracks?jl(this).some(function(e){return"showing"==e.mode}):e},g_.vg=function(){return this.h&&this.h.src&&this.h.textTracks?Ol(this).map(function(e){return Un(e)}):[]},g_.Ch=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=un(e),n=Ol(this).filter(function(e){return un(e.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=a(n);for(var i=n.next();!i.done;i=n.next())if((i=i.value)&&i.cues){i=a(i.cues);for(var o=i.next();!o.done;o=i.next()){var s=o.value;(o=s.id)&&""!=o||(o=s.startTime+"-"+s.endTime+"-"+s.text),s={id:o,title:s.text,startTime:s.startTime,endTime:s.endTime},r.has(o)||(e.push(s),r.add(o))}}return e},g_.Vg=function(e){if(e=!!e,this.da!=e){if(this.da=e,this.l==wk)this.F.C.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=Wn(this.i.textStreams,this.Ya,this.td,this.qd),0<e.length&&(uu(this.j,e[0]),tf(this))):ou(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=jl(this);t=a(t);for(var n=t.next();!n.done;n=t.next())n=n.value,"disabled"!=n.mode&&(n.mode=e?"showing":"hidden")}nf(this)}},g_.Ph=function(){if(this.C)var e=this.C.Qd();else{if(null==this.fa)return new Date;e=this.fa}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.B||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?(W("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(t.getTime()+1e3*e)):(W("No way to get playhead time as Date!"),null)},g_.yg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.B||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?(W("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):e):(W("No way to get presentation start time as Date!"),null)},g_.$d=function(){return this.U()?this.i?this.i.presentationTimeline.$d():(W("No way to get segment segment availability duration!"),null):(W("getSegmentAvailabilityDuration is for live streams!"),null)},g_.sb=function(){if(this.l==wk)return this.F.sb();var e={total:[],audio:[],video:[],text:[]};return this.l==Sk&&(e.total=Lo(this.h.buffered)),e},g_.getStats=function(){if(this.l!=wk&&this.l!=Sk)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,bytesDownloaded:NaN,switchHistory:[],stateHistory:[]};Wl(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.A;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.A.L=this.C.gg(),this.A.N=this.C.hg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.A;var r=Number(n.totalVideoFrames);t.K=Number(n.droppedVideoFrames),t.J=r,this.A.I=Number(n.corruptedVideoFrames)}if(this.s?(n=this.s,n=n.J?n.J:NaN):n=NaN,this.A.s=n,this.l==wk){if(n=this.j.j,t=this.j.s,n){r=this.I?this.I.i:1;var i=r*n.bandwidth;t&&t.bandwidth&&(i+=r*t.bandwidth),this.A.B=i}n&&n.video&&(t=this.A,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.U()&&(n=this.yg().valueOf()+1e3*e.currentTime,this.A.C=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.A.G=this.i.presentationTimeline.g),n=this.o.getBandwidthEstimate(),this.A.A=n}this.l==Sk&&(n=this.A,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var o=this.A;e=o.o,n=o.l,t=o.B,r=o.J,i=o.K;var s=o.I,u=o.N,c=o.L,l=o.A,f=o.i,d=o.m,h=o.F,p=o.j,g=js(o.g,"playing"),y=js(o.g,"paused"),v=js(o.g,"buffering"),m=o.s,b=o.C,w=o.G,S=o.Rd,_=Ms(o.g),T=[];o=a(o.h.g);for(var k=o.next();!k.done;k=o.next())k=k.value,T.push({timestamp:k.timestamp,id:k.id,type:k.type,fromAdaptation:k.fromAdaptation,bandwidth:k.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:i,corruptedFrames:s,stallsDetected:u,gapsJumped:c,estimatedBandwidth:l,completionPercent:f,loadLatency:d,manifestTimeSeconds:h,drmTimeSeconds:p,playTime:g,pauseTime:y,bufferingTime:v,licenseTime:m,liveLatency:b,maxSegmentDuration:w,bytesDownloaded:S,stateHistory:_,switchHistory:T}},g_.lh=function(e,t,n,r,i,o,a){a=void 0!==a&&a;var s,u,c,l,f,h,p,g,y,v,m,b,w=this;return A(function(S){switch(S.g){case 1:if(w.l!=wk&&w.l!=Sk)throw V("Must call load() and wait for it to resolve before adding text tracks."),new He(1,7,7004);if("subtitles"!=n&&"captions"!=n&&F("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){S.u(2);break}return d(S,Rl(w,e),3);case 3:r=S.h;case 2:if(s=[],w.B&&(s=w.B.getCuePoints()),w.l!=Sk){S.u(4);break}return a&&(n="forced"),d(S,Dl(w,e,t,n,r,o||"",s),5);case 5:if(u=un(t),c=w.Cc(),l=c.find(function(e){return un(e.language)==u&&e.label==(o||"")&&e.kind==n}))return Zl(w),S.return(l);throw V("Cannot add this text when loaded with src="),new He(1,2,2012);case 4:if(f=pT,h=w.h.duration,w.i&&(h=w.i.presentationTimeline.getDuration()),1/0==h)throw new He(1,4,4033);if(!s.length){S.u(6);break}return d(S,Ll(w,e,w.G,w.g.streaming.retryParameters),7);case 7:p=S.h,g=Nl(w,p,r,s),y=new Blob([g],{type:"text/vtt"}),e=ek(y),r="text/vtt";case 6:if(v={id:w.bg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ts(0,h,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:f.pa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!a,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Lt(r||"",i||"")])},m=Lt(v.mimeType,v.codecs),!(b=Xt(m)))throw new He(2,2,2014,r);return w.i.textStreams.push(v),Zl(w),S.return(Dn(v))}})},g_.mh=function(e,t){var n,r,i,o,s,u,c,l,f,h,p,g,y,v,m,b,w=this;return A(function(S){switch(S.g){case 1:if(w.l!=wk&&w.l!=Sk)throw V("Must call load() and wait for it to resolve before adding image tracks."),new He(1,7,7004);if(t){S.u(2);break}return d(S,Rl(w,e),3);case 3:t=S.h;case 2:if("text/vtt"!=t)throw new He(1,2,2017,e);if(n=pT,r=w.h.duration,w.i&&(r=w.i.presentationTimeline.getDuration()),1/0==r)throw new He(1,4,4045);return d(S,Ll(w,e,w.G,w.g.streaming.retryParameters),4);case 4:if(i=S.h,!(o=bT[t]))throw new He(2,2,2014,t);for(s=o(),u={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0},c=he(i),l=s.parseMedia(c,u,e),f=[],h={},p=a(l),g=p.next();!g.done;h={Yc:h.Yc,Rb:h.Rb},g=p.next())h.Rb=g.value,h.Yc=null,y=function(t){return function(){return null==t.Yc&&(t.Yc=Pt([e],[t.Rb.payload])),t.Yc||[]}}(h),v=new Po(h.Rb.startTime,h.Rb.endTime,y,0,null,null,0,0,1/0),h.Rb.payload.includes("#xywh")&&(m=h.Rb.payload.split("#xywh=")[1].split(","),4===m.length&&v.Wg({height:parseInt(m[3],10),positionX:parseInt(m[0],10),positionY:parseInt(m[1],10),width:parseInt(m[2],10)})),f.push(v);return b={id:w.bg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new _s(f),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.Je,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioChannelConfig:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Lt(t||"","")])},w.l==Sk?w.xd.push(b):w.i.imageStreams.push(b),Zl(w),S.return(Ln(b))}})},g_.kh=function(e,t,n){var r,i,o,a,s=this;return A(function(u){switch(u.g){case 1:if(s.l!=wk&&s.l!=Sk)throw V("Must call load() and wait for it to resolve before adding chapters tracks."),new He(1,7,7004);if(n){u.u(2);break}return d(u,Rl(s,e),3);case 3:n=u.h;case 2:return r=[],s.B&&(r=s.B.getCuePoints()),d(u,Dl(s,e,t,"chapters",n,"",r),4);case 4:if(i=u.h,o=s.vg(),!(a=o.find(function(e){return e.language==t}))){u.u(5);break}return d(u,new Promise(function(e,t){s.m.ta(i,"load",e),s.m.ta(i,"error",function(){t(new He(1,2,2015))})}),6);case 6:return Zl(s),u.return(a);case 5:throw V("Cannot add this text when loaded with src="),new He(1,2,2012)}})},g_.Qi=function(e,t){this.ba.width=e,this.ba.height=t},g_.Kf=function(e){if(this.l==wk){var t=this.j;if(e=void 0===e?.1:e,t.l.g)V("Unable to retry after StreamingEngine is destroyed!"),t=!1;else if(t.A)V("Unable to retry after StreamingEngine encountered a fatal error!"),t=!1;else{for(var n=a(t.i.values()),r=n.next();!r.done;r=n.next()){r=r.value;var i=Lu(r);!r.sd||r.Ta||r.xb||(K(i,"Retrying after failure..."),r.sd=!1,Iu(t,r,e))}t=!0}}else t=!1;return t},g_.jf=function(){return this.i},g_.Kh=function(){return this.Za},g_.Jf=function(){this.s&&this.s.Jf()},g_.xe=function(e){this.fh=e,this.s&&this.s.xe(e)},g_.Zg=function(e){this.ee=e},g_.Xd=function(e,t){if(this.l!=wk||!navigator.onLine)return!1;if(this.i.variants.some(function(t){return!(!(t=t[e.type])||t.id===e.id)&&("audio"!=e.type||e.language===t.language)})){for(var n=a(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var i=r[e.type];i&&i.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t,z("Disabled stream "+e.type+":"+e.id+" for "+t+" seconds..."))}return this.ne.Wa(1),t=this.sb().video.reduce(function(e,t){return e+t.end-t.start},0),Yl(this,!0,t,!0,!1),!0}return W("No alternate stream found for active "+e.type+" stream. Will ignore request to disable stream..."),!1},M("shaka.Player",Zc),Zc.prototype.setVideoContainer=Zc.prototype.Zg,Zc.prototype.setLicenceRequiredCallback=Zc.prototype.xe,Zc.prototype.requestLicence=Zc.prototype.Jf,Zc.prototype.getManifestParserFactory=Zc.prototype.Kh,Zc.prototype.getManifest=Zc.prototype.jf,Zc.prototype.retryStreaming=Zc.prototype.Kf,Zc.prototype.setMaxHardwareResolution=Zc.prototype.Qi,Zc.prototype.addChaptersTrack=Zc.prototype.kh,Zc.prototype.addThumbnailsTrack=Zc.prototype.mh,Zc.prototype.addTextTrackAsync=Zc.prototype.lh,Zc.prototype.getStats=Zc.prototype.getStats,Zc.prototype.getBufferedInfo=Zc.prototype.sb,Zc.prototype.getSegmentAvailabilityDuration=Zc.prototype.$d,Zc.prototype.getPresentationStartTimeAsDate=Zc.prototype.yg,Zc.prototype.getPlayheadTimeAsDate=Zc.prototype.Ph,Zc.prototype.setTextTrackVisibility=Zc.prototype.Vg,Zc.prototype.getChapters=Zc.prototype.Ch,Zc.prototype.getChaptersTracks=Zc.prototype.vg,Zc.prototype.isTextTrackVisible=Zc.prototype.qf,Zc.prototype.selectVariantsByLabel=Zc.prototype.Li,Zc.prototype.selectTextLanguage=Zc.prototype.Of,Zc.prototype.selectAudioLanguage=Zc.prototype.Pg,Zc.prototype.getTextLanguages=Zc.prototype.Th,Zc.prototype.getAudioLanguages=Zc.prototype.Ah,Zc.prototype.getTextLanguagesAndRoles=Zc.prototype.Uh,Zc.prototype.getAudioLanguagesAndRoles=Zc.prototype.Bh,Zc.prototype.selectVariantTrack=Zc.prototype.Pf,Zc.prototype.selectTextTrack=Zc.prototype.Qg,Zc.prototype.getThumbnails=Zc.prototype.zg,Zc.prototype.getAllThumbnails=Zc.prototype.zh,Zc.prototype.getImageTracks=Zc.prototype.Gh,Zc.prototype.getTextTracks=Zc.prototype.Cc,Zc.prototype.getVariantTracks=Zc.prototype.cc,Zc.prototype.cancelTrickPlay=Zc.prototype.bd,Zc.prototype.trickPlay=Zc.prototype.Gd,Zc.prototype.getPlaybackRate=Zc.prototype.bb,Zc.prototype.isBuffering=Zc.prototype.pf,Zc.prototype.getKeyStatuses=Zc.prototype.nd,Zc.prototype.getActiveSessionsMetadata=Zc.prototype.hf,Zc.prototype.getExpiration=Zc.prototype.md,Zc.prototype.drmInfo=Zc.prototype.drmInfo,Zc.prototype.keySystem=Zc.prototype.keySystem,Zc.prototype.goToLive=Zc.prototype.ai,Zc.prototype.seekRange=Zc.prototype.Nb,Zc.prototype.isAudioOnly=Zc.prototype.di,Zc.prototype.isInProgress=Zc.prototype.ec,Zc.prototype.isLive=Zc.prototype.U,Zc.prototype.getAdManager=Zc.prototype.tg,Zc.prototype.getAssetUri=Zc.prototype.Bc,Zc.prototype.getNetworkingEngine=Zc.prototype.Zb,Zc.prototype.getMediaElement=Zc.prototype.Mh,Zc.prototype.getManifestType=Zc.prototype.kf,Zc.prototype.getLoadMode=Zc.prototype.Jh,Zc.prototype.resetConfiguration=Zc.prototype.Fi,Zc.prototype.getBufferFullness=Zc.prototype.ug,Zc.prototype.getNonDefaultConfiguration=Zc.prototype.Nh,Zc.prototype.getConfiguration=Zc.prototype.getConfiguration,Zc.prototype.configure=Zc.prototype.configure,Zc.prototype.releaseAllMutexes=Zc.prototype.Bi,Zc.prototype.preload=Zc.prototype.preload,Zc.prototype.detachAndSavePreload=Zc.prototype.pg,Zc.prototype.unloadAndSavePreload=Zc.prototype.Ti,Zc.prototype.load=Zc.prototype.load,Zc.prototype.updateStartTime=Zc.prototype.Xi,Zc.prototype.unload=Zc.prototype.pc,Zc.prototype.detach=Zc.prototype.detach,Zc.prototype.attachCanvas=Zc.prototype.qh,Zc.prototype.attach=Zc.prototype.wc,Zc.probeSupport=function(e){e=void 0===e||e;var t,n,r,i,o,u,c;return A(function(l){switch(l.g){case 1:if(t={},!e){l.u(2);break}return d(l,io(),3);case 3:t=l.h;case 2:var f={};if(Ge())for(var h in WT)f[h]=!0;h=a(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var p=h.next();!p.done;p=h.next())p=p.value,f[p]=Ge()?!!WT[p]:ze(p);for(n=f,h='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(s(mT)),f={},h=a(h),p=h.next();!p.done;p=h.next()){p=p.value,f[p]=!!Xt(p)||(Ge()?te(p)||!!Pe(p):ze(p));var g=p.split(";")[0];f[g]=f[g]||f[p]}return r=f,d(l,ht(),4);case 4:i=l.h,o={manifest:n,media:r,drm:t,hardwareResolution:i},u=Tk;for(c in u)o[c]=u[c]();return l.return(o)}})},Zc.isBrowserSupported=function(){if(e.Promise||F("A Promise implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||lt("Trident/"))return!1;var t=ut();return!(t&&9>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Ge()||ze("application/x-mpegurl"))},Zc.setAdManagerFactory=function(e){kk=e},Zc.registerSupportPlugin=function(e,t){Tk[e]=t},Zc.prototype.destroy=Zc.prototype.destroy;var mk=0,bk=1,wk=2,Sk=3;Zc.LoadMode={DESTROYED:mk,NOT_LOADED:bk,MEDIA_SOURCE:wk,SRC_EQUALS:Sk},Zc.version="4.9.11-nmp-8";var _k=["","9"];I_=new function(e){this.g=e,this.i=oe,this.h=ae}(new re(Number(_k[0]),Number(_k[1])));var Tk={},kk=null;g_=pf.prototype,g_.getDuration=function(){return this.g.getDuration()},g_.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},g_.getRemainingTime=function(){return this.h.getRemainingTime()},g_.isPaused=function(){return this.i},g_.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},g_.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g_.canSkipNow=function(){return this.h.getAdSkippableState()},g_.skip=function(){return this.h.skip()},g_.pause=function(){return this.h.pause()},g_.play=function(){return this.h.resume()},g_.getVolume=function(){return this.h.getVolume()},g_.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},g_.isMuted=function(){return 0==this.h.getVolume()},g_.isLinear=function(){return this.g.isLinear()},g_.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},g_.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},g_.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},g_.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},g_.getTitle=function(){return this.g.getTitle()},g_.getDescription=function(){return this.g.getDescription()},g_.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},g_.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g_.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g_.getAdId=function(){return this.g.getAdId()},g_.getCreativeAdId=function(){return this.g.getCreativeAdId()},g_.getAdvertiserName=function(){return this.g.getAdvertiserName()},g_.getMediaUrl=function(){return this.g.getMediaUrl()},g_.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},g_.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},g_.release=function(){this.h=this.g=null},M("shaka.ads.ClientSideAd",pf),pf.prototype.release=pf.prototype.release,pf.prototype.getPodIndex=pf.prototype.getPodIndex,pf.prototype.getTimeOffset=pf.prototype.getTimeOffset,pf.prototype.getMediaUrl=pf.prototype.getMediaUrl,pf.prototype.getAdvertiserName=pf.prototype.getAdvertiserName,pf.prototype.getCreativeAdId=pf.prototype.getCreativeAdId,pf.prototype.getAdId=pf.prototype.getAdId,pf.prototype.getVastMediaWidth=pf.prototype.getVastMediaWidth,pf.prototype.getVastMediaHeight=pf.prototype.getVastMediaHeight,pf.prototype.getVastMediaBitrate=pf.prototype.getVastMediaBitrate,pf.prototype.getDescription=pf.prototype.getDescription,pf.prototype.getTitle=pf.prototype.getTitle,pf.prototype.getPositionInSequence=pf.prototype.getPositionInSequence,pf.prototype.getSequenceLength=pf.prototype.getSequenceLength,pf.prototype.setMuted=pf.prototype.setMuted,pf.prototype.resize=pf.prototype.resize,pf.prototype.isLinear=pf.prototype.isLinear,pf.prototype.isMuted=pf.prototype.isMuted,pf.prototype.setVolume=pf.prototype.setVolume,pf.prototype.getVolume=pf.prototype.getVolume,pf.prototype.play=pf.prototype.play,pf.prototype.pause=pf.prototype.pause,pf.prototype.skip=pf.prototype.skip,pf.prototype.canSkipNow=pf.prototype.canSkipNow,pf.prototype.getTimeUntilSkippable=pf.prototype.getTimeUntilSkippable,pf.prototype.isSkippable=pf.prototype.isSkippable,pf.prototype.isPaused=pf.prototype.isPaused,pf.prototype.getRemainingTime=pf.prototype.getRemainingTime,pf.prototype.getMinSuggestedDuration=pf.prototype.getMinSuggestedDuration,pf.prototype.getDuration=pf.prototype.getDuration,gf.prototype.configure=function(e){this.s=e},gf.prototype.stop=function(){this.g&&this.g.stop(),this.o&&Ec(this.o)},gf.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy(),this.C.destroy()},g_=Af.prototype,g_.getDuration=function(){return this.h.durationInSeconds},g_.getMinSuggestedDuration=function(){return this.getDuration()},g_.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},g_.isPaused=function(){return this.g.paused},g_.isSkippable=function(){return"number"==typeof this.j},g_.getTimeUntilSkippable=function(){if("number"!=typeof this.j)return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},g_.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},g_.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},g_.pause=function(){return this.g.pause()},g_.play=function(){return this.g.play()},g_.getVolume=function(){return this.g.volume},g_.setVolume=function(e){this.g.volume=e},g_.isMuted=function(){return this.g.muted},g_.isLinear=function(){return this.o},g_.resize=function(){},g_.setMuted=function(e){this.g.muted=e},g_.getSequenceLength=function(){return this.l?this.l:1},g_.getPositionInSequence=function(){return this.i?this.i:1},g_.getTitle=function(){return this.h.adTitle},g_.getDescription=function(){return""},g_.getVastMediaBitrate=function(){return 0},g_.getVastMediaHeight=function(){return 0},g_.getVastMediaWidth=function(){return 0},g_.getAdId=function(){return this.h.adId},g_.getCreativeAdId=function(){return this.h.creativeId},g_.getAdvertiserName=function(){return""},g_.getMediaUrl=function(){return null},g_.getTimeOffset=function(){return 0},g_.getPodIndex=function(){return 0},g_.release=function(){this.l=this.i=this.g=this.h=null},M("shaka.ads.MediaTailorAd",Af),Af.prototype.release=Af.prototype.release,Af.prototype.getPodIndex=Af.prototype.getPodIndex,Af.prototype.getTimeOffset=Af.prototype.getTimeOffset,Af.prototype.getMediaUrl=Af.prototype.getMediaUrl,Af.prototype.getAdvertiserName=Af.prototype.getAdvertiserName,Af.prototype.getCreativeAdId=Af.prototype.getCreativeAdId,Af.prototype.getAdId=Af.prototype.getAdId,Af.prototype.getVastMediaWidth=Af.prototype.getVastMediaWidth,Af.prototype.getVastMediaHeight=Af.prototype.getVastMediaHeight,Af.prototype.getVastMediaBitrate=Af.prototype.getVastMediaBitrate,Af.prototype.getDescription=Af.prototype.getDescription,Af.prototype.getTitle=Af.prototype.getTitle,Af.prototype.getPositionInSequence=Af.prototype.getPositionInSequence,Af.prototype.getSequenceLength=Af.prototype.getSequenceLength,Af.prototype.setMuted=Af.prototype.setMuted,Af.prototype.resize=Af.prototype.resize,Af.prototype.isLinear=Af.prototype.isLinear,Af.prototype.isMuted=Af.prototype.isMuted,Af.prototype.setVolume=Af.prototype.setVolume,Af.prototype.getVolume=Af.prototype.getVolume,Af.prototype.play=Af.prototype.play,Af.prototype.pause=Af.prototype.pause,Af.prototype.skip=Af.prototype.skip,Af.prototype.canSkipNow=Af.prototype.canSkipNow,Af.prototype.getTimeUntilSkippable=Af.prototype.getTimeUntilSkippable,Af.prototype.isSkippable=Af.prototype.isSkippable,Af.prototype.isPaused=Af.prototype.isPaused,Af.prototype.getRemainingTime=Af.prototype.getRemainingTime,Af.prototype.getMinSuggestedDuration=Af.prototype.getMinSuggestedDuration,Af.prototype.getDuration=Af.prototype.getDuration;var Ek=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;xf.prototype.stop=function(){for(var e=a(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Hb(t.target,t.type,t.listener);Df(this),this.m=[],this.s=[],this.G="",this.T=!0,this.I="",this.A=null,this.j=[],this.N=[],this.F.clear()},xf.prototype.release=function(){this.stop(),this.o&&this.o.release()},xf.prototype.onManifestUpdated=function(e){this.J=e,""!=this.G&&(Pf(this,this.G,this.T),this.T=!1)},xf.prototype.getCuePoints=function(){for(var e=[],t=a(this.j),n=t.next();!n.done;n=t.next()){n=a(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e},g_=Uf.prototype,g_.getDuration=function(){return this.i?this.i.duration:-1},g_.getMinSuggestedDuration=function(){return this.getDuration()},g_.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},g_.isPaused=function(){return this.h.paused},g_.isSkippable=function(){return this.g.isSkippable()},g_.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g_.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},g_.skip=function(){this.h.currentTime+=this.getRemainingTime()},g_.pause=function(){return this.h.pause()},g_.play=function(){return this.h.play()},g_.getVolume=function(){return this.h.volume},g_.setVolume=function(e){this.h.volume=e},g_.isMuted=function(){return this.h.muted},g_.isLinear=function(){return!0},g_.resize=function(){},g_.setMuted=function(e){this.h.muted=e},g_.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},g_.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},g_.getTitle=function(){return this.g.getTitle()},g_.getDescription=function(){return this.g.getDescription()},g_.getVastMediaBitrate=function(){return 0},g_.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g_.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g_.getAdId=function(){return this.g.getAdId()},g_.getCreativeAdId=function(){return this.g.getCreativeAdId()},g_.getAdvertiserName=function(){return this.g.getAdvertiserName()},g_.getMediaUrl=function(){return null},g_.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},g_.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},g_.release=function(){this.h=this.i=this.g=null},M("shaka.ads.ServerSideAd",Uf),Uf.prototype.release=Uf.prototype.release,Uf.prototype.getPodIndex=Uf.prototype.getPodIndex,Uf.prototype.getTimeOffset=Uf.prototype.getTimeOffset,Uf.prototype.getMediaUrl=Uf.prototype.getMediaUrl,Uf.prototype.getAdvertiserName=Uf.prototype.getAdvertiserName,Uf.prototype.getCreativeAdId=Uf.prototype.getCreativeAdId,Uf.prototype.getAdId=Uf.prototype.getAdId,Uf.prototype.getVastMediaWidth=Uf.prototype.getVastMediaWidth,Uf.prototype.getVastMediaHeight=Uf.prototype.getVastMediaHeight,Uf.prototype.getVastMediaBitrate=Uf.prototype.getVastMediaBitrate,Uf.prototype.getDescription=Uf.prototype.getDescription,Uf.prototype.getTitle=Uf.prototype.getTitle,Uf.prototype.getPositionInSequence=Uf.prototype.getPositionInSequence,Uf.prototype.getSequenceLength=Uf.prototype.getSequenceLength,Uf.prototype.setMuted=Uf.prototype.setMuted,Uf.prototype.resize=Uf.prototype.resize,Uf.prototype.isLinear=Uf.prototype.isLinear,Uf.prototype.isMuted=Uf.prototype.isMuted,Uf.prototype.setVolume=Uf.prototype.setVolume,Uf.prototype.getVolume=Uf.prototype.getVolume,Uf.prototype.play=Uf.prototype.play,Uf.prototype.pause=Uf.prototype.pause,Uf.prototype.skip=Uf.prototype.skip,Uf.prototype.canSkipNow=Uf.prototype.canSkipNow,Uf.prototype.getTimeUntilSkippable=Uf.prototype.getTimeUntilSkippable,Uf.prototype.isSkippable=Uf.prototype.isSkippable,Uf.prototype.isPaused=Uf.prototype.isPaused,Uf.prototype.getRemainingTime=Uf.prototype.getRemainingTime,Uf.prototype.getMinSuggestedDuration=Uf.prototype.getMinSuggestedDuration,Uf.prototype.getDuration=Uf.prototype.getDuration,g_=Bf.prototype,g_.configure=function(){},g_.stop=function(){this.B="",this.o=null,this.C=[]},g_.release=function(){this.stop(),this.h&&this.h.release()},g_.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},g_.getCuePoints=function(){return this.C},u(Hf,xr),g_=Hf.prototype,g_.setLocale=function(e){this.m=e},g_.configure=function(e){this.l=e,this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},g_.initClientSide=function(t,n,r){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new He(2,10,1e4);this.i&&this.i.release(),this.i=new gf(t,n,this.m,r,function(e){return Vf(i,e)}),this.i.configure(this.l)},g_.release=function(){this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),xr.prototype.release.call(this)},g_.onAssetUnload=function(){this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Er("ad-stopped")),this.j=new hf},g_.requestClientSideAds=function(e){if(!this.i)throw new He(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.G=Date.now()/1e3,t.l.requestAds(e)},g_.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new He(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},g_.initMediaTailor=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new xf(e,t,n,function(e){return Vf(r,e)})},g_.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new He(1,10,10005);var r=this.h;return n=void 0===n?"":n,r.l?e=Promise.reject(new He(1,10,10004)):(r.l=new vr,Cf(r,e,t),r.I=n||"",r.W=Date.now()/1e3,e=r.l),e},g_.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new He(1,10,10005);var t=this.h;t.G=e,t.i(new Er("ads-loaded",(new Map).set("loadTime",0)))},g_.initServerSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.dai)throw new He(2,10,10002);this.g&&this.g.release(),this.g=new Bf(t,n,this.m,function(e){return Vf(r,e)}),this.g.configure(this.l)},g_.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new He(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&F('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="4.9.11-nmp-8",n=this.g,n.j?e=Promise.reject(new He(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new vr,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},g_.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new He(1,10,10003);(e.mpt||e.mpv)&&F('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="4.9.11-nmp-8",this.g.g.replaceAdTagParameters(e)},g_.getServerSideCuePoints=function(){return ie("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},g_.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},g_.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},g_.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},g_.onDashTimedMetadata=function(e){this.g&&"urn:google:dai:2018"==e.schemeIdUri&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},g_.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},g_.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},M("shaka.ads.AdManager",Hf),Hf.prototype.onCueMetadataChange=Hf.prototype.onCueMetadataChange,Hf.prototype.onHlsTimedMetadata=Hf.prototype.onHlsTimedMetadata,Hf.prototype.onDashTimedMetadata=Hf.prototype.onDashTimedMetadata,Hf.prototype.onManifestUpdated=Hf.prototype.onManifestUpdated,Hf.prototype.getStats=Hf.prototype.getStats,Hf.prototype.getCuePoints=Hf.prototype.getCuePoints,Hf.prototype.getServerSideCuePoints=Hf.prototype.getServerSideCuePoints,Hf.prototype.replaceServerSideAdTagParameters=Hf.prototype.replaceServerSideAdTagParameters,Hf.prototype.requestServerSideStream=Hf.prototype.requestServerSideStream,Hf.prototype.initServerSide=Hf.prototype.initServerSide,Hf.prototype.addMediaTailorTrackingUrl=Hf.prototype.addMediaTailorTrackingUrl,Hf.prototype.requestMediaTailorStream=Hf.prototype.requestMediaTailorStream,Hf.prototype.initMediaTailor=Hf.prototype.initMediaTailor,Hf.prototype.updateClientSideAdsRenderingSettings=Hf.prototype.updateClientSideAdsRenderingSettings,Hf.prototype.requestClientSideAds=Hf.prototype.requestClientSideAds,Hf.prototype.onAssetUnload=Hf.prototype.onAssetUnload,Hf.prototype.release=Hf.prototype.release,Hf.prototype.initClientSide=Hf.prototype.initClientSide,Hf.prototype.configure=Hf.prototype.configure,Hf.prototype.setLocale=Hf.prototype.setLocale,Hf.ADS_LOADED="ads-loaded",Hf.AD_STARTED="ad-started",Hf.AD_FIRST_QUARTILE="ad-first-quartile",Hf.AD_MIDPOINT="ad-midpoint",Hf.AD_THIRD_QUARTILE="ad-third-quartile",Hf.AD_COMPLETE="ad-complete",Hf.AD_STOPPED="ad-stopped",Hf.AD_SKIPPED="ad-skipped",Hf.AD_VOLUME_CHANGED="ad-volume-changed",Hf.AD_MUTED="ad-muted",Hf.AD_PAUSED="ad-paused",Hf.AD_RESUMED="ad-resumed",Hf.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Hf.CUEPOINTS_CHANGED="ad-cue-points-changed",Hf.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Hf.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Hf.AD_CLICKED="ad-clicked",Hf.AD_PROGRESS="ad-progress",Hf.AD_BUFFERING="ad-buffering",Hf.AD_IMPRESSION="ad-impression",Hf.AD_DURATION_CHANGED="ad-duration-changed",Hf.AD_CLOSED="ad-closed",Hf.AD_LOADED="ad-loaded",Hf.ALL_ADS_COMPLETED="all-ads-completed",Hf.AD_LINEAR_CHANGED="ad-linear-changed",Hf.AD_METADATA="ad-metadata",Hf.AD_RECOVERABLE_ERROR="ad-recoverable-error",Hf.AD_ERROR="ad-error",Hf.AD_BREAK_READY="ad-break-ready",Hf.AD_INTERACTION="ad-interaction",kk=function(){return new Hf};var Ak="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),xk="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Ck=["loop","playbackRate"],Pk=["pause","play"],Ik={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},jk={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Mk={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},Ok=[["getConfiguration","configure"]],Rk=[["isTextTrackVisible","setTextTrackVisibility"]],Dk="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Lk=["attach","attachCanvas","detach","load","unload"];g_=Gf.prototype,g_.destroy=function(){return Hk.delete(this),Zf(this),Bk&&$f(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.C=this.B=this.l=this.i=this.g=this.o=null,Promise.resolve()},g_.Ba=function(){return this.h},g_.Hf=function(){return this.J},g_.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.oc();var t=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);t=new chrome.cast.ApiConfig(t,function(e){for(var t=a(Hk),n=t.next();!n.done;n=t.next())Jf(n.value,e)},function(e){for(var t=a(Hk),n=t.next();!n.done;n=t.next()){n=n.value;var r=e;q("CastSender: receiver status",r),Uk="available"==r,n.j.oc()}},"origin_scoped"),chrome.cast.initialize(t,function(){q("CastSender: init")},function(e){V("CastSender: init error",e)}),Uk&&this.j.X(Nk),(t=Bk)&&t.status!=chrome.cast.SessionStatus.STOPPED?(q("CastSender: re-using existing connection"),Jf(this,t)):Bk=null}else e.__onGCastApiAvailable!==td&&(Fk=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=td)},g_.Qf=function(e){this.o=e,this.h&&ed(this,{type:"appData",appData:this.o})},g_.cast=function(){var e=this;return A(function(t){if(!e.m)throw new He(1,8,8e3);if(!Uk)throw new He(1,8,8001);if(e.h)throw new He(1,8,8002);return e.l=new vr,chrome.cast.requestSession(function(t){return Xf(e,t)},function(t){return Yf(e,t)}),d(t,e.l,0)})},g_.Ac=function(){if(this.h){if(Zf(this),Bk){$f(this);try{Bk.stop(function(){},function(){})}catch(e){}Bk=null}Qf(this)}},g_.get=function(e,t){var n=this;if("video"==e){if(Pk.includes(t))return function(){return n.Ng.apply(n,[e,t].concat(s(x.apply(0,arguments))))}}else if("player"==e){if(Mk[t]&&!this.get("player","isLive")())return function(){};if(Dk.includes(t))return function(){return n.Ng.apply(n,[e,t].concat(s(x.apply(0,arguments))))};if(Lk.includes(t))return function(){return n.Ci.apply(n,[e,t].concat(s(x.apply(0,arguments))))};if(Ik[t]||jk[t])return function(){return n.g[e][t]}}return this.g[e][t]},g_.set=function(e,t,n){this.g[e][t]=n,ed(this,{type:"set",targetName:e,property:t,value:n})},g_.Ng=function(e,t){ed(this,{type:"call",targetName:e,methodName:t,args:x.apply(2,arguments)})},g_.Ci=function(e,t){var n=x.apply(2,arguments),r=new vr,i=this.I.toString();this.I++,this.i[i]=r;try{ed(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i})}catch(e){r.reject(e)}return r};var Nk=.02,Uk=!1,Bk=null,Fk=null,Hk=new Set;u(nd,xr),g_=nd.prototype,g_.destroy=function(e){return e&&this.g.Ac(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,xr.prototype.release.call(this),Promise.all(e)},g_.Zh=function(){return this.l},g_.Oh=function(){return this.s},g_.rh=function(){return this.g.m&&Uk},g_.Ba=function(){return this.g.Ba()},g_.Hf=function(){return this.g.Hf()},g_.cast=function(){var e=this;return A(function(t){return 1==t.g?d(t,e.g.cast(),2):e.h?d(t,e.h.pc(),0):t.return()})},g_.Qf=function(e){this.g.Qf(e)},g_.Si=function(){zf(this.g)},g_.Ac=function(){this.g.Ac()},g_.sh=function(e,t){t=void 0!==t&&t;var n=this;return A(function(r){if(1==r.g)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.Ac(),d(r,n.g.destroy(),2));n.g=null,n.g=new Gf(e,function(){return sd(n)},function(){return ud(n)},function(e,t){return dd(n,e,t)},function(){return cd(n)},function(){return ad(n)},t),n.g.init(),h(r)})},M("shaka.cast.CastProxy",nd),nd.prototype.changeReceiverId=nd.prototype.sh,nd.prototype.forceDisconnect=nd.prototype.Ac,nd.prototype.suggestDisconnect=nd.prototype.Si,nd.prototype.setAppData=nd.prototype.Qf,nd.prototype.cast=nd.prototype.cast,nd.prototype.receiverName=nd.prototype.Hf,nd.prototype.isCasting=nd.prototype.Ba,nd.prototype.canCast=nd.prototype.rh,nd.prototype.getPlayer=nd.prototype.Oh,nd.prototype.getVideo=nd.prototype.Zh,nd.prototype.destroy=nd.prototype.destroy,u(hd,xr),g_=hd.prototype,g_.isConnected=function(){return this.F},g_.ei=function(){return this.o},g_.Oi=function(e){this.i=e},g_.wh=function(){this.i=null},g_.Pi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},g_.Ni=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},g_.Mi=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},g_.destroy=function(){var e,t,n=this;return A(function(r){if(1==r.g)return n.j&&(n.j.release(),n.j=null),e=[],n.h&&(e.push(n.h.destroy()),n.h=null),n.G&&(n.G.stop(),n.G=null),n.g=null,n.I=null,n.C=null,n.F=!1,n.o=!0,n.l=null,n.s=null,xr.prototype.release.call(n),d(r,Promise.all(e),2);t=cast.receiver.CastReceiverManager.getInstance(),t.stop(),h(r)})},M("shaka.cast.CastReceiver",hd),hd.prototype.destroy=hd.prototype.destroy,hd.prototype.setContentArtist=hd.prototype.Mi,hd.prototype.setContentImage=hd.prototype.Ni,hd.prototype.setContentTitle=hd.prototype.Pi,hd.prototype.clearContentMetadata=hd.prototype.wh,hd.prototype.setContentMetadata=hd.prototype.Oi,hd.prototype.isIdle=hd.prototype.ei,hd.prototype.isConnected=hd.prototype.isConnected;var Vk=.5,Wk=5,Kk="IDLE",qk="PLAYING",Gk="BUFFERING",zk="PAUSED",Xk=0,Yk=1,Jk=2,$k=3,Qk=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),Zk=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),eE=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),tE=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),nE=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]),rE=0,iE=1,oE=3,aE=4,sE="black green blue cyan red yellow magenta black".split(" "),uE="white green blue cyan red yellow magenta white_italics".split(" ");Hd.prototype.isVisible=function(){return this.l};var cE=0,lE=1,fE=2,dE=0,hE=1,pE=2,gE=3,yE=4,vE=5,mE=6,bE=7,wE=8;Yd.prototype.na=function(){return this.g<this.h.length},Yd.prototype.sa=function(){return this.g},Yd.prototype.skip=function(e){if(this.g+e>this.h.length)throw new He(2,2,3e3);this.g+=e};var SE=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),_E="black blue green cyan red magenta yellow white".split(" ");rh.prototype.clear=function(){q("Clearing CEA decoder"),this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,ih(this),e=a(this.j.values());for(var t=e.next();!t.done;t=e.next())th(t.value)},rh.prototype.extract=function(e,t){if(this.B){q("Setting first pts value to",t);for(var n=a(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new Gr(e,0),!(8>e.getLength())&&181===e.R()&&49===e.ka()&&1195456820===e.O()&&3===e.R()&&0!=(64&(n=e.R())))for(n&=31,e.skip(1),r=0;r<n;r++){var i=e.R(),o=(4&i)>>2,s=e.R(),u=e.R();o&&(i&=3,0===i||1===i?this.h.push({pts:t,type:i,$a:s,yb:u,order:this.h.length}):(this.g.push({pts:t,type:i,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:u,order:this.g.length})))}},rh.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=a(this.h),r=n.next();!r.done;r=n.next())(r=oh(this,r.value))&&t.push(r);for(n=a(this.g),r=n.next();!r.done;r=n.next())Xd(this.i,r.value);for(n=a(this.i.i),r=n.next();!r.done;r=n.next())r=ah(this,r.value),t.push.apply(t,s(r));return this.i.i=[],this.h=[],this.g=[],t},rh.prototype.getStreams=function(){return Array.from(this.A)},M("shaka.cea.CeaDecoder",rh),M_=function(){return new rh},ch.prototype.init=function(e){function t(e){(e=e.name)in AE&&(n.g=AE[e])}var n=this,r=[],i=[];if((new Xr).box("moov",Yr).box("mvex",Yr).P("trex",function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.O(),t=t.O(),n.h=e,n.i=t}).box("trak",Yr).P("tkhd",function(e){e=Xo(e.reader,e.version),r.push(e.trackId)}).box("mdia",Yr).P("mdhd",function(e){e=Go(e.reader,e.version),i.push(e.timescale)}).box("minf",Yr).box("stbl",Yr).P("stsd",Jr).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvav",t).box("dva1",t).box("dvh1",t).box("dvhe",t).box("encv",$r).box("sinf",Yr).box("frma",function(e){(e=Jo(e.reader).Ha)in AE&&(n.g=AE[e])}).parse(e,!0),!r.length||!i.length||r.length!=i.length)throw new He(2,2,2010);this.g==TE&&F("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(e,t){n.j.set(e,i[t])})},ch.prototype.parse=function(e){var t=this;if(this.g==TE)return[];var n=[],r=0,i=[];return(new Xr).box("moof",function(e){r=e.start,i=[],Yr(e)}).box("traf",function(e){i.push({baseMediaDecodeTime:null,gd:t.h,Wd:t.i,Kg:[],timescale:9e4}),Yr(e)}).P("trun",function(e){var t=i[i.length-1];e=zo(e.reader,e.version,e.flags),t.Kg.push(e)}).P("tfhd",function(e){var n=i[i.length-1];e=Ko(e.reader,e.flags),n.gd=e.gd||t.h,n.Wd=e.Wd||t.i,e=e.trackId,t.j.has(e)&&(n.timescale=t.j.get(e))}).P("tfdt",function(e){var t=i[i.length-1];e=qo(e.reader,e.version),t.baseMediaDecodeTime=e.baseMediaDecodeTime}).box("mdat",function(e){for(var o=r-e.start-8,s=e.reader.sa(),u=a(i),c=u.next();!c.done;c=u.next()){if(c=c.value,null===c.baseMediaDecodeTime)throw F("Unable to find base media decode time for CEA captions!"),new He(2,2,2010);e.reader.seek(s),lh(t,e.reader,c.baseMediaDecodeTime,c.timescale,c.gd,c.Wd,o,c.Kg,n)}}).parse(e,!1),n},M("shaka.cea.Mp4CeaParser",ch);var TE=0,kE=1,EE=2,AE={avc1:kE,avc3:kE,hev1:EE,hvc1:EE,dvav:kE,dva1:kE,dvh1:EE,dvhe:EE};j_["video/mp4"]=function(){return new ch},fh.prototype.init=function(){},fh.prototype.parse=function(e){this.g?this.g.clearData():this.g=new da;var t=[];if(e=he(e),!va(e))return t;e=this.g.parse(e);var n=e.ld(),r=e.ae();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=a(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&null!=r.time)for(var i=a(uh(r.data)),o=i.next();!o.done;o=i.next())t.push({packet:o.value,pts:r.time});return t},M("shaka.cea.TsCeaParser",fh),j_["video/mp2t"]=function(){return new fh};var xE=1,CE=(new Map).set("com.widevine.alpha",function(e){var t=yi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=di(t))?t:(e=yi(e.node,"urn:microsoft","laurl"))?St(e.attributes.licenseUrl)||"":""}).set("com.microsoft.playready",yh).set("com.microsoft.playready.recommendation",yh).set("com.microsoft.playready.software",yh).set("com.microsoft.playready.hardware",yh).set("org.w3.clearkey",function(e){var t=yi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=di(t))?t:(e=yi(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.attributes.Lic_type&&e&&(e=di(e))?e:""});jh.prototype.na=function(){return this.g.na()};var PE=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];u(ip,_s),g_=ip.prototype,g_.getNumReferences=function(){return this.h?this.h.timeline.length:0},g_.release=function(){_s.prototype.release.call(this),this.h=null},g_.Ia=function(e){if(this.h){q(this.A+" Evicting at "+e);for(var t=0,n=this.h.timeline,r=0;r<n.length;r+=1){var i=n[r],o=i.end+this.i;if(i=i.start+this.i,!(o<=e))break;q("Evicting "+i+" - "+o),t+=1}0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,0===this.getNumReferences()&&this.release())}},g_.find=function(e){if(q("Find "+e),this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var i=t[r],o=i.start+this.i;if(i=r<n?t[r+1].start+this.i:1/0===this.l?i.end+this.i:this.l,e>=o&&e<i)return r+this.j}return null},g_.get=function(e){var t=this;if(0>(e-=this.j)||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=this.h.Fc,i=this.h.timeline[e],o=i.Ki,a=this.h.cg+i.dg;n=this.i-this.h.Fb;var s=this.i+i.end,u=s;e===this.getNumReferences()-1&&1/0!==this.l&&(u=this.l);for(var c=this.h.codecs,l=this.h.mimeType,f=[],d=(i.end-i.start)/i.vb,h={},p=0;p<i.vb;h={$c:h.$c,He:h.He},p++){var g=i.start+d*p,y=g+d;h.He=p+1,h.$c=null,g=new Po(this.i+g,this.i+y,function(e){return function(){return t.h?(null==e.$c&&(e.$c=up(t.h.Fc,t.A,o,t.C,a,e.He,t.F)),e.$c):[]}}(h),0,null,this.s,n,this.i,this.l,[],"",null,null,qT,this.B),g.codecs=c,g.mimeType=l,0==this.G?0<p&&g.ie():0!=p%this.G&&g.ie(),f.push(g)}n=new Po(this.i+i.start,u,function(){return 0<i.vb?[]:up(r,t.A,o,t.C,a,null,t.F)},0,null,this.s,n,this.i,this.l,f,"",null,null,qT,this.B,0<i.vb),n.codecs=c,n.mimeType=l,n.i=s,this.g[e]=n}return n},pp.prototype.configure=function(e){this.o=e},pp.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),null!=this.g&&(this.g.stop(),this.g=null),this.G.destroy()},pp.prototype.setManifestType=function(e){this.s=e},pp.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)},g_=wp.prototype,g_.release=function(){for(var e=a(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},g_.Yh=function(){return this.j},g_.lf=function(){return this.l.slice()},g_.Fh=function(){return this.i},g_.Qe=function(e,t,n){n=void 0!==n&&n;var r,i,o,s,u,c,l,f,p,g,y,v,m,b,w,S,_,T,k,E,x,C,P,I,j,M,O,R,D,L,N=this;return A(function(A){if(1==A.g){if(r=pT,!t&&1==e.length)return i=Sp(e,!1),o=i.jg,s=i.dh,u=i.$g,c=i.Bg,N.h=Array.from(o[0].values()),N.g=Array.from(s[0].values()),N.l=Array.from(u[0].values()),N.i=Array.from(c[0].values()),A.u(2);for(l=n?N.m.size:0,f=-1,p=0;p<e.length;p++)g=e[p],N.m.has(g.id)||(N.m.add(g.id),-1==f&&(f=p));return-1==f?A.return():(y=Sp(e,!0),v=y.jg,m=y.dh,b=y.$g,w=y.Bg,d(A,Promise.all([Tp(N,N.h,v,f,Cp,Ip,l),Tp(N,N.g,m,f,Cp,Ip,l),Tp(N,N.l,b,f,Cp,Ip,l),Tp(N,N.i,w,f,Cp,Ip,l)]),2))}if(S=0,_=[],N.g.length&&N.h.length)for(P=a(N.h),I=P.next();!I.done;I=P.next())for(j=I.value,M=a(N.g),O=M.next();!O.done;O=M.next())R=O.value,D=uo(j.drmInfos,R.drmInfos),j.drmInfos.length&&R.drmInfos.length&&!D.length?W("Incompatible DRM in audio & video, skipping variant creation.",j,R):(L=S++,_.push({id:L,language:j.language,disabledUntilTime:0,primary:j.primary,audio:j,video:R,label:R.label,bandwidth:(j.bandwidth||0)+(R.bandwidth||0),drmInfos:D,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(T=N.g.length?N.g:N.h,k=a(T),E=k.next();!E.done;E=k.next())x=E.value,C=S++,_.push({id:C,language:x.language,disabledUntilTime:0,primary:x.primary,audio:x.type==r.V?x:null,video:x.type==r.ga?x:null,bandwidth:x.bandwidth||0,drmInfos:x.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});N.j=_,h(A)})},g_.Rg=function(e){this.o=e},g_.Xg=function(e){this.s=e},M("shaka.util.PeriodCombiner",wp),wp.prototype.setUseStreamOnce=wp.prototype.Xg,wp.prototype.setAllowMultiTypeVariants=wp.prototype.Rg,wp.prototype.combinePeriods=wp.prototype.Qe,wp.prototype.getImageStreams=wp.prototype.Fh,wp.prototype.getTextStreams=wp.prototype.lf,wp.prototype.getVariants=wp.prototype.Yh;var IE=1,jE=0,ME=-1,OE=new Map,RE=new Ve(function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}});g_=Zp.prototype,g_.configure=function(e){var t=this.i&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.l&&this.l.presentationTimeline.U()&&this.G.oc(),this.h&&this.h.configure(this.g),this.m&&(this.m.Rg(this.g.dash.multiTypeVariantsAllowed&&ne()),this.m.Xg(this.g.dash.useStreamOnceInPeriodFlattening))},g_.start=function(e,t){var n,r=this;return A(function(i){if(1==i.g)return r.C=t.isLowLatencyMode(),r.A=[e],r.i=t,d(i,eg(r),2);if(n=i.h,r.i&&yg(r,n),!r.i)throw new He(2,7,7001);return i.return(r.l)})},g_.stop=function(){for(var e=a(Object.values(this.s)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.i=null,this.A=[],this.l=null,this.s={},this.o.clear(),this.j={me:"",type:"",profiles:[],Cb:null,Da:0,Aa:null,Cd:0},this.m=null,null!=this.G&&(this.G.stop(),this.G=null),this.h&&this.h.destroy(),this.K.destroy()},g_.update=function(){var e,t=this;return A(function(n){return 1==n.g?(p(n,2),d(n,eg(t),4)):2!=n.g?y(n,0):(e=v(n),t.i&&e?(t.i.onError(e),void h(n)):n.return())})},g_.onExpirationUpdated=function(){},g_.onInitialVariantChosen=function(e){if(this.l&&this.l.presentationTimeline.U()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.l.presentationTimeline.Mb();var n=t.segmentIndex.find(e);null!=n&&(t=t.segmentIndex.get(n))&&(this.F=t.endTime-e,yg(this,0))}}},g_.banLocation=function(e){this.h&&this.h.banLocation(e)},M("shaka.dash.DashParser",Zp),WT["application/dash+xml"]=function(){return new Zp},WT["video/vnd.mpeg.dash.mpd"]=function(){return new Zp},M("shaka.dependencies",Cg),Cg.has=function(e){return NE.has(e)},Cg.add=function(e,t){if(!LE[e])throw Error(e+" is not supported");e==DE?ie("mux.js","mux.js is no longer used in Shaka Player."):NE.set(e,function(){return t})};var DE="muxjs",LE={bk:DE,ISOBoxer:"ISOBoxer"};Cg.Allowed=LE;var NE=new Map([["ISOBoxer",function(){return e.ISOBoxer}]]);Ig.prototype.toString=function(e){function t(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(t){return!e||!e.has(t.name)}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};var UE="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),BE="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");M("shaka.net.DataUriPlugin",Gg),Gg.parse=zg,jr("data",zg),g_=Yg.prototype,g_.configure=function(e){this.g=e,this.l&&this.l.configure(this.g)},g_.start=function(e,t){var n,r=this;return A(function(i){return 1==i.g?(r.i=t,r.F=t.isLowLatencyMode(),d(i,Gy(r,[e]),2)):3!=i.g?(n=i.h,r.L=n.uri,d(i,ty(r,n.data,e),3)):i.return(r.o)})},g_.stop=function(){this.B&&(this.B.stop(),this.B=null);var e=[];return this.W&&(e.push(this.W.destroy()),this.W=null),this.g=this.i=null,this.Ya.clear(),this.o=null,this.h.clear(),this.J.clear(),this.I.clear(),this.s.clear(),this.ba.clear(),this.fa.clear(),this.K.clear(),this.la.clear(),this.qa.clear(),this.l&&this.l.destroy(),Promise.all(e)},g_.update=function(){var e,t,n,r,i,o,u,c,l,f=this;return A(function(p){if(1==p.g){if(!Xy(f))return p.return();for(e=[],t=Array.from(f.h.values()),f.m=1/0,n=t.filter(function(e){return e.stream.segmentIndex}),r=a(n),i=r.next();!i.done;i=r.next())o=i.value,e.push($g(f,o));return d(p,Promise.all(e),2)}Ay(f,n.map(function(e){return e.stream})),u=n.some(function(e){return 0==e.rd}),n.length&&!u&&(c=GE,Yy(f,c.jh),l=n.map(function(e){return e.Bb}),f.j.Va(Math.min.apply(Math,s(l))),f.i.updateDuration()),u&&ry(f),h(p)})},g_.onExpirationUpdated=function(){},g_.onInitialVariantChosen=function(){},g_.banLocation=function(e){this.l&&this.l.banLocation(e)},M("shaka.hls.HlsParser",Yg);var FE={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},HE={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},VE={"com.apple.streamingkeydelivery":function(e,t){if("video/mp2t"==t)throw new He(2,4,4040);if(dt())throw new He(2,4,4041);return e=Rg(e,"METHOD"),t=["SAMPLE-AES","SAMPLE-AES-CTR"],t.includes(e)?(t="cenc","SAMPLE-AES"==e&&(t="cbcs"),It("com.apple.fps",t,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])):(V("FairPlay in HLS is only supported with [",t.join(", "),"], not",e),null)},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Rg(e,"METHOD"),n=["SAMPLE-AES","SAMPLE-AES-CTR"];return n.includes(t)?(n="cenc","SAMPLE-AES"==t&&(n="cbcs"),t=Rg(e,"URI"),t=Xg(t.split("?")[0]),t=he(t.data),n=It("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=Og(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n):(V("Widevine in HLS is only supported with [",n.join(", "),"], not",t),null)},"com.microsoft.playready":function(e){var t=Rg(e,"METHOD"),n=["SAMPLE-AES","SAMPLE-AES-CTR"];return n.includes(t)?(n="cenc","SAMPLE-AES"==t&&(n="cbcs"),e=Rg(e,"URI"),e=Xg(e.split("?")[0]),e=he(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=ii(e,t,new Set,0),It("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])):(V("PlayReady in HLS is only supported with [",n.join(", "),"], not",t),null)}},WE="VOD",KE="EVENT",qE="LIVE",GE={jh:WE,ij:KE,rj:qE};WT["application/x-mpegurl"]=function(){return new Yg},WT["application/vnd.apple.mpegurl"]=function(){return new Yg};var zE=1,XE=(new Map).set("com.microsoft.playready",ev).set("com.microsoft.playready.recommendation",ev).set("com.microsoft.playready.software",ev).set("com.microsoft.playready.hardware",ev),YE=!1,JE=Math.pow(2,32)-1,$E={},QE=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ZE=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),eA=new Uint8Array([0,0,0,0,0,0,0,0]),tA=new Uint8Array([0,0,0,0,0,0,0,0]),nA=new Uint8Array([0,0,0,0,0,0,0,0]),rA=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),iA=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),oA=new Uint8Array([0,0,0,0,0,0,0,0]),aA=new Uint8Array([0,0,0,0,0,0,0,1]),sA=new Uint8Array([]),uA=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),cA=new Uint8Array([]);g_=hv.prototype,g_.configure=function(e){this.g=e},g_.start=function(e,t){var n=this;return A(function(r){if(1==r.g)return n.l=[e],n.h=t,d(r,gv(n),2);if(!n.h)throw new He(2,7,7001);return r.return(n.j)})},g_.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.o&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},g_.update=function(){var e,t=this;return A(function(n){return 1==n.g?(p(n,2),d(n,gv(t),4)):2!=n.g?y(n,0):(e=v(n),t.h&&e?(t.h.onError(e),void h(n)):n.return())})},g_.onExpirationUpdated=function(){},g_.onInitialVariantChosen=function(){},g_.banLocation=function(){},M("shaka.mss.MssParser",hv);var lA="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),fA={CAPT:"main",SUBT:"alternate",DESC:"main"};WT["application/vnd.ms-sstr+xml"]=function(){return new hv},M("shaka.net.HttpFetchPlugin",_v),_v.isSupported=Av,_v.parse=Tv;var dA=e.fetch,hA=e.AbortController,pA=e.ReadableStream,gA=e.Headers;Av()&&(jr("http",Tv,2,!0),jr("https",Tv,2,!0),jr("blob",Tv,2,!0)),M("shaka.net.HttpXHRPlugin",xv),xv.parse=Cv;var yA=e.XMLHttpRequest;jr("http",Cv,1,!0),jr("https",Cv,1,!0),jr("blob",Cv,1,!0),Ov.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},Dv.prototype.destroy=function(){return this.i.destroy()},Hv.prototype.abort=function(){var e=this;return A(function(t){if(1==t.g){try{e.i.abort()}catch(e){}return p(t,2),d(t,e.g,4)}if(2!=t.g)return y(t,0);v(t),h(t)})},Hv.prototype.store=function(){return this.h},Hv.prototype.promise=function(){return this.g},Wv.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},g_=Gv.prototype,g_.destroy=function(){return this.h.destroy()},g_.hasFixedKeySpace=function(){return!0},g_.addSegments=function(){return Xv(this.i)},g_.removeSegments=function(e,t){return Yv(this,this.i,e,t)},g_.getSegments=function(e){var t,n=this;return A(function(r){return 1==r.g?d(r,Jv(n,n.i,e),2):(t=r.h,r.return(t.map(function(e){return n.mg(e)})))})},g_.addManifests=function(){return Xv(this.g)},g_.updateManifest=function(){return Promise.reject(new He(2,9,9016,"Cannot modify values in "+this.g))},g_.updateManifestExpiration=function(e,t){var n=Kv(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},g_.removeManifests=function(e,t){return Yv(this,this.g,e,t)},g_.getManifests=function(e){var t,n=this;return A(function(r){return 1==r.g?d(r,Jv(n,n.g,e),2):(t=r.h,r.return(Promise.all(t.map(function(e){return n.dd(e)}))))})},g_.getAllManifests=function(){var e,t,n=this;return A(function(r){return 1==r.g?(e=qv(n.h,n.g,"readonly"),t=new Map,d(r,Vv(e,function(e,r){var i;return A(function(o){if(1==o.g)return d(o,n.dd(r),2);i=o.h,t.set(e,i),h(o)})}),2)):3!=r.g?d(r,e.promise(),3):r.return(t)})},g_.mg=function(e){return e},g_.dd=function(e){return Promise.resolve(e)},g_.add=function(e,t){var n,r,i,o,s,u,c,l=this;return A(function(f){if(1==f.g){for(n=Kv(l.h,e),r=n.store(),i=[],o={},s=a(t),u=s.next();!u.done;o={Od:o.Od},u=s.next())c=u.value,o.Od=r.add(c),o.Od.onsuccess=function(e){return function(){i.push(e.Od.result)}}(o);return d(f,n.promise(),2)}return f.return(i)})},$v.prototype.destroy=function(){return this.g.destroy()},$v.prototype.getAll=function(){var e,t,n=this;return A(function(r){return 1==r.g?(e=qv(n.g,"session-ids","readonly"),t=[],d(r,Vv(e,function(e,n){t.push(n)}),2)):3!=r.g?d(r,e.promise(),3):r.return(t)})},$v.prototype.add=function(e){var t=Kv(this.g,"session-ids"),n=t.store();e=a(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},$v.prototype.remove=function(e){var t,n=this;return A(function(r){return 1==r.g?(t=Kv(n.g,"session-ids"),d(r,Vv(t,function(t,n,r){e.includes(n.sessionId)&&r.delete()}),2)):d(r,t.promise(),0)})},Qv.prototype.destroy=function(){for(var e=[],t=a(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Qv.prototype.init=function(){var e=this;vA.forEach(function(t,n){(t=t())?e.g.set(n,t):K("Skipping "+n+" as it is not supported on this platform")});for(var t=[],n=a(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},M("shaka.offline.StorageMuxer",Qv),Qv.unregister=function(e){vA.delete(e)},Qv.register=om,Qv.prototype.destroy=Qv.prototype.destroy;var vA=new Map;u(am,Gv),am.prototype.updateManifestExpiration=function(e,t){var n,r,i,o=this;return A(function(a){return n=Kv(o.h,o.g),r=n.store(),i=new vr,r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new He(2,9,9012,"Could not find values for "+e))},d(a,Promise.all([n.promise(),i]),0)})},am.prototype.dd=function(e){var t,n,r,i,o,a;return A(function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime,o=sm(e.periods[n],i),t.push(o);return d(s,_p(t),2)}return a=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:a,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})},am.prototype.mg=function(e){return{data:e.data}},u(fm,Gv),fm.prototype.dd=function(e){var t,n,r,i,o,s;return A(function(u){if(1==u.g){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime;for(var c=e.periods[n],l=[],f=a(c.streams),h=f.next();!h.done;h=f.next())h=h.value,0!=h.variantIds.length&&l.push(dm(h,c.startTime,c.startTime+i));o=l,t.push(o)}return d(u,_p(t),2)}return s=u.h,u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})},u(hm,Gv),g_=hm.prototype,g_.hasFixedKeySpace=function(){return!1},g_.addSegments=function(e){return this.add(this.i,e)},g_.addManifests=function(e){return this.add(this.g,e)},g_.updateManifest=function(e,t){return zv(this,e,t)},g_.dd=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},g_=pm.prototype,g_.init=function(){var t=this,n=new vr,r=!1,i=new qe(function(){r=!0,n.reject(new He(2,9,9017))});i.X(5);var o=e.indexedDB.open("shaka_offline_db",5);return o.onsuccess=function(){if(!r){var e=o.result;t.l=e;var a=e.objectStoreNames;a.contains("manifest")&&a.contains("segment")?(q("Mounting v1 idb storage cell"),a=new am(e,"segment","manifest")):a=null,t.g=a,a=e.objectStoreNames,a.contains("manifest-v2")&&a.contains("segment-v2")?(q("Mounting v2 idb storage cell"),a=new fm(e,"segment-v2","manifest-v2")):a=null,t.h=a,a=e.objectStoreNames,a.contains("manifest-v3")&&a.contains("segment-v3")?(q("Mounting v3 idb storage cell"),a=new fm(e,"segment-v3","manifest-v3")):a=null,t.i=a,a=e.objectStoreNames,a.contains("manifest-v5")&&a.contains("segment-v5")?(q("Mounting v5 idb storage cell"),a=new hm(e,"segment-v5","manifest-v5")):a=null,t.j=a,e.objectStoreNames.contains("session-ids")?(q("Mounting session ID idb storage cell"),e=new $v(e)):e=null,t.m=e,i.stop(),n.resolve()}},o.onupgradeneeded=function(){for(var e=o.result,t=a(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},o.onerror=function(e){r||(n.reject(new He(2,9,9001,o.error)),i.stop(),e.preventDefault())},n},g_.destroy=function(){var e=this;return A(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return d(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return d(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return d(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return d(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return d(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),h(t)}})},g_.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},g_.getEmeSessionCell=function(){return this.m},g_.erase=function(){var e=this;return A(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return d(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return d(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return d(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return d(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),d(t,gm(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,d(t,e.init(),0)}})},om("idb",function(){return tt()||Ye()||!e.indexedDB?null:new pm}),ym.prototype.kb=function(){return this.i},ym.prototype.Ea=function(){return this.h},ym.prototype.key=function(){return this.l},ym.prototype.toString=function(){return this.j},g_=km.prototype,g_.configure=function(){},g_.start=function(e,t){var n,r,i,o,a,s,u,c=this;return A(function(l){switch(l.g){case 1:if(n=vm(e),c.g=n,null==n||"manifest"!=n.g)throw new He(2,1,9004,e);return r=new Qv,g(l,2),d(l,r.init(),4);case 4:return d(l,tm(r,n.kb(),n.Ea()),5);case 5:return i=l.h,d(l,i.getManifests([n.key()]),6);case 6:return o=l.h,a=o[0],s=new mm(n.kb(),n.Ea()),u=bm(s,a),t.makeTextStreamsForClosedCaptions(u),l.return(u);case 2:return m(l),d(l,r.destroy(),7);case 7:b(l,0)}})},g_.stop=function(){return Promise.resolve()},g_.update=function(){},g_.onExpirationUpdated=function(e,t){var n,r,i,o,a,s,u,c,l=this;return A(function(f){switch(f.g){case 1:return n=l.g,r=new Qv,p(f,2,3),d(f,r.init(),5);case 5:return d(f,tm(r,n.kb(),n.Ea()),6);case 6:return i=f.h,d(f,i.getManifests([n.key()]),7);case 7:if(o=f.h,a=o[0],s=a.sessionIds.includes(e),u=void 0==a.expiration||a.expiration>t,!s||!u){f.u(3);break}return q("Updating expiration for stored content"),d(f,i.updateManifestExpiration(n.key(),t),3);case 3:return m(f),d(f,r.destroy(),10);case 10:b(f,0);break;case 2:c=v(f),V("There was an error updating",n,c),f.u(3)}})},g_.onInitialVariantChosen=function(){},g_.banLocation=function(){},WT["application/x-offline-manifest"]=function(){return new km},M("shaka.offline.OfflineScheme",Em),Em.plugin=Am,jr("offline",Am),g_=Um.prototype,g_.destroy=function(){return this.l.destroy()},g_.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Bu(e,t)),Yu(this.h,e)},g_.getConfiguration=function(){var e=Xu();return Yu(e,this.h,Xu()),e},g_.Zb=function(){return this.g},g_.store=function(e,t,n){var r=this,i=this.getConfiguration(),o=new Dv(this.g);return this.j.push(o),t=Fm(this,e,t||{},function(){var t;return A(function(o){return 1==o.g?n?o.u(2):d(o,yc(e,r.g,i.manifest.retryParameters),3):(2!=o.g&&(n=o.h),t=To(e,n||null),o.return(t()))})},i,o),t=new mr(t,function(){return Nv(o)}),t.finally(function(){we(r.j,o)}),ub(this,t)},g_.remove=function(e){return sb(this,Ym(this,e))},g_.Di=function(){return sb(this,Zm(this))},g_.list=function(){return sb(this,eb())},g_.xc=function(e,t,n){var r,i=this;return A(function(o){return 1==o.g?(r=new Ri({Db:i.g,onError:t,qe:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),r.configure(n.drm),d(o,Li(r,e.variants,n.offline.usePersistentLicense),2)):3!=o.g?d(o,Ki(r),3):o.return(r)})},M("shaka.offline.Storage",Um),Um.deleteAll=function(){var e;return A(function(t){return 1==t.g?(e=new Qv,g(t,2),d(t,im(e),2)):5!=t.g?(m(t),d(t,e.destroy(),5)):b(t,0)})},Um.prototype.list=Um.prototype.list,Um.prototype.removeEmeSessions=Um.prototype.Di,Um.prototype.remove=Um.prototype.remove,Um.prototype.store=Um.prototype.store,Um.prototype.getNetworkingEngine=Um.prototype.Zb,Um.prototype.getConfiguration=Um.prototype.getConfiguration,Um.prototype.configure=Um.prototype.configure,Um.prototype.destroy=Um.prototype.destroy,Um.support=Bm;var mA=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");Tk.offline=Bm,M("shaka.polyfill",hb),hb.register=pb,hb.installAll=function(){for(var e=a(bA),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(e){F("Error installing polyfill!",e)}}};var bA=[];gb.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Er("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},v_.Object.defineProperties(gb.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),hb.AbortController=gb,gb.install=yb,u(vb,xr),v_.Object.defineProperties(vb.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),pb(yb),hb.Aria=mb,mb.install=bb,pb(bb),hb.EncryptionScheme=Sb,Sb.install=_b,pb(_b,-2),hb.Fullscreen=Tb,Tb.install=kb,pb(kb),hb.MediaCapabilities=Ab,Ab.install=xb;var wA=null;Ab.originalMcap=wA;var SA={};Ab.memoizedCanDisplayTypeRequests_=SA,pb(xb,-1),hb.MediaSource=Mb,Mb.install=Ob,pb(Ob),hb.Orientation=Bb,Bb.install=Fb,u(Wb,xr),Wb.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Wb.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},pb(Fb);var _A,TA,kA,EA,AA,xA;hb.PatchedMediaKeysApple=Kb,Kb.uninstall=function(){_A&&(K("Un-installing Apple-prefixed EME"),_A=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",TA),HTMLMediaElement.prototype.setMediaKeys=kA,e.MediaKeys=EA,e.MediaKeySystemAccess=AA,navigator.requestMediaKeySystemAccess=xA,TA=xA=kA=AA=EA=null,e.shakaMediaKeysPolyfill="")},Kb.install=function(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&((void 0===t?0:t)&&(_A=!0,TA=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),kA=HTMLMediaElement.prototype.setMediaKeys,EA=e.MediaKeys,AA=e.MediaKeySystemAccess,xA=navigator.requestMediaKeySystemAccess),K("Using Apple-prefixed EME"),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Gb,e.MediaKeys=Yb,e.MediaKeySystemAccess=Xb,navigator.requestMediaKeySystemAccess=qb,e.shakaMediaKeysPolyfill=CA)},Xb.prototype.createMediaKeys=function(){q("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var e=new Yb(this.keySystem);return Promise.resolve(e)},Xb.prototype.getConfiguration=function(){return q("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration"),this.g},Yb.prototype.createSession=function(e){if(q("PatchedMediaKeysApple.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new $b(this.h,e)},Yb.prototype.setServerCertificate=function(){return q("PatchedMediaKeysApple.MediaKeys.setServerCertificate"),Promise.resolve(!1)},Yb.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},u($b,xr),g_=$b.prototype,g_.generateRequest=function(e,t){var n=this;q("PatchedMediaKeysApple.MediaKeySession.generateRequest"),this.h=new vr;try{var r=this.l.createSession("video/mp4",he(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(e){q("PatchedMediaKeysApple.onWebkitKeyMessage_",e),n.h&&(n.h.resolve(),n.h=null),e=(new Map).set("messageType",void 0==n.keyStatuses.bc()?"license-request":"license-renewal").set("message",de(e.message)),e=new Er("message",e),n.dispatchEvent(e)}),this.j.D(r,"webkitkeyadded",function(e){q("PatchedMediaKeysApple.onWebkitKeyAdded_",e),n.g&&(Qb(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(e){if(q("PatchedMediaKeysApple.onWebkitKeyError_",e),e=Error("EME PatchedMediaKeysApple key error"),e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Qb(n,"output-not-allowed");break;default:Qb(n,"internal-error")}}),Qb(this,"status-pending")}catch(e){this.h.reject(e)}return this.h},g_.load=function(){return q("PatchedMediaKeysApple.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},g_.update=function(e){q("PatchedMediaKeysApple.MediaKeySession.update"),this.g=new vr;try{this.i.update(he(e))}catch(e){this.g.reject(e)}return this.g},g_.close=function(){q("PatchedMediaKeysApple.MediaKeySession.close");try{this.i.close(),this.closed.resolve(),this.j.ob()}catch(e){this.closed.reject(e)}return this.closed},g_.remove=function(){return q("PatchedMediaKeysApple.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},g_=Zb.prototype,g_.bc=function(){return this.g},g_.forEach=function(e){this.g&&e(this.g,BT.value())},g_.get=function(e){if(this.has(e))return this.g},g_.has=function(e){var t=BT.value();return!(!this.g||!le(e,t))},g_.entries=function(){},g_.keys=function(){},g_.values=function(){};var CA="apple";hb.PatchedMediaKeysCert=ew,ew.install=tw,pb(tw),hb.PatchedMediaKeysNop=rw,rw.install=iw,sw.prototype.createSession=function(){},sw.prototype.setServerCertificate=function(){},sw.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},uw.prototype.getConfiguration=function(){},uw.prototype.createMediaKeys=function(){};var PA="nop";pb(iw,-10),hb.PatchedMediaKeysWebkit=cw,cw.install=lw,pw.prototype.createMediaKeys=function(){q("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var e=new gw(this.g);return Promise.resolve(e)},pw.prototype.getConfiguration=function(){return q("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration"),this.h},gw.prototype.createSession=function(e){if(q("PatchedMediaKeysWebkit.MediaKeys.createSession"),"temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new mw(t,this.l,e),this.i.push(e),e},gw.prototype.setServerCertificate=function(){return q("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate"),Promise.resolve(!1)},gw.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},u(mw,xr),g_=mw.prototype,g_.generateRequest=function(e,t){return q("PatchedMediaKeysWebkit.MediaKeySession.generateRequest"),bw(this,t,null)},g_.load=function(e){return q("PatchedMediaKeysWebkit.MediaKeySession.load"),"persistent-license"==this.l?bw(this,null,e):Promise.reject(Error("Not a persistent session."))},g_.update=function(e){q("PatchedMediaKeysWebkit.MediaKeySession.update",e);var t=new vr;return ww(this,t,e),t},g_.close=function(){if(q("PatchedMediaKeysWebkit.MediaKeySession.close"),"persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=fw("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){q(e+" exception",t)}}return this.closed.resolve(),this.closed},g_.remove=function(){return q("PatchedMediaKeysWebkit.MediaKeySession.remove"),"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},g_=_w.prototype,g_.bc=function(){return this.g},g_.forEach=function(e){this.g&&e(this.g,BT.value())},g_.get=function(e){if(this.has(e))return this.g},g_.has=function(e){var t=BT.value();return!(!this.g||!le(e,t))},g_.entries=function(){},g_.keys=function(){},g_.values=function(){};var IA="",jA="webkit";pb(lw),hb.PiPWebkit=Tw,Tw.install=kw,pb(kw),hb.RandomUUID=Iw,Iw.install=jw,pb(jw),hb.Symbol=Ow,Ow.install=Rw,pb(Rw),hb.VideoPlayPromise=Lw,Lw.install=Nw,pb(Nw),hb.VideoPlaybackQuality=Uw,Uw.install=Bw,pb(Bw),hb.VTTCue=Hw,Hw.install=Vw,pb(Vw),qw.prototype.parseInit=function(){},qw.prototype.setSequenceMode=function(){},qw.prototype.setManifestType=function(){},qw.prototype.parseMedia=function(e,t){var n=null,r=[];e=gt(e).split(/\r?\n/),e=a(e);for(var i=e.next();!i.done;i=e.next()){var o=i.value;o&&!/^\s+$/.test(o)&&((i=MA.exec(o))?(o=OA.exec(i[1]),o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",",".")),i=new Te(o,t.segmentEnd?t.segmentEnd:o+2,i[2]),n&&(n.endTime=o,r.push(n)),n=i):W("LrcTextParser encountered an unknown line.",o))}return n&&r.push(n),r},M("shaka.text.LrcTextParser",qw),qw.prototype.parseMedia=qw.prototype.parseMedia,qw.prototype.setManifestType=qw.prototype.setManifestType,qw.prototype.setSequenceMode=qw.prototype.setSequenceMode,qw.prototype.parseInit=qw.prototype.parseInit;var MA=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,OA=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;bT["application/x-subtitle-lrc"]=function(){return new qw},Gw.prototype.parseInit=function(){},Gw.prototype.setSequenceMode=function(){},Gw.prototype.setManifestType=function(){},Gw.prototype.parseMedia=function(e,t,n){var r=gt(e);if(e=[],""==r)return e;var i=ai(r,"tt");if(!i)throw new He(2,2,2005,"Failed to parse TTML.");if(!(r=pi(i,"body")[0]))return[];var o=wi(i,GA,"frameRate"),s=wi(i,GA,"subFrameRate"),u=wi(i,GA,"frameRateMultiplier"),c=wi(i,GA,"tickRate"),l=wi(i,GA,"cellResolution"),f=i.attributes["xml:space"]||"default",d=wi(i,zA,"extent");if("default"!=f&&"preserve"!=f)throw new He(2,2,2005,"Invalid xml:space value: "+f);f="default"==f,o=new oS(o,s,u,c),l=l&&(l=/^(\d+) (\d+)$/.exec(l))?{Ub:parseInt(l[1],10),rows:parseInt(l[2],10)}:null,s=(s=pi(i,"metadata")[0])?s.children:[],u=pi(i,"style"),i=pi(i,"region"),c=[];for(var h=a(i),p=h.next();!p.done;p=h.next()){var g=p.value;p=new Ae;var y=g.attributes["xml:id"];if(y){p.id=y;var v=null;d&&(v=RA.exec(d)||NA.exec(d)),y=v?Number(v[1]):null,v=v?Number(v[2]):null;var m,b=$w(g,u,"extent");if(b){var w=(m=RA.exec(b))||NA.exec(b);null!=w&&(p.width=Number(w[1]),p.height=Number(w[2]),m||(null!=y&&(p.width=100*p.width/y),null!=v&&(p.height=100*p.height/v)),p.widthUnits=m||null!=y?X_:0,p.heightUnits=m||null!=v?X_:0)}(g=$w(g,u,"origin"))&&null!=(w=(m=RA.exec(g))||NA.exec(g))&&(p.viewportAnchorX=Number(w[1]),p.viewportAnchorY=Number(w[2]),m?b||(p.width=100-p.viewportAnchorX,p.widthUnits=X_,p.height=100-p.viewportAnchorY,p.heightUnits=X_):(null!=v&&(p.viewportAnchorY=100*p.viewportAnchorY/v),null!=y&&(p.viewportAnchorX=100*p.viewportAnchorX/y)),p.viewportAnchorUnits=m||null!=y?X_:0)}else W("TtmlTextParser parser encountered a region with no id. Region will be ignored."),p=null;p&&c.push(p)}if(fi(r,"p").length)throw new He(2,2,2001,"<p> can only be inside <div> in TTML");for(d=a(fi(r,"div")),h=d.next();!h.done;h=d.next())if(fi(h.value,"span").length)throw new He(2,2,2001,"<span> can only be inside <p> in TTML");return(t=zw(r,t,o,s,u,i,c,f,l,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},M("shaka.text.TtmlTextParser",Gw),Gw.prototype.parseMedia=Gw.prototype.parseMedia,Gw.prototype.setManifestType=Gw.prototype.setManifestType,Gw.prototype.setSequenceMode=Gw.prototype.setSequenceMode,Gw.prototype.parseInit=Gw.prototype.parseInit;var RA=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,DA=/^(\d{1,2}(?:\.\d+)?|100)%$/,LA=/^(\d+px|\d+em|\d*\.?\d+c)$/,NA=/^(\d+)px (\d+)px$/,UA=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,BA=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,FA=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,HA=/^(\d*(?:\.\d*)?)f$/,VA=/^(\d*(?:\.\d*)?)t$/,WA=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),KA={left:H_,center:"center",right:"end",start:H_,end:"end"},qA={left:"line-left",center:"center",right:"line-right"},GA=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],zA=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],XA=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];bT["application/ttml+xml"]=function(){return new Gw},aS.prototype.parseInit=function(e){var t=!1;if((new Xr).box("moov",Yr).box("trak",Yr).box("mdia",Yr).box("minf",Yr).box("stbl",Yr).P("stsd",Jr).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new He(2,2,2007)},aS.prototype.setSequenceMode=function(){},aS.prototype.setManifestType=function(){},aS.prototype.parseMedia=function(e,t,n){var r=this,i=!1,o=[];if((new Xr).box("mdat",Zr(function(e){i=!0,o=o.concat(r.g.parseMedia(e,t,n))})).parse(e,!1),!i)throw new He(2,2,2007);return o},M("shaka.text.Mp4TtmlParser",aS),aS.prototype.parseMedia=aS.prototype.parseMedia,aS.prototype.setManifestType=aS.prototype.setManifestType,aS.prototype.setSequenceMode=aS.prototype.setSequenceMode,aS.prototype.parseInit=aS.prototype.parseInit,bT['application/mp4; codecs="stpp"']=function(){return new aS},bT['application/mp4; codecs="stpp.ttml"']=function(){return new aS},bT['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new aS},bT['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new aS},bT['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new aS},bT['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new aS},bT['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new aS},bT['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new aS},sS.prototype.parseInit=function(){},sS.prototype.setSequenceMode=function(e){this.h=e},sS.prototype.setManifestType=function(e){this.g=e},sS.prototype.parseMedia=function(e,t){e=gt(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new He(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&"HLS"==this.g)if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new He(2,2,2e3);if(null==(e=gS(new _f(e[1]))))throw new He(2,2,2e3);e=t.periodStart+Number(r[1])/9e4-e}else e=t.segmentStart;t=[],r=a(n[0].split("\n"));for(var i=r.next();!i.done;i=r.next())if(i=i.value,/^Region:/.test(i)){i=new _f(i);var o=new Ae;Ef(i),Tf(i);for(var s=Ef(i);s;){var u;e:{var c=o,l=s;if(u=/^id=(.*)$/.exec(l))c.id=u[1];else if(u=/^width=(\d{1,2}|100)%$/.exec(l))c.width=Number(u[1]);else if(u=/^lines=(\d+)$/.exec(l))c.height=Number(u[1]),c.heightUnits=2;else if(u=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))c.regionAnchorX=Number(u[1]),c.regionAnchorY=Number(u[2]);else if(u=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))c.viewportAnchorX=Number(u[1]),c.viewportAnchorY=Number(u[2]);else{if(!/^scroll=up$/.exec(l)){u=!1;break e}c.scroll="up"}u=!0}u||W("VTT parser encountered an invalid VTTRegion setting: ",s," The setting will be ignored."),Tf(i),s=Ef(i)}t.push(o)}for(r=new Map,uS(r),i=[],n=a(n.slice(1)),o=n.next();!o.done;o=n.next()){if(o=o.value.split("\n"),(1!=o.length||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&"STYLE"==o[0]){for(s=[],u=-1,c=1;c<o.length;c++)o[c].includes("::cue")&&(s.push([]),u=s.length-1),-1!=u&&(s[u].push(o[c]),o[c].includes("}")&&(u=-1));for(s=a(s),u=s.next();!u.done;u=s.next()){l=u.value,u="global",(c=l[0].match(/\((.*)\)/))&&(u=c.pop()),c=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(c=l[1].split(";")),(l=r.get(u))||(l=new Te(0,0,""));for(var f=!1,d=0;d<c.length;d++){var h=/^\s*([^:]+):\s*(.*)/.exec(c[d]);if(h){var p=h[2].trim().replace(";","");switch(h[1].trim()){case"background-color":case"background":f=!0,l.backgroundColor=p;break;case"color":f=!0,l.color=p;break;case"font-family":f=!0,l.fontFamily=p;break;case"font-size":f=!0,l.fontSize=p;break;case"font-weight":(700<=parseInt(p,10)||"bold"==p)&&(f=!0,l.fontWeight=700);break;case"font-style":switch(p){case"normal":f=!0,l.fontStyle=G_;break;case"italic":f=!0,l.fontStyle="italic";break;case"oblique":f=!0,l.fontStyle="oblique"}break;case"opacity":f=!0,l.opacity=parseFloat(p);break;case"text-combine-upright":f=!0,l.textCombineUpright=p;break;case"text-shadow":f=!0,l.textShadow=p;break;case"white-space":f=!0,l.wrapLine="noWrap"!=p;break;default:W("VTT parser encountered an unsupported style: ",h)}}}f&&r.set(u,l)}}if(f=e,1==o.length&&!o[0]||/^NOTE($|[ \t])/.test(o[0])||"STYLE"==o[0]||"REGION"==o[0])o=null;else if(s=null,o[0].includes("--\x3e")||(s=o[0],o.splice(0,1)),u=new _f(o[0]),c=gS(u),d=kf(u,/[ \t]+--\x3e[ \t]+/g),l=gS(u),null==c||null==d||null==l)F("Failed to parse VTT time code. Cue skipped:",s,o),o=null;else{for(c+=f,l+=f,o=o.slice(1).join("\n").trim(),r.has("global")?(f=r.get("global").clone(),f.startTime=c,f.endTime=l,f.payload=""):f=new Te(c,l,""),Tf(u),c=Ef(u);c;)hS(f,c,t)||W("VTT parser encountered an invalid VTT setting: ",c," The setting will be ignored."),Tf(u),c=Ef(u);cS(o,f,r),null!=s&&(f.id=s),o=f}o&&i.push(o)}return i},M("shaka.text.VttTextParser",sS),sS.prototype.parseMedia=sS.prototype.parseMedia,sS.prototype.setManifestType=sS.prototype.setManifestType,sS.prototype.setSequenceMode=sS.prototype.setSequenceMode,sS.prototype.parseInit=sS.prototype.parseInit;var YA=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;bT["text/vtt"]=function(){return new sS},bT['text/vtt; codecs="vtt"']=function(){return new sS},bT['text/vtt; codecs="wvtt"']=function(){return new sS},yS.prototype.parseInit=function(e){var t=this,n=!1;if((new Xr).box("moov",Yr).box("trak",Yr).box("mdia",Yr).P("mdhd",function(e){e=Go(e.reader,e.version),t.g=e.timescale}).box("minf",Yr).box("stbl",Yr).P("stsd",Jr).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new He(2,2,2008);if(!n)throw new He(2,2,2008)},yS.prototype.setSequenceMode=function(){},yS.prototype.setManifestType=function(){},yS.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw V("No init segment for MP4+VTT!"),new He(2,2,2008);var n,r=0,i=[],o=[],s=!1,u=!1,c=!1,l=null;if((new Xr).box("moof",Yr).box("traf",Yr).P("tfdt",function(e){s=!0,r=qo(e.reader,e.version).baseMediaDecodeTime}).P("tfhd",function(e){l=Ko(e.reader,e.flags).gd}).P("trun",function(e){u=!0,i=zo(e.reader,e.version,e.flags).Og}).box("mdat",Zr(function(e){c=!0,n=e})).parse(e,!1),!c&&!s&&!u)throw new He(2,2,2008);e=r;for(var f=new Gr(n,0),d=a(i),h=d.next();!h.done;h=d.next()){h=h.value;var p=h.Mf||l,g=h.we?r+h.we:e;e=g+(p||0);var y=0;do{var v=f.O();y+=v;var m=f.O();m=ti(m);var b=null;"vttc"==m?8<v&&(b=f.nb(v-8)):("vtte"!=m&&V("Unknown box "+m+"! Skipping!"),f.skip(v-8)),p?b&&(v=vS(b,t.periodStart+g/this.g,t.periodStart+e/this.g),o.push(v)):V("WVTT sample duration unknown, and no default found!")}while(h.sampleSize&&y<h.sampleSize)}return o.filter(nn)},M("shaka.text.Mp4VttParser",yS),yS.prototype.parseMedia=yS.prototype.parseMedia,yS.prototype.setManifestType=yS.prototype.setManifestType,yS.prototype.setSequenceMode=yS.prototype.setSequenceMode,yS.prototype.parseInit=yS.prototype.parseInit,bT['application/mp4; codecs="wvtt"']=function(){return new yS},bS.prototype.parseInit=function(){},bS.prototype.setSequenceMode=function(){},bS.prototype.setManifestType=function(){},bS.prototype.parseMedia=function(e){var t=gt(e).replace(/\r+/g,"");if(t=t.trim(),e=[],""==t)return e;t=a(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var r=new _f(n[0]),i=wS(r),o=kf(r,/,/g);if(r=wS(r),null==i||null==o||null==r)throw new He(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Te(i,r,n.slice(1).join("\n").trim()))}return e},M("shaka.text.SbvTextParser",bS),bS.prototype.parseMedia=bS.prototype.parseMedia,bS.prototype.setManifestType=bS.prototype.setManifestType,bS.prototype.setSequenceMode=bS.prototype.setSequenceMode,bS.prototype.parseInit=bS.prototype.parseInit,bT["text/x-subviewer"]=function(){return new bS},SS.prototype.parseInit=function(){},SS.prototype.setSequenceMode=function(){},SS.prototype.setManifestType=function(){},SS.prototype.parseMedia=function(e,t,n){return e=gt(e),e=_S(e),e=he(mt(e)),this.g.parseMedia(e,t,n)},M("shaka.text.SrtTextParser",SS),SS.srt2webvtt=_S,SS.prototype.parseMedia=SS.prototype.parseMedia,SS.prototype.setManifestType=SS.prototype.setManifestType,SS.prototype.setSequenceMode=SS.prototype.setSequenceMode,SS.prototype.parseInit=SS.prototype.parseInit,bT["text/srt"]=function(){return new SS},TS.prototype.parseInit=function(){},TS.prototype.setSequenceMode=function(){},TS.prototype.setManifestType=function(){},TS.prototype.parseMedia=function(e){var t="",n="";e=gt(e).split(/\r?\n\s*\r?\n/),e=a(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var i=JA.exec(r);if(i){var o=i[1];if(i=i[2],"V4 Styles"==o||"V4+ Styles"==o){t=i;continue}if("Events"==o){n=i;continue}}W("SsaTextParser parser encountered an unknown part.",r)}for(e=[],r=null,t=a(t.split(/\r?\n/)),i=t.next();!i.done;i=t.next())if(o=i.value,!/^\s*;/.test(o)&&(i=$A.exec(o)))if(o=i[1].trim(),i=i[2].trim(),"Format"==o)r=i.split(QA);else if("Style"==o){o=i.split(QA),i={};for(var s=0;s<r.length&&s<o.length;s++)i[r[s]]=o[s];e.push(i)}for(r=[],t=null,o={},n=a(n.split(/\r?\n/)),i=n.next();!i.done;o={Ge:o.Ge},i=n.next())if(i=i.value,!/^\s*;/.test(i)&&(s=$A.exec(i)))if(i=s[1].trim(),s=s[2].trim(),"Format"==i)t=s.split(QA);else if("Dialogue"==i){s=s.split(QA),i={};for(var u=0;u<t.length&&u<s.length;u++)i[t[u]]=s[u];u=AS(i.Start);var c=AS(i.End);s=new Te(u,c,s.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),o.Ge=i.Style,(i=e.find(function(e){return function(t){return t.Name==e.Ge}}(o)))&&kS(s,i),r.push(s)}return r},M("shaka.text.SsaTextParser",TS),TS.prototype.parseMedia=TS.prototype.parseMedia,TS.prototype.setManifestType=TS.prototype.setManifestType,TS.prototype.setSequenceMode=TS.prototype.setSequenceMode,TS.prototype.parseInit=TS.prototype.parseInit;var JA=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,$A=/^\s*([^:]+):\s*(.*)/,QA=/\s*,\s*/,ZA=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;bT["text/x-ssa"]=function(){return new TS},g_=jS.prototype,g_.destroy=function(){this.g.clear()},g_.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]&&te(this.convertCodecs("audio",e))},g_.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(Kt(t)||"mp4a.40.2")+'"':t},g_.getOriginalMimeType=function(){return this.i},g_.transmux=function(e,t,n,r){for(var i=he(e),o=Wo(i),a=o.length;a<i.length&&!PS(i,a);a++);if(e=1e3*n.endTime,o=Vo(o),o.length&&n&&(o=o.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(e=o.data),!(o=CS(i,a)))return Promise.reject(new He(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=o.sampleRate,t.channelsCount=o.channelCount;for(var s=[];a<i.length;){var u=xS(i,a);if(!u)return Promise.reject(new He(2,3,3018,n?n.M()[0]:null));var c=u.be+u.Y;a+c<=i.length&&s.push({data:i.subarray(a+u.be,a+c),size:u.Y,duration:1024,ab:0,flags:{cb:0,Pa:0,Oa:0,Ma:0,Na:2,eb:0}}),a+=c}return n=o.sampleRate,e=Math.floor(e*n/1e3),r={id:t.id,type:"audio",codecs:o.Ha,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Xa:[],ia:new Uint8Array([]),va:new Uint8Array([]),ya:0,za:0,data:{pb:this.h,baseMediaDecodeTime:e,Ua:s},stream:t},n=new nv([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=rv(n),this.g.set(t.id,r)),t=uv(n),this.h++,t=Ct(r,t),Promise.resolve(t)},M("shaka.transmuxer.AacTransmuxer",jS),jS.prototype.transmux=jS.prototype.transmux,jS.prototype.getOriginalMimeType=jS.prototype.getOriginalMimeType,jS.prototype.convertCodecs=jS.prototype.convertCodecs,jS.prototype.isSupported=jS.prototype.isSupported,jS.prototype.destroy=jS.prototype.destroy,Ce("audio/aac",function(){return new jS("audio/aac")},$_),g_=RS.prototype,g_.destroy=function(){this.g.clear()},g_.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]&&te(this.convertCodecs("audio",e))},g_.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':t},g_.getOriginalMimeType=function(){return this.i},g_.transmux=function(e,t,n,r){e=he(e);for(var i=Wo(e),o=i.length;o<e.length&&!OS(e,o);o++);var a=1e3*n.endTime;i=Vo(i),i.length&&n&&(i=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(a=i.data),i=0;for(var s=new Uint8Array([]),u=[];o<e.length;){var c=MS(e,o);if(!c)return Promise.reject(new He(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=c.sampleRate,t.channelsCount=c.channelCount,i=c.sampleRate,s=c.ia,u.push({data:e.subarray(o,o+c.Y),size:c.Y,duration:1536,ab:0,flags:{cb:0,Pa:0,Oa:0,Ma:0,Na:2,eb:0}}),o+=c.Y}return n=Math.floor(a*i/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:i,duration:r,Xa:[],ia:s,va:new Uint8Array([]),ya:0,za:0,data:{pb:this.h,baseMediaDecodeTime:n,Ua:u},stream:t},n=new nv([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=rv(n),this.g.set(t.id,r)),t=uv(n),this.h++,t=Ct(r,t),Promise.resolve(t)},M("shaka.transmuxer.Ac3Transmuxer",RS),RS.prototype.transmux=RS.prototype.transmux,RS.prototype.getOriginalMimeType=RS.prototype.getOriginalMimeType,RS.prototype.convertCodecs=RS.prototype.convertCodecs,RS.prototype.isSupported=RS.prototype.isSupported,RS.prototype.destroy=RS.prototype.destroy,Ce("audio/ac3",function(){return new RS("audio/ac3")},$_),g_=LS.prototype,g_.destroy=function(){this.g.clear()},g_.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]&&te(this.convertCodecs("audio",e))},g_.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t},g_.getOriginalMimeType=function(){return this.i},g_.transmux=function(e,t,n,r){e=he(e);for(var i=Wo(e),o=i.length;o<e.length&&2935!=(e[o]<<8|e[o+1]<<0);o++);var a=1e3*n.endTime;i=Vo(i),i.length&&n&&(i=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(a=i.data),i=0;for(var s=new Uint8Array([]),u=[];o<e.length;){var c=DS(e,o);if(!c)return Promise.reject(new He(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=c.sampleRate,t.channelsCount=c.channelCount,i=c.sampleRate,s=c.ia,u.push({data:e.subarray(o,o+c.Y),size:c.Y,duration:1536,ab:0,flags:{cb:0,Pa:0,Oa:0,Ma:0,Na:2,eb:0}}),o+=c.Y}return n=Math.floor(a*i/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:i,duration:r,Xa:[],ia:s,va:new Uint8Array([]),ya:0,za:0,data:{pb:this.h,baseMediaDecodeTime:n,Ua:u},stream:t},n=new nv([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=rv(n),this.g.set(t.id,r)),t=uv(n),this.h++,t=Ct(r,t),Promise.resolve(t)},M("shaka.transmuxer.Ec3Transmuxer",LS),LS.prototype.transmux=LS.prototype.transmux,LS.prototype.getOriginalMimeType=LS.prototype.getOriginalMimeType,LS.prototype.convertCodecs=LS.prototype.convertCodecs,LS.prototype.isSupported=LS.prototype.isSupported,LS.prototype.destroy=LS.prototype.destroy,Ce("audio/ec3",function(){return new LS("audio/ec3")},$_);var ex=[100,110,122,244,44,83,86,118,128,138,139,134],tx=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],nx=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],rx=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],ix=[0,1,1,4];g_=zS.prototype,g_.destroy=function(){this.g.clear()},g_.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]&&te(this.convertCodecs("audio",e))},g_.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t},g_.getOriginalMimeType=function(){return this.i},g_.transmux=function(e,t,n,r){for(var i=he(e),o=Wo(i).length;o<i.length&&!GS(i,o);o++);var a;for(e=[];o<i.length;){var s=KS(i,o);if(!s)return Promise.reject(new He(2,3,3018,n?n.M()[0]:null));a||(a=s),o+s.Y<=i.length&&e.push({data:i.subarray(o,o+s.Y),size:s.Y,duration:1152,ab:0,flags:{cb:0,Pa:0,Oa:0,Ma:0,Na:2,eb:0}}),o+=s.Y}return a?(n=9e4*a.Hi/a.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a.sampleRate,duration:r,Xa:[],ia:new Uint8Array([]),va:new Uint8Array([]),ya:0,za:0,data:{pb:this.h,baseMediaDecodeTime:n,Ua:e},stream:t},a=new nv([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=rv(a),this.g.set(t.id,r)),t=uv(a),this.h++,t=Ct(r,t),Promise.resolve(t)):Promise.reject(new He(2,3,3018,n?n.M()[0]:null))},M("shaka.transmuxer.Mp3Transmuxer",zS),zS.prototype.transmux=zS.prototype.transmux,zS.prototype.getOriginalMimeType=zS.prototype.getOriginalMimeType,zS.prototype.convertCodecs=zS.prototype.convertCodecs,zS.prototype.isSupported=zS.prototype.isSupported,zS.prototype.destroy=zS.prototype.destroy,Ce("audio/mpeg",function(){return new zS("audio/mpeg")},$_),g_=XS.prototype,g_.destroy=function(){},g_.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=Kt(e).split(","),n=Ot("audio",t);return t=Ot("video",t),!(!n||t||"mp3"!=Ht(n))&&te(this.convertCodecs("audio",e))},g_.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t},g_.getOriginalMimeType=function(){return this.h},g_.transmux=function(e,t,n,r,i){if(this.g?this.g.clearData():this.g=new da,e=he(e),e=this.g.parse(e),"mp3"!=e.ld().audio||"audio"!=i)return Promise.reject(new He(2,3,3018,n?n.M()[0]:null));for(n=new Uint8Array([]),i=a(e.Lb()),e=i.next();!e.done;e=i.next())if(e=e.value.data)for(t=0;t<e.length;)(r=KS(e,t))?(t+r.Y<=e.length&&(n=Ct(n,e.subarray(t,t+r.Y))),t+=r.Y):t++;return Promise.resolve(n)},M("shaka.transmuxer.MpegTsTransmuxer",XS),XS.prototype.transmux=XS.prototype.transmux,XS.prototype.getOriginalMimeType=XS.prototype.getOriginalMimeType,XS.prototype.convertCodecs=XS.prototype.convertCodecs,XS.prototype.isSupported=XS.prototype.isSupported,XS.prototype.destroy=XS.prototype.destroy,Ce("video/mp2t",function(){return new XS("video/mp2t")},Q_),g_=YS.prototype,g_.destroy=function(){},g_.isSupported=function(e,t){var n=e.startsWith("mss/");return!(!this.g||!n)&&(t?te(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),te(t)||te(e)))},g_.convertCodecs=function(e,t){return t.replace("mss/","")},g_.getOriginalMimeType=function(){return this.h},g_.transmux=function(e,t,n){if(!n)return Promise.resolve(he(e));if(!t.mssPrivateData)return Promise.reject(new He(2,3,3020,n?n.M()[0]:null));try{var r,i=this.g.parseBuffer(e),o=i.fetch("tfhd");o.track_ID=t.id+1;var a=i.fetch("tfdt"),s=i.fetch("traf");null===a&&(a=this.g.createFullBox("tfdt",s,o),a.version=1,a.flags=0,a.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var u=i.fetch("trun"),c=i.fetch("tfxd");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var l=i.fetch("tfrf");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var f=i.fetch("sepiff");if(null!==f){f.type="senc",f.usertype=void 0;var d=i.fetch("saio");if(null===d){d=this.g.createFullBox("saio",s),d.version=0,d.flags=0,d.entry_count=1,d.offset=[0];var h=this.g.createFullBox("saiz",s);if(h.version=0,h.flags=0,h.sample_count=f.sample_count,h.default_sample_info_size=0,h.sample_info_size=[],2&f.flags)for(r=0;r<f.sample_count;r+=1)h.sample_info_size[r]=10+6*f.entry[r].NumberOfEntries;else h.default_sample_info_size=8}}o.flags&=16777214,o.flags|=131072,u.flags|=1;var p=i.fetch("moof");u.data_offset=p.getLength()+8;var g=i.fetch("saio");null!==g&&(g.offset[0]=$S(p,"traf")+$S(s,"senc")+16);var y=he(i.write());return Promise.resolve(y)}catch(e){return e instanceof He?Promise.reject(e):Promise.reject(new He(2,3,3022,n?n.M()[0]:null))}},M("shaka.transmuxer.MssTransmuxer",YS),YS.prototype.transmux=YS.prototype.transmux,YS.prototype.getOriginalMimeType=YS.prototype.getOriginalMimeType,YS.prototype.convertCodecs=YS.prototype.convertCodecs,YS.prototype.isSupported=YS.prototype.isSupported,YS.prototype.destroy=YS.prototype.destroy;var ox=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ce("mss/audio/mp4",function(){return new YS("mss/audio/mp4")},$_),Ce("mss/video/mp4",function(){return new YS("mss/video/mp4")},$_),g_=QS.prototype,g_.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},g_.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Kt(n).split(",");return n=Ot("audio",r),r=Ot("video",r),!(n&&(n=Ht(n),!ax.includes(n))||r&&(n=Ht(r),!sx.includes(n)))&&(t?te(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),te(t)||te(e)))},g_.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=Kt(t).replace("mp4a.40.34","mp3").split(",").map(function(e){return Pn(e,"audio/mp4")}).map(In).join(","),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},g_.getOriginalMimeType=function(){return this.l},g_.transmux=function(e,t,n,r,i){var o=he(e);if("audio"==i&&!va(o)){for(var u=Wo(o),c=u.length;c<o.length;c++)if(GS(o,c))return Promise.reject(new He(2,3,3018,n?n.M()[0]:null));for(c=u.length;c<o.length;c++)if(PS(o,c))return this.h||(this.h=new jS("audio/aac")),this.h.transmux(e,t,n,r,i);return Promise.reject(new He(2,3,3018,n?n.M()[0]:null))}this.j?this.j.clearData():this.j=new da;var l=this.j.parse(o),f=[],d=l.ld();try{var h=null;if("video"==i){switch(d.video){case"avc":var p=[],g=null,y=[],v=l.Dc();if(!v.length)throw new He(2,3,3023,n?n.M()[0]:null);for(var m=0;m<v.length;m++){var b=v[m],w=b.nalus;y.push.apply(y,s(w));var S=US(w);if(S){null==g&&(g=b.dts);var _=void 0;_=m+1<v.length?(v[m+1].dts||0)-(b.dts||0):1<v.length?(b.dts||0)-(v[m-1].dts||0):9e4*(n.endTime-n.startTime),p.push({data:S.data,size:S.data.byteLength,duration:_,ab:Math.round((b.pts||0)-(b.dts||0)),flags:{cb:0,Pa:0,Oa:0,Ma:0,Na:S.vd?2:1,eb:S.vd?0:1}})}}var T=NS(y);if(!T||null==g)throw new He(2,3,3018,n?n.M()[0]:null);t.height=T.height,t.width=T.width,h={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Xa:[],ia:new Uint8Array([]),va:T.va,ya:T.ya,za:T.za,data:{pb:this.g,baseMediaDecodeTime:g,Ua:p},stream:t};break;case"hvc":var k=[],E=null,A=[],x=l.Dc();if(!x.length)throw new He(2,3,3023,n?n.M()[0]:null);for(var C=0;C<x.length;C++){var P=x[C],I=P.nalus;A.push.apply(A,s(I));for(var j=!1,M=[],O=!1,R=a(I),D=R.next();!D.done;D=R.next()){var L=D.value;switch(L.type){case 1:case 0:var N=O=!0;break;case 19:case 20:case 21:j=N=O=!0;break;case 32:case 33:case 34:N=!0;break;case 35:O=N=!0;break;case 39:case 40:N=!0;break;default:N=!1}if(O&&N){var U=L.fullData.byteLength,B=new Uint8Array(4);B[0]=U>>24&255,B[1]=U>>16&255,B[2]=U>>8&255,B[3]=255&U,M.push(B),M.push(L.fullData)}}var F=M.length?{data:Ct.apply(_t,s(M)),vd:j}:null;if(F){null==E&&null!=P.dts&&(E=P.dts);var H=void 0;H=C+1<x.length?(x[C+1].dts||0)-(P.dts||0):1<x.length?(P.dts||0)-(x[C-1].dts||0):9e4*(n.endTime-n.startTime),k.push({data:F.data,size:F.data.byteLength,duration:H,ab:Math.round((P.pts||0)-(P.dts||0)),flags:{cb:0,Pa:0,Oa:0,Ma:0,Na:F.vd?2:1,eb:F.vd?0:1}})}}var V=BS(A);if(!V||null==E)throw new He(2,3,3018,n?n.M()[0]:null);t.height=V.height,t.width=V.width,h={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Xa:[],ia:new Uint8Array([]),va:V.va,ya:V.ya,za:V.za,data:{pb:this.g,baseMediaDecodeTime:E,Ua:k},stream:t}}h&&(f.push(h),h=null)}if("audio"==i){switch(d.audio){case"aac":for(var W,K=[],q=null,G=a(l.Lb()),z=G.next();!z.done;z=G.next()){var X=z.value,Y=X.data;if(Y){var J=0;if(!(W=CS(Y,J)))throw new He(2,3,3018,n?n.M()[0]:null);for(t.audioSamplingRate=W.sampleRate,t.channelsCount=W.channelCount,null==q&&null!==X.pts&&(q=X.pts);J<Y.length;){var $=xS(Y,J);if($){var Q=$.be+$.Y;J+Q<=Y.length&&K.push({data:Y.subarray(J+$.be,J+Q),size:$.Y,duration:1024,ab:0,flags:{cb:0,Pa:0,Oa:0,Ma:0,Na:2,eb:0}}),J+=Q}else J++}}}if(!W||null==q){if(!l.Dc().length)throw new He(2,3,3018,n?n.M()[0]:null);q=9e4*n.startTime;var Z=Ot("audio",t.codecs.split(","));if(!Z||!t.channelsCount||!t.audioSamplingRate)throw new He(2,3,3018,n?n.M()[0]:null);W={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,Ha:Z};var ee=IS(Z,t.channelsCount);if(!ee)throw new He(2,3,3018,n?n.M()[0]:null);for(var te=q+9e4*(n.endTime-n.startTime),ne=q;ne<te;)K.push({data:ee,size:ee.byteLength,duration:1024,ab:0,flags:{cb:0,Pa:0,Oa:0,Ma:0,Na:2,eb:0}}),ne+=1024/W.sampleRate*9e4}var re=W.sampleRate,ie=q/9e4*re;h={id:t.id,type:"audio",codecs:W.Ha,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:re,duration:r,Xa:[],ia:new Uint8Array([]),va:new Uint8Array([]),ya:0,za:0,data:{pb:this.g,baseMediaDecodeTime:ie,Ua:K},stream:t};break;case"ac3":for(var oe=[],ae=0,se=new Uint8Array([]),ue=null,ce=a(l.Lb()),le=ce.next();!le.done;le=ce.next()){var fe=le.value,de=fe.data;null==ue&&null!==fe.pts&&(ue=fe.pts);for(var pe=0;pe<de.length;){var ge=MS(de,pe);ge?(t.audioSamplingRate=ge.sampleRate,t.channelsCount=ge.channelCount,ae=ge.sampleRate,se=ge.ia,oe.push({data:de.subarray(pe,pe+ge.Y),size:ge.Y,duration:1536,ab:0,flags:{cb:0,Pa:0,Oa:0,Ma:0,Na:2,eb:0}}),pe+=ge.Y):pe++}}if(0==ae||0==se.byteLength||null==ue)throw new He(2,3,3018,n?n.M()[0]:null);var ye=ue/9e4*ae;h={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ae,duration:r,Xa:[],ia:se,va:new Uint8Array([]),ya:0,za:0,data:{pb:this.g,baseMediaDecodeTime:ye,Ua:oe},stream:t};break;case"ec3":for(var ve=[],me=0,be=new Uint8Array([]),we=null,Se=a(l.Lb()),_e=Se.next();!_e.done;_e=Se.next()){var Te=_e.value,ke=Te.data;null==we&&null!==Te.pts&&(we=Te.pts);for(var Ee=0;Ee<ke.length;){var Ae=DS(ke,Ee);Ae?(t.audioSamplingRate=Ae.sampleRate,t.channelsCount=Ae.channelCount,me=Ae.sampleRate,be=Ae.ia,ve.push({data:ke.subarray(Ee,Ee+Ae.Y),size:Ae.Y,duration:1536,ab:0,flags:{cb:0,Pa:0,Oa:0,Ma:0,Na:2,eb:0}}),Ee+=Ae.Y):Ee++}}if(0==me||0==be.byteLength||null==we)throw new He(2,3,3018,n?n.M()[0]:null);var xe=we/9e4*me;h={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:me,duration:r,Xa:[],ia:be,va:new Uint8Array([]),ya:0,za:0,data:{pb:this.g,baseMediaDecodeTime:xe,Ua:ve},stream:t};break;case"mp3":for(var Ce,Pe=[],Ie=null,je=a(l.Lb()),Me=je.next();!Me.done;Me=je.next()){var Oe=Me.value,Re=Oe.data;if(Re){null==Ie&&null!==Oe.pts&&(Ie=Oe.pts);for(var De=0;De<Re.length;){var Le=KS(Re,De);Le?(Ce||(Ce=Le),De+Le.Y<=Re.length&&Pe.push({data:Re.subarray(De,De+Le.Y),size:Le.Y,duration:1152,ab:0,flags:{cb:0,Pa:0,Oa:0,Ma:0,Na:2,eb:0}}),De+=Le.Y):De++}}}if(!Ce||null==Ie)throw new He(2,3,3018,n?n.M()[0]:null);var Ne=Ce.sampleRate,Ue=Ie/9e4*Ne;h={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ne,duration:r,Xa:[],ia:new Uint8Array([]),va:new Uint8Array([]),ya:0,za:0,data:{pb:this.g,baseMediaDecodeTime:Ue,Ua:Pe},stream:t};break;case"opus":var Be=[],Fe=null,Ve=l.F;if(!Ve)throw new He(2,3,3018,n?n.M()[0]:null);var We=[];switch(Ve.th){case 1:case 2:We=[0];break;case 0:We=[255,1,1,0,1];break;case 128:We=[255,2,0,0,1];break;case 3:We=[1,2,1,0,2,1];break;case 4:We=[1,2,2,0,1,2,3];break;case 5:We=[1,3,2,0,4,1,2,3];break;case 6:We=[1,4,2,0,4,1,2,3,5];break;case 7:We=[1,4,2,0,4,1,2,3,5,6];break;case 8:We=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:We=[1,1,2,0,1];break;case 131:We=[1,1,3,0,1,2];break;case 132:We=[1,1,4,0,1,2,3];break;case 133:We=[1,1,5,0,1,2,3,4];break;case 134:We=[1,1,6,0,1,2,3,4,5];break;case 135:We=[1,1,7,0,1,2,3,4,5,6];break;case 136:We=[1,1,8,0,1,2,3,4,5,6,7]}for(var Ke=new Uint8Array([0,Ve.channelCount,0,0,Ve.sampleRate>>>24&255,Ve.sampleRate>>>17&255,Ve.sampleRate>>>8&255,Ve.sampleRate>>>0&255,0,0].concat(s(We))),qe=Ve.sampleRate,Ge=a(l.Lb()),ze=Ge.next();!ze.done;ze=Ge.next()){var Xe=ze.value,Ye=Xe.data;null==Fe&&null!==Xe.pts&&(Fe=Xe.pts);for(var Je=0;Je<Ye.length;){for(var $e=0!=(16&Ye[Je+1]),Qe=0!=(8&Ye[Je+1]),Ze=Je+2,et=0;255===Ye[Ze];)et+=255,Ze+=1;et+=Ye[Ze],Ze+=1,Ze+=$e?2:0,Ze+=Qe?2:0;var tt=Ye.slice(Ze,Ze+et);Be.push({data:tt,size:tt.byteLength,duration:960,ab:0,flags:{cb:0,Pa:0,Oa:0,Ma:0,Na:2,eb:0}}),Je=Ze+et}}if(0==Ke.byteLength||null==Fe)throw new He(2,3,3018,n?n.M()[0]:null);t.audioSamplingRate=Ve.sampleRate,t.channelsCount=Ve.channelCount;var nt=Fe/9e4*qe;h={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:qe,duration:r,Xa:[],ia:Ke,va:new Uint8Array([]),ya:0,za:0,data:{pb:this.g,baseMediaDecodeTime:nt,Ua:Be},stream:t}}h&&(f.push(h),h=null)}}catch(e){return e&&3023==e.code?Promise.resolve(new Uint8Array([])):Promise.reject(e)}if(!f.length)return Promise.reject(new He(2,3,3018,n?n.M()[0]:null));var rt=new nv(f);if(this.i.has(t.id))var it=this.i.get(t.id);else it=rv(rt),this.i.set(t.id,it);var ot=uv(rt);this.g++;var at=Ct(it,ot);return Promise.resolve(at)},M("shaka.transmuxer.TsTransmuxer",QS),QS.prototype.transmux=QS.prototype.transmux,QS.prototype.getOriginalMimeType=QS.prototype.getOriginalMimeType,QS.prototype.convertCodecs=QS.prototype.convertCodecs,QS.prototype.isSupported=QS.prototype.isSupported,QS.prototype.destroy=QS.prototype.destroy;var ax=["aac","ac-3","ec-3","mp3","opus"],sx=["avc","hevc"];Ce("video/mp2t",function(){return new QS("video/mp2t")},Z_);var ux;M("EmeEncryptionSchemePolyfill",ZS),ZS.install=e_;var cx;M("McEncryptionSchemePolyfill",i_),i_.install=o_,c_.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=a(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=a(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},c_.prototype.createMediaKeys=function(){return this.g.createMediaKeys()},M("EncryptionSchemePolyfills",h_),h_.install=p_;var lx=navigator.userAgent.includes("CrKey"),fx=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);void 0!==n&&n.exports&&(n.exports=h_)}).call(r,n,n,void 0);for(var i in r.shaka)t[i]=r.shaka[i]}()}).call(t,n(18))},function(e,t){!function(){"use strict";var e=function(e,t){return function(n){return window.getComputedStyle?window.getComputedStyle(e,t)[n]:e.currentStyle[n]}},t=function(n){return"HTML"!==n.nodeName&&"static"===e(n)("position")?t(n.offsetParent):n},n=function(){return window.pageXOffset?{x:window.pageXOffset,y:window.pageYOffset}:{x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}},r=function(e){if(-1!==navigator.userAgent.toLowerCase().indexOf("android")){var t=e.controlBar.progressControl,n=function(){t.addClass("fake-active")},r=function(){t.removeClass("fake-active")};t.on("touchstart",n),t.on("touchend",r),t.on("touchcancel",r)}},i=function(e,t){var n=document.createElement("base");n.href=e;var r=document.getElementsByTagName("head")[0];r.insertBefore(n,r.firstChild);var i=document.createElement("a");i.href=t;var o=i.href;return r.removeChild(n),o},o=function(e,t){for(var n={},r=e.cues,o=0;o<r.length;o++){var a=r[o],s=n[a.startTime]={src:i(t,a.text.split("#")[0])},u=a.text.split("#")[1];if(u&&"xywh="===u.substring(0,5)){var c=u.substring(5).split(",");s.width=c[2],s.height=c[3],s.style={left:"-"+c[0]+"px",top:"-"+c[1]+"px"}}}return n},a=function(){return window.navigator.userAgent.toLowerCase().includes("smart")},s=function(){return!a()&&-1!==window.navigator.userAgent.indexOf("Safari")&&-1===window.navigator.userAgent.indexOf("Chrome")},u=function(){return s()?"chapters":"metadata"},c=function(e,i){if(e._thumbs)return void(e._thumbs.settings=i);e._thumbs={settings:i},r(e);var o=e.el_.querySelector(".vjs-thumbnail-holder"),a=e.el_.querySelector(".vjs-thumbnail"),s=e.controlBar.progressControl,u=s.seekBar,c=s.el();o||(o=document.createElement("div"),o.className="vjs-thumbnail-holder",a=document.createElement("div"),o.appendChild(a),a.className="vjs-thumbnail",c.firstChild?c.insertBefore(o,c.firstChild):c.appendChild(o));var l=e.duration();e.on("durationchange",function(t){l=e.duration()}),e.on("loadedmetadata",function(t){l=e.duration()});var f=function(r){var i=window.getComputedStyle(o),c=parseInt(i.getPropertyValue("--thumbnails-height"),10);if(isNaN(c)&&(c=0),r.target!==o&&r.target!==a){var f=n().x,d=t(s.el()).getBoundingClientRect(),h=(d.width||d.right)+f,p=r.pageX;r.changedTouches&&(p=r.changedTouches[0].pageX);var g=p||r.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;g-=t(s.el()).getBoundingClientRect().left+f;var y=Math.floor(u.calculateDistance(r)*l),v=0,m=e._thumbs.settings;for(var b in m)y>b&&(v=Math.max(v,b));var w=m[v];if(w){var S=/^https?:\/\//i;w.src&&a.style.background.replace(S,"//")!=w.src.replace(S,"//")&&(a.style.background="url("+w.src+") no-repeat");var _=e.currentDimensions(),T=_.width/1920,k=parseFloat(w.width||m[0].width),E=parseFloat(w.height||m[0].height);a.style.width=k+"px",a.style.height=E+"px",w.style&&(a.style.backgroundPosition=w.style.left+" "+w.style.top),a.style.transform="scale("+T+","+T+")";var A=k*T,x=E*T,C=A/2;g+C>h?g=h-A:g<C?g=0:g-=C,o.style.width=A+"px",o.style.height=x+"px",o.style.left=g+"px",o.style.top="-"+(x+c)+"px",o.style.display="block"}}};s.on("mousemove",f),s.on("touchmove",f);var d=function(e){o.style.display="none"};s.on("touchcancel",d),s.on("touchend",d),e.on("userinactive",d)},l=function(e){c(e,{vtt:""});var t=e.$(".vjs-thumbnail-holder");t&&t.style&&(t.style.display="none");var n=e.remoteTextTracks().tracks_.find(function(e){return e.kind===u()&&"thumbnails"===e.id&&e.label===d.toString()});n&&e.removeRemoteTextTrack(n)},f=!1,d=0;videojs.registerPlugin("thumbnails",function(e){var t=this;if(!e)return void l(t);var n=u();if(f||(t.textTracks().on("removetrack",function(e){e.track.kind===n&&"thumbnails"===e.track.id&&e.track.label===d.toString()&&l(t)}),f=!0),!e.vtt)return void c(t,e);l(t),d++;var r=t.addRemoteTextTrack({id:"thumbnails",kind:n,label:d.toString(),src:e.vtt},!1);e.vtt&&r.addEventListener("load",function n(){r.removeEventListener("load",n);var i=t.textTracks().getTrackById("thumbnails");c(t,o(i,e.vtt))})})}()},function(e,t){window.webOS=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"deviceInfo",function(){return E}),n.d(t,"fetchAppId",function(){return u}),n.d(t,"fetchAppInfo",function(){return l}),n.d(t,"fetchAppRootPath",function(){return f}),n.d(t,"keyboard",function(){return A}),n.d(t,"libVersion",function(){return C}),n.d(t,"platformBack",function(){return d}),n.d(t,"platform",function(){return T}),n.d(t,"service",function(){return g}),n.d(t,"systemInfo",function(){return x});var u=function(){return window.PalmSystem&&window.PalmSystem.identifier?window.PalmSystem.identifier.split(" ")[0]:""},c={},l=function(e,t){if(0===Object.keys(c).length){var n=function(t,n){if(!t&&n)try{c=JSON.parse(n),e&&e(c)}catch(t){console.error("Unable to parse appinfo.json file for",u()),e&&e()}else e&&e()},r=new window.XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300||0===r.status?n(null,r.responseText):n({status:404}))};try{r.open("GET",t||"appinfo.json",!0),r.send(null)}catch(e){n({status:404})}}else e&&e(c)},f=function(){var e=window.location.href;if("baseURI"in window.document)e=window.document.baseURI;else{var t=window.document.getElementsByTagName("base");t.length>0&&(e=t[0].href)}var n=e.match(new RegExp(".*://[^#]*/"));return n?n[0]:""},d=function(){if(window.PalmSystem&&window.PalmSystem.platformBack)return window.PalmSystem.platformBack()},h={},p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bridge=null,this.cancelled=!1,this.subscribe=!1}var t,n;return t=e,(n=[{key:"send",value:function(e){var t=e.service,n=void 0===t?"":t,r=e.method,o=void 0===r?"":r,a=e.parameters,s=void 0===a?{}:a,u=e.onSuccess,c=void 0===u?function(){}:u,l=e.onFailure,f=void 0===l?function(){}:l,d=e.onComplete,p=void 0===d?function(){}:d,g=e.subscribe,y=void 0!==g&&g;if(!window.PalmServiceBridge){var v={errorCode:-1,errorText:"PalmServiceBridge is not found.",returnValue:!1};return f(v),p(v),console.error("PalmServiceBridge is not found."),this}this.ts&&h[this.ts]&&delete h[this.ts];var m,b=i({},s);return this.subscribe=y,this.subscribe&&(b.subscribe=this.subscribe),b.subscribe&&(this.subscribe=b.subscribe),this.ts=Date.now(),h[this.ts]=this,this.bridge=new PalmServiceBridge,this.bridge.onservicecallback=this.callback.bind(this,c,f,p),this.bridge.call(("/"!==(m=n).slice(-1)&&(m+="/"),m+o),JSON.stringify(b)),this}},{key:"callback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!this.cancelled){var i={};try{i=JSON.parse(r)}catch(e){i={errorCode:-1,errorText:r,returnValue:!1}}var o=i,a=o.errorCode,s=o.returnValue;a||!1===s?(i.returnValue=!1,t(i)):(i.returnValue=!0,e(i)),n(i),this.subscribe||this.cancel()}}},{key:"cancel",value:function(){this.cancelled=!0,null!==this.bridge&&(this.bridge.cancel(),this.bridge=null),this.ts&&h[this.ts]&&delete h[this.ts]}}])&&a(t.prototype,n),e}(),g={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i({service:e},t);return(new p).send(n)}},y={};if("object"===("undefined"==typeof window?"undefined":s(window))&&window.PalmSystem){if(window.navigator.userAgent.indexOf("SmartWatch")>-1)y.watch=!0;else if(window.navigator.userAgent.indexOf("SmartTV")>-1||window.navigator.userAgent.indexOf("Large Screen")>-1)y.tv=!0;else{try{var v=JSON.parse(window.PalmSystem.deviceInfo||"{}");if(v.platformVersionMajor&&v.platformVersionMinor){var m=Number(v.platformVersionMajor),b=Number(v.platformVersionMinor);m<3||3===m&&b<=0?y.legacy=!0:y.open=!0}}catch(e){y.open=!0}window.Mojo=window.Mojo||{relaunch:function(){}},window.PalmSystem.stageReady&&window.PalmSystem.stageReady()}if(window.navigator.userAgent.indexOf("Chr0me")>-1||window.navigator.userAgent.indexOf("Chrome")>-1){var w=window.navigator.userAgent.indexOf("Chr0me")>-1?window.navigator.userAgent.indexOf("Chr0me"):window.navigator.userAgent.indexOf("Chrome"),S=window.navigator.userAgent.slice(w).indexOf(" "),_=window.navigator.userAgent.slice(w+7,w+S).split(".");y.chrome=Number(_[0])}else y.chrome=0}else y.unknown=!0;var T=y,k={},E=function(e){if(0===Object.keys(k).length){try{var t=JSON.parse(window.PalmSystem.deviceInfo);k.modelName=t.modelName,k.version=t.platformVersion,k.versionMajor=t.platformVersionMajor,k.versionMinor=t.platformVersionMinor,k.versionDot=t.platformVersionDot,k.sdkVersion=t.platformVersion,k.screenWidth=t.screenWidth,k.screenHeight=t.screenHeight}catch(e){k.modelName="webOS Device"}k.screenHeight=k.screenHeight||window.screen.height,k.screenWidth=k.screenWidth||window.screen.width,T.tv&&(T.chrome>=68?(new p).send({service:"luna://com.webos.service.config",method:"getConfigs",parameters:{configNames:["tv.model.modelname","tv.nyx.platformVersion","tv.nyx.firmwareVersion","tv.hw.panelResolution","tv.hw.displayType","tv.hw.ddrSize","tv.model.supportHDR","tv.config.supportDolbyHDRContents","tv.config.supportDolbyTVATMOS"]},onSuccess:function(t){if(k.modelName=t.configs["tv.model.modelname"]||k.modelName,k.sdkVersion=t.configs["tv.nyx.platformVersion"]||k.sdkVersion,k.uhd="UD"===t.configs["tv.hw.panelResolution"]||"8K"===t.configs["tv.hw.panelResolution"],k.uhd8K="8K"===t.configs["tv.hw.panelResolution"],k.oled="OLED"===t.configs["tv.hw.displayType"],k.ddrSize=t.configs["tv.hw.ddrSize"],k.hdr10=!0===t.configs["tv.model.supportHDR"],k.dolbyVision=!0===t.configs["tv.config.supportDolbyHDRContents"],k.dolbyAtmos=!0===t.configs["tv.config.supportDolbyTVATMOS"],t.configs["tv.nyx.firmwareVersion"]&&"0.0.0"!==t.configs["tv.nyx.firmwareVersion"]||(t.configs["tv.nyx.firmwareVersion"]=t.configs["tv.nyx.platformVersion"]),t.configs["tv.nyx.firmwareVersion"]){k.version=t.configs["tv.nyx.firmwareVersion"];for(var n=k.version.split("."),r=["versionMajor","versionMinor","versionDot"],i=0;i<r.length;i+=1)try{k[r[i]]=parseInt(n[i],10)}catch(e){k[r[i]]=n[i]}}e(k)},onFailure:function(){e(k)}}):(new p).send({service:"luna://com.webos.service.tv.systemproperty",method:"getSystemInfo",parameters:{keys:["firmwareVersion","modelName","sdkVersion","UHD","OLED","ddrSize"]},onSuccess:function(t){if(k.modelName=t.modelName||k.modelName,k.sdkVersion=t.sdkVersion||k.sdkVersion,k.uhd=t.UHD?"true"===t.UHD:void 0,k.oled=t.OLED?"true"===t.OLED:void 0,k.ddrSize=t.ddrSize,t.firmwareVersion&&"0.0.0"!==t.firmwareVersion||(t.firmwareVersion=t.sdkVersion),t.firmwareVersion){k.version=t.firmwareVersion;for(var n=k.version.split("."),r=["versionMajor","versionMinor","versionDot"],i=0;i<r.length;i+=1)try{k[r[i]]=parseInt(n[i],10)}catch(e){k[r[i]]=n[i]}}(new p).send({service:"luna://com.webos.service.config",method:"getConfigs",parameters:{configNames:["tv.model.supportTemp8K","tv.model.supportHDR","tv.config.supportDolbyHDRContents","tv.config.supportDolbyTVATMOS"]},onSuccess:function(t){t.configs&&(k.uhd8K=!0===t.configs["tv.model.supportTemp8K"],k.hdr10=!0===t.configs["tv.model.supportHDR"],k.dolbyVision=!0===t.configs["tv.config.supportDolbyHDRContents"],k.dolbyAtmos=!0===t.configs["tv.config.supportDolbyTVATMOS"]),e(k)},onFailure:function(){k.uhd8K=!1,k.hdr10=!1,k.dolbyVision=!1,k.dolbyAtmos=!1,e(k)}})},onFailure:function(t){if(k.modelName=t.modelName||k.modelName,k.sdkVersion=t.sdkVersion||k.sdkVersion,t.firmwareVersion&&"0.0.0"!==t.firmwareVersion||(t.firmwareVersion=t.sdkVersion),t.firmwareVersion){k.version=t.firmwareVersion;for(var n=k.version.split("."),r=["versionMajor","versionMinor","versionDot"],i=0;i<r.length;i+=1)try{k[r[i]]=parseInt(n[i],10)}catch(e){k[r[i]]=n[i]}}k.uhd=t.UHD?"true"===t.UHD:void 0,k.uhd8K=!1,k.oled=t.OLED?"true"===t.OLED:void 0,k.ddrSize=t.ddrSize,k.hdr10=!1,k.dolbyVision=!1,k.dolbyAtmos=!1,e(k)}}))}else e(k)},A={isShowing:function(){return PalmSystem&&PalmSystem.isKeyboardVisible}},x=function(){var e={};if(window.PalmSystem){if(window.PalmSystem.country){var t=JSON.parse(window.PalmSystem.country);e.country=t.country,e.smartServiceCountry=t.smartServiceCountry}window.PalmSystem.timeZone&&(e.timezone=window.PalmSystem.timeZone)}return e},C="1.2.3"}])},function(e,t,n){"use strict";n.d(t,"g",function(){return v}),n.d(t,"e",function(){return f}),n.d(t,"f",function(){return d}),n.d(t,"h",function(){return l}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return g});var r=n(418),i=n(422),o=n(423),a=(n.n(o),n(424)),s=n(11),u=n(425),c=n(426);n.d(t,"a",function(){return c.a});var l={product:o.product,buildNumber:o.number,buildType:"production",revision:o.revision,cmit:o.cmit},f={},d={SSPLicenseFormatter:i},h={getOrCreateCxDeviceId:r.d,resetCxDeviceId:r.g,getOperator:r.c,getOttAccount:r.e,generateUUID:r.b,addDevice:r.a,getToken:r.f},p=new s.f,g=new u.a,y=new a.a(window),v={browser:y}},function(e,t,n){"use strict";function r(e){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function i(){var e=r("operator");return e||(e="default"),e}function o(){var e=r("ottaccount");return e||(e="a000002342"),e}function a(e,t,n){var r=new XMLHttpRequest;if(r.open("GET",e+"?accountid="+t+"&deviceid="+n,!1),r.send(),r.status===h){var i=JSON.parse(r.responseText);return window.console.log("Token: "+i.authtoken+" for "+t+":"+n),i.authtoken}window.console.error("Error getting token for "+t+":"+n+" - "+r.status)}function s(e,t,n,r,i){var o=new XMLHttpRequest;o.open("PUT",e+"?accountid="+t+"&deviceid="+n+"&devicetype="+r+"&friendlyname="+i,!1),o.send(),o.status===h?window.console.log("Added device: "+n+" to "+t):window.console.error("Error adding device: "+n+" to "+t+" - "+o.status)}function u(){return d()()}function c(e){if("undefined"!=typeof Storage){var t=localStorage.getItem("cxDeviceId."+e);return null===t&&(t=u(),localStorage.setItem("cxDeviceId."+e,t),window.console.log("Created new CxDeviceId "+t+" for "+e)),t}return window.console.error("No web storage support, can not store CxDeviceId"),u()}function l(e){"undefined"!=typeof Storage?(localStorage.removeItem("cxDeviceId."+e),window.console.log("Removed CxDeviceId for "+e)):window.console.error("No web storage support, a new id is generated every time")}n.d(t,"d",function(){return c}),n.d(t,"g",function(){return l}),n.d(t,"c",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return s}),n.d(t,"f",function(){return a});var f=n(419),d=n.n(f),h=200},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[r+s]=a[s];return t||o(a)}var i=n(420),o=n(421);e.exports=r},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t,n){"use strict";function r(e){var t=e;try{var n=String.fromCharCode.apply(String,new Uint8Array(e)),r=JSON.parse(n);t=Uint8Array.from(atob(r.license[0]),function(e){return e.charCodeAt(0)})}catch(e){}return t}function i(e){return'{"challenge":"'.concat(btoa(String.fromCharCode.apply(String,new Uint8Array(e))),'"}')}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"unpackageLicense",function(){return r}),n.d(t,"packagePayload",function(){return i})},function(e,t){e.exports={product:"5.20.2",number:21,revision:1725302744,cmit:"b9699ae71f5a1af99f1a0613ba5c5ffe9582e9a6"}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return c});var c=function(){function e(t){i(this,e),this._window=t,this._userAgent=t.navigator.userAgent,this._smartTV=!1,this._chrome=!1,this._safari=!1,this._isLowLatencyCapable=!1,this._parseUserAgent()}return a(e,[{key:"_parseUserAgent",value:function(){this._smartTV=this._userAgent.toLowerCase().includes("smart");var e=this._window.chrome,t=this._window.navigator,n=t.vendor,r=void 0!==this._window.opr,i=t.userAgent.indexOf("Edge")>-1;t.userAgent.match("CriOS")?this._chrome=!0:null!==e&&void 0!==e&&"Google Inc."===n&&!1===r&&!1===i&&(this._chrome=!0),this._safari=-1!==this._userAgent.indexOf("Safari")&&-1===this._userAgent.indexOf("Chrome")&&-1===this._userAgent.indexOf("CriOS")}},{key:"isChrome",value:function(){return this._chrome}},{key:"isSmartTV",value:function(){return this._smartTV}},{key:"isSafari",value:function(){return!this._smartTV&&this._safari}},{key:"_getSmartTVOS",value:function(){var e="Browser",t=/Tizen|VIDAA|Web0S/gi,n=this._userAgent.match(t);return n&&(e=n[0]),e}},{key:"_handleTizenVersion",value:function(){var e=!1,t=/Tizen\W([\d|.]+)/g,n=this._userAgent.match(t);if(n){var r=n[0].slice("tizen ".length);e=Number(r)>=5.5}return e}},{key:"_handleChromium4DigitVersion",value:function(){var e=!1,t=/chrome\W([\d|.]+)/g,n=this._userAgent.toLocaleLowerCase().match(t);if(n){var r=n[0].slice("chrome ".length),i=r.split(".");e=Number(i[0])>=68}return e}},{key:"_handleVidaaVersion",value:function(){var e=!1;if(-1!==this._userAgent.toLocaleLowerCase().indexOf("vidaa")){var t=/VIDAA\W([\d|.]+)/g,n=this._userAgent.match(t);if(n){var r=n[0].slice("vidaa ".length);e=Number(r)>=5}}return e}},{key:"isLowLatencyCapable",value:function(){return this._isLowLatencyCapable=this._handleTizenVersion()||this._handleChromium4DigitVersion()||this._handleVidaaVersion(),this._isLowLatencyCapable}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=f(e,"string");return"symbol"==r(t)?t:t+""}function f(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return h});var d=n(11),h=function(){function e(){s(this,e)}return c(e,[{key:"getStartDuration",value:function(e){var t=[];return this._enumerateStartDurations(e,function(n,r){t.push({url:e?void 0:n,duration:r})}),t}},{key:"getSeekDuration",value:function(e){var t=[];return this._enumerateSeekDurations(e,function(n,r){t.push({url:e?void 0:n,duration:r})}),t}},{key:"getStartDurationDetails",value:function(e){if(e){for(var t=[],n=OTV.eventTimeline.getTimelineList(),r=-1,i=0;i<n.length;i++){var o=n[i];if(o.eventType===d.g.playback){var a=JSON.parse(o.extra)[d.e.url];if(r>=0&&o.command===d.c.firstFrame){if(a===e){var s=n.slice(r,i+1);t=t.concat(s)}r=-1}o.command===d.c.setURL&&a===e&&(r=i)}}return t}return[]}},{key:"getSeekDurationDetails",value:function(e){if(e){for(var t=[],n=OTV.eventTimeline.getTimelineList(),r=-1,i=0;i<n.length;i++){var o=n[i];if(o.eventType===d.g.playback){var a=JSON.parse(o.extra)[d.e.url];if(r>=0&&o.command===d.c.seeked){if(a===e){var s=n.slice(r,i+1);t=t.concat(s)}r=-1}o.command===d.c.seeking&&a===e&&(r=i)}}return t}return[]}},{key:"getZapDuration",value:function(e,t){if(e&&t){for(var n,r=OTV.eventTimeline.getTimelineList(),i=r.length-1;i>=0;i--){var o=r[i];if(o.eventType===d.g.playback){var a=JSON.parse(o.extra)[d.e.url];if(n&&o.command===d.c.stop){if(a===e)return n.time-o.time;n=void 0}o.command===d.c.firstFrame&&a===t&&(n=o)}}return-1}return-1}},{key:"_enumerateStartDurations",value:function(e,t){var n,r,o=OTV.eventTimeline.getTimelineList(),a=i(o);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.eventType===d.g.playback){var u=JSON.parse(s.extra)[d.e.url],c=!e||u===e;if(n&&s.command===d.c.firstFrame){if(c){t(u,s.time-n.time)}n=void 0}s.command===d.c.setURL&&c&&(n=s)}}}catch(e){a.e(e)}finally{a.f()}}},{key:"_enumerateSeekDurations",value:function(e,t){var n,r,o=OTV.eventTimeline.getTimelineList(),a=i(o);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.eventType===d.g.playback){var u=JSON.parse(s.extra)[d.e.url],c=!e||u===e;if(n&&s.command===d.c.seeked){if(c){t(u,s.time-n.time)}n=void 0}s.command===d.c.seeking&&c&&(n=s)}}}catch(e){a.e(e)}finally{a.f()}}}])}()},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=u(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.d(t,"a",function(){return c});var c=function(){function e(t){if(i(this,e),"undefined"==typeof ni||void 0===ni.initialize)throw new Error("Nagra Insight module not loaded");ni.initialize(t),this.timeUpdateHandle=this._onTimeUpdate.bind(this),this.loadStartHandle=this._onLoadStart.bind(this),this.loadedMetadataHandle=this._onLoadedMetadata.bind(this),this.pauseHandle=this._onPause.bind(this),this.playingHandle=this._onPlaying.bind(this),this.seekingHandle=this._onSeeking.bind(this),this.bufferingHandle=this._onBuffering.bind(this),this.errorHandle=this._onError.bind(this),this.availableBitratesChangedHandle=this._onAvailableBitratesChanged.bind(this),this.networkErrorHandle=this._onNetworkError.bind(this),this.bitrateChangedHandle=this._onBitrateChanged.bind(this),this.networkStatisticsListeners={availableBitratesChanged:this.availableBitratesChangedHandle,errorChanged:this.networkErrorHandle},this.playbackStatisticsListeners={streamBitrateChanged:this.bitrateChangedHandle}}return a(e,[{key:"startSession",value:function(e,t,n){if(this.player)throw new Error("Only one insight session is possible at a time");this.player=e,this.content=t,this.liveOffset=0,n&&ni.setUserInfo(n),this.player.one("loadstart",this.loadStartHandle),this.audioLanguage=this._getAudioLanguage()}},{key:"stopSession",value:function(){this._cancelEvents(),ni.stop(),this.player=void 0}},{key:"terminate",value:function(){ni.terminate(),this._invalidate()}},{key:"_invalidate",value:function(){var e=function(){throw new Error("This OtvInsightAgent object is invalid after termination.")};this.startSession=e,this.stopSession=e,this.terminate=e}},{key:"_initialiseEvents",value:function(){this.player.on("pause",this.pauseHandle),this.player.on("playing",this.playingHandle),this.player.on("seeking",this.seekingHandle),this.player.on("waiting",this.bufferingHandle),this.player.on("error",this.errorHandle),this.player.on("timeupdate",this.timeUpdateHandle),this.player.one("loadedmetadata",this.loadedMetadataHandle),this.player.otvtoolkit().networkStatistics.addNetworkListener(this.networkStatisticsListeners),this.player.otvtoolkit().playbackStatistics.addPlaybackListener(this.playbackStatisticsListeners)}},{key:"_cancelEvents",value:function(){clearInterval(this.interval),this.interval=0,this.player.off("timeupdate",this.timeUpdateHandle),this.player.off("loadstart",this.loadStartHandle),this.player.off("loadedmetadata",this.loadedMetadataHandle),this.player.off("pause",this.pauseHandle),this.player.off("playing",this.playingHandle),this.player.off("seeking",this.seekingHandle),this.player.off("waiting",this.bufferingHandle),this.player.off("error",this.errorHandle),this.player.otvtoolkit().networkStatistics.removeNetworkListener(this.networkStatisticsListeners),this.player.otvtoolkit().playbackStatistics.removePlaybackListener(this.playbackStatisticsListeners)}},{key:"_onLoadStart",value:function(){ni.play(),this._initialiseEvents(),this.frameDrops=this.player.otvtoolkit().renderingStatistics.getFrameDrops()||0}},{key:"_onPause",value:function(){this.player.paused()&&ni.pause()}},{key:"_onPlaying",value:function(){ni.playing()}},{key:"_onSeeking",value:function(){ni.seekTo(this.player.currentTime())}},{key:"_onBuffering",value:function(){ni.buffering()}},{key:"_onError",value:function(){ni.addErrorEvent(this.player.error().code.toString(),this.player.error().message)}},{key:"_onLoadedMetadata",value:function(){var e=Object.assign({},this.content),t=this.player.duration(),n=this.player.otvtoolkit().networkStatistics.getAdaptiveStreaming();e.uri=this.player.currentSrc();var r=n.availableBitrates;r.length&&(e.bitrates=r),t===1/0?ni.setLiveContent(e):(e.duration=t,ni.setVodContent(e)),this.interval=setInterval(this._pollTask.bind(this),1e3)}},{key:"_onTimeUpdate",value:function(){if(this.player.duration()===1/0){var e=this._getLiveOffset();e!==this.liveOffset&&(ni.setOffsetFromLive(e),this.liveOffset=e)}else{var t=this.player.currentTime();ni.setPosition(t)}}},{key:"_getLiveOffset",value:function(){var e=this.player.currentTime(),t=this.player.seekable(),n=t.end(t.length-1)-e;return Math.round(10*(n+Number.EPSILON))/10}},{key:"_onAvailableBitratesChanged",value:function(e){ni.setAvailableBitrates(e)}},{key:"_onNetworkError",value:function(e,t){ni.addErrorEvent(e,t)}},{key:"_onBitrateChanged",value:function(e){ni.setBitrate(e)}},{key:"_pollTask",value:function(){var e=this.player.otvtoolkit().renderingStatistics.getFrameDrops();if(e&&e!==this.frameDrops){var t=e-this.frameDrops;ni.setFrameDrops(t),this.frameDrops=e}var n=this._getAudioLanguage();n!==this.audioLanguage&&(ni.setAudioLanguage(n),this.audioLanguage=n)}},{key:"_getAudioLanguage",value:function(){var e=this.player.audioTracks().tracks_,t=e.find(function(e){return e.enabled});return t?t.language:void 0}}])}()}])});